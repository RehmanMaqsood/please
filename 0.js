! function(t) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = t();
    else if ("function" == typeof define && define.amd) define([], t);
    else {
        var e;
        e = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, e.Clipboard = t()
    }
}(function() {
    return function t(e, n, i) {
        function o(a, c) {
            if (!n[a]) {
                if (!e[a]) {
                    var l = "function" == typeof require && require;
                    if (!c && l) return l(a, !0);
                    if (r) return r(a, !0);
                    var s = new Error("Cannot find module '" + a + "'");
                    throw s.code = "MODULE_NOT_FOUND", s
                }
                var u = n[a] = {
                    exports: {}
                };
                e[a][0].call(u.exports, function(t) {
                    var n = e[a][1][t];
                    return o(n ? n : t)
                }, u, u.exports, t, e, n, i)
            }
            return n[a].exports
        }
        for (var r = "function" == typeof require && require, a = 0; a < i.length; a++) o(i[a]);
        return o
    }({
        1: [function(t, e, n) {
            var i = t("matches-selector");
            e.exports = function(t, e, n) {
                for (var o = n ? t : t.parentNode; o && o !== document;) {
                    if (i(o, e)) return o;
                    o = o.parentNode
                }
            }
        }, {
            "matches-selector": 2
        }],
        2: [function(t, e, n) {
            function i(t, e) {
                if (r) return r.call(t, e);
                for (var n = t.parentNode.querySelectorAll(e), i = 0; i < n.length; ++i)
                    if (n[i] == t) return !0;
                return !1
            }
            var o = Element.prototype,
                r = o.matchesSelector || o.webkitMatchesSelector || o.mozMatchesSelector || o.msMatchesSelector || o.oMatchesSelector;
            e.exports = i
        }, {}],
        3: [function(t, e, n) {
            var i = t("closest");
            n.bind = function(t, e, n, o, r) {
                return t.addEventListener(n, function(n) {
                    var r = n.target || n.srcElement;
                    n.delegateTarget = i(r, e, !0, t), n.delegateTarget && o.call(t, n)
                }, r)
            }, n.unbind = function(t, e, n, i) {
                t.removeEventListener(e, n, i)
            }
        }, {
            closest: 1
        }],
        4: [function(t, e, n) {
            function i(t) {
                var e = window.getSelection();
                if ("INPUT" === t.nodeName || "TEXTAREA" === t.nodeName) t.selectionStart = 0, t.selectionEnd = t.value.length;
                else {
                    var n = document.createRange();
                    n.selectNodeContents(t), e.removeAllRanges(), e.addRange(n)
                }
                return e.toString()
            }
            e.exports = i
        }, {}],
        5: [function(t, e, n) {
            function i() {}
            i.prototype = {
                on: function(t, e, n) {
                    var i = this.e || (this.e = {});
                    return (i[t] || (i[t] = [])).push({
                        fn: e,
                        ctx: n
                    }), this
                },
                once: function(t, e, n) {
                    function i() {
                        o.off(t, i), e.apply(n, arguments)
                    }
                    var o = this;
                    return i._ = e, this.on(t, i, n)
                },
                emit: function(t) {
                    var e = [].slice.call(arguments, 1),
                        n = ((this.e || (this.e = {}))[t] || []).slice(),
                        i = 0,
                        o = n.length;
                    for (i; o > i; i++) n[i].fn.apply(n[i].ctx, e);
                    return this
                },
                off: function(t, e) {
                    var n = this.e || (this.e = {}),
                        i = n[t],
                        o = [];
                    if (i && e)
                        for (var r = 0, a = i.length; a > r; r++) i[r].fn !== e && i[r].fn._ !== e && o.push(i[r]);
                    return o.length ? n[t] = o : delete n[t], this
                }
            }, e.exports = i
        }, {}],
        6: [function(t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    "default": t
                }
            }

            function o(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }
            n.__esModule = !0;
            var r = function() {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function(e, n, i) {
                        return n && t(e.prototype, n), i && t(e, i), e
                    }
                }(),
                a = t("select"),
                c = i(a),
                l = function() {
                    function t(e) {
                        o(this, t), this.resolveOptions(e), this.initSelection()
                    }
                    return t.prototype.resolveOptions = function() {
                        var t = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0];
                        this.action = t.action, this.emitter = t.emitter, this.target = t.target, this.text = t.text, this.trigger = t.trigger, this.selectedText = ""
                    }, t.prototype.initSelection = function() {
                        if (this.text && this.target) throw new Error('Multiple attributes declared, use either "target" or "text"');
                        if (this.text) this.selectFake();
                        else {
                            if (!this.target) throw new Error('Missing required attributes, use either "target" or "text"');
                            this.selectTarget()
                        }
                    }, t.prototype.selectFake = function() {
                        var t = this;
                        this.removeFake(), this.fakeHandler = document.body.addEventListener("click", function() {
                            return t.removeFake()
                        }), this.fakeElem = document.createElement("textarea"), this.fakeElem.style.position = "absolute", this.fakeElem.style.left = "-9999px", this.fakeElem.style.top = (window.pageYOffset || document.documentElement.scrollTop) + "px", this.fakeElem.setAttribute("readonly", ""), this.fakeElem.value = this.text, document.body.appendChild(this.fakeElem), this.selectedText = c["default"](this.fakeElem), this.copyText()
                    }, t.prototype.removeFake = function() {
                        this.fakeHandler && (document.body.removeEventListener("click"), this.fakeHandler = null), this.fakeElem && (document.body.removeChild(this.fakeElem), this.fakeElem = null)
                    }, t.prototype.selectTarget = function() {
                        this.selectedText = c["default"](this.target), this.copyText()
                    }, t.prototype.copyText = function() {
                        var t = void 0;
                        try {
                            t = document.execCommand(this.action)
                        } catch (e) {
                            t = !1
                        }
                        this.handleResult(t)
                    }, t.prototype.handleResult = function(t) {
                        t ? this.emitter.emit("success", {
                            action: this.action,
                            text: this.selectedText,
                            trigger: this.trigger,
                            clearSelection: this.clearSelection.bind(this)
                        }) : this.emitter.emit("error", {
                            action: this.action,
                            trigger: this.trigger,
                            clearSelection: this.clearSelection.bind(this)
                        })
                    }, t.prototype.clearSelection = function() {
                        this.target && this.target.blur(), window.getSelection().removeAllRanges()
                    }, t.prototype.destroy = function() {
                        this.removeFake()
                    }, r(t, [{
                        key: "action",
                        set: function() {
                            var t = arguments.length <= 0 || void 0 === arguments[0] ? "copy" : arguments[0];
                            if (this._action = t, "copy" !== this._action && "cut" !== this._action) throw new Error('Invalid "action" value, use either "copy" or "cut"')
                        },
                        get: function() {
                            return this._action
                        }
                    }, {
                        key: "target",
                        set: function(t) {
                            if (void 0 !== t) {
                                if (!t || "object" != typeof t || 1 !== t.nodeType) throw new Error('Invalid "target" value, use a valid Element');
                                this._target = t
                            }
                        },
                        get: function() {
                            return this._target
                        }
                    }]), t
                }();
            n["default"] = l, e.exports = n["default"]
        }, {
            select: 4
        }],
        7: [function(t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    "default": t
                }
            }

            function o(t, e) {
                if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                    constructor: {
                        value: t,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function a(t, e) {
                var n = "data-clipboard-" + t;
                return e.hasAttribute(n) ? e.getAttribute(n) : void 0
            }
            n.__esModule = !0;
            var c = t("./clipboard-action"),
                l = i(c),
                s = t("delegate"),
                u = i(s),
                f = t("tiny-emitter"),
                d = i(f),
                h = function(t) {
                    function e(n, i) {
                        o(this, e), t.call(this), this.resolveOptions(i), this.delegateClick(n)
                    }
                    return r(e, t), e.prototype.resolveOptions = function() {
                        var t = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0];
                        this.action = "function" == typeof t.action ? t.action : this.defaultAction, this.target = "function" == typeof t.target ? t.target : this.defaultTarget, this.text = "function" == typeof t.text ? t.text : this.defaultText
                    }, e.prototype.delegateClick = function(t) {
                        var e = this;
                        this.binding = u["default"].bind(document.body, t, "click", function(t) {
                            return e.onClick(t)
                        })
                    }, e.prototype.undelegateClick = function() {
                        u["default"].unbind(document.body, "click", this.binding)
                    }, e.prototype.onClick = function(t) {
                        this.clipboardAction && (this.clipboardAction = null), this.clipboardAction = new l["default"]({
                            action: this.action(t.delegateTarget),
                            target: this.target(t.delegateTarget),
                            text: this.text(t.delegateTarget),
                            trigger: t.delegateTarget,
                            emitter: this
                        })
                    }, e.prototype.defaultAction = function(t) {
                        return a("action", t)
                    }, e.prototype.defaultTarget = function(t) {
                        var e = a("target", t);
                        return e ? document.querySelector(e) : void 0
                    }, e.prototype.defaultText = function(t) {
                        return a("text", t)
                    }, e.prototype.destroy = function() {
                        this.undelegateClick(), this.clipboardAction && (this.clipboardAction.destroy(), this.clipboardAction = null)
                    }, e
                }(d["default"]);
            n["default"] = h, e.exports = n["default"]
        }, {
            "./clipboard-action": 6,
            delegate: 3,
            "tiny-emitter": 5
        }]
    }, {}, [7])(7)
});
(function(e) {
    function t(e, t, n) {
        switch (arguments.length) {
            case 2:
                return null != e ? e : t;
            case 3:
                return null != e ? e : null != t ? t : n;
            default:
                throw new Error("Implement me")
        }
    }

    function n() {
        return {
            empty: !1,
            unusedTokens: [],
            unusedInput: [],
            overflow: -2,
            charsLeftOver: 0,
            nullInput: !1,
            invalidMonth: null,
            invalidFormat: !1,
            userInvalidated: !1,
            iso: !1
        }
    }

    function a(e) {
        pe.suppressDeprecationWarnings === !1 && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + e)
    }

    function s(e, t) {
        var n = !0;
        return d(function() {
            return n && (a(e), n = !1), t.apply(this, arguments)
        }, t)
    }

    function r(e, t) {
        ft[e] || (a(t), ft[e] = !0)
    }

    function i(e, t) {
        return function(n) {
            return _(e.call(this, n), t)
        }
    }

    function o(e, t) {
        return function(n) {
            return this.localeData().ordinal(e.call(this, n), t)
        }
    }

    function u() {}

    function c(e, t) {
        t !== !1 && G(e), h(this, e), this._d = new Date(+e._d)
    }

    function l(e) {
        var t = v(e),
            n = t.year || 0,
            a = t.quarter || 0,
            s = t.month || 0,
            r = t.week || 0,
            i = t.day || 0,
            o = t.hour || 0,
            u = t.minute || 0,
            c = t.second || 0,
            l = t.millisecond || 0;
        this._milliseconds = +l + 1e3 * c + 6e4 * u + 36e5 * o, this._days = +i + 7 * r, this._months = +s + 3 * a + 12 * n, this._data = {}, this._locale = pe.localeData(), this._bubble()
    }

    function d(e, t) {
        for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
        return t.hasOwnProperty("toString") && (e.toString = t.toString), t.hasOwnProperty("valueOf") && (e.valueOf = t.valueOf), e
    }

    function h(e, t) {
        var n, a, s;
        if ("undefined" != typeof t._isAMomentObject && (e._isAMomentObject = t._isAMomentObject), "undefined" != typeof t._i && (e._i = t._i), "undefined" != typeof t._f && (e._f = t._f), "undefined" != typeof t._l && (e._l = t._l), "undefined" != typeof t._strict && (e._strict = t._strict), "undefined" != typeof t._tzm && (e._tzm = t._tzm), "undefined" != typeof t._isUTC && (e._isUTC = t._isUTC), "undefined" != typeof t._offset && (e._offset = t._offset), "undefined" != typeof t._pf && (e._pf = t._pf), "undefined" != typeof t._locale && (e._locale = t._locale), Fe.length > 0)
            for (n in Fe) a = Fe[n], s = t[a], "undefined" != typeof s && (e[a] = s);
        return e
    }

    function f(e) {
        return 0 > e ? Math.ceil(e) : Math.floor(e)
    }

    function _(e, t, n) {
        for (var a = "" + Math.abs(e), s = e >= 0; a.length < t;) a = "0" + a;
        return (s ? n ? "+" : "" : "-") + a
    }

    function m(e, t) {
        var n = {
            milliseconds: 0,
            months: 0
        };
        return n.months = t.month() - e.month() + 12 * (t.year() - e.year()), e.clone().add(n.months, "M").isAfter(t) && --n.months, n.milliseconds = +t - +e.clone().add(n.months, "M"), n
    }

    function y(e, t) {
        var n;
        return t = P(t, e), e.isBefore(t) ? n = m(e, t) : (n = m(t, e), n.milliseconds = -n.milliseconds, n.months = -n.months), n
    }

    function p(e, t) {
        return function(n, a) {
            var s, i;
            return null === a || isNaN(+a) || (r(t, "moment()." + t + "(period, number) is deprecated. Please use moment()." + t + "(number, period)."), i = n, n = a, a = i), n = "string" == typeof n ? +n : n, s = pe.duration(n, a), D(this, s, e), this
        }
    }

    function D(e, t, n, a) {
        var s = t._milliseconds,
            r = t._days,
            i = t._months;
        a = null == a ? !0 : a, s && e._d.setTime(+e._d + s * n), r && de(e, "Date", le(e, "Date") + r * n), i && ce(e, le(e, "Month") + i * n), a && pe.updateOffset(e, r || i)
    }

    function M(e) {
        return "[object Array]" === Object.prototype.toString.call(e)
    }

    function g(e) {
        return "[object Date]" === Object.prototype.toString.call(e) || e instanceof Date
    }

    function w(e, t, n) {
        var a, s = Math.min(e.length, t.length),
            r = Math.abs(e.length - t.length),
            i = 0;
        for (a = 0; s > a; a++)(n && e[a] !== t[a] || !n && b(e[a]) !== b(t[a])) && i++;
        return i + r
    }

    function Y(e) {
        if (e) {
            var t = e.toLowerCase().replace(/(.)s$/, "$1");
            e = it[e] || ot[t] || t
        }
        return e
    }

    function v(e) {
        var t, n, a = {};
        for (n in e) e.hasOwnProperty(n) && (t = Y(n), t && (a[t] = e[n]));
        return a
    }

    function k(t) {
        var n, a;
        if (0 === t.indexOf("week")) n = 7, a = "day";
        else {
            if (0 !== t.indexOf("month")) return;
            n = 12, a = "month"
        }
        pe[t] = function(s, r) {
            var i, o, u = pe._locale[t],
                c = [];
            if ("number" == typeof s && (r = s, s = e), o = function(e) {
                    var t = pe().utc().set(a, e);
                    return u.call(pe._locale, t, s || "")
                }, null != r) return o(r);
            for (i = 0; n > i; i++) c.push(o(i));
            return c
        }
    }

    function b(e) {
        var t = +e,
            n = 0;
        return 0 !== t && isFinite(t) && (n = t >= 0 ? Math.floor(t) : Math.ceil(t)), n
    }

    function S(e, t) {
        return new Date(Date.UTC(e, t + 1, 0)).getUTCDate()
    }

    function T(e, t, n) {
        return re(pe([e, 11, 31 + t - n]), t, n).week
    }

    function O(e) {
        return W(e) ? 366 : 365
    }

    function W(e) {
        return e % 4 === 0 && e % 100 !== 0 || e % 400 === 0
    }

    function G(e) {
        var t;
        e._a && -2 === e._pf.overflow && (t = e._a[ke] < 0 || e._a[ke] > 11 ? ke : e._a[be] < 1 || e._a[be] > S(e._a[ve], e._a[ke]) ? be : e._a[Se] < 0 || e._a[Se] > 23 ? Se : e._a[Te] < 0 || e._a[Te] > 59 ? Te : e._a[Oe] < 0 || e._a[Oe] > 59 ? Oe : e._a[We] < 0 || e._a[We] > 999 ? We : -1, e._pf._overflowDayOfYear && (ve > t || t > be) && (t = be), e._pf.overflow = t)
    }

    function F(e) {
        return null == e._isValid && (e._isValid = !isNaN(e._d.getTime()) && e._pf.overflow < 0 && !e._pf.empty && !e._pf.invalidMonth && !e._pf.nullInput && !e._pf.invalidFormat && !e._pf.userInvalidated, e._strict && (e._isValid = e._isValid && 0 === e._pf.charsLeftOver && 0 === e._pf.unusedTokens.length)), e._isValid
    }

    function U(e) {
        return e ? e.toLowerCase().replace("_", "-") : e
    }

    function C(e) {
        for (var t, n, a, s, r = 0; r < e.length;) {
            for (s = U(e[r]).split("-"), t = s.length, n = U(e[r + 1]), n = n ? n.split("-") : null; t > 0;) {
                if (a = z(s.slice(0, t).join("-"))) return a;
                if (n && n.length >= t && w(s, n, !0) >= t - 1) break;
                t--
            }
            r++
        }
        return null
    }

    function z(e) {
        var t = null;
        if (!Ge[e] && Ue) try {
            t = pe.locale(), require("./locale/" + e), pe.locale(t)
        } catch (n) {}
        return Ge[e]
    }

    function P(e, t) {
        return t._isUTC ? pe(e).zone(t._offset || 0) : pe(e).local()
    }

    function L(e) {
        return e.match(/\[[\s\S]/) ? e.replace(/^\[|\]$/g, "") : e.replace(/\\/g, "")
    }

    function I(e) {
        var t, n, a = e.match(Le);
        for (t = 0, n = a.length; n > t; t++) ht[a[t]] ? a[t] = ht[a[t]] : a[t] = L(a[t]);
        return function(s) {
            var r = "";
            for (t = 0; n > t; t++) r += a[t] instanceof Function ? a[t].call(s, e) : a[t];
            return r
        }
    }

    function H(e, t) {
        return e.isValid() ? (t = A(t, e.localeData()), ut[t] || (ut[t] = I(t)), ut[t](e)) : e.localeData().invalidDate()
    }

    function A(e, t) {
        function n(e) {
            return t.longDateFormat(e) || e
        }
        var a = 5;
        for (Ie.lastIndex = 0; a >= 0 && Ie.test(e);) e = e.replace(Ie, n), Ie.lastIndex = 0, a -= 1;
        return e
    }

    function x(e, t) {
        var n, a = t._strict;
        switch (e) {
            case "Q":
                return Je;
            case "DDDD":
                return Xe;
            case "YYYY":
            case "GGGG":
            case "gggg":
                return a ? Be : xe;
            case "Y":
            case "G":
            case "g":
                return Ke;
            case "YYYYYY":
            case "YYYYY":
            case "GGGGG":
            case "ggggg":
                return a ? Re : Ze;
            case "S":
                if (a) return Je;
            case "SS":
                if (a) return Qe;
            case "SSS":
                if (a) return Xe;
            case "DDD":
                return Ae;
            case "MMM":
            case "MMMM":
            case "dd":
            case "ddd":
            case "dddd":
                return Ee;
            case "a":
            case "A":
                return t._locale._meridiemParse;
            case "X":
                return qe;
            case "Z":
            case "ZZ":
                return je;
            case "T":
                return Ve;
            case "SSSS":
                return Ne;
            case "MM":
            case "DD":
            case "YY":
            case "GG":
            case "gg":
            case "HH":
            case "hh":
            case "mm":
            case "ss":
            case "ww":
            case "WW":
                return a ? Qe : He;
            case "M":
            case "D":
            case "d":
            case "H":
            case "h":
            case "m":
            case "s":
            case "w":
            case "W":
            case "e":
            case "E":
                return He;
            case "Do":
                return $e;
            default:
                return n = new RegExp(Q(J(e.replace("\\", "")), "i"))
        }
    }

    function Z(e) {
        e = e || "";
        var t = e.match(je) || [],
            n = t[t.length - 1] || [],
            a = (n + "").match(st) || ["-", 0, 0],
            s = +(60 * a[1]) + b(a[2]);
        return "+" === a[0] ? -s : s
    }

    function N(e, t, n) {
        var a, s = n._a;
        switch (e) {
            case "Q":
                null != t && (s[ke] = 3 * (b(t) - 1));
                break;
            case "M":
            case "MM":
                null != t && (s[ke] = b(t) - 1);
                break;
            case "MMM":
            case "MMMM":
                a = n._locale.monthsParse(t), null != a ? s[ke] = a : n._pf.invalidMonth = t;
                break;
            case "D":
            case "DD":
                null != t && (s[be] = b(t));
                break;
            case "Do":
                null != t && (s[be] = b(parseInt(t, 10)));
                break;
            case "DDD":
            case "DDDD":
                null != t && (n._dayOfYear = b(t));
                break;
            case "YY":
                s[ve] = pe.parseTwoDigitYear(t);
                break;
            case "YYYY":
            case "YYYYY":
            case "YYYYYY":
                s[ve] = b(t);
                break;
            case "a":
            case "A":
                n._isPm = n._locale.isPM(t);
                break;
            case "H":
            case "HH":
            case "h":
            case "hh":
                s[Se] = b(t);
                break;
            case "m":
            case "mm":
                s[Te] = b(t);
                break;
            case "s":
            case "ss":
                s[Oe] = b(t);
                break;
            case "S":
            case "SS":
            case "SSS":
            case "SSSS":
                s[We] = b(1e3 * ("0." + t));
                break;
            case "X":
                n._d = new Date(1e3 * parseFloat(t));
                break;
            case "Z":
            case "ZZ":
                n._useUTC = !0, n._tzm = Z(t);
                break;
            case "dd":
            case "ddd":
            case "dddd":
                a = n._locale.weekdaysParse(t), null != a ? (n._w = n._w || {}, n._w.d = a) : n._pf.invalidWeekday = t;
                break;
            case "w":
            case "ww":
            case "W":
            case "WW":
            case "d":
            case "e":
            case "E":
                e = e.substr(0, 1);
            case "gggg":
            case "GGGG":
            case "GGGGG":
                e = e.substr(0, 2), t && (n._w = n._w || {}, n._w[e] = b(t));
                break;
            case "gg":
            case "GG":
                n._w = n._w || {}, n._w[e] = pe.parseTwoDigitYear(t)
        }
    }

    function E(e) {
        var n, a, s, r, i, o, u;
        n = e._w, null != n.GG || null != n.W || null != n.E ? (i = 1, o = 4, a = t(n.GG, e._a[ve], re(pe(), 1, 4).year), s = t(n.W, 1), r = t(n.E, 1)) : (i = e._locale._week.dow, o = e._locale._week.doy, a = t(n.gg, e._a[ve], re(pe(), i, o).year), s = t(n.w, 1), null != n.d ? (r = n.d, i > r && ++s) : r = null != n.e ? n.e + i : i), u = ie(a, s, r, o, i), e._a[ve] = u.year, e._dayOfYear = u.dayOfYear
    }

    function j(e) {
        var n, a, s, r, i = [];
        if (!e._d) {
            for (s = q(e), e._w && null == e._a[be] && null == e._a[ke] && E(e), e._dayOfYear && (r = t(e._a[ve], s[ve]), e._dayOfYear > O(r) && (e._pf._overflowDayOfYear = !0), a = te(r, 0, e._dayOfYear), e._a[ke] = a.getUTCMonth(), e._a[be] = a.getUTCDate()), n = 0; 3 > n && null == e._a[n]; ++n) e._a[n] = i[n] = s[n];
            for (; 7 > n; n++) e._a[n] = i[n] = null == e._a[n] ? 2 === n ? 1 : 0 : e._a[n];
            e._d = (e._useUTC ? te : ee).apply(null, i), null != e._tzm && e._d.setUTCMinutes(e._d.getUTCMinutes() + e._tzm)
        }
    }

    function V(e) {
        var t;
        e._d || (t = v(e._i), e._a = [t.year, t.month, t.day, t.hour, t.minute, t.second, t.millisecond], j(e))
    }

    function q(e) {
        var t = new Date;
        return e._useUTC ? [t.getUTCFullYear(), t.getUTCMonth(), t.getUTCDate()] : [t.getFullYear(), t.getMonth(), t.getDate()]
    }

    function $(e) {
        if (e._f === pe.ISO_8601) return void B(e);
        e._a = [], e._pf.empty = !0;
        var t, n, a, s, r, i = "" + e._i,
            o = i.length,
            u = 0;
        for (a = A(e._f, e._locale).match(Le) || [], t = 0; t < a.length; t++) s = a[t], n = (i.match(x(s, e)) || [])[0], n && (r = i.substr(0, i.indexOf(n)), r.length > 0 && e._pf.unusedInput.push(r), i = i.slice(i.indexOf(n) + n.length), u += n.length), ht[s] ? (n ? e._pf.empty = !1 : e._pf.unusedTokens.push(s), N(s, n, e)) : e._strict && !n && e._pf.unusedTokens.push(s);
        e._pf.charsLeftOver = o - u, i.length > 0 && e._pf.unusedInput.push(i), e._isPm && e._a[Se] < 12 && (e._a[Se] += 12), e._isPm === !1 && 12 === e._a[Se] && (e._a[Se] = 0), j(e), G(e)
    }

    function J(e) {
        return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function(e, t, n, a, s) {
            return t || n || a || s
        })
    }

    function Q(e) {
        return e.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")
    }

    function X(e) {
        var t, a, s, r, i;
        if (0 === e._f.length) return e._pf.invalidFormat = !0, void(e._d = new Date(NaN));
        for (r = 0; r < e._f.length; r++) i = 0, t = h({}, e), t._pf = n(), t._f = e._f[r], $(t), F(t) && (i += t._pf.charsLeftOver, i += 10 * t._pf.unusedTokens.length, t._pf.score = i, (null == s || s > i) && (s = i, a = t));
        d(e, a || t)
    }

    function B(e) {
        var t, n, a = e._i,
            s = et.exec(a);
        if (s) {
            for (e._pf.iso = !0, t = 0, n = nt.length; n > t; t++)
                if (nt[t][1].exec(a)) {
                    e._f = nt[t][0] + (s[6] || " ");
                    break
                }
            for (t = 0, n = at.length; n > t; t++)
                if (at[t][1].exec(a)) {
                    e._f += at[t][0];
                    break
                }
            a.match(je) && (e._f += "Z"), $(e)
        } else e._isValid = !1
    }

    function R(e) {
        B(e), e._isValid === !1 && (delete e._isValid, pe.createFromInputFallback(e))
    }

    function K(t) {
        var n, a = t._i;
        a === e ? t._d = new Date : g(a) ? t._d = new Date(+a) : null !== (n = Ce.exec(a)) ? t._d = new Date(+n[1]) : "string" == typeof a ? R(t) : M(a) ? (t._a = a.slice(0), j(t)) : "object" == typeof a ? V(t) : "number" == typeof a ? t._d = new Date(a) : pe.createFromInputFallback(t)
    }

    function ee(e, t, n, a, s, r, i) {
        var o = new Date(e, t, n, a, s, r, i);
        return 1970 > e && o.setFullYear(e), o
    }

    function te(e) {
        var t = new Date(Date.UTC.apply(null, arguments));
        return 1970 > e && t.setUTCFullYear(e), t
    }

    function ne(e, t) {
        if ("string" == typeof e)
            if (isNaN(e)) {
                if (e = t.weekdaysParse(e), "number" != typeof e) return null
            } else e = parseInt(e, 10);
        return e
    }

    function ae(e, t, n, a, s) {
        return s.relativeTime(t || 1, !!n, e, a)
    }

    function se(e, t, n) {
        var a = pe.duration(e).abs(),
            s = Ye(a.as("s")),
            r = Ye(a.as("m")),
            i = Ye(a.as("h")),
            o = Ye(a.as("d")),
            u = Ye(a.as("M")),
            c = Ye(a.as("y")),
            l = s < ct.s && ["s", s] || 1 === r && ["m"] || r < ct.m && ["mm", r] || 1 === i && ["h"] || i < ct.h && ["hh", i] || 1 === o && ["d"] || o < ct.d && ["dd", o] || 1 === u && ["M"] || u < ct.M && ["MM", u] || 1 === c && ["y"] || ["yy", c];
        return l[2] = t, l[3] = +e > 0, l[4] = n, ae.apply({}, l)
    }

    function re(e, t, n) {
        var a, s = n - t,
            r = n - e.day();
        return r > s && (r -= 7), s - 7 > r && (r += 7), a = pe(e).add(r, "d"), {
            week: Math.ceil(a.dayOfYear() / 7),
            year: a.year()
        }
    }

    function ie(e, t, n, a, s) {
        var r, i, o = te(e, 0, 1).getUTCDay();
        return o = 0 === o ? 7 : o, n = null != n ? n : s, r = s - o + (o > a ? 7 : 0) - (s > o ? 7 : 0), i = 7 * (t - 1) + (n - s) + r + 1, {
            year: i > 0 ? e : e - 1,
            dayOfYear: i > 0 ? i : O(e - 1) + i
        }
    }

    function oe(t) {
        var n = t._i,
            a = t._f;
        return t._locale = t._locale || pe.localeData(t._l), null === n || a === e && "" === n ? pe.invalid({
            nullInput: !0
        }) : ("string" == typeof n && (t._i = n = t._locale.preparse(n)), pe.isMoment(n) ? new c(n, !0) : (a ? M(a) ? X(t) : $(t) : K(t), new c(t)))
    }

    function ue(e, t) {
        var n, a;
        if (1 === t.length && M(t[0]) && (t = t[0]), !t.length) return pe();
        for (n = t[0], a = 1; a < t.length; ++a) t[a][e](n) && (n = t[a]);
        return n
    }

    function ce(e, t) {
        var n;
        return "string" == typeof t && (t = e.localeData().monthsParse(t), "number" != typeof t) ? e : (n = Math.min(e.date(), S(e.year(), t)), e._d["set" + (e._isUTC ? "UTC" : "") + "Month"](t, n), e)
    }

    function le(e, t) {
        return e._d["get" + (e._isUTC ? "UTC" : "") + t]()
    }

    function de(e, t, n) {
        return "Month" === t ? ce(e, n) : e._d["set" + (e._isUTC ? "UTC" : "") + t](n)
    }

    function he(e, t) {
        return function(n) {
            return null != n ? (de(this, e, n), pe.updateOffset(this, t), this) : le(this, e)
        }
    }

    function fe(e) {
        return 400 * e / 146097
    }

    function _e(e) {
        return 146097 * e / 400
    }

    function me(e) {
        pe.duration.fn[e] = function() {
            return this._data[e]
        }
    }

    function ye(e) {
        "undefined" == typeof ender && (De = we.moment, e ? we.moment = s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.", pe) : we.moment = pe)
    }
    for (var pe, De, Me, ge = "2.8.1", we = "undefined" != typeof global ? global : this, Ye = Math.round, ve = 0, ke = 1, be = 2, Se = 3, Te = 4, Oe = 5, We = 6, Ge = {}, Fe = [], Ue = "undefined" != typeof module && module.exports, Ce = /^\/?Date\((\-?\d+)/i, ze = /(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/, Pe = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/, Le = /(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g, Ie = /(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g, He = /\d\d?/, Ae = /\d{1,3}/, xe = /\d{1,4}/, Ze = /[+\-]?\d{1,6}/, Ne = /\d+/, Ee = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i, je = /Z|[\+\-]\d\d:?\d\d/gi, Ve = /T/i, qe = /[\+\-]?\d+(\.\d{1,3})?/, $e = /\d{1,2}/, Je = /\d/, Qe = /\d\d/, Xe = /\d{3}/, Be = /\d{4}/, Re = /[+-]?\d{6}/, Ke = /[+-]?\d+/, et = /^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/, tt = "YYYY-MM-DDTHH:mm:ssZ", nt = [
            ["YYYYYY-MM-DD", /[+-]\d{6}-\d{2}-\d{2}/],
            ["YYYY-MM-DD", /\d{4}-\d{2}-\d{2}/],
            ["GGGG-[W]WW-E", /\d{4}-W\d{2}-\d/],
            ["GGGG-[W]WW", /\d{4}-W\d{2}/],
            ["YYYY-DDD", /\d{4}-\d{3}/]
        ], at = [
            ["HH:mm:ss.SSSS", /(T| )\d\d:\d\d:\d\d\.\d+/],
            ["HH:mm:ss", /(T| )\d\d:\d\d:\d\d/],
            ["HH:mm", /(T| )\d\d:\d\d/],
            ["HH", /(T| )\d\d/]
        ], st = /([\+\-]|\d\d)/gi, rt = ("Date|Hours|Minutes|Seconds|Milliseconds".split("|"), {
            Milliseconds: 1,
            Seconds: 1e3,
            Minutes: 6e4,
            Hours: 36e5,
            Days: 864e5,
            Months: 2592e6,
            Years: 31536e6
        }), it = {
            ms: "millisecond",
            s: "second",
            m: "minute",
            h: "hour",
            d: "day",
            D: "date",
            w: "week",
            W: "isoWeek",
            M: "month",
            Q: "quarter",
            y: "year",
            DDD: "dayOfYear",
            e: "weekday",
            E: "isoWeekday",
            gg: "weekYear",
            GG: "isoWeekYear"
        }, ot = {
            dayofyear: "dayOfYear",
            isoweekday: "isoWeekday",
            isoweek: "isoWeek",
            weekyear: "weekYear",
            isoweekyear: "isoWeekYear"
        }, ut = {}, ct = {
            s: 45,
            m: 45,
            h: 22,
            d: 26,
            M: 11
        }, lt = "DDD w W M D d".split(" "), dt = "M D H h m s w W".split(" "), ht = {
            M: function() {
                return this.month() + 1
            },
            MMM: function(e) {
                return this.localeData().monthsShort(this, e)
            },
            MMMM: function(e) {
                return this.localeData().months(this, e)
            },
            D: function() {
                return this.date()
            },
            DDD: function() {
                return this.dayOfYear()
            },
            d: function() {
                return this.day()
            },
            dd: function(e) {
                return this.localeData().weekdaysMin(this, e)
            },
            ddd: function(e) {
                return this.localeData().weekdaysShort(this, e)
            },
            dddd: function(e) {
                return this.localeData().weekdays(this, e)
            },
            w: function() {
                return this.week()
            },
            W: function() {
                return this.isoWeek()
            },
            YY: function() {
                return _(this.year() % 100, 2)
            },
            YYYY: function() {
                return _(this.year(), 4)
            },
            YYYYY: function() {
                return _(this.year(), 5)
            },
            YYYYYY: function() {
                var e = this.year(),
                    t = e >= 0 ? "+" : "-";
                return t + _(Math.abs(e), 6)
            },
            gg: function() {
                return _(this.weekYear() % 100, 2)
            },
            gggg: function() {
                return _(this.weekYear(), 4)
            },
            ggggg: function() {
                return _(this.weekYear(), 5)
            },
            GG: function() {
                return _(this.isoWeekYear() % 100, 2)
            },
            GGGG: function() {
                return _(this.isoWeekYear(), 4)
            },
            GGGGG: function() {
                return _(this.isoWeekYear(), 5)
            },
            e: function() {
                return this.weekday()
            },
            E: function() {
                return this.isoWeekday()
            },
            a: function() {
                return this.localeData().meridiem(this.hours(), this.minutes(), !0)
            },
            A: function() {
                return this.localeData().meridiem(this.hours(), this.minutes(), !1)
            },
            H: function() {
                return this.hours()
            },
            h: function() {
                return this.hours() % 12 || 12
            },
            m: function() {
                return this.minutes()
            },
            s: function() {
                return this.seconds()
            },
            S: function() {
                return b(this.milliseconds() / 100)
            },
            SS: function() {
                return _(b(this.milliseconds() / 10), 2)
            },
            SSS: function() {
                return _(this.milliseconds(), 3)
            },
            SSSS: function() {
                return _(this.milliseconds(), 3)
            },
            Z: function() {
                var e = -this.zone(),
                    t = "+";
                return 0 > e && (e = -e, t = "-"), t + _(b(e / 60), 2) + ":" + _(b(e) % 60, 2)
            },
            ZZ: function() {
                var e = -this.zone(),
                    t = "+";
                return 0 > e && (e = -e, t = "-"), t + _(b(e / 60), 2) + _(b(e) % 60, 2)
            },
            z: function() {
                return this.zoneAbbr()
            },
            zz: function() {
                return this.zoneName()
            },
            X: function() {
                return this.unix()
            },
            Q: function() {
                return this.quarter()
            }
        }, ft = {}, _t = ["months", "monthsShort", "weekdays", "weekdaysShort", "weekdaysMin"]; lt.length;) Me = lt.pop(), ht[Me + "o"] = o(ht[Me], Me);
    for (; dt.length;) Me = dt.pop(), ht[Me + Me] = i(ht[Me], 2);
    ht.DDDD = i(ht.DDD, 3), d(u.prototype, {
        set: function(e) {
            var t, n;
            for (n in e) t = e[n], "function" == typeof t ? this[n] = t : this["_" + n] = t
        },
        _months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
        months: function(e) {
            return this._months[e.month()]
        },
        _monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
        monthsShort: function(e) {
            return this._monthsShort[e.month()]
        },
        monthsParse: function(e) {
            var t, n, a;
            for (this._monthsParse || (this._monthsParse = []), t = 0; 12 > t; t++)
                if (this._monthsParse[t] || (n = pe.utc([2e3, t]), a = "^" + this.months(n, "") + "|^" + this.monthsShort(n, ""), this._monthsParse[t] = new RegExp(a.replace(".", ""), "i")), this._monthsParse[t].test(e)) return t
        },
        _weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
        weekdays: function(e) {
            return this._weekdays[e.day()]
        },
        _weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
        weekdaysShort: function(e) {
            return this._weekdaysShort[e.day()]
        },
        _weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
        weekdaysMin: function(e) {
            return this._weekdaysMin[e.day()]
        },
        weekdaysParse: function(e) {
            var t, n, a;
            for (this._weekdaysParse || (this._weekdaysParse = []), t = 0; 7 > t; t++)
                if (this._weekdaysParse[t] || (n = pe([2e3, 1]).day(t), a = "^" + this.weekdays(n, "") + "|^" + this.weekdaysShort(n, "") + "|^" + this.weekdaysMin(n, ""), this._weekdaysParse[t] = new RegExp(a.replace(".", ""), "i")), this._weekdaysParse[t].test(e)) return t
        },
        _longDateFormat: {
            LT: "h:mm A",
            L: "MM/DD/YYYY",
            LL: "MMMM D, YYYY",
            LLL: "MMMM D, YYYY LT",
            LLLL: "dddd, MMMM D, YYYY LT"
        },
        longDateFormat: function(e) {
            var t = this._longDateFormat[e];
            return !t && this._longDateFormat[e.toUpperCase()] && (t = this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g, function(e) {
                return e.slice(1)
            }), this._longDateFormat[e] = t), t
        },
        isPM: function(e) {
            return "p" === (e + "").toLowerCase().charAt(0)
        },
        _meridiemParse: /[ap]\.?m?\.?/i,
        meridiem: function(e, t, n) {
            return e > 11 ? n ? "pm" : "PM" : n ? "am" : "AM"
        },
        _calendar: {
            sameDay: "[Today at] LT",
            nextDay: "[Tomorrow at] LT",
            nextWeek: "dddd [at] LT",
            lastDay: "[Yesterday at] LT",
            lastWeek: "[Last] dddd [at] LT",
            sameElse: "L"
        },
        calendar: function(e, t) {
            var n = this._calendar[e];
            return "function" == typeof n ? n.apply(t) : n
        },
        _relativeTime: {
            future: "in %s",
            past: "%s ago",
            s: "a few seconds",
            m: "a minute",
            mm: "%d minutes",
            h: "an hour",
            hh: "%d hours",
            d: "a day",
            dd: "%d days",
            M: "a month",
            MM: "%d months",
            y: "a year",
            yy: "%d years"
        },
        relativeTime: function(e, t, n, a) {
            var s = this._relativeTime[n];
            return "function" == typeof s ? s(e, t, n, a) : s.replace(/%d/i, e)
        },
        pastFuture: function(e, t) {
            var n = this._relativeTime[e > 0 ? "future" : "past"];
            return "function" == typeof n ? n(t) : n.replace(/%s/i, t)
        },
        ordinal: function(e) {
            return this._ordinal.replace("%d", e)
        },
        _ordinal: "%d",
        preparse: function(e) {
            return e
        },
        postformat: function(e) {
            return e
        },
        week: function(e) {
            return re(e, this._week.dow, this._week.doy).week
        },
        _week: {
            dow: 0,
            doy: 6
        },
        _invalidDate: "Invalid date",
        invalidDate: function() {
            return this._invalidDate
        }
    }), pe = function(t, a, s, r) {
        var i;
        return "boolean" == typeof s && (r = s, s = e), i = {}, i._isAMomentObject = !0, i._i = t, i._f = a, i._l = s, i._strict = r, i._isUTC = !1, i._pf = n(), oe(i)
    }, pe.suppressDeprecationWarnings = !1, pe.createFromInputFallback = s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.", function(e) {
        e._d = new Date(e._i)
    }), pe.min = function() {
        var e = [].slice.call(arguments, 0);
        return ue("isBefore", e)
    }, pe.max = function() {
        var e = [].slice.call(arguments, 0);
        return ue("isAfter", e)
    }, pe.utc = function(t, a, s, r) {
        var i;
        return "boolean" == typeof s && (r = s, s = e), i = {}, i._isAMomentObject = !0, i._useUTC = !0, i._isUTC = !0, i._l = s, i._i = t, i._f = a, i._strict = r, i._pf = n(), oe(i).utc()
    }, pe.unix = function(e) {
        return pe(1e3 * e)
    }, pe.duration = function(e, t) {
        var n, a, s, r, i = e,
            o = null;
        return pe.isDuration(e) ? i = {
            ms: e._milliseconds,
            d: e._days,
            M: e._months
        } : "number" == typeof e ? (i = {}, t ? i[t] = e : i.milliseconds = e) : (o = ze.exec(e)) ? (n = "-" === o[1] ? -1 : 1, i = {
            y: 0,
            d: b(o[be]) * n,
            h: b(o[Se]) * n,
            m: b(o[Te]) * n,
            s: b(o[Oe]) * n,
            ms: b(o[We]) * n
        }) : (o = Pe.exec(e)) ? (n = "-" === o[1] ? -1 : 1, s = function(e) {
            var t = e && parseFloat(e.replace(",", "."));
            return (isNaN(t) ? 0 : t) * n
        }, i = {
            y: s(o[2]),
            M: s(o[3]),
            d: s(o[4]),
            h: s(o[5]),
            m: s(o[6]),
            s: s(o[7]),
            w: s(o[8])
        }) : "object" == typeof i && ("from" in i || "to" in i) && (r = y(pe(i.from), pe(i.to)), i = {}, i.ms = r.milliseconds, i.M = r.months), a = new l(i), pe.isDuration(e) && e.hasOwnProperty("_locale") && (a._locale = e._locale), a
    }, pe.version = ge, pe.defaultFormat = tt, pe.ISO_8601 = function() {}, pe.momentProperties = Fe, pe.updateOffset = function() {}, pe.relativeTimeThreshold = function(t, n) {
        return ct[t] === e ? !1 : n === e ? ct[t] : (ct[t] = n, !0)
    }, pe.lang = s("moment.lang is deprecated. Use moment.locale instead.", function(e, t) {
        return pe.locale(e, t)
    }), pe.locale = function(e, t) {
        var n;
        return e && (n = "undefined" != typeof t ? pe.defineLocale(e, t) : pe.localeData(e), n && (pe.duration._locale = pe._locale = n)), pe._locale._abbr
    }, pe.defineLocale = function(e, t) {
        return null !== t ? (t.abbr = e, Ge[e] || (Ge[e] = new u), Ge[e].set(t), pe.locale(e), Ge[e]) : (delete Ge[e], null)
    }, pe.langData = s("moment.langData is deprecated. Use moment.localeData instead.", function(e) {
        return pe.localeData(e)
    }), pe.localeData = function(e) {
        var t;
        if (e && e._locale && e._locale._abbr && (e = e._locale._abbr), !e) return pe._locale;
        if (!M(e)) {
            if (t = z(e)) return t;
            e = [e]
        }
        return C(e)
    }, pe.isMoment = function(e) {
        return e instanceof c || null != e && e.hasOwnProperty("_isAMomentObject")
    }, pe.isDuration = function(e) {
        return e instanceof l
    };
    for (Me = _t.length - 1; Me >= 0; --Me) k(_t[Me]);
    pe.normalizeUnits = function(e) {
        return Y(e)
    }, pe.invalid = function(e) {
        var t = pe.utc(NaN);
        return null != e ? d(t._pf, e) : t._pf.userInvalidated = !0, t
    }, pe.parseZone = function() {
        return pe.apply(null, arguments).parseZone()
    }, pe.parseTwoDigitYear = function(e) {
        return b(e) + (b(e) > 68 ? 1900 : 2e3)
    }, d(pe.fn = c.prototype, {
        clone: function() {
            return pe(this)
        },
        valueOf: function() {
            return +this._d + 6e4 * (this._offset || 0)
        },
        unix: function() {
            return Math.floor(+this / 1e3)
        },
        toString: function() {
            return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
        },
        toDate: function() {
            return this._offset ? new Date(+this) : this._d
        },
        toISOString: function() {
            var e = pe(this).utc();
            return 0 < e.year() && e.year() <= 9999 ? H(e, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : H(e, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")
        },
        toArray: function() {
            var e = this;
            return [e.year(), e.month(), e.date(), e.hours(), e.minutes(), e.seconds(), e.milliseconds()]
        },
        isValid: function() {
            return F(this)
        },
        isDSTShifted: function() {
            return this._a ? this.isValid() && w(this._a, (this._isUTC ? pe.utc(this._a) : pe(this._a)).toArray()) > 0 : !1
        },
        parsingFlags: function() {
            return d({}, this._pf)
        },
        invalidAt: function() {
            return this._pf.overflow
        },
        utc: function(e) {
            return this.zone(0, e)
        },
        local: function(e) {
            return this._isUTC && (this.zone(0, e), this._isUTC = !1, e && this.add(this._d.getTimezoneOffset(), "m")), this
        },
        format: function(e) {
            var t = H(this, e || pe.defaultFormat);
            return this.localeData().postformat(t)
        },
        add: p(1, "add"),
        subtract: p(-1, "subtract"),
        diff: function(e, t, n) {
            var a, s, r = P(e, this),
                i = 6e4 * (this.zone() - r.zone());
            return t = Y(t), "year" === t || "month" === t ? (a = 432e5 * (this.daysInMonth() + r.daysInMonth()), s = 12 * (this.year() - r.year()) + (this.month() - r.month()), s += (this - pe(this).startOf("month") - (r - pe(r).startOf("month"))) / a, s -= 6e4 * (this.zone() - pe(this).startOf("month").zone() - (r.zone() - pe(r).startOf("month").zone())) / a, "year" === t && (s /= 12)) : (a = this - r, s = "second" === t ? a / 1e3 : "minute" === t ? a / 6e4 : "hour" === t ? a / 36e5 : "day" === t ? (a - i) / 864e5 : "week" === t ? (a - i) / 6048e5 : a), n ? s : f(s)
        },
        from: function(e, t) {
            return pe.duration({
                to: this,
                from: e
            }).locale(this.locale()).humanize(!t)
        },
        fromNow: function(e) {
            return this.from(pe(), e)
        },
        calendar: function(e) {
            var t = e || pe(),
                n = P(t, this).startOf("day"),
                a = this.diff(n, "days", !0),
                s = -6 > a ? "sameElse" : -1 > a ? "lastWeek" : 0 > a ? "lastDay" : 1 > a ? "sameDay" : 2 > a ? "nextDay" : 7 > a ? "nextWeek" : "sameElse";
            return this.format(this.localeData().calendar(s, this))
        },
        isLeapYear: function() {
            return W(this.year())
        },
        isDST: function() {
            return this.zone() < this.clone().month(0).zone() || this.zone() < this.clone().month(5).zone()
        },
        day: function(e) {
            var t = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
            return null != e ? (e = ne(e, this.localeData()), this.add(e - t, "d")) : t
        },
        month: he("Month", !0),
        startOf: function(e) {
            switch (e = Y(e)) {
                case "year":
                    this.month(0);
                case "quarter":
                case "month":
                    this.date(1);
                case "week":
                case "isoWeek":
                case "day":
                    this.hours(0);
                case "hour":
                    this.minutes(0);
                case "minute":
                    this.seconds(0);
                case "second":
                    this.milliseconds(0)
            }
            return "week" === e ? this.weekday(0) : "isoWeek" === e && this.isoWeekday(1), "quarter" === e && this.month(3 * Math.floor(this.month() / 3)), this
        },
        endOf: function(e) {
            return e = Y(e), this.startOf(e).add(1, "isoWeek" === e ? "week" : e).subtract(1, "ms")
        },
        isAfter: function(e, t) {
            return t = "undefined" != typeof t ? t : "millisecond", +this.clone().startOf(t) > +pe(e).startOf(t)
        },
        isBefore: function(e, t) {
            return t = "undefined" != typeof t ? t : "millisecond", +this.clone().startOf(t) < +pe(e).startOf(t)
        },
        isSame: function(e, t) {
            return t = t || "ms", +this.clone().startOf(t) === +P(e, this).startOf(t)
        },
        min: s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548", function(e) {
            return e = pe.apply(null, arguments), this > e ? this : e
        }),
        max: s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548", function(e) {
            return e = pe.apply(null, arguments), e > this ? this : e
        }),
        zone: function(e, t) {
            var n, a = this._offset || 0;
            return null == e ? this._isUTC ? a : this._d.getTimezoneOffset() : ("string" == typeof e && (e = Z(e)), Math.abs(e) < 16 && (e = 60 * e), !this._isUTC && t && (n = this._d.getTimezoneOffset()), this._offset = e, this._isUTC = !0, null != n && this.subtract(n, "m"), a !== e && (!t || this._changeInProgress ? D(this, pe.duration(a - e, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, pe.updateOffset(this, !0), this._changeInProgress = null)), this)
        },
        zoneAbbr: function() {
            return this._isUTC ? "UTC" : ""
        },
        zoneName: function() {
            return this._isUTC ? "Coordinated Universal Time" : ""
        },
        parseZone: function() {
            return this._tzm ? this.zone(this._tzm) : "string" == typeof this._i && this.zone(this._i), this
        },
        hasAlignedHourOffset: function(e) {
            return e = e ? pe(e).zone() : 0, (this.zone() - e) % 60 === 0
        },
        daysInMonth: function() {
            return S(this.year(), this.month())
        },
        dayOfYear: function(e) {
            var t = Ye((pe(this).startOf("day") - pe(this).startOf("year")) / 864e5) + 1;
            return null == e ? t : this.add(e - t, "d")
        },
        quarter: function(e) {
            return null == e ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (e - 1) + this.month() % 3)
        },
        weekYear: function(e) {
            var t = re(this, this.localeData()._week.dow, this.localeData()._week.doy).year;
            return null == e ? t : this.add(e - t, "y")
        },
        isoWeekYear: function(e) {
            var t = re(this, 1, 4).year;
            return null == e ? t : this.add(e - t, "y")
        },
        week: function(e) {
            var t = this.localeData().week(this);
            return null == e ? t : this.add(7 * (e - t), "d")
        },
        isoWeek: function(e) {
            var t = re(this, 1, 4).week;
            return null == e ? t : this.add(7 * (e - t), "d")
        },
        weekday: function(e) {
            var t = (this.day() + 7 - this.localeData()._week.dow) % 7;
            return null == e ? t : this.add(e - t, "d")
        },
        isoWeekday: function(e) {
            return null == e ? this.day() || 7 : this.day(this.day() % 7 ? e : e - 7)
        },
        isoWeeksInYear: function() {
            return T(this.year(), 1, 4)
        },
        weeksInYear: function() {
            var e = this.localeData()._week;
            return T(this.year(), e.dow, e.doy)
        },
        get: function(e) {
            return e = Y(e), this[e]()
        },
        set: function(e, t) {
            return e = Y(e), "function" == typeof this[e] && this[e](t), this
        },
        locale: function(t) {
            return t === e ? this._locale._abbr : (this._locale = pe.localeData(t), this)
        },
        lang: s("moment().lang() is deprecated. Use moment().localeData() instead.", function(t) {
            return t === e ? this.localeData() : (this._locale = pe.localeData(t), this)
        }),
        localeData: function() {
            return this._locale
        }
    }), pe.fn.millisecond = pe.fn.milliseconds = he("Milliseconds", !1), pe.fn.second = pe.fn.seconds = he("Seconds", !1), pe.fn.minute = pe.fn.minutes = he("Minutes", !1), pe.fn.hour = pe.fn.hours = he("Hours", !0), pe.fn.date = he("Date", !0), pe.fn.dates = s("dates accessor is deprecated. Use date instead.", he("Date", !0)), pe.fn.year = he("FullYear", !0), pe.fn.years = s("years accessor is deprecated. Use year instead.", he("FullYear", !0)), pe.fn.days = pe.fn.day, pe.fn.months = pe.fn.month, pe.fn.weeks = pe.fn.week, pe.fn.isoWeeks = pe.fn.isoWeek, pe.fn.quarters = pe.fn.quarter, pe.fn.toJSON = pe.fn.toISOString, d(pe.duration.fn = l.prototype, {
        _bubble: function() {
            var e, t, n, a = this._milliseconds,
                s = this._days,
                r = this._months,
                i = this._data,
                o = 0;
            i.milliseconds = a % 1e3, e = f(a / 1e3), i.seconds = e % 60, t = f(e / 60), i.minutes = t % 60, n = f(t / 60), i.hours = n % 24, s += f(n / 24), o = f(fe(s)), s -= f(_e(o)), r += f(s / 30), s %= 30, o += f(r / 12), r %= 12, i.days = s, i.months = r, i.years = o
        },
        abs: function() {
            return this._milliseconds = Math.abs(this._milliseconds), this._days = Math.abs(this._days), this._months = Math.abs(this._months), this._data.milliseconds = Math.abs(this._data.milliseconds), this._data.seconds = Math.abs(this._data.seconds), this._data.minutes = Math.abs(this._data.minutes), this._data.hours = Math.abs(this._data.hours), this._data.months = Math.abs(this._data.months), this._data.years = Math.abs(this._data.years), this
        },
        weeks: function() {
            return f(this.days() / 7)
        },
        valueOf: function() {
            return this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * b(this._months / 12)
        },
        humanize: function(e) {
            var t = se(this, !e, this.localeData());
            return e && (t = this.localeData().pastFuture(+this, t)), this.localeData().postformat(t)
        },
        add: function(e, t) {
            var n = pe.duration(e, t);
            return this._milliseconds += n._milliseconds, this._days += n._days, this._months += n._months, this._bubble(), this
        },
        subtract: function(e, t) {
            var n = pe.duration(e, t);
            return this._milliseconds -= n._milliseconds, this._days -= n._days, this._months -= n._months, this._bubble(), this
        },
        get: function(e) {
            return e = Y(e), this[e.toLowerCase() + "s"]()
        },
        as: function(e) {
            var t, n;
            if (e = Y(e), t = this._days + this._milliseconds / 864e5, "month" === e || "year" === e) return n = this._months + 12 * fe(t), "month" === e ? n : n / 12;
            switch (t += _e(this._months / 12), e) {
                case "week":
                    return t / 7;
                case "day":
                    return t;
                case "hour":
                    return 24 * t;
                case "minute":
                    return 24 * t * 60;
                case "second":
                    return 24 * t * 60 * 60;
                case "millisecond":
                    return 24 * t * 60 * 60 * 1e3;
                default:
                    throw new Error("Unknown unit " + e)
            }
        },
        lang: pe.fn.lang,
        locale: pe.fn.locale,
        toIsoString: s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", function() {
            return this.toISOString()
        }),
        toISOString: function() {
            var e = Math.abs(this.years()),
                t = Math.abs(this.months()),
                n = Math.abs(this.days()),
                a = Math.abs(this.hours()),
                s = Math.abs(this.minutes()),
                r = Math.abs(this.seconds() + this.milliseconds() / 1e3);
            return this.asSeconds() ? (this.asSeconds() < 0 ? "-" : "") + "P" + (e ? e + "Y" : "") + (t ? t + "M" : "") + (n ? n + "D" : "") + (a || s || r ? "T" : "") + (a ? a + "H" : "") + (s ? s + "M" : "") + (r ? r + "S" : "") : "P0D"
        },
        localeData: function() {
            return this._locale
        }
    });
    for (Me in rt) rt.hasOwnProperty(Me) && me(Me.toLowerCase());
    pe.duration.fn.asMilliseconds = function() {
        return this.as("ms")
    }, pe.duration.fn.asSeconds = function() {
        return this.as("s")
    }, pe.duration.fn.asMinutes = function() {
        return this.as("m")
    }, pe.duration.fn.asHours = function() {
        return this.as("h")
    }, pe.duration.fn.asDays = function() {
        return this.as("d")
    }, pe.duration.fn.asWeeks = function() {
        return this.as("weeks")
    }, pe.duration.fn.asMonths = function() {
        return this.as("M")
    }, pe.duration.fn.asYears = function() {
        return this.as("y")
    }, pe.locale("en", {
        ordinal: function(e) {
            var t = e % 10,
                n = 1 === b(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th";
            return e + n
        }
    }), Ue ? module.exports = pe : "function" == typeof define && define.amd ? (define("moment", function(e, t, n) {
        return n.config && n.config() && n.config().noGlobal === !0 && (we.moment = De), pe
    }), ye(!0)) : ye()
}).call(this);
(function() {
    "use strict";

    function e(e) {
        this._value = e
    }

    function n(e) {
        var n, t = "";
        for (n = 0; e > n; n++) t += "0";
        return t
    }

    function t(e, t) {
        var r, i, a, o, u;
        return u = e.toString(), r = u.split("e")[0], o = u.split("e")[1], i = r.split(".")[0], a = r.split(".")[1] || "", u = i + a + n(o - a.length), t > 0 && (u += "." + n(t)), u
    }

    function r(e, n, r, i) {
        var a, o, u = Math.pow(10, n);
        return o = e.toFixed(0).search("e") > -1 ? t(e, n) : (r(e * u) / u).toFixed(n), i && (a = new RegExp("0{1," + i + "}$"), o = o.replace(a, "")), o
    }

    function i(e, n, t) {
        var r;
        return r = n.indexOf("$") > -1 ? o(e, n, t) : n.indexOf("%") > -1 ? u(e, n, t) : n.indexOf(":") > -1 ? l(e, n) : s(e._value, n, t)
    }

    function a(e, n) {
        var t, r, i, a, o, u = n,
            l = ["KiB", "MiB", "GiB", "TiB", "PiB", "EiB", "ZiB", "YiB"],
            s = ["KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"],
            f = !1;
        if (n.indexOf(":") > -1) e._value = c(n);
        else if (n === w) e._value = 0;
        else {
            for ("." !== b[x].delimiters.decimal && (n = n.replace(/\./g, "").replace(b[x].delimiters.decimal, ".")), t = new RegExp("[^a-zA-Z]" + b[x].abbreviations.thousand + "(?:\\)|(\\" + b[x].currency.symbol + ")?(?:\\))?)?$"), r = new RegExp("[^a-zA-Z]" + b[x].abbreviations.million + "(?:\\)|(\\" + b[x].currency.symbol + ")?(?:\\))?)?$"), i = new RegExp("[^a-zA-Z]" + b[x].abbreviations.billion + "(?:\\)|(\\" + b[x].currency.symbol + ")?(?:\\))?)?$"), a = new RegExp("[^a-zA-Z]" + b[x].abbreviations.trillion + "(?:\\)|(\\" + b[x].currency.symbol + ")?(?:\\))?)?$"), o = 0; o <= l.length && !f; o++) n.indexOf(l[o]) > -1 ? f = Math.pow(1024, o + 1) : n.indexOf(s[o]) > -1 && (f = Math.pow(1e3, o + 1));
            e._value = (f ? f : 1) * (u.match(t) ? Math.pow(10, 3) : 1) * (u.match(r) ? Math.pow(10, 6) : 1) * (u.match(i) ? Math.pow(10, 9) : 1) * (u.match(a) ? Math.pow(10, 12) : 1) * (n.indexOf("%") > -1 ? .01 : 1) * ((n.split("-").length + Math.min(n.split("(").length - 1, n.split(")").length - 1)) % 2 ? 1 : -1) * Number(n.replace(/[^0-9\.]+/g, "")), e._value = f ? Math.ceil(e._value) : e._value
        }
        return e._value
    }

    function o(e, n, t) {
        var r, i, a = n,
            o = a.indexOf("$"),
            u = a.indexOf("("),
            l = a.indexOf("+"),
            c = a.indexOf("-"),
            f = "",
            d = "";
        if (-1 === a.indexOf("$") ? "infix" === b[x].currency.position ? (d = b[x].currency.symbol, b[x].currency.spaceSeparated && (d = " " + d + " ")) : b[x].currency.spaceSeparated && (f = " ") : a.indexOf(" $") > -1 ? (f = " ", a = a.replace(" $", "")) : a.indexOf("$ ") > -1 ? (f = " ", a = a.replace("$ ", "")) : a = a.replace("$", ""), i = s(e._value, a, t, d), -1 === n.indexOf("$")) switch (b[x].currency.position) {
            case "postfix":
                i.indexOf(")") > -1 ? (i = i.split(""), i.splice(-1, 0, f + b[x].currency.symbol), i = i.join("")) : i = i + f + b[x].currency.symbol;
                break;
            case "infix":
                break;
            case "prefix":
                i.indexOf("(") > -1 || i.indexOf("-") > -1 ? (i = i.split(""), r = Math.max(u, c) + 1, i.splice(r, 0, b[x].currency.symbol + f), i = i.join("")) : i = b[x].currency.symbol + f + i;
                break;
            default:
                throw Error('Currency position should be among ["prefix", "infix", "postfix"]')
        } else 1 >= o ? i.indexOf("(") > -1 || i.indexOf("+") > -1 || i.indexOf("-") > -1 ? (i = i.split(""), r = 1, (u > o || l > o || c > o) && (r = 0), i.splice(r, 0, b[x].currency.symbol + f), i = i.join("")) : i = b[x].currency.symbol + f + i : i.indexOf(")") > -1 ? (i = i.split(""), i.splice(-1, 0, f + b[x].currency.symbol), i = i.join("")) : i = i + f + b[x].currency.symbol;
        return i
    }

    function u(e, n, t) {
        var r, i = "",
            a = 100 * e._value;
        return n.indexOf(" %") > -1 ? (i = " ", n = n.replace(" %", "")) : n = n.replace("%", ""), r = s(a, n, t), r.indexOf(")") > -1 ? (r = r.split(""), r.splice(-1, 0, i + "%"), r = r.join("")) : r = r + i + "%", r
    }

    function l(e) {
        var n = Math.floor(e._value / 60 / 60),
            t = Math.floor((e._value - 60 * n * 60) / 60),
            r = Math.round(e._value - 60 * n * 60 - 60 * t);
        return n + ":" + (10 > t ? "0" + t : t) + ":" + (10 > r ? "0" + r : r)
    }

    function c(e) {
        var n = e.split(":"),
            t = 0;
        return 3 === n.length ? (t += 60 * Number(n[0]) * 60, t += 60 * Number(n[1]), t += Number(n[2])) : 2 === n.length && (t += 60 * Number(n[0]), t += Number(n[1])), Number(t)
    }

    function s(e, n, t, i) {
        var a, o, u, l, c, s, f, d, h, p, m, v, g, y, O, M, B, _, N = !1,
            $ = !1,
            E = !1,
            j = "",
            S = !1,
            F = !1,
            U = !1,
            k = !1,
            C = !1,
            L = "",
            I = "",
            T = Math.abs(e),
            A = ["B", "KiB", "MiB", "GiB", "TiB", "PiB", "EiB", "ZiB", "YiB"],
            D = ["B", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"],
            Z = "",
            R = !1,
            q = !1,
            z = "";
        if (0 === e && null !== w) return w;
        if (!isFinite(e)) return "" + e;
        if (0 === n.indexOf("{")) {
            var K = n.indexOf("}");
            if (-1 === K) throw Error('Format should also contain a "}"');
            v = n.slice(1, K), n = n.slice(K + 1)
        } else v = "";
        if (n.indexOf("}") === n.length - 1) {
            var P = n.indexOf("{");
            if (-1 === P) throw Error('Format should also contain a "{"');
            g = n.slice(P + 1, -1), n = n.slice(0, P + 1)
        } else g = "";
        var G;
        if (G = -1 === n.indexOf(".") ? n.match(/([0-9]+).*/) : n.match(/([0-9]+)\..*/), _ = null === G ? -1 : G[1].length, -1 !== n.indexOf("-") && (R = !0), n.indexOf("(") > -1 ? (N = !0, n = n.slice(1, -1)) : n.indexOf("+") > -1 && ($ = !0, n = n.replace(/\+/g, "")), n.indexOf("a") > -1) {
            if (p = n.split(".")[0].match(/[0-9]+/g) || ["0"], p = parseInt(p[0], 10), S = n.indexOf("aK") >= 0, F = n.indexOf("aM") >= 0, U = n.indexOf("aB") >= 0, k = n.indexOf("aT") >= 0, C = S || F || U || k, n.indexOf(" a") > -1 ? (j = " ", n = n.replace(" a", "")) : n = n.replace("a", ""), c = Math.floor(Math.log(T) / Math.LN10) + 1, f = c % 3, f = 0 === f ? 3 : f, p && 0 !== T && (s = Math.floor(Math.log(T) / Math.LN10) + 1 - p, d = 3 * ~~((Math.min(p, c) - f) / 3), T /= Math.pow(10, d), -1 === n.indexOf(".") && p > 3))
                for (n += "[.]", M = 0 === s ? 0 : 3 * ~~(s / 3) - s, M = 0 > M ? M + 3 : M, a = 0; M > a; a++) n += "0";
            Math.floor(Math.log(Math.abs(e)) / Math.LN10) + 1 !== p && (T >= Math.pow(10, 12) && !C || k ? (j += b[x].abbreviations.trillion, e /= Math.pow(10, 12)) : T < Math.pow(10, 12) && T >= Math.pow(10, 9) && !C || U ? (j += b[x].abbreviations.billion, e /= Math.pow(10, 9)) : T < Math.pow(10, 9) && T >= Math.pow(10, 6) && !C || F ? (j += b[x].abbreviations.million, e /= Math.pow(10, 6)) : (T < Math.pow(10, 6) && T >= Math.pow(10, 3) && !C || S) && (j += b[x].abbreviations.thousand, e /= Math.pow(10, 3)))
        }
        if (n.indexOf("b") > -1)
            for (n.indexOf(" b") > -1 ? (L = " ", n = n.replace(" b", "")) : n = n.replace("b", ""), l = 0; l <= A.length; l++)
                if (o = Math.pow(1024, l), u = Math.pow(1024, l + 1), e >= o && u > e) {
                    L += A[l], o > 0 && (e /= o);
                    break
                }
        if (n.indexOf("d") > -1)
            for (n.indexOf(" d") > -1 ? (L = " ", n = n.replace(" d", "")) : n = n.replace("d", ""), l = 0; l <= D.length; l++)
                if (o = Math.pow(1e3, l), u = Math.pow(1e3, l + 1), e >= o && u > e) {
                    L += D[l], o > 0 && (e /= o);
                    break
                }
        if (n.indexOf("o") > -1 && (n.indexOf(" o") > -1 ? (I = " ", n = n.replace(" o", "")) : n = n.replace("o", ""), b[x].ordinal && (I += b[x].ordinal(e))), n.indexOf("[.]") > -1 && (E = !0, n = n.replace("[.]", ".")), h = e.toString().split(".")[0], m = n.split(".")[1], y = n.indexOf(","), m) {
            if (-1 !== m.indexOf("*") ? Z = r(e, e.toString().split(".")[1].length, t) : m.indexOf("[") > -1 ? (m = m.replace("]", ""), m = m.split("["), Z = r(e, m[0].length + m[1].length, t, m[1].length)) : Z = r(e, m.length, t), h = Z.split(".")[0], Z.split(".")[1].length) {
                var Y = i ? j + i : b[x].delimiters.decimal;
                Z = Y + Z.split(".")[1]
            } else Z = "";
            E && 0 === Number(Z.slice(1)) && (Z = "")
        } else h = r(e, null, t);
        return h.indexOf("-") > -1 && (h = h.slice(1), q = !0), h.length < _ && (h = new Array(_ - h.length + 1).join("0") + h), y > -1 && (h = h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1" + b[x].delimiters.thousands)), 0 === n.indexOf(".") && (h = ""), O = n.indexOf("("), B = n.indexOf("-"), z = B > O ? (N && q ? "(" : "") + (R && q || !N && q ? "-" : "") : (R && q || !N && q ? "-" : "") + (N && q ? "(" : ""), v + z + (!q && $ && 0 !== e ? "+" : "") + h + Z + (I ? I : "") + (j && !i ? j : "") + (L ? L : "") + (N && q ? ")" : "") + g
    }

    function f(e, n) {
        b[e] = n
    }

    function d(e) {
        x = e;
        var n = b[e].defaults;
        n && n.format && v.defaultFormat(n.format), n && n.currencyFormat && v.defaultCurrencyFormat(n.currencyFormat)
    }

    function h() {
        return "undefined" != typeof process && void 0 === process.browser && ("node" === process.title || "grunt" === process.title)
    }

    function p(e) {
        var n = e.toString().split(".");
        return n.length < 2 ? 1 : Math.pow(10, n[1].length)
    }

    function m() {
        var e = Array.prototype.slice.call(arguments);
        return e.reduce(function(e, n) {
            var t = p(e),
                r = p(n);
            return t > r ? t : r
        }, -(1 / 0))
    }
    var v, g = "1.6.2",
        b = {},
        y = b,
        x = "en-US",
        w = null,
        O = "0,0",
        M = "0$",
        B = "undefined" != typeof module && module.exports,
        _ = {
            delimiters: {
                thousands: ",",
                decimal: "."
            },
            abbreviations: {
                thousand: "k",
                million: "m",
                billion: "b",
                trillion: "t"
            },
            ordinal: function(e) {
                var n = e % 10;
                return 1 === ~~(e % 100 / 10) ? "th" : 1 === n ? "st" : 2 === n ? "nd" : 3 === n ? "rd" : "th"
            },
            currency: {
                symbol: "$",
                position: "prefix"
            },
            defaults: {
                currencyFormat: ",0000 a"
            },
            formats: {
                fourDigits: "0000 a",
                fullWithTwoDecimals: "$ ,0.00",
                fullWithTwoDecimalsNoCurrency: ",0.00"
            }
        };
    v = function(n) {
        return v.isNumbro(n) ? n = n.value() : 0 === n || "undefined" == typeof n ? n = 0 : Number(n) || (n = v.fn.unformat(n)), new e(Number(n))
    }, v.version = g, v.isNumbro = function(n) {
        return n instanceof e
    }, v.setLanguage = function(e, n) {
        console.warn("`setLanguage` is deprecated since version 1.6.0. Use `setCulture` instead");
        var t = e,
            r = e.split("-")[0],
            i = null;
        y[t] || (Object.keys(y).forEach(function(e) {
            i || e.split("-")[0] !== r || (i = e)
        }), t = i || n || "en-US"), d(t)
    }, v.setCulture = function(e, n) {
        var t = e,
            r = e.split("-")[1],
            i = null;
        b[t] || (r && Object.keys(b).forEach(function(e) {
            i || e.split("-")[1] !== r || (i = e)
        }), t = i || n || "en-US"), d(t)
    }, v.language = function(e, n) {
        if (console.warn("`language` is deprecated since version 1.6.0. Use `culture` instead"), !e) return x;
        if (e && !n) {
            if (!y[e]) throw new Error("Unknown language : " + e);
            d(e)
        }
        return (n || !y[e]) && f(e, n), v
    }, v.culture = function(e, n) {
        if (!e) return x;
        if (e && !n) {
            if (!b[e]) throw new Error("Unknown culture : " + e);
            d(e)
        }
        return (n || !b[e]) && f(e, n), v
    }, v.languageData = function(e) {
        if (console.warn("`languageData` is deprecated since version 1.6.0. Use `cultureData` instead"), !e) return y[x];
        if (!y[e]) throw new Error("Unknown language : " + e);
        return y[e]
    }, v.cultureData = function(e) {
        if (!e) return b[x];
        if (!b[e]) throw new Error("Unknown culture : " + e);
        return b[e]
    }, v.culture("en-US", _), v.languages = function() {
        return console.warn("`languages` is deprecated since version 1.6.0. Use `cultures` instead"), y
    }, v.cultures = function() {
        return b
    }, v.zeroFormat = function(e) {
        w = "string" == typeof e ? e : null
    }, v.defaultFormat = function(e) {
        O = "string" == typeof e ? e : "0.0"
    }, v.defaultCurrencyFormat = function(e) {
        M = "string" == typeof e ? e : "0$"
    }, v.validate = function(e, n) {
        var t, r, i, a, o, u, l, c;
        if ("string" != typeof e && (e += "", console.warn && console.warn("Numbro.js: Value is not string. It has been co-erced to: ", e)), e = e.trim(), e.match(/^\d+$/)) return !0;
        if ("" === e) return !1;
        try {
            l = v.cultureData(n)
        } catch (s) {
            l = v.cultureData(v.culture())
        }
        return i = l.currency.symbol, o = l.abbreviations, t = l.delimiters.decimal, r = "." === l.delimiters.thousands ? "\\." : l.delimiters.thousands, c = e.match(/^[^\d]+/), null !== c && (e = e.substr(1), c[0] !== i) ? !1 : (c = e.match(/[^\d]+$/), null !== c && (e = e.slice(0, -1), c[0] !== o.thousand && c[0] !== o.million && c[0] !== o.billion && c[0] !== o.trillion) ? !1 : (u = new RegExp(r + "{2}"), e.match(/[^\d.,]/g) ? !1 : (a = e.split(t), a.length > 2 ? !1 : a.length < 2 ? !!a[0].match(/^\d+.*\d$/) && !a[0].match(u) : 1 === a[0].length ? !!a[0].match(/^\d+$/) && !a[0].match(u) && !!a[1].match(/^\d+$/) : !!a[0].match(/^\d+.*\d$/) && !a[0].match(u) && !!a[1].match(/^\d+$/))))
    }, v.includeLocalesInNode = function(e, n) {
        if (h()) {
            var t = require("path");
            n.forEach(function(n) {
                var r = require(t.join(__dirname, e, n));
                v.culture(r.langLocaleCode, r)
            })
        }
    }, v.loadLanguagesInNode = function(e) {
        if (console.warn("`loadLanguagesInNode` is deprecated since version 1.6.0. Use `loadCulturesInNode` instead"), h()) {
            var n = require("fs"),
                t = require("path"),
                r = n.readdirSync(t.join(__dirname, e));
            v.includeLocalesInNode(e, r)
        }
    }, v.loadCulturesInNode = function(e) {
        if (h()) {
            var n = require("fs"),
                t = require("path"),
                r = n.readdirSync(t.join(__dirname, e));
            v.includeLocalesInNode(e, r)
        }
    }, "function" != typeof Array.prototype.reduce && (Array.prototype.reduce = function(e, n) {
        if (null === this || "undefined" == typeof this) throw new TypeError("Array.prototype.reduce called on null or undefined");
        if ("function" != typeof e) throw new TypeError(e + " is not a function");
        var t, r, i = this.length >>> 0,
            a = !1;
        for (1 < arguments.length && (r = n, a = !0), t = 0; i > t; ++t) this.hasOwnProperty(t) && (a ? r = e(r, this[t], t, this) : (r = this[t], a = !0));
        if (!a) throw new TypeError("Reduce of empty array with no initial value");
        return r
    }), v.fn = e.prototype = {
        clone: function() {
            return v(this)
        },
        format: function(e, n) {
            return i(this, e ? e : O, void 0 !== n ? n : Math.round)
        },
        formatCurrency: function(e, n) {
            return o(this, e ? e : M, void 0 !== n ? n : Math.round)
        },
        unformat: function(e) {
            return "[object Number]" === Object.prototype.toString.call(e) ? e : a(this, e ? e : O)
        },
        value: function() {
            return this._value
        },
        valueOf: function() {
            return this._value
        },
        set: function(e) {
            return this._value = Number(e), this
        },
        add: function(e) {
            function n(e, n) {
                return e + t * n
            }
            var t = m.call(null, this._value, e);
            return this._value = [this._value, e].reduce(n, 0) / t, this
        },
        subtract: function(e) {
            function n(e, n) {
                return e - t * n
            }
            var t = m.call(null, this._value, e);
            return this._value = [e].reduce(n, this._value * t) / t, this
        },
        multiply: function(e) {
            function n(e, n) {
                var t = m(e, n),
                    r = e * t;
                return r *= n * t, r /= t * t
            }
            return this._value = [this._value, e].reduce(n, 1), this
        },
        divide: function(e) {
            function n(e, n) {
                var t = m(e, n);
                return e * t / (n * t)
            }
            return this._value = [this._value, e].reduce(n), this
        },
        difference: function(e) {
            return Math.abs(v(this._value).subtract(e).value())
        }
    }, B && (module.exports = v), v.loadCulturesInNode("languages"), "undefined" == typeof ender && (this.numbro = v), "function" == typeof define && define.amd && define([], function() {
        return v
    })
}).call("undefined" == typeof window ? this : window);
if (!window.YT) var YT = {
    loading: 0,
    loaded: 0
};
if (!window.YTConfig) var YTConfig = {
    host: "http://www.youtube.com"
};
YT.loading || (YT.loading = 1, function() {
        var t = [];
        YT.ready = function(e) {
            YT.loaded ? e() : t.push(e)
        }, window.onYTReady = function() {
            YT.loaded = 1;
            for (var e = 0; e < t.length; e++) try {
                t[e]()
            } catch (n) {}
        }, YT.setConfig = function(t) {
            for (var e in t) t.hasOwnProperty(e) && (YTConfig[e] = t[e])
        };
        var e = document.createElement("script");
        e.type = "text/javascript", e.id = "www-widgetapi-script", e.src = "https://s.ytimg.com/yts/jsbin/www-widgetapi-vfleiVw3K/www-widgetapi.js", e.async = !0;
        var n = document.getElementsByTagName("script")[0];
        n.parentNode.insertBefore(e, n)
    }()),
    function() {
        function t(t) {
            t = t.split(".");
            for (var e, n = At; e = t.shift();) {
                if (null == n[e]) return null;
                n = n[e]
            }
            return n
        }

        function e() {}

        function n(t) {
            var e = typeof t;
            if ("object" == e) {
                if (!t) return "null";
                if (t instanceof Array) return "array";
                if (t instanceof Object) return e;
                var n = Object.prototype.toString.call(t);
                if ("[object Window]" == n) return "object";
                if ("[object Array]" == n || "number" == typeof t.length && "undefined" != typeof t.splice && "undefined" != typeof t.propertyIsEnumerable && !t.propertyIsEnumerable("splice")) return "array";
                if ("[object Function]" == n || "undefined" != typeof t.call && "undefined" != typeof t.propertyIsEnumerable && !t.propertyIsEnumerable("call")) return "function"
            } else if ("function" == e && "undefined" == typeof t.call) return "object";
            return e
        }

        function i(t) {
            var e = n(t);
            return "array" == e || "object" == e && "number" == typeof t.length
        }

        function o(t) {
            return "string" == typeof t
        }

        function r(t) {
            var e = typeof t;
            return "object" == e && null != t || "function" == e
        }

        function a(t, e, n) {
            return t.call.apply(t.bind, arguments)
        }

        function s(t, e, n) {
            if (!t) throw Error();
            if (2 < arguments.length) {
                var i = Array.prototype.slice.call(arguments, 2);
                return function() {
                    var n = Array.prototype.slice.call(arguments);
                    return Array.prototype.unshift.apply(n, i), t.apply(e, n)
                }
            }
            return function() {
                return t.apply(e, arguments)
            }
        }

        function c(t, e, n) {
            return c = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? a : s, c.apply(null, arguments)
        }

        function u(t, e) {
            var n = t.split("."),
                i = At;
            n[0] in i || !i.execScript || i.execScript("var " + n[0]);
            for (var o; n.length && (o = n.shift());) n.length || void 0 === e ? i = i[o] ? i[o] : i[o] = {} : i[o] = e
        }

        function h(t, e) {
            function n() {}
            n.prototype = e.prototype, t.L = e.prototype, t.prototype = new n, t.prototype.constructor = t, t.base = function(t, n, i) {
                for (var o = Array(arguments.length - 2), r = 2; r < arguments.length; r++) o[r - 2] = arguments[r];
                return e.prototype[n].apply(t, o)
            }
        }

        function l(t, e) {
            return e > t ? -1 : t > e ? 1 : 0
        }

        function f(t, e) {
            var n;
            t: {
                n = t.length;
                for (var i = o(t) ? t.split("") : t, r = 0; n > r; r++)
                    if (r in i && e.call(void 0, i[r], r, t)) {
                        n = r;
                        break t
                    }
                n = -1
            }
            return 0 > n ? null : o(t) ? t.charAt(n) : t[n]
        }

        function p(t) {
            return Array.prototype.concat.apply(Array.prototype, arguments)
        }

        function d(t) {
            var e = t.length;
            if (e > 0) {
                for (var n = Array(e), i = 0; e > i; i++) n[i] = t[i];
                return n
            }
            return []
        }

        function v(t) {
            var e, n = ge;
            for (e in n)
                if (t.call(void 0, n[e], e, n)) return e
        }

        function g(t) {
            return -1 != xt.indexOf(t)
        }

        function y() {
            var t = At.document;
            return t ? t.documentMode : void 0
        }

        function m(t) {
            if (!Zt[t]) {
                for (var e = 0, n = Pt(String(Jt)).split("."), i = Pt(String(t)).split("."), o = Math.max(n.length, i.length), r = 0; 0 == e && o > r; r++) {
                    var a = n[r] || "",
                        s = i[r] || "",
                        c = RegExp("(\\d*)(\\D*)", "g"),
                        u = RegExp("(\\d*)(\\D*)", "g");
                    do {
                        var h = c.exec(a) || ["", "", ""],
                            f = u.exec(s) || ["", "", ""];
                        if (0 == h[0].length && 0 == f[0].length) break;
                        e = l(0 == h[1].length ? 0 : parseInt(h[1], 10), 0 == f[1].length ? 0 : parseInt(f[1], 10)) || l(0 == h[2].length, 0 == f[2].length) || l(h[2], f[2])
                    } while (0 == e)
                }
                Zt[t] = e >= 0
            }
        }

        function w(t) {
            var e, n, i, o;
            if (e = document, e.querySelectorAll && e.querySelector && t) return e.querySelectorAll("" + (t ? "." + t : ""));
            if (t && e.getElementsByClassName) {
                var r = e.getElementsByClassName(t);
                return r
            }
            if (r = e.getElementsByTagName("*"), t) {
                for (o = {}, n = i = 0; e = r[n]; n++) {
                    var a, s = e.className;
                    (a = "function" == typeof s.split) && (a = 0 <= Dt(s.split(/\s+/), t)), a && (o[i++] = e)
                }
                return o.length = i, o
            }
            return r
        }

        function b(t, e) {
            for (var n = 0; t;) {
                if (e(t)) return t;
                t = t.parentNode, n++
            }
            return null
        }

        function E(t) {
            At.setTimeout(function() {
                throw t
            }, 0)
        }

        function T() {
            var t = At.MessageChannel;
            if ("undefined" == typeof t && "undefined" != typeof window && window.postMessage && window.addEventListener && !g("Presto") && (t = function() {
                    var t = document.createElement("IFRAME");
                    t.style.display = "none", t.src = "", document.documentElement.appendChild(t);
                    var e = t.contentWindow,
                        t = e.document;
                    t.open(), t.write(""), t.close();
                    var n = "callImmediate" + Math.random(),
                        i = "file:" == e.location.protocol ? "*" : e.location.protocol + "//" + e.location.host,
                        t = c(function(t) {
                            "*" != i && t.origin != i || t.data != n || this.port1.onmessage()
                        }, this);
                    e.addEventListener("message", t, !1), this.port1 = {}, this.port2 = {
                        postMessage: function() {
                            e.postMessage(n, i)
                        }
                    }
                }), "undefined" != typeof t && !g("Trident") && !g("MSIE")) {
                var e = new t,
                    n = {},
                    i = n;
                return e.port1.onmessage = function() {
                        if (void 0 !== n.next) {
                            n = n.next;
                            var t = n.N;
                            n.N = null, t()
                        }
                    },
                    function(t) {
                        i.next = {
                            N: t
                        }, i = i.next, e.port2.postMessage(0)
                    }
            }
            return "undefined" != typeof document && "onreadystatechange" in document.createElement("SCRIPT") ? function(t) {
                var e = document.createElement("SCRIPT");
                e.onreadystatechange = function() {
                    e.onreadystatechange = null, e.parentNode.removeChild(e), e = null, t(), t = null
                }, document.documentElement.appendChild(e)
            } : function(t) {
                At.setTimeout(t, 0)
            }
        }

        function S(t, e, n) {
            this.j = n, this.h = t, this.l = e, this.f = 0, this.c = null
        }

        function I() {
            this.f = this.c = null
        }

        function x() {
            this.next = this.f = this.c = null
        }

        function A(t) {
            ae || C(), se || (ae(), se = !0);
            var e = ce,
                n = re.get();
            n.c = t, n.f = void 0, n.next = null, e.f ? e.f.next = n : e.c = n, e.f = n
        }

        function C() {
            if (At.Promise && At.Promise.resolve) {
                var t = At.Promise.resolve(void 0);
                ae = function() {
                    t.then(Y)
                }
            } else ae = function() {
                var t = Y;
                "function" != n(At.setImmediate) || At.Window && At.Window.prototype && !g("Edge") && At.Window.prototype.setImmediate == At.setImmediate ? (ne || (ne = T()), ne(t)) : At.setImmediate(t)
            }
        }

        function Y() {
            for (var t = null; t = ce.remove();) {
                try {
                    t.c.call(t.f)
                } catch (e) {
                    E(e)
                }
                var n = re;
                n.l(t), n.f < n.j && (n.f++, t.next = n.c, n.c = t)
            }
            se = !1
        }

        function P() {
            this.h = this.h, this.j = this.j
        }

        function O(t) {
            P.call(this), this.A = 1, this.l = [], this.m = 0, this.c = [], this.f = {}, this.G = !!t
        }

        function N(t, e, n) {
            var i = Ee;
            if (t = i.f[t]) {
                var o = i.c;
                (t = f(t, function(t) {
                    return o[t + 1] == e && o[t + 2] == n
                })) && i.M(t)
            }
        }

        function R(t, e, n) {
            A(function() {
                t.apply(e, n)
            })
        }

        function j(t, e, i) {
            if ("array" == n(e))
                for (var o = 0; o < e.length; o++) j(t, String(e[o]), i);
            else null != e && i.push("&", t, "" === e ? "" : "=", encodeURIComponent(String(e)))
        }

        function k(t) {
            var e, n = [];
            for (e in t) j(e, t[e], n);
            return n[0] = "", n.join("")
        }

        function L(t) {
            var e = arguments;
            if (1 < e.length) {
                var n = e[0];
                pe[n] = e[1]
            } else
                for (n in e = e[0]) pe[n] = e[n]
        }

        function M(t) {
            return "function" == n(t) && (t = D(t)), window.setInterval(t, 250)
        }

        function D(t) {
            return t && window.yterr ? function() {
                try {
                    return t.apply(this, arguments)
                } catch (e) {
                    throw _(e), e
                }
            } : t
        }

        function _(e, n) {
            var i = t("yt.logging.errors.log");
            i ? i(e, n) : (i = [], i = "ERRORS" in pe ? pe.ERRORS : i, i.push([e, n]), L("ERRORS", i))
        }

        function W(t) {
            if (this.type = "", this.source = this.data = this.currentTarget = this.relatedTarget = this.target = null, this.charCode = this.keyCode = 0, this.shiftKey = this.ctrlKey = this.altKey = !1, this.clientY = this.clientX = 0, t = t || window.event) {
                this.event = t;
                for (var e in t) e in ve || (this[e] = t[e]);
                if ((e = t.target || t.srcElement) && 3 == e.nodeType && (e = e.parentNode), this.target = e, e = t.relatedTarget) try {
                    e = e.nodeName ? e : null
                } catch (n) {
                    e = null
                } else "mouseover" == this.type ? e = t.fromElement : "mouseout" == this.type && (e = t.toElement);
                this.relatedTarget = e, this.clientX = void 0 != t.clientX ? t.clientX : t.pageX, this.clientY = void 0 != t.clientY ? t.clientY : t.pageY, this.keyCode = t.keyCode ? t.keyCode : t.which, this.charCode = t.charCode || ("keypress" == this.type ? this.keyCode : 0), this.altKey = t.altKey, this.ctrlKey = t.ctrlKey, this.shiftKey = t.shiftKey
            }
        }

        function U(t, e, n) {
            return v(function(i) {
                return i[0] == t && i[1] == e && i[2] == n && 0 == i[4]
            })
        }

        function B(t, e, n) {
            if (t && (t.addEventListener || t.attachEvent)) {
                var i = U(t, e, n);
                if (!i) {
                    var o, i = ++ye.count + "",
                        r = !("mouseenter" != e && "mouseleave" != e || !t.addEventListener || "onmouseenter" in document);
                    o = r ? function(i) {
                        return i = new W(i), b(i.relatedTarget, function(e) {
                            return e == t
                        }) ? void 0 : (i.currentTarget = t, i.type = e, n.call(t, i))
                    } : function(e) {
                        return e = new W(e), e.currentTarget = t, n.call(t, e)
                    }, o = D(o), ge[i] = [t, e, n, o, !1], t.addEventListener ? "mouseenter" == e && r ? t.addEventListener("mouseover", o, !1) : "mouseleave" == e && r ? t.addEventListener("mouseout", o, !1) : "mousewheel" == e && "MozBoxSizing" in document.documentElement.style ? t.addEventListener("MozMousePixelScroll", o, !1) : t.addEventListener(e, o, !1) : t.attachEvent("on" + e, o)
                }
            }
        }

        function K(t) {
            t && ("string" == typeof t && (t = [t]), _t(t, function(t) {
                if (t in ge) {
                    var e = ge[t],
                        n = e[0],
                        i = e[1],
                        o = e[3],
                        e = e[4];
                    n.removeEventListener ? n.removeEventListener(i, o, e) : n.detachEvent && n.detachEvent("on" + i, o), delete ge[t]
                }
            }))
        }

        function V(t) {
            return me[t] || (me[t] = String(t).replace(/\-([a-z])/g, function(t, e) {
                return e.toUpperCase()
            }))
        }

        function G() {
            _t(be, function(t) {
                t()
            })
        }

        function F(t) {
            var e = d(document.getElementsByTagName("yt:" + t));
            t = "yt-" + t;
            var n = document;
            return t = n.querySelectorAll && n.querySelector ? n.querySelectorAll("." + t) : w(t), t = d(t), p(e, t)
        }

        function X(t, e) {
            return "yt:" == t.tagName.toLowerCase().substr(0, 3) ? t.getAttribute(e) : t ? t.dataset ? t.dataset[V(e)] : t.getAttribute("data-" + e) : null
        }

        function q(t, e) {
            Ee.P.apply(Ee, arguments)
        }

        function H(t, e, n) {
            if (this.f = e, this.l = this.c = null, this.m = this[Ct] || (this[Ct] = ++Yt), this.h = 0, this.J = !1, this.H = [], this.j = null, this.A = n, this.G = {}, e = document, (t = o(t) ? e.getElementById(t) : t) && ("iframe" != t.tagName.toLowerCase() && (e = J(this, t), this.l = t, (n = t.parentNode) && n.replaceChild(e, t), t = e), this.c = t, this.c.id || (e = t = this.c, e = e[Ct] || (e[Ct] = ++Yt), t.id = "widget" + e), we[this.c.id] = this, window.postMessage)) {
                this.j = new O, Z(this), t = ft(this.f, "events");
                for (var i in t) t.hasOwnProperty(i) && this.addEventListener(i, t[i]);
                for (var r in Te) $(this, r)
            }
        }

        function $(t, e) {
            var n = e.split(".");
            if (2 == n.length) {
                var i = n[1];
                t.A == n[0] && Q(t, i)
            }
        }

        function z(t, e, n) {
            n = n || [], n = Array.prototype.slice.call(n), e = {
                event: "command",
                func: e,
                args: n
            }, t.J ? t.K(e) : t.H.push(e)
        }

        function J(t, e) {
            for (var n = document.createElement("iframe"), i = e.attributes, o = 0, r = i.length; r > o; o++) {
                var a = i[o].value;
                null != a && "" != a && "null" != a && n.setAttribute(i[o].name, a)
            }
            n.setAttribute("frameBorder", 0), n.setAttribute("allowfullscreen", 1), n.setAttribute("title", "YouTube " + ft(t.f, "title")), (i = ft(t.f, "width")) && n.setAttribute("width", i), (i = ft(t.f, "height")) && n.setAttribute("height", i);
            var s = t.C();
            return s.enablejsapi = window.postMessage ? 1 : 0, window.location.host && (s.origin = window.location.protocol + "//" + window.location.host), window.location.href && _t(["debugjs", "debugcss"], function(t) {
                var e;
                e = window.location.href;
                var n, i = e.search(he);
                t: {
                    n = 0;
                    for (var o = t.length; 0 <= (n = e.indexOf(t, n)) && i > n;) {
                        var r = e.charCodeAt(n - 1);
                        if ((38 == r || 63 == r) && (r = e.charCodeAt(n + o), !r || 61 == r || 38 == r || 35 == r)) break t;
                        n += o + 1
                    }
                    n = -1
                }
                0 > n ? e = null : (o = e.indexOf("&", n), (0 > o || o > i) && (o = i), n += t.length + 1, e = decodeURIComponent(e.substr(n, o - n).replace(/\+/g, " "))), null === e || (s[t] = e)
            }), n.src = ft(t.f, "host") + t.D() + "?" + k(s), n
        }

        function Z(t) {
            pt(t.f, t, t.m), t.h = M(c(t.O, t)), B(t.c, "load", c(function() {
                window.clearInterval(this.h), this.h = M(c(this.O, this))
            }, t))
        }

        function Q(t, e) {
            t.G[e] || (t.G[e] = !0, z(t, "addEventListener", [e]))
        }

        function tt() {}

        function et(t) {
            if (t instanceof tt) return t;
            if ("function" == typeof t.B) return t.B(!1);
            if (i(t)) {
                var e = 0,
                    n = new tt;
                return n.next = function() {
                    for (;;) {
                        if (e >= t.length) throw Se;
                        if (e in t) return t[e++];
                        e++
                    }
                }, n
            }
            throw Error("Not implemented")
        }

        function nt(t, e) {
            if (i(t)) try {
                _t(t, e, void 0)
            } catch (n) {
                if (n !== Se) throw n
            } else {
                t = et(t);
                try {
                    for (;;) e.call(void 0, t.next(), void 0, t)
                } catch (n) {
                    if (n !== Se) throw n
                }
            }
        }

        function it(t) {
            if (i(t)) return d(t);
            t = et(t);
            var e = [];
            return nt(t, function(t) {
                e.push(t)
            }), e
        }

        function ot() {}

        function rt() {}

        function at(t) {
            this.c = t
        }

        function st() {
            var t = null;
            try {
                t = window.localStorage || null
            } catch (e) {}
            this.c = t
        }

        function ct() {
            var t = null;
            try {
                t = window.sessionStorage || null
            } catch (e) {}
            this.c = t
        }

        function ut(t) {
            return (0 == t.search("cue") || 0 == t.search("load")) && "loadModule" != t
        }

        function ht(t) {
            return 0 == t.search("get") || 0 == t.search("is")
        }

        function lt(t) {
            if (this.h = t || {}, this.c = {}, this.c.host = "http://www.youtube.com", this.c.title = "", this.j = this.f = !1, t = document.getElementById("www-widgetapi-script"), this.f = !!("https:" == document.location.protocol || t && 0 == t.src.indexOf("https:"))) {
                t = [this.h, window.YTConfig || {}, this.c];
                for (var e = 0; e < t.length; e++) t[e].host && (t[e].host = t[e].host.replace("http://", "https://"))
            }
        }

        function ft(t, e) {
            for (var n = [t.h, window.YTConfig || {}, t.c], i = 0; i < n.length; i++) {
                var o = n[i][e];
                if (void 0 != o) return o
            }
            return null
        }

        function pt(t, e, n) {
            Ae || (Ae = {}, B(window, "message", c(t.l, t))), Ae[n] = e
        }

        function dt(t) {
            lt.call(this, t), this.c.title = "video player", this.c.videoId = "", this.c.width = 640, this.c.height = 360
        }

        function vt(t, e) {
            var n = new dt(e);
            H.call(this, t, n, "player"), this.o = {}, this.F = {}
        }

        function gt(t) {
            if ("iframe" != t.tagName.toLowerCase()) {
                var e = X(t, "videoid");
                if (e) {
                    var n = X(t, "width"),
                        i = X(t, "height");
                    new vt(t, {
                        videoId: e,
                        width: n,
                        height: i
                    })
                }
            }
        }

        function yt(t, e) {
            if (r(e))
                for (var n in e) t.F[n] = e[n]
        }

        function mt(t, e) {
            _t(e, function(t) {
                this[t] || (ut(t) ? this[t] = function() {
                    return this.F = {}, this.o = {}, z(this, t, arguments), this
                } : ht(t) ? this[t] = function() {
                    var e = 0;
                    return 0 == t.search("get") ? e = 3 : 0 == t.search("is") && (e = 2), this.F[t.charAt(e).toLowerCase() + t.substr(e + 1)]
                } : this[t] = function() {
                    return z(this, t, arguments), this
                })
            }, t)
        }

        function wt(t) {
            lt.call(this, t), this.c.title = "Thumbnail", this.c.videoId = "", this.c.width = 120, this.c.height = 68
        }

        function bt(t, e) {
            var n = new wt(e);
            H.call(this, t, n, "thumbnail")
        }

        function Et(t) {
            if ("iframe" != t.tagName.toLowerCase()) {
                var e = X(t, "videoid");
                if (e) {
                    e = {
                        videoId: e,
                        events: {}
                    }, e.width = X(t, "width"), e.height = X(t, "height"), e.thumbWidth = X(t, "thumb-width"), e.thumbHeight = X(t, "thumb-height"), e.thumbAlign = X(t, "thumb-align");
                    var n = X(t, "onclick");
                    n && (e.events.onClick = n), new bt(t, e)
                }
            }
        }

        function Tt(t) {
            lt.call(this, t), this.c.host = "https://www.youtube.com", this.c.title = "upload widget", this.c.width = 640, this.c.height = .67 * ft(this, "width")
        }

        function St(t, e) {
            var n = new Tt(e);
            H.call(this, t, n, "upload")
        }
        var It, xt, At = this,
            Ct = "closure_uid_" + (1e9 * Math.random() >>> 0),
            Yt = 0,
            Pt = String.prototype.trim ? function(t) {
                return t.trim()
            } : function(t) {
                return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g, "")
            },
            Ot = /&/g,
            Nt = /</g,
            Rt = />/g,
            jt = /"/g,
            kt = /'/g,
            Lt = /\x00/g,
            Mt = /[\x00&<>"']/,
            Dt = Array.prototype.indexOf ? function(t, e, n) {
                return Array.prototype.indexOf.call(t, e, n)
            } : function(t, e, n) {
                if (n = null == n ? 0 : 0 > n ? Math.max(0, t.length + n) : n, o(t)) return o(e) && 1 == e.length ? t.indexOf(e, n) : -1;
                for (; n < t.length; n++)
                    if (n in t && t[n] === e) return n;
                return -1
            },
            _t = Array.prototype.forEach ? function(t, e, n) {
                Array.prototype.forEach.call(t, e, n)
            } : function(t, e, n) {
                for (var i = t.length, r = o(t) ? t.split("") : t, a = 0; i > a; a++) a in r && e.call(n, r[a], a, t)
            };
        t: {
            var Wt = At.navigator;
            if (Wt) {
                var Ut = Wt.userAgent;
                if (Ut) {
                    xt = Ut;
                    break t
                }
            }
            xt = ""
        }
        var Bt, Kt = g("Opera") || g("OPR"),
            Vt = g("Trident") || g("MSIE"),
            Gt = g("Edge"),
            Ft = g("Gecko") && !(-1 != xt.toLowerCase().indexOf("webkit") && !g("Edge")) && !(g("Trident") || g("MSIE")) && !g("Edge"),
            Xt = -1 != xt.toLowerCase().indexOf("webkit") && !g("Edge");
        t: {
            var qt = "",
                Ht = function() {
                    var t = xt;
                    return Ft ? /rv\:([^\);]+)(\)|;)/.exec(t) : Gt ? /Edge\/([\d\.]+)/.exec(t) : Vt ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t) : Xt ? /WebKit\/(\S+)/.exec(t) : Kt ? /(?:Version)[ \/]?(\S+)/.exec(t) : void 0
                }();
            if (Ht && (qt = Ht ? Ht[1] : ""), Vt) {
                var $t = y();
                if (null != $t && $t > parseFloat(qt)) {
                    Bt = String($t);
                    break t
                }
            }
            Bt = qt
        }
        var zt, Jt = Bt,
            Zt = {},
            Qt = At.document,
            te = Qt && Vt ? y() || ("CSS1Compat" == Qt.compatMode ? parseInt(Jt, 10) : 5) : void 0;
        if (!(zt = !Ft && !Vt)) {
            var ee;
            (ee = Vt) && (ee = 9 <= Number(te)), zt = ee
        }
        zt || Ft && m("1.9.1"), Vt && m("9");
        var ne, ie = At.JSON.parse,
            oe = At.JSON.stringify;
        S.prototype.get = function() {
            var t;
            return 0 < this.f ? (this.f--, t = this.c, this.c = t.next, t.next = null) : t = this.h(), t
        };
        var re = new S(function() {
            return new x
        }, function(t) {
            t.reset()
        }, 100);
        I.prototype.remove = function() {
            var t = null;
            return this.c && (t = this.c, this.c = this.c.next, this.c || (this.f = null), t.next = null), t
        }, x.prototype.reset = function() {
            this.next = this.f = this.c = null
        };
        var ae, se = !1,
            ce = new I;
        P.prototype.h = !1, P.prototype.isDisposed = function() {
            return this.h
        }, P.prototype.dispose = function() {
            this.h || (this.h = !0, this.I())
        }, P.prototype.I = function() {
            if (this.j)
                for (; this.j.length;) this.j.shift()()
        }, h(O, P), It = O.prototype, It.subscribe = function(t, e, n) {
            var i = this.f[t];
            i || (i = this.f[t] = []);
            var o = this.A;
            return this.c[o] = t, this.c[o + 1] = e, this.c[o + 2] = n, this.A = o + 3, i.push(o), o
        }, It.M = function(t) {
            var n = this.c[t];
            if (n) {
                var i = this.f[n];
                if (0 != this.m) this.l.push(t), this.c[t + 1] = e;
                else {
                    if (i) {
                        var o = Dt(i, t);
                        o >= 0 && Array.prototype.splice.call(i, o, 1)
                    }
                    delete this.c[t], delete this.c[t + 1], delete this.c[t + 2]
                }
            }
            return !!n
        }, It.P = function(t, e) {
            var n = this.f[t];
            if (n) {
                for (var i = Array(arguments.length - 1), o = 1, r = arguments.length; r > o; o++) i[o - 1] = arguments[o];
                if (this.G)
                    for (o = 0; o < n.length; o++) {
                        var a = n[o];
                        R(this.c[a + 1], this.c[a + 2], i)
                    } else {
                        this.m++;
                        try {
                            for (o = 0, r = n.length; r > o; o++) a = n[o], this.c[a + 1].apply(this.c[a + 2], i)
                        } finally {
                            if (this.m--, 0 < this.l.length && 0 == this.m)
                                for (; n = this.l.pop();) this.M(n)
                        }
                    }
                return 0 != o
            }
            return !1
        }, It.clear = function(t) {
            if (t) {
                var e = this.f[t];
                e && (_t(e, this.M, this), delete this.f[t])
            } else this.c.length = 0, this.f = {}
        }, It.I = function() {
            O.L.I.call(this), this.clear(), this.l.length = 0
        };
        var ue = /^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,
            he = /#|$/,
            le = t("yt.dom.getNextId_");
        if (!le) {
            le = function() {
                return ++fe
            }, u("yt.dom.getNextId_", le);
            var fe = 0
        }
        var pe = window.yt && window.yt.config_ || window.ytcfg && window.ytcfg.data_ || {};
        u("yt.config_", pe), u("yt.tokens_", window.yt && window.yt.tokens_ || {});
        var de = window.yt && window.yt.msgs_ || t("window.ytcfg.msgs") || {};
        u("yt.msgs_", de), W.prototype.preventDefault = function() {
            this.event && (this.event.returnValue = !1, this.event.preventDefault && this.event.preventDefault())
        }, W.prototype.stopPropagation = function() {
            this.event && (this.event.cancelBubble = !0, this.event.stopPropagation && this.event.stopPropagation())
        }, W.prototype.stopImmediatePropagation = function() {
            this.event && (this.event.cancelBubble = !0, this.event.stopImmediatePropagation && this.event.stopImmediatePropagation())
        };
        var ve = {
                stopImmediatePropagation: 1,
                stopPropagation: 1,
                preventMouseEvent: 1,
                preventManipulation: 1,
                preventDefault: 1,
                layerX: 1,
                layerY: 1,
                scale: 1,
                rotation: 1,
                webkitMovementX: 1,
                webkitMovementY: 1
            },
            ge = t("yt.events.listeners_") || {};
        u("yt.events.listeners_", ge);
        var ye = t("yt.events.counter_") || {
            count: 0
        };
        u("yt.events.counter_", ye);
        var me = {},
            we = {},
            be = [],
            Ee = new O,
            Te = {};
        It = H.prototype, It.Z = function(t, e) {
            return this.c.width = t, this.c.height = e, this
        }, It.Y = function() {
            return this.c
        }, It.R = function(t) {
            this.v(t.event, t)
        }, It.addEventListener = function(t, e) {
            var n = e;
            return "string" == typeof e && (n = function() {
                window[e].apply(window, arguments)
            }), this.j.subscribe(t, n), Q(this, t), this
        }, It.X = function() {
            this.c.id && (we[this.c.id] = null);
            var t = this.j;
            if (t && "function" == typeof t.dispose && t.dispose(), this.l) {
                var t = this.c,
                    e = t.parentNode;
                e && e.replaceChild(this.l, t)
            } else(t = this.c) && t.parentNode && t.parentNode.removeChild(t);
            Ae && (Ae[this.m] = null), this.f = null;
            var n, t = this.c;
            for (n in ge) ge[n][0] == t && K(n);
            this.l = this.c = null
        }, It.C = function() {
            return {}
        }, It.v = function(t, e) {
            if (!this.j.isDisposed()) {
                var n = {
                    target: this,
                    data: e
                };
                this.j.P(t, n), q(this.A + "." + t, n)
            }
        }, It.O = function() {
            this.c && this.c.contentWindow ? this.K({
                event: "listening"
            }) : window.clearInterval(this.h)
        }, It.K = function(t) {
            t.id = this.m, t = oe(t);
            var e;
            e = this.f;
            var n, i = this.c.src.match(ue);
            n = i[1];
            var o = i[2],
                r = i[3],
                i = i[4],
                a = "";
            for (n && (a += n + ":"), r && (a += "//", o && (a += o + "@"), a += r, i && (a += ":" + i)), n = a, e = 0 == n.indexOf("https:") ? [n] : e.f ? [n.replace("http:", "https:")] : e.j ? [n] : [n, n.replace("http:", "https:")], n = 0; n < e.length; n++) try {
                this.c.contentWindow.postMessage(t, e[n])
            } catch (s) {
                if (!s.name || "SyntaxError" != s.name) throw s;
                _(s, "WARNING")
            }
        };
        var Se = "StopIteration" in At ? At.StopIteration : {
            message: "StopIteration",
            stack: ""
        };
        tt.prototype.next = function() {
            throw Se
        }, tt.prototype.B = function() {
            return this
        }, h(rt, ot), rt.prototype.clear = function() {
            var t = it(this.B(!0)),
                e = this;
            _t(t, function(t) {
                e.remove(t)
            })
        }, h(at, rt), It = at.prototype, It.isAvailable = function() {
            if (!this.c) return !1;
            try {
                return this.c.setItem("__sak", "1"), this.c.removeItem("__sak"), !0
            } catch (t) {
                return !1
            }
        }, It.get = function(t) {
            if (t = this.c.getItem(t), !o(t) && null !== t) throw "Storage mechanism: Invalid value was encountered";
            return t
        }, It.remove = function(t) {
            this.c.removeItem(t)
        }, It.B = function(t) {
            var e = 0,
                n = this.c,
                i = new tt;
            return i.next = function() {
                if (e >= n.length) throw Se;
                var i = n.key(e++);
                if (t) return i;
                if (i = n.getItem(i), !o(i)) throw "Storage mechanism: Invalid value was encountered";
                return i
            }, i
        }, It.clear = function() {
            this.c.clear()
        }, It.key = function(t) {
            return this.c.key(t)
        }, h(st, at), h(ct, at), (new st).isAvailable(), (new ct).isAvailable();
        var Ie = "corp.google.com googleplex.com youtube.com youtube-nocookie.com youtubeeducation.com borg.google.com prod.google.com sandbox.google.com books.googleusercontent.com docs.google.com drive.google.com mail.google.com photos.google.com plus.google.com lh2.google.com picasaweb.google.com play.google.com googlevideo.com talkgadget.google.com survey.g.doubleclick.net youtube.googleapis.com vevo.com".split(" "),
            xe = "",
            Ae = null;
        lt.prototype.l = function(t) {
            var e;
            if ((e = t.origin == ft(this, "host")) || ((e = t.origin) && e == xe ? e = !0 : new RegExp("^(https?:)?//([a-z0-9-]{1,63}\\.)*(" + Ie.join("|").replace(/\./g, ".") + ")(:[0-9]+)?([/?#]|$)", "i").test(e) ? (xe = e, e = !0) : e = !1), e) {
                var n;
                try {
                    n = ie(t.data)
                } catch (i) {
                    return
                }
                this.j = !0, this.f || 0 != t.origin.indexOf("https:") || (this.f = !0), (t = Ae[n.id]) && (t.J = !0, t.J && (_t(t.H, t.K, t), t.H.length = 0), t.R(n))
            }
        }, h(dt, lt), h(vt, H), It = vt.prototype, It.D = function() {
            return "/embed/" + ft(this.f, "videoId")
        }, It.C = function() {
            var t = ft(this.f, "playerVars");
            if (t) {
                var e, n = {};
                for (e in t) n[e] = t[e];
                t = n
            } else t = {};
            return document.referrer && (t.widget_referrer = document.referrer.substring(0, 256)), t
        }, It.R = function(t) {
            var e = t.event;
            switch (t = t.info, e) {
                case "apiInfoDelivery":
                    if (r(t))
                        for (var n in t) this.o[n] = t[n];
                    break;
                case "infoDelivery":
                    yt(this, t);
                    break;
                case "initialDelivery":
                    window.clearInterval(this.h), this.F = {}, this.o = {}, mt(this, t.apiInterface), yt(this, t);
                    break;
                default:
                    this.v(e, t)
            }
        }, It.ba = function() {
            var t = '<iframe width="' + ft(this.f, "width") + '" height="' + ft(this.f, "height") + '" src="',
                e = ft(this.f, "host") + this.D();
            return Mt.test(e) && (-1 != e.indexOf("&") && (e = e.replace(Ot, "&amp;")), -1 != e.indexOf("<") && (e = e.replace(Nt, "&lt;")), -1 != e.indexOf(">") && (e = e.replace(Rt, "&gt;")), -1 != e.indexOf('"') && (e = e.replace(jt, "&quot;")), -1 != e.indexOf("'") && (e = e.replace(kt, "&#39;")), -1 != e.indexOf("\x00") && (e = e.replace(Lt, "&#0;"))), t + e + '" frameborder="0" allowfullscreen></iframe>'
        }, It.aa = function(t) {
            return this.o.namespaces ? t ? this.o[t].options || [] : this.o.namespaces || [] : []
        }, It.$ = function(t, e) {
            return this.o.namespaces && t && e ? this.o[t][e] : void 0
        }, h(wt, lt), h(bt, H), bt.prototype.D = function() {
            return "/embed/" + ft(this.f, "videoId")
        }, bt.prototype.C = function() {
            return {
                player: 0,
                thumb_width: ft(this.f, "thumbWidth"),
                thumb_height: ft(this.f, "thumbHeight"),
                thumb_align: ft(this.f, "thumbAlign")
            }
        }, bt.prototype.v = function(t, e) {
            bt.L.v.call(this, t, e ? e.info : void 0)
        }, h(Tt, lt), h(St, H), It = St.prototype, It.D = function() {
            return "/upload_embed"
        }, It.C = function() {
            var t = {},
                e = ft(this.f, "webcamOnly");
            return null != e && (t.webcam_only = e), t
        }, It.v = function(t, e) {
            St.L.v.call(this, t, e), "onApiReady" == t && z(this, "hostWindowReady")
        }, It.S = function(t) {
            z(this, "setVideoDescription", arguments)
        }, It.U = function(t) {
            z(this, "setVideoKeywords", arguments)
        }, It.V = function(t) {
            z(this, "setVideoPrivacy", arguments)
        }, It.T = function(t) {
            z(this, "setVideoDraftPrivacy", arguments)
        }, It.W = function(t) {
            z(this, "setVideoTitle", arguments)
        }, u("YT.PlayerState.UNSTARTED", -1), u("YT.PlayerState.ENDED", 0), u("YT.PlayerState.PLAYING", 1), u("YT.PlayerState.PAUSED", 2), u("YT.PlayerState.BUFFERING", 3), u("YT.PlayerState.CUED", 5), u("YT.UploadWidgetEvent.API_READY", "onApiReady"), u("YT.UploadWidgetEvent.UPLOAD_SUCCESS", "onUploadSuccess"), u("YT.UploadWidgetEvent.PROCESSING_COMPLETE", "onProcessingComplete"), u("YT.UploadWidgetEvent.STATE_CHANGE", "onStateChange"), u("YT.UploadWidgetState.IDLE", 0), u("YT.UploadWidgetState.PENDING", 1), u("YT.UploadWidgetState.ERROR", 2), u("YT.UploadWidgetState.PLAYBACK", 3), u("YT.UploadWidgetState.RECORDING", 4), u("YT.UploadWidgetState.STOPPED", 5), u("YT.get", function(t) {
            return we[t]
        }), u("YT.scan", G), u("YT.subscribe", function(t, e, n) {
            Ee.subscribe(t, e, n), Te[t] = !0;
            for (var i in we) $(we[i], t)
        }), u("YT.unsubscribe", function(t, e, n) {
            N(t, e, n)
        }), u("YT.Player", vt), u("YT.Thumbnail", bt), u("YT.UploadWidget", St), H.prototype.destroy = H.prototype.X, H.prototype.setSize = H.prototype.Z, H.prototype.getIframe = H.prototype.Y, H.prototype.addEventListener = H.prototype.addEventListener, vt.prototype.getVideoEmbedCode = vt.prototype.ba, vt.prototype.getOptions = vt.prototype.aa, vt.prototype.getOption = vt.prototype.$, St.prototype.setVideoDescription = St.prototype.S, St.prototype.setVideoKeywords = St.prototype.U, St.prototype.setVideoPrivacy = St.prototype.V, St.prototype.setVideoTitle = St.prototype.W, St.prototype.setVideoDraftPrivacy = St.prototype.T, be.push(function() {
            var t = F("player");
            _t(t, gt)
        }), be.push(function() {
            var t = F("thumbnail");
            _t(t, Et)
        }), "undefined" != typeof YTConfig && YTConfig.parsetags && "onload" != YTConfig.parsetags || G();
        var Ce = t("onYTReady");
        Ce && Ce();
        var Ye = t("onYouTubeIframeAPIReady");
        Ye && Ye();
        var Pe = t("onYouTubePlayerAPIReady");
        Pe && Pe()
    }();
var fabric = fabric || {
    version: "1.5.0"
};
"undefined" != typeof exports && (exports.fabric = fabric), "undefined" != typeof document && "undefined" != typeof window ? (fabric.document = document, fabric.window = window, window.fabric = fabric) : (fabric.document = require("jsdom").jsdom("<!DOCTYPE html><html><head></head><body></body></html>"), fabric.document.createWindow ? fabric.window = fabric.document.createWindow() : fabric.window = fabric.document.parentWindow), fabric.isTouchSupported = "ontouchstart" in fabric.document.documentElement, fabric.isLikelyNode = "undefined" != typeof Buffer && "undefined" == typeof window, fabric.SHARED_ATTRIBUTES = ["display", "transform", "fill", "fill-opacity", "fill-rule", "opacity", "stroke", "stroke-dasharray", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width"], fabric.DPI = 96, fabric.reNum = "(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)", "object" != typeof JSON && (JSON = {}),
    function() {
        "use strict";

        function f(t) {
            return 10 > t ? "0" + t : t
        }

        function quote(t) {
            return escapable.lastIndex = 0, escapable.test(t) ? '"' + t.replace(escapable, function(t) {
                var e = meta[t];
                return "string" == typeof e ? e : "\\u" + ("0000" + t.charCodeAt(0).toString(16)).slice(-4)
            }) + '"' : '"' + t + '"'
        }

        function str(t, e) {
            var i, r, n, s, o, a = gap,
                h = e[t];
            switch (h && "object" == typeof h && "function" == typeof h.toJSON && (h = h.toJSON(t)), "function" == typeof rep && (h = rep.call(e, t, h)), typeof h) {
                case "string":
                    return quote(h);
                case "number":
                    return isFinite(h) ? String(h) : "null";
                case "boolean":
                case "null":
                    return String(h);
                case "object":
                    if (!h) return "null";
                    if (gap += indent, o = [], "[object Array]" === Object.prototype.toString.apply(h)) {
                        for (s = h.length, i = 0; s > i; i += 1) o[i] = str(i, h) || "null";
                        return n = 0 === o.length ? "[]" : gap ? "[\n" + gap + o.join(",\n" + gap) + "\n" + a + "]" : "[" + o.join(",") + "]", gap = a, n
                    }
                    if (rep && "object" == typeof rep)
                        for (s = rep.length, i = 0; s > i; i += 1) "string" == typeof rep[i] && (r = rep[i], n = str(r, h), n && o.push(quote(r) + (gap ? ": " : ":") + n));
                    else
                        for (r in h) Object.prototype.hasOwnProperty.call(h, r) && (n = str(r, h), n && o.push(quote(r) + (gap ? ": " : ":") + n));
                    return n = 0 === o.length ? "{}" : gap ? "{\n" + gap + o.join(",\n" + gap) + "\n" + a + "}" : "{" + o.join(",") + "}", gap = a, n
            }
        }
        "function" != typeof Date.prototype.toJSON && (Date.prototype.toJSON = function() {
            return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" : null
        }, String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function() {
            return this.valueOf()
        });
        var cx, escapable, gap, indent, meta, rep;
        "function" != typeof JSON.stringify && (escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, meta = {
            "\b": "\\b",
            "	": "\\t",
            "\n": "\\n",
            "\f": "\\f",
            "\r": "\\r",
            '"': '\\"',
            "\\": "\\\\"
        }, JSON.stringify = function(t, e, i) {
            var r;
            if (gap = "", indent = "", "number" == typeof i)
                for (r = 0; i > r; r += 1) indent += " ";
            else "string" == typeof i && (indent = i);
            if (rep = e, e && "function" != typeof e && ("object" != typeof e || "number" != typeof e.length)) throw new Error("JSON.stringify");
            return str("", {
                "": t
            })
        }), "function" != typeof JSON.parse && (cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, JSON.parse = function(text, reviver) {
            function walk(t, e) {
                var i, r, n = t[e];
                if (n && "object" == typeof n)
                    for (i in n) Object.prototype.hasOwnProperty.call(n, i) && (r = walk(n, i), void 0 !== r ? n[i] = r : delete n[i]);
                return reviver.call(t, e, n)
            }
            var j;
            if (text = String(text), cx.lastIndex = 0, cx.test(text) && (text = text.replace(cx, function(t) {
                    return "\\u" + ("0000" + t.charCodeAt(0).toString(16)).slice(-4)
                })), /^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return j = eval("(" + text + ")"), "function" == typeof reviver ? walk({
                "": j
            }, "") : j;
            throw new SyntaxError("JSON.parse")
        })
    }(),
    function() {
        function t(t, e) {
            this.__eventListeners[t] && (e ? fabric.util.removeFromArray(this.__eventListeners[t], e) : this.__eventListeners[t].length = 0)
        }

        function e(t, e) {
            if (this.__eventListeners || (this.__eventListeners = {}), 1 === arguments.length)
                for (var i in t) this.on(i, t[i]);
            else this.__eventListeners[t] || (this.__eventListeners[t] = []), this.__eventListeners[t].push(e);
            return this
        }

        function i(e, i) {
            if (this.__eventListeners) {
                if (0 === arguments.length) this.__eventListeners = {};
                else if (1 === arguments.length && "object" == typeof arguments[0])
                    for (var r in e) t.call(this, r, e[r]);
                else t.call(this, e, i);
                return this
            }
        }

        function r(t, e) {
            if (this.__eventListeners) {
                var i = this.__eventListeners[t];
                if (i) {
                    for (var r = 0, n = i.length; n > r; r++) i[r].call(this, e || {});
                    return this
                }
            }
        }
        fabric.Observable = {
            observe: e,
            stopObserving: i,
            fire: r,
            on: e,
            off: i,
            trigger: r
        }
    }(), fabric.Collection = {
        add: function() {
            this._objects.push.apply(this._objects, arguments);
            for (var t = 0, e = arguments.length; e > t; t++) this._onObjectAdded(arguments[t]);
            return this.renderOnAddRemove && this.renderAll(), this
        },
        insertAt: function(t, e, i) {
            var r = this.getObjects();
            return i ? r[e] = t : r.splice(e, 0, t), this._onObjectAdded(t), this.renderOnAddRemove && this.renderAll(), this
        },
        remove: function() {
            for (var t, e = this.getObjects(), i = 0, r = arguments.length; r > i; i++) t = e.indexOf(arguments[i]), -1 !== t && (e.splice(t, 1), this._onObjectRemoved(arguments[i]));
            return this.renderOnAddRemove && this.renderAll(), this
        },
        forEachObject: function(t, e) {
            for (var i = this.getObjects(), r = i.length; r--;) t.call(e, i[r], r, i);
            return this
        },
        getObjects: function(t) {
            return "undefined" == typeof t ? this._objects : this._objects.filter(function(e) {
                return e.type === t
            })
        },
        item: function(t) {
            return this.getObjects()[t]
        },
        isEmpty: function() {
            return 0 === this.getObjects().length
        },
        size: function() {
            return this.getObjects().length
        },
        contains: function(t) {
            return this.getObjects().indexOf(t) > -1
        },
        complexity: function() {
            return this.getObjects().reduce(function(t, e) {
                return t += e.complexity ? e.complexity() : 0
            }, 0)
        }
    },
    function(t) {
        var e = Math.sqrt,
            i = Math.atan2,
            r = Math.PI / 180;
        fabric.util = {
            removeFromArray: function(t, e) {
                var i = t.indexOf(e);
                return -1 !== i && t.splice(i, 1), t
            },
            getRandomInt: function(t, e) {
                return Math.floor(Math.random() * (e - t + 1)) + t
            },
            degreesToRadians: function(t) {
                return t * r
            },
            radiansToDegrees: function(t) {
                return t / r
            },
            rotatePoint: function(t, e, i) {
                var r = Math.sin(i),
                    n = Math.cos(i);
                t.subtractEquals(e);
                var s = t.x * n - t.y * r,
                    o = t.x * r + t.y * n;
                return new fabric.Point(s, o).addEquals(e)
            },
            transformPoint: function(t, e, i) {
                return i ? new fabric.Point(e[0] * t.x + e[2] * t.y, e[1] * t.x + e[3] * t.y) : new fabric.Point(e[0] * t.x + e[2] * t.y + e[4], e[1] * t.x + e[3] * t.y + e[5])
            },
            invertTransform: function(t) {
                var e = t.slice(),
                    i = 1 / (t[0] * t[3] - t[1] * t[2]);
                e = [i * t[3], -i * t[1], -i * t[2], i * t[0], 0, 0];
                var r = fabric.util.transformPoint({
                    x: t[4],
                    y: t[5]
                }, e);
                return e[4] = -r.x, e[5] = -r.y, e
            },
            toFixed: function(t, e) {
                return parseFloat(Number(t).toFixed(e))
            },
            parseUnit: function(t, e) {
                var i = /\D{0,2}$/.exec(t),
                    r = parseFloat(t);
                switch (e || (e = fabric.Text.DEFAULT_SVG_FONT_SIZE), i[0]) {
                    case "mm":
                        return r * fabric.DPI / 25.4;
                    case "cm":
                        return r * fabric.DPI / 2.54;
                    case "in":
                        return r * fabric.DPI;
                    case "pt":
                        return r * fabric.DPI / 72;
                    case "pc":
                        return r * fabric.DPI / 72 * 12;
                    case "em":
                        return r * e;
                    default:
                        return r
                }
            },
            falseFunction: function() {
                return !1
            },
            getKlass: function(t, e) {
                return t = fabric.util.string.camelize(t.charAt(0).toUpperCase() + t.slice(1)), fabric.util.resolveNamespace(e)[t]
            },
            resolveNamespace: function(e) {
                if (!e) return fabric;
                for (var i = e.split("."), r = i.length, n = t || fabric.window, s = 0; r > s; ++s) n = n[i[s]];
                return n
            },
            loadImage: function(t, e, i, r) {
                if (!t) return void(e && e.call(i, t));
                var n = fabric.util.createImage();
                n.onload = function() {
                    e && e.call(i, n), n = n.onload = n.onerror = null
                }, n.onerror = function() {
                    fabric.log("Error loading " + n.src), e && e.call(i, null, !0), n = n.onload = n.onerror = null
                }, 0 !== t.indexOf("data") && "undefined" != typeof r && (n.crossOrigin = r), n.src = t
            },
            enlivenObjects: function(t, e, i, r) {
                function n() {
                    ++o === a && e && e(s)
                }
                t = t || [];
                var s = [],
                    o = 0,
                    a = t.length;
                return a ? void t.forEach(function(t, e) {
                    if (!t || !t.type) return void n();
                    var o = fabric.util.getKlass(t.type, i);
                    o.async ? o.fromObject(t, function(i, o) {
                        o || (s[e] = i, r && r(t, s[e])), n()
                    }) : (s[e] = o.fromObject(t), r && r(t, s[e]), n())
                }) : void(e && e(s))
            },
            groupSVGElements: function(t, e, i) {
                var r;
                return r = new fabric.PathGroup(t, e), "undefined" != typeof i && r.setSourcePath(i), r
            },
            populateWithProperties: function(t, e, i) {
                if (i && "[object Array]" === Object.prototype.toString.call(i))
                    for (var r = 0, n = i.length; n > r; r++) i[r] in t && (e[i[r]] = t[i[r]])
            },
            drawDashedLine: function(t, r, n, s, o, a) {
                var h = s - r,
                    c = o - n,
                    l = e(h * h + c * c),
                    u = i(c, h),
                    f = a.length,
                    g = 0,
                    p = !0;
                for (t.save(), t.translate(r, n), t.moveTo(0, 0), t.rotate(u), r = 0; l > r;) r += a[g++ % f], r > l && (r = l), t[p ? "lineTo" : "moveTo"](r, 0), p = !p;
                t.restore()
            },
            createCanvasElement: function(t) {
                return t || (t = fabric.document.createElement("canvas")), t.getContext || "undefined" == typeof G_vmlCanvasManager || G_vmlCanvasManager.initElement(t), t
            },
            createImage: function() {
                return fabric.isLikelyNode ? new(require("canvas").Image) : fabric.document.createElement("img")
            },
            createAccessors: function(t) {
                for (var e = t.prototype, i = e.stateProperties.length; i--;) {
                    var r = e.stateProperties[i],
                        n = r.charAt(0).toUpperCase() + r.slice(1),
                        s = "set" + n,
                        o = "get" + n;
                    e[o] || (e[o] = function(t) {
                        return new Function('return this.get("' + t + '")')
                    }(r)), e[s] || (e[s] = function(t) {
                        return new Function("value", 'return this.set("' + t + '", value)')
                    }(r))
                }
            },
            clipContext: function(t, e) {
                e.save(), e.beginPath(), t.clipTo(e), e.clip()
            },
            multiplyTransformMatrices: function(t, e) {
                return [t[0] * e[0] + t[2] * e[1], t[1] * e[0] + t[3] * e[1], t[0] * e[2] + t[2] * e[3], t[1] * e[2] + t[3] * e[3], t[0] * e[4] + t[2] * e[5] + t[4], t[1] * e[4] + t[3] * e[5] + t[5]]
            },
            getFunctionBody: function(t) {
                return (String(t).match(/function[^{]*\{([\s\S]*)\}/) || {})[1]
            },
            isTransparent: function(t, e, i, r) {
                r > 0 && (e > r ? e -= r : e = 0, i > r ? i -= r : i = 0);
                for (var n = !0, s = t.getImageData(e, i, 2 * r || 1, 2 * r || 1), o = 3, a = s.data.length; a > o; o += 4) {
                    var h = s.data[o];
                    if (n = 0 >= h, n === !1) break
                }
                return s = null, n
            }
        }
    }("undefined" != typeof exports ? exports : this),
    function() {
        function t(t, r, s, o, h, c, l) {
            var u = a.call(arguments);
            if (n[u]) return n[u];
            var f = Math.PI,
                g = l * f / 180,
                p = Math.sin(g),
                d = Math.cos(g),
                v = 0,
                b = 0;
            s = Math.abs(s), o = Math.abs(o);
            var y = -d * t * .5 - p * r * .5,
                _ = -d * r * .5 + p * t * .5,
                m = s * s,
                x = o * o,
                C = _ * _,
                w = y * y,
                S = m * x - m * C - x * w,
                O = 0;
            if (0 > S) {
                var T = Math.sqrt(1 - S / (m * x));
                s *= T, o *= T
            } else O = (h === c ? -1 : 1) * Math.sqrt(S / (m * C + x * w));
            var j = O * s * _ / o,
                A = -O * o * y / s,
                k = d * j - p * A + .5 * t,
                P = p * j + d * A + .5 * r,
                E = i(1, 0, (y - j) / s, (_ - A) / o),
                M = i((y - j) / s, (_ - A) / o, (-y - j) / s, (-_ - A) / o);
            0 === c && M > 0 ? M -= 2 * f : 1 === c && 0 > M && (M += 2 * f);
            for (var L = Math.ceil(Math.abs(M / f * 2)), D = [], I = M / L, R = 8 / 3 * Math.sin(I / 4) * Math.sin(I / 4) / Math.sin(I / 2), X = E + I, B = 0; L > B; B++) D[B] = e(E, X, d, p, s, o, k, P, R, v, b), v = D[B][4], b = D[B][5], E = X, X += I;
            return n[u] = D, D
        }

        function e(t, e, i, r, n, o, h, c, l, u, f) {
            var g = a.call(arguments);
            if (s[g]) return s[g];
            var p = Math.cos(t),
                d = Math.sin(t),
                v = Math.cos(e),
                b = Math.sin(e),
                y = i * n * v - r * o * b + h,
                _ = r * n * v + i * o * b + c,
                m = u + l * (-i * n * d - r * o * p),
                x = f + l * (-r * n * d + i * o * p),
                C = y + l * (i * n * b + r * o * v),
                w = _ + l * (r * n * b - i * o * v);
            return s[g] = [m, x, C, w, y, _], s[g]
        }

        function i(t, e, i, r) {
            var n = Math.atan2(e, t),
                s = Math.atan2(r, i);
            return s >= n ? s - n : 2 * Math.PI - (n - s)
        }

        function r(t, e, i, r, n, s, h, c) {
            var l = a.call(arguments);
            if (o[l]) return o[l];
            var u, f, g, p, d, v, b, y, _ = Math.sqrt,
                m = Math.min,
                x = Math.max,
                C = Math.abs,
                w = [],
                S = [
                    [],
                    []
                ];
            f = 6 * t - 12 * i + 6 * n, u = -3 * t + 9 * i - 9 * n + 3 * h, g = 3 * i - 3 * t;
            for (var O = 0; 2 > O; ++O)
                if (O > 0 && (f = 6 * e - 12 * r + 6 * s, u = -3 * e + 9 * r - 9 * s + 3 * c, g = 3 * r - 3 * e), C(u) < 1e-12) {
                    if (C(f) < 1e-12) continue;
                    p = -g / f, p > 0 && 1 > p && w.push(p)
                } else b = f * f - 4 * g * u, 0 > b || (y = _(b), d = (-f + y) / (2 * u), d > 0 && 1 > d && w.push(d), v = (-f - y) / (2 * u), v > 0 && 1 > v && w.push(v));
            for (var T, j, A, k = w.length, P = k; k--;) p = w[k], A = 1 - p, T = A * A * A * t + 3 * A * A * p * i + 3 * A * p * p * n + p * p * p * h, S[0][k] = T, j = A * A * A * e + 3 * A * A * p * r + 3 * A * p * p * s + p * p * p * c, S[1][k] = j;
            S[0][P] = t, S[1][P] = e, S[0][P + 1] = h, S[1][P + 1] = c;
            var E = [{
                x: m.apply(null, S[0]),
                y: m.apply(null, S[1])
            }, {
                x: x.apply(null, S[0]),
                y: x.apply(null, S[1])
            }];
            return o[l] = E, E
        }
        var n = {},
            s = {},
            o = {},
            a = Array.prototype.join;
        fabric.util.drawArc = function(e, i, r, n) {
            for (var s = n[0], o = n[1], a = n[2], h = n[3], c = n[4], l = n[5], u = n[6], f = [
                    [],
                    [],
                    [],
                    []
                ], g = t(l - i, u - r, s, o, h, c, a), p = 0, d = g.length; d > p; p++) f[p][0] = g[p][0] + i, f[p][1] = g[p][1] + r, f[p][2] = g[p][2] + i, f[p][3] = g[p][3] + r, f[p][4] = g[p][4] + i, f[p][5] = g[p][5] + r, e.bezierCurveTo.apply(e, f[p])
        }, fabric.util.getBoundsOfArc = function(e, i, n, s, o, a, h, c, l) {
            for (var u = 0, f = 0, g = [], p = [], d = t(c - e, l - i, n, s, a, h, o), v = [
                    [],
                    []
                ], b = 0, y = d.length; y > b; b++) g = r(u, f, d[b][0], d[b][1], d[b][2], d[b][3], d[b][4], d[b][5]), v[0].x = g[0].x + e, v[0].y = g[0].y + i, v[1].x = g[1].x + e, v[1].y = g[1].y + i, p.push(v[0]), p.push(v[1]), u = d[b][4], f = d[b][5];
            return p
        }, fabric.util.getBoundsOfCurve = r
    }(),
    function() {
        function t(t, e) {
            for (var i = n.call(arguments, 2), r = [], s = 0, o = t.length; o > s; s++) r[s] = i.length ? t[s][e].apply(t[s], i) : t[s][e].call(t[s]);
            return r
        }

        function e(t, e) {
            return r(t, e, function(t, e) {
                return t >= e
            })
        }

        function i(t, e) {
            return r(t, e, function(t, e) {
                return e > t
            })
        }

        function r(t, e, i) {
            if (t && 0 !== t.length) {
                var r = t.length - 1,
                    n = e ? t[r][e] : t[r];
                if (e)
                    for (; r--;) i(t[r][e], n) && (n = t[r][e]);
                else
                    for (; r--;) i(t[r], n) && (n = t[r]);
                return n
            }
        }
        var n = Array.prototype.slice;
        Array.prototype.indexOf || (Array.prototype.indexOf = function(t) {
            if (void 0 === this || null === this) throw new TypeError;
            var e = Object(this),
                i = e.length >>> 0;
            if (0 === i) return -1;
            var r = 0;
            if (arguments.length > 0 && (r = Number(arguments[1]), r !== r ? r = 0 : 0 !== r && r !== Number.POSITIVE_INFINITY && r !== Number.NEGATIVE_INFINITY && (r = (r > 0 || -1) * Math.floor(Math.abs(r)))), r >= i) return -1;
            for (var n = r >= 0 ? r : Math.max(i - Math.abs(r), 0); i > n; n++)
                if (n in e && e[n] === t) return n;
            return -1
        }), Array.prototype.forEach || (Array.prototype.forEach = function(t, e) {
            for (var i = 0, r = this.length >>> 0; r > i; i++) i in this && t.call(e, this[i], i, this)
        }), Array.prototype.map || (Array.prototype.map = function(t, e) {
            for (var i = [], r = 0, n = this.length >>> 0; n > r; r++) r in this && (i[r] = t.call(e, this[r], r, this));
            return i
        }), Array.prototype.every || (Array.prototype.every = function(t, e) {
            for (var i = 0, r = this.length >>> 0; r > i; i++)
                if (i in this && !t.call(e, this[i], i, this)) return !1;
            return !0
        }), Array.prototype.some || (Array.prototype.some = function(t, e) {
            for (var i = 0, r = this.length >>> 0; r > i; i++)
                if (i in this && t.call(e, this[i], i, this)) return !0;
            return !1
        }), Array.prototype.filter || (Array.prototype.filter = function(t, e) {
            for (var i, r = [], n = 0, s = this.length >>> 0; s > n; n++) n in this && (i = this[n], t.call(e, i, n, this) && r.push(i));
            return r
        }), Array.prototype.reduce || (Array.prototype.reduce = function(t) {
            var e, i = this.length >>> 0,
                r = 0;
            if (arguments.length > 1) e = arguments[1];
            else
                for (;;) {
                    if (r in this) {
                        e = this[r++];
                        break
                    }
                    if (++r >= i) throw new TypeError
                }
            for (; i > r; r++) r in this && (e = t.call(null, e, this[r], r, this));
            return e
        }), fabric.util.array = {
            invoke: t,
            min: i,
            max: e
        }
    }(),
    function() {
        function t(t, e) {
            for (var i in e) t[i] = e[i];
            return t
        }

        function e(e) {
            return t({}, e)
        }
        fabric.util.object = {
            extend: t,
            clone: e
        }
    }(),
    function() {
        function t(t) {
            return t.replace(/-+(.)?/g, function(t, e) {
                return e ? e.toUpperCase() : ""
            })
        }

        function e(t, e) {
            return t.charAt(0).toUpperCase() + (e ? t.slice(1) : t.slice(1).toLowerCase())
        }

        function i(t) {
            return t.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&apos;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
        }
        String.prototype.trim || (String.prototype.trim = function() {
            return this.replace(/^[\s\xA0]+/, "").replace(/[\s\xA0]+$/, "")
        }), fabric.util.string = {
            camelize: t,
            capitalize: e,
            escapeXml: i
        }
    }(),
    function() {
        var t = Array.prototype.slice,
            e = Function.prototype.apply,
            i = function() {};
        Function.prototype.bind || (Function.prototype.bind = function(r) {
            var n, s = this,
                o = t.call(arguments, 1);
            return n = o.length ? function() {
                return e.call(s, this instanceof i ? this : r, o.concat(t.call(arguments)))
            } : function() {
                return e.call(s, this instanceof i ? this : r, arguments)
            }, i.prototype = this.prototype, n.prototype = new i, n
        })
    }(),
    function() {
        function t() {}

        function e(t) {
            var e = this.constructor.superclass.prototype[t];
            return arguments.length > 1 ? e.apply(this, r.call(arguments, 1)) : e.call(this)
        }

        function i() {
            function i() {
                this.initialize.apply(this, arguments)
            }
            var s = null,
                a = r.call(arguments, 0);
            "function" == typeof a[0] && (s = a.shift()), i.superclass = s, i.subclasses = [], s && (t.prototype = s.prototype, i.prototype = new t, s.subclasses.push(i));
            for (var h = 0, c = a.length; c > h; h++) o(i, a[h], s);
            return i.prototype.initialize || (i.prototype.initialize = n), i.prototype.constructor = i, i.prototype.callSuper = e, i
        }
        var r = Array.prototype.slice,
            n = function() {},
            s = function() {
                for (var t in {
                        toString: 1
                    })
                    if ("toString" === t) return !1;
                return !0
            }(),
            o = function(t, e, i) {
                for (var r in e) r in t.prototype && "function" == typeof t.prototype[r] && (e[r] + "").indexOf("callSuper") > -1 ? t.prototype[r] = function(t) {
                    return function() {
                        var r = this.constructor.superclass;
                        this.constructor.superclass = i;
                        var n = e[t].apply(this, arguments);
                        return this.constructor.superclass = r, "initialize" !== t ? n : void 0
                    }
                }(r) : t.prototype[r] = e[r], s && (e.toString !== Object.prototype.toString && (t.prototype.toString = e.toString), e.valueOf !== Object.prototype.valueOf && (t.prototype.valueOf = e.valueOf))
            };
        fabric.util.createClass = i
    }(),
    function() {
        function t(t) {
            var e, i, r = Array.prototype.slice.call(arguments, 1),
                n = r.length;
            for (i = 0; n > i; i++)
                if (e = typeof t[r[i]], !/^(?:function|object|unknown)$/.test(e)) return !1;
            return !0
        }

        function e(t, e) {
            return {
                handler: e,
                wrappedHandler: i(t, e)
            }
        }

        function i(t, e) {
            return function(i) {
                e.call(o(t), i || fabric.window.event)
            }
        }

        function r(t, e) {
            return function(i) {
                if (d[t] && d[t][e])
                    for (var r = d[t][e], n = 0, s = r.length; s > n; n++) r[n].call(this, i || fabric.window.event)
            }
        }

        function n(t, e) {
            t || (t = fabric.window.event);
            var i = t.target || (typeof t.srcElement !== h ? t.srcElement : null),
                r = fabric.util.getScrollLeftTop(i, e);
            return {
                x: v(t) + r.left,
                y: b(t) + r.top
            }
        }

        function s(t, e, i) {
            var r = "touchend" === t.type ? "changedTouches" : "touches";
            return t[r] && t[r][0] ? t[r][0][e] - (t[r][0][e] - t[r][0][i]) || t[i] : t[i]
        }
        var o, a, h = "unknown",
            c = function() {
                var t = 0;
                return function(e) {
                    return e.__uniqueID || (e.__uniqueID = "uniqueID__" + t++)
                }
            }();
        ! function() {
            var t = {};
            o = function(e) {
                return t[e]
            }, a = function(e, i) {
                t[e] = i
            }
        }();
        var l, u, f = t(fabric.document.documentElement, "addEventListener", "removeEventListener") && t(fabric.window, "addEventListener", "removeEventListener"),
            g = t(fabric.document.documentElement, "attachEvent", "detachEvent") && t(fabric.window, "attachEvent", "detachEvent"),
            p = {},
            d = {};
        f ? (l = function(t, e, i) {
            t.addEventListener(e, i, !1)
        }, u = function(t, e, i) {
            t.removeEventListener(e, i, !1)
        }) : g ? (l = function(t, i, r) {
            var n = c(t);
            a(n, t), p[n] || (p[n] = {}), p[n][i] || (p[n][i] = []);
            var s = e(n, r);
            p[n][i].push(s), t.attachEvent("on" + i, s.wrappedHandler)
        }, u = function(t, e, i) {
            var r, n = c(t);
            if (p[n] && p[n][e])
                for (var s = 0, o = p[n][e].length; o > s; s++) r = p[n][e][s], r && r.handler === i && (t.detachEvent("on" + e, r.wrappedHandler), p[n][e][s] = null)
        }) : (l = function(t, e, i) {
            var n = c(t);
            if (d[n] || (d[n] = {}), !d[n][e]) {
                d[n][e] = [];
                var s = t["on" + e];
                s && d[n][e].push(s), t["on" + e] = r(n, e)
            }
            d[n][e].push(i)
        }, u = function(t, e, i) {
            var r = c(t);
            if (d[r] && d[r][e])
                for (var n = d[r][e], s = 0, o = n.length; o > s; s++) n[s] === i && n.splice(s, 1)
        }), fabric.util.addListener = l, fabric.util.removeListener = u;
        var v = function(t) {
                return typeof t.clientX !== h ? t.clientX : 0
            },
            b = function(t) {
                return typeof t.clientY !== h ? t.clientY : 0
            };
        fabric.isTouchSupported && (v = function(t) {
            return s(t, "pageX", "clientX")
        }, b = function(t) {
            return s(t, "pageY", "clientY")
        }), fabric.util.getPointer = n, fabric.util.object.extend(fabric.util, fabric.Observable)
    }(),
    function() {
        function t(t, e) {
            var i = t.style;
            if (!i) return t;
            if ("string" == typeof e) return t.style.cssText += ";" + e, e.indexOf("opacity") > -1 ? s(t, e.match(/opacity:\s*(\d?\.?\d*)/)[1]) : t;
            for (var r in e)
                if ("opacity" === r) s(t, e[r]);
                else {
                    var n = "float" === r || "cssFloat" === r ? "undefined" == typeof i.styleFloat ? "cssFloat" : "styleFloat" : r;
                    i[n] = e[r]
                }
            return t
        }
        var e = fabric.document.createElement("div"),
            i = "string" == typeof e.style.opacity,
            r = "string" == typeof e.style.filter,
            n = /alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,
            s = function(t) {
                return t
            };
        i ? s = function(t, e) {
            return t.style.opacity = e, t
        } : r && (s = function(t, e) {
            var i = t.style;
            return t.currentStyle && !t.currentStyle.hasLayout && (i.zoom = 1), n.test(i.filter) ? (e = e >= .9999 ? "" : "alpha(opacity=" + 100 * e + ")", i.filter = i.filter.replace(n, e)) : i.filter += " alpha(opacity=" + 100 * e + ")", t
        }), fabric.util.setStyle = t
    }(),
    function() {
        function t(t) {
            return "string" == typeof t ? fabric.document.getElementById(t) : t
        }

        function e(t, e) {
            var i = fabric.document.createElement(t);
            for (var r in e) "class" === r ? i.className = e[r] : "for" === r ? i.htmlFor = e[r] : i.setAttribute(r, e[r]);
            return i
        }

        function i(t, e) {
            t && -1 === (" " + t.className + " ").indexOf(" " + e + " ") && (t.className += (t.className ? " " : "") + e)
        }

        function r(t, i, r) {
            return "string" == typeof i && (i = e(i, r)), t.parentNode && t.parentNode.replaceChild(i, t), i.appendChild(t), i
        }

        function n(t, e) {
            var i, r, n = 0,
                s = 0,
                o = fabric.document.documentElement,
                a = fabric.document.body || {
                    scrollLeft: 0,
                    scrollTop: 0
                };
            for (r = t; t && t.parentNode && !i;) t = t.parentNode, 1 === t.nodeType && "fixed" === fabric.util.getElementStyle(t, "position") && (i = t), 1 === t.nodeType && r !== e && "absolute" === fabric.util.getElementStyle(t, "position") ? (n = 0, s = 0) : t === fabric.document ? (n = a.scrollLeft || o.scrollLeft || 0, s = a.scrollTop || o.scrollTop || 0) : (n += t.scrollLeft || 0, s += t.scrollTop || 0);
            return {
                left: n,
                top: s
            }
        }

        function s(t) {
            var e, i, r = t && t.ownerDocument,
                n = {
                    left: 0,
                    top: 0
                },
                s = {
                    left: 0,
                    top: 0
                },
                o = {
                    borderLeftWidth: "left",
                    borderTopWidth: "top",
                    paddingLeft: "left",
                    paddingTop: "top"
                };
            if (!r) return {
                left: 0,
                top: 0
            };
            for (var a in o) s[o[a]] += parseInt(l(t, a), 10) || 0;
            return e = r.documentElement, "undefined" != typeof t.getBoundingClientRect && (n = t.getBoundingClientRect()), i = fabric.util.getScrollLeftTop(t, null), {
                left: n.left + i.left - (e.clientLeft || 0) + s.left,
                top: n.top + i.top - (e.clientTop || 0) + s.top
            }
        }
        var o, a = Array.prototype.slice,
            h = function(t) {
                return a.call(t, 0)
            };
        try {
            o = h(fabric.document.childNodes) instanceof Array
        } catch (c) {}
        o || (h = function(t) {
            for (var e = new Array(t.length), i = t.length; i--;) e[i] = t[i];
            return e
        });
        var l;
        l = fabric.document.defaultView && fabric.document.defaultView.getComputedStyle ? function(t, e) {
                var i = fabric.document.defaultView.getComputedStyle(t, null);
                return i ? i[e] : void 0
            } : function(t, e) {
                var i = t.style[e];
                return !i && t.currentStyle && (i = t.currentStyle[e]), i
            },
            function() {
                function t(t) {
                    return "undefined" != typeof t.onselectstart && (t.onselectstart = fabric.util.falseFunction), r ? t.style[r] = "none" : "string" == typeof t.unselectable && (t.unselectable = "on"), t
                }

                function e(t) {
                    return "undefined" != typeof t.onselectstart && (t.onselectstart = null), r ? t.style[r] = "" : "string" == typeof t.unselectable && (t.unselectable = ""), t
                }
                var i = fabric.document.documentElement.style,
                    r = "userSelect" in i ? "userSelect" : "MozUserSelect" in i ? "MozUserSelect" : "WebkitUserSelect" in i ? "WebkitUserSelect" : "KhtmlUserSelect" in i ? "KhtmlUserSelect" : "";
                fabric.util.makeElementUnselectable = t, fabric.util.makeElementSelectable = e
            }(),
            function() {
                function t(t, e) {
                    var i = fabric.document.getElementsByTagName("head")[0],
                        r = fabric.document.createElement("script"),
                        n = !0;
                    r.onload = r.onreadystatechange = function(t) {
                        if (n) {
                            if ("string" == typeof this.readyState && "loaded" !== this.readyState && "complete" !== this.readyState) return;
                            n = !1, e(t || fabric.window.event), r = r.onload = r.onreadystatechange = null
                        }
                    }, r.src = t, i.appendChild(r)
                }
                fabric.util.getScript = t
            }(), fabric.util.getById = t, fabric.util.toArray = h, fabric.util.makeElement = e, fabric.util.addClass = i, fabric.util.wrapElement = r, fabric.util.getScrollLeftTop = n, fabric.util.getElementOffset = s, fabric.util.getElementStyle = l
    }(),
    function() {
        function t(t, e) {
            return t + (/\?/.test(t) ? "&" : "?") + e
        }

        function e() {}

        function i(i, n) {
            n || (n = {});
            var s, o = n.method ? n.method.toUpperCase() : "GET",
                a = n.onComplete || function() {},
                h = r();
            return h.onreadystatechange = function() {
                4 === h.readyState && (a(h), h.onreadystatechange = e)
            }, "GET" === o && (s = null, "string" == typeof n.parameters && (i = t(i, n.parameters))), h.open(o, i, !0), "POST" !== o && "PUT" !== o || h.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), h.send(s), h
        }
        var r = function() {
            for (var t = [function() {
                    return new ActiveXObject("Microsoft.XMLHTTP")
                }, function() {
                    return new ActiveXObject("Msxml2.XMLHTTP")
                }, function() {
                    return new ActiveXObject("Msxml2.XMLHTTP.3.0")
                }, function() {
                    return new XMLHttpRequest
                }], e = t.length; e--;) try {
                var i = t[e]();
                if (i) return t[e]
            } catch (r) {}
        }();
        fabric.util.request = i
    }(), fabric.log = function() {}, fabric.warn = function() {}, "undefined" != typeof console && ["log", "warn"].forEach(function(t) {
        "undefined" != typeof console[t] && "function" == typeof console[t].apply && (fabric[t] = function() {
            return console[t].apply(console, arguments)
        })
    }),
    function(t) {
        "use strict";

        function e(t, e) {
            this.x = t, this.y = e
        }
        var i = t.fabric || (t.fabric = {});
        return i.Point ? void i.warn("fabric.Point is already defined") : (i.Point = e, void(e.prototype = {
            constructor: e,
            add: function(t) {
                return new e(this.x + t.x, this.y + t.y)
            },
            addEquals: function(t) {
                return this.x += t.x, this.y += t.y, this
            },
            scalarAdd: function(t) {
                return new e(this.x + t, this.y + t)
            },
            scalarAddEquals: function(t) {
                return this.x += t, this.y += t, this
            },
            subtract: function(t) {
                return new e(this.x - t.x, this.y - t.y)
            },
            subtractEquals: function(t) {
                return this.x -= t.x, this.y -= t.y, this
            },
            scalarSubtract: function(t) {
                return new e(this.x - t, this.y - t)
            },
            scalarSubtractEquals: function(t) {
                return this.x -= t, this.y -= t, this
            },
            multiply: function(t) {
                return new e(this.x * t, this.y * t)
            },
            multiplyEquals: function(t) {
                return this.x *= t, this.y *= t, this
            },
            divide: function(t) {
                return new e(this.x / t, this.y / t)
            },
            divideEquals: function(t) {
                return this.x /= t, this.y /= t, this
            },
            eq: function(t) {
                return this.x === t.x && this.y === t.y
            },
            lt: function(t) {
                return this.x < t.x && this.y < t.y
            },
            lte: function(t) {
                return this.x <= t.x && this.y <= t.y
            },
            gt: function(t) {
                return this.x > t.x && this.y > t.y
            },
            gte: function(t) {
                return this.x >= t.x && this.y >= t.y
            },
            lerp: function(t, i) {
                return new e(this.x + (t.x - this.x) * i, this.y + (t.y - this.y) * i)
            },
            distanceFrom: function(t) {
                var e = this.x - t.x,
                    i = this.y - t.y;
                return Math.sqrt(e * e + i * i)
            },
            midPointFrom: function(t) {
                return new e(this.x + (t.x - this.x) / 2, this.y + (t.y - this.y) / 2)
            },
            min: function(t) {
                return new e(Math.min(this.x, t.x), Math.min(this.y, t.y))
            },
            max: function(t) {
                return new e(Math.max(this.x, t.x), Math.max(this.y, t.y))
            },
            toString: function() {
                return this.x + "," + this.y
            },
            setXY: function(t, e) {
                this.x = t, this.y = e
            },
            setFromPoint: function(t) {
                this.x = t.x, this.y = t.y
            },
            swap: function(t) {
                var e = this.x,
                    i = this.y;
                this.x = t.x, this.y = t.y, t.x = e, t.y = i
            }
        }))
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";

        function e(t) {
            this.status = t, this.points = []
        }
        var i = t.fabric || (t.fabric = {});
        return i.Intersection ? void i.warn("fabric.Intersection is already defined") : (i.Intersection = e, i.Intersection.prototype = {
            appendPoint: function(t) {
                this.points.push(t)
            },
            appendPoints: function(t) {
                this.points = this.points.concat(t)
            }
        }, i.Intersection.intersectLineLine = function(t, r, n, s) {
            var o, a = (s.x - n.x) * (t.y - n.y) - (s.y - n.y) * (t.x - n.x),
                h = (r.x - t.x) * (t.y - n.y) - (r.y - t.y) * (t.x - n.x),
                c = (s.y - n.y) * (r.x - t.x) - (s.x - n.x) * (r.y - t.y);
            if (0 !== c) {
                var l = a / c,
                    u = h / c;
                l >= 0 && 1 >= l && u >= 0 && 1 >= u ? (o = new e("Intersection"), o.points.push(new i.Point(t.x + l * (r.x - t.x), t.y + l * (r.y - t.y)))) : o = new e
            } else o = new e(0 === a || 0 === h ? "Coincident" : "Parallel");
            return o
        }, i.Intersection.intersectLinePolygon = function(t, i, r) {
            for (var n = new e, s = r.length, o = 0; s > o; o++) {
                var a = r[o],
                    h = r[(o + 1) % s],
                    c = e.intersectLineLine(t, i, a, h);
                n.appendPoints(c.points)
            }
            return n.points.length > 0 && (n.status = "Intersection"), n
        }, i.Intersection.intersectPolygonPolygon = function(t, i) {
            for (var r = new e, n = t.length, s = 0; n > s; s++) {
                var o = t[s],
                    a = t[(s + 1) % n],
                    h = e.intersectLinePolygon(o, a, i);
                r.appendPoints(h.points)
            }
            return r.points.length > 0 && (r.status = "Intersection"), r
        }, void(i.Intersection.intersectPolygonRectangle = function(t, r, n) {
            var s = r.min(n),
                o = r.max(n),
                a = new i.Point(o.x, s.y),
                h = new i.Point(s.x, o.y),
                c = e.intersectLinePolygon(s, a, t),
                l = e.intersectLinePolygon(a, o, t),
                u = e.intersectLinePolygon(o, h, t),
                f = e.intersectLinePolygon(h, s, t),
                g = new e;
            return g.appendPoints(c.points), g.appendPoints(l.points), g.appendPoints(u.points), g.appendPoints(f.points), g.points.length > 0 && (g.status = "Intersection"), g
        }))
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";

        function e(t) {
            t ? this._tryParsingColor(t) : this.setSource([0, 0, 0, 1])
        }

        function i(t, e, i) {
            return 0 > i && (i += 1), i > 1 && (i -= 1), 1 / 6 > i ? t + 6 * (e - t) * i : .5 > i ? e : 2 / 3 > i ? t + (e - t) * (2 / 3 - i) * 6 : t
        }
        var r = t.fabric || (t.fabric = {});
        return r.Color ? void r.warn("fabric.Color is already defined.") : (r.Color = e, r.Color.prototype = {
            _tryParsingColor: function(t) {
                var i;
                return t in e.colorNameMap && (t = e.colorNameMap[t]), "transparent" === t ? void this.setSource([255, 255, 255, 0]) : (i = e.sourceFromHex(t), i || (i = e.sourceFromRgb(t)), i || (i = e.sourceFromHsl(t)), void(i && this.setSource(i)))
            },
            _rgbToHsl: function(t, e, i) {
                t /= 255, e /= 255, i /= 255;
                var n, s, o, a = r.util.array.max([t, e, i]),
                    h = r.util.array.min([t, e, i]);
                if (o = (a + h) / 2, a === h) n = s = 0;
                else {
                    var c = a - h;
                    switch (s = o > .5 ? c / (2 - a - h) : c / (a + h), a) {
                        case t:
                            n = (e - i) / c + (i > e ? 6 : 0);
                            break;
                        case e:
                            n = (i - t) / c + 2;
                            break;
                        case i:
                            n = (t - e) / c + 4
                    }
                    n /= 6
                }
                return [Math.round(360 * n), Math.round(100 * s), Math.round(100 * o)]
            },
            getSource: function() {
                return this._source
            },
            setSource: function(t) {
                this._source = t
            },
            toRgb: function() {
                var t = this.getSource();
                return "rgb(" + t[0] + "," + t[1] + "," + t[2] + ")"
            },
            toRgba: function() {
                var t = this.getSource();
                return "rgba(" + t[0] + "," + t[1] + "," + t[2] + "," + t[3] + ")"
            },
            toHsl: function() {
                var t = this.getSource(),
                    e = this._rgbToHsl(t[0], t[1], t[2]);
                return "hsl(" + e[0] + "," + e[1] + "%," + e[2] + "%)"
            },
            toHsla: function() {
                var t = this.getSource(),
                    e = this._rgbToHsl(t[0], t[1], t[2]);
                return "hsla(" + e[0] + "," + e[1] + "%," + e[2] + "%," + t[3] + ")"
            },
            toHex: function() {
                var t, e, i, r = this.getSource();
                return t = r[0].toString(16), t = 1 === t.length ? "0" + t : t, e = r[1].toString(16), e = 1 === e.length ? "0" + e : e, i = r[2].toString(16), i = 1 === i.length ? "0" + i : i, t.toUpperCase() + e.toUpperCase() + i.toUpperCase()
            },
            getAlpha: function() {
                return this.getSource()[3]
            },
            setAlpha: function(t) {
                var e = this.getSource();
                return e[3] = t, this.setSource(e), this
            },
            toGrayscale: function() {
                var t = this.getSource(),
                    e = parseInt((.3 * t[0] + .59 * t[1] + .11 * t[2]).toFixed(0), 10),
                    i = t[3];
                return this.setSource([e, e, e, i]), this
            },
            toBlackWhite: function(t) {
                var e = this.getSource(),
                    i = (.3 * e[0] + .59 * e[1] + .11 * e[2]).toFixed(0),
                    r = e[3];
                return t = t || 127, i = Number(i) < Number(t) ? 0 : 255, this.setSource([i, i, i, r]), this
            },
            overlayWith: function(t) {
                t instanceof e || (t = new e(t));
                for (var i = [], r = this.getAlpha(), n = .5, s = this.getSource(), o = t.getSource(), a = 0; 3 > a; a++) i.push(Math.round(s[a] * (1 - n) + o[a] * n));
                return i[3] = r, this.setSource(i), this
            }
        }, r.Color.reRGBa = /^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/, r.Color.reHSLa = /^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/, r.Color.reHex = /^#?([0-9a-f]{6}|[0-9a-f]{3})$/i, r.Color.colorNameMap = {
            aqua: "#00FFFF",
            black: "#000000",
            blue: "#0000FF",
            fuchsia: "#FF00FF",
            gray: "#808080",
            green: "#008000",
            lime: "#00FF00",
            maroon: "#800000",
            navy: "#000080",
            olive: "#808000",
            orange: "#FFA500",
            purple: "#800080",
            red: "#FF0000",
            silver: "#C0C0C0",
            teal: "#008080",
            white: "#FFFFFF",
            yellow: "#FFFF00"
        }, r.Color.fromRgb = function(t) {
            return e.fromSource(e.sourceFromRgb(t))
        }, r.Color.sourceFromRgb = function(t) {
            var i = t.match(e.reRGBa);
            if (i) {
                var r = parseInt(i[1], 10) / (/%$/.test(i[1]) ? 100 : 1) * (/%$/.test(i[1]) ? 255 : 1),
                    n = parseInt(i[2], 10) / (/%$/.test(i[2]) ? 100 : 1) * (/%$/.test(i[2]) ? 255 : 1),
                    s = parseInt(i[3], 10) / (/%$/.test(i[3]) ? 100 : 1) * (/%$/.test(i[3]) ? 255 : 1);
                return [parseInt(r, 10), parseInt(n, 10), parseInt(s, 10), i[4] ? parseFloat(i[4]) : 1]
            }
        }, r.Color.fromRgba = e.fromRgb, r.Color.fromHsl = function(t) {
            return e.fromSource(e.sourceFromHsl(t))
        }, r.Color.sourceFromHsl = function(t) {
            var r = t.match(e.reHSLa);
            if (r) {
                var n, s, o, a = (parseFloat(r[1]) % 360 + 360) % 360 / 360,
                    h = parseFloat(r[2]) / (/%$/.test(r[2]) ? 100 : 1),
                    c = parseFloat(r[3]) / (/%$/.test(r[3]) ? 100 : 1);
                if (0 === h) n = s = o = c;
                else {
                    var l = .5 >= c ? c * (h + 1) : c + h - c * h,
                        u = 2 * c - l;
                    n = i(u, l, a + 1 / 3), s = i(u, l, a), o = i(u, l, a - 1 / 3)
                }
                return [Math.round(255 * n), Math.round(255 * s), Math.round(255 * o), r[4] ? parseFloat(r[4]) : 1]
            }
        }, r.Color.fromHsla = e.fromHsl, r.Color.fromHex = function(t) {
            return e.fromSource(e.sourceFromHex(t))
        }, r.Color.sourceFromHex = function(t) {
            if (t.match(e.reHex)) {
                var i = t.slice(t.indexOf("#") + 1),
                    r = 3 === i.length,
                    n = r ? i.charAt(0) + i.charAt(0) : i.substring(0, 2),
                    s = r ? i.charAt(1) + i.charAt(1) : i.substring(2, 4),
                    o = r ? i.charAt(2) + i.charAt(2) : i.substring(4, 6);
                return [parseInt(n, 16), parseInt(s, 16), parseInt(o, 16), 1]
            }
        }, void(r.Color.fromSource = function(t) {
            var i = new e;
            return i.setSource(t), i
        }))
    }("undefined" != typeof exports ? exports : this),
    function() {
        "use strict";
        if (fabric.StaticCanvas) return void fabric.warn("fabric.StaticCanvas is already defined.");
        var t = fabric.util.object.extend,
            e = fabric.util.getElementOffset,
            i = fabric.util.removeFromArray,
            r = new Error("Could not initialize `canvas` element");
        fabric.StaticCanvas = fabric.util.createClass({
            initialize: function(t, e) {
                e || (e = {}), this._initStatic(t, e), fabric.StaticCanvas.activeInstance = this
            },
            backgroundColor: "",
            backgroundImage: null,
            overlayColor: "",
            overlayImage: null,
            includeDefaultValues: !0,
            stateful: !0,
            renderOnAddRemove: !0,
            clipTo: null,
            controlsAboveOverlay: !1,
            allowTouchScrolling: !1,
            imageSmoothingEnabled: !0,
            preserveObjectStacking: !1,
            viewportTransform: [1, 0, 0, 1, 0, 0],
            onBeforeScaleRotate: function() {},
            _initStatic: function(t, e) {
                this._objects = [], this._createLowerCanvas(t),
                    this._initOptions(e), this._setImageSmoothing(), e.overlayImage && this.setOverlayImage(e.overlayImage, this.renderAll.bind(this)), e.backgroundImage && this.setBackgroundImage(e.backgroundImage, this.renderAll.bind(this)), e.backgroundColor && this.setBackgroundColor(e.backgroundColor, this.renderAll.bind(this)), e.overlayColor && this.setOverlayColor(e.overlayColor, this.renderAll.bind(this)), this.calcOffset()
            },
            calcOffset: function() {
                return this._offset = e(this.lowerCanvasEl), this
            },
            setOverlayImage: function(t, e, i) {
                return this.__setBgOverlayImage("overlayImage", t, e, i)
            },
            setBackgroundImage: function(t, e, i) {
                return this.__setBgOverlayImage("backgroundImage", t, e, i)
            },
            setOverlayColor: function(t, e) {
                return this.__setBgOverlayColor("overlayColor", t, e)
            },
            setBackgroundColor: function(t, e) {
                return this.__setBgOverlayColor("backgroundColor", t, e)
            },
            _setImageSmoothing: function() {
                var t = this.getContext();
                t.imageSmoothingEnabled = this.imageSmoothingEnabled, t.webkitImageSmoothingEnabled = this.imageSmoothingEnabled, t.mozImageSmoothingEnabled = this.imageSmoothingEnabled, t.msImageSmoothingEnabled = this.imageSmoothingEnabled, t.oImageSmoothingEnabled = this.imageSmoothingEnabled
            },
            __setBgOverlayImage: function(t, e, i, r) {
                return "string" == typeof e ? fabric.util.loadImage(e, function(e) {
                    this[t] = new fabric.Image(e, r), i && i()
                }, this, r && r.crossOrigin) : (r && e.setOptions(r), this[t] = e, i && i()), this
            },
            __setBgOverlayColor: function(t, e, i) {
                if (e && e.source) {
                    var r = this;
                    fabric.util.loadImage(e.source, function(n) {
                        r[t] = new fabric.Pattern({
                            source: n,
                            repeat: e.repeat,
                            offsetX: e.offsetX,
                            offsetY: e.offsetY
                        }), i && i()
                    })
                } else this[t] = e, i && i();
                return this
            },
            _createCanvasElement: function() {
                var t = fabric.document.createElement("canvas");
                if (t.style || (t.style = {}), !t) throw r;
                return this._initCanvasElement(t), t
            },
            _initCanvasElement: function(t) {
                if (fabric.util.createCanvasElement(t), "undefined" == typeof t.getContext) throw r
            },
            _initOptions: function(t) {
                for (var e in t) this[e] = t[e];
                this.width = this.width || parseInt(this.lowerCanvasEl.width, 10) || 0, this.height = this.height || parseInt(this.lowerCanvasEl.height, 10) || 0, this.lowerCanvasEl.style && (this.lowerCanvasEl.width = this.width, this.lowerCanvasEl.height = this.height, this.lowerCanvasEl.style.width = this.width + "px", this.lowerCanvasEl.style.height = this.height + "px", this.viewportTransform = this.viewportTransform.slice())
            },
            _createLowerCanvas: function(t) {
                this.lowerCanvasEl = fabric.util.getById(t) || this._createCanvasElement(), this._initCanvasElement(this.lowerCanvasEl), fabric.util.addClass(this.lowerCanvasEl, "lower-canvas"), this.interactive && this._applyCanvasStyle(this.lowerCanvasEl), this.contextContainer = this.lowerCanvasEl.getContext("2d")
            },
            getWidth: function() {
                return this.width
            },
            getHeight: function() {
                return this.height
            },
            setWidth: function(t, e) {
                return this.setDimensions({
                    width: t
                }, e)
            },
            setHeight: function(t, e) {
                return this.setDimensions({
                    height: t
                }, e)
            },
            setDimensions: function(t, e) {
                var i;
                e = e || {};
                for (var r in t) i = t[r], e.cssOnly || (this._setBackstoreDimension(r, t[r]), i += "px"), e.backstoreOnly || this._setCssDimension(r, i);
                return e.cssOnly || this.renderAll(), this.calcOffset(), this
            },
            _setBackstoreDimension: function(t, e) {
                return this.lowerCanvasEl[t] = e, this.upperCanvasEl && (this.upperCanvasEl[t] = e), this.cacheCanvasEl && (this.cacheCanvasEl[t] = e), this[t] = e, this
            },
            _setCssDimension: function(t, e) {
                return this.lowerCanvasEl.style[t] = e, this.upperCanvasEl && (this.upperCanvasEl.style[t] = e), this.wrapperEl && (this.wrapperEl.style[t] = e), this
            },
            getZoom: function() {
                return Math.sqrt(this.viewportTransform[0] * this.viewportTransform[3])
            },
            setViewportTransform: function(t) {
                var e = this.getActiveGroup();
                this.viewportTransform = t, this.renderAll();
                for (var i = 0, r = this._objects.length; r > i; i++) this._objects[i].setCoords();
                return e && e.setCoords(), this
            },
            zoomToPoint: function(t, e) {
                var i = t;
                t = fabric.util.transformPoint(t, fabric.util.invertTransform(this.viewportTransform)), this.viewportTransform[0] = e, this.viewportTransform[3] = e;
                var r = fabric.util.transformPoint(t, this.viewportTransform);
                this.viewportTransform[4] += i.x - r.x, this.viewportTransform[5] += i.y - r.y, this.renderAll();
                for (var n = 0, s = this._objects.length; s > n; n++) this._objects[n].setCoords();
                return this
            },
            setZoom: function(t) {
                return this.zoomToPoint(new fabric.Point(0, 0), t), this
            },
            absolutePan: function(t) {
                this.viewportTransform[4] = -t.x, this.viewportTransform[5] = -t.y, this.renderAll();
                for (var e = 0, i = this._objects.length; i > e; e++) this._objects[e].setCoords();
                return this
            },
            relativePan: function(t) {
                return this.absolutePan(new fabric.Point(-t.x - this.viewportTransform[4], -t.y - this.viewportTransform[5]))
            },
            getElement: function() {
                return this.lowerCanvasEl
            },
            getActiveObject: function() {
                return null
            },
            getActiveGroup: function() {
                return null
            },
            _draw: function(t, e) {
                if (e) {
                    t.save();
                    var i = this.viewportTransform;
                    t.transform(i[0], i[1], i[2], i[3], i[4], i[5]), this._shouldRenderObject(e) && e.render(t), t.restore(), this.controlsAboveOverlay || e._renderControls(t)
                }
            },
            _shouldRenderObject: function(t) {
                return t ? t !== this.getActiveGroup() || !this.preserveObjectStacking : !1
            },
            _onObjectAdded: function(t) {
                this.stateful && t.setupState(), t.canvas = this, t.setCoords(), this.fire("object:added", {
                    target: t
                }), t.fire("added")
            },
            _onObjectRemoved: function(t) {
                this.getActiveObject() === t && (this.fire("before:selection:cleared", {
                    target: t
                }), this._discardActiveObject(), this.fire("selection:cleared")), this.fire("object:removed", {
                    target: t
                }), t.fire("removed")
            },
            clearContext: function(t) {
                return t.clearRect(0, 0, this.width, this.height), this
            },
            getContext: function() {
                return this.contextContainer
            },
            clear: function() {
                return this._objects.length = 0, this.discardActiveGroup && this.discardActiveGroup(), this.discardActiveObject && this.discardActiveObject(), this.clearContext(this.contextContainer), this.contextTop && this.clearContext(this.contextTop), this.fire("canvas:cleared"), this.renderAll(), this
            },
            renderAll: function(t) {
                var e = this[t === !0 && this.interactive ? "contextTop" : "contextContainer"],
                    i = this.getActiveGroup();
                return this.contextTop && this.selection && !this._groupSelector && this.clearContext(this.contextTop), t || this.clearContext(e), this.fire("before:render"), this.clipTo && fabric.util.clipContext(this, e), this._renderBackground(e), this._renderObjects(e, i), this._renderActiveGroup(e, i), this.clipTo && e.restore(), this._renderOverlay(e), this.controlsAboveOverlay && this.interactive && this.drawControls(e), this.fire("after:render"), this
            },
            _renderObjects: function(t, e) {
                var i, r;
                if (!e || this.preserveObjectStacking)
                    for (i = 0, r = this._objects.length; r > i; ++i) this._draw(t, this._objects[i]);
                else
                    for (i = 0, r = this._objects.length; r > i; ++i) this._objects[i] && !e.contains(this._objects[i]) && this._draw(t, this._objects[i])
            },
            _renderActiveGroup: function(t, e) {
                if (e) {
                    var i = [];
                    this.forEachObject(function(t) {
                        e.contains(t) && i.push(t)
                    }), e._set("objects", i), this._draw(t, e)
                }
            },
            _renderBackground: function(t) {
                this.backgroundColor && (t.fillStyle = this.backgroundColor.toLive ? this.backgroundColor.toLive(t) : this.backgroundColor, t.fillRect(this.backgroundColor.offsetX || 0, this.backgroundColor.offsetY || 0, this.width, this.height)), this.backgroundImage && this._draw(t, this.backgroundImage)
            },
            _renderOverlay: function(t) {
                this.overlayColor && (t.fillStyle = this.overlayColor.toLive ? this.overlayColor.toLive(t) : this.overlayColor, t.fillRect(this.overlayColor.offsetX || 0, this.overlayColor.offsetY || 0, this.width, this.height)), this.overlayImage && this._draw(t, this.overlayImage)
            },
            renderTop: function() {
                var t = this.contextTop || this.contextContainer;
                this.clearContext(t), this.selection && this._groupSelector && this._drawSelection();
                var e = this.getActiveGroup();
                return e && e.render(t), this._renderOverlay(t), this.fire("after:render"), this
            },
            getCenter: function() {
                return {
                    top: this.getHeight() / 2,
                    left: this.getWidth() / 2
                }
            },
            centerObjectH: function(t) {
                return this._centerObject(t, new fabric.Point(this.getCenter().left, t.getCenterPoint().y)), this.renderAll(), this
            },
            centerObjectV: function(t) {
                return this._centerObject(t, new fabric.Point(t.getCenterPoint().x, this.getCenter().top)), this.renderAll(), this
            },
            centerObject: function(t) {
                var e = this.getCenter();
                return this._centerObject(t, new fabric.Point(e.left, e.top)), this.renderAll(), this
            },
            _centerObject: function(t, e) {
                return t.setPositionByOrigin(e, "center", "center"), this
            },
            toDatalessJSON: function(t) {
                return this.toDatalessObject(t)
            },
            toObject: function(t) {
                return this._toObjectMethod("toObject", t)
            },
            toDatalessObject: function(t) {
                return this._toObjectMethod("toDatalessObject", t)
            },
            _toObjectMethod: function(e, i) {
                var r = {
                    objects: this._toObjects(e, i)
                };
                return t(r, this.__serializeBgOverlay()), fabric.util.populateWithProperties(this, r, i), r
            },
            _toObjects: function(t, e) {
                return this.getObjects().map(function(i) {
                    return this._toObject(i, t, e)
                }, this)
            },
            _toObject: function(t, e, i) {
                var r;
                this.includeDefaultValues || (r = t.includeDefaultValues, t.includeDefaultValues = !1);
                var n = this._realizeGroupTransformOnObject(t),
                    s = t[e](i);
                return this.includeDefaultValues || (t.includeDefaultValues = r), this._unwindGroupTransformOnObject(t, n), s
            },
            _realizeGroupTransformOnObject: function(t) {
                var e = ["angle", "flipX", "flipY", "height", "left", "scaleX", "scaleY", "top", "width"];
                if (t.group && t.group === this.getActiveGroup()) {
                    var i = {};
                    return e.forEach(function(e) {
                        i[e] = t[e]
                    }), this.getActiveGroup().realizeTransform(t), i
                }
                return null
            },
            _unwindGroupTransformOnObject: function(t, e) {
                e && t.set(e)
            },
            __serializeBgOverlay: function() {
                var t = {
                    background: this.backgroundColor && this.backgroundColor.toObject ? this.backgroundColor.toObject() : this.backgroundColor
                };
                return this.overlayColor && (t.overlay = this.overlayColor.toObject ? this.overlayColor.toObject() : this.overlayColor), this.backgroundImage && (t.backgroundImage = this.backgroundImage.toObject()), this.overlayImage && (t.overlayImage = this.overlayImage.toObject()), t
            },
            svgViewportTransformation: !0,
            toSVG: function(t, e) {
                t || (t = {});
                var i = [];
                return this._setSVGPreamble(i, t), this._setSVGHeader(i, t), this._setSVGBgOverlayColor(i, "backgroundColor"), this._setSVGBgOverlayImage(i, "backgroundImage"), this._setSVGObjects(i, e), this._setSVGBgOverlayColor(i, "overlayColor"), this._setSVGBgOverlayImage(i, "overlayImage"), i.push("</svg>"), i.join("")
            },
            _setSVGPreamble: function(t, e) {
                e.suppressPreamble || t.push('<?xml version="1.0" encoding="', e.encoding || "UTF-8", '" standalone="no" ?>', '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ', '"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')
            },
            _setSVGHeader: function(t, e) {
                var i, r, n;
                e.viewBox ? (i = e.viewBox.width, r = e.viewBox.height) : (i = this.width, r = this.height, this.svgViewportTransformation || (n = this.viewportTransform, i /= n[0], r /= n[3])), t.push("<svg ", 'xmlns="http://www.w3.org/2000/svg" ', 'xmlns:xlink="http://www.w3.org/1999/xlink" ', 'version="1.1" ', 'width="', i, '" ', 'height="', r, '" ', this.backgroundColor && !this.backgroundColor.toLive ? 'style="background-color: ' + this.backgroundColor + '" ' : null, e.viewBox ? 'viewBox="' + e.viewBox.x + " " + e.viewBox.y + " " + e.viewBox.width + " " + e.viewBox.height + '" ' : null, 'xml:space="preserve">', "<desc>Created with Fabric.js ", fabric.version, "</desc>", "<defs>", fabric.createSVGFontFacesMarkup(this.getObjects()), fabric.createSVGRefElementsMarkup(this), "</defs>")
            },
            _setSVGObjects: function(t, e) {
                for (var i = 0, r = this.getObjects(), n = r.length; n > i; i++) {
                    var s = r[i],
                        o = this._realizeGroupTransformOnObject(s);
                    t.push(s.toSVG(e)), this._unwindGroupTransformOnObject(s, o)
                }
            },
            _setSVGBgOverlayImage: function(t, e) {
                this[e] && this[e].toSVG && t.push(this[e].toSVG())
            },
            _setSVGBgOverlayColor: function(t, e) {
                this[e] && this[e].source ? t.push('<rect x="', this[e].offsetX, '" y="', this[e].offsetY, '" ', 'width="', "repeat-y" === this[e].repeat || "no-repeat" === this[e].repeat ? this[e].source.width : this.width, '" height="', "repeat-x" === this[e].repeat || "no-repeat" === this[e].repeat ? this[e].source.height : this.height, '" fill="url(#' + e + 'Pattern)"', "></rect>") : this[e] && "overlayColor" === e && t.push('<rect x="0" y="0" ', 'width="', this.width, '" height="', this.height, '" fill="', this[e], '"', "></rect>")
            },
            sendToBack: function(t) {
                return i(this._objects, t), this._objects.unshift(t), this.renderAll && this.renderAll()
            },
            bringToFront: function(t) {
                return i(this._objects, t), this._objects.push(t), this.renderAll && this.renderAll()
            },
            sendBackwards: function(t, e) {
                var r = this._objects.indexOf(t);
                if (0 !== r) {
                    var n = this._findNewLowerIndex(t, r, e);
                    i(this._objects, t), this._objects.splice(n, 0, t), this.renderAll && this.renderAll()
                }
                return this
            },
            _findNewLowerIndex: function(t, e, i) {
                var r;
                if (i) {
                    r = e;
                    for (var n = e - 1; n >= 0; --n) {
                        var s = t.intersectsWithObject(this._objects[n]) || t.isContainedWithinObject(this._objects[n]) || this._objects[n].isContainedWithinObject(t);
                        if (s) {
                            r = n;
                            break
                        }
                    }
                } else r = e - 1;
                return r
            },
            bringForward: function(t, e) {
                var r = this._objects.indexOf(t);
                if (r !== this._objects.length - 1) {
                    var n = this._findNewUpperIndex(t, r, e);
                    i(this._objects, t), this._objects.splice(n, 0, t), this.renderAll && this.renderAll()
                }
                return this
            },
            _findNewUpperIndex: function(t, e, i) {
                var r;
                if (i) {
                    r = e;
                    for (var n = e + 1; n < this._objects.length; ++n) {
                        var s = t.intersectsWithObject(this._objects[n]) || t.isContainedWithinObject(this._objects[n]) || this._objects[n].isContainedWithinObject(t);
                        if (s) {
                            r = n;
                            break
                        }
                    }
                } else r = e + 1;
                return r
            },
            moveTo: function(t, e) {
                return i(this._objects, t), this._objects.splice(e, 0, t), this.renderAll && this.renderAll()
            },
            dispose: function() {
                return this.clear(), this.interactive && this.removeListeners(), this
            },
            toString: function() {
                return "#<fabric.Canvas (" + this.complexity() + "): { objects: " + this.getObjects().length + " }>"
            }
        }), t(fabric.StaticCanvas.prototype, fabric.Observable), t(fabric.StaticCanvas.prototype, fabric.Collection), t(fabric.StaticCanvas.prototype, fabric.DataURLExporter), t(fabric.StaticCanvas, {
            EMPTY_JSON: '{"objects": [], "background": "white"}',
            supports: function(t) {
                var e = fabric.util.createCanvasElement();
                if (!e || !e.getContext) return null;
                var i = e.getContext("2d");
                if (!i) return null;
                switch (t) {
                    case "getImageData":
                        return "undefined" != typeof i.getImageData;
                    case "setLineDash":
                        return "undefined" != typeof i.setLineDash;
                    case "toDataURL":
                        return "undefined" != typeof e.toDataURL;
                    case "toDataURLWithQuality":
                        try {
                            return e.toDataURL("image/jpeg", 0), !0
                        } catch (r) {}
                        return !1;
                    default:
                        return null
                }
            }
        }), fabric.StaticCanvas.prototype.toJSON = fabric.StaticCanvas.prototype.toObject
    }(),
    function() {
        var t = fabric.util.getPointer,
            e = fabric.util.degreesToRadians,
            i = fabric.util.radiansToDegrees,
            r = Math.atan2,
            n = Math.abs,
            s = .5;
        fabric.Canvas = fabric.util.createClass(fabric.StaticCanvas, {
            initialize: function(t, e) {
                e || (e = {}), this._initStatic(t, e), this._initInteractive(), this._createCacheCanvas(), fabric.Canvas.activeInstance = this
            },
            uniScaleTransform: !1,
            centeredScaling: !1,
            centeredRotation: !1,
            interactive: !0,
            selection: !0,
            selectionColor: "rgba(100, 100, 255, 0.3)",
            selectionDashArray: [],
            selectionBorderColor: "rgba(255, 255, 255, 0.3)",
            selectionLineWidth: 1,
            hoverCursor: "move",
            moveCursor: "move",
            defaultCursor: "default",
            freeDrawingCursor: "crosshair",
            rotationCursor: "crosshair",
            containerClass: "canvas-container",
            perPixelTargetFind: !1,
            targetFindTolerance: 0,
            skipTargetFind: !1,
            _initInteractive: function() {
                this._currentTransform = null, this._groupSelector = null, this._initWrapperElement(), this._createUpperCanvas(), this._initEventListeners(), this.freeDrawingBrush = fabric.PencilBrush && new fabric.PencilBrush(this), this.calcOffset()
            },
            _resetCurrentTransform: function(t) {
                var e = this._currentTransform;
                e.target.set({
                    scaleX: e.original.scaleX,
                    scaleY: e.original.scaleY,
                    left: e.original.left,
                    top: e.original.top
                }), this._shouldCenterTransform(t, e.target) ? "rotate" === e.action ? this._setOriginToCenter(e.target) : ("center" !== e.originX && ("right" === e.originX ? e.mouseXSign = -1 : e.mouseXSign = 1), "center" !== e.originY && ("bottom" === e.originY ? e.mouseYSign = -1 : e.mouseYSign = 1), e.originX = "center", e.originY = "center") : (e.originX = e.original.originX, e.originY = e.original.originY)
            },
            containsPoint: function(t, e) {
                var i = this.getPointer(t, !0),
                    r = this._normalizePointer(e, i);
                return e.containsPoint(r) || e._findTargetCorner(i)
            },
            _normalizePointer: function(t, e) {
                var i, r = this.getActiveGroup(),
                    n = e.x,
                    s = e.y,
                    o = r && "group" !== t.type && r.contains(t);
                return o && (i = new fabric.Point(r.left, r.top), i = fabric.util.transformPoint(i, this.viewportTransform, !0), n -= i.x, s -= i.y), {
                    x: n,
                    y: s
                }
            },
            isTargetTransparent: function(t, e, i) {
                var r = t.hasBorders,
                    n = t.transparentCorners;
                t.hasBorders = t.transparentCorners = !1, this._draw(this.contextCache, t), t.hasBorders = r, t.transparentCorners = n;
                var s = fabric.util.isTransparent(this.contextCache, e, i, this.targetFindTolerance);
                return this.clearContext(this.contextCache), s
            },
            _shouldClearSelection: function(t, e) {
                var i = this.getActiveGroup(),
                    r = this.getActiveObject();
                return !e || e && i && !i.contains(e) && i !== e && !t.shiftKey || e && !e.evented || e && !e.selectable && r && r !== e
            },
            _shouldCenterTransform: function(t, e) {
                if (e) {
                    var i, r = this._currentTransform;
                    return "scale" === r.action || "scaleX" === r.action || "scaleY" === r.action ? i = this.centeredScaling || e.centeredScaling : "rotate" === r.action && (i = this.centeredRotation || e.centeredRotation), i ? !t.altKey : t.altKey
                }
            },
            _getOriginFromCorner: function(t, e) {
                var i = {
                    x: t.originX,
                    y: t.originY
                };
                return "ml" === e || "tl" === e || "bl" === e ? i.x = "right" : "mr" !== e && "tr" !== e && "br" !== e || (i.x = "left"), "tl" === e || "mt" === e || "tr" === e ? i.y = "bottom" : "bl" !== e && "mb" !== e && "br" !== e || (i.y = "top"), i
            },
            _getActionFromCorner: function(t, e) {
                var i = "drag";
                return e && (i = "ml" === e || "mr" === e ? "scaleX" : "mt" === e || "mb" === e ? "scaleY" : "mtr" === e ? "rotate" : "scale"), i
            },
            _setupCurrentTransform: function(t, i) {
                if (i) {
                    var r = this.getPointer(t),
                        n = i._findTargetCorner(this.getPointer(t, !0)),
                        s = this._getActionFromCorner(i, n),
                        o = this._getOriginFromCorner(i, n);
                    this._currentTransform = {
                        target: i,
                        action: s,
                        scaleX: i.scaleX,
                        scaleY: i.scaleY,
                        offsetX: r.x - i.left,
                        offsetY: r.y - i.top,
                        originX: o.x,
                        originY: o.y,
                        ex: r.x,
                        ey: r.y,
                        left: i.left,
                        top: i.top,
                        theta: e(i.angle),
                        width: i.width * i.scaleX,
                        mouseXSign: 1,
                        mouseYSign: 1
                    }, this._currentTransform.original = {
                        left: i.left,
                        top: i.top,
                        scaleX: i.scaleX,
                        scaleY: i.scaleY,
                        originX: o.x,
                        originY: o.y
                    }, this._resetCurrentTransform(t)
                }
            },
            _translateObject: function(t, e) {
                var i = this._currentTransform.target;
                i.get("lockMovementX") || i.set("left", t - this._currentTransform.offsetX), i.get("lockMovementY") || i.set("top", e - this._currentTransform.offsetY)
            },
            _scaleObject: function(t, e, i) {
                var r = this._currentTransform,
                    n = r.target,
                    s = n.get("lockScalingX"),
                    o = n.get("lockScalingY"),
                    a = n.get("lockScalingFlip");
                if (!s || !o) {
                    var h = n.translateToOriginPoint(n.getCenterPoint(), r.originX, r.originY),
                        c = n.toLocalPoint(new fabric.Point(t, e), r.originX, r.originY);
                    this._setLocalMouse(c, r), this._setObjectScale(c, r, s, o, i, a), n.setPositionByOrigin(h, r.originX, r.originY)
                }
            },
            _setObjectScale: function(t, e, i, r, n, s) {
                var o = e.target,
                    a = !1,
                    h = !1,
                    c = o.stroke ? o.strokeWidth : 0;
                e.newScaleX = t.x / (o.width + c / 2), e.newScaleY = t.y / (o.height + c / 2), s && e.newScaleX <= 0 && e.newScaleX < o.scaleX && (a = !0), s && e.newScaleY <= 0 && e.newScaleY < o.scaleY && (h = !0), "equally" !== n || i || r ? n ? "x" !== n || o.get("lockUniScaling") ? "y" !== n || o.get("lockUniScaling") || h || r || o.set("scaleY", e.newScaleY) : a || i || o.set("scaleX", e.newScaleX) : (a || i || o.set("scaleX", e.newScaleX), h || r || o.set("scaleY", e.newScaleY)) : a || h || this._scaleObjectEqually(t, o, e), a || h || this._flipObject(e, n)
            },
            _scaleObjectEqually: function(t, e, i) {
                var r = t.y + t.x,
                    n = e.stroke ? e.strokeWidth : 0,
                    s = (e.height + n / 2) * i.original.scaleY + (e.width + n / 2) * i.original.scaleX;
                i.newScaleX = i.original.scaleX * r / s, i.newScaleY = i.original.scaleY * r / s, e.set("scaleX", i.newScaleX), e.set("scaleY", i.newScaleY)
            },
            _flipObject: function(t, e) {
                t.newScaleX < 0 && "y" !== e && ("left" === t.originX ? t.originX = "right" : "right" === t.originX && (t.originX = "left")), t.newScaleY < 0 && "x" !== e && ("top" === t.originY ? t.originY = "bottom" : "bottom" === t.originY && (t.originY = "top"))
            },
            _setLocalMouse: function(t, e) {
                var i = e.target;
                "right" === e.originX ? t.x *= -1 : "center" === e.originX && (t.x *= 2 * e.mouseXSign, t.x < 0 && (e.mouseXSign = -e.mouseXSign)), "bottom" === e.originY ? t.y *= -1 : "center" === e.originY && (t.y *= 2 * e.mouseYSign, t.y < 0 && (e.mouseYSign = -e.mouseYSign)), n(t.x) > i.padding ? t.x < 0 ? t.x += i.padding : t.x -= i.padding : t.x = 0, n(t.y) > i.padding ? t.y < 0 ? t.y += i.padding : t.y -= i.padding : t.y = 0
            },
            _rotateObject: function(t, e) {
                var n = this._currentTransform;
                if (!n.target.get("lockRotation")) {
                    var s = r(n.ey - n.top, n.ex - n.left),
                        o = r(e - n.top, t - n.left),
                        a = i(o - s + n.theta);
                    0 > a && (a = 360 + a), n.target.angle = a % 360
                }
            },
            setCursor: function(t) {
                this.upperCanvasEl.style.cursor = t
            },
            _resetObjectTransform: function(t) {
                t.scaleX = 1, t.scaleY = 1, t.setAngle(0)
            },
            _drawSelection: function() {
                var t = this.contextTop,
                    e = this._groupSelector,
                    i = e.left,
                    r = e.top,
                    o = n(i),
                    a = n(r);
                if (t.fillStyle = this.selectionColor, t.fillRect(e.ex - (i > 0 ? 0 : -i), e.ey - (r > 0 ? 0 : -r), o, a), t.lineWidth = this.selectionLineWidth, t.strokeStyle = this.selectionBorderColor, this.selectionDashArray.length > 1) {
                    var h = e.ex + s - (i > 0 ? 0 : o),
                        c = e.ey + s - (r > 0 ? 0 : a);
                    t.beginPath(), fabric.util.drawDashedLine(t, h, c, h + o, c, this.selectionDashArray), fabric.util.drawDashedLine(t, h, c + a - 1, h + o, c + a - 1, this.selectionDashArray), fabric.util.drawDashedLine(t, h, c, h, c + a, this.selectionDashArray), fabric.util.drawDashedLine(t, h + o - 1, c, h + o - 1, c + a, this.selectionDashArray), t.closePath(), t.stroke()
                } else t.strokeRect(e.ex + s - (i > 0 ? 0 : o), e.ey + s - (r > 0 ? 0 : a), o, a)
            },
            _isLastRenderedObject: function(t) {
                return this.controlsAboveOverlay && this.lastRenderedObjectWithControlsAboveOverlay && this.lastRenderedObjectWithControlsAboveOverlay.visible && this.containsPoint(t, this.lastRenderedObjectWithControlsAboveOverlay) && this.lastRenderedObjectWithControlsAboveOverlay._findTargetCorner(this.getPointer(t, !0))
            },
            findTarget: function(t, e) {
                if (!this.skipTargetFind) {
                    if (this._isLastRenderedObject(t)) return this.lastRenderedObjectWithControlsAboveOverlay;
                    var i = this.getActiveGroup();
                    if (i && !e && this.containsPoint(t, i)) return i;
                    var r = this._searchPossibleTargets(t);
                    return this._fireOverOutEvents(r), r
                }
            },
            _fireOverOutEvents: function(t) {
                t ? this._hoveredTarget !== t && (this.fire("mouse:over", {
                    target: t
                }), t.fire("mouseover"), this._hoveredTarget && (this.fire("mouse:out", {
                    target: this._hoveredTarget
                }), this._hoveredTarget.fire("mouseout")), this._hoveredTarget = t) : this._hoveredTarget && (this.fire("mouse:out", {
                    target: this._hoveredTarget
                }), this._hoveredTarget.fire("mouseout"), this._hoveredTarget = null)
            },
            _checkTarget: function(t, e, i) {
                if (e && e.visible && e.evented && this.containsPoint(t, e)) {
                    if (!this.perPixelTargetFind && !e.perPixelTargetFind || e.isEditing) return !0;
                    var r = this.isTargetTransparent(e, i.x, i.y);
                    if (!r) return !0
                }
            },
            _searchPossibleTargets: function(t) {
                for (var e, i = this.getPointer(t, !0), r = this._objects.length; r--;)
                    if (!this._objects[r].group && this._checkTarget(t, this._objects[r], i)) {
                        this.relatedTarget = this._objects[r], e = this._objects[r];
                        break
                    }
                return e
            },
            getPointer: function(e, i, r) {
                r || (r = this.upperCanvasEl);
                var n, s = t(e, r),
                    o = r.getBoundingClientRect(),
                    a = o.width || 0,
                    h = o.height || 0;
                return a && h || ("top" in o && "bottom" in o && (h = Math.abs(o.top - o.bottom)), "right" in o && "left" in o && (a = Math.abs(o.right - o.left))), this.calcOffset(), s.x = s.x - this._offset.left, s.y = s.y - this._offset.top, i || (s = fabric.util.transformPoint(s, fabric.util.invertTransform(this.viewportTransform))), n = 0 === a || 0 === h ? {
                    width: 1,
                    height: 1
                } : {
                    width: r.width / a,
                    height: r.height / h
                }, {
                    x: s.x * n.width,
                    y: s.y * n.height
                }
            },
            _createUpperCanvas: function() {
                var t = this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/, "");
                this.upperCanvasEl = this._createCanvasElement(), fabric.util.addClass(this.upperCanvasEl, "upper-canvas " + t), this.wrapperEl.appendChild(this.upperCanvasEl), this._copyCanvasStyle(this.lowerCanvasEl, this.upperCanvasEl), this._applyCanvasStyle(this.upperCanvasEl), this.contextTop = this.upperCanvasEl.getContext("2d")
            },
            _createCacheCanvas: function() {
                this.cacheCanvasEl = this._createCanvasElement(), this.cacheCanvasEl.setAttribute("width", this.width), this.cacheCanvasEl.setAttribute("height", this.height), this.contextCache = this.cacheCanvasEl.getContext("2d")
            },
            _initWrapperElement: function() {
                this.wrapperEl = fabric.util.wrapElement(this.lowerCanvasEl, "div", {
                    "class": this.containerClass
                }), fabric.util.setStyle(this.wrapperEl, {
                    width: this.getWidth() + "px",
                    height: this.getHeight() + "px",
                    position: "relative"
                }), fabric.util.makeElementUnselectable(this.wrapperEl)
            },
            _applyCanvasStyle: function(t) {
                var e = this.getWidth() || t.width,
                    i = this.getHeight() || t.height;
                fabric.util.setStyle(t, {
                    position: "absolute",
                    width: e + "px",
                    height: i + "px",
                    left: 0,
                    top: 0
                }), t.width = e, t.height = i, fabric.util.makeElementUnselectable(t)
            },
            _copyCanvasStyle: function(t, e) {
                e.style.cssText = t.style.cssText
            },
            getSelectionContext: function() {
                return this.contextTop
            },
            getSelectionElement: function() {
                return this.upperCanvasEl
            },
            _setActiveObject: function(t) {
                this._activeObject && this._activeObject.set("active", !1), this._activeObject = t, t.set("active", !0)
            },
            setActiveObject: function(t, e) {
                return this._setActiveObject(t), this.renderAll(), this.fire("object:selected", {
                    target: t,
                    e: e
                }), t.fire("selected", {
                    e: e
                }), this
            },
            getActiveObject: function() {
                return this._activeObject
            },
            _discardActiveObject: function() {
                this._activeObject && this._activeObject.set("active", !1), this._activeObject = null
            },
            discardActiveObject: function(t) {
                return this._discardActiveObject(), this.renderAll(), this.fire("selection:cleared", {
                    e: t
                }), this
            },
            _setActiveGroup: function(t) {
                this._activeGroup = t, t && t.set("active", !0)
            },
            setActiveGroup: function(t, e) {
                return this._setActiveGroup(t), t && (this.fire("object:selected", {
                    target: t,
                    e: e
                }), t.fire("selected", {
                    e: e
                })), this
            },
            getActiveGroup: function() {
                return this._activeGroup
            },
            _discardActiveGroup: function() {
                var t = this.getActiveGroup();
                t && t.destroy(), this.setActiveGroup(null)
            },
            discardActiveGroup: function(t) {
                return this._discardActiveGroup(), this.fire("selection:cleared", {
                    e: t
                }), this
            },
            deactivateAll: function() {
                for (var t = this.getObjects(), e = 0, i = t.length; i > e; e++) t[e].set("active", !1);
                return this._discardActiveGroup(), this._discardActiveObject(), this
            },
            deactivateAllWithDispatch: function(t) {
                var e = this.getActiveGroup() || this.getActiveObject();
                return e && this.fire("before:selection:cleared", {
                    target: e,
                    e: t
                }), this.deactivateAll(), e && this.fire("selection:cleared", {
                    e: t
                }), this
            },
            drawControls: function(t) {
                var e = this.getActiveGroup();
                e ? this._drawGroupControls(t, e) : this._drawObjectsControls(t)
            },
            _drawGroupControls: function(t, e) {
                e._renderControls(t)
            },
            _drawObjectsControls: function(t) {
                for (var e = 0, i = this._objects.length; i > e; ++e) this._objects[e] && this._objects[e].active && (this._objects[e]._renderControls(t), this.lastRenderedObjectWithControlsAboveOverlay = this._objects[e])
            }
        });
        for (var o in fabric.StaticCanvas) "prototype" !== o && (fabric.Canvas[o] = fabric.StaticCanvas[o]);
        fabric.isTouchSupported && (fabric.Canvas.prototype._setCursorFromEvent = function() {}), fabric.Element = fabric.Canvas
    }(),
    function() {
        var t = {
                mt: 0,
                tr: 1,
                mr: 2,
                br: 3,
                mb: 4,
                bl: 5,
                ml: 6,
                tl: 7
            },
            e = fabric.util.addListener,
            i = fabric.util.removeListener;
        fabric.util.object.extend(fabric.Canvas.prototype, {
            cursorMap: ["n-resize", "ne-resize", "e-resize", "se-resize", "s-resize", "sw-resize", "w-resize", "nw-resize"],
            _initEventListeners: function() {
                this._bindEvents(), e(fabric.window, "resize", this._onResize), e(this.upperCanvasEl, "mousedown", this._onMouseDown), e(this.upperCanvasEl, "mousemove", this._onMouseMove), e(this.upperCanvasEl, "mousewheel", this._onMouseWheel), e(this.upperCanvasEl, "touchstart", this._onMouseDown), e(this.upperCanvasEl, "touchmove", this._onMouseMove), "undefined" != typeof eventjs && "add" in eventjs && (eventjs.add(this.upperCanvasEl, "gesture", this._onGesture), eventjs.add(this.upperCanvasEl, "drag", this._onDrag), eventjs.add(this.upperCanvasEl, "orientation", this._onOrientationChange), eventjs.add(this.upperCanvasEl, "shake", this._onShake), eventjs.add(this.upperCanvasEl, "longpress", this._onLongPress))
            },
            _bindEvents: function() {
                this._onMouseDown = this._onMouseDown.bind(this), this._onMouseMove = this._onMouseMove.bind(this), this._onMouseUp = this._onMouseUp.bind(this), this._onResize = this._onResize.bind(this), this._onGesture = this._onGesture.bind(this), this._onDrag = this._onDrag.bind(this), this._onShake = this._onShake.bind(this), this._onLongPress = this._onLongPress.bind(this), this._onOrientationChange = this._onOrientationChange.bind(this), this._onMouseWheel = this._onMouseWheel.bind(this)
            },
            removeListeners: function() {
                i(fabric.window, "resize", this._onResize), i(this.upperCanvasEl, "mousedown", this._onMouseDown), i(this.upperCanvasEl, "mousemove", this._onMouseMove), i(this.upperCanvasEl, "mousewheel", this._onMouseWheel), i(this.upperCanvasEl, "touchstart", this._onMouseDown), i(this.upperCanvasEl, "touchmove", this._onMouseMove), "undefined" != typeof eventjs && "remove" in eventjs && (eventjs.remove(this.upperCanvasEl, "gesture", this._onGesture), eventjs.remove(this.upperCanvasEl, "drag", this._onDrag), eventjs.remove(this.upperCanvasEl, "orientation", this._onOrientationChange), eventjs.remove(this.upperCanvasEl, "shake", this._onShake), eventjs.remove(this.upperCanvasEl, "longpress", this._onLongPress))
            },
            _onGesture: function(t, e) {
                this.__onTransformGesture && this.__onTransformGesture(t, e)
            },
            _onDrag: function(t, e) {
                this.__onDrag && this.__onDrag(t, e)
            },
            _onMouseWheel: function(t, e) {
                this.__onMouseWheel && this.__onMouseWheel(t, e)
            },
            _onOrientationChange: function(t, e) {
                this.__onOrientationChange && this.__onOrientationChange(t, e)
            },
            _onShake: function(t, e) {
                this.__onShake && this.__onShake(t, e)
            },
            _onLongPress: function(t, e) {
                this.__onLongPress && this.__onLongPress(t, e)
            },
            _onMouseDown: function(t) {
                this.__onMouseDown(t), e(fabric.document, "touchend", this._onMouseUp), e(fabric.document, "touchmove", this._onMouseMove), i(this.upperCanvasEl, "mousemove", this._onMouseMove), i(this.upperCanvasEl, "touchmove", this._onMouseMove), "touchstart" === t.type ? i(this.upperCanvasEl, "mousedown", this._onMouseDown) : (e(fabric.document, "mouseup", this._onMouseUp), e(fabric.document, "mousemove", this._onMouseMove))
            },
            _onMouseUp: function(t) {
                if (this.__onMouseUp(t), i(fabric.document, "mouseup", this._onMouseUp), i(fabric.document, "touchend", this._onMouseUp), i(fabric.document, "mousemove", this._onMouseMove), i(fabric.document, "touchmove", this._onMouseMove), e(this.upperCanvasEl, "mousemove", this._onMouseMove), e(this.upperCanvasEl, "touchmove", this._onMouseMove), "touchend" === t.type) {
                    var r = this;
                    setTimeout(function() {
                        e(r.upperCanvasEl, "mousedown", r._onMouseDown)
                    }, 400)
                }
            },
            _onMouseMove: function(t) {
                !this.allowTouchScrolling && t.preventDefault && t.preventDefault(), this.__onMouseMove(t)
            },
            _onResize: function() {
                this.calcOffset()
            },
            _shouldRender: function(t, e) {
                var i = this.getActiveGroup() || this.getActiveObject();
                return !!(t && (t.isMoving || t !== i) || !t && i || !t && !i && !this._groupSelector || e && this._previousPointer && this.selection && (e.x !== this._previousPointer.x || e.y !== this._previousPointer.y))
            },
            __onMouseUp: function(t) {
                var e;
                if (this.isDrawingMode && this._isCurrentlyDrawing) return void this._onMouseUpInDrawingMode(t);
                this._currentTransform ? (this._finalizeCurrentTransform(), e = this._currentTransform.target) : e = this.findTarget(t, !0);
                var i = this._shouldRender(e, this.getPointer(t));
                this._maybeGroupObjects(t), e && (e.isMoving = !1), i && this.renderAll(), this._handleCursorAndEvent(t, e)
            },
            _handleCursorAndEvent: function(t, e) {
                this._setCursorFromEvent(t, e);
                var i = this;
                setTimeout(function() {
                    i._setCursorFromEvent(t, e)
                }, 50), this.fire("mouse:up", {
                    target: e,
                    e: t
                }), e && e.fire("mouseup", {
                    e: t
                })
            },
            _finalizeCurrentTransform: function() {
                var t = this._currentTransform,
                    e = t.target;
                e._scaling && (e._scaling = !1), e.setCoords(), this.stateful && e.hasStateChanged() && (this.fire("object:modified", {
                    target: e
                }), e.fire("modified")), this._restoreOriginXY(e)
            },
            _restoreOriginXY: function(t) {
                if (this._previousOriginX && this._previousOriginY) {
                    var e = t.translateToOriginPoint(t.getCenterPoint(), this._previousOriginX, this._previousOriginY);
                    t.originX = this._previousOriginX, t.originY = this._previousOriginY, t.left = e.x, t.top = e.y, this._previousOriginX = null, this._previousOriginY = null
                }
            },
            _onMouseDownInDrawingMode: function(t) {
                this._isCurrentlyDrawing = !0, this.discardActiveObject(t).renderAll(), this.clipTo && fabric.util.clipContext(this, this.contextTop);
                var e = fabric.util.invertTransform(this.viewportTransform),
                    i = fabric.util.transformPoint(this.getPointer(t, !0), e);
                this.freeDrawingBrush.onMouseDown(i), this.fire("mouse:down", {
                    e: t
                });
                var r = this.findTarget(t);
                "undefined" != typeof r && r.fire("mousedown", {
                    e: t,
                    target: r
                })
            },
            _onMouseMoveInDrawingMode: function(t) {
                if (this._isCurrentlyDrawing) {
                    var e = fabric.util.invertTransform(this.viewportTransform),
                        i = fabric.util.transformPoint(this.getPointer(t, !0), e);
                    this.freeDrawingBrush.onMouseMove(i)
                }
                this.setCursor(this.freeDrawingCursor), this.fire("mouse:move", {
                    e: t
                });
                var r = this.findTarget(t);
                "undefined" != typeof r && r.fire("mousemove", {
                    e: t,
                    target: r
                })
            },
            _onMouseUpInDrawingMode: function(t) {
                this._isCurrentlyDrawing = !1, this.clipTo && this.contextTop.restore(), this.freeDrawingBrush.onMouseUp(), this.fire("mouse:up", {
                    e: t
                });
                var e = this.findTarget(t);
                "undefined" != typeof e && e.fire("mouseup", {
                    e: t,
                    target: e
                })
            },
            __onMouseDown: function(t) {
                var e = "which" in t ? 1 === t.which : 1 === t.button;
                if (e || fabric.isTouchSupported) {
                    if (this.isDrawingMode) return void this._onMouseDownInDrawingMode(t);
                    if (!this._currentTransform) {
                        var i = this.findTarget(t),
                            r = this.getPointer(t, !0);
                        this._previousPointer = r;
                        var n = this._shouldRender(i, r),
                            s = this._shouldGroup(t, i);
                        this._shouldClearSelection(t, i) ? this._clearSelection(t, i, r) : s && (this._handleGrouping(t, i), i = this.getActiveGroup()), i && i.selectable && !s && (this._beforeTransform(t, i), this._setupCurrentTransform(t, i)), n && this.renderAll(), this.fire("mouse:down", {
                            target: i,
                            e: t
                        }), i && i.fire("mousedown", {
                            e: t
                        })
                    }
                }
            },
            _beforeTransform: function(t, e) {
                this.stateful && e.saveState(), e._findTargetCorner(this.getPointer(t)) && this.onBeforeScaleRotate(e), e !== this.getActiveGroup() && e !== this.getActiveObject() && (this.deactivateAll(), this.setActiveObject(e, t))
            },
            _clearSelection: function(t, e, i) {
                this.deactivateAllWithDispatch(t), e && e.selectable ? this.setActiveObject(e, t) : this.selection && (this._groupSelector = {
                    ex: i.x,
                    ey: i.y,
                    top: 0,
                    left: 0
                })
            },
            _setOriginToCenter: function(t) {
                this._previousOriginX = this._currentTransform.target.originX, this._previousOriginY = this._currentTransform.target.originY;
                var e = t.getCenterPoint();
                t.originX = "center", t.originY = "center", t.left = e.x, t.top = e.y, this._currentTransform.left = t.left, this._currentTransform.top = t.top
            },
            _setCenterToOrigin: function(t) {
                var e = t.translateToOriginPoint(t.getCenterPoint(), this._previousOriginX, this._previousOriginY);
                t.originX = this._previousOriginX, t.originY = this._previousOriginY, t.left = e.x, t.top = e.y, this._previousOriginX = null, this._previousOriginY = null
            },
            __onMouseMove: function(t) {
                var e, i;
                if (this.isDrawingMode) return void this._onMouseMoveInDrawingMode(t);
                if (!("undefined" != typeof t.touches && t.touches.length > 1)) {
                    var r = this._groupSelector;
                    r ? (i = this.getPointer(t, !0), r.left = i.x - r.ex, r.top = i.y - r.ey, this.renderTop()) : this._currentTransform ? this._transformObject(t) : (e = this.findTarget(t), !e || e && !e.selectable ? this.setCursor(this.defaultCursor) : this._setCursorFromEvent(t, e)), this.fire("mouse:move", {
                        target: e,
                        e: t
                    }), e && e.fire("mousemove", {
                        e: t
                    })
                }
            },
            _transformObject: function(t) {
                var e = this.getPointer(t),
                    i = this._currentTransform;
                i.reset = !1, i.target.isMoving = !0, this._beforeScaleTransform(t, i), this._performTransformAction(t, i, e), this.renderAll()
            },
            _performTransformAction: function(t, e, i) {
                var r = i.x,
                    n = i.y,
                    s = e.target,
                    o = e.action;
                "rotate" === o ? (this._rotateObject(r, n), this._fire("rotating", s, t)) : "scale" === o ? (this._onScale(t, e, r, n), this._fire("scaling", s, t)) : "scaleX" === o ? (this._scaleObject(r, n, "x"), this._fire("scaling", s, t)) : "scaleY" === o ? (this._scaleObject(r, n, "y"), this._fire("scaling", s, t)) : (this._translateObject(r, n), this._fire("moving", s, t), this.setCursor(this.moveCursor))
            },
            _fire: function(t, e, i) {
                this.fire("object:" + t, {
                    target: e,
                    e: i
                }), e.fire(t, {
                    e: i
                })
            },
            _beforeScaleTransform: function(t, e) {
                if ("scale" === e.action || "scaleX" === e.action || "scaleY" === e.action) {
                    var i = this._shouldCenterTransform(t, e.target);
                    (i && ("center" !== e.originX || "center" !== e.originY) || !i && "center" === e.originX && "center" === e.originY) && (this._resetCurrentTransform(t), e.reset = !0)
                }
            },
            _onScale: function(t, e, i, r) {
                !t.shiftKey && !this.uniScaleTransform || e.target.get("lockUniScaling") ? (e.reset || "scale" !== e.currentAction || this._resetCurrentTransform(t, e.target), e.currentAction = "scaleEqually", this._scaleObject(i, r, "equally")) : (e.currentAction = "scale", this._scaleObject(i, r))
            },
            _setCursorFromEvent: function(t, e) {
                if (!e || !e.selectable) return this.setCursor(this.defaultCursor), !1;
                var i = this.getActiveGroup(),
                    r = e._findTargetCorner && (!i || !i.contains(e)) && e._findTargetCorner(this.getPointer(t, !0));
                return r ? this._setCornerCursor(r, e) : this.setCursor(e.hoverCursor || this.hoverCursor), !0
            },
            _setCornerCursor: function(e, i) {
                if (e in t) this.setCursor(this._getRotatedCornerCursor(e, i));
                else {
                    if ("mtr" !== e || !i.hasRotatingPoint) return this.setCursor(this.defaultCursor), !1;
                    this.setCursor(this.rotationCursor)
                }
            },
            _getRotatedCornerCursor: function(e, i) {
                var r = Math.round(i.getAngle() % 360 / 45);
                return 0 > r && (r += 8), r += t[e], r %= 8, this.cursorMap[r]
            }
        })
    }(),
    function() {
        var t = Math.min,
            e = Math.max;
        fabric.util.object.extend(fabric.Canvas.prototype, {
            _shouldGroup: function(t, e) {
                var i = this.getActiveObject();
                return t.shiftKey && (this.getActiveGroup() || i && i !== e) && this.selection
            },
            _handleGrouping: function(t, e) {
                e === this.getActiveGroup() && (e = this.findTarget(t, !0), !e || e.isType("group")) || (this.getActiveGroup() ? this._updateActiveGroup(e, t) : this._createActiveGroup(e, t), this._activeGroup && this._activeGroup.saveCoords())
            },
            _updateActiveGroup: function(t, e) {
                var i = this.getActiveGroup();
                if (i.contains(t)) {
                    if (i.removeWithUpdate(t), this._resetObjectTransform(i), t.set("active", !1), 1 === i.size()) return this.discardActiveGroup(e), void this.setActiveObject(i.item(0))
                } else i.addWithUpdate(t), this._resetObjectTransform(i);
                this.fire("selection:created", {
                    target: i,
                    e: e
                }), i.set("active", !0)
            },
            _createActiveGroup: function(t, e) {
                if (this._activeObject && t !== this._activeObject) {
                    var i = this._createGroup(t);
                    i.addWithUpdate(), this.setActiveGroup(i), this._activeObject = null, this.fire("selection:created", {
                        target: i,
                        e: e
                    })
                }
                t.set("active", !0)
            },
            _createGroup: function(t) {
                var e = this.getObjects(),
                    i = e.indexOf(this._activeObject) < e.indexOf(t),
                    r = i ? [this._activeObject, t] : [t, this._activeObject];
                return new fabric.Group(r, {
                    canvas: this
                })
            },
            _groupSelectedObjects: function(t) {
                var e = this._collectObjects();
                1 === e.length ? this.setActiveObject(e[0], t) : e.length > 1 && (e = new fabric.Group(e.reverse(), {
                    canvas: this
                }), e.addWithUpdate(), this.setActiveGroup(e, t), e.saveCoords(), this.fire("selection:created", {
                    target: e
                }), this.renderAll())
            },
            _collectObjects: function() {
                for (var i, r = [], n = this._groupSelector.ex, s = this._groupSelector.ey, o = n + this._groupSelector.left, a = s + this._groupSelector.top, h = new fabric.Point(t(n, o), t(s, a)), c = new fabric.Point(e(n, o), e(s, a)), l = n === o && s === a, u = this._objects.length; u-- && (i = this._objects[u], !(i && i.selectable && i.visible && (i.intersectsWithRect(h, c) || i.isContainedWithinRect(h, c) || i.containsPoint(h) || i.containsPoint(c)) && (i.set("active", !0), r.push(i), l))););
                return r
            },
            _maybeGroupObjects: function(t) {
                this.selection && this._groupSelector && this._groupSelectedObjects(t);
                var e = this.getActiveGroup();
                e && (e.setObjectsCoords().setCoords(), e.isMoving = !1, this.setCursor(this.defaultCursor)), this._groupSelector = null, this._currentTransform = null
            }
        })
    }(), fabric.util.object.extend(fabric.StaticCanvas.prototype, {
        toDataURL: function(t) {
            t || (t = {});
            var e = t.format || "png",
                i = t.quality || 1,
                r = t.multiplier || 1,
                n = {
                    left: t.left,
                    top: t.top,
                    width: t.width,
                    height: t.height
                };
            return 1 !== r ? this.__toDataURLWithMultiplier(e, i, n, r) : this.__toDataURL(e, i, n)
        },
        __toDataURL: function(t, e, i) {
            this.renderAll(!0);
            var r = this.upperCanvasEl || this.lowerCanvasEl,
                n = this.__getCroppedCanvas(r, i);
            "jpg" === t && (t = "jpeg");
            var s = fabric.StaticCanvas.supports("toDataURLWithQuality") ? (n || r).toDataURL("image/" + t, e) : (n || r).toDataURL("image/" + t);
            return this.contextTop && this.clearContext(this.contextTop), this.renderAll(), n && (n = null), s
        },
        __getCroppedCanvas: function(t, e) {
            var i, r, n = "left" in e || "top" in e || "width" in e || "height" in e;
            return n && (i = fabric.util.createCanvasElement(), r = i.getContext("2d"), i.width = e.width || this.width, i.height = e.height || this.height, r.drawImage(t, -e.left || 0, -e.top || 0)), i
        },
        __toDataURLWithMultiplier: function(t, e, i, r) {
            var n = this.getWidth(),
                s = this.getHeight(),
                o = n * r,
                a = s * r,
                h = this.getActiveObject(),
                c = this.getActiveGroup(),
                l = this.contextTop || this.contextContainer;
            r > 1 && this.setWidth(o).setHeight(a), l.scale(r, r), i.left && (i.left *= r), i.top && (i.top *= r), i.width ? i.width *= r : 1 > r && (i.width = o), i.height ? i.height *= r : 1 > r && (i.height = a), c ? this._tempRemoveBordersControlsFromGroup(c) : h && this.deactivateAll && this.deactivateAll(), this.renderAll(!0);
            var u = this.__toDataURL(t, e, i);
            return this.width = n, this.height = s, l.scale(1 / r, 1 / r), this.setWidth(n).setHeight(s), c ? this._restoreBordersControlsOnGroup(c) : h && this.setActiveObject && this.setActiveObject(h), this.contextTop && this.clearContext(this.contextTop), this.renderAll(), u
        },
        toDataURLWithMultiplier: function(t, e, i) {
            return this.toDataURL({
                format: t,
                multiplier: e,
                quality: i
            })
        },
        _tempRemoveBordersControlsFromGroup: function(t) {
            t.origHasControls = t.hasControls, t.origBorderColor = t.borderColor, t.hasControls = !0, t.borderColor = "rgba(0,0,0,0)", t.forEachObject(function(t) {
                t.origBorderColor = t.borderColor, t.borderColor = "rgba(0,0,0,0)"
            })
        },
        _restoreBordersControlsOnGroup: function(t) {
            t.hideControls = t.origHideControls, t.borderColor = t.origBorderColor, t.forEachObject(function(t) {
                t.borderColor = t.origBorderColor, delete t.origBorderColor
            })
        }
    }), fabric.util.object.extend(fabric.StaticCanvas.prototype, {
        loadFromDatalessJSON: function(t, e, i) {
            return this.loadFromJSON(t, e, i)
        },
        loadFromJSON: function(t, e, i) {
            if (t) {
                var r = "string" == typeof t ? JSON.parse(t) : t;
                this.clear();
                var n = this;
                return this._enlivenObjects(r.objects, function() {
                    n._setBgOverlay(r, e)
                }, i), this
            }
        },
        _setBgOverlay: function(t, e) {
            var i = this,
                r = {
                    backgroundColor: !1,
                    overlayColor: !1,
                    backgroundImage: !1,
                    overlayImage: !1
                };
            if (!(t.backgroundImage || t.overlayImage || t.background || t.overlay)) return void(e && e());
            var n = function() {
                r.backgroundImage && r.overlayImage && r.backgroundColor && r.overlayColor && (i.renderAll(), e && e())
            };
            this.__setBgOverlay("backgroundImage", t.backgroundImage, r, n), this.__setBgOverlay("overlayImage", t.overlayImage, r, n), this.__setBgOverlay("backgroundColor", t.background, r, n), this.__setBgOverlay("overlayColor", t.overlay, r, n), n()
        },
        __setBgOverlay: function(t, e, i, r) {
            var n = this;
            return e ? void("backgroundImage" === t || "overlayImage" === t ? fabric.Image.fromObject(e, function(e) {
                n[t] = e, i[t] = !0, r && r()
            }) : this["set" + fabric.util.string.capitalize(t, !0)](e, function() {
                i[t] = !0, r && r()
            })) : void(i[t] = !0)
        },
        _enlivenObjects: function(t, e, i) {
            var r = this;
            if (!t || 0 === t.length) return void(e && e());
            var n = this.renderOnAddRemove;
            this.renderOnAddRemove = !1, fabric.util.enlivenObjects(t, function(t) {
                t.forEach(function(t, e) {
                    r.insertAt(t, e, !0)
                }), r.renderOnAddRemove = n, e && e()
            }, null, i)
        },
        _toDataURL: function(t, e) {
            this.clone(function(i) {
                e(i.toDataURL(t))
            })
        },
        _toDataURLWithMultiplier: function(t, e, i) {
            this.clone(function(r) {
                i(r.toDataURLWithMultiplier(t, e))
            })
        },
        clone: function(t, e) {
            var i = JSON.stringify(this.toJSON(e));
            this.cloneWithoutData(function(e) {
                e.loadFromJSON(i, function() {
                    t && t(e)
                })
            })
        },
        cloneWithoutData: function(t) {
            var e = fabric.document.createElement("canvas");
            e.width = this.getWidth(), e.height = this.getHeight();
            var i = new fabric.Canvas(e);
            i.clipTo = this.clipTo, this.backgroundImage ? (i.setBackgroundImage(this.backgroundImage.src, function() {
                i.renderAll(), t && t(i)
            }), i.backgroundImageOpacity = this.backgroundImageOpacity, i.backgroundImageStretch = this.backgroundImageStretch) : t && t(i)
        }
    }),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.util.object.extend,
            r = e.util.toFixed,
            n = e.util.string.capitalize,
            s = e.util.degreesToRadians,
            o = e.StaticCanvas.supports("setLineDash");
        e.Object || (e.Object = e.util.createClass({
            type: "object",
            originX: "left",
            originY: "top",
            top: 0,
            left: 0,
            width: 0,
            height: 0,
            scaleX: 1,
            scaleY: 1,
            flipX: !1,
            flipY: !1,
            opacity: 1,
            angle: 0,
            cornerSize: 12,
            transparentCorners: !0,
            hoverCursor: null,
            padding: 0,
            borderColor: "rgba(102,153,255,0.75)",
            cornerColor: "rgba(102,153,255,0.5)",
            centeredScaling: !1,
            centeredRotation: !0,
            fill: "rgb(0,0,0)",
            fillRule: "nonzero",
            globalCompositeOperation: "source-over",
            backgroundColor: "",
            stroke: null,
            strokeWidth: 1,
            strokeDashArray: null,
            strokeLineCap: "butt",
            strokeLineJoin: "miter",
            strokeMiterLimit: 10,
            shadow: null,
            borderOpacityWhenMoving: .4,
            borderScaleFactor: 1,
            transformMatrix: null,
            minScaleLimit: .01,
            selectable: !0,
            evented: !0,
            visible: !0,
            hasControls: !0,
            hasBorders: !0,
            hasRotatingPoint: !0,
            rotatingPointOffset: 40,
            perPixelTargetFind: !1,
            includeDefaultValues: !0,
            clipTo: null,
            lockMovementX: !1,
            lockMovementY: !1,
            lockRotation: !1,
            lockScalingX: !1,
            lockScalingY: !1,
            lockUniScaling: !1,
            lockScalingFlip: !1,
            stateProperties: "top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor".split(" "),
            initialize: function(t) {
                t && this.setOptions(t)
            },
            _initGradient: function(t) {
                !t.fill || !t.fill.colorStops || t.fill instanceof e.Gradient || this.set("fill", new e.Gradient(t.fill))
            },
            _initPattern: function(t) {
                !t.fill || !t.fill.source || t.fill instanceof e.Pattern || this.set("fill", new e.Pattern(t.fill)), !t.stroke || !t.stroke.source || t.stroke instanceof e.Pattern || this.set("stroke", new e.Pattern(t.stroke))
            },
            _initClipping: function(t) {
                if (t.clipTo && "string" == typeof t.clipTo) {
                    var i = e.util.getFunctionBody(t.clipTo);
                    "undefined" != typeof i && (this.clipTo = new Function("ctx", i))
                }
            },
            setOptions: function(t) {
                for (var e in t) this.set(e, t[e]);
                this._initGradient(t), this._initPattern(t), this._initClipping(t)
            },
            transform: function(t, e) {
                var i = e ? this._getLeftTopCoords() : this.getCenterPoint();
                t.translate(i.x, i.y), t.rotate(s(this.angle)), t.scale(this.scaleX * (this.flipX ? -1 : 1), this.scaleY * (this.flipY ? -1 : 1))
            },
            toObject: function(t) {
                var i = e.Object.NUM_FRACTION_DIGITS,
                    n = {
                        type: this.type,
                        originX: this.originX,
                        originY: this.originY,
                        left: r(this.left, i),
                        top: r(this.top, i),
                        width: r(this.width, i),
                        height: r(this.height, i),
                        fill: this.fill && this.fill.toObject ? this.fill.toObject() : this.fill,
                        stroke: this.stroke && this.stroke.toObject ? this.stroke.toObject() : this.stroke,
                        strokeWidth: r(this.strokeWidth, i),
                        strokeDashArray: this.strokeDashArray,
                        strokeLineCap: this.strokeLineCap,
                        strokeLineJoin: this.strokeLineJoin,
                        strokeMiterLimit: r(this.strokeMiterLimit, i),
                        scaleX: r(this.scaleX, i),
                        scaleY: r(this.scaleY, i),
                        angle: r(this.getAngle(), i),
                        flipX: this.flipX,
                        flipY: this.flipY,
                        opacity: r(this.opacity, i),
                        shadow: this.shadow && this.shadow.toObject ? this.shadow.toObject() : this.shadow,
                        visible: this.visible,
                        clipTo: this.clipTo && String(this.clipTo),
                        backgroundColor: this.backgroundColor,
                        fillRule: this.fillRule,
                        globalCompositeOperation: this.globalCompositeOperation
                    };
                return this.includeDefaultValues || (n = this._removeDefaultValues(n)), e.util.populateWithProperties(this, n, t), n
            },
            toDatalessObject: function(t) {
                return this.toObject(t)
            },
            _removeDefaultValues: function(t) {
                var i = e.util.getKlass(t.type).prototype,
                    r = i.stateProperties;
                return r.forEach(function(e) {
                    t[e] === i[e] && delete t[e]
                }), t
            },
            toString: function() {
                return "#<fabric." + n(this.type) + ">"
            },
            get: function(t) {
                return this[t]
            },
            _setObject: function(t) {
                for (var e in t) this._set(e, t[e])
            },
            set: function(t, e) {
                return "object" == typeof t ? this._setObject(t) : "function" == typeof e && "clipTo" !== t ? this._set(t, e(this.get(t))) : this._set(t, e), this
            },
            _set: function(t, i) {
                var n = "scaleX" === t || "scaleY" === t;
                return n && (i = this._constrainScale(i)), "scaleX" === t && 0 > i ? (this.flipX = !this.flipX, i *= -1) : "scaleY" === t && 0 > i ? (this.flipY = !this.flipY, i *= -1) : "width" === t || "height" === t ? this.minScaleLimit = r(Math.min(.1, 1 / Math.max(this.width, this.height)), 2) : "shadow" !== t || !i || i instanceof e.Shadow || (i = new e.Shadow(i)), this[t] = i, this
            },
            toggle: function(t) {
                var e = this.get(t);
                return "boolean" == typeof e && this.set(t, !e), this
            },
            setSourcePath: function(t) {
                return this.sourcePath = t, this
            },
            getViewportTransform: function() {
                return this.canvas && this.canvas.viewportTransform ? this.canvas.viewportTransform : [1, 0, 0, 1, 0, 0]
            },
            render: function(t, i) {
                0 === this.width && 0 === this.height || !this.visible || (t.save(), this._setupCompositeOperation(t), i || this.transform(t), this._setStrokeStyles(t), this._setFillStyles(t), this.transformMatrix && t.transform.apply(t, this.transformMatrix), this._setOpacity(t), this._setShadow(t), this.clipTo && e.util.clipContext(this, t), this._render(t, i), this.clipTo && t.restore(), this._removeShadow(t), this._restoreCompositeOperation(t), t.restore())
            },
            _setOpacity: function(t) {
                this.group && this.group._setOpacity(t), t.globalAlpha *= this.opacity
            },
            _setStrokeStyles: function(t) {
                this.stroke && (t.lineWidth = this.strokeWidth, t.lineCap = this.strokeLineCap, t.lineJoin = this.strokeLineJoin, t.miterLimit = this.strokeMiterLimit, t.strokeStyle = this.stroke.toLive ? this.stroke.toLive(t, this) : this.stroke)
            },
            _setFillStyles: function(t) {
                this.fill && (t.fillStyle = this.fill.toLive ? this.fill.toLive(t, this) : this.fill)
            },
            _renderControls: function(t, i) {
                if (this.active && !i) {
                    var r = this.getViewportTransform();
                    t.save();
                    var n;
                    this.group && (n = e.util.transformPoint(this.group.getCenterPoint(), r), t.translate(n.x, n.y), t.rotate(s(this.group.angle))), n = e.util.transformPoint(this.getCenterPoint(), r, null != this.group), this.group && (n.x *= this.group.scaleX, n.y *= this.group.scaleY), t.translate(n.x, n.y), t.rotate(s(this.angle)), this.drawBorders(t), this.drawControls(t), t.restore()
                }
            },
            _setShadow: function(t) {
                if (this.shadow) {
                    var e = this.canvas && this.canvas.viewportTransform[0] || 1,
                        i = this.canvas && this.canvas.viewportTransform[3] || 1;
                    t.shadowColor = this.shadow.color, t.shadowBlur = this.shadow.blur * (e + i) * (this.scaleX + this.scaleY) / 4, t.shadowOffsetX = this.shadow.offsetX * e * this.scaleX, t.shadowOffsetY = this.shadow.offsetY * i * this.scaleY
                }
            },
            _removeShadow: function(t) {
                this.shadow && (t.shadowColor = "", t.shadowBlur = t.shadowOffsetX = t.shadowOffsetY = 0)
            },
            _renderFill: function(t) {
                if (this.fill) {
                    if (t.save(), this.fill.gradientTransform) {
                        var e = this.fill.gradientTransform;
                        t.transform.apply(t, e)
                    }
                    this.fill.toLive && t.translate(-this.width / 2 + this.fill.offsetX || 0, -this.height / 2 + this.fill.offsetY || 0), "evenodd" === this.fillRule ? t.fill("evenodd") : t.fill(), t.restore(), this.shadow && !this.shadow.affectStroke && this._removeShadow(t)
                }
            },
            _renderStroke: function(t) {
                if (this.stroke && 0 !== this.strokeWidth) {
                    if (t.save(), this.strokeDashArray) 1 & this.strokeDashArray.length && this.strokeDashArray.push.apply(this.strokeDashArray, this.strokeDashArray), o ? (t.setLineDash(this.strokeDashArray), this._stroke && this._stroke(t)) : this._renderDashedStroke && this._renderDashedStroke(t), t.stroke();
                    else {
                        if (this.stroke.gradientTransform) {
                            var e = this.stroke.gradientTransform;
                            t.transform.apply(t, e)
                        }
                        this._stroke ? this._stroke(t) : t.stroke()
                    }
                    this._removeShadow(t), t.restore()
                }
            },
            clone: function(t, i) {
                return this.constructor.fromObject ? this.constructor.fromObject(this.toObject(i), t) : new e.Object(this.toObject(i))
            },
            cloneAsImage: function(t) {
                var i = this.toDataURL();
                return e.util.loadImage(i, function(i) {
                    t && t(new e.Image(i))
                }), this
            },
            toDataURL: function(t) {
                t || (t = {});
                var i = e.util.createCanvasElement(),
                    r = this.getBoundingRect();
                i.width = r.width, i.height = r.height, e.util.wrapElement(i, "div");
                var n = new e.StaticCanvas(i);
                "jpg" === t.format && (t.format = "jpeg"), "jpeg" === t.format && (n.backgroundColor = "#fff");
                var s = {
                    active: this.get("active"),
                    left: this.getLeft(),
                    top: this.getTop()
                };
                this.set("active", !1), this.setPositionByOrigin(new e.Point(i.width / 2, i.height / 2), "center", "center");
                var o = this.canvas;
                n.add(this);
                var a = n.toDataURL(t);
                return this.set(s).setCoords(), this.canvas = o, n.dispose(), n = null, a
            },
            isType: function(t) {
                return this.type === t
            },
            complexity: function() {
                return 0
            },
            toJSON: function(t) {
                return this.toObject(t)
            },
            setGradient: function(t, i) {
                i || (i = {});
                var r = {
                    colorStops: []
                };
                r.type = i.type || (i.r1 || i.r2 ? "radial" : "linear"), r.coords = {
                    x1: i.x1,
                    y1: i.y1,
                    x2: i.x2,
                    y2: i.y2
                }, (i.r1 || i.r2) && (r.coords.r1 = i.r1, r.coords.r2 = i.r2);
                for (var n in i.colorStops) {
                    var s = new e.Color(i.colorStops[n]);
                    r.colorStops.push({
                        offset: n,
                        color: s.toRgb(),
                        opacity: s.getAlpha()
                    })
                }
                return this.set(t, e.Gradient.forObject(this, r))
            },
            setPatternFill: function(t) {
                return this.set("fill", new e.Pattern(t))
            },
            setShadow: function(t) {
                return this.set("shadow", t ? new e.Shadow(t) : null)
            },
            setColor: function(t) {
                return this.set("fill", t), this
            },
            setAngle: function(t) {
                var e = ("center" !== this.originX || "center" !== this.originY) && this.centeredRotation;
                return e && this._setOriginToCenter(), this.set("angle", t), e && this._resetOrigin(), this
            },
            centerH: function() {
                return this.canvas.centerObjectH(this), this
            },
            centerV: function() {
                return this.canvas.centerObjectV(this), this
            },
            center: function() {
                return this.canvas.centerObject(this), this
            },
            remove: function() {
                return this.canvas.remove(this), this
            },
            getLocalPointer: function(t, e) {
                e = e || this.canvas.getPointer(t);
                var i = this.translateToOriginPoint(this.getCenterPoint(), "left", "top");
                return {
                    x: e.x - i.x,
                    y: e.y - i.y
                }
            },
            _setupCompositeOperation: function(t) {
                this.globalCompositeOperation && (this._prevGlobalCompositeOperation = t.globalCompositeOperation, t.globalCompositeOperation = this.globalCompositeOperation)
            },
            _restoreCompositeOperation: function(t) {
                this.globalCompositeOperation && this._prevGlobalCompositeOperation && (t.globalCompositeOperation = this._prevGlobalCompositeOperation)
            }
        }), e.util.createAccessors(e.Object), e.Object.prototype.rotate = e.Object.prototype.setAngle, i(e.Object.prototype, e.Observable), e.Object.NUM_FRACTION_DIGITS = 2, e.Object.__uid = 0)
    }("undefined" != typeof exports ? exports : this),
    function() {
        var t = fabric.util.degreesToRadians;
        fabric.util.object.extend(fabric.Object.prototype, {
            translateToCenterPoint: function(e, i, r) {
                var n = e.x,
                    s = e.y,
                    o = this.stroke ? this.strokeWidth : 0;
                return "left" === i ? n = e.x + (this.getWidth() + o * this.scaleX) / 2 : "right" === i && (n = e.x - (this.getWidth() + o * this.scaleX) / 2), "top" === r ? s = e.y + (this.getHeight() + o * this.scaleY) / 2 : "bottom" === r && (s = e.y - (this.getHeight() + o * this.scaleY) / 2), fabric.util.rotatePoint(new fabric.Point(n, s), e, t(this.angle))
            },
            translateToOriginPoint: function(e, i, r) {
                var n = e.x,
                    s = e.y,
                    o = this.stroke ? this.strokeWidth : 0;
                return "left" === i ? n = e.x - (this.getWidth() + o * this.scaleX) / 2 : "right" === i && (n = e.x + (this.getWidth() + o * this.scaleX) / 2), "top" === r ? s = e.y - (this.getHeight() + o * this.scaleY) / 2 : "bottom" === r && (s = e.y + (this.getHeight() + o * this.scaleY) / 2), fabric.util.rotatePoint(new fabric.Point(n, s), e, t(this.angle))
            },
            getCenterPoint: function() {
                var t = new fabric.Point(this.left, this.top);
                return this.translateToCenterPoint(t, this.originX, this.originY)
            },
            getPointByOrigin: function(t, e) {
                var i = this.getCenterPoint();
                return this.translateToOriginPoint(i, t, e)
            },
            toLocalPoint: function(e, i, r) {
                var n, s, o = this.getCenterPoint(),
                    a = this.stroke ? this.strokeWidth : 0;
                return i && r ? (n = "left" === i ? o.x - (this.getWidth() + a * this.scaleX) / 2 : "right" === i ? o.x + (this.getWidth() + a * this.scaleX) / 2 : o.x, s = "top" === r ? o.y - (this.getHeight() + a * this.scaleY) / 2 : "bottom" === r ? o.y + (this.getHeight() + a * this.scaleY) / 2 : o.y) : (n = this.left, s = this.top), fabric.util.rotatePoint(new fabric.Point(e.x, e.y), o, -t(this.angle)).subtractEquals(new fabric.Point(n, s))
            },
            setPositionByOrigin: function(t, e, i) {
                var r = this.translateToCenterPoint(t, e, i),
                    n = this.translateToOriginPoint(r, this.originX, this.originY);
                this.set("left", n.x), this.set("top", n.y)
            },
            adjustPosition: function(e) {
                var i = t(this.angle),
                    r = this.getWidth() / 2,
                    n = Math.cos(i) * r,
                    s = Math.sin(i) * r,
                    o = this.getWidth(),
                    a = Math.cos(i) * o,
                    h = Math.sin(i) * o;
                "center" === this.originX && "left" === e || "right" === this.originX && "center" === e ? (this.left -= n, this.top -= s) : "left" === this.originX && "center" === e || "center" === this.originX && "right" === e ? (this.left += n, this.top += s) : "left" === this.originX && "right" === e ? (this.left += a, this.top += h) : "right" === this.originX && "left" === e && (this.left -= a, this.top -= h), this.setCoords(), this.originX = e
            },
            _setOriginToCenter: function() {
                this._originalOriginX = this.originX, this._originalOriginY = this.originY;
                var t = this.getCenterPoint();
                this.originX = "center", this.originY = "center", this.left = t.x, this.top = t.y
            },
            _resetOrigin: function() {
                var t = this.translateToOriginPoint(this.getCenterPoint(), this._originalOriginX, this._originalOriginY);
                this.originX = this._originalOriginX, this.originY = this._originalOriginY, this.left = t.x, this.top = t.y, this._originalOriginX = null, this._originalOriginY = null
            },
            _getLeftTopCoords: function() {
                return this.translateToOriginPoint(this.getCenterPoint(), "left", "center")
            }
        })
    }(),
    function() {
        var t = fabric.util.degreesToRadians;
        fabric.util.object.extend(fabric.Object.prototype, {
            oCoords: null,
            intersectsWithRect: function(t, e) {
                var i = this.oCoords,
                    r = new fabric.Point(i.tl.x, i.tl.y),
                    n = new fabric.Point(i.tr.x, i.tr.y),
                    s = new fabric.Point(i.bl.x, i.bl.y),
                    o = new fabric.Point(i.br.x, i.br.y),
                    a = fabric.Intersection.intersectPolygonRectangle([r, n, o, s], t, e);
                return "Intersection" === a.status
            },
            intersectsWithObject: function(t) {
                function e(t) {
                    return {
                        tl: new fabric.Point(t.tl.x, t.tl.y),
                        tr: new fabric.Point(t.tr.x, t.tr.y),
                        bl: new fabric.Point(t.bl.x, t.bl.y),
                        br: new fabric.Point(t.br.x, t.br.y)
                    }
                }
                var i = e(this.oCoords),
                    r = e(t.oCoords),
                    n = fabric.Intersection.intersectPolygonPolygon([i.tl, i.tr, i.br, i.bl], [r.tl, r.tr, r.br, r.bl]);
                return "Intersection" === n.status
            },
            isContainedWithinObject: function(t) {
                var e = t.getBoundingRect(),
                    i = new fabric.Point(e.left, e.top),
                    r = new fabric.Point(e.left + e.width, e.top + e.height);
                return this.isContainedWithinRect(i, r)
            },
            isContainedWithinRect: function(t, e) {
                var i = this.getBoundingRect();
                return i.left >= t.x && i.left + i.width <= e.x && i.top >= t.y && i.top + i.height <= e.y
            },
            containsPoint: function(t) {
                var e = this._getImageLines(this.oCoords),
                    i = this._findCrossPoints(t, e);
                return 0 !== i && i % 2 === 1
            },
            _getImageLines: function(t) {
                return {
                    topline: {
                        o: t.tl,
                        d: t.tr
                    },
                    rightline: {
                        o: t.tr,
                        d: t.br
                    },
                    bottomline: {
                        o: t.br,
                        d: t.bl
                    },
                    leftline: {
                        o: t.bl,
                        d: t.tl
                    }
                }
            },
            _findCrossPoints: function(t, e) {
                var i, r, n, s, o, a, h, c = 0;
                for (var l in e)
                    if (h = e[l], !(h.o.y < t.y && h.d.y < t.y || h.o.y >= t.y && h.d.y >= t.y || (h.o.x === h.d.x && h.o.x >= t.x ? (o = h.o.x, a = t.y) : (i = 0, r = (h.d.y - h.o.y) / (h.d.x - h.o.x), n = t.y - i * t.x, s = h.o.y - r * h.o.x, o = -(n - s) / (i - r), a = n + i * o), o >= t.x && (c += 1), 2 !== c))) break;
                return c
            },
            getBoundingRectWidth: function() {
                return this.getBoundingRect().width
            },
            getBoundingRectHeight: function() {
                return this.getBoundingRect().height
            },
            getBoundingRect: function() {
                this.oCoords || this.setCoords();
                var t = [this.oCoords.tl.x, this.oCoords.tr.x, this.oCoords.br.x, this.oCoords.bl.x],
                    e = fabric.util.array.min(t),
                    i = fabric.util.array.max(t),
                    r = Math.abs(e - i),
                    n = [this.oCoords.tl.y, this.oCoords.tr.y, this.oCoords.br.y, this.oCoords.bl.y],
                    s = fabric.util.array.min(n),
                    o = fabric.util.array.max(n),
                    a = Math.abs(s - o);
                return {
                    left: e,
                    top: s,
                    width: r,
                    height: a
                }
            },
            getWidth: function() {
                return this.width * this.scaleX
            },
            getHeight: function() {
                return this.height * this.scaleY
            },
            _constrainScale: function(t) {
                return Math.abs(t) < this.minScaleLimit ? 0 > t ? -this.minScaleLimit : this.minScaleLimit : t
            },
            scale: function(t) {
                return t = this._constrainScale(t), 0 > t && (this.flipX = !this.flipX, this.flipY = !this.flipY, t *= -1), this.scaleX = t, this.scaleY = t, this.setCoords(), this
            },
            scaleToWidth: function(t) {
                var e = this.getBoundingRectWidth() / this.getWidth();
                return this.scale(t / this.width / e)
            },
            scaleToHeight: function(t) {
                var e = this.getBoundingRectHeight() / this.getHeight();
                return this.scale(t / this.height / e)
            },
            setCoords: function() {
                var e = t(this.angle),
                    i = this.getViewportTransform(),
                    r = function(t) {
                        return fabric.util.transformPoint(t, i)
                    },
                    n = this._calculateCurrentDimensions(!1),
                    s = n.x,
                    o = n.y;
                0 > s && (s = Math.abs(s));
                var a = Math.sqrt(Math.pow(s / 2, 2) + Math.pow(o / 2, 2)),
                    h = Math.atan(isFinite(o / s) ? o / s : 0),
                    c = Math.cos(h + e) * a,
                    l = Math.sin(h + e) * a,
                    u = Math.sin(e),
                    f = Math.cos(e),
                    g = this.getCenterPoint(),
                    p = new fabric.Point(s, o),
                    d = new fabric.Point(g.x - c, g.y - l),
                    v = new fabric.Point(d.x + p.x * f, d.y + p.x * u),
                    b = r(new fabric.Point(d.x - p.y * u, d.y + p.y * f)),
                    y = r(new fabric.Point(v.x - p.y * u, v.y + p.y * f)),
                    _ = r(d),
                    m = r(v),
                    x = new fabric.Point((_.x + b.x) / 2, (_.y + b.y) / 2),
                    C = new fabric.Point((m.x + _.x) / 2, (m.y + _.y) / 2),
                    w = new fabric.Point((y.x + m.x) / 2, (y.y + m.y) / 2),
                    S = new fabric.Point((y.x + b.x) / 2, (y.y + b.y) / 2),
                    O = new fabric.Point(C.x + u * this.rotatingPointOffset, C.y - f * this.rotatingPointOffset);
                return this.oCoords = {
                    tl: _,
                    tr: m,
                    br: y,
                    bl: b,
                    ml: x,
                    mt: C,
                    mr: w,
                    mb: S,
                    mtr: O
                }, this._setCornerCoords && this._setCornerCoords(), this
            }
        })
    }(), fabric.util.object.extend(fabric.Object.prototype, {
        sendToBack: function() {
            return this.group ? fabric.StaticCanvas.prototype.sendToBack.call(this.group, this) : this.canvas.sendToBack(this), this
        },
        bringToFront: function() {
            return this.group ? fabric.StaticCanvas.prototype.bringToFront.call(this.group, this) : this.canvas.bringToFront(this), this
        },
        sendBackwards: function(t) {
            return this.group ? fabric.StaticCanvas.prototype.sendBackwards.call(this.group, this, t) : this.canvas.sendBackwards(this, t), this
        },
        bringForward: function(t) {
            return this.group ? fabric.StaticCanvas.prototype.bringForward.call(this.group, this, t) : this.canvas.bringForward(this, t), this
        },
        moveTo: function(t) {
            return this.group ? fabric.StaticCanvas.prototype.moveTo.call(this.group, this, t) : this.canvas.moveTo(this, t), this
        }
    }), fabric.util.object.extend(fabric.Object.prototype, {
        getSvgStyles: function() {
            var t = this.fill ? this.fill.toLive ? "url(#SVGID_" + this.fill.id + ")" : this.fill : "none",
                e = this.fillRule,
                i = this.stroke ? this.stroke.toLive ? "url(#SVGID_" + this.stroke.id + ")" : this.stroke : "none",
                r = this.strokeWidth ? this.strokeWidth : "0",
                n = this.strokeDashArray ? this.strokeDashArray.join(" ") : "",
                s = this.strokeLineCap ? this.strokeLineCap : "butt",
                o = this.strokeLineJoin ? this.strokeLineJoin : "miter",
                a = this.strokeMiterLimit ? this.strokeMiterLimit : "4",
                h = "undefined" != typeof this.opacity ? this.opacity : "1",
                c = this.visible ? "" : " visibility: hidden;",
                l = this.shadow ? "filter: url(#SVGID_" + this.shadow.id + ");" : "";
            return ["stroke: ", i, "; ", "stroke-width: ", r, "; ", "stroke-dasharray: ", n, "; ", "stroke-linecap: ", s, "; ", "stroke-linejoin: ", o, "; ", "stroke-miterlimit: ", a, "; ", "fill: ", t, "; ", "fill-rule: ", e, "; ", "opacity: ", h, ";", l, c].join("")
        },
        getSvgTransform: function() {
            if (this.group && "path-group" === this.group.type) return "";
            var t = fabric.util.toFixed,
                e = this.getAngle(),
                i = !this.canvas || this.canvas.svgViewportTransformation ? this.getViewportTransform() : [1, 0, 0, 1, 0, 0],
                r = fabric.util.transformPoint(this.getCenterPoint(), i),
                n = fabric.Object.NUM_FRACTION_DIGITS,
                s = "path-group" === this.type ? "" : "translate(" + t(r.x, n) + " " + t(r.y, n) + ")",
                o = 0 !== e ? " rotate(" + t(e, n) + ")" : "",
                a = 1 === this.scaleX && 1 === this.scaleY && 1 === i[0] && 1 === i[3] ? "" : " scale(" + t(this.scaleX * i[0], n) + " " + t(this.scaleY * i[3], n) + ")",
                h = "path-group" === this.type ? this.width * i[0] : 0,
                c = this.flipX ? " matrix(-1 0 0 1 " + h + " 0) " : "",
                l = "path-group" === this.type ? this.height * i[3] : 0,
                u = this.flipY ? " matrix(1 0 0 -1 0 " + l + ")" : "";
            return [s, o, a, c, u].join("")
        },
        getSvgTransformMatrix: function() {
            return this.transformMatrix ? " matrix(" + this.transformMatrix.join(" ") + ") " : ""
        },
        _createBaseSVGMarkup: function() {
            var t = [];
            return this.fill && this.fill.toLive && t.push(this.fill.toSVG(this, !1)), this.stroke && this.stroke.toLive && t.push(this.stroke.toSVG(this, !1)), this.shadow && t.push(this.shadow.toSVG(this)), t
        }
    }), fabric.util.object.extend(fabric.Object.prototype, {
        hasStateChanged: function() {
            return this.stateProperties.some(function(t) {
                return this.get(t) !== this.originalState[t]
            }, this)
        },
        saveState: function(t) {
            return this.stateProperties.forEach(function(t) {
                this.originalState[t] = this.get(t)
            }, this), t && t.stateProperties && t.stateProperties.forEach(function(t) {
                this.originalState[t] = this.get(t)
            }, this), this
        },
        setupState: function() {
            return this.originalState = {}, this.saveState(), this
        }
    }),
    function() {
        var t = fabric.util.degreesToRadians,
            e = function() {
                return "undefined" != typeof G_vmlCanvasManager
            };
        fabric.util.object.extend(fabric.Object.prototype, {
            _controlsVisibility: null,
            _findTargetCorner: function(t) {
                if (!this.hasControls || !this.active) return !1;
                var e, i, r = t.x,
                    n = t.y;
                for (var s in this.oCoords)
                    if (this.isControlVisible(s) && ("mtr" !== s || this.hasRotatingPoint) && (!this.get("lockUniScaling") || "mt" !== s && "mr" !== s && "mb" !== s && "ml" !== s) && (i = this._getImageLines(this.oCoords[s].corner), e = this._findCrossPoints({
                            x: r,
                            y: n
                        }, i), 0 !== e && e % 2 === 1)) return this.__corner = s, s;
                return !1
            },
            _setCornerCoords: function() {
                var e, i, r = this.oCoords,
                    n = t(45 - this.angle),
                    s = Math.sqrt(2 * Math.pow(this.cornerSize, 2)) / 2,
                    o = s * Math.cos(n),
                    a = s * Math.sin(n);
                for (var h in r) e = r[h].x, i = r[h].y, r[h].corner = {
                    tl: {
                        x: e - a,
                        y: i - o
                    },
                    tr: {
                        x: e + o,
                        y: i - a
                    },
                    bl: {
                        x: e - o,
                        y: i + a
                    },
                    br: {
                        x: e + a,
                        y: i + o
                    }
                }
            },
            _calculateCurrentDimensions: function(t) {
                var e = this.getViewportTransform(),
                    i = this.strokeWidth,
                    r = this.width,
                    n = this.height,
                    s = "round" === this.strokeLineCap || "square" === this.strokeLineCap,
                    o = "line" === this.type && 0 === this.width,
                    a = "line" === this.type && 0 === this.height,
                    h = o || a,
                    c = s && a || !h,
                    l = s && o || !h;
                return o ? r = i : a && (n = i), c && (r += 0 > r ? -i : i), l && (n += 0 > n ? -i : i), r = r * this.scaleX + 2 * this.padding, n = n * this.scaleY + 2 * this.padding, t ? fabric.util.transformPoint(new fabric.Point(r, n), e, !0) : {
                    x: r,
                    y: n
                }
            },
            drawBorders: function(t) {
                if (!this.hasBorders) return this;
                t.save(), t.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1, t.strokeStyle = this.borderColor, t.lineWidth = 1 / this.borderScaleFactor;
                var e = this._calculateCurrentDimensions(!0),
                    i = e.x,
                    r = e.y;
                if (this.group && (i *= this.group.scaleX, r *= this.group.scaleY), t.strokeRect(~~-(i / 2) - .5, ~~-(r / 2) - .5, ~~i + 1, ~~r + 1), this.hasRotatingPoint && this.isControlVisible("mtr") && !this.get("lockRotation") && this.hasControls) {
                    var n = -r / 2;
                    t.beginPath(), t.moveTo(0, n), t.lineTo(0, n - this.rotatingPointOffset), t.closePath(), t.stroke()
                }
                return t.restore(), this
            },
            drawControls: function(t) {
                if (!this.hasControls) return this;
                var e = this._calculateCurrentDimensions(!0),
                    i = e.x,
                    r = e.y,
                    n = -(i / 2),
                    s = -(r / 2),
                    o = this.cornerSize / 2,
                    a = this.transparentCorners ? "strokeRect" : "fillRect";
                return t.save(), t.lineWidth = 1, t.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1,
                    t.strokeStyle = t.fillStyle = this.cornerColor, this._drawControl("tl", t, a, n - o, s - o), this._drawControl("tr", t, a, n + i - o, s - o), this._drawControl("bl", t, a, n - o, s + r - o), this._drawControl("br", t, a, n + i - o, s + r - o), this.get("lockUniScaling") || (this._drawControl("mt", t, a, n + i / 2 - o, s - o), this._drawControl("mb", t, a, n + i / 2 - o, s + r - o), this._drawControl("mr", t, a, n + i - o, s + r / 2 - o), this._drawControl("ml", t, a, n - o, s + r / 2 - o)), this.hasRotatingPoint && this._drawControl("mtr", t, a, n + i / 2 - o, s - this.rotatingPointOffset - o), t.restore(), this
            },
            _drawControl: function(t, i, r, n, s) {
                if (this.isControlVisible(t)) {
                    var o = this.cornerSize;
                    e() || this.transparentCorners || i.clearRect(n, s, o, o), i[r](n, s, o, o)
                }
            },
            isControlVisible: function(t) {
                return this._getControlsVisibility()[t]
            },
            setControlVisible: function(t, e) {
                return this._getControlsVisibility()[t] = e, this
            },
            setControlsVisibility: function(t) {
                t || (t = {});
                for (var e in t) this.setControlVisible(e, t[e]);
                return this
            },
            _getControlsVisibility: function() {
                return this._controlsVisibility || (this._controlsVisibility = {
                    tl: !0,
                    tr: !0,
                    br: !0,
                    bl: !0,
                    ml: !0,
                    mt: !0,
                    mr: !0,
                    mb: !0,
                    mtr: !0
                }), this._controlsVisibility
            }
        })
    }(),
    function(t) {
        "use strict";

        function e(t, e) {
            var i = t.origin,
                r = t.axis1,
                n = t.axis2,
                s = t.dimension,
                o = e.nearest,
                a = e.center,
                h = e.farthest;
            return function() {
                switch (this.get(i)) {
                    case o:
                        return Math.min(this.get(r), this.get(n));
                    case a:
                        return Math.min(this.get(r), this.get(n)) + .5 * this.get(s);
                    case h:
                        return Math.max(this.get(r), this.get(n))
                }
            }
        }
        var i = t.fabric || (t.fabric = {}),
            r = i.util.object.extend,
            n = {
                x1: 1,
                x2: 1,
                y1: 1,
                y2: 1
            },
            s = i.StaticCanvas.supports("setLineDash");
        return i.Line ? void i.warn("fabric.Line is already defined") : (i.Line = i.util.createClass(i.Object, {
            type: "line",
            x1: 0,
            y1: 0,
            x2: 0,
            y2: 0,
            initialize: function(t, e) {
                e = e || {}, t || (t = [0, 0, 0, 0]), this.callSuper("initialize", e), this.set("x1", t[0]), this.set("y1", t[1]), this.set("x2", t[2]), this.set("y2", t[3]), this._setWidthHeight(e)
            },
            _setWidthHeight: function(t) {
                t || (t = {}), this.width = Math.abs(this.x2 - this.x1), this.height = Math.abs(this.y2 - this.y1), this.left = "left" in t ? t.left : this._getLeftToOriginX(), this.top = "top" in t ? t.top : this._getTopToOriginY()
            },
            _set: function(t, e) {
                return this.callSuper("_set", t, e), "undefined" != typeof n[t] && this._setWidthHeight(), this
            },
            _getLeftToOriginX: e({
                origin: "originX",
                axis1: "x1",
                axis2: "x2",
                dimension: "width"
            }, {
                nearest: "left",
                center: "center",
                farthest: "right"
            }),
            _getTopToOriginY: e({
                origin: "originY",
                axis1: "y1",
                axis2: "y2",
                dimension: "height"
            }, {
                nearest: "top",
                center: "center",
                farthest: "bottom"
            }),
            _render: function(t, e) {
                if (t.beginPath(), e) {
                    var i = this.getCenterPoint();
                    t.translate(i.x - this.strokeWidth / 2, i.y - this.strokeWidth / 2)
                }
                if (!this.strokeDashArray || this.strokeDashArray && s) {
                    var r = this.calcLinePoints();
                    t.moveTo(r.x1, r.y1), t.lineTo(r.x2, r.y2)
                }
                t.lineWidth = this.strokeWidth;
                var n = t.strokeStyle;
                t.strokeStyle = this.stroke || t.fillStyle, this.stroke && this._renderStroke(t), t.strokeStyle = n
            },
            _renderDashedStroke: function(t) {
                var e = this.calcLinePoints();
                t.beginPath(), i.util.drawDashedLine(t, e.x1, e.y1, e.x2, e.y2, this.strokeDashArray), t.closePath()
            },
            toObject: function(t) {
                return r(this.callSuper("toObject", t), this.calcLinePoints())
            },
            calcLinePoints: function() {
                var t = this.x1 <= this.x2 ? -1 : 1,
                    e = this.y1 <= this.y2 ? -1 : 1,
                    i = t * this.width * .5,
                    r = e * this.height * .5,
                    n = t * this.width * -.5,
                    s = e * this.height * -.5;
                return {
                    x1: i,
                    x2: n,
                    y1: r,
                    y2: s
                }
            },
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup(),
                    i = {
                        x1: this.x1,
                        x2: this.x2,
                        y1: this.y1,
                        y2: this.y2
                    };
                return this.group && "path-group" === this.group.type || (i = this.calcLinePoints()), e.push("<line ", 'x1="', i.x1, '" y1="', i.y1, '" x2="', i.x2, '" y2="', i.y2, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '"/>\n'), t ? t(e.join("")) : e.join("")
            },
            complexity: function() {
                return 1
            }
        }), i.Line.ATTRIBUTE_NAMES = i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")), i.Line.fromElement = function(t, e) {
            var n = i.parseAttributes(t, i.Line.ATTRIBUTE_NAMES),
                s = [n.x1 || 0, n.y1 || 0, n.x2 || 0, n.y2 || 0];
            return new i.Line(s, r(n, e))
        }, void(i.Line.fromObject = function(t) {
            var e = [t.x1, t.y1, t.x2, t.y2];
            return new i.Line(e, t)
        }))
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";

        function e(t) {
            return "radius" in t && t.radius >= 0
        }
        var i = t.fabric || (t.fabric = {}),
            r = Math.PI,
            n = i.util.object.extend;
        return i.Circle ? void i.warn("fabric.Circle is already defined.") : (i.Circle = i.util.createClass(i.Object, {
            type: "circle",
            radius: 0,
            startAngle: 0,
            endAngle: 2 * r,
            initialize: function(t) {
                t = t || {}, this.callSuper("initialize", t), this.set("radius", t.radius || 0), this.startAngle = t.startAngle || this.startAngle, this.endAngle = t.endAngle || this.endAngle
            },
            _set: function(t, e) {
                return this.callSuper("_set", t, e), "radius" === t && this.setRadius(e), this
            },
            toObject: function(t) {
                return n(this.callSuper("toObject", t), {
                    radius: this.get("radius"),
                    startAngle: this.startAngle,
                    endAngle: this.endAngle
                })
            },
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup(),
                    i = 0,
                    n = 0,
                    s = (this.endAngle - this.startAngle) % (2 * r);
                if (0 === s) this.group && "path-group" === this.group.type && (i = this.left + this.radius, n = this.top + this.radius), e.push("<circle ", 'cx="' + i + '" cy="' + n + '" ', 'r="', this.radius, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), " ", this.getSvgTransformMatrix(), '"/>\n');
                else {
                    var o = Math.cos(this.startAngle) * this.radius,
                        a = Math.sin(this.startAngle) * this.radius,
                        h = Math.cos(this.endAngle) * this.radius,
                        c = Math.sin(this.endAngle) * this.radius,
                        l = s > r ? "1" : "0";
                    e.push('<path d="M ' + o + " " + a, " A " + this.radius + " " + this.radius, " 0 ", +l + " 1", " " + h + " " + c, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), " ", this.getSvgTransformMatrix(), '"/>\n')
                }
                return t ? t(e.join("")) : e.join("")
            },
            _render: function(t, e) {
                t.beginPath(), t.arc(e ? this.left + this.radius : 0, e ? this.top + this.radius : 0, this.radius, this.startAngle, this.endAngle, !1), this._renderFill(t), this._renderStroke(t)
            },
            getRadiusX: function() {
                return this.get("radius") * this.get("scaleX")
            },
            getRadiusY: function() {
                return this.get("radius") * this.get("scaleY")
            },
            setRadius: function(t) {
                this.radius = t, this.set("width", 2 * t).set("height", 2 * t)
            },
            complexity: function() {
                return 1
            }
        }), i.Circle.ATTRIBUTE_NAMES = i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")), i.Circle.fromElement = function(t, r) {
            r || (r = {});
            var s = i.parseAttributes(t, i.Circle.ATTRIBUTE_NAMES);
            if (!e(s)) throw new Error("value of `r` attribute is required and can not be negative");
            s.left = s.left || 0, s.top = s.top || 0;
            var o = new i.Circle(n(s, r));
            return o.left -= o.radius, o.top -= o.radius, o
        }, void(i.Circle.fromObject = function(t) {
            return new i.Circle(t)
        }))
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {});
        return e.Triangle ? void e.warn("fabric.Triangle is already defined") : (e.Triangle = e.util.createClass(e.Object, {
            type: "triangle",
            initialize: function(t) {
                t = t || {}, this.callSuper("initialize", t), this.set("width", t.width || 100).set("height", t.height || 100)
            },
            _render: function(t) {
                var e = this.width / 2,
                    i = this.height / 2;
                t.beginPath(), t.moveTo(-e, i), t.lineTo(0, -i), t.lineTo(e, i), t.closePath(), this._renderFill(t), this._renderStroke(t)
            },
            _renderDashedStroke: function(t) {
                var i = this.width / 2,
                    r = this.height / 2;
                t.beginPath(), e.util.drawDashedLine(t, -i, r, 0, -r, this.strokeDashArray), e.util.drawDashedLine(t, 0, -r, i, r, this.strokeDashArray), e.util.drawDashedLine(t, i, r, -i, r, this.strokeDashArray), t.closePath()
            },
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup(),
                    i = this.width / 2,
                    r = this.height / 2,
                    n = [-i + " " + r, "0 " + -r, i + " " + r].join(",");
                return e.push("<polygon ", 'points="', n, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), '"/>'), t ? t(e.join("")) : e.join("")
            },
            complexity: function() {
                return 1
            }
        }), void(e.Triangle.fromObject = function(t) {
            return new e.Triangle(t)
        }))
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = 2 * Math.PI,
            r = e.util.object.extend;
        return e.Ellipse ? void e.warn("fabric.Ellipse is already defined.") : (e.Ellipse = e.util.createClass(e.Object, {
            type: "ellipse",
            rx: 0,
            ry: 0,
            initialize: function(t) {
                t = t || {}, this.callSuper("initialize", t), this.set("rx", t.rx || 0), this.set("ry", t.ry || 0)
            },
            _set: function(t, e) {
                switch (this.callSuper("_set", t, e), t) {
                    case "rx":
                        this.rx = e, this.set("width", 2 * e);
                        break;
                    case "ry":
                        this.ry = e, this.set("height", 2 * e)
                }
                return this
            },
            getRx: function() {
                return this.get("rx") * this.get("scaleX")
            },
            getRy: function() {
                return this.get("ry") * this.get("scaleY")
            },
            toObject: function(t) {
                return r(this.callSuper("toObject", t), {
                    rx: this.get("rx"),
                    ry: this.get("ry")
                })
            },
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup(),
                    i = 0,
                    r = 0;
                return this.group && "path-group" === this.group.type && (i = this.left + this.rx, r = this.top + this.ry), e.push("<ellipse ", 'cx="', i, '" cy="', r, '" ', 'rx="', this.rx, '" ry="', this.ry, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '"/>\n'), t ? t(e.join("")) : e.join("")
            },
            _render: function(t, e) {
                t.beginPath(), t.save(), t.transform(1, 0, 0, this.ry / this.rx, 0, 0), t.arc(e ? this.left + this.rx : 0, e ? (this.top + this.ry) * this.rx / this.ry : 0, this.rx, 0, i, !1), t.restore(), this._renderFill(t), this._renderStroke(t)
            },
            complexity: function() {
                return 1
            }
        }), e.Ellipse.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")), e.Ellipse.fromElement = function(t, i) {
            i || (i = {});
            var n = e.parseAttributes(t, e.Ellipse.ATTRIBUTE_NAMES);
            n.left = n.left || 0, n.top = n.top || 0;
            var s = new e.Ellipse(r(n, i));
            return s.top -= s.ry, s.left -= s.rx, s
        }, void(e.Ellipse.fromObject = function(t) {
            return new e.Ellipse(t)
        }))
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.util.object.extend;
        if (e.Rect) return void console.warn("fabric.Rect is already defined");
        var r = e.Object.prototype.stateProperties.concat();
        r.push("rx", "ry", "x", "y"), e.Rect = e.util.createClass(e.Object, {
            stateProperties: r,
            type: "rect",
            rx: 0,
            ry: 0,
            strokeDashArray: null,
            initialize: function(t) {
                t = t || {}, this.callSuper("initialize", t), this._initRxRy()
            },
            _initRxRy: function() {
                this.rx && !this.ry ? this.ry = this.rx : this.ry && !this.rx && (this.rx = this.ry)
            },
            _render: function(t, e) {
                if (1 === this.width && 1 === this.height) return void t.fillRect(0, 0, 1, 1);
                var i = this.rx ? Math.min(this.rx, this.width / 2) : 0,
                    r = this.ry ? Math.min(this.ry, this.height / 2) : 0,
                    n = this.width,
                    s = this.height,
                    o = e ? this.left : -this.width / 2,
                    a = e ? this.top : -this.height / 2,
                    h = 0 !== i || 0 !== r,
                    c = .4477152502;
                t.beginPath(), t.moveTo(o + i, a), t.lineTo(o + n - i, a), h && t.bezierCurveTo(o + n - c * i, a, o + n, a + c * r, o + n, a + r), t.lineTo(o + n, a + s - r), h && t.bezierCurveTo(o + n, a + s - c * r, o + n - c * i, a + s, o + n - i, a + s), t.lineTo(o + i, a + s), h && t.bezierCurveTo(o + c * i, a + s, o, a + s - c * r, o, a + s - r), t.lineTo(o, a + r), h && t.bezierCurveTo(o, a + c * r, o + c * i, a, o + i, a), t.closePath(), this._renderFill(t), this._renderStroke(t)
            },
            _renderDashedStroke: function(t) {
                var i = -this.width / 2,
                    r = -this.height / 2,
                    n = this.width,
                    s = this.height;
                t.beginPath(), e.util.drawDashedLine(t, i, r, i + n, r, this.strokeDashArray), e.util.drawDashedLine(t, i + n, r, i + n, r + s, this.strokeDashArray), e.util.drawDashedLine(t, i + n, r + s, i, r + s, this.strokeDashArray), e.util.drawDashedLine(t, i, r + s, i, r, this.strokeDashArray), t.closePath()
            },
            toObject: function(t) {
                var e = i(this.callSuper("toObject", t), {
                    rx: this.get("rx") || 0,
                    ry: this.get("ry") || 0
                });
                return this.includeDefaultValues || this._removeDefaultValues(e), e
            },
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup(),
                    i = this.left,
                    r = this.top;
                return this.group && "path-group" === this.group.type || (i = -this.width / 2, r = -this.height / 2), e.push("<rect ", 'x="', i, '" y="', r, '" rx="', this.get("rx"), '" ry="', this.get("ry"), '" width="', this.width, '" height="', this.height, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '"/>\n'), t ? t(e.join("")) : e.join("")
            },
            complexity: function() {
                return 1
            }
        }), e.Rect.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")), e.Rect.fromElement = function(t, r) {
            if (!t) return null;
            r = r || {};
            var n = e.parseAttributes(t, e.Rect.ATTRIBUTE_NAMES);
            n.left = n.left || 0, n.top = n.top || 0;
            var s = new e.Rect(i(r ? e.util.object.clone(r) : {}, n));
            return s.visible = s.width > 0 && s.height > 0, s
        }, e.Rect.fromObject = function(t) {
            return new e.Rect(t)
        }
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {});
        return e.Polyline ? void e.warn("fabric.Polyline is already defined") : (e.Polyline = e.util.createClass(e.Object, {
            type: "polyline",
            points: null,
            minX: 0,
            minY: 0,
            initialize: function(t, i) {
                return e.Polygon.prototype.initialize.call(this, t, i)
            },
            _calcDimensions: function() {
                return e.Polygon.prototype._calcDimensions.call(this)
            },
            _applyPointOffset: function() {
                return e.Polygon.prototype._applyPointOffset.call(this)
            },
            toObject: function(t) {
                return e.Polygon.prototype.toObject.call(this, t)
            },
            toSVG: function(t) {
                return e.Polygon.prototype.toSVG.call(this, t)
            },
            _render: function(t) {
                e.Polygon.prototype.commonRender.call(this, t) && (this._renderFill(t), this._renderStroke(t))
            },
            _renderDashedStroke: function(t) {
                var i, r;
                t.beginPath();
                for (var n = 0, s = this.points.length; s > n; n++) i = this.points[n], r = this.points[n + 1] || i, e.util.drawDashedLine(t, i.x, i.y, r.x, r.y, this.strokeDashArray)
            },
            complexity: function() {
                return this.get("points").length
            }
        }), e.Polyline.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat(), e.Polyline.fromElement = function(t, i) {
            if (!t) return null;
            i || (i = {});
            var r = e.parsePointsAttribute(t.getAttribute("points")),
                n = e.parseAttributes(t, e.Polyline.ATTRIBUTE_NAMES);
            return new e.Polyline(r, e.util.object.extend(n, i))
        }, void(e.Polyline.fromObject = function(t) {
            var i = t.points;
            return new e.Polyline(i, t, !0)
        }))
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.util.object.extend,
            r = e.util.array.min,
            n = e.util.array.max,
            s = e.util.toFixed;
        return e.Polygon ? void e.warn("fabric.Polygon is already defined") : (e.Polygon = e.util.createClass(e.Object, {
            type: "polygon",
            points: null,
            minX: 0,
            minY: 0,
            initialize: function(t, e) {
                e = e || {}, this.points = t || [], this.callSuper("initialize", e), this._calcDimensions(), "top" in e || (this.top = this.minY), "left" in e || (this.left = this.minX)
            },
            _calcDimensions: function() {
                var t = this.points,
                    e = r(t, "x"),
                    i = r(t, "y"),
                    s = n(t, "x"),
                    o = n(t, "y");
                this.width = s - e || 0, this.height = o - i || 0, this.minX = e || 0, this.minY = i || 0
            },
            _applyPointOffset: function() {
                this.points.forEach(function(t) {
                    t.x -= this.minX + this.width / 2, t.y -= this.minY + this.height / 2
                }, this)
            },
            toObject: function(t) {
                return i(this.callSuper("toObject", t), {
                    points: this.points.concat()
                })
            },
            toSVG: function(t) {
                for (var e = [], i = this._createBaseSVGMarkup(), r = 0, n = this.points.length; n > r; r++) e.push(s(this.points[r].x, 2), ",", s(this.points[r].y, 2), " ");
                return i.push("<", this.type, " ", 'points="', e.join(""), '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), " ", this.getSvgTransformMatrix(), '"/>\n'), t ? t(i.join("")) : i.join("")
            },
            _render: function(t) {
                this.commonRender(t) && (this._renderFill(t), (this.stroke || this.strokeDashArray) && (t.closePath(), this._renderStroke(t)))
            },
            commonRender: function(t) {
                var e, i = this.points.length;
                if (!i || isNaN(this.points[i - 1].y)) return !1;
                t.beginPath(), this._applyPointOffset && (this.group && "path-group" === this.group.type || this._applyPointOffset(), this._applyPointOffset = null), t.moveTo(this.points[0].x, this.points[0].y);
                for (var r = 0; i > r; r++) e = this.points[r], t.lineTo(e.x, e.y);
                return !0
            },
            _renderDashedStroke: function(t) {
                e.Polyline.prototype._renderDashedStroke.call(this, t), t.closePath()
            },
            complexity: function() {
                return this.points.length
            }
        }), e.Polygon.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat(), e.Polygon.fromElement = function(t, r) {
            if (!t) return null;
            r || (r = {});
            var n = e.parsePointsAttribute(t.getAttribute("points")),
                s = e.parseAttributes(t, e.Polygon.ATTRIBUTE_NAMES);
            return new e.Polygon(n, i(s, r))
        }, void(e.Polygon.fromObject = function(t) {
            return new e.Polygon(t.points, t, !0)
        }))
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.util.array.min,
            r = e.util.array.max,
            n = e.util.object.extend,
            s = Object.prototype.toString,
            o = e.util.drawArc,
            a = {
                m: 2,
                l: 2,
                h: 1,
                v: 1,
                c: 6,
                s: 4,
                q: 4,
                t: 2,
                a: 7
            },
            h = {
                m: "l",
                M: "L"
            };
        return e.Path ? void e.warn("fabric.Path is already defined") : (e.Path = e.util.createClass(e.Object, {
            type: "path",
            path: null,
            minX: 0,
            minY: 0,
            initialize: function(t, e) {
                if (e = e || {}, this.setOptions(e), !t) throw new Error("`path` argument is required");
                var i = "[object Array]" === s.call(t);
                this.path = i ? t : t.match && t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi), this.path && (i || (this.path = this._parsePath()), this._setPositionDimensions(), e.sourcePath && this.setSourcePath(e.sourcePath))
            },
            _setPositionDimensions: function() {
                var t = this._parseDimensions();
                this.minX = t.left, this.minY = t.top, this.width = t.width, this.height = t.height, t.left += "center" === this.originX ? this.width / 2 : "right" === this.originX ? this.width : 0, t.top += "center" === this.originY ? this.height / 2 : "bottom" === this.originY ? this.height : 0, this.top = this.top || t.top, this.left = this.left || t.left, this.pathOffset = this.pathOffset || {
                    x: this.minX + this.width / 2,
                    y: this.minY + this.height / 2
                }
            },
            _render: function(t) {
                var e, i, r, n = null,
                    s = 0,
                    a = 0,
                    h = 0,
                    c = 0,
                    l = 0,
                    u = 0,
                    f = -this.pathOffset.x,
                    g = -this.pathOffset.y;
                this.group && "path-group" === this.group.type && (f = 0, g = 0), t.beginPath();
                for (var p = 0, d = this.path.length; d > p; ++p) {
                    switch (e = this.path[p], e[0]) {
                        case "l":
                            h += e[1], c += e[2], t.lineTo(h + f, c + g);
                            break;
                        case "L":
                            h = e[1], c = e[2], t.lineTo(h + f, c + g);
                            break;
                        case "h":
                            h += e[1], t.lineTo(h + f, c + g);
                            break;
                        case "H":
                            h = e[1], t.lineTo(h + f, c + g);
                            break;
                        case "v":
                            c += e[1], t.lineTo(h + f, c + g);
                            break;
                        case "V":
                            c = e[1], t.lineTo(h + f, c + g);
                            break;
                        case "m":
                            h += e[1], c += e[2], s = h, a = c, t.moveTo(h + f, c + g);
                            break;
                        case "M":
                            h = e[1], c = e[2], s = h, a = c, t.moveTo(h + f, c + g);
                            break;
                        case "c":
                            i = h + e[5], r = c + e[6], l = h + e[3], u = c + e[4], t.bezierCurveTo(h + e[1] + f, c + e[2] + g, l + f, u + g, i + f, r + g), h = i, c = r;
                            break;
                        case "C":
                            h = e[5], c = e[6], l = e[3], u = e[4], t.bezierCurveTo(e[1] + f, e[2] + g, l + f, u + g, h + f, c + g);
                            break;
                        case "s":
                            i = h + e[3], r = c + e[4], null === n[0].match(/[CcSs]/) ? (l = h, u = c) : (l = 2 * h - l, u = 2 * c - u), t.bezierCurveTo(l + f, u + g, h + e[1] + f, c + e[2] + g, i + f, r + g), l = h + e[1], u = c + e[2], h = i, c = r;
                            break;
                        case "S":
                            i = e[3], r = e[4], null === n[0].match(/[CcSs]/) ? (l = h, u = c) : (l = 2 * h - l, u = 2 * c - u), t.bezierCurveTo(l + f, u + g, e[1] + f, e[2] + g, i + f, r + g), h = i, c = r, l = e[1], u = e[2];
                            break;
                        case "q":
                            i = h + e[3], r = c + e[4], l = h + e[1], u = c + e[2], t.quadraticCurveTo(l + f, u + g, i + f, r + g), h = i, c = r;
                            break;
                        case "Q":
                            i = e[3], r = e[4], t.quadraticCurveTo(e[1] + f, e[2] + g, i + f, r + g), h = i, c = r, l = e[1], u = e[2];
                            break;
                        case "t":
                            i = h + e[1], r = c + e[2], null === n[0].match(/[QqTt]/) ? (l = h, u = c) : (l = 2 * h - l, u = 2 * c - u), t.quadraticCurveTo(l + f, u + g, i + f, r + g), h = i, c = r;
                            break;
                        case "T":
                            i = e[1], r = e[2], null === n[0].match(/[QqTt]/) ? (l = h, u = c) : (l = 2 * h - l, u = 2 * c - u), t.quadraticCurveTo(l + f, u + g, i + f, r + g), h = i, c = r;
                            break;
                        case "a":
                            o(t, h + f, c + g, [e[1], e[2], e[3], e[4], e[5], e[6] + h + f, e[7] + c + g]), h += e[6], c += e[7];
                            break;
                        case "A":
                            o(t, h + f, c + g, [e[1], e[2], e[3], e[4], e[5], e[6] + f, e[7] + g]), h = e[6], c = e[7];
                            break;
                        case "z":
                        case "Z":
                            h = s, c = a, t.closePath()
                    }
                    n = e
                }
                this._renderFill(t), this._renderStroke(t)
            },
            toString: function() {
                return "#<fabric.Path (" + this.complexity() + '): { "top": ' + this.top + ', "left": ' + this.left + " }>"
            },
            toObject: function(t) {
                var e = n(this.callSuper("toObject", t), {
                    path: this.path.map(function(t) {
                        return t.slice()
                    }),
                    pathOffset: this.pathOffset
                });
                return this.sourcePath && (e.sourcePath = this.sourcePath), this.transformMatrix && (e.transformMatrix = this.transformMatrix), e
            },
            toDatalessObject: function(t) {
                var e = this.toObject(t);
                return this.sourcePath && (e.path = this.sourcePath), delete e.sourcePath, e
            },
            toSVG: function(t) {
                for (var e = [], i = this._createBaseSVGMarkup(), r = "", n = 0, s = this.path.length; s > n; n++) e.push(this.path[n].join(" "));
                var o = e.join(" ");
                return this.group && "path-group" === this.group.type || (r = " translate(" + -this.pathOffset.x + ", " + -this.pathOffset.y + ") "), i.push("<path ", 'd="', o, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), r, this.getSvgTransformMatrix(), '" stroke-linecap="round" ', "/>\n"), t ? t(i.join("")) : i.join("")
            },
            complexity: function() {
                return this.path.length
            },
            _parsePath: function() {
                for (var t, e, i, r, n, s = [], o = [], c = /([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi, l = 0, u = this.path.length; u > l; l++) {
                    for (t = this.path[l], r = t.slice(1).trim(), o.length = 0; i = c.exec(r);) o.push(i[0]);
                    n = [t.charAt(0)];
                    for (var f = 0, g = o.length; g > f; f++) e = parseFloat(o[f]), isNaN(e) || n.push(e);
                    var p = n[0],
                        d = a[p.toLowerCase()],
                        v = h[p] || p;
                    if (n.length - 1 > d)
                        for (var b = 1, y = n.length; y > b; b += d) s.push([p].concat(n.slice(b, b + d))), p = v;
                    else s.push(n)
                }
                return s
            },
            _parseDimensions: function() {
                for (var t, n, s, o, a = [], h = [], c = null, l = 0, u = 0, f = 0, g = 0, p = 0, d = 0, v = 0, b = this.path.length; b > v; ++v) {
                    switch (t = this.path[v], t[0]) {
                        case "l":
                            f += t[1], g += t[2], o = [];
                            break;
                        case "L":
                            f = t[1], g = t[2], o = [];
                            break;
                        case "h":
                            f += t[1], o = [];
                            break;
                        case "H":
                            f = t[1], o = [];
                            break;
                        case "v":
                            g += t[1], o = [];
                            break;
                        case "V":
                            g = t[1], o = [];
                            break;
                        case "m":
                            f += t[1], g += t[2], l = f, u = g, o = [];
                            break;
                        case "M":
                            f = t[1], g = t[2], l = f, u = g, o = [];
                            break;
                        case "c":
                            n = f + t[5], s = g + t[6], p = f + t[3], d = g + t[4], o = e.util.getBoundsOfCurve(f, g, f + t[1], g + t[2], p, d, n, s), f = n, g = s;
                            break;
                        case "C":
                            f = t[5], g = t[6], p = t[3], d = t[4], o = e.util.getBoundsOfCurve(f, g, t[1], t[2], p, d, f, g);
                            break;
                        case "s":
                            n = f + t[3], s = g + t[4], null === c[0].match(/[CcSs]/) ? (p = f, d = g) : (p = 2 * f - p, d = 2 * g - d), o = e.util.getBoundsOfCurve(f, g, p, d, f + t[1], g + t[2], n, s), p = f + t[1], d = g + t[2], f = n, g = s;
                            break;
                        case "S":
                            n = t[3], s = t[4], null === c[0].match(/[CcSs]/) ? (p = f, d = g) : (p = 2 * f - p, d = 2 * g - d), o = e.util.getBoundsOfCurve(f, g, p, d, t[1], t[2], n, s), f = n, g = s, p = t[1], d = t[2];
                            break;
                        case "q":
                            n = f + t[3], s = g + t[4], p = f + t[1], d = g + t[2], o = e.util.getBoundsOfCurve(f, g, p, d, p, d, n, s), f = n, g = s;
                            break;
                        case "Q":
                            p = t[1], d = t[2], o = e.util.getBoundsOfCurve(f, g, p, d, p, d, t[3], t[4]), f = t[3], g = t[4];
                            break;
                        case "t":
                            n = f + t[1], s = g + t[2], null === c[0].match(/[QqTt]/) ? (p = f, d = g) : (p = 2 * f - p, d = 2 * g - d), o = e.util.getBoundsOfCurve(f, g, p, d, p, d, n, s), f = n, g = s;
                            break;
                        case "T":
                            n = t[1], s = t[2], null === c[0].match(/[QqTt]/) ? (p = f, d = g) : (p = 2 * f - p, d = 2 * g - d), o = e.util.getBoundsOfCurve(f, g, p, d, p, d, n, s), f = n, g = s;
                            break;
                        case "a":
                            o = e.util.getBoundsOfArc(f, g, t[1], t[2], t[3], t[4], t[5], t[6] + f, t[7] + g), f += t[6], g += t[7];
                            break;
                        case "A":
                            o = e.util.getBoundsOfArc(f, g, t[1], t[2], t[3], t[4], t[5], t[6], t[7]), f = t[6], g = t[7];
                            break;
                        case "z":
                        case "Z":
                            f = l, g = u
                    }
                    c = t, o.forEach(function(t) {
                        a.push(t.x), h.push(t.y)
                    }), a.push(f), h.push(g)
                }
                var y = i(a),
                    _ = i(h),
                    m = r(a),
                    x = r(h),
                    C = m - y,
                    w = x - _,
                    S = {
                        left: y,
                        top: _,
                        width: C,
                        height: w
                    };
                return S
            }
        }), e.Path.fromObject = function(t, i) {
            "string" == typeof t.path ? e.loadSVGFromURL(t.path, function(r) {
                var n = r[0],
                    s = t.path;
                delete t.path, e.util.object.extend(n, t), n.setSourcePath(s), i(n)
            }) : i(new e.Path(t.path, t))
        }, e.Path.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat(["d"]), e.Path.fromElement = function(t, i, r) {
            var s = e.parseAttributes(t, e.Path.ATTRIBUTE_NAMES);
            i && i(new e.Path(s.d, n(s, r)))
        }, void(e.Path.async = !0))
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.util.object.extend,
            r = e.util.array.invoke,
            n = e.Object.prototype.toObject;
        return e.PathGroup ? void e.warn("fabric.PathGroup is already defined") : (e.PathGroup = e.util.createClass(e.Path, {
            type: "path-group",
            fill: "",
            initialize: function(t, e) {
                e = e || {}, this.paths = t || [];
                for (var i = this.paths.length; i--;) this.paths[i].group = this;
                e.toBeParsed && (this.parseDimensionsFromPaths(e), delete e.toBeParsed), this.setOptions(e), this.setCoords(), e.sourcePath && this.setSourcePath(e.sourcePath)
            },
            parseDimensionsFromPaths: function(t) {
                for (var i, r, n, s, o, a = [], h = [], c = this.transformMatrix, l = this.paths.length; l--;) {
                    n = this.paths[l], s = n.height + n.strokeWidth, o = n.width + n.strokeWidth, i = [{
                        x: n.left,
                        y: n.top
                    }, {
                        x: n.left + o,
                        y: n.top
                    }, {
                        x: n.left,
                        y: n.top + s
                    }, {
                        x: n.left + o,
                        y: n.top + s
                    }];
                    for (var u = 0; u < i.length; u++) r = i[u], c && (r = e.util.transformPoint(r, c, !1)), a.push(r.x), h.push(r.y)
                }
                t.width = Math.max.apply(null, a), t.height = Math.max.apply(null, h)
            },
            render: function(t) {
                if (this.visible) {
                    t.save(), this.transformMatrix && t.transform.apply(t, this.transformMatrix), this.transform(t), this._setShadow(t), this.clipTo && e.util.clipContext(this, t), t.translate(-this.width / 2, -this.height / 2);
                    for (var i = 0, r = this.paths.length; r > i; ++i) this.paths[i].render(t, !0);
                    this.clipTo && t.restore(), this._removeShadow(t), t.restore()
                }
            },
            _set: function(t, e) {
                if ("fill" === t && e && this.isSameColor())
                    for (var i = this.paths.length; i--;) this.paths[i]._set(t, e);
                return this.callSuper("_set", t, e)
            },
            toObject: function(t) {
                var e = i(n.call(this, t), {
                    paths: r(this.getObjects(), "toObject", t)
                });
                return this.sourcePath && (e.sourcePath = this.sourcePath), e
            },
            toDatalessObject: function(t) {
                var e = this.toObject(t);
                return this.sourcePath && (e.paths = this.sourcePath), e
            },
            toSVG: function(t) {
                for (var e = this.getObjects(), i = this.getPointByOrigin("left", "top"), r = "translate(" + i.x + " " + i.y + ")", n = ["<g ", 'style="', this.getSvgStyles(), '" ', 'transform="', this.getSvgTransformMatrix(), r, this.getSvgTransform(), '" ', ">\n"], s = 0, o = e.length; o > s; s++) n.push(e[s].toSVG(t));
                return n.push("</g>\n"), t ? t(n.join("")) : n.join("")
            },
            toString: function() {
                return "#<fabric.PathGroup (" + this.complexity() + "): { top: " + this.top + ", left: " + this.left + " }>"
            },
            isSameColor: function() {
                var t = (this.getObjects()[0].get("fill") || "").toLowerCase();
                return this.getObjects().every(function(e) {
                    return (e.get("fill") || "").toLowerCase() === t
                })
            },
            complexity: function() {
                return this.paths.reduce(function(t, e) {
                    return t + (e && e.complexity ? e.complexity() : 0)
                }, 0)
            },
            getObjects: function() {
                return this.paths
            }
        }), e.PathGroup.fromObject = function(t, i) {
            "string" == typeof t.paths ? e.loadSVGFromURL(t.paths, function(r) {
                var n = t.paths;
                delete t.paths;
                var s = e.util.groupSVGElements(r, t, n);
                i(s)
            }) : e.util.enlivenObjects(t.paths, function(r) {
                delete t.paths, i(new e.PathGroup(r, t))
            })
        }, void(e.PathGroup.async = !0))
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.util.object.extend,
            r = e.util.array.min,
            n = e.util.array.max,
            s = e.util.array.invoke;
        if (!e.Group) {
            var o = {
                lockMovementX: !0,
                lockMovementY: !0,
                lockRotation: !0,
                lockScalingX: !0,
                lockScalingY: !0,
                lockUniScaling: !0
            };
            e.Group = e.util.createClass(e.Object, e.Collection, {
                type: "group",
                initialize: function(t, e) {
                    e = e || {}, this._objects = t || [];
                    for (var i = this._objects.length; i--;) this._objects[i].group = this;
                    this.originalState = {}, this.callSuper("initialize"), e.originX && (this.originX = e.originX), e.originY && (this.originY = e.originY), this._calcBounds(), this._updateObjectsCoords(), this.callSuper("initialize", e), this.setCoords(), this.saveCoords()
                },
                _updateObjectsCoords: function() {
                    this.forEachObject(this._updateObjectCoords, this)
                },
                _updateObjectCoords: function(t) {
                    var e = t.getLeft(),
                        i = t.getTop(),
                        r = this.getCenterPoint();
                    t.set({
                        originalLeft: e,
                        originalTop: i,
                        left: e - r.x,
                        top: i - r.y
                    }), t.setCoords(), t.__origHasControls = t.hasControls, t.hasControls = !1
                },
                toString: function() {
                    return "#<fabric.Group: (" + this.complexity() + ")>"
                },
                addWithUpdate: function(t) {
                    return this._restoreObjectsState(), t && (this._objects.push(t), t.group = this), this.forEachObject(this._setObjectActive, this), this._calcBounds(), this._updateObjectsCoords(), this
                },
                _setObjectActive: function(t) {
                    t.set("active", !0), t.group = this
                },
                removeWithUpdate: function(t) {
                    return this._moveFlippedObject(t), this._restoreObjectsState(), this.forEachObject(this._setObjectActive, this), this.remove(t), this._calcBounds(), this._updateObjectsCoords(), this
                },
                _onObjectAdded: function(t) {
                    t.group = this
                },
                _onObjectRemoved: function(t) {
                    delete t.group, t.set("active", !1)
                },
                delegatedProperties: {
                    fill: !0,
                    opacity: !0,
                    fontFamily: !0,
                    fontWeight: !0,
                    fontSize: !0,
                    fontStyle: !0,
                    lineHeight: !0,
                    textDecoration: !0,
                    textAlign: !0,
                    backgroundColor: !0
                },
                _set: function(t, e) {
                    if (t in this.delegatedProperties)
                        for (var i = this._objects.length; i--;) this._objects[i].set(t, e);
                    this.callSuper("_set", t, e)
                },
                toObject: function(t) {
                    return i(this.callSuper("toObject", t), {
                        objects: s(this._objects, "toObject", t)
                    })
                },
                render: function(t) {
                    if (this.visible) {
                        t.save(), this.clipTo && e.util.clipContext(this, t), this.transform(t);
                        for (var i = 0, r = this._objects.length; r > i; i++) this._renderObject(this._objects[i], t);
                        this.clipTo && t.restore(), t.restore()
                    }
                },
                _renderControls: function(t, e) {
                    this.callSuper("_renderControls", t, e);
                    for (var i = 0, r = this._objects.length; r > i; i++) this._objects[i]._renderControls(t)
                },
                _renderObject: function(t, e) {
                    var i = t.hasRotatingPoint;
                    t.visible && (t.hasRotatingPoint = !1, t.render(e), t.hasRotatingPoint = i)
                },
                _restoreObjectsState: function() {
                    return this._objects.forEach(this._restoreObjectState, this), this
                },
                realizeTransform: function(t) {
                    return this._moveFlippedObject(t), this._setObjectPosition(t), t
                },
                _moveFlippedObject: function(t) {
                    var e = t.get("originX"),
                        i = t.get("originY"),
                        r = t.getCenterPoint();
                    t.set({
                        originX: "center",
                        originY: "center",
                        left: r.x,
                        top: r.y
                    }), this._toggleFlipping(t);
                    var n = t.getPointByOrigin(e, i);
                    return t.set({
                        originX: e,
                        originY: i,
                        left: n.x,
                        top: n.y
                    }), this
                },
                _toggleFlipping: function(t) {
                    this.flipX && (t.toggle("flipX"), t.set("left", -t.get("left")), t.setAngle(-t.getAngle())), this.flipY && (t.toggle("flipY"), t.set("top", -t.get("top")), t.setAngle(-t.getAngle()))
                },
                _restoreObjectState: function(t) {
                    return this._setObjectPosition(t), t.setCoords(), t.hasControls = t.__origHasControls, delete t.__origHasControls, t.set("active", !1), t.setCoords(), delete t.group, this
                },
                _setObjectPosition: function(t) {
                    var e = this.getCenterPoint(),
                        i = this._getRotatedLeftTop(t);
                    t.set({
                        angle: t.getAngle() + this.getAngle(),
                        left: e.x + i.left,
                        top: e.y + i.top,
                        scaleX: t.get("scaleX") * this.get("scaleX"),
                        scaleY: t.get("scaleY") * this.get("scaleY")
                    })
                },
                _getRotatedLeftTop: function(t) {
                    var e = this.getAngle() * (Math.PI / 180);
                    return {
                        left: -Math.sin(e) * t.getTop() * this.get("scaleY") + Math.cos(e) * t.getLeft() * this.get("scaleX"),
                        top: Math.cos(e) * t.getTop() * this.get("scaleY") + Math.sin(e) * t.getLeft() * this.get("scaleX")
                    }
                },
                destroy: function() {
                    return this._objects.forEach(this._moveFlippedObject, this), this._restoreObjectsState()
                },
                saveCoords: function() {
                    return this._originalLeft = this.get("left"), this._originalTop = this.get("top"), this
                },
                hasMoved: function() {
                    return this._originalLeft !== this.get("left") || this._originalTop !== this.get("top")
                },
                setObjectsCoords: function() {
                    return this.forEachObject(function(t) {
                        t.setCoords()
                    }), this
                },
                _calcBounds: function(t) {
                    for (var e, i, r = [], n = [], s = ["tr", "br", "bl", "tl"], o = 0, a = this._objects.length; a > o; ++o) {
                        e = this._objects[o], e.setCoords();
                        for (var h = 0; h < s.length; h++) i = s[h], r.push(e.oCoords[i].x), n.push(e.oCoords[i].y)
                    }
                    this.set(this._getBounds(r, n, t))
                },
                _getBounds: function(t, i, s) {
                    var o = e.util.invertTransform(this.getViewportTransform()),
                        a = e.util.transformPoint(new e.Point(r(t), r(i)), o),
                        h = e.util.transformPoint(new e.Point(n(t), n(i)), o),
                        c = {
                            width: h.x - a.x || 0,
                            height: h.y - a.y || 0
                        };
                    return s || (c.left = a.x || 0, c.top = a.y || 0, "center" === this.originX && (c.left += c.width / 2), "right" === this.originX && (c.left += c.width), "center" === this.originY && (c.top += c.height / 2), "bottom" === this.originY && (c.top += c.height)), c
                },
                toSVG: function(t) {
                    for (var e = ["<g ", 'transform="', this.getSvgTransform(), '">\n'], i = 0, r = this._objects.length; r > i; i++) e.push(this._objects[i].toSVG(t));
                    return e.push("</g>\n"), t ? t(e.join("")) : e.join("")
                },
                get: function(t) {
                    if (t in o) {
                        if (this[t]) return this[t];
                        for (var e = 0, i = this._objects.length; i > e; e++)
                            if (this._objects[e][t]) return !0;
                        return !1
                    }
                    return t in this.delegatedProperties ? this._objects[0] && this._objects[0].get(t) : this[t]
                }
            }), e.Group.fromObject = function(t, i) {
                e.util.enlivenObjects(t.objects, function(r) {
                    delete t.objects, i && i(new e.Group(r, t))
                })
            }, e.Group.async = !0
        }
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = fabric.util.object.extend;
        return t.fabric || (t.fabric = {}), t.fabric.Image ? void fabric.warn("fabric.Image is already defined.") : (fabric.Image = fabric.util.createClass(fabric.Object, {
            type: "image",
            crossOrigin: "",
            alignX: "none",
            alignY: "none",
            meetOrSlice: "meet",
            _lastScaleX: 1,
            _lastScaleY: 1,
            initialize: function(t, e) {
                e || (e = {}), this.filters = [], this.resizeFilters = [], this.callSuper("initialize", e), this._initElement(t, e), this._initConfig(e), e.filters && (this.filters = e.filters, this.applyFilters())
            },
            getElement: function() {
                return this._element
            },
            setElement: function(t, e, i) {
                return this._element = t, this._originalElement = t, this._initConfig(i), 0 !== this.filters.length ? this.applyFilters(e) : e && e(), this
            },
            setCrossOrigin: function(t) {
                return this.crossOrigin = t, this._element.crossOrigin = t, this
            },
            getOriginalSize: function() {
                var t = this.getElement();
                return {
                    width: t.width,
                    height: t.height
                }
            },
            _stroke: function(t) {
                t.save(), this._setStrokeStyles(t), t.beginPath(), t.strokeRect(-this.width / 2, -this.height / 2, this.width, this.height), t.closePath(), t.restore()
            },
            _renderDashedStroke: function(t) {
                var e = -this.width / 2,
                    i = -this.height / 2,
                    r = this.width,
                    n = this.height;
                t.save(), this._setStrokeStyles(t), t.beginPath(), fabric.util.drawDashedLine(t, e, i, e + r, i, this.strokeDashArray), fabric.util.drawDashedLine(t, e + r, i, e + r, i + n, this.strokeDashArray), fabric.util.drawDashedLine(t, e + r, i + n, e, i + n, this.strokeDashArray), fabric.util.drawDashedLine(t, e, i + n, e, i, this.strokeDashArray), t.closePath(), t.restore()
            },
            toObject: function(t) {
                return e(this.callSuper("toObject", t), {
                    src: this._originalElement.src || this._originalElement._src,
                    filters: this.filters.map(function(t) {
                        return t && t.toObject()
                    }),
                    crossOrigin: this.crossOrigin,
                    alignX: this.alignX,
                    alignY: this.alignY,
                    meetOrSlice: this.meetOrSlice
                })
            },
            toSVG: function(t) {
                var e = [],
                    i = -this.width / 2,
                    r = -this.height / 2,
                    n = "none";
                if (this.group && "path-group" === this.group.type && (i = this.left, r = this.top), "none" !== this.alignX && "none" !== this.alignY && (n = "x" + this.alignX + "Y" + this.alignY + " " + this.meetOrSlice), e.push('<g transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '">\n', '<image xlink:href="', this.getSvgSrc(), '" x="', i, '" y="', r, '" style="', this.getSvgStyles(), '" width="', this.width, '" height="', this.height, '" preserveAspectRatio="', n, '"', "></image>\n"), this.stroke || this.strokeDashArray) {
                    var s = this.fill;
                    this.fill = null, e.push("<rect ", 'x="', i, '" y="', r, '" width="', this.width, '" height="', this.height, '" style="', this.getSvgStyles(), '"/>\n'), this.fill = s
                }
                return e.push("</g>\n"), t ? t(e.join("")) : e.join("")
            },
            getSrc: function() {
                return this.getElement() ? this.getElement().src || this.getElement()._src : void 0
            },
            setSrc: function(t, e, i) {
                fabric.util.loadImage(t, function(t) {
                    return this.setElement(t, e, i)
                }, this, i && i.crossOrigin)
            },
            toString: function() {
                return '#<fabric.Image: { src: "' + this.getSrc() + '" }>'
            },
            clone: function(t, e) {
                this.constructor.fromObject(this.toObject(e), t)
            },
            applyFilters: function(t, e, i, r) {
                if (e = e || this.filters, i = i || this._originalElement) {
                    var n = i,
                        s = fabric.util.createCanvasElement(),
                        o = fabric.util.createImage(),
                        a = this;
                    return s.width = n.width, s.height = n.height, s.getContext("2d").drawImage(n, 0, 0, n.width, n.height), 0 === e.length ? (this._element = i, t && t(), s) : (e.forEach(function(t) {
                        t && t.applyTo(s, t.scaleX || a.scaleX, t.scaleY || a.scaleY), !r && t && "Resize" === t.type && (a.width *= t.scaleX, a.height *= t.scaleY)
                    }), o.width = s.width, o.height = s.height, fabric.isLikelyNode ? (o.src = s.toBuffer(void 0, fabric.Image.pngCompression), a._element = o, !r && (a._filteredEl = o), t && t()) : (o.onload = function() {
                        a._element = o, !r && (a._filteredEl = o), t && t(), o.onload = s = n = null
                    }, o.src = s.toDataURL("image/png")), s)
                }
            },
            _render: function(t, e) {
                var i, r, n, s = this._findMargins();
                i = e ? this.left : -this.width / 2, r = e ? this.top : -this.height / 2, "slice" === this.meetOrSlice && (t.beginPath(), t.rect(i, r, this.width, this.height), t.clip()), this.isMoving === !1 && this.resizeFilters.length && this._needsResize() ? (this._lastScaleX = this.scaleX, this._lastScaleY = this.scaleY, n = this.applyFilters(null, this.resizeFilters, this._filteredEl || this._originalElement, !0)) : n = this._element, n && t.drawImage(n, i + s.marginX, r + s.marginY, s.width, s.height), this._renderStroke(t)
            },
            _needsResize: function() {
                return this.scaleX !== this._lastScaleX || this.scaleY !== this._lastScaleY
            },
            _findMargins: function() {
                var t, e, i = this.width,
                    r = this.height,
                    n = 0,
                    s = 0;
                return "none" === this.alignX && "none" === this.alignY || (t = [this.width / this._element.width, this.height / this._element.height], e = "meet" === this.meetOrSlice ? Math.min.apply(null, t) : Math.max.apply(null, t), i = this._element.width * e, r = this._element.height * e, "Mid" === this.alignX && (n = (this.width - i) / 2), "Max" === this.alignX && (n = this.width - i), "Mid" === this.alignY && (s = (this.height - r) / 2), "Max" === this.alignY && (s = this.height - r)), {
                    width: i,
                    height: r,
                    marginX: n,
                    marginY: s
                }
            },
            _resetWidthHeight: function() {
                var t = this.getElement();
                this.set("width", t.width), this.set("height", t.height)
            },
            _initElement: function(t) {
                this.setElement(fabric.util.getById(t)), fabric.util.addClass(this.getElement(), fabric.Image.CSS_CANVAS)
            },
            _initConfig: function(t) {
                t || (t = {}), this.setOptions(t), this._setWidthHeight(t), this._element && this.crossOrigin && (this._element.crossOrigin = this.crossOrigin)
            },
            _initFilters: function(t, e) {
                t.filters && t.filters.length ? fabric.util.enlivenObjects(t.filters, function(t) {
                    e && e(t)
                }, "fabric.Image.filters") : e && e()
            },
            _setWidthHeight: function(t) {
                this.width = "width" in t ? t.width : this.getElement() ? this.getElement().width || 0 : 0, this.height = "height" in t ? t.height : this.getElement() ? this.getElement().height || 0 : 0
            },
            complexity: function() {
                return 1
            }
        }), fabric.Image.CSS_CANVAS = "canvas-img", fabric.Image.prototype.getSvgSrc = fabric.Image.prototype.getSrc, fabric.Image.fromObject = function(t, e) {
            fabric.util.loadImage(t.src, function(i) {
                fabric.Image.prototype._initFilters.call(t, t, function(r) {
                    t.filters = r || [];
                    var n = new fabric.Image(i, t);
                    e && e(n)
                })
            }, null, t.crossOrigin)
        }, fabric.Image.fromURL = function(t, e, i) {
            fabric.util.loadImage(t, function(t) {
                e && e(new fabric.Image(t, i))
            }, null, i && i.crossOrigin)
        }, fabric.Image.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href".split(" ")), fabric.Image.fromElement = function(t, i, r) {
            var n, s, o, a = fabric.parseAttributes(t, fabric.Image.ATTRIBUTE_NAMES),
                h = "xMidYMid",
                c = "meet";
            a.preserveAspectRatio && (o = a.preserveAspectRatio.split(" ")), o && o.length && (c = o.pop(), "meet" !== c && "slice" !== c ? (h = c, c = "meet") : o.length && (h = o.pop())), n = "none" !== h ? h.slice(1, 4) : "none", s = "none" !== h ? h.slice(5, 8) : "none", a.alignX = n, a.alignY = s, a.meetOrSlice = c, fabric.Image.fromURL(a["xlink:href"], i, e(r ? fabric.util.object.clone(r) : {}, a))
        }, fabric.Image.async = !0, void(fabric.Image.pngCompression = 1))
    }("undefined" != typeof exports ? exports : this),
    function(t) {
        "use strict";
        var e = t.fabric || (t.fabric = {}),
            i = e.util.object.extend,
            r = e.util.object.clone,
            n = e.util.toFixed,
            s = e.StaticCanvas.supports("setLineDash");
        if (e.Text) return void e.warn("fabric.Text is already defined");
        var o = e.Object.prototype.stateProperties.concat();
        o.push("fontFamily", "fontWeight", "fontSize", "text", "textDecoration", "textAlign", "fontStyle", "lineHeight", "textBackgroundColor"), e.Text = e.util.createClass(e.Object, {
            _dimensionAffectingProps: {
                fontSize: !0,
                fontWeight: !0,
                fontFamily: !0,
                fontStyle: !0,
                lineHeight: !0,
                stroke: !0,
                strokeWidth: !0,
                text: !0,
                textAlign: !0
            },
            _reNewline: /\r?\n/,
            type: "text",
            fontSize: 40,
            fontWeight: "normal",
            fontFamily: "Times New Roman",
            textDecoration: "",
            textAlign: "left",
            fontStyle: "",
            lineHeight: 1.16,
            textBackgroundColor: "",
            stateProperties: o,
            stroke: null,
            shadow: null,
            _fontSizeFraction: .25,
            _fontSizeMult: 1.13,
            initialize: function(t, e) {
                e = e || {}, this.text = t, this.__skipDimension = !0, this.setOptions(e), this.__skipDimension = !1, this._initDimensions()
            },
            _initDimensions: function(t) {
                if (!this.__skipDimension) {
                    t || (t = e.util.createCanvasElement().getContext("2d"), this._setTextStyles(t)), this._textLines = this.text.split(this._reNewline), this._clearCache();
                    var i = this.textAlign;
                    this.textAlign = "left", this.width = this._getTextWidth(t), this.textAlign = i, this.height = this._getTextHeight(t)
                }
            },
            toString: function() {
                return "#<fabric.Text (" + this.complexity() + '): { "text": "' + this.text + '", "fontFamily": "' + this.fontFamily + '" }>'
            },
            _render: function(t) {
                this.clipTo && e.util.clipContext(this, t), this._renderTextBackground(t), this._renderText(t), this._renderTextDecoration(t), this.clipTo && t.restore()
            },
            _renderText: function(t) {
                t.save(), this._translateForTextAlign(t), this._setOpacity(t), this._setShadow(t), this._setupCompositeOperation(t), this._renderTextFill(t), this._renderTextStroke(t), this._restoreCompositeOperation(t), this._removeShadow(t), t.restore()
            },
            _translateForTextAlign: function(t) {
                "left" !== this.textAlign && "justify" !== this.textAlign && t.translate("center" === this.textAlign ? this.width / 2 : this.width, 0)
            },
            _setTextStyles: function(t) {
                t.textBaseline = "alphabetic", this.skipTextAlign || (t.textAlign = this.textAlign), t.font = this._getFontDeclaration()
            },
            _getTextHeight: function() {
                return this._textLines.length * this._getHeightOfLine()
            },
            _getTextWidth: function(t) {
                for (var e = this._getLineWidth(t, 0), i = 1, r = this._textLines.length; r > i; i++) {
                    var n = this._getLineWidth(t, i);
                    n > e && (e = n)
                }
                return e
            },
            _renderChars: function(t, e, i, r, n) {
                e[t](i, r, n)
            },
            _renderTextLine: function(t, e, i, r, n, s) {
                if (n -= this.fontSize * this._fontSizeFraction, "justify" !== this.textAlign) return void this._renderChars(t, e, i, r, n, s);
                var o = this._getLineWidth(e, s),
                    a = this.width;
                if (a >= o)
                    for (var h = i.split(/\s+/), c = this._getWidthOfWords(e, i, s), l = a - c, u = h.length - 1, f = l / u, g = 0, p = 0, d = h.length; d > p; p++) this._renderChars(t, e, h[p], r + g, n, s), g += e.measureText(h[p]).width + f;
                else this._renderChars(t, e, i, r, n, s)
            },
            _getWidthOfWords: function(t, e) {
                return t.measureText(e.replace(/\s+/g, "")).width
            },
            _getLeftOffset: function() {
                return -this.width / 2
            },
            _getTopOffset: function() {
                return -this.height / 2
            },
            _renderTextFill: function(t) {
                if (this.fill || this._skipFillStrokeCheck) {
                    for (var e = 0, i = 0, r = this._textLines.length; r > i; i++) {
                        var n = this._getHeightOfLine(t, i),
                            s = n / this.lineHeight;
                        this._renderTextLine("fillText", t, this._textLines[i], this._getLeftOffset(), this._getTopOffset() + e + s, i), e += n
                    }
                    this.shadow && !this.shadow.affectStroke && this._removeShadow(t)
                }
            },
            _renderTextStroke: function(t) {
                if (this.stroke && 0 !== this.strokeWidth || this._skipFillStrokeCheck) {
                    var e = 0;
                    t.save(), this.strokeDashArray && (1 & this.strokeDashArray.length && this.strokeDashArray.push.apply(this.strokeDashArray, this.strokeDashArray), s && t.setLineDash(this.strokeDashArray)), t.beginPath();
                    for (var i = 0, r = this._textLines.length; r > i; i++) {
                        var n = this._getHeightOfLine(t, i),
                            o = n / this.lineHeight;
                        this._renderTextLine("strokeText", t, this._textLines[i], this._getLeftOffset(), this._getTopOffset() + e + o, i), e += n
                    }
                    t.closePath(), t.restore()
                }
            },
            _getHeightOfLine: function() {
                return this.fontSize * this._fontSizeMult * this.lineHeight
            },
            _renderTextBackground: function(t) {
                this._renderTextBoxBackground(t), this._renderTextLinesBackground(t)
            },
            _renderTextBoxBackground: function(t) {
                this.backgroundColor && (t.save(), t.fillStyle = this.backgroundColor, t.fillRect(this._getLeftOffset(), this._getTopOffset(), this.width, this.height), t.restore())
            },
            _renderTextLinesBackground: function(t) {
                var e = 0,
                    i = this._getHeightOfLine();
                if (this.textBackgroundColor) {
                    t.save(), t.fillStyle = this.textBackgroundColor;
                    for (var r = 0, n = this._textLines.length; n > r; r++) {
                        if ("" !== this._textLines[r]) {
                            var s = this._getLineWidth(t, r),
                                o = this._getLineLeftOffset(s);
                            t.fillRect(this._getLeftOffset() + o, this._getTopOffset() + e, s, this.fontSize * this._fontSizeMult)
                        }
                        e += i
                    }
                    t.restore()
                }
            },
            _getLineLeftOffset: function(t) {
                return "center" === this.textAlign ? (this.width - t) / 2 : "right" === this.textAlign ? this.width - t : 0
            },
            _clearCache: function() {
                this.__lineWidths = [], this.__lineHeights = [], this.__lineOffsets = []
            },
            _shouldClearCache: function() {
                var t = !1;
                for (var e in this._dimensionAffectingProps) this["__" + e] !== this[e] && (this["__" + e] = this[e], t = !0);
                return t
            },
            _getLineWidth: function(t, e) {
                return this.__lineWidths[e] ? this.__lineWidths[e] : (this.__lineWidths[e] = t.measureText(this._textLines[e]).width, this.__lineWidths[e])
            },
            _renderTextDecoration: function(t) {
                function e(e) {
                    var n, s, o, a, h = 0;
                    for (n = 0, s = r._textLines.length; s > n; n++) {
                        var c = r._getLineWidth(t, n),
                            l = r._getLineLeftOffset(c),
                            u = r._getHeightOfLine(t, n);
                        for (o = 0, a = e.length; a > o; o++) t.fillRect(r._getLeftOffset() + l, h + (r._fontSizeMult - 1 + e[o]) * r.fontSize - i, c, r.fontSize / 15);
                        h += u
                    }
                }
                if (this.textDecoration) {
                    var i = this.height / 2,
                        r = this,
                        n = [];
                    this.textDecoration.indexOf("underline") > -1 && n.push(.85), this.textDecoration.indexOf("line-through") > -1 && n.push(.43), this.textDecoration.indexOf("overline") > -1 && n.push(-.12), n.length > 0 && e(n)
                }
            },
            _getFontDeclaration: function() {
                return [e.isLikelyNode ? this.fontWeight : this.fontStyle, e.isLikelyNode ? this.fontStyle : this.fontWeight, this.fontSize + "px", e.isLikelyNode ? '"' + this.fontFamily + '"' : this.fontFamily].join(" ")
            },
            render: function(t, e) {
                this.visible && (t.save(), this._setTextStyles(t), this._shouldClearCache() && this._initDimensions(t), e || this.transform(t), this._setStrokeStyles(t), this._setFillStyles(t), this.transformMatrix && t.transform.apply(t, this.transformMatrix), this.group && "path-group" === this.group.type && t.translate(this.left, this.top), this._render(t), t.restore())
            },
            toObject: function(t) {
                var e = i(this.callSuper("toObject", t), {
                    text: this.text,
                    fontSize: this.fontSize,
                    fontWeight: this.fontWeight,
                    fontFamily: this.fontFamily,
                    fontStyle: this.fontStyle,
                    lineHeight: this.lineHeight,
                    textDecoration: this.textDecoration,
                    textAlign: this.textAlign,
                    textBackgroundColor: this.textBackgroundColor
                });
                return this.includeDefaultValues || this._removeDefaultValues(e), e
            },
            toSVG: function(t) {
                var e = this._createBaseSVGMarkup(),
                    i = this._getSVGLeftTopOffsets(this.ctx),
                    r = this._getSVGTextAndBg(i.textTop, i.textLeft);
                return this._wrapSVGTextAndBg(e, r), t ? t(e.join("")) : e.join("")
            },
            _getSVGLeftTopOffsets: function(t) {
                var e = this._getHeightOfLine(t, 0),
                    i = -this.width / 2,
                    r = 0;
                return {
                    textLeft: i + (this.group && "path-group" === this.group.type ? this.left : 0),
                    textTop: r + (this.group && "path-group" === this.group.type ? -this.top : 0),
                    lineTop: e
                }
            },
            _wrapSVGTextAndBg: function(t, e) {
                t.push('	<g transform="', this.getSvgTransform(), this.getSvgTransformMatrix(), '">\n', e.textBgRects.join(""), "		<text ", this.fontFamily ? 'font-family="' + this.fontFamily.replace(/"/g, "'") + '" ' : "", this.fontSize ? 'font-size="' + this.fontSize + '" ' : "", this.fontStyle ? 'font-style="' + this.fontStyle + '" ' : "", this.fontWeight ? 'font-weight="' + this.fontWeight + '" ' : "", this.textDecoration ? 'text-decoration="' + this.textDecoration + '" ' : "", 'style="', this.getSvgStyles(), '" >', e.textSpans.join(""), "</text>\n", "	</g>\n")
            },
            _getSVGTextAndBg: function(t, e) {
                var i = [],
                    r = [],
                    n = 0;
                this._setSVGBg(r);
                for (var s = 0, o = this._textLines.length; o > s; s++) this.textBackgroundColor && this._setSVGTextLineBg(r, s, e, t, n), this._setSVGTextLineText(s, i, n, e, t, r), n += this._getHeightOfLine(this.ctx, s);
                return {
                    textSpans: i,
                    textBgRects: r
                }
            },
            _setSVGTextLineText: function(t, i, r, s, o) {
                var a = this.fontSize * (this._fontSizeMult - this._fontSizeFraction) - o + r - this.height / 2;
                i.push('<tspan x="', n(s + this._getLineLeftOffset(this.__lineWidths[t]), 4), '" ', 'y="', n(a, 4), '" ', this._getFillAttributes(this.fill), ">", e.util.string.escapeXml(this._textLines[t]), "</tspan>")
            },
            _setSVGTextLineBg: function(t, e, i, r, s) {
                t.push("		<rect ", this._getFillAttributes(this.textBackgroundColor), ' x="', n(i + this._getLineLeftOffset(this.__lineWidths[e]), 4), '" y="', n(s - this.height / 2, 4), '" width="', n(this.__lineWidths[e], 4), '" height="', n(this._getHeightOfLine(this.ctx, e) / this.lineHeight, 4), '"></rect>\n')
            },
            _setSVGBg: function(t) {
                this.backgroundColor && t.push("		<rect ", this._getFillAttributes(this.backgroundColor), ' x="', n(-this.width / 2, 4), '" y="', n(-this.height / 2, 4), '" width="', n(this.width, 4), '" height="', n(this.height, 4), '"></rect>\n')
            },
            _getFillAttributes: function(t) {
                var i = t && "string" == typeof t ? new e.Color(t) : "";
                return i && i.getSource() && 1 !== i.getAlpha() ? 'opacity="' + i.getAlpha() + '" fill="' + i.setAlpha(1).toRgb() + '"' : 'fill="' + t + '"'
            },
            _set: function(t, e) {
                this.callSuper("_set", t, e), t in this._dimensionAffectingProps && (this._initDimensions(), this.setCoords())
            },
            complexity: function() {
                return 1
            }
        }), e.Text.ATTRIBUTE_NAMES = e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")), e.Text.DEFAULT_SVG_FONT_SIZE = 16, e.Text.fromElement = function(t, i) {
            if (!t) return null;
            var r = e.parseAttributes(t, e.Text.ATTRIBUTE_NAMES);
            i = e.util.object.extend(i ? e.util.object.clone(i) : {}, r), i.top = i.top || 0, i.left = i.left || 0, "dx" in r && (i.left += r.dx), "dy" in r && (i.top += r.dy), "fontSize" in i || (i.fontSize = e.Text.DEFAULT_SVG_FONT_SIZE), i.originX || (i.originX = "left");
            var n = t.textContent.replace(/^\s+|\s+$|\n+/g, "").replace(/\s+/g, " "),
                s = new e.Text(n, i),
                o = 0;
            return "left" === s.originX && (o = s.getWidth() / 2), "right" === s.originX && (o = -s.getWidth() / 2), s.set({
                left: s.getLeft() + o,
                top: s.getTop() - s.getHeight() / 2 + s.fontSize * (.18 + s._fontSizeFraction)
            }), s
        }, e.Text.fromObject = function(t) {
            return new e.Text(t.text, r(t))
        }, e.util.createAccessors(e.Text)
    }("undefined" != typeof exports ? exports : this);
! function(e, t) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function(e) {
        if (!e.document) throw new Error("jQuery requires a window with a document");
        return t(e)
    } : t(e)
}("undefined" != typeof window ? window : this, function(e, t) {
    function n(e) {
        var t = e.length,
            n = ie.type(e);
        return "function" === n || ie.isWindow(e) ? !1 : 1 === e.nodeType && t ? !0 : "array" === n || 0 === t || "number" == typeof t && t > 0 && t - 1 in e
    }

    function r(e, t, n) {
        if (ie.isFunction(t)) return ie.grep(e, function(e, r) {
            return !!t.call(e, r, e) !== n
        });
        if (t.nodeType) return ie.grep(e, function(e) {
            return e === t !== n
        });
        if ("string" == typeof t) {
            if (fe.test(t)) return ie.filter(t, e, n);
            t = ie.filter(t, e)
        }
        return ie.grep(e, function(e) {
            return ie.inArray(e, t) >= 0 !== n
        })
    }

    function i(e, t) {
        do e = e[t]; while (e && 1 !== e.nodeType);
        return e
    }

    function o(e) {
        var t = xe[e] = {};
        return ie.each(e.match(be) || [], function(e, n) {
            t[n] = !0
        }), t
    }

    function a() {
        he.addEventListener ? (he.removeEventListener("DOMContentLoaded", s, !1), e.removeEventListener("load", s, !1)) : (he.detachEvent("onreadystatechange", s), e.detachEvent("onload", s))
    }

    function s() {
        (he.addEventListener || "load" === event.type || "complete" === he.readyState) && (a(), ie.ready())
    }

    function l(e, t, n) {
        if (void 0 === n && 1 === e.nodeType) {
            var r = "data-" + t.replace(Ee, "-$1").toLowerCase();
            if (n = e.getAttribute(r), "string" == typeof n) {
                try {
                    n = "true" === n ? !0 : "false" === n ? !1 : "null" === n ? null : +n + "" === n ? +n : Ne.test(n) ? ie.parseJSON(n) : n
                } catch (i) {}
                ie.data(e, t, n)
            } else n = void 0
        }
        return n
    }

    function u(e) {
        var t;
        for (t in e)
            if (("data" !== t || !ie.isEmptyObject(e[t])) && "toJSON" !== t) return !1;
        return !0
    }

    function c(e, t, n, r) {
        if (ie.acceptData(e)) {
            var i, o, a = ie.expando,
                s = e.nodeType,
                l = s ? ie.cache : e,
                u = s ? e[a] : e[a] && a;
            if (u && l[u] && (r || l[u].data) || void 0 !== n || "string" != typeof t) return u || (u = s ? e[a] = J.pop() || ie.guid++ : a), l[u] || (l[u] = s ? {} : {
                toJSON: ie.noop
            }), ("object" == typeof t || "function" == typeof t) && (r ? l[u] = ie.extend(l[u], t) : l[u].data = ie.extend(l[u].data, t)), o = l[u], r || (o.data || (o.data = {}), o = o.data), void 0 !== n && (o[ie.camelCase(t)] = n), "string" == typeof t ? (i = o[t], null == i && (i = o[ie.camelCase(t)])) : i = o, i
        }
    }

    function d(e, t, n) {
        if (ie.acceptData(e)) {
            var r, i, o = e.nodeType,
                a = o ? ie.cache : e,
                s = o ? e[ie.expando] : ie.expando;
            if (a[s]) {
                if (t && (r = n ? a[s] : a[s].data)) {
                    ie.isArray(t) ? t = t.concat(ie.map(t, ie.camelCase)) : t in r ? t = [t] : (t = ie.camelCase(t), t = t in r ? [t] : t.split(" ")), i = t.length;
                    for (; i--;) delete r[t[i]];
                    if (n ? !u(r) : !ie.isEmptyObject(r)) return
                }(n || (delete a[s].data, u(a[s]))) && (o ? ie.cleanData([e], !0) : ne.deleteExpando || a != a.window ? delete a[s] : a[s] = null)
            }
        }
    }

    function f() {
        return !0
    }

    function p() {
        return !1
    }

    function h() {
        try {
            return he.activeElement
        } catch (e) {}
    }

    function m(e) {
        var t = Oe.split("|"),
            n = e.createDocumentFragment();
        if (n.createElement)
            for (; t.length;) n.createElement(t.pop());
        return n
    }

    function g(e, t) {
        var n, r, i = 0,
            o = typeof e.getElementsByTagName !== Ce ? e.getElementsByTagName(t || "*") : typeof e.querySelectorAll !== Ce ? e.querySelectorAll(t || "*") : void 0;
        if (!o)
            for (o = [], n = e.childNodes || e; null != (r = n[i]); i++) !t || ie.nodeName(r, t) ? o.push(r) : ie.merge(o, g(r, t));
        return void 0 === t || t && ie.nodeName(e, t) ? ie.merge([e], o) : o
    }

    function v(e) {
        je.test(e.type) && (e.defaultChecked = e.checked)
    }

    function y(e, t) {
        return ie.nodeName(e, "table") && ie.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
    }

    function b(e) {
        return e.type = (null !== ie.find.attr(e, "type")) + "/" + e.type, e
    }

    function x(e) {
        var t = Ve.exec(e.type);
        return t ? e.type = t[1] : e.removeAttribute("type"), e
    }

    function w(e, t) {
        for (var n, r = 0; null != (n = e[r]); r++) ie._data(n, "globalEval", !t || ie._data(t[r], "globalEval"))
    }

    function T(e, t) {
        if (1 === t.nodeType && ie.hasData(e)) {
            var n, r, i, o = ie._data(e),
                a = ie._data(t, o),
                s = o.events;
            if (s) {
                delete a.handle, a.events = {};
                for (n in s)
                    for (r = 0, i = s[n].length; i > r; r++) ie.event.add(t, n, s[n][r])
            }
            a.data && (a.data = ie.extend({}, a.data))
        }
    }

    function C(e, t) {
        var n, r, i;
        if (1 === t.nodeType) {
            if (n = t.nodeName.toLowerCase(), !ne.noCloneEvent && t[ie.expando]) {
                i = ie._data(t);
                for (r in i.events) ie.removeEvent(t, r, i.handle);
                t.removeAttribute(ie.expando)
            }
            "script" === n && t.text !== e.text ? (b(t).text = e.text, x(t)) : "object" === n ? (t.parentNode && (t.outerHTML = e.outerHTML), ne.html5Clone && e.innerHTML && !ie.trim(t.innerHTML) && (t.innerHTML = e.innerHTML)) : "input" === n && je.test(e.type) ? (t.defaultChecked = t.checked = e.checked, t.value !== e.value && (t.value = e.value)) : "option" === n ? t.defaultSelected = t.selected = e.defaultSelected : ("input" === n || "textarea" === n) && (t.defaultValue = e.defaultValue)
        }
    }

    function N(t, n) {
        var r, i = ie(n.createElement(t)).appendTo(n.body),
            o = e.getDefaultComputedStyle && (r = e.getDefaultComputedStyle(i[0])) ? r.display : ie.css(i[0], "display");
        return i.detach(), o
    }

    function E(e) {
        var t = he,
            n = Ze[e];
        return n || (n = N(e, t), "none" !== n && n || (Ke = (Ke || ie("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement), t = (Ke[0].contentWindow || Ke[0].contentDocument).document, t.write(), t.close(), n = N(e, t), Ke.detach()), Ze[e] = n), n
    }

    function k(e, t) {
        return {
            get: function() {
                var n = e();
                return null != n ? n ? void delete this.get : (this.get = t).apply(this, arguments) : void 0
            }
        }
    }

    function S(e, t) {
        if (t in e) return t;
        for (var n = t.charAt(0).toUpperCase() + t.slice(1), r = t, i = ft.length; i--;)
            if (t = ft[i] + n, t in e) return t;
        return r
    }

    function A(e, t) {
        for (var n, r, i, o = [], a = 0, s = e.length; s > a; a++) r = e[a], r.style && (o[a] = ie._data(r, "olddisplay"), n = r.style.display, t ? (o[a] || "none" !== n || (r.style.display = ""), "" === r.style.display && Ae(r) && (o[a] = ie._data(r, "olddisplay", E(r.nodeName)))) : (i = Ae(r), (n && "none" !== n || !i) && ie._data(r, "olddisplay", i ? n : ie.css(r, "display"))));
        for (a = 0; s > a; a++) r = e[a], r.style && (t && "none" !== r.style.display && "" !== r.style.display || (r.style.display = t ? o[a] || "" : "none"));
        return e
    }

    function D(e, t, n) {
        var r = lt.exec(t);
        return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || "px") : t
    }

    function j(e, t, n, r, i) {
        for (var o = n === (r ? "border" : "content") ? 4 : "width" === t ? 1 : 0, a = 0; 4 > o; o += 2) "margin" === n && (a += ie.css(e, n + Se[o], !0, i)), r ? ("content" === n && (a -= ie.css(e, "padding" + Se[o], !0, i)), "margin" !== n && (a -= ie.css(e, "border" + Se[o] + "Width", !0, i))) : (a += ie.css(e, "padding" + Se[o], !0, i), "padding" !== n && (a += ie.css(e, "border" + Se[o] + "Width", !0, i)));
        return a
    }

    function L(e, t, n) {
        var r = !0,
            i = "width" === t ? e.offsetWidth : e.offsetHeight,
            o = et(e),
            a = ne.boxSizing && "border-box" === ie.css(e, "boxSizing", !1, o);
        if (0 >= i || null == i) {
            if (i = tt(e, t, o), (0 > i || null == i) && (i = e.style[t]), rt.test(i)) return i;
            r = a && (ne.boxSizingReliable() || i === e.style[t]), i = parseFloat(i) || 0
        }
        return i + j(e, t, n || (a ? "border" : "content"), r, o) + "px"
    }

    function H(e, t, n, r, i) {
        return new H.prototype.init(e, t, n, r, i)
    }

    function _() {
        return setTimeout(function() {
            pt = void 0
        }), pt = ie.now()
    }

    function q(e, t) {
        var n, r = {
                height: e
            },
            i = 0;
        for (t = t ? 1 : 0; 4 > i; i += 2 - t) n = Se[i], r["margin" + n] = r["padding" + n] = e;
        return t && (r.opacity = r.width = e), r
    }

    function M(e, t, n) {
        for (var r, i = (bt[t] || []).concat(bt["*"]), o = 0, a = i.length; a > o; o++)
            if (r = i[o].call(n, t, e)) return r
    }

    function O(e, t, n) {
        var r, i, o, a, s, l, u, c, d = this,
            f = {},
            p = e.style,
            h = e.nodeType && Ae(e),
            m = ie._data(e, "fxshow");
        n.queue || (s = ie._queueHooks(e, "fx"), null == s.unqueued && (s.unqueued = 0, l = s.empty.fire, s.empty.fire = function() {
            s.unqueued || l()
        }), s.unqueued++, d.always(function() {
            d.always(function() {
                s.unqueued--, ie.queue(e, "fx").length || s.empty.fire()
            })
        })), 1 === e.nodeType && ("height" in t || "width" in t) && (n.overflow = [p.overflow, p.overflowX, p.overflowY], u = ie.css(e, "display"), c = "none" === u ? ie._data(e, "olddisplay") || E(e.nodeName) : u, "inline" === c && "none" === ie.css(e, "float") && (ne.inlineBlockNeedsLayout && "inline" !== E(e.nodeName) ? p.zoom = 1 : p.display = "inline-block")), n.overflow && (p.overflow = "hidden", ne.shrinkWrapBlocks() || d.always(function() {
            p.overflow = n.overflow[0], p.overflowX = n.overflow[1], p.overflowY = n.overflow[2]
        }));
        for (r in t)
            if (i = t[r], mt.exec(i)) {
                if (delete t[r], o = o || "toggle" === i, i === (h ? "hide" : "show")) {
                    if ("show" !== i || !m || void 0 === m[r]) continue;
                    h = !0
                }
                f[r] = m && m[r] || ie.style(e, r)
            } else u = void 0;
        if (ie.isEmptyObject(f)) "inline" === ("none" === u ? E(e.nodeName) : u) && (p.display = u);
        else {
            m ? "hidden" in m && (h = m.hidden) : m = ie._data(e, "fxshow", {}), o && (m.hidden = !h), h ? ie(e).show() : d.done(function() {
                ie(e).hide()
            }), d.done(function() {
                var t;
                ie._removeData(e, "fxshow");
                for (t in f) ie.style(e, t, f[t])
            });
            for (r in f) a = M(h ? m[r] : 0, r, d), r in m || (m[r] = a.start, h && (a.end = a.start, a.start = "width" === r || "height" === r ? 1 : 0))
        }
    }

    function F(e, t) {
        var n, r, i, o, a;
        for (n in e)
            if (r = ie.camelCase(n), i = t[r], o = e[n], ie.isArray(o) && (i = o[1], o = e[n] = o[0]), n !== r && (e[r] = o, delete e[n]), a = ie.cssHooks[r], a && "expand" in a) {
                o = a.expand(o), delete e[r];
                for (n in o) n in e || (e[n] = o[n], t[n] = i)
            } else t[r] = i
    }

    function B(e, t, n) {
        var r, i, o = 0,
            a = yt.length,
            s = ie.Deferred().always(function() {
                delete l.elem
            }),
            l = function() {
                if (i) return !1;
                for (var t = pt || _(), n = Math.max(0, u.startTime + u.duration - t), r = n / u.duration || 0, o = 1 - r, a = 0, l = u.tweens.length; l > a; a++) u.tweens[a].run(o);
                return s.notifyWith(e, [u, o, n]), 1 > o && l ? n : (s.resolveWith(e, [u]), !1)
            },
            u = s.promise({
                elem: e,
                props: ie.extend({}, t),
                opts: ie.extend(!0, {
                    specialEasing: {}
                }, n),
                originalProperties: t,
                originalOptions: n,
                startTime: pt || _(),
                duration: n.duration,
                tweens: [],
                createTween: function(t, n) {
                    var r = ie.Tween(e, u.opts, t, n, u.opts.specialEasing[t] || u.opts.easing);
                    return u.tweens.push(r), r
                },
                stop: function(t) {
                    var n = 0,
                        r = t ? u.tweens.length : 0;
                    if (i) return this;
                    for (i = !0; r > n; n++) u.tweens[n].run(1);
                    return t ? s.resolveWith(e, [u, t]) : s.rejectWith(e, [u, t]), this
                }
            }),
            c = u.props;
        for (F(c, u.opts.specialEasing); a > o; o++)
            if (r = yt[o].call(u, e, c, u.opts)) return r;
        return ie.map(c, M, u), ie.isFunction(u.opts.start) && u.opts.start.call(e, u), ie.fx.timer(ie.extend(l, {
            elem: e,
            anim: u,
            queue: u.opts.queue
        })), u.progress(u.opts.progress).done(u.opts.done, u.opts.complete).fail(u.opts.fail).always(u.opts.always)
    }

    function P(e) {
        return function(t, n) {
            "string" != typeof t && (n = t, t = "*");
            var r, i = 0,
                o = t.toLowerCase().match(be) || [];
            if (ie.isFunction(n))
                for (; r = o[i++];) "+" === r.charAt(0) ? (r = r.slice(1) || "*", (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n)
        }
    }

    function R(e, t, n, r) {
        function i(s) {
            var l;
            return o[s] = !0, ie.each(e[s] || [], function(e, s) {
                var u = s(t, n, r);
                return "string" != typeof u || a || o[u] ? a ? !(l = u) : void 0 : (t.dataTypes.unshift(u), i(u), !1)
            }), l
        }
        var o = {},
            a = e === zt;
        return i(t.dataTypes[0]) || !o["*"] && i("*")
    }

    function W(e, t) {
        var n, r, i = ie.ajaxSettings.flatOptions || {};
        for (r in t) void 0 !== t[r] && ((i[r] ? e : n || (n = {}))[r] = t[r]);
        return n && ie.extend(!0, e, n), e
    }

    function $(e, t, n) {
        for (var r, i, o, a, s = e.contents, l = e.dataTypes;
            "*" === l[0];) l.shift(), void 0 === i && (i = e.mimeType || t.getResponseHeader("Content-Type"));
        if (i)
            for (a in s)
                if (s[a] && s[a].test(i)) {
                    l.unshift(a);
                    break
                }
        if (l[0] in n) o = l[0];
        else {
            for (a in n) {
                if (!l[0] || e.converters[a + " " + l[0]]) {
                    o = a;
                    break
                }
                r || (r = a)
            }
            o = o || r
        }
        return o ? (o !== l[0] && l.unshift(o), n[o]) : void 0
    }

    function z(e, t, n, r) {
        var i, o, a, s, l, u = {},
            c = e.dataTypes.slice();
        if (c[1])
            for (a in e.converters) u[a.toLowerCase()] = e.converters[a];
        for (o = c.shift(); o;)
            if (e.responseFields[o] && (n[e.responseFields[o]] = t), !l && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), l = o, o = c.shift())
                if ("*" === o) o = l;
                else if ("*" !== l && l !== o) {
            if (a = u[l + " " + o] || u["* " + o], !a)
                for (i in u)
                    if (s = i.split(" "), s[1] === o && (a = u[l + " " + s[0]] || u["* " + s[0]])) {
                        a === !0 ? a = u[i] : u[i] !== !0 && (o = s[0], c.unshift(s[1]));
                        break
                    }
            if (a !== !0)
                if (a && e["throws"]) t = a(t);
                else try {
                    t = a(t)
                } catch (d) {
                    return {
                        state: "parsererror",
                        error: a ? d : "No conversion from " + l + " to " + o
                    }
                }
        }
        return {
            state: "success",
            data: t
        }
    }

    function I(e, t, n, r) {
        var i;
        if (ie.isArray(t)) ie.each(t, function(t, i) {
            n || Vt.test(e) ? r(e, i) : I(e + "[" + ("object" == typeof i ? t : "") + "]", i, n, r)
        });
        else if (n || "object" !== ie.type(t)) r(e, t);
        else
            for (i in t) I(e + "[" + i + "]", t[i], n, r)
    }

    function X() {
        try {
            return new e.XMLHttpRequest
        } catch (t) {}
    }

    function U() {
        try {
            return new e.ActiveXObject("Microsoft.XMLHTTP")
        } catch (t) {}
    }

    function V(e) {
        return ie.isWindow(e) ? e : 9 === e.nodeType ? e.defaultView || e.parentWindow : !1
    }
    var J = [],
        Y = J.slice,
        G = J.concat,
        Q = J.push,
        K = J.indexOf,
        Z = {},
        ee = Z.toString,
        te = Z.hasOwnProperty,
        ne = {},
        re = "1.11.1",
        ie = function(e, t) {
            return new ie.fn.init(e, t)
        },
        oe = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        ae = /^-ms-/,
        se = /-([\da-z])/gi,
        le = function(e, t) {
            return t.toUpperCase()
        };
    ie.fn = ie.prototype = {
        jquery: re,
        constructor: ie,
        selector: "",
        length: 0,
        toArray: function() {
            return Y.call(this)
        },
        get: function(e) {
            return null != e ? 0 > e ? this[e + this.length] : this[e] : Y.call(this)
        },
        pushStack: function(e) {
            var t = ie.merge(this.constructor(), e);
            return t.prevObject = this, t.context = this.context, t
        },
        each: function(e, t) {
            return ie.each(this, e, t)
        },
        map: function(e) {
            return this.pushStack(ie.map(this, function(t, n) {
                return e.call(t, n, t)
            }))
        },
        slice: function() {
            return this.pushStack(Y.apply(this, arguments))
        },
        first: function() {
            return this.eq(0)
        },
        last: function() {
            return this.eq(-1)
        },
        eq: function(e) {
            var t = this.length,
                n = +e + (0 > e ? t : 0);
            return this.pushStack(n >= 0 && t > n ? [this[n]] : [])
        },
        end: function() {
            return this.prevObject || this.constructor(null)
        },
        push: Q,
        sort: J.sort,
        splice: J.splice
    }, ie.extend = ie.fn.extend = function() {
        var e, t, n, r, i, o, a = arguments[0] || {},
            s = 1,
            l = arguments.length,
            u = !1;
        for ("boolean" == typeof a && (u = a, a = arguments[s] || {}, s++), "object" == typeof a || ie.isFunction(a) || (a = {}), s === l && (a = this, s--); l > s; s++)
            if (null != (i = arguments[s]))
                for (r in i) e = a[r], n = i[r], a !== n && (u && n && (ie.isPlainObject(n) || (t = ie.isArray(n))) ? (t ? (t = !1, o = e && ie.isArray(e) ? e : []) : o = e && ie.isPlainObject(e) ? e : {}, a[r] = ie.extend(u, o, n)) : void 0 !== n && (a[r] = n));
        return a
    }, ie.extend({
        expando: "jQuery" + (re + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function(e) {
            throw new Error(e)
        },
        noop: function() {},
        isFunction: function(e) {
            return "function" === ie.type(e)
        },
        isArray: Array.isArray || function(e) {
            return "array" === ie.type(e)
        },
        isWindow: function(e) {
            return null != e && e == e.window
        },
        isNumeric: function(e) {
            return !ie.isArray(e) && e - parseFloat(e) >= 0
        },
        isEmptyObject: function(e) {
            var t;
            for (t in e) return !1;
            return !0
        },
        isPlainObject: function(e) {
            var t;
            if (!e || "object" !== ie.type(e) || e.nodeType || ie.isWindow(e)) return !1;
            try {
                if (e.constructor && !te.call(e, "constructor") && !te.call(e.constructor.prototype, "isPrototypeOf")) return !1
            } catch (n) {
                return !1
            }
            if (ne.ownLast)
                for (t in e) return te.call(e, t);
            for (t in e);
            return void 0 === t || te.call(e, t)
        },
        type: function(e) {
            return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? Z[ee.call(e)] || "object" : typeof e
        },
        globalEval: function(t) {
            t && ie.trim(t) && (e.execScript || function(t) {
                e.eval.call(e, t)
            })(t)
        },
        camelCase: function(e) {
            return e.replace(ae, "ms-").replace(se, le)
        },
        nodeName: function(e, t) {
            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
        },
        each: function(e, t, r) {
            var i, o = 0,
                a = e.length,
                s = n(e);
            if (r) {
                if (s)
                    for (; a > o && (i = t.apply(e[o], r), i !== !1); o++);
                else
                    for (o in e)
                        if (i = t.apply(e[o], r), i === !1) break
            } else if (s)
                for (; a > o && (i = t.call(e[o], o, e[o]), i !== !1); o++);
            else
                for (o in e)
                    if (i = t.call(e[o], o, e[o]), i === !1) break; return e
        },
        trim: function(e) {
            return null == e ? "" : (e + "").replace(oe, "")
        },
        makeArray: function(e, t) {
            var r = t || [];
            return null != e && (n(Object(e)) ? ie.merge(r, "string" == typeof e ? [e] : e) : Q.call(r, e)), r
        },
        inArray: function(e, t, n) {
            var r;
            if (t) {
                if (K) return K.call(t, e, n);
                for (r = t.length, n = n ? 0 > n ? Math.max(0, r + n) : n : 0; r > n; n++)
                    if (n in t && t[n] === e) return n
            }
            return -1
        },
        merge: function(e, t) {
            for (var n = +t.length, r = 0, i = e.length; n > r;) e[i++] = t[r++];
            if (n !== n)
                for (; void 0 !== t[r];) e[i++] = t[r++];
            return e.length = i, e
        },
        grep: function(e, t, n) {
            for (var r, i = [], o = 0, a = e.length, s = !n; a > o; o++) r = !t(e[o], o), r !== s && i.push(e[o]);
            return i
        },
        map: function(e, t, r) {
            var i, o = 0,
                a = e.length,
                s = n(e),
                l = [];
            if (s)
                for (; a > o; o++) i = t(e[o], o, r), null != i && l.push(i);
            else
                for (o in e) i = t(e[o], o, r), null != i && l.push(i);
            return G.apply([], l)
        },
        guid: 1,
        proxy: function(e, t) {
            var n, r, i;
            return "string" == typeof t && (i = e[t], t = e, e = i), ie.isFunction(e) ? (n = Y.call(arguments, 2), r = function() {
                return e.apply(t || this, n.concat(Y.call(arguments)))
            }, r.guid = e.guid = e.guid || ie.guid++, r) : void 0
        },
        now: function() {
            return +new Date
        },
        support: ne
    }), ie.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(e, t) {
        Z["[object " + t + "]"] = t.toLowerCase()
    });
    var ue = function(e) {
        function t(e, t, n, r) {
            var i, o, a, s, l, u, d, p, h, m;
            if ((t ? t.ownerDocument || t : R) !== H && L(t), t = t || H, n = n || [], !e || "string" != typeof e) return n;
            if (1 !== (s = t.nodeType) && 9 !== s) return [];
            if (q && !r) {
                if (i = ye.exec(e))
                    if (a = i[1]) {
                        if (9 === s) {
                            if (o = t.getElementById(a), !o || !o.parentNode) return n;
                            if (o.id === a) return n.push(o), n
                        } else if (t.ownerDocument && (o = t.ownerDocument.getElementById(a)) && B(t, o) && o.id === a) return n.push(o), n
                    } else {
                        if (i[2]) return Z.apply(n, t.getElementsByTagName(e)), n;
                        if ((a = i[3]) && w.getElementsByClassName && t.getElementsByClassName) return Z.apply(n, t.getElementsByClassName(a)), n
                    }
                if (w.qsa && (!M || !M.test(e))) {
                    if (p = d = P, h = t, m = 9 === s && e, 1 === s && "object" !== t.nodeName.toLowerCase()) {
                        for (u = E(e), (d = t.getAttribute("id")) ? p = d.replace(xe, "\\$&") : t.setAttribute("id", p), p = "[id='" + p + "'] ", l = u.length; l--;) u[l] = p + f(u[l]);
                        h = be.test(e) && c(t.parentNode) || t, m = u.join(",")
                    }
                    if (m) try {
                        return Z.apply(n, h.querySelectorAll(m)), n
                    } catch (g) {} finally {
                        d || t.removeAttribute("id")
                    }
                }
            }
            return S(e.replace(le, "$1"), t, n, r)
        }

        function n() {
            function e(n, r) {
                return t.push(n + " ") > T.cacheLength && delete e[t.shift()], e[n + " "] = r
            }
            var t = [];
            return e
        }

        function r(e) {
            return e[P] = !0, e
        }

        function i(e) {
            var t = H.createElement("div");
            try {
                return !!e(t)
            } catch (n) {
                return !1
            } finally {
                t.parentNode && t.parentNode.removeChild(t), t = null
            }
        }

        function o(e, t) {
            for (var n = e.split("|"), r = e.length; r--;) T.attrHandle[n[r]] = t
        }

        function a(e, t) {
            var n = t && e,
                r = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || J) - (~e.sourceIndex || J);
            if (r) return r;
            if (n)
                for (; n = n.nextSibling;)
                    if (n === t) return -1;
            return e ? 1 : -1
        }

        function s(e) {
            return function(t) {
                var n = t.nodeName.toLowerCase();
                return "input" === n && t.type === e
            }
        }

        function l(e) {
            return function(t) {
                var n = t.nodeName.toLowerCase();
                return ("input" === n || "button" === n) && t.type === e
            }
        }

        function u(e) {
            return r(function(t) {
                return t = +t, r(function(n, r) {
                    for (var i, o = e([], n.length, t), a = o.length; a--;) n[i = o[a]] && (n[i] = !(r[i] = n[i]))
                })
            })
        }

        function c(e) {
            return e && typeof e.getElementsByTagName !== V && e
        }

        function d() {}

        function f(e) {
            for (var t = 0, n = e.length, r = ""; n > t; t++) r += e[t].value;
            return r
        }

        function p(e, t, n) {
            var r = t.dir,
                i = n && "parentNode" === r,
                o = $++;
            return t.first ? function(t, n, o) {
                for (; t = t[r];)
                    if (1 === t.nodeType || i) return e(t, n, o)
            } : function(t, n, a) {
                var s, l, u = [W, o];
                if (a) {
                    for (; t = t[r];)
                        if ((1 === t.nodeType || i) && e(t, n, a)) return !0
                } else
                    for (; t = t[r];)
                        if (1 === t.nodeType || i) {
                            if (l = t[P] || (t[P] = {}), (s = l[r]) && s[0] === W && s[1] === o) return u[2] = s[2];
                            if (l[r] = u, u[2] = e(t, n, a)) return !0
                        }
            }
        }

        function h(e) {
            return e.length > 1 ? function(t, n, r) {
                for (var i = e.length; i--;)
                    if (!e[i](t, n, r)) return !1;
                return !0
            } : e[0]
        }

        function m(e, n, r) {
            for (var i = 0, o = n.length; o > i; i++) t(e, n[i], r);
            return r
        }

        function g(e, t, n, r, i) {
            for (var o, a = [], s = 0, l = e.length, u = null != t; l > s; s++)(o = e[s]) && (!n || n(o, r, i)) && (a.push(o), u && t.push(s));
            return a
        }

        function v(e, t, n, i, o, a) {
            return i && !i[P] && (i = v(i)), o && !o[P] && (o = v(o, a)), r(function(r, a, s, l) {
                var u, c, d, f = [],
                    p = [],
                    h = a.length,
                    v = r || m(t || "*", s.nodeType ? [s] : s, []),
                    y = !e || !r && t ? v : g(v, f, e, s, l),
                    b = n ? o || (r ? e : h || i) ? [] : a : y;
                if (n && n(y, b, s, l), i)
                    for (u = g(b, p), i(u, [], s, l), c = u.length; c--;)(d = u[c]) && (b[p[c]] = !(y[p[c]] = d));
                if (r) {
                    if (o || e) {
                        if (o) {
                            for (u = [], c = b.length; c--;)(d = b[c]) && u.push(y[c] = d);
                            o(null, b = [], u, l)
                        }
                        for (c = b.length; c--;)(d = b[c]) && (u = o ? te.call(r, d) : f[c]) > -1 && (r[u] = !(a[u] = d))
                    }
                } else b = g(b === a ? b.splice(h, b.length) : b), o ? o(null, a, b, l) : Z.apply(a, b)
            })
        }

        function y(e) {
            for (var t, n, r, i = e.length, o = T.relative[e[0].type], a = o || T.relative[" "], s = o ? 1 : 0, l = p(function(e) {
                    return e === t
                }, a, !0), u = p(function(e) {
                    return te.call(t, e) > -1
                }, a, !0), c = [function(e, n, r) {
                    return !o && (r || n !== A) || ((t = n).nodeType ? l(e, n, r) : u(e, n, r))
                }]; i > s; s++)
                if (n = T.relative[e[s].type]) c = [p(h(c), n)];
                else {
                    if (n = T.filter[e[s].type].apply(null, e[s].matches), n[P]) {
                        for (r = ++s; i > r && !T.relative[e[r].type]; r++);
                        return v(s > 1 && h(c), s > 1 && f(e.slice(0, s - 1).concat({
                            value: " " === e[s - 2].type ? "*" : ""
                        })).replace(le, "$1"), n, r > s && y(e.slice(s, r)), i > r && y(e = e.slice(r)), i > r && f(e))
                    }
                    c.push(n)
                }
            return h(c)
        }

        function b(e, n) {
            var i = n.length > 0,
                o = e.length > 0,
                a = function(r, a, s, l, u) {
                    var c, d, f, p = 0,
                        h = "0",
                        m = r && [],
                        v = [],
                        y = A,
                        b = r || o && T.find.TAG("*", u),
                        x = W += null == y ? 1 : Math.random() || .1,
                        w = b.length;
                    for (u && (A = a !== H && a); h !== w && null != (c = b[h]); h++) {
                        if (o && c) {
                            for (d = 0; f = e[d++];)
                                if (f(c, a, s)) {
                                    l.push(c);
                                    break
                                }
                            u && (W = x)
                        }
                        i && ((c = !f && c) && p--, r && m.push(c))
                    }
                    if (p += h, i && h !== p) {
                        for (d = 0; f = n[d++];) f(m, v, a, s);
                        if (r) {
                            if (p > 0)
                                for (; h--;) m[h] || v[h] || (v[h] = Q.call(l));
                            v = g(v)
                        }
                        Z.apply(l, v), u && !r && v.length > 0 && p + n.length > 1 && t.uniqueSort(l)
                    }
                    return u && (W = x, A = y), m
                };
            return i ? r(a) : a
        }
        var x, w, T, C, N, E, k, S, A, D, j, L, H, _, q, M, O, F, B, P = "sizzle" + -new Date,
            R = e.document,
            W = 0,
            $ = 0,
            z = n(),
            I = n(),
            X = n(),
            U = function(e, t) {
                return e === t && (j = !0), 0
            },
            V = "undefined",
            J = 1 << 31,
            Y = {}.hasOwnProperty,
            G = [],
            Q = G.pop,
            K = G.push,
            Z = G.push,
            ee = G.slice,
            te = G.indexOf || function(e) {
                for (var t = 0, n = this.length; n > t; t++)
                    if (this[t] === e) return t;
                return -1
            },
            ne = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
            re = "[\\x20\\t\\r\\n\\f]",
            ie = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
            oe = ie.replace("w", "w#"),
            ae = "\\[" + re + "*(" + ie + ")(?:" + re + "*([*^$|!~]?=)" + re + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + oe + "))|)" + re + "*\\]",
            se = ":(" + ie + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + ae + ")*)|.*)\\)|)",
            le = new RegExp("^" + re + "+|((?:^|[^\\\\])(?:\\\\.)*)" + re + "+$", "g"),
            ue = new RegExp("^" + re + "*," + re + "*"),
            ce = new RegExp("^" + re + "*([>+~]|" + re + ")" + re + "*"),
            de = new RegExp("=" + re + "*([^\\]'\"]*?)" + re + "*\\]", "g"),
            fe = new RegExp(se),
            pe = new RegExp("^" + oe + "$"),
            he = {
                ID: new RegExp("^#(" + ie + ")"),
                CLASS: new RegExp("^\\.(" + ie + ")"),
                TAG: new RegExp("^(" + ie.replace("w", "w*") + ")"),
                ATTR: new RegExp("^" + ae),
                PSEUDO: new RegExp("^" + se),
                CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + re + "*(even|odd|(([+-]|)(\\d*)n|)" + re + "*(?:([+-]|)" + re + "*(\\d+)|))" + re + "*\\)|)", "i"),
                bool: new RegExp("^(?:" + ne + ")$", "i"),
                needsContext: new RegExp("^" + re + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + re + "*((?:-\\d)?\\d*)" + re + "*\\)|)(?=[^-]|$)", "i")
            },
            me = /^(?:input|select|textarea|button)$/i,
            ge = /^h\d$/i,
            ve = /^[^{]+\{\s*\[native \w/,
            ye = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
            be = /[+~]/,
            xe = /'|\\/g,
            we = new RegExp("\\\\([\\da-f]{1,6}" + re + "?|(" + re + ")|.)", "ig"),
            Te = function(e, t, n) {
                var r = "0x" + t - 65536;
                return r !== r || n ? t : 0 > r ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320)
            };
        try {
            Z.apply(G = ee.call(R.childNodes), R.childNodes), G[R.childNodes.length].nodeType
        } catch (Ce) {
            Z = {
                apply: G.length ? function(e, t) {
                    K.apply(e, ee.call(t))
                } : function(e, t) {
                    for (var n = e.length, r = 0; e[n++] = t[r++];);
                    e.length = n - 1
                }
            }
        }
        w = t.support = {}, N = t.isXML = function(e) {
            var t = e && (e.ownerDocument || e).documentElement;
            return t ? "HTML" !== t.nodeName : !1
        }, L = t.setDocument = function(e) {
            var t, n = e ? e.ownerDocument || e : R,
                r = n.defaultView;
            return n !== H && 9 === n.nodeType && n.documentElement ? (H = n, _ = n.documentElement, q = !N(n), r && r !== r.top && (r.addEventListener ? r.addEventListener("unload", function() {
                L()
            }, !1) : r.attachEvent && r.attachEvent("onunload", function() {
                L()
            })), w.attributes = i(function(e) {
                return e.className = "i", !e.getAttribute("className")
            }), w.getElementsByTagName = i(function(e) {
                return e.appendChild(n.createComment("")), !e.getElementsByTagName("*").length
            }), w.getElementsByClassName = ve.test(n.getElementsByClassName) && i(function(e) {
                return e.innerHTML = "<div class='a'></div><div class='a i'></div>", e.firstChild.className = "i", 2 === e.getElementsByClassName("i").length
            }), w.getById = i(function(e) {
                return _.appendChild(e).id = P, !n.getElementsByName || !n.getElementsByName(P).length
            }), w.getById ? (T.find.ID = function(e, t) {
                if (typeof t.getElementById !== V && q) {
                    var n = t.getElementById(e);
                    return n && n.parentNode ? [n] : []
                }
            }, T.filter.ID = function(e) {
                var t = e.replace(we, Te);
                return function(e) {
                    return e.getAttribute("id") === t
                }
            }) : (delete T.find.ID, T.filter.ID = function(e) {
                var t = e.replace(we, Te);
                return function(e) {
                    var n = typeof e.getAttributeNode !== V && e.getAttributeNode("id");
                    return n && n.value === t
                }
            }), T.find.TAG = w.getElementsByTagName ? function(e, t) {
                return typeof t.getElementsByTagName !== V ? t.getElementsByTagName(e) : void 0
            } : function(e, t) {
                var n, r = [],
                    i = 0,
                    o = t.getElementsByTagName(e);
                if ("*" === e) {
                    for (; n = o[i++];) 1 === n.nodeType && r.push(n);
                    return r
                }
                return o
            }, T.find.CLASS = w.getElementsByClassName && function(e, t) {
                return typeof t.getElementsByClassName !== V && q ? t.getElementsByClassName(e) : void 0
            }, O = [], M = [], (w.qsa = ve.test(n.querySelectorAll)) && (i(function(e) {
                e.innerHTML = "<select msallowclip=''><option selected=''></option></select>", e.querySelectorAll("[msallowclip^='']").length && M.push("[*^$]=" + re + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || M.push("\\[" + re + "*(?:value|" + ne + ")"), e.querySelectorAll(":checked").length || M.push(":checked")
            }), i(function(e) {
                var t = n.createElement("input");
                t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && M.push("name" + re + "*[*^$|!~]?="), e.querySelectorAll(":enabled").length || M.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), M.push(",.*:")
            })), (w.matchesSelector = ve.test(F = _.matches || _.webkitMatchesSelector || _.mozMatchesSelector || _.oMatchesSelector || _.msMatchesSelector)) && i(function(e) {
                w.disconnectedMatch = F.call(e, "div"), F.call(e, "[s!='']:x"), O.push("!=", se)
            }), M = M.length && new RegExp(M.join("|")), O = O.length && new RegExp(O.join("|")), t = ve.test(_.compareDocumentPosition), B = t || ve.test(_.contains) ? function(e, t) {
                var n = 9 === e.nodeType ? e.documentElement : e,
                    r = t && t.parentNode;
                return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r)))
            } : function(e, t) {
                if (t)
                    for (; t = t.parentNode;)
                        if (t === e) return !0;
                return !1
            }, U = t ? function(e, t) {
                if (e === t) return j = !0, 0;
                var r = !e.compareDocumentPosition - !t.compareDocumentPosition;
                return r ? r : (r = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1, 1 & r || !w.sortDetached && t.compareDocumentPosition(e) === r ? e === n || e.ownerDocument === R && B(R, e) ? -1 : t === n || t.ownerDocument === R && B(R, t) ? 1 : D ? te.call(D, e) - te.call(D, t) : 0 : 4 & r ? -1 : 1)
            } : function(e, t) {
                if (e === t) return j = !0, 0;
                var r, i = 0,
                    o = e.parentNode,
                    s = t.parentNode,
                    l = [e],
                    u = [t];
                if (!o || !s) return e === n ? -1 : t === n ? 1 : o ? -1 : s ? 1 : D ? te.call(D, e) - te.call(D, t) : 0;
                if (o === s) return a(e, t);
                for (r = e; r = r.parentNode;) l.unshift(r);
                for (r = t; r = r.parentNode;) u.unshift(r);
                for (; l[i] === u[i];) i++;
                return i ? a(l[i], u[i]) : l[i] === R ? -1 : u[i] === R ? 1 : 0
            }, n) : H
        }, t.matches = function(e, n) {
            return t(e, null, null, n)
        }, t.matchesSelector = function(e, n) {
            if ((e.ownerDocument || e) !== H && L(e), n = n.replace(de, "='$1']"), !(!w.matchesSelector || !q || O && O.test(n) || M && M.test(n))) try {
                var r = F.call(e, n);
                if (r || w.disconnectedMatch || e.document && 11 !== e.document.nodeType) return r
            } catch (i) {}
            return t(n, H, null, [e]).length > 0
        }, t.contains = function(e, t) {
            return (e.ownerDocument || e) !== H && L(e), B(e, t)
        }, t.attr = function(e, t) {
            (e.ownerDocument || e) !== H && L(e);
            var n = T.attrHandle[t.toLowerCase()],
                r = n && Y.call(T.attrHandle, t.toLowerCase()) ? n(e, t, !q) : void 0;
            return void 0 !== r ? r : w.attributes || !q ? e.getAttribute(t) : (r = e.getAttributeNode(t)) && r.specified ? r.value : null
        }, t.error = function(e) {
            throw new Error("Syntax error, unrecognized expression: " + e)
        }, t.uniqueSort = function(e) {
            var t, n = [],
                r = 0,
                i = 0;
            if (j = !w.detectDuplicates, D = !w.sortStable && e.slice(0), e.sort(U), j) {
                for (; t = e[i++];) t === e[i] && (r = n.push(i));
                for (; r--;) e.splice(n[r], 1)
            }
            return D = null, e
        }, C = t.getText = function(e) {
            var t, n = "",
                r = 0,
                i = e.nodeType;
            if (i) {
                if (1 === i || 9 === i || 11 === i) {
                    if ("string" == typeof e.textContent) return e.textContent;
                    for (e = e.firstChild; e; e = e.nextSibling) n += C(e)
                } else if (3 === i || 4 === i) return e.nodeValue
            } else
                for (; t = e[r++];) n += C(t);
            return n
        }, T = t.selectors = {
            cacheLength: 50,
            createPseudo: r,
            match: he,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(e) {
                    return e[1] = e[1].replace(we, Te), e[3] = (e[3] || e[4] || e[5] || "").replace(we, Te), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4)
                },
                CHILD: function(e) {
                    return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || t.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && t.error(e[0]), e
                },
                PSEUDO: function(e) {
                    var t, n = !e[6] && e[2];
                    return he.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && fe.test(n) && (t = E(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3))
                }
            },
            filter: {
                TAG: function(e) {
                    var t = e.replace(we, Te).toLowerCase();
                    return "*" === e ? function() {
                        return !0
                    } : function(e) {
                        return e.nodeName && e.nodeName.toLowerCase() === t
                    }
                },
                CLASS: function(e) {
                    var t = z[e + " "];
                    return t || (t = new RegExp("(^|" + re + ")" + e + "(" + re + "|$)")) && z(e, function(e) {
                        return t.test("string" == typeof e.className && e.className || typeof e.getAttribute !== V && e.getAttribute("class") || "")
                    })
                },
                ATTR: function(e, n, r) {
                    return function(i) {
                        var o = t.attr(i, e);
                        return null == o ? "!=" === n : n ? (o += "", "=" === n ? o === r : "!=" === n ? o !== r : "^=" === n ? r && 0 === o.indexOf(r) : "*=" === n ? r && o.indexOf(r) > -1 : "$=" === n ? r && o.slice(-r.length) === r : "~=" === n ? (" " + o + " ").indexOf(r) > -1 : "|=" === n ? o === r || o.slice(0, r.length + 1) === r + "-" : !1) : !0
                    }
                },
                CHILD: function(e, t, n, r, i) {
                    var o = "nth" !== e.slice(0, 3),
                        a = "last" !== e.slice(-4),
                        s = "of-type" === t;
                    return 1 === r && 0 === i ? function(e) {
                        return !!e.parentNode
                    } : function(t, n, l) {
                        var u, c, d, f, p, h, m = o !== a ? "nextSibling" : "previousSibling",
                            g = t.parentNode,
                            v = s && t.nodeName.toLowerCase(),
                            y = !l && !s;
                        if (g) {
                            if (o) {
                                for (; m;) {
                                    for (d = t; d = d[m];)
                                        if (s ? d.nodeName.toLowerCase() === v : 1 === d.nodeType) return !1;
                                    h = m = "only" === e && !h && "nextSibling"
                                }
                                return !0
                            }
                            if (h = [a ? g.firstChild : g.lastChild], a && y) {
                                for (c = g[P] || (g[P] = {}), u = c[e] || [], p = u[0] === W && u[1], f = u[0] === W && u[2], d = p && g.childNodes[p]; d = ++p && d && d[m] || (f = p = 0) || h.pop();)
                                    if (1 === d.nodeType && ++f && d === t) {
                                        c[e] = [W, p, f];
                                        break
                                    }
                            } else if (y && (u = (t[P] || (t[P] = {}))[e]) && u[0] === W) f = u[1];
                            else
                                for (;
                                    (d = ++p && d && d[m] || (f = p = 0) || h.pop()) && ((s ? d.nodeName.toLowerCase() !== v : 1 !== d.nodeType) || !++f || (y && ((d[P] || (d[P] = {}))[e] = [W, f]), d !== t)););
                            return f -= i, f === r || f % r === 0 && f / r >= 0
                        }
                    }
                },
                PSEUDO: function(e, n) {
                    var i, o = T.pseudos[e] || T.setFilters[e.toLowerCase()] || t.error("unsupported pseudo: " + e);
                    return o[P] ? o(n) : o.length > 1 ? (i = [e, e, "", n], T.setFilters.hasOwnProperty(e.toLowerCase()) ? r(function(e, t) {
                        for (var r, i = o(e, n), a = i.length; a--;) r = te.call(e, i[a]), e[r] = !(t[r] = i[a])
                    }) : function(e) {
                        return o(e, 0, i)
                    }) : o
                }
            },
            pseudos: {
                not: r(function(e) {
                    var t = [],
                        n = [],
                        i = k(e.replace(le, "$1"));
                    return i[P] ? r(function(e, t, n, r) {
                        for (var o, a = i(e, null, r, []), s = e.length; s--;)(o = a[s]) && (e[s] = !(t[s] = o))
                    }) : function(e, r, o) {
                        return t[0] = e, i(t, null, o, n), !n.pop()
                    }
                }),
                has: r(function(e) {
                    return function(n) {
                        return t(e, n).length > 0
                    }
                }),
                contains: r(function(e) {
                    return function(t) {
                        return (t.textContent || t.innerText || C(t)).indexOf(e) > -1
                    }
                }),
                lang: r(function(e) {
                    return pe.test(e || "") || t.error("unsupported lang: " + e), e = e.replace(we, Te).toLowerCase(),
                        function(t) {
                            var n;
                            do
                                if (n = q ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return n = n.toLowerCase(), n === e || 0 === n.indexOf(e + "-");
                            while ((t = t.parentNode) && 1 === t.nodeType);
                            return !1
                        }
                }),
                target: function(t) {
                    var n = e.location && e.location.hash;
                    return n && n.slice(1) === t.id
                },
                root: function(e) {
                    return e === _
                },
                focus: function(e) {
                    return e === H.activeElement && (!H.hasFocus || H.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                },
                enabled: function(e) {
                    return e.disabled === !1
                },
                disabled: function(e) {
                    return e.disabled === !0
                },
                checked: function(e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && !!e.checked || "option" === t && !!e.selected
                },
                selected: function(e) {
                    return e.parentNode && e.parentNode.selectedIndex, e.selected === !0
                },
                empty: function(e) {
                    for (e = e.firstChild; e; e = e.nextSibling)
                        if (e.nodeType < 6) return !1;
                    return !0
                },
                parent: function(e) {
                    return !T.pseudos.empty(e)
                },
                header: function(e) {
                    return ge.test(e.nodeName)
                },
                input: function(e) {
                    return me.test(e.nodeName)
                },
                button: function(e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && "button" === e.type || "button" === t
                },
                text: function(e) {
                    var t;
                    return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
                },
                first: u(function() {
                    return [0]
                }),
                last: u(function(e, t) {
                    return [t - 1]
                }),
                eq: u(function(e, t, n) {
                    return [0 > n ? n + t : n]
                }),
                even: u(function(e, t) {
                    for (var n = 0; t > n; n += 2) e.push(n);
                    return e
                }),
                odd: u(function(e, t) {
                    for (var n = 1; t > n; n += 2) e.push(n);
                    return e
                }),
                lt: u(function(e, t, n) {
                    for (var r = 0 > n ? n + t : n; --r >= 0;) e.push(r);
                    return e
                }),
                gt: u(function(e, t, n) {
                    for (var r = 0 > n ? n + t : n; ++r < t;) e.push(r);
                    return e
                })
            }
        }, T.pseudos.nth = T.pseudos.eq;
        for (x in {
                radio: !0,
                checkbox: !0,
                file: !0,
                password: !0,
                image: !0
            }) T.pseudos[x] = s(x);
        for (x in {
                submit: !0,
                reset: !0
            }) T.pseudos[x] = l(x);
        return d.prototype = T.filters = T.pseudos, T.setFilters = new d, E = t.tokenize = function(e, n) {
            var r, i, o, a, s, l, u, c = I[e + " "];
            if (c) return n ? 0 : c.slice(0);
            for (s = e, l = [], u = T.preFilter; s;) {
                (!r || (i = ue.exec(s))) && (i && (s = s.slice(i[0].length) || s), l.push(o = [])), r = !1, (i = ce.exec(s)) && (r = i.shift(), o.push({
                    value: r,
                    type: i[0].replace(le, " ")
                }), s = s.slice(r.length));
                for (a in T.filter) !(i = he[a].exec(s)) || u[a] && !(i = u[a](i)) || (r = i.shift(), o.push({
                    value: r,
                    type: a,
                    matches: i
                }), s = s.slice(r.length));
                if (!r) break
            }
            return n ? s.length : s ? t.error(e) : I(e, l).slice(0)
        }, k = t.compile = function(e, t) {
            var n, r = [],
                i = [],
                o = X[e + " "];
            if (!o) {
                for (t || (t = E(e)), n = t.length; n--;) o = y(t[n]), o[P] ? r.push(o) : i.push(o);
                o = X(e, b(i, r)), o.selector = e
            }
            return o
        }, S = t.select = function(e, t, n, r) {
            var i, o, a, s, l, u = "function" == typeof e && e,
                d = !r && E(e = u.selector || e);
            if (n = n || [], 1 === d.length) {
                if (o = d[0] = d[0].slice(0), o.length > 2 && "ID" === (a = o[0]).type && w.getById && 9 === t.nodeType && q && T.relative[o[1].type]) {
                    if (t = (T.find.ID(a.matches[0].replace(we, Te), t) || [])[0], !t) return n;
                    u && (t = t.parentNode), e = e.slice(o.shift().value.length)
                }
                for (i = he.needsContext.test(e) ? 0 : o.length; i-- && (a = o[i], !T.relative[s = a.type]);)
                    if ((l = T.find[s]) && (r = l(a.matches[0].replace(we, Te), be.test(o[0].type) && c(t.parentNode) || t))) {
                        if (o.splice(i, 1), e = r.length && f(o), !e) return Z.apply(n, r), n;
                        break
                    }
            }
            return (u || k(e, d))(r, t, !q, n, be.test(e) && c(t.parentNode) || t), n
        }, w.sortStable = P.split("").sort(U).join("") === P, w.detectDuplicates = !!j, L(), w.sortDetached = i(function(e) {
            return 1 & e.compareDocumentPosition(H.createElement("div"))
        }), i(function(e) {
            return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href")
        }) || o("type|href|height|width", function(e, t, n) {
            return n ? void 0 : e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
        }), w.attributes && i(function(e) {
            return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value")
        }) || o("value", function(e, t, n) {
            return n || "input" !== e.nodeName.toLowerCase() ? void 0 : e.defaultValue
        }), i(function(e) {
            return null == e.getAttribute("disabled")
        }) || o(ne, function(e, t, n) {
            var r;
            return n ? void 0 : e[t] === !0 ? t.toLowerCase() : (r = e.getAttributeNode(t)) && r.specified ? r.value : null
        }), t
    }(e);
    ie.find = ue, ie.expr = ue.selectors, ie.expr[":"] = ie.expr.pseudos, ie.unique = ue.uniqueSort, ie.text = ue.getText, ie.isXMLDoc = ue.isXML, ie.contains = ue.contains;
    var ce = ie.expr.match.needsContext,
        de = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
        fe = /^.[^:#\[\.,]*$/;
    ie.filter = function(e, t, n) {
        var r = t[0];
        return n && (e = ":not(" + e + ")"), 1 === t.length && 1 === r.nodeType ? ie.find.matchesSelector(r, e) ? [r] : [] : ie.find.matches(e, ie.grep(t, function(e) {
            return 1 === e.nodeType
        }))
    }, ie.fn.extend({
        find: function(e) {
            var t, n = [],
                r = this,
                i = r.length;
            if ("string" != typeof e) return this.pushStack(ie(e).filter(function() {
                for (t = 0; i > t; t++)
                    if (ie.contains(r[t], this)) return !0
            }));
            for (t = 0; i > t; t++) ie.find(e, r[t], n);
            return n = this.pushStack(i > 1 ? ie.unique(n) : n), n.selector = this.selector ? this.selector + " " + e : e, n
        },
        filter: function(e) {
            return this.pushStack(r(this, e || [], !1))
        },
        not: function(e) {
            return this.pushStack(r(this, e || [], !0))
        },
        is: function(e) {
            return !!r(this, "string" == typeof e && ce.test(e) ? ie(e) : e || [], !1).length
        }
    });
    var pe, he = e.document,
        me = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
        ge = ie.fn.init = function(e, t) {
            var n, r;
            if (!e) return this;
            if ("string" == typeof e) {
                if (n = "<" === e.charAt(0) && ">" === e.charAt(e.length - 1) && e.length >= 3 ? [null, e, null] : me.exec(e), !n || !n[1] && t) return !t || t.jquery ? (t || pe).find(e) : this.constructor(t).find(e);
                if (n[1]) {
                    if (t = t instanceof ie ? t[0] : t, ie.merge(this, ie.parseHTML(n[1], t && t.nodeType ? t.ownerDocument || t : he, !0)), de.test(n[1]) && ie.isPlainObject(t))
                        for (n in t) ie.isFunction(this[n]) ? this[n](t[n]) : this.attr(n, t[n]);
                    return this
                }
                if (r = he.getElementById(n[2]), r && r.parentNode) {
                    if (r.id !== n[2]) return pe.find(e);
                    this.length = 1, this[0] = r
                }
                return this.context = he, this.selector = e, this
            }
            return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : ie.isFunction(e) ? "undefined" != typeof pe.ready ? pe.ready(e) : e(ie) : (void 0 !== e.selector && (this.selector = e.selector, this.context = e.context), ie.makeArray(e, this))
        };
    ge.prototype = ie.fn, pe = ie(he);
    var ve = /^(?:parents|prev(?:Until|All))/,
        ye = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        };
    ie.extend({
        dir: function(e, t, n) {
            for (var r = [], i = e[t]; i && 9 !== i.nodeType && (void 0 === n || 1 !== i.nodeType || !ie(i).is(n));) 1 === i.nodeType && r.push(i), i = i[t];
            return r
        },
        sibling: function(e, t) {
            for (var n = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e);
            return n
        }
    }), ie.fn.extend({
        has: function(e) {
            var t, n = ie(e, this),
                r = n.length;
            return this.filter(function() {
                for (t = 0; r > t; t++)
                    if (ie.contains(this, n[t])) return !0
            })
        },
        closest: function(e, t) {
            for (var n, r = 0, i = this.length, o = [], a = ce.test(e) || "string" != typeof e ? ie(e, t || this.context) : 0; i > r; r++)
                for (n = this[r]; n && n !== t; n = n.parentNode)
                    if (n.nodeType < 11 && (a ? a.index(n) > -1 : 1 === n.nodeType && ie.find.matchesSelector(n, e))) {
                        o.push(n);
                        break
                    }
            return this.pushStack(o.length > 1 ? ie.unique(o) : o)
        },
        index: function(e) {
            return e ? "string" == typeof e ? ie.inArray(this[0], ie(e)) : ie.inArray(e.jquery ? e[0] : e, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        },
        add: function(e, t) {
            return this.pushStack(ie.unique(ie.merge(this.get(), ie(e, t))))
        },
        addBack: function(e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
        }
    }), ie.each({
        parent: function(e) {
            var t = e.parentNode;
            return t && 11 !== t.nodeType ? t : null
        },
        parents: function(e) {
            return ie.dir(e, "parentNode")
        },
        parentsUntil: function(e, t, n) {
            return ie.dir(e, "parentNode", n)
        },
        next: function(e) {
            return i(e, "nextSibling")
        },
        prev: function(e) {
            return i(e, "previousSibling")
        },
        nextAll: function(e) {
            return ie.dir(e, "nextSibling")
        },
        prevAll: function(e) {
            return ie.dir(e, "previousSibling")
        },
        nextUntil: function(e, t, n) {
            return ie.dir(e, "nextSibling", n)
        },
        prevUntil: function(e, t, n) {
            return ie.dir(e, "previousSibling", n)
        },
        siblings: function(e) {
            return ie.sibling((e.parentNode || {}).firstChild, e)
        },
        children: function(e) {
            return ie.sibling(e.firstChild)
        },
        contents: function(e) {
            return ie.nodeName(e, "iframe") ? e.contentDocument || e.contentWindow.document : ie.merge([], e.childNodes)
        }
    }, function(e, t) {
        ie.fn[e] = function(n, r) {
            var i = ie.map(this, t, n);
            return "Until" !== e.slice(-5) && (r = n), r && "string" == typeof r && (i = ie.filter(r, i)), this.length > 1 && (ye[e] || (i = ie.unique(i)), ve.test(e) && (i = i.reverse())), this.pushStack(i)
        }
    });
    var be = /\S+/g,
        xe = {};
    ie.Callbacks = function(e) {
        e = "string" == typeof e ? xe[e] || o(e) : ie.extend({}, e);
        var t, n, r, i, a, s, l = [],
            u = !e.once && [],
            c = function(o) {
                for (n = e.memory && o, r = !0, a = s || 0, s = 0, i = l.length, t = !0; l && i > a; a++)
                    if (l[a].apply(o[0], o[1]) === !1 && e.stopOnFalse) {
                        n = !1;
                        break
                    }
                t = !1, l && (u ? u.length && c(u.shift()) : n ? l = [] : d.disable())
            },
            d = {
                add: function() {
                    if (l) {
                        var r = l.length;
                        ! function o(t) {
                            ie.each(t, function(t, n) {
                                var r = ie.type(n);
                                "function" === r ? e.unique && d.has(n) || l.push(n) : n && n.length && "string" !== r && o(n)
                            })
                        }(arguments), t ? i = l.length : n && (s = r, c(n))
                    }
                    return this
                },
                remove: function() {
                    return l && ie.each(arguments, function(e, n) {
                        for (var r;
                            (r = ie.inArray(n, l, r)) > -1;) l.splice(r, 1), t && (i >= r && i--, a >= r && a--)
                    }), this
                },
                has: function(e) {
                    return e ? ie.inArray(e, l) > -1 : !(!l || !l.length)
                },
                empty: function() {
                    return l = [], i = 0, this
                },
                disable: function() {
                    return l = u = n = void 0, this
                },
                disabled: function() {
                    return !l
                },
                lock: function() {
                    return u = void 0, n || d.disable(), this
                },
                locked: function() {
                    return !u
                },
                fireWith: function(e, n) {
                    return !l || r && !u || (n = n || [], n = [e, n.slice ? n.slice() : n], t ? u.push(n) : c(n)), this
                },
                fire: function() {
                    return d.fireWith(this, arguments), this
                },
                fired: function() {
                    return !!r
                }
            };
        return d
    }, ie.extend({
        Deferred: function(e) {
            var t = [
                    ["resolve", "done", ie.Callbacks("once memory"), "resolved"],
                    ["reject", "fail", ie.Callbacks("once memory"), "rejected"],
                    ["notify", "progress", ie.Callbacks("memory")]
                ],
                n = "pending",
                r = {
                    state: function() {
                        return n
                    },
                    always: function() {
                        return i.done(arguments).fail(arguments), this
                    },
                    then: function() {
                        var e = arguments;
                        return ie.Deferred(function(n) {
                            ie.each(t, function(t, o) {
                                var a = ie.isFunction(e[t]) && e[t];
                                i[o[1]](function() {
                                    var e = a && a.apply(this, arguments);
                                    e && ie.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[o[0] + "With"](this === r ? n.promise() : this, a ? [e] : arguments)
                                })
                            }), e = null
                        }).promise()
                    },
                    promise: function(e) {
                        return null != e ? ie.extend(e, r) : r
                    }
                },
                i = {};
            return r.pipe = r.then, ie.each(t, function(e, o) {
                var a = o[2],
                    s = o[3];
                r[o[1]] = a.add, s && a.add(function() {
                    n = s
                }, t[1 ^ e][2].disable, t[2][2].lock), i[o[0]] = function() {
                    return i[o[0] + "With"](this === i ? r : this, arguments), this
                }, i[o[0] + "With"] = a.fireWith
            }), r.promise(i), e && e.call(i, i), i
        },
        when: function(e) {
            var t, n, r, i = 0,
                o = Y.call(arguments),
                a = o.length,
                s = 1 !== a || e && ie.isFunction(e.promise) ? a : 0,
                l = 1 === s ? e : ie.Deferred(),
                u = function(e, n, r) {
                    return function(i) {
                        n[e] = this, r[e] = arguments.length > 1 ? Y.call(arguments) : i, r === t ? l.notifyWith(n, r) : --s || l.resolveWith(n, r)
                    }
                };
            if (a > 1)
                for (t = new Array(a), n = new Array(a), r = new Array(a); a > i; i++) o[i] && ie.isFunction(o[i].promise) ? o[i].promise().done(u(i, r, o)).fail(l.reject).progress(u(i, n, t)) : --s;
            return s || l.resolveWith(r, o), l.promise()
        }
    });
    var we;
    ie.fn.ready = function(e) {
        return ie.ready.promise().done(e), this
    }, ie.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function(e) {
            e ? ie.readyWait++ : ie.ready(!0)
        },
        ready: function(e) {
            if (e === !0 ? !--ie.readyWait : !ie.isReady) {
                if (!he.body) return setTimeout(ie.ready);
                ie.isReady = !0, e !== !0 && --ie.readyWait > 0 || (we.resolveWith(he, [ie]), ie.fn.triggerHandler && (ie(he).triggerHandler("ready"), ie(he).off("ready")))
            }
        }
    }), ie.ready.promise = function(t) {
        if (!we)
            if (we = ie.Deferred(), "complete" === he.readyState) setTimeout(ie.ready);
            else if (he.addEventListener) he.addEventListener("DOMContentLoaded", s, !1), e.addEventListener("load", s, !1);
        else {
            he.attachEvent("onreadystatechange", s), e.attachEvent("onload", s);
            var n = !1;
            try {
                n = null == e.frameElement && he.documentElement
            } catch (r) {}
            n && n.doScroll && ! function i() {
                if (!ie.isReady) {
                    try {
                        n.doScroll("left")
                    } catch (e) {
                        return setTimeout(i, 50)
                    }
                    a(), ie.ready()
                }
            }()
        }
        return we.promise(t)
    };
    var Te, Ce = "undefined";
    for (Te in ie(ne)) break;
    ne.ownLast = "0" !== Te, ne.inlineBlockNeedsLayout = !1, ie(function() {
            var e, t, n, r;
            n = he.getElementsByTagName("body")[0], n && n.style && (t = he.createElement("div"), r = he.createElement("div"), r.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", n.appendChild(r).appendChild(t), typeof t.style.zoom !== Ce && (t.style.cssText = "display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1", ne.inlineBlockNeedsLayout = e = 3 === t.offsetWidth, e && (n.style.zoom = 1)), n.removeChild(r))
        }),
        function() {
            var e = he.createElement("div");
            if (null == ne.deleteExpando) {
                ne.deleteExpando = !0;
                try {
                    delete e.test
                } catch (t) {
                    ne.deleteExpando = !1
                }
            }
            e = null
        }(), ie.acceptData = function(e) {
            var t = ie.noData[(e.nodeName + " ").toLowerCase()],
                n = +e.nodeType || 1;
            return 1 !== n && 9 !== n ? !1 : !t || t !== !0 && e.getAttribute("classid") === t
        };
    var Ne = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
        Ee = /([A-Z])/g;
    ie.extend({
        cache: {},
        noData: {
            "applet ": !0,
            "embed ": !0,
            "object ": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
        },
        hasData: function(e) {
            return e = e.nodeType ? ie.cache[e[ie.expando]] : e[ie.expando], !!e && !u(e)
        },
        data: function(e, t, n) {
            return c(e, t, n)
        },
        removeData: function(e, t) {
            return d(e, t)
        },
        _data: function(e, t, n) {
            return c(e, t, n, !0)
        },
        _removeData: function(e, t) {
            return d(e, t, !0)
        }
    }), ie.fn.extend({
        data: function(e, t) {
            var n, r, i, o = this[0],
                a = o && o.attributes;
            if (void 0 === e) {
                if (this.length && (i = ie.data(o), 1 === o.nodeType && !ie._data(o, "parsedAttrs"))) {
                    for (n = a.length; n--;) a[n] && (r = a[n].name, 0 === r.indexOf("data-") && (r = ie.camelCase(r.slice(5)), l(o, r, i[r])));
                    ie._data(o, "parsedAttrs", !0)
                }
                return i
            }
            return "object" == typeof e ? this.each(function() {
                ie.data(this, e)
            }) : arguments.length > 1 ? this.each(function() {
                ie.data(this, e, t)
            }) : o ? l(o, e, ie.data(o, e)) : void 0
        },
        removeData: function(e) {
            return this.each(function() {
                ie.removeData(this, e)
            })
        }
    }), ie.extend({
        queue: function(e, t, n) {
            var r;
            return e ? (t = (t || "fx") + "queue", r = ie._data(e, t), n && (!r || ie.isArray(n) ? r = ie._data(e, t, ie.makeArray(n)) : r.push(n)), r || []) : void 0
        },
        dequeue: function(e, t) {
            t = t || "fx";
            var n = ie.queue(e, t),
                r = n.length,
                i = n.shift(),
                o = ie._queueHooks(e, t),
                a = function() {
                    ie.dequeue(e, t)
                };
            "inprogress" === i && (i = n.shift(), r--), i && ("fx" === t && n.unshift("inprogress"), delete o.stop, i.call(e, a, o)), !r && o && o.empty.fire()
        },
        _queueHooks: function(e, t) {
            var n = t + "queueHooks";
            return ie._data(e, n) || ie._data(e, n, {
                empty: ie.Callbacks("once memory").add(function() {
                    ie._removeData(e, t + "queue"), ie._removeData(e, n)
                })
            })
        }
    }), ie.fn.extend({
        queue: function(e, t) {
            var n = 2;
            return "string" != typeof e && (t = e, e = "fx", n--), arguments.length < n ? ie.queue(this[0], e) : void 0 === t ? this : this.each(function() {
                var n = ie.queue(this, e, t);
                ie._queueHooks(this, e), "fx" === e && "inprogress" !== n[0] && ie.dequeue(this, e)
            })
        },
        dequeue: function(e) {
            return this.each(function() {
                ie.dequeue(this, e)
            })
        },
        clearQueue: function(e) {
            return this.queue(e || "fx", [])
        },
        promise: function(e, t) {
            var n, r = 1,
                i = ie.Deferred(),
                o = this,
                a = this.length,
                s = function() {
                    --r || i.resolveWith(o, [o])
                };
            for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; a--;) n = ie._data(o[a], e + "queueHooks"), n && n.empty && (r++, n.empty.add(s));
            return s(), i.promise(t)
        }
    });
    var ke = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        Se = ["Top", "Right", "Bottom", "Left"],
        Ae = function(e, t) {
            return e = t || e, "none" === ie.css(e, "display") || !ie.contains(e.ownerDocument, e)
        },
        De = ie.access = function(e, t, n, r, i, o, a) {
            var s = 0,
                l = e.length,
                u = null == n;
            if ("object" === ie.type(n)) {
                i = !0;
                for (s in n) ie.access(e, t, s, n[s], !0, o, a)
            } else if (void 0 !== r && (i = !0, ie.isFunction(r) || (a = !0), u && (a ? (t.call(e, r), t = null) : (u = t, t = function(e, t, n) {
                    return u.call(ie(e), n)
                })), t))
                for (; l > s; s++) t(e[s], n, a ? r : r.call(e[s], s, t(e[s], n)));
            return i ? e : u ? t.call(e) : l ? t(e[0], n) : o
        },
        je = /^(?:checkbox|radio)$/i;
    ! function() {
        var e = he.createElement("input"),
            t = he.createElement("div"),
            n = he.createDocumentFragment();
        if (t.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", ne.leadingWhitespace = 3 === t.firstChild.nodeType, ne.tbody = !t.getElementsByTagName("tbody").length, ne.htmlSerialize = !!t.getElementsByTagName("link").length, ne.html5Clone = "<:nav></:nav>" !== he.createElement("nav").cloneNode(!0).outerHTML, e.type = "checkbox", e.checked = !0, n.appendChild(e), ne.appendChecked = e.checked, t.innerHTML = "<textarea>x</textarea>", ne.noCloneChecked = !!t.cloneNode(!0).lastChild.defaultValue, n.appendChild(t), t.innerHTML = "<input type='radio' checked='checked' name='t'/>", ne.checkClone = t.cloneNode(!0).cloneNode(!0).lastChild.checked, ne.noCloneEvent = !0, t.attachEvent && (t.attachEvent("onclick", function() {
                ne.noCloneEvent = !1
            }), t.cloneNode(!0).click()), null == ne.deleteExpando) {
            ne.deleteExpando = !0;
            try {
                delete t.test
            } catch (r) {
                ne.deleteExpando = !1
            }
        }
    }(),
    function() {
        var t, n, r = he.createElement("div");
        for (t in {
                submit: !0,
                change: !0,
                focusin: !0
            }) n = "on" + t, (ne[t + "Bubbles"] = n in e) || (r.setAttribute(n, "t"), ne[t + "Bubbles"] = r.attributes[n].expando === !1);
        r = null
    }();
    var Le = /^(?:input|select|textarea)$/i,
        He = /^key/,
        _e = /^(?:mouse|pointer|contextmenu)|click/,
        qe = /^(?:focusinfocus|focusoutblur)$/,
        Me = /^([^.]*)(?:\.(.+)|)$/;
    ie.event = {
        global: {},
        add: function(e, t, n, r, i) {
            var o, a, s, l, u, c, d, f, p, h, m, g = ie._data(e);
            if (g) {
                for (n.handler && (l = n, n = l.handler, i = l.selector), n.guid || (n.guid = ie.guid++), (a = g.events) || (a = g.events = {}), (c = g.handle) || (c = g.handle = function(e) {
                        return typeof ie === Ce || e && ie.event.triggered === e.type ? void 0 : ie.event.dispatch.apply(c.elem, arguments)
                    }, c.elem = e), t = (t || "").match(be) || [""], s = t.length; s--;) o = Me.exec(t[s]) || [], p = m = o[1], h = (o[2] || "").split(".").sort(), p && (u = ie.event.special[p] || {}, p = (i ? u.delegateType : u.bindType) || p, u = ie.event.special[p] || {}, d = ie.extend({
                    type: p,
                    origType: m,
                    data: r,
                    handler: n,
                    guid: n.guid,
                    selector: i,
                    needsContext: i && ie.expr.match.needsContext.test(i),
                    namespace: h.join(".")
                }, l), (f = a[p]) || (f = a[p] = [], f.delegateCount = 0, u.setup && u.setup.call(e, r, h, c) !== !1 || (e.addEventListener ? e.addEventListener(p, c, !1) : e.attachEvent && e.attachEvent("on" + p, c))), u.add && (u.add.call(e, d), d.handler.guid || (d.handler.guid = n.guid)), i ? f.splice(f.delegateCount++, 0, d) : f.push(d), ie.event.global[p] = !0);
                e = null
            }
        },
        remove: function(e, t, n, r, i) {
            var o, a, s, l, u, c, d, f, p, h, m, g = ie.hasData(e) && ie._data(e);
            if (g && (c = g.events)) {
                for (t = (t || "").match(be) || [""], u = t.length; u--;)
                    if (s = Me.exec(t[u]) || [], p = m = s[1], h = (s[2] || "").split(".").sort(), p) {
                        for (d = ie.event.special[p] || {}, p = (r ? d.delegateType : d.bindType) || p, f = c[p] || [], s = s[2] && new RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)"), l = o = f.length; o--;) a = f[o], !i && m !== a.origType || n && n.guid !== a.guid || s && !s.test(a.namespace) || r && r !== a.selector && ("**" !== r || !a.selector) || (f.splice(o, 1), a.selector && f.delegateCount--, d.remove && d.remove.call(e, a));
                        l && !f.length && (d.teardown && d.teardown.call(e, h, g.handle) !== !1 || ie.removeEvent(e, p, g.handle), delete c[p])
                    } else
                        for (p in c) ie.event.remove(e, p + t[u], n, r, !0);
                ie.isEmptyObject(c) && (delete g.handle, ie._removeData(e, "events"))
            }
        },
        trigger: function(t, n, r, i) {
            var o, a, s, l, u, c, d, f = [r || he],
                p = te.call(t, "type") ? t.type : t,
                h = te.call(t, "namespace") ? t.namespace.split(".") : [];
            if (s = c = r = r || he, 3 !== r.nodeType && 8 !== r.nodeType && !qe.test(p + ie.event.triggered) && (p.indexOf(".") >= 0 && (h = p.split("."), p = h.shift(), h.sort()), a = p.indexOf(":") < 0 && "on" + p, t = t[ie.expando] ? t : new ie.Event(p, "object" == typeof t && t), t.isTrigger = i ? 2 : 3, t.namespace = h.join("."), t.namespace_re = t.namespace ? new RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, t.result = void 0, t.target || (t.target = r), n = null == n ? [t] : ie.makeArray(n, [t]), u = ie.event.special[p] || {}, i || !u.trigger || u.trigger.apply(r, n) !== !1)) {
                if (!i && !u.noBubble && !ie.isWindow(r)) {
                    for (l = u.delegateType || p, qe.test(l + p) || (s = s.parentNode); s; s = s.parentNode) f.push(s), c = s;
                    c === (r.ownerDocument || he) && f.push(c.defaultView || c.parentWindow || e)
                }
                for (d = 0;
                    (s = f[d++]) && !t.isPropagationStopped();) t.type = d > 1 ? l : u.bindType || p, o = (ie._data(s, "events") || {})[t.type] && ie._data(s, "handle"), o && o.apply(s, n), o = a && s[a], o && o.apply && ie.acceptData(s) && (t.result = o.apply(s, n), t.result === !1 && t.preventDefault());
                if (t.type = p, !i && !t.isDefaultPrevented() && (!u._default || u._default.apply(f.pop(), n) === !1) && ie.acceptData(r) && a && r[p] && !ie.isWindow(r)) {
                    c = r[a], c && (r[a] = null), ie.event.triggered = p;
                    try {
                        r[p]()
                    } catch (m) {}
                    ie.event.triggered = void 0, c && (r[a] = c)
                }
                return t.result
            }
        },
        dispatch: function(e) {
            e = ie.event.fix(e);
            var t, n, r, i, o, a = [],
                s = Y.call(arguments),
                l = (ie._data(this, "events") || {})[e.type] || [],
                u = ie.event.special[e.type] || {};
            if (s[0] = e, e.delegateTarget = this, !u.preDispatch || u.preDispatch.call(this, e) !== !1) {
                for (a = ie.event.handlers.call(this, e, l), t = 0;
                    (i = a[t++]) && !e.isPropagationStopped();)
                    for (e.currentTarget = i.elem, o = 0;
                        (r = i.handlers[o++]) && !e.isImmediatePropagationStopped();)(!e.namespace_re || e.namespace_re.test(r.namespace)) && (e.handleObj = r, e.data = r.data, n = ((ie.event.special[r.origType] || {}).handle || r.handler).apply(i.elem, s), void 0 !== n && (e.result = n) === !1 && (e.preventDefault(), e.stopPropagation()));
                return u.postDispatch && u.postDispatch.call(this, e), e.result
            }
        },
        handlers: function(e, t) {
            var n, r, i, o, a = [],
                s = t.delegateCount,
                l = e.target;
            if (s && l.nodeType && (!e.button || "click" !== e.type))
                for (; l != this; l = l.parentNode || this)
                    if (1 === l.nodeType && (l.disabled !== !0 || "click" !== e.type)) {
                        for (i = [], o = 0; s > o; o++) r = t[o], n = r.selector + " ", void 0 === i[n] && (i[n] = r.needsContext ? ie(n, this).index(l) >= 0 : ie.find(n, this, null, [l]).length), i[n] && i.push(r);
                        i.length && a.push({
                            elem: l,
                            handlers: i
                        })
                    }
            return s < t.length && a.push({
                elem: this,
                handlers: t.slice(s)
            }), a
        },
        fix: function(e) {
            if (e[ie.expando]) return e;
            var t, n, r, i = e.type,
                o = e,
                a = this.fixHooks[i];
            for (a || (this.fixHooks[i] = a = _e.test(i) ? this.mouseHooks : He.test(i) ? this.keyHooks : {}), r = a.props ? this.props.concat(a.props) : this.props, e = new ie.Event(o), t = r.length; t--;) n = r[t], e[n] = o[n];
            return e.target || (e.target = o.srcElement || he), 3 === e.target.nodeType && (e.target = e.target.parentNode), e.metaKey = !!e.metaKey, a.filter ? a.filter(e, o) : e
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(e, t) {
                return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(e, t) {
                var n, r, i, o = t.button,
                    a = t.fromElement;
                return null == e.pageX && null != t.clientX && (r = e.target.ownerDocument || he, i = r.documentElement, n = r.body, e.pageX = t.clientX + (i && i.scrollLeft || n && n.scrollLeft || 0) - (i && i.clientLeft || n && n.clientLeft || 0), e.pageY = t.clientY + (i && i.scrollTop || n && n.scrollTop || 0) - (i && i.clientTop || n && n.clientTop || 0)), !e.relatedTarget && a && (e.relatedTarget = a === e.target ? t.toElement : a), e.which || void 0 === o || (e.which = 1 & o ? 1 : 2 & o ? 3 : 4 & o ? 2 : 0), e
            }
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    if (this !== h() && this.focus) try {
                        return this.focus(), !1
                    } catch (e) {}
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    return this === h() && this.blur ? (this.blur(), !1) : void 0
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    return ie.nodeName(this, "input") && "checkbox" === this.type && this.click ? (this.click(), !1) : void 0
                },
                _default: function(e) {
                    return ie.nodeName(e.target, "a")
                }
            },
            beforeunload: {
                postDispatch: function(e) {
                    void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                }
            }
        },
        simulate: function(e, t, n, r) {
            var i = ie.extend(new ie.Event, n, {
                type: e,
                isSimulated: !0,
                originalEvent: {}
            });
            r ? ie.event.trigger(i, null, t) : ie.event.dispatch.call(t, i), i.isDefaultPrevented() && n.preventDefault()
        }
    }, ie.removeEvent = he.removeEventListener ? function(e, t, n) {
        e.removeEventListener && e.removeEventListener(t, n, !1)
    } : function(e, t, n) {
        var r = "on" + t;
        e.detachEvent && (typeof e[r] === Ce && (e[r] = null), e.detachEvent(r, n))
    }, ie.Event = function(e, t) {
        return this instanceof ie.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && e.returnValue === !1 ? f : p) : this.type = e, t && ie.extend(this, t), this.timeStamp = e && e.timeStamp || ie.now(), void(this[ie.expando] = !0)) : new ie.Event(e, t)
    }, ie.Event.prototype = {
        isDefaultPrevented: p,
        isPropagationStopped: p,
        isImmediatePropagationStopped: p,
        preventDefault: function() {
            var e = this.originalEvent;
            this.isDefaultPrevented = f, e && (e.preventDefault ? e.preventDefault() : e.returnValue = !1)
        },
        stopPropagation: function() {
            var e = this.originalEvent;
            this.isPropagationStopped = f, e && (e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0)
        },
        stopImmediatePropagation: function() {
            var e = this.originalEvent;
            this.isImmediatePropagationStopped = f, e && e.stopImmediatePropagation && e.stopImmediatePropagation(), this.stopPropagation()
        }
    }, ie.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function(e, t) {
        ie.event.special[e] = {
            delegateType: t,
            bindType: t,
            handle: function(e) {
                var n, r = this,
                    i = e.relatedTarget,
                    o = e.handleObj;
                return (!i || i !== r && !ie.contains(r, i)) && (e.type = o.origType, n = o.handler.apply(this, arguments), e.type = t), n
            }
        }
    }), ne.submitBubbles || (ie.event.special.submit = {
        setup: function() {
            return ie.nodeName(this, "form") ? !1 : void ie.event.add(this, "click._submit keypress._submit", function(e) {
                var t = e.target,
                    n = ie.nodeName(t, "input") || ie.nodeName(t, "button") ? t.form : void 0;
                n && !ie._data(n, "submitBubbles") && (ie.event.add(n, "submit._submit", function(e) {
                    e._submit_bubble = !0
                }), ie._data(n, "submitBubbles", !0))
            })
        },
        postDispatch: function(e) {
            e._submit_bubble && (delete e._submit_bubble, this.parentNode && !e.isTrigger && ie.event.simulate("submit", this.parentNode, e, !0))
        },
        teardown: function() {
            return ie.nodeName(this, "form") ? !1 : void ie.event.remove(this, "._submit")
        }
    }), ne.changeBubbles || (ie.event.special.change = {
        setup: function() {
            return Le.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && (ie.event.add(this, "propertychange._change", function(e) {
                "checked" === e.originalEvent.propertyName && (this._just_changed = !0)
            }), ie.event.add(this, "click._change", function(e) {
                this._just_changed && !e.isTrigger && (this._just_changed = !1), ie.event.simulate("change", this, e, !0)
            })), !1) : void ie.event.add(this, "beforeactivate._change", function(e) {
                var t = e.target;
                Le.test(t.nodeName) && !ie._data(t, "changeBubbles") && (ie.event.add(t, "change._change", function(e) {
                    !this.parentNode || e.isSimulated || e.isTrigger || ie.event.simulate("change", this.parentNode, e, !0)
                }), ie._data(t, "changeBubbles", !0))
            })
        },
        handle: function(e) {
            var t = e.target;
            return this !== t || e.isSimulated || e.isTrigger || "radio" !== t.type && "checkbox" !== t.type ? e.handleObj.handler.apply(this, arguments) : void 0
        },
        teardown: function() {
            return ie.event.remove(this, "._change"), !Le.test(this.nodeName)
        }
    }), ne.focusinBubbles || ie.each({
        focus: "focusin",
        blur: "focusout"
    }, function(e, t) {
        var n = function(e) {
            ie.event.simulate(t, e.target, ie.event.fix(e), !0)
        };
        ie.event.special[t] = {
            setup: function() {
                var r = this.ownerDocument || this,
                    i = ie._data(r, t);
                i || r.addEventListener(e, n, !0), ie._data(r, t, (i || 0) + 1)
            },
            teardown: function() {
                var r = this.ownerDocument || this,
                    i = ie._data(r, t) - 1;
                i ? ie._data(r, t, i) : (r.removeEventListener(e, n, !0), ie._removeData(r, t))
            }
        }
    }), ie.fn.extend({
        on: function(e, t, n, r, i) {
            var o, a;
            if ("object" == typeof e) {
                "string" != typeof t && (n = n || t, t = void 0);
                for (o in e) this.on(o, t, n, e[o], i);
                return this
            }
            if (null == n && null == r ? (r = t, n = t = void 0) : null == r && ("string" == typeof t ? (r = n, n = void 0) : (r = n, n = t, t = void 0)), r === !1) r = p;
            else if (!r) return this;
            return 1 === i && (a = r, r = function(e) {
                return ie().off(e), a.apply(this, arguments)
            }, r.guid = a.guid || (a.guid = ie.guid++)), this.each(function() {
                ie.event.add(this, e, r, n, t)
            })
        },
        one: function(e, t, n, r) {
            return this.on(e, t, n, r, 1)
        },
        off: function(e, t, n) {
            var r, i;
            if (e && e.preventDefault && e.handleObj) return r = e.handleObj, ie(e.delegateTarget).off(r.namespace ? r.origType + "." + r.namespace : r.origType, r.selector, r.handler), this;
            if ("object" == typeof e) {
                for (i in e) this.off(i, t, e[i]);
                return this
            }
            return (t === !1 || "function" == typeof t) && (n = t, t = void 0), n === !1 && (n = p), this.each(function() {
                ie.event.remove(this, e, n, t)
            })
        },
        trigger: function(e, t) {
            return this.each(function() {
                ie.event.trigger(e, t, this)
            })
        },
        triggerHandler: function(e, t) {
            var n = this[0];
            return n ? ie.event.trigger(e, t, n, !0) : void 0
        }
    });
    var Oe = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
        Fe = / jQuery\d+="(?:null|\d+)"/g,
        Be = new RegExp("<(?:" + Oe + ")[\\s/>]", "i"),
        Pe = /^\s+/,
        Re = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
        We = /<([\w:]+)/,
        $e = /<tbody/i,
        ze = /<|&#?\w+;/,
        Ie = /<(?:script|style|link)/i,
        Xe = /checked\s*(?:[^=]|=\s*.checked.)/i,
        Ue = /^$|\/(?:java|ecma)script/i,
        Ve = /^true\/(.*)/,
        Je = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
        Ye = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            legend: [1, "<fieldset>", "</fieldset>"],
            area: [1, "<map>", "</map>"],
            param: [1, "<object>", "</object>"],
            thead: [1, "<table>", "</table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: ne.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"]
        },
        Ge = m(he),
        Qe = Ge.appendChild(he.createElement("div"));
    Ye.optgroup = Ye.option, Ye.tbody = Ye.tfoot = Ye.colgroup = Ye.caption = Ye.thead, Ye.th = Ye.td, ie.extend({
        clone: function(e, t, n) {
            var r, i, o, a, s, l = ie.contains(e.ownerDocument, e);
            if (ne.html5Clone || ie.isXMLDoc(e) || !Be.test("<" + e.nodeName + ">") ? o = e.cloneNode(!0) : (Qe.innerHTML = e.outerHTML, Qe.removeChild(o = Qe.firstChild)), !(ne.noCloneEvent && ne.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || ie.isXMLDoc(e)))
                for (r = g(o), s = g(e), a = 0; null != (i = s[a]); ++a) r[a] && C(i, r[a]);
            if (t)
                if (n)
                    for (s = s || g(e), r = r || g(o), a = 0; null != (i = s[a]); a++) T(i, r[a]);
                else T(e, o);
            return r = g(o, "script"), r.length > 0 && w(r, !l && g(e, "script")), r = s = i = null, o
        },
        buildFragment: function(e, t, n, r) {
            for (var i, o, a, s, l, u, c, d = e.length, f = m(t), p = [], h = 0; d > h; h++)
                if (o = e[h], o || 0 === o)
                    if ("object" === ie.type(o)) ie.merge(p, o.nodeType ? [o] : o);
                    else if (ze.test(o)) {
                for (s = s || f.appendChild(t.createElement("div")), l = (We.exec(o) || ["", ""])[1].toLowerCase(), c = Ye[l] || Ye._default, s.innerHTML = c[1] + o.replace(Re, "<$1></$2>") + c[2], i = c[0]; i--;) s = s.lastChild;
                if (!ne.leadingWhitespace && Pe.test(o) && p.push(t.createTextNode(Pe.exec(o)[0])), !ne.tbody)
                    for (o = "table" !== l || $e.test(o) ? "<table>" !== c[1] || $e.test(o) ? 0 : s : s.firstChild, i = o && o.childNodes.length; i--;) ie.nodeName(u = o.childNodes[i], "tbody") && !u.childNodes.length && o.removeChild(u);
                for (ie.merge(p, s.childNodes), s.textContent = ""; s.firstChild;) s.removeChild(s.firstChild);
                s = f.lastChild
            } else p.push(t.createTextNode(o));
            for (s && f.removeChild(s), ne.appendChecked || ie.grep(g(p, "input"), v), h = 0; o = p[h++];)
                if ((!r || -1 === ie.inArray(o, r)) && (a = ie.contains(o.ownerDocument, o), s = g(f.appendChild(o), "script"), a && w(s), n))
                    for (i = 0; o = s[i++];) Ue.test(o.type || "") && n.push(o);
            return s = null, f
        },
        cleanData: function(e, t) {
            for (var n, r, i, o, a = 0, s = ie.expando, l = ie.cache, u = ne.deleteExpando, c = ie.event.special; null != (n = e[a]); a++)
                if ((t || ie.acceptData(n)) && (i = n[s], o = i && l[i])) {
                    if (o.events)
                        for (r in o.events) c[r] ? ie.event.remove(n, r) : ie.removeEvent(n, r, o.handle);
                    l[i] && (delete l[i], u ? delete n[s] : typeof n.removeAttribute !== Ce ? n.removeAttribute(s) : n[s] = null, J.push(i))
                }
        }
    }), ie.fn.extend({
        text: function(e) {
            return De(this, function(e) {
                return void 0 === e ? ie.text(this) : this.empty().append((this[0] && this[0].ownerDocument || he).createTextNode(e))
            }, null, e, arguments.length)
        },
        append: function() {
            return this.domManip(arguments, function(e) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = y(this, e);
                    t.appendChild(e)
                }
            })
        },
        prepend: function() {
            return this.domManip(arguments, function(e) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = y(this, e);
                    t.insertBefore(e, t.firstChild)
                }
            })
        },
        before: function() {
            return this.domManip(arguments, function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this)
            })
        },
        after: function() {
            return this.domManip(arguments, function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
            })
        },
        remove: function(e, t) {
            for (var n, r = e ? ie.filter(e, this) : this, i = 0; null != (n = r[i]); i++) t || 1 !== n.nodeType || ie.cleanData(g(n)), n.parentNode && (t && ie.contains(n.ownerDocument, n) && w(g(n, "script")), n.parentNode.removeChild(n));
            return this
        },
        empty: function() {
            for (var e, t = 0; null != (e = this[t]); t++) {
                for (1 === e.nodeType && ie.cleanData(g(e, !1)); e.firstChild;) e.removeChild(e.firstChild);
                e.options && ie.nodeName(e, "select") && (e.options.length = 0)
            }
            return this
        },
        clone: function(e, t) {
            return e = null == e ? !1 : e, t = null == t ? e : t, this.map(function() {
                return ie.clone(this, e, t)
            })
        },
        html: function(e) {
            return De(this, function(e) {
                var t = this[0] || {},
                    n = 0,
                    r = this.length;
                if (void 0 === e) return 1 === t.nodeType ? t.innerHTML.replace(Fe, "") : void 0;
                if (!("string" != typeof e || Ie.test(e) || !ne.htmlSerialize && Be.test(e) || !ne.leadingWhitespace && Pe.test(e) || Ye[(We.exec(e) || ["", ""])[1].toLowerCase()])) {
                    e = e.replace(Re, "<$1></$2>");
                    try {
                        for (; r > n; n++) t = this[n] || {}, 1 === t.nodeType && (ie.cleanData(g(t, !1)), t.innerHTML = e);
                        t = 0
                    } catch (i) {}
                }
                t && this.empty().append(e)
            }, null, e, arguments.length)
        },
        replaceWith: function() {
            var e = arguments[0];
            return this.domManip(arguments, function(t) {
                e = this.parentNode, ie.cleanData(g(this)), e && e.replaceChild(t, this)
            }), e && (e.length || e.nodeType) ? this : this.remove()
        },
        detach: function(e) {
            return this.remove(e, !0)
        },
        domManip: function(e, t) {
            e = G.apply([], e);
            var n, r, i, o, a, s, l = 0,
                u = this.length,
                c = this,
                d = u - 1,
                f = e[0],
                p = ie.isFunction(f);
            if (p || u > 1 && "string" == typeof f && !ne.checkClone && Xe.test(f)) return this.each(function(n) {
                var r = c.eq(n);
                p && (e[0] = f.call(this, n, r.html())), r.domManip(e, t)
            });
            if (u && (s = ie.buildFragment(e, this[0].ownerDocument, !1, this), n = s.firstChild, 1 === s.childNodes.length && (s = n), n)) {
                for (o = ie.map(g(s, "script"), b), i = o.length; u > l; l++) r = s, l !== d && (r = ie.clone(r, !0, !0), i && ie.merge(o, g(r, "script"))), t.call(this[l], r, l);
                if (i)
                    for (a = o[o.length - 1].ownerDocument, ie.map(o, x), l = 0; i > l; l++) r = o[l], Ue.test(r.type || "") && !ie._data(r, "globalEval") && ie.contains(a, r) && (r.src ? ie._evalUrl && ie._evalUrl(r.src) : ie.globalEval((r.text || r.textContent || r.innerHTML || "").replace(Je, "")));
                s = n = null
            }
            return this
        }
    }), ie.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(e, t) {
        ie.fn[e] = function(e) {
            for (var n, r = 0, i = [], o = ie(e), a = o.length - 1; a >= r; r++) n = r === a ? this : this.clone(!0), ie(o[r])[t](n), Q.apply(i, n.get());
            return this.pushStack(i)
        }
    });
    var Ke, Ze = {};
    ! function() {
        var e;
        ne.shrinkWrapBlocks = function() {
            if (null != e) return e;
            e = !1;
            var t, n, r;
            return n = he.getElementsByTagName("body")[0], n && n.style ? (t = he.createElement("div"), r = he.createElement("div"), r.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", n.appendChild(r).appendChild(t), typeof t.style.zoom !== Ce && (t.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1", t.appendChild(he.createElement("div")).style.width = "5px", e = 3 !== t.offsetWidth), n.removeChild(r), e) : void 0
        }
    }();
    var et, tt, nt = /^margin/,
        rt = new RegExp("^(" + ke + ")(?!px)[a-z%]+$", "i"),
        it = /^(top|right|bottom|left)$/;
    e.getComputedStyle ? (et = function(e) {
        return e.ownerDocument.defaultView.getComputedStyle(e, null)
    }, tt = function(e, t, n) {
        var r, i, o, a, s = e.style;
        return n = n || et(e), a = n ? n.getPropertyValue(t) || n[t] : void 0, n && ("" !== a || ie.contains(e.ownerDocument, e) || (a = ie.style(e, t)), rt.test(a) && nt.test(t) && (r = s.width, i = s.minWidth, o = s.maxWidth, s.minWidth = s.maxWidth = s.width = a, a = n.width, s.width = r, s.minWidth = i, s.maxWidth = o)),
            void 0 === a ? a : a + ""
    }) : he.documentElement.currentStyle && (et = function(e) {
        return e.currentStyle
    }, tt = function(e, t, n) {
        var r, i, o, a, s = e.style;
        return n = n || et(e), a = n ? n[t] : void 0, null == a && s && s[t] && (a = s[t]), rt.test(a) && !it.test(t) && (r = s.left, i = e.runtimeStyle, o = i && i.left, o && (i.left = e.currentStyle.left), s.left = "fontSize" === t ? "1em" : a, a = s.pixelLeft + "px", s.left = r, o && (i.left = o)), void 0 === a ? a : a + "" || "auto"
    }), ! function() {
        function t() {
            var t, n, r, i;
            n = he.getElementsByTagName("body")[0], n && n.style && (t = he.createElement("div"), r = he.createElement("div"), r.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px", n.appendChild(r).appendChild(t), t.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", o = a = !1, l = !0, e.getComputedStyle && (o = "1%" !== (e.getComputedStyle(t, null) || {}).top, a = "4px" === (e.getComputedStyle(t, null) || {
                width: "4px"
            }).width, i = t.appendChild(he.createElement("div")), i.style.cssText = t.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", i.style.marginRight = i.style.width = "0", t.style.width = "1px", l = !parseFloat((e.getComputedStyle(i, null) || {}).marginRight)), t.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", i = t.getElementsByTagName("td"), i[0].style.cssText = "margin:0;border:0;padding:0;display:none", s = 0 === i[0].offsetHeight, s && (i[0].style.display = "", i[1].style.display = "none", s = 0 === i[0].offsetHeight), n.removeChild(r))
        }
        var n, r, i, o, a, s, l;
        n = he.createElement("div"), n.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", i = n.getElementsByTagName("a")[0], (r = i && i.style) && (r.cssText = "float:left;opacity:.5", ne.opacity = "0.5" === r.opacity, ne.cssFloat = !!r.cssFloat, n.style.backgroundClip = "content-box", n.cloneNode(!0).style.backgroundClip = "", ne.clearCloneStyle = "content-box" === n.style.backgroundClip, ne.boxSizing = "" === r.boxSizing || "" === r.MozBoxSizing || "" === r.WebkitBoxSizing, ie.extend(ne, {
            reliableHiddenOffsets: function() {
                return null == s && t(), s
            },
            boxSizingReliable: function() {
                return null == a && t(), a
            },
            pixelPosition: function() {
                return null == o && t(), o
            },
            reliableMarginRight: function() {
                return null == l && t(), l
            }
        }))
    }(), ie.swap = function(e, t, n, r) {
        var i, o, a = {};
        for (o in t) a[o] = e.style[o], e.style[o] = t[o];
        i = n.apply(e, r || []);
        for (o in t) e.style[o] = a[o];
        return i
    };
    var ot = /alpha\([^)]*\)/i,
        at = /opacity\s*=\s*([^)]*)/,
        st = /^(none|table(?!-c[ea]).+)/,
        lt = new RegExp("^(" + ke + ")(.*)$", "i"),
        ut = new RegExp("^([+-])=(" + ke + ")", "i"),
        ct = {
            position: "absolute",
            visibility: "hidden",
            display: "block"
        },
        dt = {
            letterSpacing: "0",
            fontWeight: "400"
        },
        ft = ["Webkit", "O", "Moz", "ms"];
    ie.extend({
        cssHooks: {
            opacity: {
                get: function(e, t) {
                    if (t) {
                        var n = tt(e, "opacity");
                        return "" === n ? "1" : n
                    }
                }
            }
        },
        cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": ne.cssFloat ? "cssFloat" : "styleFloat"
        },
        style: function(e, t, n, r) {
            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                var i, o, a, s = ie.camelCase(t),
                    l = e.style;
                if (t = ie.cssProps[s] || (ie.cssProps[s] = S(l, s)), a = ie.cssHooks[t] || ie.cssHooks[s], void 0 === n) return a && "get" in a && void 0 !== (i = a.get(e, !1, r)) ? i : l[t];
                if (o = typeof n, "string" === o && (i = ut.exec(n)) && (n = (i[1] + 1) * i[2] + parseFloat(ie.css(e, t)), o = "number"), null != n && n === n && ("number" !== o || ie.cssNumber[s] || (n += "px"), ne.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (l[t] = "inherit"), !(a && "set" in a && void 0 === (n = a.set(e, n, r))))) try {
                    l[t] = n
                } catch (u) {}
            }
        },
        css: function(e, t, n, r) {
            var i, o, a, s = ie.camelCase(t);
            return t = ie.cssProps[s] || (ie.cssProps[s] = S(e.style, s)), a = ie.cssHooks[t] || ie.cssHooks[s], a && "get" in a && (o = a.get(e, !0, n)), void 0 === o && (o = tt(e, t, r)), "normal" === o && t in dt && (o = dt[t]), "" === n || n ? (i = parseFloat(o), n === !0 || ie.isNumeric(i) ? i || 0 : o) : o
        }
    }), ie.each(["height", "width"], function(e, t) {
        ie.cssHooks[t] = {
            get: function(e, n, r) {
                return n ? st.test(ie.css(e, "display")) && 0 === e.offsetWidth ? ie.swap(e, ct, function() {
                    return L(e, t, r)
                }) : L(e, t, r) : void 0
            },
            set: function(e, n, r) {
                var i = r && et(e);
                return D(e, n, r ? j(e, t, r, ne.boxSizing && "border-box" === ie.css(e, "boxSizing", !1, i), i) : 0)
            }
        }
    }), ne.opacity || (ie.cssHooks.opacity = {
        get: function(e, t) {
            return at.test((t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : t ? "1" : ""
        },
        set: function(e, t) {
            var n = e.style,
                r = e.currentStyle,
                i = ie.isNumeric(t) ? "alpha(opacity=" + 100 * t + ")" : "",
                o = r && r.filter || n.filter || "";
            n.zoom = 1, (t >= 1 || "" === t) && "" === ie.trim(o.replace(ot, "")) && n.removeAttribute && (n.removeAttribute("filter"), "" === t || r && !r.filter) || (n.filter = ot.test(o) ? o.replace(ot, i) : o + " " + i)
        }
    }), ie.cssHooks.marginRight = k(ne.reliableMarginRight, function(e, t) {
        return t ? ie.swap(e, {
            display: "inline-block"
        }, tt, [e, "marginRight"]) : void 0
    }), ie.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(e, t) {
        ie.cssHooks[e + t] = {
            expand: function(n) {
                for (var r = 0, i = {}, o = "string" == typeof n ? n.split(" ") : [n]; 4 > r; r++) i[e + Se[r] + t] = o[r] || o[r - 2] || o[0];
                return i
            }
        }, nt.test(e) || (ie.cssHooks[e + t].set = D)
    }), ie.fn.extend({
        css: function(e, t) {
            return De(this, function(e, t, n) {
                var r, i, o = {},
                    a = 0;
                if (ie.isArray(t)) {
                    for (r = et(e), i = t.length; i > a; a++) o[t[a]] = ie.css(e, t[a], !1, r);
                    return o
                }
                return void 0 !== n ? ie.style(e, t, n) : ie.css(e, t)
            }, e, t, arguments.length > 1)
        },
        show: function() {
            return A(this, !0)
        },
        hide: function() {
            return A(this)
        },
        toggle: function(e) {
            return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function() {
                Ae(this) ? ie(this).show() : ie(this).hide()
            })
        }
    }), ie.Tween = H, H.prototype = {
        constructor: H,
        init: function(e, t, n, r, i, o) {
            this.elem = e, this.prop = n, this.easing = i || "swing", this.options = t, this.start = this.now = this.cur(), this.end = r, this.unit = o || (ie.cssNumber[n] ? "" : "px")
        },
        cur: function() {
            var e = H.propHooks[this.prop];
            return e && e.get ? e.get(this) : H.propHooks._default.get(this)
        },
        run: function(e) {
            var t, n = H.propHooks[this.prop];
            return this.pos = t = this.options.duration ? ie.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : H.propHooks._default.set(this), this
        }
    }, H.prototype.init.prototype = H.prototype, H.propHooks = {
        _default: {
            get: function(e) {
                var t;
                return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = ie.css(e.elem, e.prop, ""), t && "auto" !== t ? t : 0) : e.elem[e.prop]
            },
            set: function(e) {
                ie.fx.step[e.prop] ? ie.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[ie.cssProps[e.prop]] || ie.cssHooks[e.prop]) ? ie.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now
            }
        }
    }, H.propHooks.scrollTop = H.propHooks.scrollLeft = {
        set: function(e) {
            e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
        }
    }, ie.easing = {
        linear: function(e) {
            return e
        },
        swing: function(e) {
            return .5 - Math.cos(e * Math.PI) / 2
        }
    }, ie.fx = H.prototype.init, ie.fx.step = {};
    var pt, ht, mt = /^(?:toggle|show|hide)$/,
        gt = new RegExp("^(?:([+-])=|)(" + ke + ")([a-z%]*)$", "i"),
        vt = /queueHooks$/,
        yt = [O],
        bt = {
            "*": [function(e, t) {
                var n = this.createTween(e, t),
                    r = n.cur(),
                    i = gt.exec(t),
                    o = i && i[3] || (ie.cssNumber[e] ? "" : "px"),
                    a = (ie.cssNumber[e] || "px" !== o && +r) && gt.exec(ie.css(n.elem, e)),
                    s = 1,
                    l = 20;
                if (a && a[3] !== o) {
                    o = o || a[3], i = i || [], a = +r || 1;
                    do s = s || ".5", a /= s, ie.style(n.elem, e, a + o); while (s !== (s = n.cur() / r) && 1 !== s && --l)
                }
                return i && (a = n.start = +a || +r || 0, n.unit = o, n.end = i[1] ? a + (i[1] + 1) * i[2] : +i[2]), n
            }]
        };
    ie.Animation = ie.extend(B, {
            tweener: function(e, t) {
                ie.isFunction(e) ? (t = e, e = ["*"]) : e = e.split(" ");
                for (var n, r = 0, i = e.length; i > r; r++) n = e[r], bt[n] = bt[n] || [], bt[n].unshift(t)
            },
            prefilter: function(e, t) {
                t ? yt.unshift(e) : yt.push(e)
            }
        }), ie.speed = function(e, t, n) {
            var r = e && "object" == typeof e ? ie.extend({}, e) : {
                complete: n || !n && t || ie.isFunction(e) && e,
                duration: e,
                easing: n && t || t && !ie.isFunction(t) && t
            };
            return r.duration = ie.fx.off ? 0 : "number" == typeof r.duration ? r.duration : r.duration in ie.fx.speeds ? ie.fx.speeds[r.duration] : ie.fx.speeds._default, (null == r.queue || r.queue === !0) && (r.queue = "fx"), r.old = r.complete, r.complete = function() {
                ie.isFunction(r.old) && r.old.call(this), r.queue && ie.dequeue(this, r.queue)
            }, r
        }, ie.fn.extend({
            fadeTo: function(e, t, n, r) {
                return this.filter(Ae).css("opacity", 0).show().end().animate({
                    opacity: t
                }, e, n, r)
            },
            animate: function(e, t, n, r) {
                var i = ie.isEmptyObject(e),
                    o = ie.speed(t, n, r),
                    a = function() {
                        var t = B(this, ie.extend({}, e), o);
                        (i || ie._data(this, "finish")) && t.stop(!0)
                    };
                return a.finish = a, i || o.queue === !1 ? this.each(a) : this.queue(o.queue, a)
            },
            stop: function(e, t, n) {
                var r = function(e) {
                    var t = e.stop;
                    delete e.stop, t(n)
                };
                return "string" != typeof e && (n = t, t = e, e = void 0), t && e !== !1 && this.queue(e || "fx", []), this.each(function() {
                    var t = !0,
                        i = null != e && e + "queueHooks",
                        o = ie.timers,
                        a = ie._data(this);
                    if (i) a[i] && a[i].stop && r(a[i]);
                    else
                        for (i in a) a[i] && a[i].stop && vt.test(i) && r(a[i]);
                    for (i = o.length; i--;) o[i].elem !== this || null != e && o[i].queue !== e || (o[i].anim.stop(n), t = !1, o.splice(i, 1));
                    (t || !n) && ie.dequeue(this, e)
                })
            },
            finish: function(e) {
                return e !== !1 && (e = e || "fx"), this.each(function() {
                    var t, n = ie._data(this),
                        r = n[e + "queue"],
                        i = n[e + "queueHooks"],
                        o = ie.timers,
                        a = r ? r.length : 0;
                    for (n.finish = !0, ie.queue(this, e, []), i && i.stop && i.stop.call(this, !0), t = o.length; t--;) o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0), o.splice(t, 1));
                    for (t = 0; a > t; t++) r[t] && r[t].finish && r[t].finish.call(this);
                    delete n.finish
                })
            }
        }), ie.each(["toggle", "show", "hide"], function(e, t) {
            var n = ie.fn[t];
            ie.fn[t] = function(e, r, i) {
                return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(q(t, !0), e, r, i)
            }
        }), ie.each({
            slideDown: q("show"),
            slideUp: q("hide"),
            slideToggle: q("toggle"),
            fadeIn: {
                opacity: "show"
            },
            fadeOut: {
                opacity: "hide"
            },
            fadeToggle: {
                opacity: "toggle"
            }
        }, function(e, t) {
            ie.fn[e] = function(e, n, r) {
                return this.animate(t, e, n, r)
            }
        }), ie.timers = [], ie.fx.tick = function() {
            var e, t = ie.timers,
                n = 0;
            for (pt = ie.now(); n < t.length; n++) e = t[n], e() || t[n] !== e || t.splice(n--, 1);
            t.length || ie.fx.stop(), pt = void 0
        }, ie.fx.timer = function(e) {
            ie.timers.push(e), e() ? ie.fx.start() : ie.timers.pop()
        }, ie.fx.interval = 13, ie.fx.start = function() {
            ht || (ht = setInterval(ie.fx.tick, ie.fx.interval))
        }, ie.fx.stop = function() {
            clearInterval(ht), ht = null
        }, ie.fx.speeds = {
            slow: 600,
            fast: 200,
            _default: 400
        }, ie.fn.delay = function(e, t) {
            return e = ie.fx ? ie.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function(t, n) {
                var r = setTimeout(t, e);
                n.stop = function() {
                    clearTimeout(r)
                }
            })
        },
        function() {
            var e, t, n, r, i;
            t = he.createElement("div"), t.setAttribute("className", "t"), t.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", r = t.getElementsByTagName("a")[0], n = he.createElement("select"), i = n.appendChild(he.createElement("option")), e = t.getElementsByTagName("input")[0], r.style.cssText = "top:1px", ne.getSetAttribute = "t" !== t.className, ne.style = /top/.test(r.getAttribute("style")), ne.hrefNormalized = "/a" === r.getAttribute("href"), ne.checkOn = !!e.value, ne.optSelected = i.selected, ne.enctype = !!he.createElement("form").enctype, n.disabled = !0, ne.optDisabled = !i.disabled, e = he.createElement("input"), e.setAttribute("value", ""), ne.input = "" === e.getAttribute("value"), e.value = "t", e.setAttribute("type", "radio"), ne.radioValue = "t" === e.value
        }();
    var xt = /\r/g;
    ie.fn.extend({
        val: function(e) {
            var t, n, r, i = this[0];
            return arguments.length ? (r = ie.isFunction(e), this.each(function(n) {
                var i;
                1 === this.nodeType && (i = r ? e.call(this, n, ie(this).val()) : e, null == i ? i = "" : "number" == typeof i ? i += "" : ie.isArray(i) && (i = ie.map(i, function(e) {
                    return null == e ? "" : e + ""
                })), t = ie.valHooks[this.type] || ie.valHooks[this.nodeName.toLowerCase()], t && "set" in t && void 0 !== t.set(this, i, "value") || (this.value = i))
            })) : i ? (t = ie.valHooks[i.type] || ie.valHooks[i.nodeName.toLowerCase()], t && "get" in t && void 0 !== (n = t.get(i, "value")) ? n : (n = i.value, "string" == typeof n ? n.replace(xt, "") : null == n ? "" : n)) : void 0
        }
    }), ie.extend({
        valHooks: {
            option: {
                get: function(e) {
                    var t = ie.find.attr(e, "value");
                    return null != t ? t : ie.trim(ie.text(e))
                }
            },
            select: {
                get: function(e) {
                    for (var t, n, r = e.options, i = e.selectedIndex, o = "select-one" === e.type || 0 > i, a = o ? null : [], s = o ? i + 1 : r.length, l = 0 > i ? s : o ? i : 0; s > l; l++)
                        if (n = r[l], !(!n.selected && l !== i || (ne.optDisabled ? n.disabled : null !== n.getAttribute("disabled")) || n.parentNode.disabled && ie.nodeName(n.parentNode, "optgroup"))) {
                            if (t = ie(n).val(), o) return t;
                            a.push(t)
                        }
                    return a
                },
                set: function(e, t) {
                    for (var n, r, i = e.options, o = ie.makeArray(t), a = i.length; a--;)
                        if (r = i[a], ie.inArray(ie.valHooks.option.get(r), o) >= 0) try {
                            r.selected = n = !0
                        } catch (s) {
                            r.scrollHeight
                        } else r.selected = !1;
                    return n || (e.selectedIndex = -1), i
                }
            }
        }
    }), ie.each(["radio", "checkbox"], function() {
        ie.valHooks[this] = {
            set: function(e, t) {
                return ie.isArray(t) ? e.checked = ie.inArray(ie(e).val(), t) >= 0 : void 0
            }
        }, ne.checkOn || (ie.valHooks[this].get = function(e) {
            return null === e.getAttribute("value") ? "on" : e.value
        })
    });
    var wt, Tt, Ct = ie.expr.attrHandle,
        Nt = /^(?:checked|selected)$/i,
        Et = ne.getSetAttribute,
        kt = ne.input;
    ie.fn.extend({
        attr: function(e, t) {
            return De(this, ie.attr, e, t, arguments.length > 1)
        },
        removeAttr: function(e) {
            return this.each(function() {
                ie.removeAttr(this, e)
            })
        }
    }), ie.extend({
        attr: function(e, t, n) {
            var r, i, o = e.nodeType;
            return e && 3 !== o && 8 !== o && 2 !== o ? typeof e.getAttribute === Ce ? ie.prop(e, t, n) : (1 === o && ie.isXMLDoc(e) || (t = t.toLowerCase(), r = ie.attrHooks[t] || (ie.expr.match.bool.test(t) ? Tt : wt)), void 0 === n ? r && "get" in r && null !== (i = r.get(e, t)) ? i : (i = ie.find.attr(e, t), null == i ? void 0 : i) : null !== n ? r && "set" in r && void 0 !== (i = r.set(e, n, t)) ? i : (e.setAttribute(t, n + ""), n) : void ie.removeAttr(e, t)) : void 0
        },
        removeAttr: function(e, t) {
            var n, r, i = 0,
                o = t && t.match(be);
            if (o && 1 === e.nodeType)
                for (; n = o[i++];) r = ie.propFix[n] || n, ie.expr.match.bool.test(n) ? kt && Et || !Nt.test(n) ? e[r] = !1 : e[ie.camelCase("default-" + n)] = e[r] = !1 : ie.attr(e, n, ""), e.removeAttribute(Et ? n : r)
        },
        attrHooks: {
            type: {
                set: function(e, t) {
                    if (!ne.radioValue && "radio" === t && ie.nodeName(e, "input")) {
                        var n = e.value;
                        return e.setAttribute("type", t), n && (e.value = n), t
                    }
                }
            }
        }
    }), Tt = {
        set: function(e, t, n) {
            return t === !1 ? ie.removeAttr(e, n) : kt && Et || !Nt.test(n) ? e.setAttribute(!Et && ie.propFix[n] || n, n) : e[ie.camelCase("default-" + n)] = e[n] = !0, n
        }
    }, ie.each(ie.expr.match.bool.source.match(/\w+/g), function(e, t) {
        var n = Ct[t] || ie.find.attr;
        Ct[t] = kt && Et || !Nt.test(t) ? function(e, t, r) {
            var i, o;
            return r || (o = Ct[t], Ct[t] = i, i = null != n(e, t, r) ? t.toLowerCase() : null, Ct[t] = o), i
        } : function(e, t, n) {
            return n ? void 0 : e[ie.camelCase("default-" + t)] ? t.toLowerCase() : null
        }
    }), kt && Et || (ie.attrHooks.value = {
        set: function(e, t, n) {
            return ie.nodeName(e, "input") ? void(e.defaultValue = t) : wt && wt.set(e, t, n)
        }
    }), Et || (wt = {
        set: function(e, t, n) {
            var r = e.getAttributeNode(n);
            return r || e.setAttributeNode(r = e.ownerDocument.createAttribute(n)), r.value = t += "", "value" === n || t === e.getAttribute(n) ? t : void 0
        }
    }, Ct.id = Ct.name = Ct.coords = function(e, t, n) {
        var r;
        return n ? void 0 : (r = e.getAttributeNode(t)) && "" !== r.value ? r.value : null
    }, ie.valHooks.button = {
        get: function(e, t) {
            var n = e.getAttributeNode(t);
            return n && n.specified ? n.value : void 0
        },
        set: wt.set
    }, ie.attrHooks.contenteditable = {
        set: function(e, t, n) {
            wt.set(e, "" === t ? !1 : t, n)
        }
    }, ie.each(["width", "height"], function(e, t) {
        ie.attrHooks[t] = {
            set: function(e, n) {
                return "" === n ? (e.setAttribute(t, "auto"), n) : void 0
            }
        }
    })), ne.style || (ie.attrHooks.style = {
        get: function(e) {
            return e.style.cssText || void 0
        },
        set: function(e, t) {
            return e.style.cssText = t + ""
        }
    });
    var St = /^(?:input|select|textarea|button|object)$/i,
        At = /^(?:a|area)$/i;
    ie.fn.extend({
        prop: function(e, t) {
            return De(this, ie.prop, e, t, arguments.length > 1)
        },
        removeProp: function(e) {
            return e = ie.propFix[e] || e, this.each(function() {
                try {
                    this[e] = void 0, delete this[e]
                } catch (t) {}
            })
        }
    }), ie.extend({
        propFix: {
            "for": "htmlFor",
            "class": "className"
        },
        prop: function(e, t, n) {
            var r, i, o, a = e.nodeType;
            return e && 3 !== a && 8 !== a && 2 !== a ? (o = 1 !== a || !ie.isXMLDoc(e), o && (t = ie.propFix[t] || t, i = ie.propHooks[t]), void 0 !== n ? i && "set" in i && void 0 !== (r = i.set(e, n, t)) ? r : e[t] = n : i && "get" in i && null !== (r = i.get(e, t)) ? r : e[t]) : void 0
        },
        propHooks: {
            tabIndex: {
                get: function(e) {
                    var t = ie.find.attr(e, "tabindex");
                    return t ? parseInt(t, 10) : St.test(e.nodeName) || At.test(e.nodeName) && e.href ? 0 : -1
                }
            }
        }
    }), ne.hrefNormalized || ie.each(["href", "src"], function(e, t) {
        ie.propHooks[t] = {
            get: function(e) {
                return e.getAttribute(t, 4)
            }
        }
    }), ne.optSelected || (ie.propHooks.selected = {
        get: function(e) {
            var t = e.parentNode;
            return t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex), null
        }
    }), ie.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
        ie.propFix[this.toLowerCase()] = this
    }), ne.enctype || (ie.propFix.enctype = "encoding");
    var Dt = /[\t\r\n\f]/g;
    ie.fn.extend({
        addClass: function(e) {
            var t, n, r, i, o, a, s = 0,
                l = this.length,
                u = "string" == typeof e && e;
            if (ie.isFunction(e)) return this.each(function(t) {
                ie(this).addClass(e.call(this, t, this.className))
            });
            if (u)
                for (t = (e || "").match(be) || []; l > s; s++)
                    if (n = this[s], r = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(Dt, " ") : " ")) {
                        for (o = 0; i = t[o++];) r.indexOf(" " + i + " ") < 0 && (r += i + " ");
                        a = ie.trim(r), n.className !== a && (n.className = a)
                    }
            return this
        },
        removeClass: function(e) {
            var t, n, r, i, o, a, s = 0,
                l = this.length,
                u = 0 === arguments.length || "string" == typeof e && e;
            if (ie.isFunction(e)) return this.each(function(t) {
                ie(this).removeClass(e.call(this, t, this.className))
            });
            if (u)
                for (t = (e || "").match(be) || []; l > s; s++)
                    if (n = this[s], r = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(Dt, " ") : "")) {
                        for (o = 0; i = t[o++];)
                            for (; r.indexOf(" " + i + " ") >= 0;) r = r.replace(" " + i + " ", " ");
                        a = e ? ie.trim(r) : "", n.className !== a && (n.className = a)
                    }
            return this
        },
        toggleClass: function(e, t) {
            var n = typeof e;
            return "boolean" == typeof t && "string" === n ? t ? this.addClass(e) : this.removeClass(e) : this.each(ie.isFunction(e) ? function(n) {
                ie(this).toggleClass(e.call(this, n, this.className, t), t)
            } : function() {
                if ("string" === n)
                    for (var t, r = 0, i = ie(this), o = e.match(be) || []; t = o[r++];) i.hasClass(t) ? i.removeClass(t) : i.addClass(t);
                else(n === Ce || "boolean" === n) && (this.className && ie._data(this, "__className__", this.className), this.className = this.className || e === !1 ? "" : ie._data(this, "__className__") || "")
            })
        },
        hasClass: function(e) {
            for (var t = " " + e + " ", n = 0, r = this.length; r > n; n++)
                if (1 === this[n].nodeType && (" " + this[n].className + " ").replace(Dt, " ").indexOf(t) >= 0) return !0;
            return !1
        }
    }), ie.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(e, t) {
        ie.fn[t] = function(e, n) {
            return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
        }
    }), ie.fn.extend({
        hover: function(e, t) {
            return this.mouseenter(e).mouseleave(t || e)
        },
        bind: function(e, t, n) {
            return this.on(e, null, t, n)
        },
        unbind: function(e, t) {
            return this.off(e, null, t)
        },
        delegate: function(e, t, n, r) {
            return this.on(t, e, n, r)
        },
        undelegate: function(e, t, n) {
            return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n)
        }
    });
    var jt = ie.now(),
        Lt = /\?/,
        Ht = /(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
    ie.parseJSON = function(t) {
        if (e.JSON && e.JSON.parse) return e.JSON.parse(t + "");
        var n, r = null,
            i = ie.trim(t + "");
        return i && !ie.trim(i.replace(Ht, function(e, t, i, o) {
            return n && t && (r = 0), 0 === r ? e : (n = i || t, r += !o - !i, "")
        })) ? Function("return " + i)() : ie.error("Invalid JSON: " + t)
    }, ie.parseXML = function(t) {
        var n, r;
        if (!t || "string" != typeof t) return null;
        try {
            e.DOMParser ? (r = new DOMParser, n = r.parseFromString(t, "text/xml")) : (n = new ActiveXObject("Microsoft.XMLDOM"), n.async = "false", n.loadXML(t))
        } catch (i) {
            n = void 0
        }
        return n && n.documentElement && !n.getElementsByTagName("parsererror").length || ie.error("Invalid XML: " + t), n
    };
    var _t, qt, Mt = /#.*$/,
        Ot = /([?&])_=[^&]*/,
        Ft = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
        Bt = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
        Pt = /^(?:GET|HEAD)$/,
        Rt = /^\/\//,
        Wt = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
        $t = {},
        zt = {},
        It = "*/".concat("*");
    try {
        qt = location.href
    } catch (Xt) {
        qt = he.createElement("a"), qt.href = "", qt = qt.href
    }
    _t = Wt.exec(qt.toLowerCase()) || [], ie.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: qt,
            type: "GET",
            isLocal: Bt.test(_t[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": It,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": ie.parseJSON,
                "text xml": ie.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(e, t) {
            return t ? W(W(e, ie.ajaxSettings), t) : W(ie.ajaxSettings, e)
        },
        ajaxPrefilter: P($t),
        ajaxTransport: P(zt),
        ajax: function(e, t) {
            function n(e, t, n, r) {
                var i, c, v, y, x, T = t;
                2 !== b && (b = 2, s && clearTimeout(s), u = void 0, a = r || "", w.readyState = e > 0 ? 4 : 0, i = e >= 200 && 300 > e || 304 === e, n && (y = $(d, w, n)), y = z(d, y, w, i), i ? (d.ifModified && (x = w.getResponseHeader("Last-Modified"), x && (ie.lastModified[o] = x), x = w.getResponseHeader("etag"), x && (ie.etag[o] = x)), 204 === e || "HEAD" === d.type ? T = "nocontent" : 304 === e ? T = "notmodified" : (T = y.state, c = y.data, v = y.error, i = !v)) : (v = T, (e || !T) && (T = "error", 0 > e && (e = 0))), w.status = e, w.statusText = (t || T) + "", i ? h.resolveWith(f, [c, T, w]) : h.rejectWith(f, [w, T, v]), w.statusCode(g), g = void 0, l && p.trigger(i ? "ajaxSuccess" : "ajaxError", [w, d, i ? c : v]), m.fireWith(f, [w, T]), l && (p.trigger("ajaxComplete", [w, d]), --ie.active || ie.event.trigger("ajaxStop")))
            }
            "object" == typeof e && (t = e, e = void 0), t = t || {};
            var r, i, o, a, s, l, u, c, d = ie.ajaxSetup({}, t),
                f = d.context || d,
                p = d.context && (f.nodeType || f.jquery) ? ie(f) : ie.event,
                h = ie.Deferred(),
                m = ie.Callbacks("once memory"),
                g = d.statusCode || {},
                v = {},
                y = {},
                b = 0,
                x = "canceled",
                w = {
                    readyState: 0,
                    getResponseHeader: function(e) {
                        var t;
                        if (2 === b) {
                            if (!c)
                                for (c = {}; t = Ft.exec(a);) c[t[1].toLowerCase()] = t[2];
                            t = c[e.toLowerCase()]
                        }
                        return null == t ? null : t
                    },
                    getAllResponseHeaders: function() {
                        return 2 === b ? a : null
                    },
                    setRequestHeader: function(e, t) {
                        var n = e.toLowerCase();
                        return b || (e = y[n] = y[n] || e, v[e] = t), this
                    },
                    overrideMimeType: function(e) {
                        return b || (d.mimeType = e), this
                    },
                    statusCode: function(e) {
                        var t;
                        if (e)
                            if (2 > b)
                                for (t in e) g[t] = [g[t], e[t]];
                            else w.always(e[w.status]);
                        return this
                    },
                    abort: function(e) {
                        var t = e || x;
                        return u && u.abort(t), n(0, t), this
                    }
                };
            if (h.promise(w).complete = m.add, w.success = w.done, w.error = w.fail, d.url = ((e || d.url || qt) + "").replace(Mt, "").replace(Rt, _t[1] + "//"), d.type = t.method || t.type || d.method || d.type, d.dataTypes = ie.trim(d.dataType || "*").toLowerCase().match(be) || [""], null == d.crossDomain && (r = Wt.exec(d.url.toLowerCase()), d.crossDomain = !(!r || r[1] === _t[1] && r[2] === _t[2] && (r[3] || ("http:" === r[1] ? "80" : "443")) === (_t[3] || ("http:" === _t[1] ? "80" : "443")))), d.data && d.processData && "string" != typeof d.data && (d.data = ie.param(d.data, d.traditional)), R($t, d, t, w), 2 === b) return w;
            l = d.global, l && 0 === ie.active++ && ie.event.trigger("ajaxStart"), d.type = d.type.toUpperCase(), d.hasContent = !Pt.test(d.type), o = d.url, d.hasContent || (d.data && (o = d.url += (Lt.test(o) ? "&" : "?") + d.data, delete d.data), d.cache === !1 && (d.url = Ot.test(o) ? o.replace(Ot, "$1_=" + jt++) : o + (Lt.test(o) ? "&" : "?") + "_=" + jt++)), d.ifModified && (ie.lastModified[o] && w.setRequestHeader("If-Modified-Since", ie.lastModified[o]), ie.etag[o] && w.setRequestHeader("If-None-Match", ie.etag[o])), (d.data && d.hasContent && d.contentType !== !1 || t.contentType) && w.setRequestHeader("Content-Type", d.contentType), w.setRequestHeader("Accept", d.dataTypes[0] && d.accepts[d.dataTypes[0]] ? d.accepts[d.dataTypes[0]] + ("*" !== d.dataTypes[0] ? ", " + It + "; q=0.01" : "") : d.accepts["*"]);
            for (i in d.headers) w.setRequestHeader(i, d.headers[i]);
            if (d.beforeSend && (d.beforeSend.call(f, w, d) === !1 || 2 === b)) return w.abort();
            x = "abort";
            for (i in {
                    success: 1,
                    error: 1,
                    complete: 1
                }) w[i](d[i]);
            if (u = R(zt, d, t, w)) {
                w.readyState = 1, l && p.trigger("ajaxSend", [w, d]), d.async && d.timeout > 0 && (s = setTimeout(function() {
                    w.abort("timeout")
                }, d.timeout));
                try {
                    b = 1, u.send(v, n)
                } catch (T) {
                    if (!(2 > b)) throw T;
                    n(-1, T)
                }
            } else n(-1, "No Transport");
            return w
        },
        getJSON: function(e, t, n) {
            return ie.get(e, t, n, "json")
        },
        getScript: function(e, t) {
            return ie.get(e, void 0, t, "script")
        }
    }), ie.each(["get", "post"], function(e, t) {
        ie[t] = function(e, n, r, i) {
            return ie.isFunction(n) && (i = i || r, r = n, n = void 0), ie.ajax({
                url: e,
                type: t,
                dataType: i,
                data: n,
                success: r
            })
        }
    }), ie.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(e, t) {
        ie.fn[t] = function(e) {
            return this.on(t, e)
        }
    }), ie._evalUrl = function(e) {
        return ie.ajax({
            url: e,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            "throws": !0
        })
    }, ie.fn.extend({
        wrapAll: function(e) {
            if (ie.isFunction(e)) return this.each(function(t) {
                ie(this).wrapAll(e.call(this, t))
            });
            if (this[0]) {
                var t = ie(e, this[0].ownerDocument).eq(0).clone(!0);
                this[0].parentNode && t.insertBefore(this[0]), t.map(function() {
                    for (var e = this; e.firstChild && 1 === e.firstChild.nodeType;) e = e.firstChild;
                    return e
                }).append(this)
            }
            return this
        },
        wrapInner: function(e) {
            return this.each(ie.isFunction(e) ? function(t) {
                ie(this).wrapInner(e.call(this, t))
            } : function() {
                var t = ie(this),
                    n = t.contents();
                n.length ? n.wrapAll(e) : t.append(e)
            })
        },
        wrap: function(e) {
            var t = ie.isFunction(e);
            return this.each(function(n) {
                ie(this).wrapAll(t ? e.call(this, n) : e)
            })
        },
        unwrap: function() {
            return this.parent().each(function() {
                ie.nodeName(this, "body") || ie(this).replaceWith(this.childNodes)
            }).end()
        }
    }), ie.expr.filters.hidden = function(e) {
        return e.offsetWidth <= 0 && e.offsetHeight <= 0 || !ne.reliableHiddenOffsets() && "none" === (e.style && e.style.display || ie.css(e, "display"))
    }, ie.expr.filters.visible = function(e) {
        return !ie.expr.filters.hidden(e)
    };
    var Ut = /%20/g,
        Vt = /\[\]$/,
        Jt = /\r?\n/g,
        Yt = /^(?:submit|button|image|reset|file)$/i,
        Gt = /^(?:input|select|textarea|keygen)/i;
    ie.param = function(e, t) {
        var n, r = [],
            i = function(e, t) {
                t = ie.isFunction(t) ? t() : null == t ? "" : t, r[r.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
            };
        if (void 0 === t && (t = ie.ajaxSettings && ie.ajaxSettings.traditional), ie.isArray(e) || e.jquery && !ie.isPlainObject(e)) ie.each(e, function() {
            i(this.name, this.value)
        });
        else
            for (n in e) I(n, e[n], t, i);
        return r.join("&").replace(Ut, "+")
    }, ie.fn.extend({
        serialize: function() {
            return ie.param(this.serializeArray())
        },
        serializeArray: function() {
            return this.map(function() {
                var e = ie.prop(this, "elements");
                return e ? ie.makeArray(e) : this
            }).filter(function() {
                var e = this.type;
                return this.name && !ie(this).is(":disabled") && Gt.test(this.nodeName) && !Yt.test(e) && (this.checked || !je.test(e))
            }).map(function(e, t) {
                var n = ie(this).val();
                return null == n ? null : ie.isArray(n) ? ie.map(n, function(e) {
                    return {
                        name: t.name,
                        value: e.replace(Jt, "\r\n")
                    }
                }) : {
                    name: t.name,
                    value: n.replace(Jt, "\r\n")
                }
            }).get()
        }
    }), ie.ajaxSettings.xhr = void 0 !== e.ActiveXObject ? function() {
        return !this.isLocal && /^(get|post|head|put|delete|options)$/i.test(this.type) && X() || U()
    } : X;
    var Qt = 0,
        Kt = {},
        Zt = ie.ajaxSettings.xhr();
    e.ActiveXObject && ie(e).on("unload", function() {
        for (var e in Kt) Kt[e](void 0, !0)
    }), ne.cors = !!Zt && "withCredentials" in Zt, Zt = ne.ajax = !!Zt, Zt && ie.ajaxTransport(function(e) {
        if (!e.crossDomain || ne.cors) {
            var t;
            return {
                send: function(n, r) {
                    var i, o = e.xhr(),
                        a = ++Qt;
                    if (o.open(e.type, e.url, e.async, e.username, e.password), e.xhrFields)
                        for (i in e.xhrFields) o[i] = e.xhrFields[i];
                    e.mimeType && o.overrideMimeType && o.overrideMimeType(e.mimeType), e.crossDomain || n["X-Requested-With"] || (n["X-Requested-With"] = "XMLHttpRequest");
                    for (i in n) void 0 !== n[i] && o.setRequestHeader(i, n[i] + "");
                    o.send(e.hasContent && e.data || null), t = function(n, i) {
                        var s, l, u;
                        if (t && (i || 4 === o.readyState))
                            if (delete Kt[a], t = void 0, o.onreadystatechange = ie.noop, i) 4 !== o.readyState && o.abort();
                            else {
                                u = {}, s = o.status, "string" == typeof o.responseText && (u.text = o.responseText);
                                try {
                                    l = o.statusText
                                } catch (c) {
                                    l = ""
                                }
                                s || !e.isLocal || e.crossDomain ? 1223 === s && (s = 204) : s = u.text ? 200 : 404
                            }
                        u && r(s, l, u, o.getAllResponseHeaders())
                    }, e.async ? 4 === o.readyState ? setTimeout(t) : o.onreadystatechange = Kt[a] = t : t()
                },
                abort: function() {
                    t && t(void 0, !0)
                }
            }
        }
    }), ie.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /(?:java|ecma)script/
        },
        converters: {
            "text script": function(e) {
                return ie.globalEval(e), e
            }
        }
    }), ie.ajaxPrefilter("script", function(e) {
        void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET", e.global = !1)
    }), ie.ajaxTransport("script", function(e) {
        if (e.crossDomain) {
            var t, n = he.head || ie("head")[0] || he.documentElement;
            return {
                send: function(r, i) {
                    t = he.createElement("script"), t.async = !0, e.scriptCharset && (t.charset = e.scriptCharset), t.src = e.url, t.onload = t.onreadystatechange = function(e, n) {
                        (n || !t.readyState || /loaded|complete/.test(t.readyState)) && (t.onload = t.onreadystatechange = null, t.parentNode && t.parentNode.removeChild(t), t = null, n || i(200, "success"))
                    }, n.insertBefore(t, n.firstChild)
                },
                abort: function() {
                    t && t.onload(void 0, !0)
                }
            }
        }
    });
    var en = [],
        tn = /(=)\?(?=&|$)|\?\?/;
    ie.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var e = en.pop() || ie.expando + "_" + jt++;
            return this[e] = !0, e
        }
    }), ie.ajaxPrefilter("json jsonp", function(t, n, r) {
        var i, o, a, s = t.jsonp !== !1 && (tn.test(t.url) ? "url" : "string" == typeof t.data && !(t.contentType || "").indexOf("application/x-www-form-urlencoded") && tn.test(t.data) && "data");
        return s || "jsonp" === t.dataTypes[0] ? (i = t.jsonpCallback = ie.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, s ? t[s] = t[s].replace(tn, "$1" + i) : t.jsonp !== !1 && (t.url += (Lt.test(t.url) ? "&" : "?") + t.jsonp + "=" + i), t.converters["script json"] = function() {
            return a || ie.error(i + " was not called"), a[0]
        }, t.dataTypes[0] = "json", o = e[i], e[i] = function() {
            a = arguments
        }, r.always(function() {
            e[i] = o, t[i] && (t.jsonpCallback = n.jsonpCallback, en.push(i)), a && ie.isFunction(o) && o(a[0]), a = o = void 0
        }), "script") : void 0
    }), ie.parseHTML = function(e, t, n) {
        if (!e || "string" != typeof e) return null;
        "boolean" == typeof t && (n = t, t = !1), t = t || he;
        var r = de.exec(e),
            i = !n && [];
        return r ? [t.createElement(r[1])] : (r = ie.buildFragment([e], t, i), i && i.length && ie(i).remove(), ie.merge([], r.childNodes))
    };
    var nn = ie.fn.load;
    ie.fn.load = function(e, t, n) {
        if ("string" != typeof e && nn) return nn.apply(this, arguments);
        var r, i, o, a = this,
            s = e.indexOf(" ");
        return s >= 0 && (r = ie.trim(e.slice(s, e.length)), e = e.slice(0, s)), ie.isFunction(t) ? (n = t, t = void 0) : t && "object" == typeof t && (o = "POST"), a.length > 0 && ie.ajax({
            url: e,
            type: o,
            dataType: "html",
            data: t
        }).done(function(e) {
            i = arguments, a.html(r ? ie("<div>").append(ie.parseHTML(e)).find(r) : e)
        }).complete(n && function(e, t) {
            a.each(n, i || [e.responseText, t, e])
        }), this
    }, ie.expr.filters.animated = function(e) {
        return ie.grep(ie.timers, function(t) {
            return e === t.elem
        }).length
    };
    var rn = e.document.documentElement;
    ie.offset = {
        setOffset: function(e, t, n) {
            var r, i, o, a, s, l, u, c = ie.css(e, "position"),
                d = ie(e),
                f = {};
            "static" === c && (e.style.position = "relative"), s = d.offset(), o = ie.css(e, "top"), l = ie.css(e, "left"), u = ("absolute" === c || "fixed" === c) && ie.inArray("auto", [o, l]) > -1, u ? (r = d.position(), a = r.top, i = r.left) : (a = parseFloat(o) || 0, i = parseFloat(l) || 0), ie.isFunction(t) && (t = t.call(e, n, s)), null != t.top && (f.top = t.top - s.top + a), null != t.left && (f.left = t.left - s.left + i), "using" in t ? t.using.call(e, f) : d.css(f)
        }
    }, ie.fn.extend({
        offset: function(e) {
            if (arguments.length) return void 0 === e ? this : this.each(function(t) {
                ie.offset.setOffset(this, e, t)
            });
            var t, n, r = {
                    top: 0,
                    left: 0
                },
                i = this[0],
                o = i && i.ownerDocument;
            return o ? (t = o.documentElement, ie.contains(t, i) ? (typeof i.getBoundingClientRect !== Ce && (r = i.getBoundingClientRect()), n = V(o), {
                top: r.top + (n.pageYOffset || t.scrollTop) - (t.clientTop || 0),
                left: r.left + (n.pageXOffset || t.scrollLeft) - (t.clientLeft || 0)
            }) : r) : void 0
        },
        position: function() {
            if (this[0]) {
                var e, t, n = {
                        top: 0,
                        left: 0
                    },
                    r = this[0];
                return "fixed" === ie.css(r, "position") ? t = r.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), ie.nodeName(e[0], "html") || (n = e.offset()), n.top += ie.css(e[0], "borderTopWidth", !0), n.left += ie.css(e[0], "borderLeftWidth", !0)), {
                    top: t.top - n.top - ie.css(r, "marginTop", !0),
                    left: t.left - n.left - ie.css(r, "marginLeft", !0)
                }
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var e = this.offsetParent || rn; e && !ie.nodeName(e, "html") && "static" === ie.css(e, "position");) e = e.offsetParent;
                return e || rn
            })
        }
    }), ie.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(e, t) {
        var n = /Y/.test(t);
        ie.fn[e] = function(r) {
            return De(this, function(e, r, i) {
                var o = V(e);
                return void 0 === i ? o ? t in o ? o[t] : o.document.documentElement[r] : e[r] : void(o ? o.scrollTo(n ? ie(o).scrollLeft() : i, n ? i : ie(o).scrollTop()) : e[r] = i)
            }, e, r, arguments.length, null)
        }
    }), ie.each(["top", "left"], function(e, t) {
        ie.cssHooks[t] = k(ne.pixelPosition, function(e, n) {
            return n ? (n = tt(e, t), rt.test(n) ? ie(e).position()[t] + "px" : n) : void 0
        })
    }), ie.each({
        Height: "height",
        Width: "width"
    }, function(e, t) {
        ie.each({
            padding: "inner" + e,
            content: t,
            "": "outer" + e
        }, function(n, r) {
            ie.fn[r] = function(r, i) {
                var o = arguments.length && (n || "boolean" != typeof r),
                    a = n || (r === !0 || i === !0 ? "margin" : "border");
                return De(this, function(t, n, r) {
                    var i;
                    return ie.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (i = t.documentElement, Math.max(t.body["scroll" + e], i["scroll" + e], t.body["offset" + e], i["offset" + e], i["client" + e])) : void 0 === r ? ie.css(t, n, a) : ie.style(t, n, r, a);
                }, t, o ? r : void 0, o, null)
            }
        })
    }), ie.fn.size = function() {
        return this.length
    }, ie.fn.andSelf = ie.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function() {
        return ie
    });
    var on = e.jQuery,
        an = e.$;
    return ie.noConflict = function(t) {
        return e.$ === ie && (e.$ = an), t && e.jQuery === ie && (e.jQuery = on), ie
    }, typeof t === Ce && (e.jQuery = e.$ = ie), ie
});
! function(t) {
    "use strict";
    "function" == typeof define && define.amd ? define(["jquery"], t) : "object" == typeof exports && "object" == typeof module ? module.exports = t(require("jquery")) : t(jQuery)
}(function(t, e) {
    "use strict";

    function r(e, r, n, a) {
        for (var i = [], o = 0; o < e.length; o++) {
            var s = e[o];
            if (s) {
                var l = tinycolor(s),
                    c = l.toHsl().l < .5 ? "sp-thumb-el sp-thumb-dark" : "sp-thumb-el sp-thumb-light";
                c += tinycolor.equals(r, s) ? " sp-thumb-active" : "";
                var f = l.toString(a.preferredFormat || "rgb"),
                    u = b ? "background-color:" + l.toRgbString() : "filter:" + l.toFilter();
                i.push('<span title="' + f + '" data-color="' + l.toRgbString() + '" class="' + c + '"><span class="sp-thumb-inner" style="' + u + ';" /></span>')
            } else {
                var h = "sp-clear-display";
                i.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="' + h + '"></span>').attr("title", a.noColorSelectedText)).html())
            }
        }
        return "<div class='sp-cf " + n + "'>" + i.join("") + "</div>"
    }

    function n() {
        for (var t = 0; t < p.length; t++) p[t] && p[t].hide()
    }

    function a(e, r) {
        var n = t.extend({}, d, e);
        return n.callbacks = {
            move: c(n.move, r),
            change: c(n.change, r),
            show: c(n.show, r),
            hide: c(n.hide, r),
            beforeShow: c(n.beforeShow, r)
        }, n
    }

    function i(i, s) {
        function c() {
            if (W.showPaletteOnly && (W.showPalette = !0), Dt.text(W.showPaletteOnly ? W.togglePaletteMoreText : W.togglePaletteLessText), W.palette) {
                dt = W.palette.slice(0), pt = t.isArray(dt[0]) ? dt : [dt], gt = {};
                for (var e = 0; e < pt.length; e++)
                    for (var r = 0; r < pt[e].length; r++) {
                        var n = tinycolor(pt[e][r]).toRgbString();
                        gt[n] = !0
                    }
            }
            kt.toggleClass("sp-flat", X), kt.toggleClass("sp-input-disabled", !W.showInput), kt.toggleClass("sp-alpha-enabled", W.showAlpha), kt.toggleClass("sp-clear-enabled", Qt), kt.toggleClass("sp-buttons-disabled", !W.showButtons), kt.toggleClass("sp-palette-buttons-disabled", !W.togglePaletteOnly), kt.toggleClass("sp-palette-disabled", !W.showPalette), kt.toggleClass("sp-palette-only", W.showPaletteOnly), kt.toggleClass("sp-initial-disabled", !W.showInitial), kt.addClass(W.className).addClass(W.containerClassName), z()
        }

        function d() {
            function e(e) {
                return e.data && e.data.ignore ? (O(t(e.target).closest(".sp-thumb-el").data("color")), j()) : (O(t(e.target).closest(".sp-thumb-el").data("color")), j(), I(!0), W.hideAfterPaletteSelect && F()), !1
            }
            if (g && kt.find("*:not(input)").attr("unselectable", "on"), c(), Bt && _t.after(Lt).hide(), Qt || jt.hide(), X) _t.after(kt).hide();
            else {
                var r = "parent" === W.appendTo ? _t.parent() : t(W.appendTo);
                1 !== r.length && (r = t("body")), r.append(kt)
            }
            y(), Kt.bind("click.spectrum touchstart.spectrum", function(e) {
                xt || A(), e.stopPropagation(), t(e.target).is("input") || e.preventDefault()
            }), (_t.is(":disabled") || W.disabled === !0) && V(), kt.click(l), Tt.change(P), Tt.bind("paste", function() {
                setTimeout(P, 1)
            }), Tt.keydown(function(t) {
                13 == t.keyCode && P()
            }), Nt.text(W.cancelText), Nt.bind("click.spectrum", function(t) {
                t.stopPropagation(), t.preventDefault(), T(), F()
            }), jt.attr("title", W.clearText), jt.bind("click.spectrum", function(t) {
                t.stopPropagation(), t.preventDefault(), Gt = !0, j(), X && I(!0)
            }), Et.text(W.chooseText), Et.bind("click.spectrum", function(t) {
                t.stopPropagation(), t.preventDefault(), g && Tt.is(":focus") && Tt.trigger("change"), N() && (I(!0), F())
            }), Dt.text(W.showPaletteOnly ? W.togglePaletteMoreText : W.togglePaletteLessText), Dt.bind("click.spectrum", function(t) {
                t.stopPropagation(), t.preventDefault(), W.showPaletteOnly = !W.showPaletteOnly, W.showPaletteOnly || X || kt.css("left", "-=" + (St.outerWidth(!0) + 5)), c()
            }), f(Ht, function(t, e, r) {
                ht = t / ot, Gt = !1, r.shiftKey && (ht = Math.round(10 * ht) / 10), j()
            }, S, C), f(At, function(t, e) {
                ct = parseFloat(e / at), Gt = !1, W.showAlpha || (ht = 1), j()
            }, S, C), f(Ct, function(t, e, r) {
                if (r.shiftKey) {
                    if (!yt) {
                        var n = ft * et,
                            a = rt - ut * rt,
                            i = Math.abs(t - n) > Math.abs(e - a);
                        yt = i ? "x" : "y"
                    }
                } else yt = null;
                var o = !yt || "x" === yt,
                    s = !yt || "y" === yt;
                o && (ft = parseFloat(t / et)), s && (ut = parseFloat((rt - e) / rt)), Gt = !1, W.showAlpha || (ht = 1), j()
            }, S, C), $t ? (O($t), E(), Xt = W.preferredFormat || tinycolor($t).format, w($t)) : E(), X && M();
            var n = g ? "mousedown.spectrum" : "click.spectrum touchstart.spectrum";
            Ot.delegate(".sp-thumb-el", n, e), qt.delegate(".sp-thumb-el:nth-child(1)", n, {
                ignore: !0
            }, e)
        }

        function y() {
            if (G && window.localStorage) {
                try {
                    var e = window.localStorage[G].split(",#");
                    e.length > 1 && (delete window.localStorage[G], t.each(e, function(t, e) {
                        w(e)
                    }))
                } catch (r) {}
                try {
                    bt = window.localStorage[G].split(";")
                } catch (r) {}
            }
        }

        function w(e) {
            if (Y) {
                var r = tinycolor(e).toRgbString();
                if (!gt[r] && -1 === t.inArray(r, bt))
                    for (bt.push(r); bt.length > vt;) bt.shift();
                if (G && window.localStorage) try {
                    window.localStorage[G] = bt.join(";")
                } catch (n) {}
            }
        }

        function _() {
            var t = [];
            if (W.showPalette)
                for (var e = 0; e < bt.length; e++) {
                    var r = tinycolor(bt[e]).toRgbString();
                    gt[r] || t.push(bt[e])
                }
            return t.reverse().slice(0, W.maxSelectionSize)
        }

        function x() {
            var e = q(),
                n = t.map(pt, function(t, n) {
                    return r(t, e, "sp-palette-row sp-palette-row-" + n, W)
                });
            y(), bt && n.push(r(_(), e, "sp-palette-row sp-palette-row-selection", W)), Ot.html(n.join(""))
        }

        function k() {
            if (W.showInitial) {
                var t = Wt,
                    e = q();
                qt.html(r([t, e], e, "sp-palette-row-initial", W))
            }
        }

        function S() {
            (0 >= rt || 0 >= et || 0 >= at) && z(), tt = !0, kt.addClass(mt), yt = null, _t.trigger("dragstart.spectrum", [q()])
        }

        function C() {
            tt = !1, kt.removeClass(mt), _t.trigger("dragstop.spectrum", [q()])
        }

        function P() {
            var t = Tt.val();
            if (null !== t && "" !== t || !Qt) {
                var e = tinycolor(t);
                e.isValid() ? (O(e), I(!0)) : Tt.addClass("sp-validation-error")
            } else O(null), I(!0)
        }

        function A() {
            Z ? F() : M()
        }

        function M() {
            var e = t.Event("beforeShow.spectrum");
            return Z ? void z() : (_t.trigger(e, [q()]), void(J.beforeShow(q()) === !1 || e.isDefaultPrevented() || (n(), Z = !0, t(wt).bind("keydown.spectrum", R), t(wt).bind("click.spectrum", H), t(window).bind("resize.spectrum", U), Lt.addClass("sp-active"), kt.removeClass("sp-hidden"), z(), E(), Wt = q(), k(), J.show(Wt), _t.trigger("show.spectrum", [Wt]))))
        }

        function R(t) {
            27 === t.keyCode && F()
        }

        function H(t) {
            2 != t.button && (tt || (Yt ? I(!0) : T(), F()))
        }

        function F() {
            Z && !X && (Z = !1, t(wt).unbind("keydown.spectrum", R), t(wt).unbind("click.spectrum", H), t(window).unbind("resize.spectrum", U), Lt.removeClass("sp-active"), kt.addClass("sp-hidden"), J.hide(q()), _t.trigger("hide.spectrum", [q()]))
        }

        function T() {
            O(Wt, !0)
        }

        function O(t, e) {
            if (tinycolor.equals(t, q())) return void E();
            var r, n;
            !t && Qt ? Gt = !0 : (Gt = !1, r = tinycolor(t), n = r.toHsv(), ct = n.h % 360 / 360, ft = n.s, ut = n.v, ht = n.a), E(), r && r.isValid() && !e && (Xt = W.preferredFormat || r.getFormat())
        }

        function q(t) {
            return t = t || {}, Qt && Gt ? null : tinycolor.fromRatio({
                h: ct,
                s: ft,
                v: ut,
                a: Math.round(100 * ht) / 100
            }, {
                format: t.format || Xt
            })
        }

        function N() {
            return !Tt.hasClass("sp-validation-error")
        }

        function j() {
            E(), J.move(q()), _t.trigger("move.spectrum", [q()])
        }

        function E() {
            Tt.removeClass("sp-validation-error"), D();
            var t = tinycolor.fromRatio({
                h: ct,
                s: 1,
                v: 1
            });
            Ct.css("background-color", t.toHexString());
            var e = Xt;
            1 > ht && (0 !== ht || "name" !== e) && ("hex" !== e && "hex3" !== e && "hex6" !== e && "name" !== e || (e = "rgb"));
            var r = q({
                    format: e
                }),
                n = "";
            if (Vt.removeClass("sp-clear-display"), Vt.css("background-color", "transparent"), !r && Qt) Vt.addClass("sp-clear-display");
            else {
                var a = r.toHexString(),
                    i = r.toRgbString();
                if (b || 1 === r.alpha ? Vt.css("background-color", i) : (Vt.css("background-color", "transparent"), Vt.css("filter", r.toFilter())), W.showAlpha) {
                    var o = r.toRgb();
                    o.a = 0;
                    var s = tinycolor(o).toRgbString(),
                        l = "linear-gradient(left, " + s + ", " + a + ")";
                    g ? Rt.css("filter", tinycolor(s).toFilter({
                        gradientType: 1
                    }, a)) : (Rt.css("background", "-webkit-" + l), Rt.css("background", "-moz-" + l), Rt.css("background", "-ms-" + l), Rt.css("background", "linear-gradient(to right, " + s + ", " + a + ")"))
                }
                n = r.toString(e)
            }
            W.showInput && Tt.val(n), W.showPalette && x(), k()
        }

        function D() {
            var t = ft,
                e = ut;
            if (Qt && Gt) Ft.hide(), Mt.hide(), Pt.hide();
            else {
                Ft.show(), Mt.show(), Pt.show();
                var r = t * et,
                    n = rt - e * rt;
                r = Math.max(-nt, Math.min(et - nt, r - nt)), n = Math.max(-nt, Math.min(rt - nt, n - nt)), Pt.css({
                    top: n + "px",
                    left: r + "px"
                });
                var a = ht * ot;
                Ft.css({
                    left: a - st / 2 + "px"
                });
                var i = ct * at;
                Mt.css({
                    top: i - lt + "px"
                })
            }
        }

        function I(t) {
            var e = q(),
                r = "",
                n = !tinycolor.equals(e, Wt);
            e && (r = e.toString(Xt), w(e)), It && _t.val(r), t && n && (J.change(e), _t.trigger("change", [e]))
        }

        function z() {
            Z && (et = Ct.width(), rt = Ct.height(), nt = Pt.height(), it = At.width(), at = At.height(), lt = Mt.height(), ot = Ht.width(), st = Ft.width(), X || (kt.css("position", "absolute"), W.offset ? kt.offset(W.offset) : kt.offset(o(kt, Kt))), D(), W.showPalette && x(), _t.trigger("reflow.spectrum"))
        }

        function B() {
            _t.show(), Kt.unbind("click.spectrum touchstart.spectrum"), kt.remove(), Lt.remove(), p[Jt.id] = null
        }

        function L(r, n) {
            return r === e ? t.extend({}, W) : n === e ? W[r] : (W[r] = n, "preferredFormat" === r && (Xt = W.preferredFormat), void c())
        }

        function K() {
            xt = !1, _t.attr("disabled", !1), Kt.removeClass("sp-disabled")
        }

        function V() {
            F(), xt = !0, _t.attr("disabled", !0), Kt.addClass("sp-disabled")
        }

        function $(t) {
            W.offset = t, z()
        }
        var W = a(s, i),
            X = W.flat,
            Y = W.showSelectionPalette,
            G = W.localStorageKey,
            Q = W.theme,
            J = W.callbacks,
            U = u(z, 10),
            Z = !1,
            tt = !1,
            et = 0,
            rt = 0,
            nt = 0,
            at = 0,
            it = 0,
            ot = 0,
            st = 0,
            lt = 0,
            ct = 0,
            ft = 0,
            ut = 0,
            ht = 1,
            dt = [],
            pt = [],
            gt = {},
            bt = W.selectionPalette.slice(0),
            vt = W.maxSelectionSize,
            mt = "sp-dragging",
            yt = null,
            wt = i.ownerDocument,
            _t = (wt.body, t(i)),
            xt = !1,
            kt = t(m, wt).addClass(Q),
            St = kt.find(".sp-picker-container"),
            Ct = kt.find(".sp-color"),
            Pt = kt.find(".sp-dragger"),
            At = kt.find(".sp-hue"),
            Mt = kt.find(".sp-slider"),
            Rt = kt.find(".sp-alpha-inner"),
            Ht = kt.find(".sp-alpha"),
            Ft = kt.find(".sp-alpha-handle"),
            Tt = kt.find(".sp-input"),
            Ot = kt.find(".sp-palette"),
            qt = kt.find(".sp-initial"),
            Nt = kt.find(".sp-cancel"),
            jt = kt.find(".sp-clear"),
            Et = kt.find(".sp-choose"),
            Dt = kt.find(".sp-palette-toggle"),
            It = _t.is("input"),
            zt = It && "color" === _t.attr("type") && h(),
            Bt = It && !X,
            Lt = Bt ? t(v).addClass(Q).addClass(W.className).addClass(W.replacerClassName) : t([]),
            Kt = Bt ? Lt : _t,
            Vt = Lt.find(".sp-preview-inner"),
            $t = W.color || It && _t.val(),
            Wt = !1,
            Xt = W.preferredFormat,
            Yt = !W.showButtons || W.clickoutFiresChange,
            Gt = !$t,
            Qt = W.allowEmpty && !zt;
        d();
        var Jt = {
            show: M,
            hide: F,
            toggle: A,
            reflow: z,
            option: L,
            enable: K,
            disable: V,
            offset: $,
            set: function(t) {
                O(t), I()
            },
            get: q,
            destroy: B,
            container: kt
        };
        return Jt.id = p.push(Jt) - 1, Jt
    }

    function o(e, r) {
        var n = 0,
            a = e.outerWidth(),
            i = e.outerHeight(),
            o = r.outerHeight(),
            s = e[0].ownerDocument,
            l = s.documentElement,
            c = l.clientWidth + t(s).scrollLeft(),
            f = l.clientHeight + t(s).scrollTop(),
            u = r.offset();
        return u.top += o, u.left -= Math.min(u.left, u.left + a > c && c > a ? Math.abs(u.left + a - c) : 0), u.top -= Math.min(u.top, u.top + i > f && f > i ? Math.abs(i + o - n) : n), u
    }

    function s() {}

    function l(t) {
        t.stopPropagation()
    }

    function c(t, e) {
        var r = Array.prototype.slice,
            n = r.call(arguments, 2);
        return function() {
            return t.apply(e, n.concat(r.call(arguments)))
        }
    }

    function f(e, r, n, a) {
        function i(t) {
            t.stopPropagation && t.stopPropagation(), t.preventDefault && t.preventDefault(), t.returnValue = !1
        }

        function o(t) {
            if (f) {
                if (g && c.documentMode < 9 && !t.button) return l();
                var n = t.originalEvent && t.originalEvent.touches && t.originalEvent.touches[0],
                    a = n && n.pageX || t.pageX,
                    o = n && n.pageY || t.pageY,
                    s = Math.max(0, Math.min(a - u.left, d)),
                    b = Math.max(0, Math.min(o - u.top, h));
                p && i(t), r.apply(e, [s, b, t])
            }
        }

        function s(r) {
            var a = r.which ? 3 == r.which : 2 == r.button;
            a || f || n.apply(e, arguments) !== !1 && (f = !0, h = t(e).height(), d = t(e).width(), u = t(e).offset(), t(c).bind(b), t(c.body).addClass("sp-dragging"), o(r), i(r))
        }

        function l() {
            f && (t(c).unbind(b), t(c.body).removeClass("sp-dragging"), setTimeout(function() {
                a.apply(e, arguments)
            }, 0)), f = !1
        }
        r = r || function() {}, n = n || function() {}, a = a || function() {};
        var c = document,
            f = !1,
            u = {},
            h = 0,
            d = 0,
            p = "ontouchstart" in window,
            b = {};
        b.selectstart = i, b.dragstart = i, b["touchmove mousemove"] = o, b["touchend mouseup"] = l, t(e).bind("touchstart mousedown", s)
    }

    function u(t, e, r) {
        var n;
        return function() {
            var a = this,
                i = arguments,
                o = function() {
                    n = null, t.apply(a, i)
                };
            r && clearTimeout(n), !r && n || (n = setTimeout(o, e))
        }
    }

    function h() {
        return t.fn.spectrum.inputTypeColorSupport()
    }
    var d = {
            beforeShow: s,
            move: s,
            change: s,
            show: s,
            hide: s,
            color: !1,
            flat: !1,
            showInput: !1,
            allowEmpty: !1,
            showButtons: !0,
            clickoutFiresChange: !0,
            showInitial: !1,
            showPalette: !1,
            showPaletteOnly: !1,
            hideAfterPaletteSelect: !1,
            togglePaletteOnly: !1,
            showSelectionPalette: !0,
            localStorageKey: !1,
            appendTo: "body",
            maxSelectionSize: 7,
            cancelText: "cancel",
            chooseText: "choose",
            togglePaletteMoreText: "more",
            togglePaletteLessText: "less",
            clearText: "Clear Color Selection",
            noColorSelectedText: "No Color Selected",
            preferredFormat: !1,
            className: "",
            containerClassName: "",
            replacerClassName: "",
            showAlpha: !1,
            theme: "sp-light",
            palette: [
                ["#ffffff", "#000000", "#ff0000", "#ff8000", "#ffff00", "#008000", "#0000ff", "#4b0082", "#9400d3"]
            ],
            selectionPalette: [],
            disabled: !1,
            offset: null
        },
        p = [],
        g = !!/msie/i.exec(window.navigator.userAgent),
        b = function() {
            function t(t, e) {
                return !!~("" + t).indexOf(e)
            }
            var e = document.createElement("div"),
                r = e.style;
            return r.cssText = "background-color:rgba(0,0,0,.5)", t(r.backgroundColor, "rgba") || t(r.backgroundColor, "hsla")
        }(),
        v = ["<div class='sp-replacer'>", "<div class='sp-preview'><div class='sp-preview-inner'></div></div>", "<div class='sp-dd'>&#9660;</div>", "</div>"].join(""),
        m = function() {
            var t = "";
            if (g)
                for (var e = 1; 6 >= e; e++) t += "<div class='sp-" + e + "'></div>";
            return ["<div class='sp-container sp-hidden'>", "<div class='sp-palette-container'>", "<div class='sp-palette sp-thumb sp-cf'></div>", "<div class='sp-palette-button-container sp-cf'>", "<button type='button' class='sp-palette-toggle'></button>", "</div>", "</div>", "<div class='sp-picker-container'>", "<div class='sp-top sp-cf'>", "<div class='sp-fill'></div>", "<div class='sp-top-inner'>", "<div class='sp-color'>", "<div class='sp-sat'>", "<div class='sp-val'>", "<div class='sp-dragger'></div>", "</div>", "</div>", "</div>", "<div class='sp-clear sp-clear-display'>", "</div>", "<div class='sp-hue'>", "<div class='sp-slider'></div>", t, "</div>", "</div>", "<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>", "</div>", "<div class='sp-input-container sp-cf'>", "<input class='sp-input' type='text' spellcheck='false'  />", "</div>", "<div class='sp-initial sp-thumb sp-cf'></div>", "<div class='sp-button-container sp-cf'>", "<a class='sp-cancel' href='#'></a>", "<button type='button' class='sp-choose'></button>", "</div>", "</div>", "</div>"].join("")
        }(),
        y = "spectrum.id";
    t.fn.spectrum = function(e, r) {
            if ("string" == typeof e) {
                var n = this,
                    a = Array.prototype.slice.call(arguments, 1);
                return this.each(function() {
                    var r = p[t(this).data(y)];
                    if (r) {
                        var i = r[e];
                        if (!i) throw new Error("Spectrum: no such method: '" + e + "'");
                        "get" == e ? n = r.get() : "container" == e ? n = r.container : "option" == e ? n = r.option.apply(r, a) : "destroy" == e ? (r.destroy(), t(this).removeData(y)) : i.apply(r, a)
                    }
                }), n
            }
            return this.spectrum("destroy").each(function() {
                var r = t.extend({}, e, t(this).data()),
                    n = i(this, r);
                t(this).data(y, n.id)
            })
        }, t.fn.spectrum.load = !0, t.fn.spectrum.loadOpts = {}, t.fn.spectrum.draggable = f, t.fn.spectrum.defaults = d, t.fn.spectrum.inputTypeColorSupport = function w() {
            if ("undefined" == typeof w._cachedResult) {
                var e = t("<input type='color'/>")[0];
                w._cachedResult = "color" === e.type && "" !== e.value
            }
            return w._cachedResult
        }, t.spectrum = {}, t.spectrum.localization = {}, t.spectrum.palettes = {}, t.fn.spectrum.processNativeColorInputs = function() {
            var e = t("input[type=color]");
            e.length && !h() && e.spectrum({
                preferredFormat: "hex6"
            })
        },
        function() {
            function t(t) {
                var r = {
                        r: 0,
                        g: 0,
                        b: 0
                    },
                    a = 1,
                    o = !1,
                    s = !1;
                return "string" == typeof t && (t = T(t)), "object" == typeof t && (t.hasOwnProperty("r") && t.hasOwnProperty("g") && t.hasOwnProperty("b") ? (r = e(t.r, t.g, t.b), o = !0, s = "%" === String(t.r).substr(-1) ? "prgb" : "rgb") : t.hasOwnProperty("h") && t.hasOwnProperty("s") && t.hasOwnProperty("v") ? (t.s = R(t.s), t.v = R(t.v), r = i(t.h, t.s, t.v), o = !0, s = "hsv") : t.hasOwnProperty("h") && t.hasOwnProperty("s") && t.hasOwnProperty("l") && (t.s = R(t.s), t.l = R(t.l), r = n(t.h, t.s, t.l), o = !0, s = "hsl"), t.hasOwnProperty("a") && (a = t.a)), a = x(a), {
                    ok: o,
                    format: t.format || s,
                    r: D(255, I(r.r, 0)),
                    g: D(255, I(r.g, 0)),
                    b: D(255, I(r.b, 0)),
                    a: a
                }
            }

            function e(t, e, r) {
                return {
                    r: 255 * k(t, 255),
                    g: 255 * k(e, 255),
                    b: 255 * k(r, 255)
                }
            }

            function r(t, e, r) {
                t = k(t, 255), e = k(e, 255), r = k(r, 255);
                var n, a, i = I(t, e, r),
                    o = D(t, e, r),
                    s = (i + o) / 2;
                if (i == o) n = a = 0;
                else {
                    var l = i - o;
                    switch (a = s > .5 ? l / (2 - i - o) : l / (i + o), i) {
                        case t:
                            n = (e - r) / l + (r > e ? 6 : 0);
                            break;
                        case e:
                            n = (r - t) / l + 2;
                            break;
                        case r:
                            n = (t - e) / l + 4
                    }
                    n /= 6
                }
                return {
                    h: n,
                    s: a,
                    l: s
                }
            }

            function n(t, e, r) {
                function n(t, e, r) {
                    return 0 > r && (r += 1), r > 1 && (r -= 1), 1 / 6 > r ? t + 6 * (e - t) * r : .5 > r ? e : 2 / 3 > r ? t + (e - t) * (2 / 3 - r) * 6 : t
                }
                var a, i, o;
                if (t = k(t, 360), e = k(e, 100), r = k(r, 100), 0 === e) a = i = o = r;
                else {
                    var s = .5 > r ? r * (1 + e) : r + e - r * e,
                        l = 2 * r - s;
                    a = n(l, s, t + 1 / 3), i = n(l, s, t), o = n(l, s, t - 1 / 3)
                }
                return {
                    r: 255 * a,
                    g: 255 * i,
                    b: 255 * o
                }
            }

            function a(t, e, r) {
                t = k(t, 255), e = k(e, 255), r = k(r, 255);
                var n, a, i = I(t, e, r),
                    o = D(t, e, r),
                    s = i,
                    l = i - o;
                if (a = 0 === i ? 0 : l / i, i == o) n = 0;
                else {
                    switch (i) {
                        case t:
                            n = (e - r) / l + (r > e ? 6 : 0);
                            break;
                        case e:
                            n = (r - t) / l + 2;
                            break;
                        case r:
                            n = (t - e) / l + 4
                    }
                    n /= 6
                }
                return {
                    h: n,
                    s: a,
                    v: s
                }
            }

            function i(t, e, r) {
                t = 6 * k(t, 360), e = k(e, 100), r = k(r, 100);
                var n = j.floor(t),
                    a = t - n,
                    i = r * (1 - e),
                    o = r * (1 - a * e),
                    s = r * (1 - (1 - a) * e),
                    l = n % 6,
                    c = [r, o, i, i, s, r][l],
                    f = [s, r, r, o, i, i][l],
                    u = [i, i, s, r, r, o][l];
                return {
                    r: 255 * c,
                    g: 255 * f,
                    b: 255 * u
                }
            }

            function o(t, e, r, n) {
                var a = [M(E(t).toString(16)), M(E(e).toString(16)), M(E(r).toString(16))];
                return n && a[0].charAt(0) == a[0].charAt(1) && a[1].charAt(0) == a[1].charAt(1) && a[2].charAt(0) == a[2].charAt(1) ? a[0].charAt(0) + a[1].charAt(0) + a[2].charAt(0) : a.join("")
            }

            function s(t, e, r, n) {
                var a = [M(H(n)), M(E(t).toString(16)), M(E(e).toString(16)), M(E(r).toString(16))];
                return a.join("")
            }

            function l(t, e) {
                e = 0 === e ? 0 : e || 10;
                var r = B(t).toHsl();
                return r.s -= e / 100, r.s = S(r.s), B(r)
            }

            function c(t, e) {
                e = 0 === e ? 0 : e || 10;
                var r = B(t).toHsl();
                return r.s += e / 100, r.s = S(r.s), B(r)
            }

            function f(t) {
                return B(t).desaturate(100)
            }

            function u(t, e) {
                e = 0 === e ? 0 : e || 10;
                var r = B(t).toHsl();
                return r.l += e / 100, r.l = S(r.l), B(r)
            }

            function h(t, e) {
                e = 0 === e ? 0 : e || 10;
                var r = B(t).toRgb();
                return r.r = I(0, D(255, r.r - E(255 * -(e / 100)))), r.g = I(0, D(255, r.g - E(255 * -(e / 100)))), r.b = I(0, D(255, r.b - E(255 * -(e / 100)))), B(r)
            }

            function d(t, e) {
                e = 0 === e ? 0 : e || 10;
                var r = B(t).toHsl();
                return r.l -= e / 100, r.l = S(r.l), B(r)
            }

            function p(t, e) {
                var r = B(t).toHsl(),
                    n = (E(r.h) + e) % 360;
                return r.h = 0 > n ? 360 + n : n, B(r)
            }

            function g(t) {
                var e = B(t).toHsl();
                return e.h = (e.h + 180) % 360, B(e)
            }

            function b(t) {
                var e = B(t).toHsl(),
                    r = e.h;
                return [B(t), B({
                    h: (r + 120) % 360,
                    s: e.s,
                    l: e.l
                }), B({
                    h: (r + 240) % 360,
                    s: e.s,
                    l: e.l
                })]
            }

            function v(t) {
                var e = B(t).toHsl(),
                    r = e.h;
                return [B(t), B({
                    h: (r + 90) % 360,
                    s: e.s,
                    l: e.l
                }), B({
                    h: (r + 180) % 360,
                    s: e.s,
                    l: e.l
                }), B({
                    h: (r + 270) % 360,
                    s: e.s,
                    l: e.l
                })]
            }

            function m(t) {
                var e = B(t).toHsl(),
                    r = e.h;
                return [B(t), B({
                    h: (r + 72) % 360,
                    s: e.s,
                    l: e.l
                }), B({
                    h: (r + 216) % 360,
                    s: e.s,
                    l: e.l
                })]
            }

            function y(t, e, r) {
                e = e || 6, r = r || 30;
                var n = B(t).toHsl(),
                    a = 360 / r,
                    i = [B(t)];
                for (n.h = (n.h - (a * e >> 1) + 720) % 360; --e;) n.h = (n.h + a) % 360, i.push(B(n));
                return i
            }

            function w(t, e) {
                e = e || 6;
                for (var r = B(t).toHsv(), n = r.h, a = r.s, i = r.v, o = [], s = 1 / e; e--;) o.push(B({
                    h: n,
                    s: a,
                    v: i
                })), i = (i + s) % 1;
                return o
            }

            function _(t) {
                var e = {};
                for (var r in t) t.hasOwnProperty(r) && (e[t[r]] = r);
                return e
            }

            function x(t) {
                return t = parseFloat(t), (isNaN(t) || 0 > t || t > 1) && (t = 1), t
            }

            function k(t, e) {
                P(t) && (t = "100%");
                var r = A(t);
                return t = D(e, I(0, parseFloat(t))), r && (t = parseInt(t * e, 10) / 100), j.abs(t - e) < 1e-6 ? 1 : t % e / parseFloat(e)
            }

            function S(t) {
                return D(1, I(0, t))
            }

            function C(t) {
                return parseInt(t, 16)
            }

            function P(t) {
                return "string" == typeof t && -1 != t.indexOf(".") && 1 === parseFloat(t)
            }

            function A(t) {
                return "string" == typeof t && -1 != t.indexOf("%")
            }

            function M(t) {
                return 1 == t.length ? "0" + t : "" + t
            }

            function R(t) {
                return 1 >= t && (t = 100 * t + "%"), t
            }

            function H(t) {
                return Math.round(255 * parseFloat(t)).toString(16)
            }

            function F(t) {
                return C(t) / 255
            }

            function T(t) {
                t = t.replace(O, "").replace(q, "").toLowerCase();
                var e = !1;
                if (L[t]) t = L[t], e = !0;
                else if ("transparent" == t) return {
                    r: 0,
                    g: 0,
                    b: 0,
                    a: 0,
                    format: "name"
                };
                var r;
                return (r = V.rgb.exec(t)) ? {
                    r: r[1],
                    g: r[2],
                    b: r[3]
                } : (r = V.rgba.exec(t)) ? {
                    r: r[1],
                    g: r[2],
                    b: r[3],
                    a: r[4]
                } : (r = V.hsl.exec(t)) ? {
                    h: r[1],
                    s: r[2],
                    l: r[3]
                } : (r = V.hsla.exec(t)) ? {
                    h: r[1],
                    s: r[2],
                    l: r[3],
                    a: r[4]
                } : (r = V.hsv.exec(t)) ? {
                    h: r[1],
                    s: r[2],
                    v: r[3]
                } : (r = V.hsva.exec(t)) ? {
                    h: r[1],
                    s: r[2],
                    v: r[3],
                    a: r[4]
                } : (r = V.hex8.exec(t)) ? {
                    a: F(r[1]),
                    r: C(r[2]),
                    g: C(r[3]),
                    b: C(r[4]),
                    format: e ? "name" : "hex8"
                } : (r = V.hex6.exec(t)) ? {
                    r: C(r[1]),
                    g: C(r[2]),
                    b: C(r[3]),
                    format: e ? "name" : "hex"
                } : (r = V.hex3.exec(t)) ? {
                    r: C(r[1] + "" + r[1]),
                    g: C(r[2] + "" + r[2]),
                    b: C(r[3] + "" + r[3]),
                    format: e ? "name" : "hex"
                } : !1
            }
            var O = /^[\s,#]+/,
                q = /\s+$/,
                N = 0,
                j = Math,
                E = j.round,
                D = j.min,
                I = j.max,
                z = j.random,
                B = function(e, r) {
                    if (e = e ? e : "", r = r || {}, e instanceof B) return e;
                    if (!(this instanceof B)) return new B(e, r);
                    var n = t(e);
                    this._originalInput = e, this._r = n.r, this._g = n.g, this._b = n.b, this._a = n.a, this._roundA = E(100 * this._a) / 100, this._format = r.format || n.format, this._gradientType = r.gradientType, this._r < 1 && (this._r = E(this._r)), this._g < 1 && (this._g = E(this._g)), this._b < 1 && (this._b = E(this._b)), this._ok = n.ok, this._tc_id = N++
                };
            B.prototype = {
                isDark: function() {
                    return this.getBrightness() < 128
                },
                isLight: function() {
                    return !this.isDark()
                },
                isValid: function() {
                    return this._ok
                },
                getOriginalInput: function() {
                    return this._originalInput
                },
                getFormat: function() {
                    return this._format
                },
                getAlpha: function() {
                    return this._a
                },
                getBrightness: function() {
                    var t = this.toRgb();
                    return (299 * t.r + 587 * t.g + 114 * t.b) / 1e3
                },
                setAlpha: function(t) {
                    return this._a = x(t), this._roundA = E(100 * this._a) / 100, this
                },
                toHsv: function() {
                    var t = a(this._r, this._g, this._b);
                    return {
                        h: 360 * t.h,
                        s: t.s,
                        v: t.v,
                        a: this._a
                    }
                },
                toHsvString: function() {
                    var t = a(this._r, this._g, this._b),
                        e = E(360 * t.h),
                        r = E(100 * t.s),
                        n = E(100 * t.v);
                    return 1 == this._a ? "hsv(" + e + ", " + r + "%, " + n + "%)" : "hsva(" + e + ", " + r + "%, " + n + "%, " + this._roundA + ")"
                },
                toHsl: function() {
                    var t = r(this._r, this._g, this._b);
                    return {
                        h: 360 * t.h,
                        s: t.s,
                        l: t.l,
                        a: this._a
                    }
                },
                toHslString: function() {
                    var t = r(this._r, this._g, this._b),
                        e = E(360 * t.h),
                        n = E(100 * t.s),
                        a = E(100 * t.l);
                    return 1 == this._a ? "hsl(" + e + ", " + n + "%, " + a + "%)" : "hsla(" + e + ", " + n + "%, " + a + "%, " + this._roundA + ")"
                },
                toHex: function(t) {
                    return o(this._r, this._g, this._b, t)
                },
                toHexString: function(t) {
                    return "#" + this.toHex(t)
                },
                toHex8: function() {
                    return s(this._r, this._g, this._b, this._a)
                },
                toHex8String: function() {
                    return "#" + this.toHex8()
                },
                toRgb: function() {
                    return {
                        r: E(this._r),
                        g: E(this._g),
                        b: E(this._b),
                        a: this._a
                    }
                },
                toRgbString: function() {
                    return 1 == this._a ? "rgb(" + E(this._r) + ", " + E(this._g) + ", " + E(this._b) + ")" : "rgba(" + E(this._r) + ", " + E(this._g) + ", " + E(this._b) + ", " + this._roundA + ")"
                },
                toPercentageRgb: function() {
                    return {
                        r: E(100 * k(this._r, 255)) + "%",
                        g: E(100 * k(this._g, 255)) + "%",
                        b: E(100 * k(this._b, 255)) + "%",
                        a: this._a
                    }
                },
                toPercentageRgbString: function() {
                    return 1 == this._a ? "rgb(" + E(100 * k(this._r, 255)) + "%, " + E(100 * k(this._g, 255)) + "%, " + E(100 * k(this._b, 255)) + "%)" : "rgba(" + E(100 * k(this._r, 255)) + "%, " + E(100 * k(this._g, 255)) + "%, " + E(100 * k(this._b, 255)) + "%, " + this._roundA + ")"
                },
                toName: function() {
                    return 0 === this._a ? "transparent" : this._a < 1 ? !1 : K[o(this._r, this._g, this._b, !0)] || !1
                },
                toFilter: function(t) {
                    var e = "#" + s(this._r, this._g, this._b, this._a),
                        r = e,
                        n = this._gradientType ? "GradientType = 1, " : "";
                    if (t) {
                        var a = B(t);
                        r = a.toHex8String()
                    }
                    return "progid:DXImageTransform.Microsoft.gradient(" + n + "startColorstr=" + e + ",endColorstr=" + r + ")"
                },
                toString: function(t) {
                    var e = !!t;
                    t = t || this._format;
                    var r = !1,
                        n = this._a < 1 && this._a >= 0,
                        a = !e && n && ("hex" === t || "hex6" === t || "hex3" === t || "name" === t);
                    return a ? "name" === t && 0 === this._a ? this.toName() : this.toRgbString() : ("rgb" === t && (r = this.toRgbString()), "prgb" === t && (r = this.toPercentageRgbString()), "hex" !== t && "hex6" !== t || (r = this.toHexString()), "hex3" === t && (r = this.toHexString(!0)), "hex8" === t && (r = this.toHex8String()), "name" === t && (r = this.toName()), "hsl" === t && (r = this.toHslString()), "hsv" === t && (r = this.toHsvString()), r || this.toHexString())
                },
                _applyModification: function(t, e) {
                    var r = t.apply(null, [this].concat([].slice.call(e)));
                    return this._r = r._r, this._g = r._g, this._b = r._b, this.setAlpha(r._a), this
                },
                lighten: function() {
                    return this._applyModification(u, arguments)
                },
                brighten: function() {
                    return this._applyModification(h, arguments)
                },
                darken: function() {
                    return this._applyModification(d, arguments)
                },
                desaturate: function() {
                    return this._applyModification(l, arguments)
                },
                saturate: function() {
                    return this._applyModification(c, arguments)
                },
                greyscale: function() {
                    return this._applyModification(f, arguments)
                },
                spin: function() {
                    return this._applyModification(p, arguments)
                },
                _applyCombination: function(t, e) {
                    return t.apply(null, [this].concat([].slice.call(e)))
                },
                analogous: function() {
                    return this._applyCombination(y, arguments)
                },
                complement: function() {
                    return this._applyCombination(g, arguments)
                },
                monochromatic: function() {
                    return this._applyCombination(w, arguments)
                },
                splitcomplement: function() {
                    return this._applyCombination(m, arguments)
                },
                triad: function() {
                    return this._applyCombination(b, arguments)
                },
                tetrad: function() {
                    return this._applyCombination(v, arguments)
                }
            }, B.fromRatio = function(t, e) {
                if ("object" == typeof t) {
                    var r = {};
                    for (var n in t) t.hasOwnProperty(n) && ("a" === n ? r[n] = t[n] : r[n] = R(t[n]));
                    t = r
                }
                return B(t, e)
            }, B.equals = function(t, e) {
                return t && e ? B(t).toRgbString() == B(e).toRgbString() : !1
            }, B.random = function() {
                return B.fromRatio({
                    r: z(),
                    g: z(),
                    b: z()
                })
            }, B.mix = function(t, e, r) {
                r = 0 === r ? 0 : r || 50;
                var n, a = B(t).toRgb(),
                    i = B(e).toRgb(),
                    o = r / 100,
                    s = 2 * o - 1,
                    l = i.a - a.a;
                n = s * l == -1 ? s : (s + l) / (1 + s * l), n = (n + 1) / 2;
                var c = 1 - n,
                    f = {
                        r: i.r * n + a.r * c,
                        g: i.g * n + a.g * c,
                        b: i.b * n + a.b * c,
                        a: i.a * o + a.a * (1 - o)
                    };
                return B(f)
            }, B.readability = function(t, e) {
                var r = B(t),
                    n = B(e),
                    a = r.toRgb(),
                    i = n.toRgb(),
                    o = r.getBrightness(),
                    s = n.getBrightness(),
                    l = Math.max(a.r, i.r) - Math.min(a.r, i.r) + Math.max(a.g, i.g) - Math.min(a.g, i.g) + Math.max(a.b, i.b) - Math.min(a.b, i.b);
                return {
                    brightness: Math.abs(o - s),
                    color: l
                }
            }, B.isReadable = function(t, e) {
                var r = B.readability(t, e);
                return r.brightness > 125 && r.color > 500
            }, B.mostReadable = function(t, e) {
                for (var r = null, n = 0, a = !1, i = 0; i < e.length; i++) {
                    var o = B.readability(t, e[i]),
                        s = o.brightness > 125 && o.color > 500,
                        l = 3 * (o.brightness / 125) + o.color / 500;
                    (s && !a || s && a && l > n || !s && !a && l > n) && (a = s, n = l, r = B(e[i]))
                }
                return r
            };
            var L = B.names = {
                    aliceblue: "f0f8ff",
                    antiquewhite: "faebd7",
                    aqua: "0ff",
                    aquamarine: "7fffd4",
                    azure: "f0ffff",
                    beige: "f5f5dc",
                    bisque: "ffe4c4",
                    black: "000",
                    blanchedalmond: "ffebcd",
                    blue: "00f",
                    blueviolet: "8a2be2",
                    brown: "a52a2a",
                    burlywood: "deb887",
                    burntsienna: "ea7e5d",
                    cadetblue: "5f9ea0",
                    chartreuse: "7fff00",
                    chocolate: "d2691e",
                    coral: "ff7f50",
                    cornflowerblue: "6495ed",
                    cornsilk: "fff8dc",
                    crimson: "dc143c",
                    cyan: "0ff",
                    darkblue: "00008b",
                    darkcyan: "008b8b",
                    darkgoldenrod: "b8860b",
                    darkgray: "a9a9a9",
                    darkgreen: "006400",
                    darkgrey: "a9a9a9",
                    darkkhaki: "bdb76b",
                    darkmagenta: "8b008b",
                    darkolivegreen: "556b2f",
                    darkorange: "ff8c00",
                    darkorchid: "9932cc",
                    darkred: "8b0000",
                    darksalmon: "e9967a",
                    darkseagreen: "8fbc8f",
                    darkslateblue: "483d8b",
                    darkslategray: "2f4f4f",
                    darkslategrey: "2f4f4f",
                    darkturquoise: "00ced1",
                    darkviolet: "9400d3",
                    deeppink: "ff1493",
                    deepskyblue: "00bfff",
                    dimgray: "696969",
                    dimgrey: "696969",
                    dodgerblue: "1e90ff",
                    firebrick: "b22222",
                    floralwhite: "fffaf0",
                    forestgreen: "228b22",
                    fuchsia: "f0f",
                    gainsboro: "dcdcdc",
                    ghostwhite: "f8f8ff",
                    gold: "ffd700",
                    goldenrod: "daa520",
                    gray: "808080",
                    green: "008000",
                    greenyellow: "adff2f",
                    grey: "808080",
                    honeydew: "f0fff0",
                    hotpink: "ff69b4",
                    indianred: "cd5c5c",
                    indigo: "4b0082",
                    ivory: "fffff0",
                    khaki: "f0e68c",
                    lavender: "e6e6fa",
                    lavenderblush: "fff0f5",
                    lawngreen: "7cfc00",
                    lemonchiffon: "fffacd",
                    lightblue: "add8e6",
                    lightcoral: "f08080",
                    lightcyan: "e0ffff",
                    lightgoldenrodyellow: "fafad2",
                    lightgray: "d3d3d3",
                    lightgreen: "90ee90",
                    lightgrey: "d3d3d3",
                    lightpink: "ffb6c1",
                    lightsalmon: "ffa07a",
                    lightseagreen: "20b2aa",
                    lightskyblue: "87cefa",
                    lightslategray: "789",
                    lightslategrey: "789",
                    lightsteelblue: "b0c4de",
                    lightyellow: "ffffe0",
                    lime: "0f0",
                    limegreen: "32cd32",
                    linen: "faf0e6",
                    magenta: "f0f",
                    maroon: "800000",
                    mediumaquamarine: "66cdaa",
                    mediumblue: "0000cd",
                    mediumorchid: "ba55d3",
                    mediumpurple: "9370db",
                    mediumseagreen: "3cb371",
                    mediumslateblue: "7b68ee",
                    mediumspringgreen: "00fa9a",
                    mediumturquoise: "48d1cc",
                    mediumvioletred: "c71585",
                    midnightblue: "191970",
                    mintcream: "f5fffa",
                    mistyrose: "ffe4e1",
                    moccasin: "ffe4b5",
                    navajowhite: "ffdead",
                    navy: "000080",
                    oldlace: "fdf5e6",
                    olive: "808000",
                    olivedrab: "6b8e23",
                    orange: "ffa500",
                    orangered: "ff4500",
                    orchid: "da70d6",
                    palegoldenrod: "eee8aa",
                    palegreen: "98fb98",
                    paleturquoise: "afeeee",
                    palevioletred: "db7093",
                    papayawhip: "ffefd5",
                    peachpuff: "ffdab9",
                    peru: "cd853f",
                    pink: "ffc0cb",
                    plum: "dda0dd",
                    powderblue: "b0e0e6",
                    purple: "800080",
                    rebeccapurple: "663399",
                    red: "f00",
                    rosybrown: "bc8f8f",
                    royalblue: "4169e1",
                    saddlebrown: "8b4513",
                    salmon: "fa8072",
                    sandybrown: "f4a460",
                    seagreen: "2e8b57",
                    seashell: "fff5ee",
                    sienna: "a0522d",
                    silver: "c0c0c0",
                    skyblue: "87ceeb",
                    slateblue: "6a5acd",
                    slategray: "708090",
                    slategrey: "708090",
                    snow: "fffafa",
                    springgreen: "00ff7f",
                    steelblue: "4682b4",
                    tan: "d2b48c",
                    teal: "008080",
                    thistle: "d8bfd8",
                    tomato: "ff6347",
                    turquoise: "40e0d0",
                    violet: "ee82ee",
                    wheat: "f5deb3",
                    white: "fff",
                    whitesmoke: "f5f5f5",
                    yellow: "ff0",
                    yellowgreen: "9acd32"
                },
                K = B.hexNames = _(L),
                V = function() {
                    var t = "[-\\+]?\\d+%?",
                        e = "[-\\+]?\\d*\\.\\d+%?",
                        r = "(?:" + e + ")|(?:" + t + ")",
                        n = "[\\s|\\(]+(" + r + ")[,|\\s]+(" + r + ")[,|\\s]+(" + r + ")\\s*\\)?",
                        a = "[\\s|\\(]+(" + r + ")[,|\\s]+(" + r + ")[,|\\s]+(" + r + ")[,|\\s]+(" + r + ")\\s*\\)?";
                    return {
                        rgb: new RegExp("rgb" + n),
                        rgba: new RegExp("rgba" + a),
                        hsl: new RegExp("hsl" + n),
                        hsla: new RegExp("hsla" + a),
                        hsv: new RegExp("hsv" + n),
                        hsva: new RegExp("hsva" + a),
                        hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
                        hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
                        hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
                    }
                }();
            window.tinycolor = B
        }(), t(function() {
            t.fn.spectrum.load && t.fn.spectrum.processNativeColorInputs()
        })
});
! function(e) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = e();
    else if ("function" == typeof define && define.amd) define([], e);
    else {
        var t;
        t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, t.React = e()
    }
}(function() {
    return function e(t, n, r) {
        function o(a, u) {
            if (!n[a]) {
                if (!t[a]) {
                    var s = "function" == typeof require && require;
                    if (!u && s) return s(a, !0);
                    if (i) return i(a, !0);
                    var l = new Error("Cannot find module '" + a + "'");
                    throw l.code = "MODULE_NOT_FOUND", l
                }
                var c = n[a] = {
                    exports: {}
                };
                t[a][0].call(c.exports, function(e) {
                    var n = t[a][1][e];
                    return o(n ? n : e)
                }, c, c.exports, e, t, n, r)
            }
            return n[a].exports
        }
        for (var i = "function" == typeof require && require, a = 0; a < r.length; a++) o(r[a]);
        return o
    }({
        1: [function(e, t, n) {
            "use strict";
            var r = e(19),
                o = e(32),
                i = e(34),
                a = e(33),
                u = e(38),
                s = e(39),
                l = e(55),
                c = (e(56), e(40)),
                p = e(51),
                d = e(54),
                f = e(64),
                h = e(68),
                m = e(73),
                v = e(76),
                g = e(79),
                y = e(82),
                C = e(27),
                E = e(115),
                b = e(142);
            d.inject();
            var _ = l.createElement,
                x = l.createFactory,
                D = l.cloneElement,
                M = m.measure("React", "render", h.render),
                N = {
                    Children: {
                        map: o.map,
                        forEach: o.forEach,
                        count: o.count,
                        only: b
                    },
                    Component: i,
                    DOM: c,
                    PropTypes: v,
                    initializeTouchEvents: function(e) {
                        r.useTouchEvents = e
                    },
                    createClass: a.createClass,
                    createElement: _,
                    cloneElement: D,
                    createFactory: x,
                    createMixin: function(e) {
                        return e
                    },
                    constructAndRenderComponent: h.constructAndRenderComponent,
                    constructAndRenderComponentByID: h.constructAndRenderComponentByID,
                    findDOMNode: E,
                    render: M,
                    renderToString: y.renderToString,
                    renderToStaticMarkup: y.renderToStaticMarkup,
                    unmountComponentAtNode: h.unmountComponentAtNode,
                    isValidElement: l.isValidElement,
                    withContext: u.withContext,
                    __spread: C
                };
            "undefined" != typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ && "function" == typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject && __REACT_DEVTOOLS_GLOBAL_HOOK__.inject({
                CurrentOwner: s,
                InstanceHandles: f,
                Mount: h,
                Reconciler: g,
                TextComponent: p
            }), N.version = "0.13.3", t.exports = N
        }, {
            115: 115,
            142: 142,
            19: 19,
            27: 27,
            32: 32,
            33: 33,
            34: 34,
            38: 38,
            39: 39,
            40: 40,
            51: 51,
            54: 54,
            55: 55,
            56: 56,
            64: 64,
            68: 68,
            73: 73,
            76: 76,
            79: 79,
            82: 82
        }],
        2: [function(e, t, n) {
            "use strict";
            var r = e(117),
                o = {
                    componentDidMount: function() {
                        this.props.autoFocus && r(this.getDOMNode())
                    }
                };
            t.exports = o
        }, {
            117: 117
        }],
        3: [function(e, t, n) {
            "use strict";

            function r() {
                var e = window.opera;
                return "object" == typeof e && "function" == typeof e.version && parseInt(e.version(), 10) <= 12
            }

            function o(e) {
                return (e.ctrlKey || e.altKey || e.metaKey) && !(e.ctrlKey && e.altKey)
            }

            function i(e) {
                switch (e) {
                    case T.topCompositionStart:
                        return P.compositionStart;
                    case T.topCompositionEnd:
                        return P.compositionEnd;
                    case T.topCompositionUpdate:
                        return P.compositionUpdate
                }
            }

            function a(e, t) {
                return e === T.topKeyDown && t.keyCode === b
            }

            function u(e, t) {
                switch (e) {
                    case T.topKeyUp:
                        return -1 !== E.indexOf(t.keyCode);
                    case T.topKeyDown:
                        return t.keyCode !== b;
                    case T.topKeyPress:
                    case T.topMouseDown:
                    case T.topBlur:
                        return !0;
                    default:
                        return !1
                }
            }

            function s(e) {
                var t = e.detail;
                return "object" == typeof t && "data" in t ? t.data : null
            }

            function l(e, t, n, r) {
                var o, l;
                if (_ ? o = i(e) : w ? u(e, r) && (o = P.compositionEnd) : a(e, r) && (o = P.compositionStart), !o) return null;
                M && (w || o !== P.compositionStart ? o === P.compositionEnd && w && (l = w.getData()) : w = v.getPooled(t));
                var c = g.getPooled(o, n, r);
                if (l) c.data = l;
                else {
                    var p = s(r);
                    null !== p && (c.data = p)
                }
                return h.accumulateTwoPhaseDispatches(c), c
            }

            function c(e, t) {
                switch (e) {
                    case T.topCompositionEnd:
                        return s(t);
                    case T.topKeyPress:
                        var n = t.which;
                        return n !== N ? null : (R = !0, I);
                    case T.topTextInput:
                        var r = t.data;
                        return r === I && R ? null : r;
                    default:
                        return null
                }
            }

            function p(e, t) {
                if (w) {
                    if (e === T.topCompositionEnd || u(e, t)) {
                        var n = w.getData();
                        return v.release(w), w = null, n
                    }
                    return null
                }
                switch (e) {
                    case T.topPaste:
                        return null;
                    case T.topKeyPress:
                        return t.which && !o(t) ? String.fromCharCode(t.which) : null;
                    case T.topCompositionEnd:
                        return M ? null : t.data;
                    default:
                        return null
                }
            }

            function d(e, t, n, r) {
                var o;
                if (o = D ? c(e, r) : p(e, r), !o) return null;
                var i = y.getPooled(P.beforeInput, n, r);
                return i.data = o, h.accumulateTwoPhaseDispatches(i), i
            }
            var f = e(15),
                h = e(20),
                m = e(21),
                v = e(22),
                g = e(91),
                y = e(95),
                C = e(139),
                E = [9, 13, 27, 32],
                b = 229,
                _ = m.canUseDOM && "CompositionEvent" in window,
                x = null;
            m.canUseDOM && "documentMode" in document && (x = document.documentMode);
            var D = m.canUseDOM && "TextEvent" in window && !x && !r(),
                M = m.canUseDOM && (!_ || x && x > 8 && 11 >= x),
                N = 32,
                I = String.fromCharCode(N),
                T = f.topLevelTypes,
                P = {
                    beforeInput: {
                        phasedRegistrationNames: {
                            bubbled: C({
                                onBeforeInput: null
                            }),
                            captured: C({
                                onBeforeInputCapture: null
                            })
                        },
                        dependencies: [T.topCompositionEnd, T.topKeyPress, T.topTextInput, T.topPaste]
                    },
                    compositionEnd: {
                        phasedRegistrationNames: {
                            bubbled: C({
                                onCompositionEnd: null
                            }),
                            captured: C({
                                onCompositionEndCapture: null
                            })
                        },
                        dependencies: [T.topBlur, T.topCompositionEnd, T.topKeyDown, T.topKeyPress, T.topKeyUp, T.topMouseDown]
                    },
                    compositionStart: {
                        phasedRegistrationNames: {
                            bubbled: C({
                                onCompositionStart: null
                            }),
                            captured: C({
                                onCompositionStartCapture: null
                            })
                        },
                        dependencies: [T.topBlur, T.topCompositionStart, T.topKeyDown, T.topKeyPress, T.topKeyUp, T.topMouseDown]
                    },
                    compositionUpdate: {
                        phasedRegistrationNames: {
                            bubbled: C({
                                onCompositionUpdate: null
                            }),
                            captured: C({
                                onCompositionUpdateCapture: null
                            })
                        },
                        dependencies: [T.topBlur, T.topCompositionUpdate, T.topKeyDown, T.topKeyPress, T.topKeyUp, T.topMouseDown]
                    }
                },
                R = !1,
                w = null,
                O = {
                    eventTypes: P,
                    extractEvents: function(e, t, n, r) {
                        return [l(e, t, n, r), d(e, t, n, r)]
                    }
                };
            t.exports = O
        }, {
            139: 139,
            15: 15,
            20: 20,
            21: 21,
            22: 22,
            91: 91,
            95: 95
        }],
        4: [function(e, t, n) {
            "use strict";

            function r(e, t) {
                return e + t.charAt(0).toUpperCase() + t.substring(1)
            }
            var o = {
                    boxFlex: !0,
                    boxFlexGroup: !0,
                    columnCount: !0,
                    flex: !0,
                    flexGrow: !0,
                    flexPositive: !0,
                    flexShrink: !0,
                    flexNegative: !0,
                    fontWeight: !0,
                    lineClamp: !0,
                    lineHeight: !0,
                    opacity: !0,
                    order: !0,
                    orphans: !0,
                    widows: !0,
                    zIndex: !0,
                    zoom: !0,
                    fillOpacity: !0,
                    strokeDashoffset: !0,
                    strokeOpacity: !0,
                    strokeWidth: !0
                },
                i = ["Webkit", "ms", "Moz", "O"];
            Object.keys(o).forEach(function(e) {
                i.forEach(function(t) {
                    o[r(t, e)] = o[e]
                })
            });
            var a = {
                    background: {
                        backgroundImage: !0,
                        backgroundPosition: !0,
                        backgroundRepeat: !0,
                        backgroundColor: !0
                    },
                    border: {
                        borderWidth: !0,
                        borderStyle: !0,
                        borderColor: !0
                    },
                    borderBottom: {
                        borderBottomWidth: !0,
                        borderBottomStyle: !0,
                        borderBottomColor: !0
                    },
                    borderLeft: {
                        borderLeftWidth: !0,
                        borderLeftStyle: !0,
                        borderLeftColor: !0
                    },
                    borderRight: {
                        borderRightWidth: !0,
                        borderRightStyle: !0,
                        borderRightColor: !0
                    },
                    borderTop: {
                        borderTopWidth: !0,
                        borderTopStyle: !0,
                        borderTopColor: !0
                    },
                    font: {
                        fontStyle: !0,
                        fontVariant: !0,
                        fontWeight: !0,
                        fontSize: !0,
                        lineHeight: !0,
                        fontFamily: !0
                    }
                },
                u = {
                    isUnitlessNumber: o,
                    shorthandPropertyExpansions: a
                };
            t.exports = u
        }, {}],
        5: [function(e, t, n) {
            "use strict";
            var r = e(4),
                o = e(21),
                i = (e(106), e(111)),
                a = e(131),
                u = e(141),
                s = (e(150), u(function(e) {
                    return a(e)
                })),
                l = "cssFloat";
            o.canUseDOM && void 0 === document.documentElement.style.cssFloat && (l = "styleFloat");
            var c = {
                createMarkupForStyles: function(e) {
                    var t = "";
                    for (var n in e)
                        if (e.hasOwnProperty(n)) {
                            var r = e[n];
                            null != r && (t += s(n) + ":", t += i(n, r) + ";")
                        }
                    return t || null
                },
                setValueForStyles: function(e, t) {
                    var n = e.style;
                    for (var o in t)
                        if (t.hasOwnProperty(o)) {
                            var a = i(o, t[o]);
                            if ("float" === o && (o = l), a) n[o] = a;
                            else {
                                var u = r.shorthandPropertyExpansions[o];
                                if (u)
                                    for (var s in u) n[s] = "";
                                else n[o] = ""
                            }
                        }
                }
            };
            t.exports = c
        }, {
            106: 106,
            111: 111,
            131: 131,
            141: 141,
            150: 150,
            21: 21,
            4: 4
        }],
        6: [function(e, t, n) {
            "use strict";

            function r() {
                this._callbacks = null, this._contexts = null
            }
            var o = e(28),
                i = e(27),
                a = e(133);
            i(r.prototype, {
                enqueue: function(e, t) {
                    this._callbacks = this._callbacks || [], this._contexts = this._contexts || [], this._callbacks.push(e), this._contexts.push(t)
                },
                notifyAll: function() {
                    var e = this._callbacks,
                        t = this._contexts;
                    if (e) {
                        a(e.length === t.length), this._callbacks = null, this._contexts = null;
                        for (var n = 0, r = e.length; r > n; n++) e[n].call(t[n]);
                        e.length = 0, t.length = 0
                    }
                },
                reset: function() {
                    this._callbacks = null, this._contexts = null
                },
                destructor: function() {
                    this.reset()
                }
            }), o.addPoolingTo(r), t.exports = r
        }, {
            133: 133,
            27: 27,
            28: 28
        }],
        7: [function(e, t, n) {
            "use strict";

            function r(e) {
                return "SELECT" === e.nodeName || "INPUT" === e.nodeName && "file" === e.type
            }

            function o(e) {
                var t = x.getPooled(T.change, R, e);
                E.accumulateTwoPhaseDispatches(t), _.batchedUpdates(i, t)
            }

            function i(e) {
                C.enqueueEvents(e), C.processEventQueue()
            }

            function a(e, t) {
                P = e, R = t, P.attachEvent("onchange", o)
            }

            function u() {
                P && (P.detachEvent("onchange", o), P = null, R = null)
            }

            function s(e, t, n) {
                return e === I.topChange ? n : void 0
            }

            function l(e, t, n) {
                e === I.topFocus ? (u(), a(t, n)) : e === I.topBlur && u()
            }

            function c(e, t) {
                P = e, R = t, w = e.value, O = Object.getOwnPropertyDescriptor(e.constructor.prototype, "value"), Object.defineProperty(P, "value", k), P.attachEvent("onpropertychange", d)
            }

            function p() {
                P && (delete P.value, P.detachEvent("onpropertychange", d), P = null, R = null, w = null, O = null)
            }

            function d(e) {
                if ("value" === e.propertyName) {
                    var t = e.srcElement.value;
                    t !== w && (w = t, o(e))
                }
            }

            function f(e, t, n) {
                return e === I.topInput ? n : void 0
            }

            function h(e, t, n) {
                e === I.topFocus ? (p(), c(t, n)) : e === I.topBlur && p()
            }

            function m(e, t, n) {
                return e !== I.topSelectionChange && e !== I.topKeyUp && e !== I.topKeyDown || !P || P.value === w ? void 0 : (w = P.value, R)
            }

            function v(e) {
                return "INPUT" === e.nodeName && ("checkbox" === e.type || "radio" === e.type)
            }

            function g(e, t, n) {
                return e === I.topClick ? n : void 0
            }
            var y = e(15),
                C = e(17),
                E = e(20),
                b = e(21),
                _ = e(85),
                x = e(93),
                D = e(134),
                M = e(136),
                N = e(139),
                I = y.topLevelTypes,
                T = {
                    change: {
                        phasedRegistrationNames: {
                            bubbled: N({
                                onChange: null
                            }),
                            captured: N({
                                onChangeCapture: null
                            })
                        },
                        dependencies: [I.topBlur, I.topChange, I.topClick, I.topFocus, I.topInput, I.topKeyDown, I.topKeyUp, I.topSelectionChange]
                    }
                },
                P = null,
                R = null,
                w = null,
                O = null,
                S = !1;
            b.canUseDOM && (S = D("change") && (!("documentMode" in document) || document.documentMode > 8));
            var A = !1;
            b.canUseDOM && (A = D("input") && (!("documentMode" in document) || document.documentMode > 9));
            var k = {
                    get: function() {
                        return O.get.call(this)
                    },
                    set: function(e) {
                        w = "" + e, O.set.call(this, e)
                    }
                },
                L = {
                    eventTypes: T,
                    extractEvents: function(e, t, n, o) {
                        var i, a;
                        if (r(t) ? S ? i = s : a = l : M(t) ? A ? i = f : (i = m, a = h) : v(t) && (i = g), i) {
                            var u = i(e, t, n);
                            if (u) {
                                var c = x.getPooled(T.change, u, o);
                                return E.accumulateTwoPhaseDispatches(c), c
                            }
                        }
                        a && a(e, t, n)
                    }
                };
            t.exports = L
        }, {
            134: 134,
            136: 136,
            139: 139,
            15: 15,
            17: 17,
            20: 20,
            21: 21,
            85: 85,
            93: 93
        }],
        8: [function(e, t, n) {
            "use strict";
            var r = 0,
                o = {
                    createReactRootIndex: function() {
                        return r++
                    }
                };
            t.exports = o
        }, {}],
        9: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                e.insertBefore(t, e.childNodes[n] || null)
            }
            var o = e(12),
                i = e(70),
                a = e(145),
                u = e(133),
                s = {
                    dangerouslyReplaceNodeWithMarkup: o.dangerouslyReplaceNodeWithMarkup,
                    updateTextContent: a,
                    processUpdates: function(e, t) {
                        for (var n, s = null, l = null, c = 0; c < e.length; c++)
                            if (n = e[c], n.type === i.MOVE_EXISTING || n.type === i.REMOVE_NODE) {
                                var p = n.fromIndex,
                                    d = n.parentNode.childNodes[p],
                                    f = n.parentID;
                                u(d), s = s || {}, s[f] = s[f] || [], s[f][p] = d, l = l || [], l.push(d)
                            }
                        var h = o.dangerouslyRenderMarkup(t);
                        if (l)
                            for (var m = 0; m < l.length; m++) l[m].parentNode.removeChild(l[m]);
                        for (var v = 0; v < e.length; v++) switch (n = e[v], n.type) {
                            case i.INSERT_MARKUP:
                                r(n.parentNode, h[n.markupIndex], n.toIndex);
                                break;
                            case i.MOVE_EXISTING:
                                r(n.parentNode, s[n.parentID][n.fromIndex], n.toIndex);
                                break;
                            case i.TEXT_CONTENT:
                                a(n.parentNode, n.textContent);
                                break;
                            case i.REMOVE_NODE:
                        }
                    }
                };
            t.exports = s
        }, {
            12: 12,
            133: 133,
            145: 145,
            70: 70
        }],
        10: [function(e, t, n) {
            "use strict";

            function r(e, t) {
                return (e & t) === t
            }
            var o = e(133),
                i = {
                    MUST_USE_ATTRIBUTE: 1,
                    MUST_USE_PROPERTY: 2,
                    HAS_SIDE_EFFECTS: 4,
                    HAS_BOOLEAN_VALUE: 8,
                    HAS_NUMERIC_VALUE: 16,
                    HAS_POSITIVE_NUMERIC_VALUE: 48,
                    HAS_OVERLOADED_BOOLEAN_VALUE: 64,
                    injectDOMPropertyConfig: function(e) {
                        var t = e.Properties || {},
                            n = e.DOMAttributeNames || {},
                            a = e.DOMPropertyNames || {},
                            s = e.DOMMutationMethods || {};
                        e.isCustomAttribute && u._isCustomAttributeFunctions.push(e.isCustomAttribute);
                        for (var l in t) {
                            o(!u.isStandardName.hasOwnProperty(l)), u.isStandardName[l] = !0;
                            var c = l.toLowerCase();
                            if (u.getPossibleStandardName[c] = l, n.hasOwnProperty(l)) {
                                var p = n[l];
                                u.getPossibleStandardName[p] = l, u.getAttributeName[l] = p
                            } else u.getAttributeName[l] = c;
                            u.getPropertyName[l] = a.hasOwnProperty(l) ? a[l] : l, s.hasOwnProperty(l) ? u.getMutationMethod[l] = s[l] : u.getMutationMethod[l] = null;
                            var d = t[l];
                            u.mustUseAttribute[l] = r(d, i.MUST_USE_ATTRIBUTE), u.mustUseProperty[l] = r(d, i.MUST_USE_PROPERTY), u.hasSideEffects[l] = r(d, i.HAS_SIDE_EFFECTS), u.hasBooleanValue[l] = r(d, i.HAS_BOOLEAN_VALUE), u.hasNumericValue[l] = r(d, i.HAS_NUMERIC_VALUE), u.hasPositiveNumericValue[l] = r(d, i.HAS_POSITIVE_NUMERIC_VALUE), u.hasOverloadedBooleanValue[l] = r(d, i.HAS_OVERLOADED_BOOLEAN_VALUE), o(!u.mustUseAttribute[l] || !u.mustUseProperty[l]), o(u.mustUseProperty[l] || !u.hasSideEffects[l]), o(!!u.hasBooleanValue[l] + !!u.hasNumericValue[l] + !!u.hasOverloadedBooleanValue[l] <= 1)
                        }
                    }
                },
                a = {},
                u = {
                    ID_ATTRIBUTE_NAME: "data-reactid",
                    isStandardName: {},
                    getPossibleStandardName: {},
                    getAttributeName: {},
                    getPropertyName: {},
                    getMutationMethod: {},
                    mustUseAttribute: {},
                    mustUseProperty: {},
                    hasSideEffects: {},
                    hasBooleanValue: {},
                    hasNumericValue: {},
                    hasPositiveNumericValue: {},
                    hasOverloadedBooleanValue: {},
                    _isCustomAttributeFunctions: [],
                    isCustomAttribute: function(e) {
                        for (var t = 0; t < u._isCustomAttributeFunctions.length; t++) {
                            var n = u._isCustomAttributeFunctions[t];
                            if (n(e)) return !0
                        }
                        return !1
                    },
                    getDefaultValueForProperty: function(e, t) {
                        var n, r = a[e];
                        return r || (a[e] = r = {}), t in r || (n = document.createElement(e), r[t] = n[t]), r[t]
                    },
                    injection: i
                };
            t.exports = u
        }, {
            133: 133
        }],
        11: [function(e, t, n) {
            "use strict";

            function r(e, t) {
                return null == t || o.hasBooleanValue[e] && !t || o.hasNumericValue[e] && isNaN(t) || o.hasPositiveNumericValue[e] && 1 > t || o.hasOverloadedBooleanValue[e] && t === !1
            }
            var o = e(10),
                i = e(143),
                a = (e(150), {
                    createMarkupForID: function(e) {
                        return o.ID_ATTRIBUTE_NAME + "=" + i(e)
                    },
                    createMarkupForProperty: function(e, t) {
                        if (o.isStandardName.hasOwnProperty(e) && o.isStandardName[e]) {
                            if (r(e, t)) return "";
                            var n = o.getAttributeName[e];
                            return o.hasBooleanValue[e] || o.hasOverloadedBooleanValue[e] && t === !0 ? n : n + "=" + i(t)
                        }
                        return o.isCustomAttribute(e) ? null == t ? "" : e + "=" + i(t) : null
                    },
                    setValueForProperty: function(e, t, n) {
                        if (o.isStandardName.hasOwnProperty(t) && o.isStandardName[t]) {
                            var i = o.getMutationMethod[t];
                            if (i) i(e, n);
                            else if (r(t, n)) this.deleteValueForProperty(e, t);
                            else if (o.mustUseAttribute[t]) e.setAttribute(o.getAttributeName[t], "" + n);
                            else {
                                var a = o.getPropertyName[t];
                                o.hasSideEffects[t] && "" + e[a] == "" + n || (e[a] = n)
                            }
                        } else o.isCustomAttribute(t) && (null == n ? e.removeAttribute(t) : e.setAttribute(t, "" + n))
                    },
                    deleteValueForProperty: function(e, t) {
                        if (o.isStandardName.hasOwnProperty(t) && o.isStandardName[t]) {
                            var n = o.getMutationMethod[t];
                            if (n) n(e, void 0);
                            else if (o.mustUseAttribute[t]) e.removeAttribute(o.getAttributeName[t]);
                            else {
                                var r = o.getPropertyName[t],
                                    i = o.getDefaultValueForProperty(e.nodeName, r);
                                o.hasSideEffects[t] && "" + e[r] === i || (e[r] = i)
                            }
                        } else o.isCustomAttribute(t) && e.removeAttribute(t)
                    }
                });
            t.exports = a
        }, {
            10: 10,
            143: 143,
            150: 150
        }],
        12: [function(e, t, n) {
            "use strict";

            function r(e) {
                return e.substring(1, e.indexOf(" "))
            }
            var o = e(21),
                i = e(110),
                a = e(112),
                u = e(125),
                s = e(133),
                l = /^(<[^ \/>]+)/,
                c = "data-danger-index",
                p = {
                    dangerouslyRenderMarkup: function(e) {
                        s(o.canUseDOM);
                        for (var t, n = {}, p = 0; p < e.length; p++) s(e[p]), t = r(e[p]), t = u(t) ? t : "*", n[t] = n[t] || [], n[t][p] = e[p];
                        var d = [],
                            f = 0;
                        for (t in n)
                            if (n.hasOwnProperty(t)) {
                                var h, m = n[t];
                                for (h in m)
                                    if (m.hasOwnProperty(h)) {
                                        var v = m[h];
                                        m[h] = v.replace(l, "$1 " + c + '="' + h + '" ')
                                    }
                                for (var g = i(m.join(""), a), y = 0; y < g.length; ++y) {
                                    var C = g[y];
                                    C.hasAttribute && C.hasAttribute(c) && (h = +C.getAttribute(c), C.removeAttribute(c), s(!d.hasOwnProperty(h)), d[h] = C, f += 1)
                                }
                            }
                        return s(f === d.length), s(d.length === e.length), d
                    },
                    dangerouslyReplaceNodeWithMarkup: function(e, t) {
                        s(o.canUseDOM), s(t), s("html" !== e.tagName.toLowerCase());
                        var n = i(t, a)[0];
                        e.parentNode.replaceChild(n, e)
                    }
                };
            t.exports = p
        }, {
            110: 110,
            112: 112,
            125: 125,
            133: 133,
            21: 21
        }],
        13: [function(e, t, n) {
            "use strict";
            var r = e(139),
                o = [r({
                    ResponderEventPlugin: null
                }), r({
                    SimpleEventPlugin: null
                }), r({
                    TapEventPlugin: null
                }), r({
                    EnterLeaveEventPlugin: null
                }), r({
                    ChangeEventPlugin: null
                }), r({
                    SelectEventPlugin: null
                }), r({
                    BeforeInputEventPlugin: null
                }), r({
                    AnalyticsEventPlugin: null
                }), r({
                    MobileSafariClickEventPlugin: null
                })];
            t.exports = o
        }, {
            139: 139
        }],
        14: [function(e, t, n) {
            "use strict";
            var r = e(15),
                o = e(20),
                i = e(97),
                a = e(68),
                u = e(139),
                s = r.topLevelTypes,
                l = a.getFirstReactDOM,
                c = {
                    mouseEnter: {
                        registrationName: u({
                            onMouseEnter: null
                        }),
                        dependencies: [s.topMouseOut, s.topMouseOver]
                    },
                    mouseLeave: {
                        registrationName: u({
                            onMouseLeave: null
                        }),
                        dependencies: [s.topMouseOut, s.topMouseOver]
                    }
                },
                p = [null, null],
                d = {
                    eventTypes: c,
                    extractEvents: function(e, t, n, r) {
                        if (e === s.topMouseOver && (r.relatedTarget || r.fromElement)) return null;
                        if (e !== s.topMouseOut && e !== s.topMouseOver) return null;
                        var u;
                        if (t.window === t) u = t;
                        else {
                            var d = t.ownerDocument;
                            u = d ? d.defaultView || d.parentWindow : window
                        }
                        var f, h;
                        if (e === s.topMouseOut ? (f = t, h = l(r.relatedTarget || r.toElement) || u) : (f = u, h = t), f === h) return null;
                        var m = f ? a.getID(f) : "",
                            v = h ? a.getID(h) : "",
                            g = i.getPooled(c.mouseLeave, m, r);
                        g.type = "mouseleave", g.target = f, g.relatedTarget = h;
                        var y = i.getPooled(c.mouseEnter, v, r);
                        return y.type = "mouseenter", y.target = h, y.relatedTarget = f, o.accumulateEnterLeaveDispatches(g, y, m, v), p[0] = g, p[1] = y, p
                    }
                };
            t.exports = d
        }, {
            139: 139,
            15: 15,
            20: 20,
            68: 68,
            97: 97
        }],
        15: [function(e, t, n) {
            "use strict";
            var r = e(138),
                o = r({
                    bubbled: null,
                    captured: null
                }),
                i = r({
                    topBlur: null,
                    topChange: null,
                    topClick: null,
                    topCompositionEnd: null,
                    topCompositionStart: null,
                    topCompositionUpdate: null,
                    topContextMenu: null,
                    topCopy: null,
                    topCut: null,
                    topDoubleClick: null,
                    topDrag: null,
                    topDragEnd: null,
                    topDragEnter: null,
                    topDragExit: null,
                    topDragLeave: null,
                    topDragOver: null,
                    topDragStart: null,
                    topDrop: null,
                    topError: null,
                    topFocus: null,
                    topInput: null,
                    topKeyDown: null,
                    topKeyPress: null,
                    topKeyUp: null,
                    topLoad: null,
                    topMouseDown: null,
                    topMouseMove: null,
                    topMouseOut: null,
                    topMouseOver: null,
                    topMouseUp: null,
                    topPaste: null,
                    topReset: null,
                    topScroll: null,
                    topSelectionChange: null,
                    topSubmit: null,
                    topTextInput: null,
                    topTouchCancel: null,
                    topTouchEnd: null,
                    topTouchMove: null,
                    topTouchStart: null,
                    topWheel: null
                }),
                a = {
                    topLevelTypes: i,
                    PropagationPhases: o
                };
            t.exports = a
        }, {
            138: 138
        }],
        16: [function(e, t, n) {
            var r = e(112),
                o = {
                    listen: function(e, t, n) {
                        return e.addEventListener ? (e.addEventListener(t, n, !1), {
                            remove: function() {
                                e.removeEventListener(t, n, !1)
                            }
                        }) : e.attachEvent ? (e.attachEvent("on" + t, n), {
                            remove: function() {
                                e.detachEvent("on" + t, n)
                            }
                        }) : void 0
                    },
                    capture: function(e, t, n) {
                        return e.addEventListener ? (e.addEventListener(t, n, !0), {
                            remove: function() {
                                e.removeEventListener(t, n, !0)
                            }
                        }) : {
                            remove: r
                        }
                    },
                    registerDefault: function() {}
                };
            t.exports = o
        }, {
            112: 112
        }],
        17: [function(e, t, n) {
            "use strict";
            var r = e(18),
                o = e(19),
                i = e(103),
                a = e(118),
                u = e(133),
                s = {},
                l = null,
                c = function(e) {
                    if (e) {
                        var t = o.executeDispatch,
                            n = r.getPluginModuleForEvent(e);
                        n && n.executeDispatch && (t = n.executeDispatch), o.executeDispatchesInOrder(e, t), e.isPersistent() || e.constructor.release(e)
                    }
                },
                p = null,
                d = {
                    injection: {
                        injectMount: o.injection.injectMount,
                        injectInstanceHandle: function(e) {
                            p = e
                        },
                        getInstanceHandle: function() {
                            return p
                        },
                        injectEventPluginOrder: r.injectEventPluginOrder,
                        injectEventPluginsByName: r.injectEventPluginsByName
                    },
                    eventNameDispatchConfigs: r.eventNameDispatchConfigs,
                    registrationNameModules: r.registrationNameModules,
                    putListener: function(e, t, n) {
                        u(!n || "function" == typeof n);
                        var r = s[t] || (s[t] = {});
                        r[e] = n
                    },
                    getListener: function(e, t) {
                        var n = s[t];
                        return n && n[e]
                    },
                    deleteListener: function(e, t) {
                        var n = s[t];
                        n && delete n[e]
                    },
                    deleteAllListeners: function(e) {
                        for (var t in s) delete s[t][e]
                    },
                    extractEvents: function(e, t, n, o) {
                        for (var a, u = r.plugins, s = 0, l = u.length; l > s; s++) {
                            var c = u[s];
                            if (c) {
                                var p = c.extractEvents(e, t, n, o);
                                p && (a = i(a, p))
                            }
                        }
                        return a
                    },
                    enqueueEvents: function(e) {
                        e && (l = i(l, e))
                    },
                    processEventQueue: function() {
                        var e = l;
                        l = null, a(e, c), u(!l)
                    },
                    __purge: function() {
                        s = {}
                    },
                    __getListenerBank: function() {
                        return s
                    }
                };
            t.exports = d
        }, {
            103: 103,
            118: 118,
            133: 133,
            18: 18,
            19: 19
        }],
        18: [function(e, t, n) {
            "use strict";

            function r() {
                if (u)
                    for (var e in s) {
                        var t = s[e],
                            n = u.indexOf(e);
                        if (a(n > -1), !l.plugins[n]) {
                            a(t.extractEvents), l.plugins[n] = t;
                            var r = t.eventTypes;
                            for (var i in r) a(o(r[i], t, i))
                        }
                    }
            }

            function o(e, t, n) {
                a(!l.eventNameDispatchConfigs.hasOwnProperty(n)), l.eventNameDispatchConfigs[n] = e;
                var r = e.phasedRegistrationNames;
                if (r) {
                    for (var o in r)
                        if (r.hasOwnProperty(o)) {
                            var u = r[o];
                            i(u, t, n)
                        }
                    return !0
                }
                return e.registrationName ? (i(e.registrationName, t, n), !0) : !1
            }

            function i(e, t, n) {
                a(!l.registrationNameModules[e]), l.registrationNameModules[e] = t, l.registrationNameDependencies[e] = t.eventTypes[n].dependencies
            }
            var a = e(133),
                u = null,
                s = {},
                l = {
                    plugins: [],
                    eventNameDispatchConfigs: {},
                    registrationNameModules: {},
                    registrationNameDependencies: {},
                    injectEventPluginOrder: function(e) {
                        a(!u), u = Array.prototype.slice.call(e), r()
                    },
                    injectEventPluginsByName: function(e) {
                        var t = !1;
                        for (var n in e)
                            if (e.hasOwnProperty(n)) {
                                var o = e[n];
                                s.hasOwnProperty(n) && s[n] === o || (a(!s[n]), s[n] = o, t = !0)
                            }
                        t && r()
                    },
                    getPluginModuleForEvent: function(e) {
                        var t = e.dispatchConfig;
                        if (t.registrationName) return l.registrationNameModules[t.registrationName] || null;
                        for (var n in t.phasedRegistrationNames)
                            if (t.phasedRegistrationNames.hasOwnProperty(n)) {
                                var r = l.registrationNameModules[t.phasedRegistrationNames[n]];
                                if (r) return r
                            }
                        return null
                    },
                    _resetEventPlugins: function() {
                        u = null;
                        for (var e in s) s.hasOwnProperty(e) && delete s[e];
                        l.plugins.length = 0;
                        var t = l.eventNameDispatchConfigs;
                        for (var n in t) t.hasOwnProperty(n) && delete t[n];
                        var r = l.registrationNameModules;
                        for (var o in r) r.hasOwnProperty(o) && delete r[o]
                    }
                };
            t.exports = l
        }, {
            133: 133
        }],
        19: [function(e, t, n) {
            "use strict";

            function r(e) {
                return e === v.topMouseUp || e === v.topTouchEnd || e === v.topTouchCancel
            }

            function o(e) {
                return e === v.topMouseMove || e === v.topTouchMove
            }

            function i(e) {
                return e === v.topMouseDown || e === v.topTouchStart
            }

            function a(e, t) {
                var n = e._dispatchListeners,
                    r = e._dispatchIDs;
                if (Array.isArray(n))
                    for (var o = 0; o < n.length && !e.isPropagationStopped(); o++) t(e, n[o], r[o]);
                else n && t(e, n, r)
            }

            function u(e, t, n) {
                e.currentTarget = m.Mount.getNode(n);
                var r = t(e, n);
                return e.currentTarget = null, r
            }

            function s(e, t) {
                a(e, t), e._dispatchListeners = null, e._dispatchIDs = null
            }

            function l(e) {
                var t = e._dispatchListeners,
                    n = e._dispatchIDs;
                if (Array.isArray(t)) {
                    for (var r = 0; r < t.length && !e.isPropagationStopped(); r++)
                        if (t[r](e, n[r])) return n[r]
                } else if (t && t(e, n)) return n;
                return null
            }

            function c(e) {
                var t = l(e);
                return e._dispatchIDs = null, e._dispatchListeners = null, t
            }

            function p(e) {
                var t = e._dispatchListeners,
                    n = e._dispatchIDs;
                h(!Array.isArray(t));
                var r = t ? t(e, n) : null;
                return e._dispatchListeners = null, e._dispatchIDs = null, r
            }

            function d(e) {
                return !!e._dispatchListeners
            }
            var f = e(15),
                h = e(133),
                m = {
                    Mount: null,
                    injectMount: function(e) {
                        m.Mount = e
                    }
                },
                v = f.topLevelTypes,
                g = {
                    isEndish: r,
                    isMoveish: o,
                    isStartish: i,
                    executeDirectDispatch: p,
                    executeDispatch: u,
                    executeDispatchesInOrder: s,
                    executeDispatchesInOrderStopAtTrue: c,
                    hasDispatches: d,
                    injection: m,
                    useTouchEvents: !1
                };
            t.exports = g
        }, {
            133: 133,
            15: 15
        }],
        20: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                var r = t.dispatchConfig.phasedRegistrationNames[n];
                return v(e, r)
            }

            function o(e, t, n) {
                var o = t ? m.bubbled : m.captured,
                    i = r(e, n, o);
                i && (n._dispatchListeners = f(n._dispatchListeners, i), n._dispatchIDs = f(n._dispatchIDs, e))
            }

            function i(e) {
                e && e.dispatchConfig.phasedRegistrationNames && d.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker, o, e)
            }

            function a(e, t, n) {
                if (n && n.dispatchConfig.registrationName) {
                    var r = n.dispatchConfig.registrationName,
                        o = v(e, r);
                    o && (n._dispatchListeners = f(n._dispatchListeners, o), n._dispatchIDs = f(n._dispatchIDs, e))
                }
            }

            function u(e) {
                e && e.dispatchConfig.registrationName && a(e.dispatchMarker, null, e)
            }

            function s(e) {
                h(e, i)
            }

            function l(e, t, n, r) {
                d.injection.getInstanceHandle().traverseEnterLeave(n, r, a, e, t)
            }

            function c(e) {
                h(e, u)
            }
            var p = e(15),
                d = e(17),
                f = e(103),
                h = e(118),
                m = p.PropagationPhases,
                v = d.getListener,
                g = {
                    accumulateTwoPhaseDispatches: s,
                    accumulateDirectDispatches: c,
                    accumulateEnterLeaveDispatches: l
                };
            t.exports = g
        }, {
            103: 103,
            118: 118,
            15: 15,
            17: 17
        }],
        21: [function(e, t, n) {
            "use strict";
            var r = !("undefined" == typeof window || !window.document || !window.document.createElement),
                o = {
                    canUseDOM: r,
                    canUseWorkers: "undefined" != typeof Worker,
                    canUseEventListeners: r && !(!window.addEventListener && !window.attachEvent),
                    canUseViewport: r && !!window.screen,
                    isInWorker: !r
                };
            t.exports = o
        }, {}],
        22: [function(e, t, n) {
            "use strict";

            function r(e) {
                this._root = e, this._startText = this.getText(), this._fallbackText = null
            }
            var o = e(28),
                i = e(27),
                a = e(128);
            i(r.prototype, {
                getText: function() {
                    return "value" in this._root ? this._root.value : this._root[a()]
                },
                getData: function() {
                    if (this._fallbackText) return this._fallbackText;
                    var e, t, n = this._startText,
                        r = n.length,
                        o = this.getText(),
                        i = o.length;
                    for (e = 0; r > e && n[e] === o[e]; e++);
                    var a = r - e;
                    for (t = 1; a >= t && n[r - t] === o[i - t]; t++);
                    var u = t > 1 ? 1 - t : void 0;
                    return this._fallbackText = o.slice(e, u), this._fallbackText
                }
            }), o.addPoolingTo(r), t.exports = r
        }, {
            128: 128,
            27: 27,
            28: 28
        }],
        23: [function(e, t, n) {
            "use strict";
            var r, o = e(10),
                i = e(21),
                a = o.injection.MUST_USE_ATTRIBUTE,
                u = o.injection.MUST_USE_PROPERTY,
                s = o.injection.HAS_BOOLEAN_VALUE,
                l = o.injection.HAS_SIDE_EFFECTS,
                c = o.injection.HAS_NUMERIC_VALUE,
                p = o.injection.HAS_POSITIVE_NUMERIC_VALUE,
                d = o.injection.HAS_OVERLOADED_BOOLEAN_VALUE;
            if (i.canUseDOM) {
                var f = document.implementation;
                r = f && f.hasFeature && f.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1")
            }
            var h = {
                isCustomAttribute: RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),
                Properties: {
                    accept: null,
                    acceptCharset: null,
                    accessKey: null,
                    action: null,
                    allowFullScreen: a | s,
                    allowTransparency: a,
                    alt: null,
                    async: s,
                    autoComplete: null,
                    autoPlay: s,
                    cellPadding: null,
                    cellSpacing: null,
                    charSet: a,
                    checked: u | s,
                    classID: a,
                    className: r ? a : u,
                    cols: a | p,
                    colSpan: null,
                    content: null,
                    contentEditable: null,
                    contextMenu: a,
                    controls: u | s,
                    coords: null,
                    crossOrigin: null,
                    data: null,
                    dateTime: a,
                    defer: s,
                    dir: null,
                    disabled: a | s,
                    download: d,
                    draggable: null,
                    encType: null,
                    form: a,
                    formAction: a,
                    formEncType: a,
                    formMethod: a,
                    formNoValidate: s,
                    formTarget: a,
                    frameBorder: a,
                    headers: null,
                    height: a,
                    hidden: a | s,
                    high: null,
                    href: null,
                    hrefLang: null,
                    htmlFor: null,
                    httpEquiv: null,
                    icon: null,
                    id: u,
                    label: null,
                    lang: null,
                    list: a,
                    loop: u | s,
                    low: null,
                    manifest: a,
                    marginHeight: null,
                    marginWidth: null,
                    max: null,
                    maxLength: a,
                    media: a,
                    mediaGroup: null,
                    method: null,
                    min: null,
                    multiple: u | s,
                    muted: u | s,
                    name: null,
                    noValidate: s,
                    open: s,
                    optimum: null,
                    pattern: null,
                    placeholder: null,
                    poster: null,
                    preload: null,
                    radioGroup: null,
                    readOnly: u | s,
                    rel: null,
                    required: s,
                    role: a,
                    rows: a | p,
                    rowSpan: null,
                    sandbox: null,
                    scope: null,
                    scoped: s,
                    scrolling: null,
                    seamless: a | s,
                    selected: u | s,
                    shape: null,
                    size: a | p,
                    sizes: a,
                    span: p,
                    spellCheck: null,
                    src: null,
                    srcDoc: u,
                    srcSet: a,
                    start: c,
                    step: null,
                    style: null,
                    tabIndex: null,
                    target: null,
                    title: null,
                    type: null,
                    useMap: null,
                    value: u | l,
                    width: a,
                    wmode: a,
                    autoCapitalize: null,
                    autoCorrect: null,
                    itemProp: a,
                    itemScope: a | s,
                    itemType: a,
                    itemID: a,
                    itemRef: a,
                    property: null,
                    unselectable: a
                },
                DOMAttributeNames: {
                    acceptCharset: "accept-charset",
                    className: "class",
                    htmlFor: "for",
                    httpEquiv: "http-equiv"
                },
                DOMPropertyNames: {
                    autoCapitalize: "autocapitalize",
                    autoComplete: "autocomplete",
                    autoCorrect: "autocorrect",
                    autoFocus: "autofocus",
                    autoPlay: "autoplay",
                    encType: "encoding",
                    hrefLang: "hreflang",
                    radioGroup: "radiogroup",
                    spellCheck: "spellcheck",
                    srcDoc: "srcdoc",
                    srcSet: "srcset"
                }
            };
            t.exports = h
        }, {
            10: 10,
            21: 21
        }],
        24: [function(e, t, n) {
            "use strict";

            function r(e) {
                l(null == e.props.checkedLink || null == e.props.valueLink)
            }

            function o(e) {
                r(e), l(null == e.props.value && null == e.props.onChange)
            }

            function i(e) {
                r(e), l(null == e.props.checked && null == e.props.onChange)
            }

            function a(e) {
                this.props.valueLink.requestChange(e.target.value)
            }

            function u(e) {
                this.props.checkedLink.requestChange(e.target.checked)
            }
            var s = e(76),
                l = e(133),
                c = {
                    button: !0,
                    checkbox: !0,
                    image: !0,
                    hidden: !0,
                    radio: !0,
                    reset: !0,
                    submit: !0
                },
                p = {
                    Mixin: {
                        propTypes: {
                            value: function(e, t, n) {
                                return !e[t] || c[e.type] || e.onChange || e.readOnly || e.disabled ? null : new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")
                            },
                            checked: function(e, t, n) {
                                return !e[t] || e.onChange || e.readOnly || e.disabled ? null : new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")
                            },
                            onChange: s.func
                        }
                    },
                    getValue: function(e) {
                        return e.props.valueLink ? (o(e), e.props.valueLink.value) : e.props.value
                    },
                    getChecked: function(e) {
                        return e.props.checkedLink ? (i(e), e.props.checkedLink.value) : e.props.checked
                    },
                    getOnChange: function(e) {
                        return e.props.valueLink ? (o(e), a) : e.props.checkedLink ? (i(e), u) : e.props.onChange
                    }
                };
            t.exports = p
        }, {
            133: 133,
            76: 76
        }],
        25: [function(e, t, n) {
            "use strict";

            function r(e) {
                e.remove()
            }
            var o = e(30),
                i = e(103),
                a = e(118),
                u = e(133),
                s = {
                    trapBubbledEvent: function(e, t) {
                        u(this.isMounted());
                        var n = this.getDOMNode();
                        u(n);
                        var r = o.trapBubbledEvent(e, t, n);
                        this._localEventListeners = i(this._localEventListeners, r)
                    },
                    componentWillUnmount: function() {
                        this._localEventListeners && a(this._localEventListeners, r)
                    }
                };
            t.exports = s
        }, {
            103: 103,
            118: 118,
            133: 133,
            30: 30
        }],
        26: [function(e, t, n) {
            "use strict";
            var r = e(15),
                o = e(112),
                i = r.topLevelTypes,
                a = {
                    eventTypes: null,
                    extractEvents: function(e, t, n, r) {
                        if (e === i.topTouchStart) {
                            var a = r.target;
                            a && !a.onclick && (a.onclick = o)
                        }
                    }
                };
            t.exports = a
        }, {
            112: 112,
            15: 15
        }],
        27: [function(e, t, n) {
            "use strict";

            function r(e, t) {
                if (null == e) throw new TypeError("Object.assign target cannot be null or undefined");
                for (var n = Object(e), r = Object.prototype.hasOwnProperty, o = 1; o < arguments.length; o++) {
                    var i = arguments[o];
                    if (null != i) {
                        var a = Object(i);
                        for (var u in a) r.call(a, u) && (n[u] = a[u])
                    }
                }
                return n
            }
            t.exports = r
        }, {}],
        28: [function(e, t, n) {
            "use strict";
            var r = e(133),
                o = function(e) {
                    var t = this;
                    if (t.instancePool.length) {
                        var n = t.instancePool.pop();
                        return t.call(n, e), n
                    }
                    return new t(e)
                },
                i = function(e, t) {
                    var n = this;
                    if (n.instancePool.length) {
                        var r = n.instancePool.pop();
                        return n.call(r, e, t), r
                    }
                    return new n(e, t)
                },
                a = function(e, t, n) {
                    var r = this;
                    if (r.instancePool.length) {
                        var o = r.instancePool.pop();
                        return r.call(o, e, t, n), o
                    }
                    return new r(e, t, n)
                },
                u = function(e, t, n, r, o) {
                    var i = this;
                    if (i.instancePool.length) {
                        var a = i.instancePool.pop();
                        return i.call(a, e, t, n, r, o), a
                    }
                    return new i(e, t, n, r, o)
                },
                s = function(e) {
                    var t = this;
                    r(e instanceof t), e.destructor && e.destructor(), t.instancePool.length < t.poolSize && t.instancePool.push(e)
                },
                l = 10,
                c = o,
                p = function(e, t) {
                    var n = e;
                    return n.instancePool = [], n.getPooled = t || c, n.poolSize || (n.poolSize = l), n.release = s, n
                },
                d = {
                    addPoolingTo: p,
                    oneArgumentPooler: o,
                    twoArgumentPooler: i,
                    threeArgumentPooler: a,
                    fiveArgumentPooler: u
                };
            t.exports = d
        }, {
            133: 133
        }],
        29: [function(e, t, n) {
            "use strict";
            var r = e(115),
                o = {
                    getDOMNode: function() {
                        return r(this)
                    }
                };
            t.exports = o
        }, {
            115: 115
        }],
        30: [function(e, t, n) {
            "use strict";

            function r(e) {
                return Object.prototype.hasOwnProperty.call(e, m) || (e[m] = f++, p[e[m]] = {}), p[e[m]]
            }
            var o = e(15),
                i = e(17),
                a = e(18),
                u = e(59),
                s = e(102),
                l = e(27),
                c = e(134),
                p = {},
                d = !1,
                f = 0,
                h = {
                    topBlur: "blur",
                    topChange: "change",
                    topClick: "click",
                    topCompositionEnd: "compositionend",
                    topCompositionStart: "compositionstart",
                    topCompositionUpdate: "compositionupdate",
                    topContextMenu: "contextmenu",
                    topCopy: "copy",
                    topCut: "cut",
                    topDoubleClick: "dblclick",
                    topDrag: "drag",
                    topDragEnd: "dragend",
                    topDragEnter: "dragenter",
                    topDragExit: "dragexit",
                    topDragLeave: "dragleave",
                    topDragOver: "dragover",
                    topDragStart: "dragstart",
                    topDrop: "drop",
                    topFocus: "focus",
                    topInput: "input",
                    topKeyDown: "keydown",
                    topKeyPress: "keypress",
                    topKeyUp: "keyup",
                    topMouseDown: "mousedown",
                    topMouseMove: "mousemove",
                    topMouseOut: "mouseout",
                    topMouseOver: "mouseover",
                    topMouseUp: "mouseup",
                    topPaste: "paste",
                    topScroll: "scroll",
                    topSelectionChange: "selectionchange",
                    topTextInput: "textInput",
                    topTouchCancel: "touchcancel",
                    topTouchEnd: "touchend",
                    topTouchMove: "touchmove",
                    topTouchStart: "touchstart",
                    topWheel: "wheel"
                },
                m = "_reactListenersID" + String(Math.random()).slice(2),
                v = l({}, u, {
                    ReactEventListener: null,
                    injection: {
                        injectReactEventListener: function(e) {
                            e.setHandleTopLevel(v.handleTopLevel), v.ReactEventListener = e
                        }
                    },
                    setEnabled: function(e) {
                        v.ReactEventListener && v.ReactEventListener.setEnabled(e)
                    },
                    isEnabled: function() {
                        return !(!v.ReactEventListener || !v.ReactEventListener.isEnabled())
                    },
                    listenTo: function(e, t) {
                        for (var n = t, i = r(n), u = a.registrationNameDependencies[e], s = o.topLevelTypes, l = 0, p = u.length; p > l; l++) {
                            var d = u[l];
                            i.hasOwnProperty(d) && i[d] || (d === s.topWheel ? c("wheel") ? v.ReactEventListener.trapBubbledEvent(s.topWheel, "wheel", n) : c("mousewheel") ? v.ReactEventListener.trapBubbledEvent(s.topWheel, "mousewheel", n) : v.ReactEventListener.trapBubbledEvent(s.topWheel, "DOMMouseScroll", n) : d === s.topScroll ? c("scroll", !0) ? v.ReactEventListener.trapCapturedEvent(s.topScroll, "scroll", n) : v.ReactEventListener.trapBubbledEvent(s.topScroll, "scroll", v.ReactEventListener.WINDOW_HANDLE) : d === s.topFocus || d === s.topBlur ? (c("focus", !0) ? (v.ReactEventListener.trapCapturedEvent(s.topFocus, "focus", n), v.ReactEventListener.trapCapturedEvent(s.topBlur, "blur", n)) : c("focusin") && (v.ReactEventListener.trapBubbledEvent(s.topFocus, "focusin", n), v.ReactEventListener.trapBubbledEvent(s.topBlur, "focusout", n)), i[s.topBlur] = !0, i[s.topFocus] = !0) : h.hasOwnProperty(d) && v.ReactEventListener.trapBubbledEvent(d, h[d], n), i[d] = !0)
                        }
                    },
                    trapBubbledEvent: function(e, t, n) {
                        return v.ReactEventListener.trapBubbledEvent(e, t, n)
                    },
                    trapCapturedEvent: function(e, t, n) {
                        return v.ReactEventListener.trapCapturedEvent(e, t, n)
                    },
                    ensureScrollValueMonitoring: function() {
                        if (!d) {
                            var e = s.refreshScrollValues;
                            v.ReactEventListener.monitorScrollValue(e), d = !0
                        }
                    },
                    eventNameDispatchConfigs: i.eventNameDispatchConfigs,
                    registrationNameModules: i.registrationNameModules,
                    putListener: i.putListener,
                    getListener: i.getListener,
                    deleteListener: i.deleteListener,
                    deleteAllListeners: i.deleteAllListeners
                });
            t.exports = v
        }, {
            102: 102,
            134: 134,
            15: 15,
            17: 17,
            18: 18,
            27: 27,
            59: 59
        }],
        31: [function(e, t, n) {
            "use strict";
            var r = e(79),
                o = e(116),
                i = e(132),
                a = e(147),
                u = {
                    instantiateChildren: function(e, t, n) {
                        var r = o(e);
                        for (var a in r)
                            if (r.hasOwnProperty(a)) {
                                var u = r[a],
                                    s = i(u, null);
                                r[a] = s
                            }
                        return r
                    },
                    updateChildren: function(e, t, n, u) {
                        var s = o(t);
                        if (!s && !e) return null;
                        var l;
                        for (l in s)
                            if (s.hasOwnProperty(l)) {
                                var c = e && e[l],
                                    p = c && c._currentElement,
                                    d = s[l];
                                if (a(p, d)) r.receiveComponent(c, d, n, u), s[l] = c;
                                else {
                                    c && r.unmountComponent(c, l);
                                    var f = i(d, null);
                                    s[l] = f
                                }
                            }
                        for (l in e) !e.hasOwnProperty(l) || s && s.hasOwnProperty(l) || r.unmountComponent(e[l]);
                        return s
                    },
                    unmountChildren: function(e) {
                        for (var t in e) {
                            var n = e[t];
                            r.unmountComponent(n)
                        }
                    }
                };
            t.exports = u
        }, {
            116: 116,
            132: 132,
            147: 147,
            79: 79
        }],
        32: [function(e, t, n) {
            "use strict";

            function r(e, t) {
                this.forEachFunction = e, this.forEachContext = t
            }

            function o(e, t, n, r) {
                var o = e;
                o.forEachFunction.call(o.forEachContext, t, r)
            }

            function i(e, t, n) {
                if (null == e) return e;
                var i = r.getPooled(t, n);
                f(e, o, i), r.release(i)
            }

            function a(e, t, n) {
                this.mapResult = e, this.mapFunction = t, this.mapContext = n
            }

            function u(e, t, n, r) {
                var o = e,
                    i = o.mapResult,
                    a = !i.hasOwnProperty(n);
                if (a) {
                    var u = o.mapFunction.call(o.mapContext, t, r);
                    i[n] = u
                }
            }

            function s(e, t, n) {
                if (null == e) return e;
                var r = {},
                    o = a.getPooled(r, t, n);
                return f(e, u, o), a.release(o), d.create(r)
            }

            function l(e, t, n, r) {
                return null
            }

            function c(e, t) {
                return f(e, l, null)
            }
            var p = e(28),
                d = e(61),
                f = e(149),
                h = (e(150), p.twoArgumentPooler),
                m = p.threeArgumentPooler;
            p.addPoolingTo(r, h), p.addPoolingTo(a, m);
            var v = {
                forEach: i,
                map: s,
                count: c
            };
            t.exports = v
        }, {
            149: 149,
            150: 150,
            28: 28,
            61: 61
        }],
        33: [function(e, t, n) {
            "use strict";

            function r(e, t) {
                var n = D.hasOwnProperty(t) ? D[t] : null;
                N.hasOwnProperty(t) && y(n === _.OVERRIDE_BASE), e.hasOwnProperty(t) && y(n === _.DEFINE_MANY || n === _.DEFINE_MANY_MERGED)
            }

            function o(e, t) {
                if (t) {
                    y("function" != typeof t), y(!d.isValidElement(t));
                    var n = e.prototype;
                    t.hasOwnProperty(b) && M.mixins(e, t.mixins);
                    for (var o in t)
                        if (t.hasOwnProperty(o) && o !== b) {
                            var i = t[o];
                            if (r(n, o), M.hasOwnProperty(o)) M[o](e, i);
                            else {
                                var a = D.hasOwnProperty(o),
                                    l = n.hasOwnProperty(o),
                                    c = i && i.__reactDontBind,
                                    p = "function" == typeof i,
                                    f = p && !a && !l && !c;
                                if (f) n.__reactAutoBindMap || (n.__reactAutoBindMap = {}), n.__reactAutoBindMap[o] = i, n[o] = i;
                                else if (l) {
                                    var h = D[o];
                                    y(a && (h === _.DEFINE_MANY_MERGED || h === _.DEFINE_MANY)), h === _.DEFINE_MANY_MERGED ? n[o] = u(n[o], i) : h === _.DEFINE_MANY && (n[o] = s(n[o], i))
                                } else n[o] = i
                            }
                        }
                }
            }

            function i(e, t) {
                if (t)
                    for (var n in t) {
                        var r = t[n];
                        if (t.hasOwnProperty(n)) {
                            var o = n in M;
                            y(!o);
                            var i = n in e;
                            y(!i), e[n] = r
                        }
                    }
            }

            function a(e, t) {
                y(e && t && "object" == typeof e && "object" == typeof t);
                for (var n in t) t.hasOwnProperty(n) && (y(void 0 === e[n]), e[n] = t[n]);
                return e
            }

            function u(e, t) {
                return function() {
                    var n = e.apply(this, arguments),
                        r = t.apply(this, arguments);
                    if (null == n) return r;
                    if (null == r) return n;
                    var o = {};
                    return a(o, n), a(o, r), o
                }
            }

            function s(e, t) {
                return function() {
                    e.apply(this, arguments), t.apply(this, arguments)
                }
            }

            function l(e, t) {
                var n = t.bind(e);
                return n
            }

            function c(e) {
                for (var t in e.__reactAutoBindMap)
                    if (e.__reactAutoBindMap.hasOwnProperty(t)) {
                        var n = e.__reactAutoBindMap[t];
                        e[t] = l(e, f.guard(n, e.constructor.displayName + "." + t))
                    }
            }
            var p = e(34),
                d = (e(39), e(55)),
                f = e(58),
                h = e(65),
                m = e(66),
                v = (e(75), e(74), e(84)),
                g = e(27),
                y = e(133),
                C = e(138),
                E = e(139),
                b = (e(150), E({
                    mixins: null
                })),
                _ = C({
                    DEFINE_ONCE: null,
                    DEFINE_MANY: null,
                    OVERRIDE_BASE: null,
                    DEFINE_MANY_MERGED: null
                }),
                x = [],
                D = {
                    mixins: _.DEFINE_MANY,
                    statics: _.DEFINE_MANY,
                    propTypes: _.DEFINE_MANY,
                    contextTypes: _.DEFINE_MANY,
                    childContextTypes: _.DEFINE_MANY,
                    getDefaultProps: _.DEFINE_MANY_MERGED,
                    getInitialState: _.DEFINE_MANY_MERGED,
                    getChildContext: _.DEFINE_MANY_MERGED,
                    render: _.DEFINE_ONCE,
                    componentWillMount: _.DEFINE_MANY,
                    componentDidMount: _.DEFINE_MANY,
                    componentWillReceiveProps: _.DEFINE_MANY,
                    shouldComponentUpdate: _.DEFINE_ONCE,
                    componentWillUpdate: _.DEFINE_MANY,
                    componentDidUpdate: _.DEFINE_MANY,
                    componentWillUnmount: _.DEFINE_MANY,
                    updateComponent: _.OVERRIDE_BASE
                },
                M = {
                    displayName: function(e, t) {
                        e.displayName = t
                    },
                    mixins: function(e, t) {
                        if (t)
                            for (var n = 0; n < t.length; n++) o(e, t[n])
                    },
                    childContextTypes: function(e, t) {
                        e.childContextTypes = g({}, e.childContextTypes, t)
                    },
                    contextTypes: function(e, t) {
                        e.contextTypes = g({}, e.contextTypes, t)
                    },
                    getDefaultProps: function(e, t) {
                        e.getDefaultProps ? e.getDefaultProps = u(e.getDefaultProps, t) : e.getDefaultProps = t
                    },
                    propTypes: function(e, t) {
                        e.propTypes = g({}, e.propTypes, t)
                    },
                    statics: function(e, t) {
                        i(e, t)
                    }
                },
                N = {
                    replaceState: function(e, t) {
                        v.enqueueReplaceState(this, e), t && v.enqueueCallback(this, t)
                    },
                    isMounted: function() {
                        var e = h.get(this);
                        return e && e !== m.currentlyMountingInstance
                    },
                    setProps: function(e, t) {
                        v.enqueueSetProps(this, e), t && v.enqueueCallback(this, t)
                    },
                    replaceProps: function(e, t) {
                        v.enqueueReplaceProps(this, e), t && v.enqueueCallback(this, t)
                    }
                },
                I = function() {};
            g(I.prototype, p.prototype, N);
            var T = {
                createClass: function(e) {
                    var t = function(e, t) {
                        this.__reactAutoBindMap && c(this), this.props = e, this.context = t, this.state = null;
                        var n = this.getInitialState ? this.getInitialState() : null;
                        y("object" == typeof n && !Array.isArray(n)), this.state = n
                    };
                    t.prototype = new I, t.prototype.constructor = t, x.forEach(o.bind(null, t)), o(t, e), t.getDefaultProps && (t.defaultProps = t.getDefaultProps()), y(t.prototype.render);
                    for (var n in D) t.prototype[n] || (t.prototype[n] = null);
                    return t.type = t, t
                },
                injection: {
                    injectMixin: function(e) {
                        x.push(e)
                    }
                }
            };
            t.exports = T
        }, {
            133: 133,
            138: 138,
            139: 139,
            150: 150,
            27: 27,
            34: 34,
            39: 39,
            55: 55,
            58: 58,
            65: 65,
            66: 66,
            74: 74,
            75: 75,
            84: 84
        }],
        34: [function(e, t, n) {
            "use strict";

            function r(e, t) {
                this.props = e, this.context = t
            }
            var o = e(84),
                i = e(133);
            e(150), r.prototype.setState = function(e, t) {
                i("object" == typeof e || "function" == typeof e || null == e), o.enqueueSetState(this, e), t && o.enqueueCallback(this, t)
            }, r.prototype.forceUpdate = function(e) {
                o.enqueueForceUpdate(this), e && o.enqueueCallback(this, e)
            }, t.exports = r
        }, {
            133: 133,
            150: 150,
            84: 84
        }],
        35: [function(e, t, n) {
            "use strict";
            var r = e(44),
                o = e(68),
                i = {
                    processChildrenUpdates: r.dangerouslyProcessChildrenUpdates,
                    replaceNodeWithMarkupByID: r.dangerouslyReplaceNodeWithMarkupByID,
                    unmountIDFromEnvironment: function(e) {
                        o.purgeID(e)
                    }
                };
            t.exports = i
        }, {
            44: 44,
            68: 68
        }],
        36: [function(e, t, n) {
            "use strict";
            var r = e(133),
                o = !1,
                i = {
                    unmountIDFromEnvironment: null,
                    replaceNodeWithMarkupByID: null,
                    processChildrenUpdates: null,
                    injection: {
                        injectEnvironment: function(e) {
                            r(!o), i.unmountIDFromEnvironment = e.unmountIDFromEnvironment, i.replaceNodeWithMarkupByID = e.replaceNodeWithMarkupByID, i.processChildrenUpdates = e.processChildrenUpdates, o = !0
                        }
                    }
                };
            t.exports = i
        }, {
            133: 133
        }],
        37: [function(e, t, n) {
            "use strict";

            function r(e) {
                var t = e._currentElement._owner || null;
                if (t) {
                    var n = t.getName();
                    if (n) return " Check the render method of `" + n + "`."
                }
                return ""
            }
            var o = e(36),
                i = e(38),
                a = e(39),
                u = e(55),
                s = (e(56), e(65)),
                l = e(66),
                c = e(71),
                p = e(73),
                d = e(75),
                f = (e(74), e(79)),
                h = e(85),
                m = e(27),
                v = e(113),
                g = e(133),
                y = e(147),
                C = (e(150), 1),
                E = {
                    construct: function(e) {
                        this._currentElement = e, this._rootNodeID = null, this._instance = null, this._pendingElement = null, this._pendingStateQueue = null, this._pendingReplaceState = !1, this._pendingForceUpdate = !1, this._renderedComponent = null, this._context = null, this._mountOrder = 0, this._isTopLevel = !1, this._pendingCallbacks = null
                    },
                    mountComponent: function(e, t, n) {
                        this._context = n, this._mountOrder = C++, this._rootNodeID = e;
                        var r = this._processProps(this._currentElement.props),
                            o = this._processContext(this._currentElement._context),
                            i = c.getComponentClassForElement(this._currentElement),
                            a = new i(r, o);
                        a.props = r, a.context = o, a.refs = v, this._instance = a, s.set(a, this);
                        var u = a.state;
                        void 0 === u && (a.state = u = null), g("object" == typeof u && !Array.isArray(u)), this._pendingStateQueue = null, this._pendingReplaceState = !1, this._pendingForceUpdate = !1;
                        var p, d, h = l.currentlyMountingInstance;
                        l.currentlyMountingInstance = this;
                        try {
                            a.componentWillMount && (a.componentWillMount(), this._pendingStateQueue && (a.state = this._processPendingState(a.props, a.context))), p = this._getValidatedChildContext(n), d = this._renderValidatedComponent(p)
                        } finally {
                            l.currentlyMountingInstance = h
                        }
                        this._renderedComponent = this._instantiateReactComponent(d, this._currentElement.type);
                        var m = f.mountComponent(this._renderedComponent, e, t, this._mergeChildContext(n, p));
                        return a.componentDidMount && t.getReactMountReady().enqueue(a.componentDidMount, a), m
                    },
                    unmountComponent: function() {
                        var e = this._instance;
                        if (e.componentWillUnmount) {
                            var t = l.currentlyUnmountingInstance;
                            l.currentlyUnmountingInstance = this;
                            try {
                                e.componentWillUnmount()
                            } finally {
                                l.currentlyUnmountingInstance = t
                            }
                        }
                        f.unmountComponent(this._renderedComponent), this._renderedComponent = null, this._pendingStateQueue = null, this._pendingReplaceState = !1, this._pendingForceUpdate = !1, this._pendingCallbacks = null, this._pendingElement = null, this._context = null, this._rootNodeID = null, s.remove(e)
                    },
                    _setPropsInternal: function(e, t) {
                        var n = this._pendingElement || this._currentElement;
                        this._pendingElement = u.cloneAndReplaceProps(n, m({}, n.props, e)), h.enqueueUpdate(this, t)
                    },
                    _maskContext: function(e) {
                        var t = null;
                        if ("string" == typeof this._currentElement.type) return v;
                        var n = this._currentElement.type.contextTypes;
                        if (!n) return v;
                        t = {};
                        for (var r in n) t[r] = e[r];
                        return t
                    },
                    _processContext: function(e) {
                        var t = this._maskContext(e);
                        return t
                    },
                    _getValidatedChildContext: function(e) {
                        var t = this._instance,
                            n = t.getChildContext && t.getChildContext();
                        if (n) {
                            g("object" == typeof t.constructor.childContextTypes);
                            for (var r in n) g(r in t.constructor.childContextTypes);
                            return n
                        }
                        return null
                    },
                    _mergeChildContext: function(e, t) {
                        return t ? m({}, e, t) : e
                    },
                    _processProps: function(e) {
                        return e
                    },
                    _checkPropTypes: function(e, t, n) {
                        var o = this.getName();
                        for (var i in e)
                            if (e.hasOwnProperty(i)) {
                                var a;
                                try {
                                    g("function" == typeof e[i]), a = e[i](t, i, o, n)
                                } catch (u) {
                                    a = u
                                }
                                a instanceof Error && (r(this), n === d.prop)
                            }
                    },
                    receiveComponent: function(e, t, n) {
                        var r = this._currentElement,
                            o = this._context;
                        this._pendingElement = null, this.updateComponent(t, r, e, o, n)
                    },
                    performUpdateIfNecessary: function(e) {
                        null != this._pendingElement && f.receiveComponent(this, this._pendingElement || this._currentElement, e, this._context), (null !== this._pendingStateQueue || this._pendingForceUpdate) && this.updateComponent(e, this._currentElement, this._currentElement, this._context, this._context)
                    },
                    _warnIfContextsDiffer: function(e, t) {
                        e = this._maskContext(e), t = this._maskContext(t);
                        for (var n = Object.keys(t).sort(), r = (this.getName() || "ReactCompositeComponent", 0); r < n.length; r++) n[r]
                    },
                    updateComponent: function(e, t, n, r, o) {
                        var i = this._instance,
                            a = i.context,
                            u = i.props;
                        t !== n && (a = this._processContext(n._context), u = this._processProps(n.props), i.componentWillReceiveProps && i.componentWillReceiveProps(u, a));
                        var s = this._processPendingState(u, a),
                            l = this._pendingForceUpdate || !i.shouldComponentUpdate || i.shouldComponentUpdate(u, s, a);
                        l ? (this._pendingForceUpdate = !1, this._performComponentUpdate(n, u, s, a, e, o)) : (this._currentElement = n, this._context = o, i.props = u, i.state = s, i.context = a)
                    },
                    _processPendingState: function(e, t) {
                        var n = this._instance,
                            r = this._pendingStateQueue,
                            o = this._pendingReplaceState;
                        if (this._pendingReplaceState = !1, this._pendingStateQueue = null, !r) return n.state;
                        if (o && 1 === r.length) return r[0];
                        for (var i = m({}, o ? r[0] : n.state), a = o ? 1 : 0; a < r.length; a++) {
                            var u = r[a];
                            m(i, "function" == typeof u ? u.call(n, i, e, t) : u)
                        }
                        return i
                    },
                    _performComponentUpdate: function(e, t, n, r, o, i) {
                        var a = this._instance,
                            u = a.props,
                            s = a.state,
                            l = a.context;
                        a.componentWillUpdate && a.componentWillUpdate(t, n, r), this._currentElement = e, this._context = i, a.props = t, a.state = n, a.context = r, this._updateRenderedComponent(o, i), a.componentDidUpdate && o.getReactMountReady().enqueue(a.componentDidUpdate.bind(a, u, s, l), a)
                    },
                    _updateRenderedComponent: function(e, t) {
                        var n = this._renderedComponent,
                            r = n._currentElement,
                            o = this._getValidatedChildContext(),
                            i = this._renderValidatedComponent(o);
                        if (y(r, i)) f.receiveComponent(n, i, e, this._mergeChildContext(t, o));
                        else {
                            var a = this._rootNodeID,
                                u = n._rootNodeID;
                            f.unmountComponent(n), this._renderedComponent = this._instantiateReactComponent(i, this._currentElement.type);
                            var s = f.mountComponent(this._renderedComponent, a, e, this._mergeChildContext(t, o));
                            this._replaceNodeWithMarkupByID(u, s)
                        }
                    },
                    _replaceNodeWithMarkupByID: function(e, t) {
                        o.replaceNodeWithMarkupByID(e, t)
                    },
                    _renderValidatedComponentWithoutOwnerOrContext: function() {
                        var e = this._instance,
                            t = e.render();
                        return t
                    },
                    _renderValidatedComponent: function(e) {
                        var t, n = i.current;
                        i.current = this._mergeChildContext(this._currentElement._context, e), a.current = this;
                        try {
                            t = this._renderValidatedComponentWithoutOwnerOrContext()
                        } finally {
                            i.current = n, a.current = null
                        }
                        return g(null === t || t === !1 || u.isValidElement(t)), t
                    },
                    attachRef: function(e, t) {
                        var n = this.getPublicInstance(),
                            r = n.refs === v ? n.refs = {} : n.refs;
                        r[e] = t.getPublicInstance()
                    },
                    detachRef: function(e) {
                        var t = this.getPublicInstance().refs;
                        delete t[e]
                    },
                    getName: function() {
                        var e = this._currentElement.type,
                            t = this._instance && this._instance.constructor;
                        return e.displayName || t && t.displayName || e.name || t && t.name || null
                    },
                    getPublicInstance: function() {
                        return this._instance
                    },
                    _instantiateReactComponent: null
                };
            p.measureMethods(E, "ReactCompositeComponent", {
                mountComponent: "mountComponent",
                updateComponent: "updateComponent",
                _renderValidatedComponent: "_renderValidatedComponent"
            });
            var b = {
                Mixin: E
            };
            t.exports = b
        }, {
            113: 113,
            133: 133,
            147: 147,
            150: 150,
            27: 27,
            36: 36,
            38: 38,
            39: 39,
            55: 55,
            56: 56,
            65: 65,
            66: 66,
            71: 71,
            73: 73,
            74: 74,
            75: 75,
            79: 79,
            85: 85
        }],
        38: [function(e, t, n) {
            "use strict";
            var r = e(27),
                o = e(113),
                i = (e(150), {
                    current: o,
                    withContext: function(e, t) {
                        var n, o = i.current;
                        i.current = r({}, o, e);
                        try {
                            n = t()
                        } finally {
                            i.current = o
                        }
                        return n
                    }
                });
            t.exports = i
        }, {
            113: 113,
            150: 150,
            27: 27
        }],
        39: [function(e, t, n) {
            "use strict";
            var r = {
                current: null
            };
            t.exports = r
        }, {}],
        40: [function(e, t, n) {
            "use strict";

            function r(e) {
                return o.createFactory(e)
            }
            var o = e(55),
                i = (e(56), e(140)),
                a = i({
                    a: "a",
                    abbr: "abbr",
                    address: "address",
                    area: "area",
                    article: "article",
                    aside: "aside",
                    audio: "audio",
                    b: "b",
                    base: "base",
                    bdi: "bdi",
                    bdo: "bdo",
                    big: "big",
                    blockquote: "blockquote",
                    body: "body",
                    br: "br",
                    button: "button",
                    canvas: "canvas",
                    caption: "caption",
                    cite: "cite",
                    code: "code",
                    col: "col",
                    colgroup: "colgroup",
                    data: "data",
                    datalist: "datalist",
                    dd: "dd",
                    del: "del",
                    details: "details",
                    dfn: "dfn",
                    dialog: "dialog",
                    div: "div",
                    dl: "dl",
                    dt: "dt",
                    em: "em",
                    embed: "embed",
                    fieldset: "fieldset",
                    figcaption: "figcaption",
                    figure: "figure",
                    footer: "footer",
                    form: "form",
                    h1: "h1",
                    h2: "h2",
                    h3: "h3",
                    h4: "h4",
                    h5: "h5",
                    h6: "h6",
                    head: "head",
                    header: "header",
                    hr: "hr",
                    html: "html",
                    i: "i",
                    iframe: "iframe",
                    img: "img",
                    input: "input",
                    ins: "ins",
                    kbd: "kbd",
                    keygen: "keygen",
                    label: "label",
                    legend: "legend",
                    li: "li",
                    link: "link",
                    main: "main",
                    map: "map",
                    mark: "mark",
                    menu: "menu",
                    menuitem: "menuitem",
                    meta: "meta",
                    meter: "meter",
                    nav: "nav",
                    noscript: "noscript",
                    object: "object",
                    ol: "ol",
                    optgroup: "optgroup",
                    option: "option",
                    output: "output",
                    p: "p",
                    param: "param",
                    picture: "picture",
                    pre: "pre",
                    progress: "progress",
                    q: "q",
                    rp: "rp",
                    rt: "rt",
                    ruby: "ruby",
                    s: "s",
                    samp: "samp",
                    script: "script",
                    section: "section",
                    select: "select",
                    small: "small",
                    source: "source",
                    span: "span",
                    strong: "strong",
                    style: "style",
                    sub: "sub",
                    summary: "summary",
                    sup: "sup",
                    table: "table",
                    tbody: "tbody",
                    td: "td",
                    textarea: "textarea",
                    tfoot: "tfoot",
                    th: "th",
                    thead: "thead",
                    time: "time",
                    title: "title",
                    tr: "tr",
                    track: "track",
                    u: "u",
                    ul: "ul",
                    "var": "var",
                    video: "video",
                    wbr: "wbr",
                    circle: "circle",
                    clipPath: "clipPath",
                    defs: "defs",
                    ellipse: "ellipse",
                    g: "g",
                    line: "line",
                    linearGradient: "linearGradient",
                    mask: "mask",
                    path: "path",
                    pattern: "pattern",
                    polygon: "polygon",
                    polyline: "polyline",
                    radialGradient: "radialGradient",
                    rect: "rect",
                    stop: "stop",
                    svg: "svg",
                    text: "text",
                    tspan: "tspan"
                }, r);
            t.exports = a
        }, {
            140: 140,
            55: 55,
            56: 56
        }],
        41: [function(e, t, n) {
            "use strict";
            var r = e(2),
                o = e(29),
                i = e(33),
                a = e(55),
                u = e(138),
                s = a.createFactory("button"),
                l = u({
                    onClick: !0,
                    onDoubleClick: !0,
                    onMouseDown: !0,
                    onMouseMove: !0,
                    onMouseUp: !0,
                    onClickCapture: !0,
                    onDoubleClickCapture: !0,
                    onMouseDownCapture: !0,
                    onMouseMoveCapture: !0,
                    onMouseUpCapture: !0
                }),
                c = i.createClass({
                    displayName: "ReactDOMButton",
                    tagName: "BUTTON",
                    mixins: [r, o],
                    render: function() {
                        var e = {};
                        for (var t in this.props) !this.props.hasOwnProperty(t) || this.props.disabled && l[t] || (e[t] = this.props[t]);
                        return s(e, this.props.children)
                    }
                });
            t.exports = c
        }, {
            138: 138,
            2: 2,
            29: 29,
            33: 33,
            55: 55
        }],
        42: [function(e, t, n) {
            "use strict";

            function r(e) {
                e && (null != e.dangerouslySetInnerHTML && (g(null == e.children), g("object" == typeof e.dangerouslySetInnerHTML && "__html" in e.dangerouslySetInnerHTML)), g(null == e.style || "object" == typeof e.style))
            }

            function o(e, t, n, r) {
                var o = d.findReactContainerForID(e);
                if (o) {
                    var i = o.nodeType === D ? o.ownerDocument : o;
                    E(t, i)
                }
                r.getPutListenerQueue().enqueuePutListener(e, t, n)
            }

            function i(e) {
                P.call(T, e) || (g(I.test(e)), T[e] = !0)
            }

            function a(e) {
                i(e), this._tag = e, this._renderedChildren = null, this._previousStyleCopy = null, this._rootNodeID = null
            }
            var u = e(5),
                s = e(10),
                l = e(11),
                c = e(30),
                p = e(35),
                d = e(68),
                f = e(69),
                h = e(73),
                m = e(27),
                v = e(114),
                g = e(133),
                y = (e(134), e(139)),
                C = (e(150), c.deleteListener),
                E = c.listenTo,
                b = c.registrationNameModules,
                _ = {
                    string: !0,
                    number: !0
                },
                x = y({
                    style: null
                }),
                D = 1,
                M = null,
                N = {
                    area: !0,
                    base: !0,
                    br: !0,
                    col: !0,
                    embed: !0,
                    hr: !0,
                    img: !0,
                    input: !0,
                    keygen: !0,
                    link: !0,
                    meta: !0,
                    param: !0,
                    source: !0,
                    track: !0,
                    wbr: !0
                },
                I = /^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,
                T = {},
                P = {}.hasOwnProperty;
            a.displayName = "ReactDOMComponent", a.Mixin = {
                construct: function(e) {
                    this._currentElement = e
                },
                mountComponent: function(e, t, n) {
                    this._rootNodeID = e, r(this._currentElement.props);
                    var o = N[this._tag] ? "" : "</" + this._tag + ">";
                    return this._createOpenTagMarkupAndPutListeners(t) + this._createContentMarkup(t, n) + o
                },
                _createOpenTagMarkupAndPutListeners: function(e) {
                    var t = this._currentElement.props,
                        n = "<" + this._tag;
                    for (var r in t)
                        if (t.hasOwnProperty(r)) {
                            var i = t[r];
                            if (null != i)
                                if (b.hasOwnProperty(r)) o(this._rootNodeID, r, i, e);
                                else {
                                    r === x && (i && (i = this._previousStyleCopy = m({}, t.style)), i = u.createMarkupForStyles(i));
                                    var a = l.createMarkupForProperty(r, i);
                                    a && (n += " " + a)
                                }
                        }
                    if (e.renderToStaticMarkup) return n + ">";
                    var s = l.createMarkupForID(this._rootNodeID);
                    return n + " " + s + ">"
                },
                _createContentMarkup: function(e, t) {
                    var n = "";
                    ("listing" === this._tag || "pre" === this._tag || "textarea" === this._tag) && (n = "\n");
                    var r = this._currentElement.props,
                        o = r.dangerouslySetInnerHTML;
                    if (null != o) {
                        if (null != o.__html) return n + o.__html
                    } else {
                        var i = _[typeof r.children] ? r.children : null,
                            a = null != i ? null : r.children;
                        if (null != i) return n + v(i);
                        if (null != a) {
                            var u = this.mountChildren(a, e, t);
                            return n + u.join("")
                        }
                    }
                    return n
                },
                receiveComponent: function(e, t, n) {
                    var r = this._currentElement;
                    this._currentElement = e, this.updateComponent(t, r, e, n)
                },
                updateComponent: function(e, t, n, o) {
                    r(this._currentElement.props), this._updateDOMProperties(t.props, e), this._updateDOMChildren(t.props, e, o)
                },
                _updateDOMProperties: function(e, t) {
                    var n, r, i, a = this._currentElement.props;
                    for (n in e)
                        if (!a.hasOwnProperty(n) && e.hasOwnProperty(n))
                            if (n === x) {
                                var u = this._previousStyleCopy;
                                for (r in u) u.hasOwnProperty(r) && (i = i || {}, i[r] = "");
                                this._previousStyleCopy = null
                            } else b.hasOwnProperty(n) ? C(this._rootNodeID, n) : (s.isStandardName[n] || s.isCustomAttribute(n)) && M.deletePropertyByID(this._rootNodeID, n);
                    for (n in a) {
                        var l = a[n],
                            c = n === x ? this._previousStyleCopy : e[n];
                        if (a.hasOwnProperty(n) && l !== c)
                            if (n === x)
                                if (l ? l = this._previousStyleCopy = m({}, l) : this._previousStyleCopy = null, c) {
                                    for (r in c) !c.hasOwnProperty(r) || l && l.hasOwnProperty(r) || (i = i || {}, i[r] = "");
                                    for (r in l) l.hasOwnProperty(r) && c[r] !== l[r] && (i = i || {}, i[r] = l[r])
                                } else i = l;
                        else b.hasOwnProperty(n) ? o(this._rootNodeID, n, l, t) : (s.isStandardName[n] || s.isCustomAttribute(n)) && M.updatePropertyByID(this._rootNodeID, n, l)
                    }
                    i && M.updateStylesByID(this._rootNodeID, i)
                },
                _updateDOMChildren: function(e, t, n) {
                    var r = this._currentElement.props,
                        o = _[typeof e.children] ? e.children : null,
                        i = _[typeof r.children] ? r.children : null,
                        a = e.dangerouslySetInnerHTML && e.dangerouslySetInnerHTML.__html,
                        u = r.dangerouslySetInnerHTML && r.dangerouslySetInnerHTML.__html,
                        s = null != o ? null : e.children,
                        l = null != i ? null : r.children,
                        c = null != o || null != a,
                        p = null != i || null != u;
                    null != s && null == l ? this.updateChildren(null, t, n) : c && !p && this.updateTextContent(""), null != i ? o !== i && this.updateTextContent("" + i) : null != u ? a !== u && M.updateInnerHTMLByID(this._rootNodeID, u) : null != l && this.updateChildren(l, t, n)
                },
                unmountComponent: function() {
                    this.unmountChildren(), c.deleteAllListeners(this._rootNodeID), p.unmountIDFromEnvironment(this._rootNodeID), this._rootNodeID = null
                }
            }, h.measureMethods(a, "ReactDOMComponent", {
                mountComponent: "mountComponent",
                updateComponent: "updateComponent"
            }), m(a.prototype, a.Mixin, f.Mixin), a.injection = {
                injectIDOperations: function(e) {
                    a.BackendIDOperations = M = e
                }
            }, t.exports = a
        }, {
            10: 10,
            11: 11,
            114: 114,
            133: 133,
            134: 134,
            139: 139,
            150: 150,
            27: 27,
            30: 30,
            35: 35,
            5: 5,
            68: 68,
            69: 69,
            73: 73
        }],
        43: [function(e, t, n) {
            "use strict";
            var r = e(15),
                o = e(25),
                i = e(29),
                a = e(33),
                u = e(55),
                s = u.createFactory("form"),
                l = a.createClass({
                    displayName: "ReactDOMForm",
                    tagName: "FORM",
                    mixins: [i, o],
                    render: function() {
                        return s(this.props)
                    },
                    componentDidMount: function() {
                        this.trapBubbledEvent(r.topLevelTypes.topReset, "reset"), this.trapBubbledEvent(r.topLevelTypes.topSubmit, "submit")
                    }
                });
            t.exports = l
        }, {
            15: 15,
            25: 25,
            29: 29,
            33: 33,
            55: 55
        }],
        44: [function(e, t, n) {
            "use strict";
            var r = e(5),
                o = e(9),
                i = e(11),
                a = e(68),
                u = e(73),
                s = e(133),
                l = e(144),
                c = {
                    dangerouslySetInnerHTML: "`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",
                    style: "`style` must be set using `updateStylesByID()`."
                },
                p = {
                    updatePropertyByID: function(e, t, n) {
                        var r = a.getNode(e);
                        s(!c.hasOwnProperty(t)), null != n ? i.setValueForProperty(r, t, n) : i.deleteValueForProperty(r, t)
                    },
                    deletePropertyByID: function(e, t, n) {
                        var r = a.getNode(e);
                        s(!c.hasOwnProperty(t)), i.deleteValueForProperty(r, t, n)
                    },
                    updateStylesByID: function(e, t) {
                        var n = a.getNode(e);
                        r.setValueForStyles(n, t)
                    },
                    updateInnerHTMLByID: function(e, t) {
                        var n = a.getNode(e);
                        l(n, t)
                    },
                    updateTextContentByID: function(e, t) {
                        var n = a.getNode(e);
                        o.updateTextContent(n, t)
                    },
                    dangerouslyReplaceNodeWithMarkupByID: function(e, t) {
                        var n = a.getNode(e);
                        o.dangerouslyReplaceNodeWithMarkup(n, t)
                    },
                    dangerouslyProcessChildrenUpdates: function(e, t) {
                        for (var n = 0; n < e.length; n++) e[n].parentNode = a.getNode(e[n].parentID);
                        o.processUpdates(e, t)
                    }
                };
            u.measureMethods(p, "ReactDOMIDOperations", {
                updatePropertyByID: "updatePropertyByID",
                deletePropertyByID: "deletePropertyByID",
                updateStylesByID: "updateStylesByID",
                updateInnerHTMLByID: "updateInnerHTMLByID",
                updateTextContentByID: "updateTextContentByID",
                dangerouslyReplaceNodeWithMarkupByID: "dangerouslyReplaceNodeWithMarkupByID",
                dangerouslyProcessChildrenUpdates: "dangerouslyProcessChildrenUpdates"
            }), t.exports = p
        }, {
            11: 11,
            133: 133,
            144: 144,
            5: 5,
            68: 68,
            73: 73,
            9: 9
        }],
        45: [function(e, t, n) {
            "use strict";
            var r = e(15),
                o = e(25),
                i = e(29),
                a = e(33),
                u = e(55),
                s = u.createFactory("iframe"),
                l = a.createClass({
                    displayName: "ReactDOMIframe",
                    tagName: "IFRAME",
                    mixins: [i, o],
                    render: function() {
                        return s(this.props)
                    },
                    componentDidMount: function() {
                        this.trapBubbledEvent(r.topLevelTypes.topLoad, "load")
                    }
                });
            t.exports = l
        }, {
            15: 15,
            25: 25,
            29: 29,
            33: 33,
            55: 55
        }],
        46: [function(e, t, n) {
            "use strict";
            var r = e(15),
                o = e(25),
                i = e(29),
                a = e(33),
                u = e(55),
                s = u.createFactory("img"),
                l = a.createClass({
                    displayName: "ReactDOMImg",
                    tagName: "IMG",
                    mixins: [i, o],
                    render: function() {
                        return s(this.props)
                    },
                    componentDidMount: function() {
                        this.trapBubbledEvent(r.topLevelTypes.topLoad, "load"), this.trapBubbledEvent(r.topLevelTypes.topError, "error")
                    }
                });
            t.exports = l
        }, {
            15: 15,
            25: 25,
            29: 29,
            33: 33,
            55: 55
        }],
        47: [function(e, t, n) {
            "use strict";

            function r() {
                this.isMounted() && this.forceUpdate()
            }
            var o = e(2),
                i = e(11),
                a = e(24),
                u = e(29),
                s = e(33),
                l = e(55),
                c = e(68),
                p = e(85),
                d = e(27),
                f = e(133),
                h = l.createFactory("input"),
                m = {},
                v = s.createClass({
                    displayName: "ReactDOMInput",
                    tagName: "INPUT",
                    mixins: [o, a.Mixin, u],
                    getInitialState: function() {
                        var e = this.props.defaultValue;
                        return {
                            initialChecked: this.props.defaultChecked || !1,
                            initialValue: null != e ? e : null
                        }
                    },
                    render: function() {
                        var e = d({}, this.props);
                        e.defaultChecked = null, e.defaultValue = null;
                        var t = a.getValue(this);
                        e.value = null != t ? t : this.state.initialValue;
                        var n = a.getChecked(this);
                        return e.checked = null != n ? n : this.state.initialChecked, e.onChange = this._handleChange, h(e, this.props.children)
                    },
                    componentDidMount: function() {
                        var e = c.getID(this.getDOMNode());
                        m[e] = this
                    },
                    componentWillUnmount: function() {
                        var e = this.getDOMNode(),
                            t = c.getID(e);
                        delete m[t]
                    },
                    componentDidUpdate: function(e, t, n) {
                        var r = this.getDOMNode();
                        null != this.props.checked && i.setValueForProperty(r, "checked", this.props.checked || !1);
                        var o = a.getValue(this);
                        null != o && i.setValueForProperty(r, "value", "" + o)
                    },
                    _handleChange: function(e) {
                        var t, n = a.getOnChange(this);
                        n && (t = n.call(this, e)), p.asap(r, this);
                        var o = this.props.name;
                        if ("radio" === this.props.type && null != o) {
                            for (var i = this.getDOMNode(), u = i; u.parentNode;) u = u.parentNode;
                            for (var s = u.querySelectorAll("input[name=" + JSON.stringify("" + o) + '][type="radio"]'), l = 0, d = s.length; d > l; l++) {
                                var h = s[l];
                                if (h !== i && h.form === i.form) {
                                    var v = c.getID(h);
                                    f(v);
                                    var g = m[v];
                                    f(g), p.asap(r, g)
                                }
                            }
                        }
                        return t
                    }
                });
            t.exports = v
        }, {
            11: 11,
            133: 133,
            2: 2,
            24: 24,
            27: 27,
            29: 29,
            33: 33,
            55: 55,
            68: 68,
            85: 85
        }],
        48: [function(e, t, n) {
            "use strict";
            var r = e(29),
                o = e(33),
                i = e(55),
                a = (e(150), i.createFactory("option")),
                u = o.createClass({
                    displayName: "ReactDOMOption",
                    tagName: "OPTION",
                    mixins: [r],
                    componentWillMount: function() {},
                    render: function() {
                        return a(this.props, this.props.children)
                    }
                });
            t.exports = u
        }, {
            150: 150,
            29: 29,
            33: 33,
            55: 55
        }],
        49: [function(e, t, n) {
            "use strict";

            function r() {
                if (this._pendingUpdate) {
                    this._pendingUpdate = !1;
                    var e = u.getValue(this);
                    null != e && this.isMounted() && i(this, e)
                }
            }

            function o(e, t, n) {
                if (null == e[t]) return null;
                if (e.multiple) {
                    if (!Array.isArray(e[t])) return new Error("The `" + t + "` prop supplied to <select> must be an array if `multiple` is true.")
                } else if (Array.isArray(e[t])) return new Error("The `" + t + "` prop supplied to <select> must be a scalar value if `multiple` is false.")
            }

            function i(e, t) {
                var n, r, o, i = e.getDOMNode().options;
                if (e.props.multiple) {
                    for (n = {}, r = 0, o = t.length; o > r; r++) n["" + t[r]] = !0;
                    for (r = 0, o = i.length; o > r; r++) {
                        var a = n.hasOwnProperty(i[r].value);
                        i[r].selected !== a && (i[r].selected = a)
                    }
                } else {
                    for (n = "" + t, r = 0, o = i.length; o > r; r++)
                        if (i[r].value === n) return void(i[r].selected = !0);
                    i.length && (i[0].selected = !0)
                }
            }
            var a = e(2),
                u = e(24),
                s = e(29),
                l = e(33),
                c = e(55),
                p = e(85),
                d = e(27),
                f = c.createFactory("select"),
                h = l.createClass({
                    displayName: "ReactDOMSelect",
                    tagName: "SELECT",
                    mixins: [a, u.Mixin, s],
                    propTypes: {
                        defaultValue: o,
                        value: o
                    },
                    render: function() {
                        var e = d({}, this.props);
                        return e.onChange = this._handleChange, e.value = null, f(e, this.props.children)
                    },
                    componentWillMount: function() {
                        this._pendingUpdate = !1
                    },
                    componentDidMount: function() {
                        var e = u.getValue(this);
                        null != e ? i(this, e) : null != this.props.defaultValue && i(this, this.props.defaultValue)
                    },
                    componentDidUpdate: function(e) {
                        var t = u.getValue(this);
                        null != t ? (this._pendingUpdate = !1, i(this, t)) : !e.multiple != !this.props.multiple && (null != this.props.defaultValue ? i(this, this.props.defaultValue) : i(this, this.props.multiple ? [] : ""))
                    },
                    _handleChange: function(e) {
                        var t, n = u.getOnChange(this);
                        return n && (t = n.call(this, e)), this._pendingUpdate = !0, p.asap(r, this), t
                    }
                });
            t.exports = h
        }, {
            2: 2,
            24: 24,
            27: 27,
            29: 29,
            33: 33,
            55: 55,
            85: 85
        }],
        50: [function(e, t, n) {
            "use strict";

            function r(e, t, n, r) {
                return e === n && t === r
            }

            function o(e) {
                var t = document.selection,
                    n = t.createRange(),
                    r = n.text.length,
                    o = n.duplicate();
                o.moveToElementText(e), o.setEndPoint("EndToStart", n);
                var i = o.text.length,
                    a = i + r;
                return {
                    start: i,
                    end: a
                }
            }

            function i(e) {
                var t = window.getSelection && window.getSelection();
                if (!t || 0 === t.rangeCount) return null;
                var n = t.anchorNode,
                    o = t.anchorOffset,
                    i = t.focusNode,
                    a = t.focusOffset,
                    u = t.getRangeAt(0),
                    s = r(t.anchorNode, t.anchorOffset, t.focusNode, t.focusOffset),
                    l = s ? 0 : u.toString().length,
                    c = u.cloneRange();
                c.selectNodeContents(e), c.setEnd(u.startContainer, u.startOffset);
                var p = r(c.startContainer, c.startOffset, c.endContainer, c.endOffset),
                    d = p ? 0 : c.toString().length,
                    f = d + l,
                    h = document.createRange();
                h.setStart(n, o), h.setEnd(i, a);
                var m = h.collapsed;
                return {
                    start: m ? f : d,
                    end: m ? d : f
                }
            }

            function a(e, t) {
                var n, r, o = document.selection.createRange().duplicate();
                "undefined" == typeof t.end ? (n = t.start, r = n) : t.start > t.end ? (n = t.end, r = t.start) : (n = t.start, r = t.end), o.moveToElementText(e), o.moveStart("character", n), o.setEndPoint("EndToStart", o), o.moveEnd("character", r - n), o.select()
            }

            function u(e, t) {
                if (window.getSelection) {
                    var n = window.getSelection(),
                        r = e[c()].length,
                        o = Math.min(t.start, r),
                        i = "undefined" == typeof t.end ? o : Math.min(t.end, r);
                    if (!n.extend && o > i) {
                        var a = i;
                        i = o, o = a
                    }
                    var u = l(e, o),
                        s = l(e, i);
                    if (u && s) {
                        var p = document.createRange();
                        p.setStart(u.node, u.offset), n.removeAllRanges(), o > i ? (n.addRange(p), n.extend(s.node, s.offset)) : (p.setEnd(s.node, s.offset), n.addRange(p))
                    }
                }
            }
            var s = e(21),
                l = e(126),
                c = e(128),
                p = s.canUseDOM && "selection" in document && !("getSelection" in window),
                d = {
                    getOffsets: p ? o : i,
                    setOffsets: p ? a : u
                };
            t.exports = d
        }, {
            126: 126,
            128: 128,
            21: 21
        }],
        51: [function(e, t, n) {
            "use strict";
            var r = e(11),
                o = e(35),
                i = e(42),
                a = e(27),
                u = e(114),
                s = function(e) {};
            a(s.prototype, {
                construct: function(e) {
                    this._currentElement = e, this._stringText = "" + e, this._rootNodeID = null, this._mountIndex = 0
                },
                mountComponent: function(e, t, n) {
                    this._rootNodeID = e;
                    var o = u(this._stringText);
                    return t.renderToStaticMarkup ? o : "<span " + r.createMarkupForID(e) + ">" + o + "</span>"
                },
                receiveComponent: function(e, t) {
                    if (e !== this._currentElement) {
                        this._currentElement = e;
                        var n = "" + e;
                        n !== this._stringText && (this._stringText = n, i.BackendIDOperations.updateTextContentByID(this._rootNodeID, n))
                    }
                },
                unmountComponent: function() {
                    o.unmountIDFromEnvironment(this._rootNodeID)
                }
            }), t.exports = s
        }, {
            11: 11,
            114: 114,
            27: 27,
            35: 35,
            42: 42
        }],
        52: [function(e, t, n) {
            "use strict";

            function r() {
                this.isMounted() && this.forceUpdate()
            }
            var o = e(2),
                i = e(11),
                a = e(24),
                u = e(29),
                s = e(33),
                l = e(55),
                c = e(85),
                p = e(27),
                d = e(133),
                f = (e(150), l.createFactory("textarea")),
                h = s.createClass({
                    displayName: "ReactDOMTextarea",
                    tagName: "TEXTAREA",
                    mixins: [o, a.Mixin, u],
                    getInitialState: function() {
                        var e = this.props.defaultValue,
                            t = this.props.children;
                        null != t && (d(null == e), Array.isArray(t) && (d(t.length <= 1), t = t[0]), e = "" + t), null == e && (e = "");
                        var n = a.getValue(this);
                        return {
                            initialValue: "" + (null != n ? n : e)
                        }
                    },
                    render: function() {
                        var e = p({}, this.props);
                        return d(null == e.dangerouslySetInnerHTML), e.defaultValue = null, e.value = null, e.onChange = this._handleChange, f(e, this.state.initialValue)
                    },
                    componentDidUpdate: function(e, t, n) {
                        var r = a.getValue(this);
                        if (null != r) {
                            var o = this.getDOMNode();
                            i.setValueForProperty(o, "value", "" + r)
                        }
                    },
                    _handleChange: function(e) {
                        var t, n = a.getOnChange(this);
                        return n && (t = n.call(this, e)), c.asap(r, this), t
                    }
                });
            t.exports = h
        }, {
            11: 11,
            133: 133,
            150: 150,
            2: 2,
            24: 24,
            27: 27,
            29: 29,
            33: 33,
            55: 55,
            85: 85
        }],
        53: [function(e, t, n) {
            "use strict";

            function r() {
                this.reinitializeTransaction()
            }
            var o = e(85),
                i = e(101),
                a = e(27),
                u = e(112),
                s = {
                    initialize: u,
                    close: function() {
                        d.isBatchingUpdates = !1
                    }
                },
                l = {
                    initialize: u,
                    close: o.flushBatchedUpdates.bind(o)
                },
                c = [l, s];
            a(r.prototype, i.Mixin, {
                getTransactionWrappers: function() {
                    return c
                }
            });
            var p = new r,
                d = {
                    isBatchingUpdates: !1,
                    batchedUpdates: function(e, t, n, r, o) {
                        var i = d.isBatchingUpdates;
                        d.isBatchingUpdates = !0, i ? e(t, n, r, o) : p.perform(e, null, t, n, r, o)
                    }
                };
            t.exports = d
        }, {
            101: 101,
            112: 112,
            27: 27,
            85: 85
        }],
        54: [function(e, t, n) {
            "use strict";

            function r(e) {
                return h.createClass({
                    tagName: e.toUpperCase(),
                    render: function() {
                        return new T(e, null, null, null, null, this.props)
                    }
                })
            }

            function o() {
                R.EventEmitter.injectReactEventListener(P), R.EventPluginHub.injectEventPluginOrder(s), R.EventPluginHub.injectInstanceHandle(w), R.EventPluginHub.injectMount(O), R.EventPluginHub.injectEventPluginsByName({
                    SimpleEventPlugin: L,
                    EnterLeaveEventPlugin: l,
                    ChangeEventPlugin: a,
                    MobileSafariClickEventPlugin: d,
                    SelectEventPlugin: A,
                    BeforeInputEventPlugin: i
                }), R.NativeComponent.injectGenericComponentClass(g), R.NativeComponent.injectTextComponentClass(I), R.NativeComponent.injectAutoWrapper(r), R.Class.injectMixin(f), R.NativeComponent.injectComponentClasses({
                    button: y,
                    form: C,
                    iframe: _,
                    img: E,
                    input: x,
                    option: D,
                    select: M,
                    textarea: N,
                    html: F("html"),
                    head: F("head"),
                    body: F("body")
                }), R.DOMProperty.injectDOMPropertyConfig(p), R.DOMProperty.injectDOMPropertyConfig(U), R.EmptyComponent.injectEmptyComponent("noscript"), R.Updates.injectReconcileTransaction(S), R.Updates.injectBatchingStrategy(v), R.RootIndex.injectCreateReactRootIndex(c.canUseDOM ? u.createReactRootIndex : k.createReactRootIndex), R.Component.injectEnvironment(m), R.DOMComponent.injectIDOperations(b)
            }
            var i = e(3),
                a = e(7),
                u = e(8),
                s = e(13),
                l = e(14),
                c = e(21),
                p = e(23),
                d = e(26),
                f = e(29),
                h = e(33),
                m = e(35),
                v = e(53),
                g = e(42),
                y = e(41),
                C = e(43),
                E = e(46),
                b = e(44),
                _ = e(45),
                x = e(47),
                D = e(48),
                M = e(49),
                N = e(52),
                I = e(51),
                T = e(55),
                P = e(60),
                R = e(62),
                w = e(64),
                O = e(68),
                S = e(78),
                A = e(87),
                k = e(88),
                L = e(89),
                U = e(86),
                F = e(109);
            t.exports = {
                inject: o
            }
        }, {
            109: 109,
            13: 13,
            14: 14,
            21: 21,
            23: 23,
            26: 26,
            29: 29,
            3: 3,
            33: 33,
            35: 35,
            41: 41,
            42: 42,
            43: 43,
            44: 44,
            45: 45,
            46: 46,
            47: 47,
            48: 48,
            49: 49,
            51: 51,
            52: 52,
            53: 53,
            55: 55,
            60: 60,
            62: 62,
            64: 64,
            68: 68,
            7: 7,
            78: 78,
            8: 8,
            86: 86,
            87: 87,
            88: 88,
            89: 89
        }],
        55: [function(e, t, n) {
            "use strict";
            var r = e(38),
                o = e(39),
                i = e(27),
                a = (e(150), {
                    key: !0,
                    ref: !0
                }),
                u = function(e, t, n, r, o, i) {
                    this.type = e, this.key = t, this.ref = n, this._owner = r, this._context = o, this.props = i
                };
            u.prototype = {
                _isReactElement: !0
            }, u.createElement = function(e, t, n) {
                var i, s = {},
                    l = null,
                    c = null;
                if (null != t) {
                    c = void 0 === t.ref ? null : t.ref, l = void 0 === t.key ? null : "" + t.key;
                    for (i in t) t.hasOwnProperty(i) && !a.hasOwnProperty(i) && (s[i] = t[i])
                }
                var p = arguments.length - 2;
                if (1 === p) s.children = n;
                else if (p > 1) {
                    for (var d = Array(p), f = 0; p > f; f++) d[f] = arguments[f + 2];
                    s.children = d
                }
                if (e && e.defaultProps) {
                    var h = e.defaultProps;
                    for (i in h) "undefined" == typeof s[i] && (s[i] = h[i])
                }
                return new u(e, l, c, o.current, r.current, s)
            }, u.createFactory = function(e) {
                var t = u.createElement.bind(null, e);
                return t.type = e, t
            }, u.cloneAndReplaceProps = function(e, t) {
                var n = new u(e.type, e.key, e.ref, e._owner, e._context, t);
                return n
            }, u.cloneElement = function(e, t, n) {
                var r, s = i({}, e.props),
                    l = e.key,
                    c = e.ref,
                    p = e._owner;
                if (null != t) {
                    void 0 !== t.ref && (c = t.ref, p = o.current), void 0 !== t.key && (l = "" + t.key);
                    for (r in t) t.hasOwnProperty(r) && !a.hasOwnProperty(r) && (s[r] = t[r])
                }
                var d = arguments.length - 2;
                if (1 === d) s.children = n;
                else if (d > 1) {
                    for (var f = Array(d), h = 0; d > h; h++) f[h] = arguments[h + 2];
                    s.children = f
                }
                return new u(e.type, l, c, p, e._context, s)
            }, u.isValidElement = function(e) {
                var t = !(!e || !e._isReactElement);
                return t
            }, t.exports = u
        }, {
            150: 150,
            27: 27,
            38: 38,
            39: 39
        }],
        56: [function(e, t, n) {
            "use strict";

            function r() {
                if (y.current) {
                    var e = y.current.getName();
                    if (e) return " Check the render method of `" + e + "`."
                }
                return ""
            }

            function o(e) {
                var t = e && e.getPublicInstance();
                if (t) {
                    var n = t.constructor;
                    return n ? n.displayName || n.name || void 0 : void 0
                }
            }

            function i() {
                var e = y.current;
                return e && o(e) || void 0
            }

            function a(e, t) {
                e._store.validated || null != e.key || (e._store.validated = !0, s('Each child in an array or iterator should have a unique "key" prop.', e, t))
            }

            function u(e, t, n) {
                D.test(e) && s("Child objects should have non-numeric keys so ordering is preserved.", t, n)
            }

            function s(e, t, n) {
                var r = i(),
                    a = "string" == typeof n ? n : n.displayName || n.name,
                    u = r || a,
                    s = _[e] || (_[e] = {});
                if (!s.hasOwnProperty(u)) {
                    s[u] = !0;
                    var l = "";
                    if (t && t._owner && t._owner !== y.current) {
                        var c = o(t._owner);
                        l = " It was passed a child from " + c + "."
                    }
                }
            }

            function l(e, t) {
                if (Array.isArray(e))
                    for (var n = 0; n < e.length; n++) {
                        var r = e[n];
                        m.isValidElement(r) && a(r, t)
                    } else if (m.isValidElement(e)) e._store.validated = !0;
                    else if (e) {
                    var o = E(e);
                    if (o) {
                        if (o !== e.entries)
                            for (var i, s = o.call(e); !(i = s.next()).done;) m.isValidElement(i.value) && a(i.value, t)
                    } else if ("object" == typeof e) {
                        var l = v.extractIfFragment(e);
                        for (var c in l) l.hasOwnProperty(c) && u(c, l[c], t)
                    }
                }
            }

            function c(e, t, n, o) {
                for (var i in t)
                    if (t.hasOwnProperty(i)) {
                        var a;
                        try {
                            b("function" == typeof t[i]), a = t[i](n, i, e, o)
                        } catch (u) {
                            a = u
                        }
                        a instanceof Error && !(a.message in x) && (x[a.message] = !0, r(this))
                    }
            }

            function p(e, t) {
                var n = t.type,
                    r = "string" == typeof n ? n : n.displayName,
                    o = t._owner ? t._owner.getPublicInstance().constructor.displayName : null,
                    i = e + "|" + r + "|" + o;
                if (!M.hasOwnProperty(i)) {
                    M[i] = !0;
                    var a = "";
                    r && (a = " <" + r + " />");
                    var u = "";
                    o && (u = " The element was created by " + o + ".")
                }
            }

            function d(e, t) {
                return e !== e ? t !== t : 0 === e && 0 === t ? 1 / e === 1 / t : e === t
            }

            function f(e) {
                if (e._store) {
                    var t = e._store.originalProps,
                        n = e.props;
                    for (var r in n) n.hasOwnProperty(r) && (t.hasOwnProperty(r) && d(t[r], n[r]) || (p(r, e), t[r] = n[r]))
                }
            }

            function h(e) {
                if (null != e.type) {
                    var t = C.getComponentClassForElement(e),
                        n = t.displayName || t.name;
                    t.propTypes && c(n, t.propTypes, e.props, g.prop), "function" == typeof t.getDefaultProps
                }
            }
            var m = e(55),
                v = e(61),
                g = e(75),
                y = (e(74), e(39)),
                C = e(71),
                E = e(124),
                b = e(133),
                _ = (e(150), {}),
                x = {},
                D = /^\d+$/,
                M = {},
                N = {
                    checkAndWarnForMutatedProps: f,
                    createElement: function(e, t, n) {
                        var r = m.createElement.apply(this, arguments);
                        if (null == r) return r;
                        for (var o = 2; o < arguments.length; o++) l(arguments[o], e);
                        return h(r), r
                    },
                    createFactory: function(e) {
                        var t = N.createElement.bind(null, e);
                        return t.type = e, t
                    },
                    cloneElement: function(e, t, n) {
                        for (var r = m.cloneElement.apply(this, arguments), o = 2; o < arguments.length; o++) l(arguments[o], r.type);
                        return h(r), r
                    }
                };
            t.exports = N
        }, {
            124: 124,
            133: 133,
            150: 150,
            39: 39,
            55: 55,
            61: 61,
            71: 71,
            74: 74,
            75: 75
        }],
        57: [function(e, t, n) {
            "use strict";

            function r(e) {
                c[e] = !0
            }

            function o(e) {
                delete c[e]
            }

            function i(e) {
                return !!c[e]
            }
            var a, u = e(55),
                s = e(65),
                l = e(133),
                c = {},
                p = {
                    injectEmptyComponent: function(e) {
                        a = u.createFactory(e)
                    }
                },
                d = function() {};
            d.prototype.componentDidMount = function() {
                var e = s.get(this);
                e && r(e._rootNodeID)
            }, d.prototype.componentWillUnmount = function() {
                var e = s.get(this);
                e && o(e._rootNodeID)
            }, d.prototype.render = function() {
                return l(a), a()
            };
            var f = u.createElement(d),
                h = {
                    emptyElement: f,
                    injection: p,
                    isNullComponentID: i
                };
            t.exports = h
        }, {
            133: 133,
            55: 55,
            65: 65
        }],
        58: [function(e, t, n) {
            "use strict";
            var r = {
                guard: function(e, t) {
                    return e
                }
            };
            t.exports = r
        }, {}],
        59: [function(e, t, n) {
            "use strict";

            function r(e) {
                o.enqueueEvents(e), o.processEventQueue()
            }
            var o = e(17),
                i = {
                    handleTopLevel: function(e, t, n, i) {
                        var a = o.extractEvents(e, t, n, i);
                        r(a)
                    }
                };
            t.exports = i
        }, {
            17: 17
        }],
        60: [function(e, t, n) {
            "use strict";

            function r(e) {
                var t = p.getID(e),
                    n = c.getReactRootIDFromNodeID(t),
                    r = p.findReactContainerForID(n),
                    o = p.getFirstReactDOM(r);
                return o
            }

            function o(e, t) {
                this.topLevelType = e, this.nativeEvent = t, this.ancestors = []
            }

            function i(e) {
                for (var t = p.getFirstReactDOM(h(e.nativeEvent)) || window, n = t; n;) e.ancestors.push(n), n = r(n);
                for (var o = 0, i = e.ancestors.length; i > o; o++) {
                    t = e.ancestors[o];
                    var a = p.getID(t) || "";
                    v._handleTopLevel(e.topLevelType, t, a, e.nativeEvent)
                }
            }

            function a(e) {
                var t = m(window);
                e(t)
            }
            var u = e(16),
                s = e(21),
                l = e(28),
                c = e(64),
                p = e(68),
                d = e(85),
                f = e(27),
                h = e(123),
                m = e(129);
            f(o.prototype, {
                destructor: function() {
                    this.topLevelType = null, this.nativeEvent = null, this.ancestors.length = 0
                }
            }), l.addPoolingTo(o, l.twoArgumentPooler);
            var v = {
                _enabled: !0,
                _handleTopLevel: null,
                WINDOW_HANDLE: s.canUseDOM ? window : null,
                setHandleTopLevel: function(e) {
                    v._handleTopLevel = e
                },
                setEnabled: function(e) {
                    v._enabled = !!e
                },
                isEnabled: function() {
                    return v._enabled
                },
                trapBubbledEvent: function(e, t, n) {
                    var r = n;
                    return r ? u.listen(r, t, v.dispatchEvent.bind(null, e)) : null
                },
                trapCapturedEvent: function(e, t, n) {
                    var r = n;
                    return r ? u.capture(r, t, v.dispatchEvent.bind(null, e)) : null
                },
                monitorScrollValue: function(e) {
                    var t = a.bind(null, e);
                    u.listen(window, "scroll", t)
                },
                dispatchEvent: function(e, t) {
                    if (v._enabled) {
                        var n = o.getPooled(e, t);
                        try {
                            d.batchedUpdates(i, n)
                        } finally {
                            o.release(n)
                        }
                    }
                }
            };
            t.exports = v
        }, {
            123: 123,
            129: 129,
            16: 16,
            21: 21,
            27: 27,
            28: 28,
            64: 64,
            68: 68,
            85: 85
        }],
        61: [function(e, t, n) {
            "use strict";
            var r = (e(55), e(150), {
                create: function(e) {
                    return e
                },
                extract: function(e) {
                    return e
                },
                extractIfFragment: function(e) {
                    return e
                }
            });
            t.exports = r
        }, {
            150: 150,
            55: 55
        }],
        62: [function(e, t, n) {
            "use strict";
            var r = e(10),
                o = e(17),
                i = e(36),
                a = e(33),
                u = e(57),
                s = e(30),
                l = e(71),
                c = e(42),
                p = e(73),
                d = e(81),
                f = e(85),
                h = {
                    Component: i.injection,
                    Class: a.injection,
                    DOMComponent: c.injection,
                    DOMProperty: r.injection,
                    EmptyComponent: u.injection,
                    EventPluginHub: o.injection,
                    EventEmitter: s.injection,
                    NativeComponent: l.injection,
                    Perf: p.injection,
                    RootIndex: d.injection,
                    Updates: f.injection
                };
            t.exports = h
        }, {
            10: 10,
            17: 17,
            30: 30,
            33: 33,
            36: 36,
            42: 42,
            57: 57,
            71: 71,
            73: 73,
            81: 81,
            85: 85
        }],
        63: [function(e, t, n) {
            "use strict";

            function r(e) {
                return i(document.documentElement, e)
            }
            var o = e(50),
                i = e(107),
                a = e(117),
                u = e(119),
                s = {
                    hasSelectionCapabilities: function(e) {
                        return e && ("INPUT" === e.nodeName && "text" === e.type || "TEXTAREA" === e.nodeName || "true" === e.contentEditable)
                    },
                    getSelectionInformation: function() {
                        var e = u();
                        return {
                            focusedElem: e,
                            selectionRange: s.hasSelectionCapabilities(e) ? s.getSelection(e) : null
                        }
                    },
                    restoreSelection: function(e) {
                        var t = u(),
                            n = e.focusedElem,
                            o = e.selectionRange;
                        t !== n && r(n) && (s.hasSelectionCapabilities(n) && s.setSelection(n, o), a(n))
                    },
                    getSelection: function(e) {
                        var t;
                        if ("selectionStart" in e) t = {
                            start: e.selectionStart,
                            end: e.selectionEnd
                        };
                        else if (document.selection && "INPUT" === e.nodeName) {
                            var n = document.selection.createRange();
                            n.parentElement() === e && (t = {
                                start: -n.moveStart("character", -e.value.length),
                                end: -n.moveEnd("character", -e.value.length)
                            })
                        } else t = o.getOffsets(e);
                        return t || {
                            start: 0,
                            end: 0
                        }
                    },
                    setSelection: function(e, t) {
                        var n = t.start,
                            r = t.end;
                        if ("undefined" == typeof r && (r = n), "selectionStart" in e) e.selectionStart = n, e.selectionEnd = Math.min(r, e.value.length);
                        else if (document.selection && "INPUT" === e.nodeName) {
                            var i = e.createTextRange();
                            i.collapse(!0), i.moveStart("character", n), i.moveEnd("character", r - n), i.select()
                        } else o.setOffsets(e, t)
                    }
                };
            t.exports = s
        }, {
            107: 107,
            117: 117,
            119: 119,
            50: 50
        }],
        64: [function(e, t, n) {
            "use strict";

            function r(e) {
                return f + e.toString(36)
            }

            function o(e, t) {
                return e.charAt(t) === f || t === e.length
            }

            function i(e) {
                return "" === e || e.charAt(0) === f && e.charAt(e.length - 1) !== f
            }

            function a(e, t) {
                return 0 === t.indexOf(e) && o(t, e.length)
            }

            function u(e) {
                return e ? e.substr(0, e.lastIndexOf(f)) : ""
            }

            function s(e, t) {
                if (d(i(e) && i(t)), d(a(e, t)), e === t) return e;
                var n, r = e.length + h;
                for (n = r; n < t.length && !o(t, n); n++);
                return t.substr(0, n)
            }

            function l(e, t) {
                var n = Math.min(e.length, t.length);
                if (0 === n) return "";
                for (var r = 0, a = 0; n >= a; a++)
                    if (o(e, a) && o(t, a)) r = a;
                    else if (e.charAt(a) !== t.charAt(a)) break;
                var u = e.substr(0, r);
                return d(i(u)), u
            }

            function c(e, t, n, r, o, i) {
                e = e || "", t = t || "", d(e !== t);
                var l = a(t, e);
                d(l || a(e, t));
                for (var c = 0, p = l ? u : s, f = e;; f = p(f, t)) {
                    var h;
                    if (o && f === e || i && f === t || (h = n(f, l, r)), h === !1 || f === t) break;
                    d(c++ < m)
                }
            }
            var p = e(81),
                d = e(133),
                f = ".",
                h = f.length,
                m = 100,
                v = {
                    createReactRootID: function() {
                        return r(p.createReactRootIndex())
                    },
                    createReactID: function(e, t) {
                        return e + t
                    },
                    getReactRootIDFromNodeID: function(e) {
                        if (e && e.charAt(0) === f && e.length > 1) {
                            var t = e.indexOf(f, 1);
                            return t > -1 ? e.substr(0, t) : e
                        }
                        return null
                    },
                    traverseEnterLeave: function(e, t, n, r, o) {
                        var i = l(e, t);
                        i !== e && c(e, i, n, r, !1, !0), i !== t && c(i, t, n, o, !0, !1)
                    },
                    traverseTwoPhase: function(e, t, n) {
                        e && (c("", e, t, n, !0, !1), c(e, "", t, n, !1, !0))
                    },
                    traverseAncestors: function(e, t, n) {
                        c("", e, t, n, !0, !1)
                    },
                    _getFirstCommonAncestorID: l,
                    _getNextDescendantID: s,
                    isAncestorIDOf: a,
                    SEPARATOR: f
                };
            t.exports = v
        }, {
            133: 133,
            81: 81
        }],
        65: [function(e, t, n) {
            "use strict";
            var r = {
                remove: function(e) {
                    e._reactInternalInstance = void 0
                },
                get: function(e) {
                    return e._reactInternalInstance
                },
                has: function(e) {
                    return void 0 !== e._reactInternalInstance
                },
                set: function(e, t) {
                    e._reactInternalInstance = t
                }
            };
            t.exports = r
        }, {}],
        66: [function(e, t, n) {
            "use strict";
            var r = {
                currentlyMountingInstance: null,
                currentlyUnmountingInstance: null
            };
            t.exports = r
        }, {}],
        67: [function(e, t, n) {
            "use strict";
            var r = e(104),
                o = {
                    CHECKSUM_ATTR_NAME: "data-react-checksum",
                    addChecksumToMarkup: function(e) {
                        var t = r(e);
                        return e.replace(">", " " + o.CHECKSUM_ATTR_NAME + '="' + t + '">')
                    },
                    canReuseMarkup: function(e, t) {
                        var n = t.getAttribute(o.CHECKSUM_ATTR_NAME);
                        n = n && parseInt(n, 10);
                        var i = r(e);
                        return i === n
                    }
                };
            t.exports = o
        }, {
            104: 104
        }],
        68: [function(e, t, n) {
            "use strict";

            function r(e, t) {
                for (var n = Math.min(e.length, t.length), r = 0; n > r; r++)
                    if (e.charAt(r) !== t.charAt(r)) return r;
                return e.length === t.length ? -1 : n
            }

            function o(e) {
                var t = P(e);
                return t && K.getID(t)
            }

            function i(e) {
                var t = a(e);
                if (t)
                    if (L.hasOwnProperty(t)) {
                        var n = L[t];
                        n !== e && (w(!c(n, t)), L[t] = e)
                    } else L[t] = e;
                return t
            }

            function a(e) {
                return e && e.getAttribute && e.getAttribute(k) || ""
            }

            function u(e, t) {
                var n = a(e);
                n !== t && delete L[n], e.setAttribute(k, t), L[t] = e
            }

            function s(e) {
                return L.hasOwnProperty(e) && c(L[e], e) || (L[e] = K.findReactNodeByID(e)), L[e]
            }

            function l(e) {
                var t = b.get(e)._rootNodeID;
                return C.isNullComponentID(t) ? null : (L.hasOwnProperty(t) && c(L[t], t) || (L[t] = K.findReactNodeByID(t)), L[t])
            }

            function c(e, t) {
                if (e) {
                    w(a(e) === t);
                    var n = K.findReactContainerForID(t);
                    if (n && T(n, e)) return !0
                }
                return !1
            }

            function p(e) {
                delete L[e]
            }

            function d(e) {
                var t = L[e];
                return t && c(t, e) ? void(W = t) : !1
            }

            function f(e) {
                W = null, E.traverseAncestors(e, d);
                var t = W;
                return W = null, t
            }

            function h(e, t, n, r, o) {
                var i = D.mountComponent(e, t, r, I);
                e._isTopLevel = !0, K._mountImageIntoNode(i, n, o)
            }

            function m(e, t, n, r) {
                var o = N.ReactReconcileTransaction.getPooled();
                o.perform(h, null, e, t, n, o, r), N.ReactReconcileTransaction.release(o)
            }
            var v = e(10),
                g = e(30),
                y = (e(39), e(55)),
                C = (e(56), e(57)),
                E = e(64),
                b = e(65),
                _ = e(67),
                x = e(73),
                D = e(79),
                M = e(84),
                N = e(85),
                I = e(113),
                T = e(107),
                P = e(127),
                R = e(132),
                w = e(133),
                O = e(144),
                S = e(147),
                A = (e(150), E.SEPARATOR),
                k = v.ID_ATTRIBUTE_NAME,
                L = {},
                U = 1,
                F = 9,
                B = {},
                V = {},
                j = [],
                W = null,
                K = {
                    _instancesByReactRootID: B,
                    scrollMonitor: function(e, t) {
                        t()
                    },
                    _updateRootComponent: function(e, t, n, r) {
                        return K.scrollMonitor(n, function() {
                            M.enqueueElementInternal(e, t), r && M.enqueueCallbackInternal(e, r)
                        }), e
                    },
                    _registerComponent: function(e, t) {
                        w(t && (t.nodeType === U || t.nodeType === F)), g.ensureScrollValueMonitoring();
                        var n = K.registerContainer(t);
                        return B[n] = e, n
                    },
                    _renderNewRootComponent: function(e, t, n) {
                        var r = R(e, null),
                            o = K._registerComponent(r, t);
                        return N.batchedUpdates(m, r, o, t, n), r
                    },
                    render: function(e, t, n) {
                        w(y.isValidElement(e));
                        var r = B[o(t)];
                        if (r) {
                            var i = r._currentElement;
                            if (S(i, e)) return K._updateRootComponent(r, e, t, n).getPublicInstance();
                            K.unmountComponentAtNode(t)
                        }
                        var a = P(t),
                            u = a && K.isRenderedByReact(a),
                            s = u && !r,
                            l = K._renderNewRootComponent(e, t, s).getPublicInstance();
                        return n && n.call(l), l
                    },
                    constructAndRenderComponent: function(e, t, n) {
                        var r = y.createElement(e, t);
                        return K.render(r, n)
                    },
                    constructAndRenderComponentByID: function(e, t, n) {
                        var r = document.getElementById(n);
                        return w(r), K.constructAndRenderComponent(e, t, r)
                    },
                    registerContainer: function(e) {
                        var t = o(e);
                        return t && (t = E.getReactRootIDFromNodeID(t)), t || (t = E.createReactRootID()), V[t] = e, t
                    },
                    unmountComponentAtNode: function(e) {
                        w(e && (e.nodeType === U || e.nodeType === F));
                        var t = o(e),
                            n = B[t];
                        return n ? (K.unmountComponentFromNode(n, e), delete B[t], delete V[t], !0) : !1
                    },
                    unmountComponentFromNode: function(e, t) {
                        for (D.unmountComponent(e), t.nodeType === F && (t = t.documentElement); t.lastChild;) t.removeChild(t.lastChild)
                    },
                    findReactContainerForID: function(e) {
                        var t = E.getReactRootIDFromNodeID(e),
                            n = V[t];
                        return n
                    },
                    findReactNodeByID: function(e) {
                        var t = K.findReactContainerForID(e);
                        return K.findComponentRoot(t, e)
                    },
                    isRenderedByReact: function(e) {
                        if (1 !== e.nodeType) return !1;
                        var t = K.getID(e);
                        return t ? t.charAt(0) === A : !1
                    },
                    getFirstReactDOM: function(e) {
                        for (var t = e; t && t.parentNode !== t;) {
                            if (K.isRenderedByReact(t)) return t;
                            t = t.parentNode
                        }
                        return null
                    },
                    findComponentRoot: function(e, t) {
                        var n = j,
                            r = 0,
                            o = f(t) || e;
                        for (n[0] = o.firstChild, n.length = 1; r < n.length;) {
                            for (var i, a = n[r++]; a;) {
                                var u = K.getID(a);
                                u ? t === u ? i = a : E.isAncestorIDOf(u, t) && (n.length = r = 0, n.push(a.firstChild)) : n.push(a.firstChild), a = a.nextSibling
                            }
                            if (i) return n.length = 0, i
                        }
                        n.length = 0, w(!1)
                    },
                    _mountImageIntoNode: function(e, t, n) {
                        if (w(t && (t.nodeType === U || t.nodeType === F)), n) {
                            var o = P(t);
                            if (_.canReuseMarkup(e, o)) return;
                            var i = o.getAttribute(_.CHECKSUM_ATTR_NAME);
                            o.removeAttribute(_.CHECKSUM_ATTR_NAME);
                            var a = o.outerHTML;
                            o.setAttribute(_.CHECKSUM_ATTR_NAME, i);
                            var u = r(e, a);
                            " (client) " + e.substring(u - 20, u + 20) + "\n (server) " + a.substring(u - 20, u + 20), w(t.nodeType !== F)
                        }
                        w(t.nodeType !== F), O(t, e)
                    },
                    getReactRootID: o,
                    getID: i,
                    setID: u,
                    getNode: s,
                    getNodeFromInstance: l,
                    purgeID: p
                };
            x.measureMethods(K, "ReactMount", {
                _renderNewRootComponent: "_renderNewRootComponent",
                _mountImageIntoNode: "_mountImageIntoNode"
            }), t.exports = K
        }, {
            10: 10,
            107: 107,
            113: 113,
            127: 127,
            132: 132,
            133: 133,
            144: 144,
            147: 147,
            150: 150,
            30: 30,
            39: 39,
            55: 55,
            56: 56,
            57: 57,
            64: 64,
            65: 65,
            67: 67,
            73: 73,
            79: 79,
            84: 84,
            85: 85
        }],
        69: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                h.push({
                    parentID: e,
                    parentNode: null,
                    type: c.INSERT_MARKUP,
                    markupIndex: m.push(t) - 1,
                    textContent: null,
                    fromIndex: null,
                    toIndex: n
                })
            }

            function o(e, t, n) {
                h.push({
                    parentID: e,
                    parentNode: null,
                    type: c.MOVE_EXISTING,
                    markupIndex: null,
                    textContent: null,
                    fromIndex: t,
                    toIndex: n
                })
            }

            function i(e, t) {
                h.push({
                    parentID: e,
                    parentNode: null,
                    type: c.REMOVE_NODE,
                    markupIndex: null,
                    textContent: null,
                    fromIndex: t,
                    toIndex: null
                })
            }

            function a(e, t) {
                h.push({
                    parentID: e,
                    parentNode: null,
                    type: c.TEXT_CONTENT,
                    markupIndex: null,
                    textContent: t,
                    fromIndex: null,
                    toIndex: null
                })
            }

            function u() {
                h.length && (l.processChildrenUpdates(h, m), s())
            }

            function s() {
                h.length = 0, m.length = 0
            }
            var l = e(36),
                c = e(70),
                p = e(79),
                d = e(31),
                f = 0,
                h = [],
                m = [],
                v = {
                    Mixin: {
                        mountChildren: function(e, t, n) {
                            var r = d.instantiateChildren(e, t, n);
                            this._renderedChildren = r;
                            var o = [],
                                i = 0;
                            for (var a in r)
                                if (r.hasOwnProperty(a)) {
                                    var u = r[a],
                                        s = this._rootNodeID + a,
                                        l = p.mountComponent(u, s, t, n);
                                    u._mountIndex = i, o.push(l), i++
                                }
                            return o
                        },
                        updateTextContent: function(e) {
                            f++;
                            var t = !0;
                            try {
                                var n = this._renderedChildren;
                                d.unmountChildren(n);
                                for (var r in n) n.hasOwnProperty(r) && this._unmountChildByName(n[r], r);
                                this.setTextContent(e), t = !1
                            } finally {
                                f--, f || (t ? s() : u())
                            }
                        },
                        updateChildren: function(e, t, n) {
                            f++;
                            var r = !0;
                            try {
                                this._updateChildren(e, t, n), r = !1
                            } finally {
                                f--, f || (r ? s() : u())
                            }
                        },
                        _updateChildren: function(e, t, n) {
                            var r = this._renderedChildren,
                                o = d.updateChildren(r, e, t, n);
                            if (this._renderedChildren = o, o || r) {
                                var i, a = 0,
                                    u = 0;
                                for (i in o)
                                    if (o.hasOwnProperty(i)) {
                                        var s = r && r[i],
                                            l = o[i];
                                        s === l ? (this.moveChild(s, u, a), a = Math.max(s._mountIndex, a), s._mountIndex = u) : (s && (a = Math.max(s._mountIndex, a), this._unmountChildByName(s, i)), this._mountChildByNameAtIndex(l, i, u, t, n)), u++
                                    }
                                for (i in r) !r.hasOwnProperty(i) || o && o.hasOwnProperty(i) || this._unmountChildByName(r[i], i)
                            }
                        },
                        unmountChildren: function() {
                            var e = this._renderedChildren;
                            d.unmountChildren(e), this._renderedChildren = null
                        },
                        moveChild: function(e, t, n) {
                            e._mountIndex < n && o(this._rootNodeID, e._mountIndex, t)
                        },
                        createChild: function(e, t) {
                            r(this._rootNodeID, t, e._mountIndex)
                        },
                        removeChild: function(e) {
                            i(this._rootNodeID, e._mountIndex)
                        },
                        setTextContent: function(e) {
                            a(this._rootNodeID, e)
                        },
                        _mountChildByNameAtIndex: function(e, t, n, r, o) {
                            var i = this._rootNodeID + t,
                                a = p.mountComponent(e, i, r, o);
                            e._mountIndex = n, this.createChild(e, a)
                        },
                        _unmountChildByName: function(e, t) {
                            this.removeChild(e), e._mountIndex = null
                        }
                    }
                };
            t.exports = v
        }, {
            31: 31,
            36: 36,
            70: 70,
            79: 79
        }],
        70: [function(e, t, n) {
            "use strict";
            var r = e(138),
                o = r({
                    INSERT_MARKUP: null,
                    MOVE_EXISTING: null,
                    REMOVE_NODE: null,
                    TEXT_CONTENT: null
                });
            t.exports = o
        }, {
            138: 138
        }],
        71: [function(e, t, n) {
            "use strict";

            function r(e) {
                if ("function" == typeof e.type) return e.type;
                var t = e.type,
                    n = p[t];
                return null == n && (p[t] = n = l(t)), n
            }

            function o(e) {
                return s(c), new c(e.type, e.props)
            }

            function i(e) {
                return new d(e)
            }

            function a(e) {
                return e instanceof d
            }
            var u = e(27),
                s = e(133),
                l = null,
                c = null,
                p = {},
                d = null,
                f = {
                    injectGenericComponentClass: function(e) {
                        c = e
                    },
                    injectTextComponentClass: function(e) {
                        d = e
                    },
                    injectComponentClasses: function(e) {
                        u(p, e)
                    },
                    injectAutoWrapper: function(e) {
                        l = e
                    }
                },
                h = {
                    getComponentClassForElement: r,
                    createInternalComponent: o,
                    createInstanceForText: i,
                    isTextComponent: a,
                    injection: f
                };
            t.exports = h
        }, {
            133: 133,
            27: 27
        }],
        72: [function(e, t, n) {
            "use strict";
            var r = e(133),
                o = {
                    isValidOwner: function(e) {
                        return !(!e || "function" != typeof e.attachRef || "function" != typeof e.detachRef)
                    },
                    addComponentAsRefTo: function(e, t, n) {
                        r(o.isValidOwner(n)), n.attachRef(t, e)
                    },
                    removeComponentAsRefFrom: function(e, t, n) {
                        r(o.isValidOwner(n)), n.getPublicInstance().refs[t] === e.getPublicInstance() && n.detachRef(t)
                    }
                };
            t.exports = o
        }, {
            133: 133
        }],
        73: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                return n
            }
            var o = {
                enableMeasure: !1,
                storedMeasure: r,
                measureMethods: function(e, t, n) {},
                measure: function(e, t, n) {
                    return n
                },
                injection: {
                    injectMeasure: function(e) {
                        o.storedMeasure = e
                    }
                }
            };
            t.exports = o
        }, {}],
        74: [function(e, t, n) {
            "use strict";
            var r = {};
            t.exports = r
        }, {}],
        75: [function(e, t, n) {
            "use strict";
            var r = e(138),
                o = r({
                    prop: null,
                    context: null,
                    childContext: null
                });
            t.exports = o
        }, {
            138: 138
        }],
        76: [function(e, t, n) {
            "use strict";

            function r(e) {
                function t(t, n, r, o, i) {
                    if (o = o || b, null == n[r]) {
                        var a = C[i];
                        return t ? new Error("Required " + a + " `" + r + "` was not specified in " + ("`" + o + "`.")) : null
                    }
                    return e(n, r, o, i)
                }
                var n = t.bind(null, !1);
                return n.isRequired = t.bind(null, !0), n
            }

            function o(e) {
                function t(t, n, r, o) {
                    var i = t[n],
                        a = m(i);
                    if (a !== e) {
                        var u = C[o],
                            s = v(i);
                        return new Error("Invalid " + u + " `" + n + "` of type `" + s + "` " + ("supplied to `" + r + "`, expected `" + e + "`."))
                    }
                    return null
                }
                return r(t)
            }

            function i() {
                return r(E.thatReturns(null))
            }

            function a(e) {
                function t(t, n, r, o) {
                    var i = t[n];
                    if (!Array.isArray(i)) {
                        var a = C[o],
                            u = m(i);
                        return new Error("Invalid " + a + " `" + n + "` of type " + ("`" + u + "` supplied to `" + r + "`, expected an array."))
                    }
                    for (var s = 0; s < i.length; s++) {
                        var l = e(i, s, r, o);
                        if (l instanceof Error) return l
                    }
                    return null
                }
                return r(t)
            }

            function u() {
                function e(e, t, n, r) {
                    if (!g.isValidElement(e[t])) {
                        var o = C[r];
                        return new Error("Invalid " + o + " `" + t + "` supplied to " + ("`" + n + "`, expected a ReactElement."))
                    }
                    return null
                }
                return r(e)
            }

            function s(e) {
                function t(t, n, r, o) {
                    if (!(t[n] instanceof e)) {
                        var i = C[o],
                            a = e.name || b;
                        return new Error("Invalid " + i + " `" + n + "` supplied to " + ("`" + r + "`, expected instance of `" + a + "`."))
                    }
                    return null
                }
                return r(t)
            }

            function l(e) {
                function t(t, n, r, o) {
                    for (var i = t[n], a = 0; a < e.length; a++)
                        if (i === e[a]) return null;
                    var u = C[o],
                        s = JSON.stringify(e);
                    return new Error("Invalid " + u + " `" + n + "` of value `" + i + "` " + ("supplied to `" + r + "`, expected one of " + s + "."))
                }
                return r(t)
            }

            function c(e) {
                function t(t, n, r, o) {
                    var i = t[n],
                        a = m(i);
                    if ("object" !== a) {
                        var u = C[o];
                        return new Error("Invalid " + u + " `" + n + "` of type " + ("`" + a + "` supplied to `" + r + "`, expected an object."))
                    }
                    for (var s in i)
                        if (i.hasOwnProperty(s)) {
                            var l = e(i, s, r, o);
                            if (l instanceof Error) return l
                        }
                    return null
                }
                return r(t)
            }

            function p(e) {
                function t(t, n, r, o) {
                    for (var i = 0; i < e.length; i++) {
                        var a = e[i];
                        if (null == a(t, n, r, o)) return null
                    }
                    var u = C[o];
                    return new Error("Invalid " + u + " `" + n + "` supplied to " + ("`" + r + "`."))
                }
                return r(t)
            }

            function d() {
                function e(e, t, n, r) {
                    if (!h(e[t])) {
                        var o = C[r];
                        return new Error("Invalid " + o + " `" + t + "` supplied to " + ("`" + n + "`, expected a ReactNode."))
                    }
                    return null
                }
                return r(e)
            }

            function f(e) {
                function t(t, n, r, o) {
                    var i = t[n],
                        a = m(i);
                    if ("object" !== a) {
                        var u = C[o];
                        return new Error("Invalid " + u + " `" + n + "` of type `" + a + "` " + ("supplied to `" + r + "`, expected `object`."))
                    }
                    for (var s in e) {
                        var l = e[s];
                        if (l) {
                            var c = l(i, s, r, o);
                            if (c) return c
                        }
                    }
                    return null
                }
                return r(t)
            }

            function h(e) {
                switch (typeof e) {
                    case "number":
                    case "string":
                    case "undefined":
                        return !0;
                    case "boolean":
                        return !e;
                    case "object":
                        if (Array.isArray(e)) return e.every(h);
                        if (null === e || g.isValidElement(e)) return !0;
                        e = y.extractIfFragment(e);
                        for (var t in e)
                            if (!h(e[t])) return !1;
                        return !0;
                    default:
                        return !1
                }
            }

            function m(e) {
                var t = typeof e;
                return Array.isArray(e) ? "array" : e instanceof RegExp ? "object" : t
            }

            function v(e) {
                var t = m(e);
                if ("object" === t) {
                    if (e instanceof Date) return "date";
                    if (e instanceof RegExp) return "regexp"
                }
                return t
            }
            var g = e(55),
                y = e(61),
                C = e(74),
                E = e(112),
                b = "<<anonymous>>",
                _ = u(),
                x = d(),
                D = {
                    array: o("array"),
                    bool: o("boolean"),
                    func: o("function"),
                    number: o("number"),
                    object: o("object"),
                    string: o("string"),
                    any: i(),
                    arrayOf: a,
                    element: _,
                    instanceOf: s,
                    node: x,
                    objectOf: c,
                    oneOf: l,
                    oneOfType: p,
                    shape: f
                };
            t.exports = D
        }, {
            112: 112,
            55: 55,
            61: 61,
            74: 74
        }],
        77: [function(e, t, n) {
            "use strict";

            function r() {
                this.listenersToPut = []
            }
            var o = e(28),
                i = e(30),
                a = e(27);
            a(r.prototype, {
                enqueuePutListener: function(e, t, n) {
                    this.listenersToPut.push({
                        rootNodeID: e,
                        propKey: t,
                        propValue: n
                    })
                },
                putListeners: function() {
                    for (var e = 0; e < this.listenersToPut.length; e++) {
                        var t = this.listenersToPut[e];
                        i.putListener(t.rootNodeID, t.propKey, t.propValue)
                    }
                },
                reset: function() {
                    this.listenersToPut.length = 0
                },
                destructor: function() {
                    this.reset()
                }
            }), o.addPoolingTo(r), t.exports = r
        }, {
            27: 27,
            28: 28,
            30: 30
        }],
        78: [function(e, t, n) {
            "use strict";

            function r() {
                this.reinitializeTransaction(), this.renderToStaticMarkup = !1, this.reactMountReady = o.getPooled(null), this.putListenerQueue = s.getPooled()
            }
            var o = e(6),
                i = e(28),
                a = e(30),
                u = e(63),
                s = e(77),
                l = e(101),
                c = e(27),
                p = {
                    initialize: u.getSelectionInformation,
                    close: u.restoreSelection
                },
                d = {
                    initialize: function() {
                        var e = a.isEnabled();
                        return a.setEnabled(!1), e
                    },
                    close: function(e) {
                        a.setEnabled(e)
                    }
                },
                f = {
                    initialize: function() {
                        this.reactMountReady.reset()
                    },
                    close: function() {
                        this.reactMountReady.notifyAll()
                    }
                },
                h = {
                    initialize: function() {
                        this.putListenerQueue.reset()
                    },
                    close: function() {
                        this.putListenerQueue.putListeners()
                    }
                },
                m = [h, p, d, f],
                v = {
                    getTransactionWrappers: function() {
                        return m
                    },
                    getReactMountReady: function() {
                        return this.reactMountReady
                    },
                    getPutListenerQueue: function() {
                        return this.putListenerQueue
                    },
                    destructor: function() {
                        o.release(this.reactMountReady), this.reactMountReady = null, s.release(this.putListenerQueue), this.putListenerQueue = null
                    }
                };
            c(r.prototype, l.Mixin, v), i.addPoolingTo(r), t.exports = r
        }, {
            101: 101,
            27: 27,
            28: 28,
            30: 30,
            6: 6,
            63: 63,
            77: 77
        }],
        79: [function(e, t, n) {
            "use strict";

            function r() {
                o.attachRefs(this, this._currentElement)
            }
            var o = e(80),
                i = (e(56), {
                    mountComponent: function(e, t, n, o) {
                        var i = e.mountComponent(t, n, o);
                        return n.getReactMountReady().enqueue(r, e), i
                    },
                    unmountComponent: function(e) {
                        o.detachRefs(e, e._currentElement), e.unmountComponent()
                    },
                    receiveComponent: function(e, t, n, i) {
                        var a = e._currentElement;
                        if (t !== a || null == t._owner) {
                            var u = o.shouldUpdateRefs(a, t);
                            u && o.detachRefs(e, a), e.receiveComponent(t, n, i), u && n.getReactMountReady().enqueue(r, e)
                        }
                    },
                    performUpdateIfNecessary: function(e, t) {
                        e.performUpdateIfNecessary(t)
                    }
                });
            t.exports = i
        }, {
            56: 56,
            80: 80
        }],
        80: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                "function" == typeof e ? e(t.getPublicInstance()) : i.addComponentAsRefTo(t, e, n)
            }

            function o(e, t, n) {
                "function" == typeof e ? e(null) : i.removeComponentAsRefFrom(t, e, n)
            }
            var i = e(72),
                a = {};
            a.attachRefs = function(e, t) {
                var n = t.ref;
                null != n && r(n, e, t._owner)
            }, a.shouldUpdateRefs = function(e, t) {
                return t._owner !== e._owner || t.ref !== e.ref
            }, a.detachRefs = function(e, t) {
                var n = t.ref;
                null != n && o(n, e, t._owner)
            }, t.exports = a
        }, {
            72: 72
        }],
        81: [function(e, t, n) {
            "use strict";
            var r = {
                    injectCreateReactRootIndex: function(e) {
                        o.createReactRootIndex = e
                    }
                },
                o = {
                    createReactRootIndex: null,
                    injection: r
                };
            t.exports = o
        }, {}],
        82: [function(e, t, n) {
            "use strict";

            function r(e) {
                p(i.isValidElement(e));
                var t;
                try {
                    var n = a.createReactRootID();
                    return t = s.getPooled(!1), t.perform(function() {
                        var r = c(e, null),
                            o = r.mountComponent(n, t, l);
                        return u.addChecksumToMarkup(o)
                    }, null)
                } finally {
                    s.release(t)
                }
            }

            function o(e) {
                p(i.isValidElement(e));
                var t;
                try {
                    var n = a.createReactRootID();
                    return t = s.getPooled(!0), t.perform(function() {
                        var r = c(e, null);
                        return r.mountComponent(n, t, l)
                    }, null)
                } finally {
                    s.release(t)
                }
            }
            var i = e(55),
                a = e(64),
                u = e(67),
                s = e(83),
                l = e(113),
                c = e(132),
                p = e(133);
            t.exports = {
                renderToString: r,
                renderToStaticMarkup: o
            }
        }, {
            113: 113,
            132: 132,
            133: 133,
            55: 55,
            64: 64,
            67: 67,
            83: 83
        }],
        83: [function(e, t, n) {
            "use strict";

            function r(e) {
                this.reinitializeTransaction(), this.renderToStaticMarkup = e, this.reactMountReady = i.getPooled(null), this.putListenerQueue = a.getPooled()
            }
            var o = e(28),
                i = e(6),
                a = e(77),
                u = e(101),
                s = e(27),
                l = e(112),
                c = {
                    initialize: function() {
                        this.reactMountReady.reset()
                    },
                    close: l
                },
                p = {
                    initialize: function() {
                        this.putListenerQueue.reset()
                    },
                    close: l
                },
                d = [p, c],
                f = {
                    getTransactionWrappers: function() {
                        return d
                    },
                    getReactMountReady: function() {
                        return this.reactMountReady
                    },
                    getPutListenerQueue: function() {
                        return this.putListenerQueue
                    },
                    destructor: function() {
                        i.release(this.reactMountReady), this.reactMountReady = null, a.release(this.putListenerQueue), this.putListenerQueue = null
                    }
                };
            s(r.prototype, u.Mixin, f), o.addPoolingTo(r), t.exports = r
        }, {
            101: 101,
            112: 112,
            27: 27,
            28: 28,
            6: 6,
            77: 77
        }],
        84: [function(e, t, n) {
            "use strict";

            function r(e) {
                e !== i.currentlyMountingInstance && l.enqueueUpdate(e)
            }

            function o(e, t) {
                p(null == a.current);
                var n = s.get(e);
                return n ? n === i.currentlyUnmountingInstance ? null : n : null
            }
            var i = e(66),
                a = e(39),
                u = e(55),
                s = e(65),
                l = e(85),
                c = e(27),
                p = e(133),
                d = (e(150), {
                    enqueueCallback: function(e, t) {
                        p("function" == typeof t);
                        var n = o(e);
                        return n && n !== i.currentlyMountingInstance ? (n._pendingCallbacks ? n._pendingCallbacks.push(t) : n._pendingCallbacks = [t], void r(n)) : null
                    },
                    enqueueCallbackInternal: function(e, t) {
                        p("function" == typeof t), e._pendingCallbacks ? e._pendingCallbacks.push(t) : e._pendingCallbacks = [t], r(e)
                    },
                    enqueueForceUpdate: function(e) {
                        var t = o(e, "forceUpdate");
                        t && (t._pendingForceUpdate = !0, r(t))
                    },
                    enqueueReplaceState: function(e, t) {
                        var n = o(e, "replaceState");
                        n && (n._pendingStateQueue = [t], n._pendingReplaceState = !0, r(n))
                    },
                    enqueueSetState: function(e, t) {
                        var n = o(e, "setState");
                        if (n) {
                            var i = n._pendingStateQueue || (n._pendingStateQueue = []);
                            i.push(t), r(n)
                        }
                    },
                    enqueueSetProps: function(e, t) {
                        var n = o(e, "setProps");
                        if (n) {
                            p(n._isTopLevel);
                            var i = n._pendingElement || n._currentElement,
                                a = c({}, i.props, t);
                            n._pendingElement = u.cloneAndReplaceProps(i, a), r(n)
                        }
                    },
                    enqueueReplaceProps: function(e, t) {
                        var n = o(e, "replaceProps");
                        if (n) {
                            p(n._isTopLevel);
                            var i = n._pendingElement || n._currentElement;
                            n._pendingElement = u.cloneAndReplaceProps(i, t), r(n)
                        }
                    },
                    enqueueElementInternal: function(e, t) {
                        e._pendingElement = t, r(e)
                    }
                });
            t.exports = d
        }, {
            133: 133,
            150: 150,
            27: 27,
            39: 39,
            55: 55,
            65: 65,
            66: 66,
            85: 85
        }],
        85: [function(e, t, n) {
            "use strict";

            function r() {
                v(N.ReactReconcileTransaction && E)
            }

            function o() {
                this.reinitializeTransaction(), this.dirtyComponentsLength = null, this.callbackQueue = c.getPooled(), this.reconcileTransaction = N.ReactReconcileTransaction.getPooled()
            }

            function i(e, t, n, o, i) {
                r(), E.batchedUpdates(e, t, n, o, i)
            }

            function a(e, t) {
                return e._mountOrder - t._mountOrder
            }

            function u(e) {
                var t = e.dirtyComponentsLength;
                v(t === g.length), g.sort(a);
                for (var n = 0; t > n; n++) {
                    var r = g[n],
                        o = r._pendingCallbacks;
                    if (r._pendingCallbacks = null, f.performUpdateIfNecessary(r, e.reconcileTransaction), o)
                        for (var i = 0; i < o.length; i++) e.callbackQueue.enqueue(o[i], r.getPublicInstance())
                }
            }

            function s(e) {
                return r(), E.isBatchingUpdates ? void g.push(e) : void E.batchedUpdates(s, e)
            }

            function l(e, t) {
                v(E.isBatchingUpdates), y.enqueue(e, t), C = !0
            }
            var c = e(6),
                p = e(28),
                d = (e(39), e(73)),
                f = e(79),
                h = e(101),
                m = e(27),
                v = e(133),
                g = (e(150), []),
                y = c.getPooled(),
                C = !1,
                E = null,
                b = {
                    initialize: function() {
                        this.dirtyComponentsLength = g.length
                    },
                    close: function() {
                        this.dirtyComponentsLength !== g.length ? (g.splice(0, this.dirtyComponentsLength), D()) : g.length = 0
                    }
                },
                _ = {
                    initialize: function() {
                        this.callbackQueue.reset()
                    },
                    close: function() {
                        this.callbackQueue.notifyAll()
                    }
                },
                x = [b, _];
            m(o.prototype, h.Mixin, {
                getTransactionWrappers: function() {
                    return x
                },
                destructor: function() {
                    this.dirtyComponentsLength = null, c.release(this.callbackQueue), this.callbackQueue = null, N.ReactReconcileTransaction.release(this.reconcileTransaction), this.reconcileTransaction = null
                },
                perform: function(e, t, n) {
                    return h.Mixin.perform.call(this, this.reconcileTransaction.perform, this.reconcileTransaction, e, t, n)
                }
            }), p.addPoolingTo(o);
            var D = function() {
                for (; g.length || C;) {
                    if (g.length) {
                        var e = o.getPooled();
                        e.perform(u, null, e), o.release(e)
                    }
                    if (C) {
                        C = !1;
                        var t = y;
                        y = c.getPooled(), t.notifyAll(), c.release(t)
                    }
                }
            };
            D = d.measure("ReactUpdates", "flushBatchedUpdates", D);
            var M = {
                    injectReconcileTransaction: function(e) {
                        v(e), N.ReactReconcileTransaction = e
                    },
                    injectBatchingStrategy: function(e) {
                        v(e), v("function" == typeof e.batchedUpdates), v("boolean" == typeof e.isBatchingUpdates), E = e
                    }
                },
                N = {
                    ReactReconcileTransaction: null,
                    batchedUpdates: i,
                    enqueueUpdate: s,
                    flushBatchedUpdates: D,
                    injection: M,
                    asap: l
                };
            t.exports = N
        }, {
            101: 101,
            133: 133,
            150: 150,
            27: 27,
            28: 28,
            39: 39,
            6: 6,
            73: 73,
            79: 79
        }],
        86: [function(e, t, n) {
            "use strict";
            var r = e(10),
                o = r.injection.MUST_USE_ATTRIBUTE,
                i = {
                    Properties: {
                        clipPath: o,
                        cx: o,
                        cy: o,
                        d: o,
                        dx: o,
                        dy: o,
                        fill: o,
                        fillOpacity: o,
                        fontFamily: o,
                        fontSize: o,
                        fx: o,
                        fy: o,
                        gradientTransform: o,
                        gradientUnits: o,
                        markerEnd: o,
                        markerMid: o,
                        markerStart: o,
                        offset: o,
                        opacity: o,
                        patternContentUnits: o,
                        patternUnits: o,
                        points: o,
                        preserveAspectRatio: o,
                        r: o,
                        rx: o,
                        ry: o,
                        spreadMethod: o,
                        stopColor: o,
                        stopOpacity: o,
                        stroke: o,
                        strokeDasharray: o,
                        strokeLinecap: o,
                        strokeOpacity: o,
                        strokeWidth: o,
                        textAnchor: o,
                        transform: o,
                        version: o,
                        viewBox: o,
                        x1: o,
                        x2: o,
                        x: o,
                        y1: o,
                        y2: o,
                        y: o
                    },
                    DOMAttributeNames: {
                        clipPath: "clip-path",
                        fillOpacity: "fill-opacity",
                        fontFamily: "font-family",
                        fontSize: "font-size",
                        gradientTransform: "gradientTransform",
                        gradientUnits: "gradientUnits",
                        markerEnd: "marker-end",
                        markerMid: "marker-mid",
                        markerStart: "marker-start",
                        patternContentUnits: "patternContentUnits",
                        patternUnits: "patternUnits",
                        preserveAspectRatio: "preserveAspectRatio",
                        spreadMethod: "spreadMethod",
                        stopColor: "stop-color",
                        stopOpacity: "stop-opacity",
                        strokeDasharray: "stroke-dasharray",
                        strokeLinecap: "stroke-linecap",
                        strokeOpacity: "stroke-opacity",
                        strokeWidth: "stroke-width",
                        textAnchor: "text-anchor",
                        viewBox: "viewBox"
                    }
                };
            t.exports = i
        }, {
            10: 10
        }],
        87: [function(e, t, n) {
            "use strict";

            function r(e) {
                if ("selectionStart" in e && u.hasSelectionCapabilities(e)) return {
                    start: e.selectionStart,
                    end: e.selectionEnd
                };
                if (window.getSelection) {
                    var t = window.getSelection();
                    return {
                        anchorNode: t.anchorNode,
                        anchorOffset: t.anchorOffset,
                        focusNode: t.focusNode,
                        focusOffset: t.focusOffset
                    }
                }
                if (document.selection) {
                    var n = document.selection.createRange();
                    return {
                        parentElement: n.parentElement(),
                        text: n.text,
                        top: n.boundingTop,
                        left: n.boundingLeft
                    }
                }
            }

            function o(e) {
                if (y || null == m || m !== l()) return null;
                var t = r(m);
                if (!g || !d(g, t)) {
                    g = t;
                    var n = s.getPooled(h.select, v, e);
                    return n.type = "select", n.target = m, a.accumulateTwoPhaseDispatches(n), n
                }
            }
            var i = e(15),
                a = e(20),
                u = e(63),
                s = e(93),
                l = e(119),
                c = e(136),
                p = e(139),
                d = e(146),
                f = i.topLevelTypes,
                h = {
                    select: {
                        phasedRegistrationNames: {
                            bubbled: p({
                                onSelect: null
                            }),
                            captured: p({
                                onSelectCapture: null
                            })
                        },
                        dependencies: [f.topBlur, f.topContextMenu, f.topFocus, f.topKeyDown, f.topMouseDown, f.topMouseUp, f.topSelectionChange]
                    }
                },
                m = null,
                v = null,
                g = null,
                y = !1,
                C = {
                    eventTypes: h,
                    extractEvents: function(e, t, n, r) {
                        switch (e) {
                            case f.topFocus:
                                (c(t) || "true" === t.contentEditable) && (m = t, v = n, g = null);
                                break;
                            case f.topBlur:
                                m = null, v = null, g = null;
                                break;
                            case f.topMouseDown:
                                y = !0;
                                break;
                            case f.topContextMenu:
                            case f.topMouseUp:
                                return y = !1, o(r);
                            case f.topSelectionChange:
                            case f.topKeyDown:
                            case f.topKeyUp:
                                return o(r)
                        }
                    }
                };
            t.exports = C
        }, {
            119: 119,
            136: 136,
            139: 139,
            146: 146,
            15: 15,
            20: 20,
            63: 63,
            93: 93
        }],
        88: [function(e, t, n) {
            "use strict";
            var r = Math.pow(2, 53),
                o = {
                    createReactRootIndex: function() {
                        return Math.ceil(Math.random() * r)
                    }
                };
            t.exports = o
        }, {}],
        89: [function(e, t, n) {
            "use strict";
            var r = e(15),
                o = e(19),
                i = e(20),
                a = e(90),
                u = e(93),
                s = e(94),
                l = e(96),
                c = e(97),
                p = e(92),
                d = e(98),
                f = e(99),
                h = e(100),
                m = e(120),
                v = e(133),
                g = e(139),
                y = (e(150), r.topLevelTypes),
                C = {
                    blur: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onBlur: !0
                            }),
                            captured: g({
                                onBlurCapture: !0
                            })
                        }
                    },
                    click: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onClick: !0
                            }),
                            captured: g({
                                onClickCapture: !0
                            })
                        }
                    },
                    contextMenu: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onContextMenu: !0
                            }),
                            captured: g({
                                onContextMenuCapture: !0
                            })
                        }
                    },
                    copy: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onCopy: !0
                            }),
                            captured: g({
                                onCopyCapture: !0
                            })
                        }
                    },
                    cut: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onCut: !0
                            }),
                            captured: g({
                                onCutCapture: !0
                            })
                        }
                    },
                    doubleClick: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onDoubleClick: !0
                            }),
                            captured: g({
                                onDoubleClickCapture: !0
                            })
                        }
                    },
                    drag: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onDrag: !0
                            }),
                            captured: g({
                                onDragCapture: !0
                            })
                        }
                    },
                    dragEnd: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onDragEnd: !0
                            }),
                            captured: g({
                                onDragEndCapture: !0
                            })
                        }
                    },
                    dragEnter: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onDragEnter: !0
                            }),
                            captured: g({
                                onDragEnterCapture: !0
                            })
                        }
                    },
                    dragExit: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onDragExit: !0
                            }),
                            captured: g({
                                onDragExitCapture: !0
                            })
                        }
                    },
                    dragLeave: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onDragLeave: !0
                            }),
                            captured: g({
                                onDragLeaveCapture: !0
                            })
                        }
                    },
                    dragOver: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onDragOver: !0
                            }),
                            captured: g({
                                onDragOverCapture: !0
                            })
                        }
                    },
                    dragStart: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onDragStart: !0
                            }),
                            captured: g({
                                onDragStartCapture: !0
                            })
                        }
                    },
                    drop: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onDrop: !0
                            }),
                            captured: g({
                                onDropCapture: !0
                            })
                        }
                    },
                    focus: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onFocus: !0
                            }),
                            captured: g({
                                onFocusCapture: !0
                            })
                        }
                    },
                    input: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onInput: !0
                            }),
                            captured: g({
                                onInputCapture: !0
                            })
                        }
                    },
                    keyDown: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onKeyDown: !0
                            }),
                            captured: g({
                                onKeyDownCapture: !0
                            })
                        }
                    },
                    keyPress: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onKeyPress: !0
                            }),
                            captured: g({
                                onKeyPressCapture: !0
                            })
                        }
                    },
                    keyUp: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onKeyUp: !0
                            }),
                            captured: g({
                                onKeyUpCapture: !0
                            })
                        }
                    },
                    load: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onLoad: !0
                            }),
                            captured: g({
                                onLoadCapture: !0
                            })
                        }
                    },
                    error: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onError: !0
                            }),
                            captured: g({
                                onErrorCapture: !0
                            })
                        }
                    },
                    mouseDown: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onMouseDown: !0
                            }),
                            captured: g({
                                onMouseDownCapture: !0
                            })
                        }
                    },
                    mouseMove: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onMouseMove: !0
                            }),
                            captured: g({
                                onMouseMoveCapture: !0
                            })
                        }
                    },
                    mouseOut: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onMouseOut: !0
                            }),
                            captured: g({
                                onMouseOutCapture: !0
                            })
                        }
                    },
                    mouseOver: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onMouseOver: !0
                            }),
                            captured: g({
                                onMouseOverCapture: !0
                            })
                        }
                    },
                    mouseUp: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onMouseUp: !0
                            }),
                            captured: g({
                                onMouseUpCapture: !0
                            })
                        }
                    },
                    paste: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onPaste: !0
                            }),
                            captured: g({
                                onPasteCapture: !0
                            })
                        }
                    },
                    reset: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onReset: !0
                            }),
                            captured: g({
                                onResetCapture: !0
                            })
                        }
                    },
                    scroll: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onScroll: !0
                            }),
                            captured: g({
                                onScrollCapture: !0
                            })
                        }
                    },
                    submit: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onSubmit: !0
                            }),
                            captured: g({
                                onSubmitCapture: !0
                            })
                        }
                    },
                    touchCancel: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onTouchCancel: !0
                            }),
                            captured: g({
                                onTouchCancelCapture: !0
                            })
                        }
                    },
                    touchEnd: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onTouchEnd: !0
                            }),
                            captured: g({
                                onTouchEndCapture: !0
                            })
                        }
                    },
                    touchMove: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onTouchMove: !0
                            }),
                            captured: g({
                                onTouchMoveCapture: !0
                            })
                        }
                    },
                    touchStart: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onTouchStart: !0
                            }),
                            captured: g({
                                onTouchStartCapture: !0
                            })
                        }
                    },
                    wheel: {
                        phasedRegistrationNames: {
                            bubbled: g({
                                onWheel: !0
                            }),
                            captured: g({
                                onWheelCapture: !0
                            })
                        }
                    }
                },
                E = {
                    topBlur: C.blur,
                    topClick: C.click,
                    topContextMenu: C.contextMenu,
                    topCopy: C.copy,
                    topCut: C.cut,
                    topDoubleClick: C.doubleClick,
                    topDrag: C.drag,
                    topDragEnd: C.dragEnd,
                    topDragEnter: C.dragEnter,
                    topDragExit: C.dragExit,
                    topDragLeave: C.dragLeave,
                    topDragOver: C.dragOver,
                    topDragStart: C.dragStart,
                    topDrop: C.drop,
                    topError: C.error,
                    topFocus: C.focus,
                    topInput: C.input,
                    topKeyDown: C.keyDown,
                    topKeyPress: C.keyPress,
                    topKeyUp: C.keyUp,
                    topLoad: C.load,
                    topMouseDown: C.mouseDown,
                    topMouseMove: C.mouseMove,
                    topMouseOut: C.mouseOut,
                    topMouseOver: C.mouseOver,
                    topMouseUp: C.mouseUp,
                    topPaste: C.paste,
                    topReset: C.reset,
                    topScroll: C.scroll,
                    topSubmit: C.submit,
                    topTouchCancel: C.touchCancel,
                    topTouchEnd: C.touchEnd,
                    topTouchMove: C.touchMove,
                    topTouchStart: C.touchStart,
                    topWheel: C.wheel
                };
            for (var b in E) E[b].dependencies = [b];
            var _ = {
                eventTypes: C,
                executeDispatch: function(e, t, n) {
                    var r = o.executeDispatch(e, t, n);
                    r === !1 && (e.stopPropagation(), e.preventDefault())
                },
                extractEvents: function(e, t, n, r) {
                    var o = E[e];
                    if (!o) return null;
                    var g;
                    switch (e) {
                        case y.topInput:
                        case y.topLoad:
                        case y.topError:
                        case y.topReset:
                        case y.topSubmit:
                            g = u;
                            break;
                        case y.topKeyPress:
                            if (0 === m(r)) return null;
                        case y.topKeyDown:
                        case y.topKeyUp:
                            g = l;
                            break;
                        case y.topBlur:
                        case y.topFocus:
                            g = s;
                            break;
                        case y.topClick:
                            if (2 === r.button) return null;
                        case y.topContextMenu:
                        case y.topDoubleClick:
                        case y.topMouseDown:
                        case y.topMouseMove:
                        case y.topMouseOut:
                        case y.topMouseOver:
                        case y.topMouseUp:
                            g = c;
                            break;
                        case y.topDrag:
                        case y.topDragEnd:
                        case y.topDragEnter:
                        case y.topDragExit:
                        case y.topDragLeave:
                        case y.topDragOver:
                        case y.topDragStart:
                        case y.topDrop:
                            g = p;
                            break;
                        case y.topTouchCancel:
                        case y.topTouchEnd:
                        case y.topTouchMove:
                        case y.topTouchStart:
                            g = d;
                            break;
                        case y.topScroll:
                            g = f;
                            break;
                        case y.topWheel:
                            g = h;
                            break;
                        case y.topCopy:
                        case y.topCut:
                        case y.topPaste:
                            g = a
                    }
                    v(g);
                    var C = g.getPooled(o, n, r);
                    return i.accumulateTwoPhaseDispatches(C), C
                }
            };
            t.exports = _
        }, {
            100: 100,
            120: 120,
            133: 133,
            139: 139,
            15: 15,
            150: 150,
            19: 19,
            20: 20,
            90: 90,
            92: 92,
            93: 93,
            94: 94,
            96: 96,
            97: 97,
            98: 98,
            99: 99
        }],
        90: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                o.call(this, e, t, n)
            }
            var o = e(93),
                i = {
                    clipboardData: function(e) {
                        return "clipboardData" in e ? e.clipboardData : window.clipboardData
                    }
                };
            o.augmentClass(r, i), t.exports = r
        }, {
            93: 93
        }],
        91: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                o.call(this, e, t, n)
            }
            var o = e(93),
                i = {
                    data: null
                };
            o.augmentClass(r, i), t.exports = r
        }, {
            93: 93
        }],
        92: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                o.call(this, e, t, n)
            }
            var o = e(97),
                i = {
                    dataTransfer: null
                };
            o.augmentClass(r, i), t.exports = r
        }, {
            97: 97
        }],
        93: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                this.dispatchConfig = e, this.dispatchMarker = t, this.nativeEvent = n;
                var r = this.constructor.Interface;
                for (var o in r)
                    if (r.hasOwnProperty(o)) {
                        var i = r[o];
                        i ? this[o] = i(n) : this[o] = n[o]
                    }
                var u = null != n.defaultPrevented ? n.defaultPrevented : n.returnValue === !1;
                u ? this.isDefaultPrevented = a.thatReturnsTrue : this.isDefaultPrevented = a.thatReturnsFalse, this.isPropagationStopped = a.thatReturnsFalse
            }
            var o = e(28),
                i = e(27),
                a = e(112),
                u = e(123),
                s = {
                    type: null,
                    target: u,
                    currentTarget: a.thatReturnsNull,
                    eventPhase: null,
                    bubbles: null,
                    cancelable: null,
                    timeStamp: function(e) {
                        return e.timeStamp || Date.now()
                    },
                    defaultPrevented: null,
                    isTrusted: null
                };
            i(r.prototype, {
                preventDefault: function() {
                    this.defaultPrevented = !0;
                    var e = this.nativeEvent;
                    e.preventDefault ? e.preventDefault() : e.returnValue = !1, this.isDefaultPrevented = a.thatReturnsTrue
                },
                stopPropagation: function() {
                    var e = this.nativeEvent;
                    e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0, this.isPropagationStopped = a.thatReturnsTrue
                },
                persist: function() {
                    this.isPersistent = a.thatReturnsTrue
                },
                isPersistent: a.thatReturnsFalse,
                destructor: function() {
                    var e = this.constructor.Interface;
                    for (var t in e) this[t] = null;
                    this.dispatchConfig = null, this.dispatchMarker = null, this.nativeEvent = null
                }
            }), r.Interface = s, r.augmentClass = function(e, t) {
                var n = this,
                    r = Object.create(n.prototype);
                i(r, e.prototype), e.prototype = r, e.prototype.constructor = e, e.Interface = i({}, n.Interface, t), e.augmentClass = n.augmentClass, o.addPoolingTo(e, o.threeArgumentPooler)
            }, o.addPoolingTo(r, o.threeArgumentPooler), t.exports = r
        }, {
            112: 112,
            123: 123,
            27: 27,
            28: 28
        }],
        94: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                o.call(this, e, t, n)
            }
            var o = e(99),
                i = {
                    relatedTarget: null
                };
            o.augmentClass(r, i), t.exports = r
        }, {
            99: 99
        }],
        95: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                o.call(this, e, t, n)
            }
            var o = e(93),
                i = {
                    data: null
                };
            o.augmentClass(r, i), t.exports = r
        }, {
            93: 93
        }],
        96: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                o.call(this, e, t, n)
            }
            var o = e(99),
                i = e(120),
                a = e(121),
                u = e(122),
                s = {
                    key: a,
                    location: null,
                    ctrlKey: null,
                    shiftKey: null,
                    altKey: null,
                    metaKey: null,
                    repeat: null,
                    locale: null,
                    getModifierState: u,
                    charCode: function(e) {
                        return "keypress" === e.type ? i(e) : 0
                    },
                    keyCode: function(e) {
                        return "keydown" === e.type || "keyup" === e.type ? e.keyCode : 0
                    },
                    which: function(e) {
                        return "keypress" === e.type ? i(e) : "keydown" === e.type || "keyup" === e.type ? e.keyCode : 0
                    }
                };
            o.augmentClass(r, s), t.exports = r
        }, {
            120: 120,
            121: 121,
            122: 122,
            99: 99
        }],
        97: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                o.call(this, e, t, n)
            }
            var o = e(99),
                i = e(102),
                a = e(122),
                u = {
                    screenX: null,
                    screenY: null,
                    clientX: null,
                    clientY: null,
                    ctrlKey: null,
                    shiftKey: null,
                    altKey: null,
                    metaKey: null,
                    getModifierState: a,
                    button: function(e) {
                        var t = e.button;
                        return "which" in e ? t : 2 === t ? 2 : 4 === t ? 1 : 0
                    },
                    buttons: null,
                    relatedTarget: function(e) {
                        return e.relatedTarget || (e.fromElement === e.srcElement ? e.toElement : e.fromElement)
                    },
                    pageX: function(e) {
                        return "pageX" in e ? e.pageX : e.clientX + i.currentScrollLeft
                    },
                    pageY: function(e) {
                        return "pageY" in e ? e.pageY : e.clientY + i.currentScrollTop
                    }
                };
            o.augmentClass(r, u), t.exports = r
        }, {
            102: 102,
            122: 122,
            99: 99
        }],
        98: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                o.call(this, e, t, n)
            }
            var o = e(99),
                i = e(122),
                a = {
                    touches: null,
                    targetTouches: null,
                    changedTouches: null,
                    altKey: null,
                    metaKey: null,
                    ctrlKey: null,
                    shiftKey: null,
                    getModifierState: i
                };
            o.augmentClass(r, a), t.exports = r
        }, {
            122: 122,
            99: 99
        }],
        99: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                o.call(this, e, t, n)
            }
            var o = e(93),
                i = e(123),
                a = {
                    view: function(e) {
                        if (e.view) return e.view;
                        var t = i(e);
                        if (null != t && t.window === t) return t;
                        var n = t.ownerDocument;
                        return n ? n.defaultView || n.parentWindow : window
                    },
                    detail: function(e) {
                        return e.detail || 0
                    }
                };
            o.augmentClass(r, a), t.exports = r
        }, {
            123: 123,
            93: 93
        }],
        100: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                o.call(this, e, t, n)
            }
            var o = e(97),
                i = {
                    deltaX: function(e) {
                        return "deltaX" in e ? e.deltaX : "wheelDeltaX" in e ? -e.wheelDeltaX : 0
                    },
                    deltaY: function(e) {
                        return "deltaY" in e ? e.deltaY : "wheelDeltaY" in e ? -e.wheelDeltaY : "wheelDelta" in e ? -e.wheelDelta : 0
                    },
                    deltaZ: null,
                    deltaMode: null
                };
            o.augmentClass(r, i), t.exports = r
        }, {
            97: 97
        }],
        101: [function(e, t, n) {
            "use strict";
            var r = e(133),
                o = {
                    reinitializeTransaction: function() {
                        this.transactionWrappers = this.getTransactionWrappers(), this.wrapperInitData ? this.wrapperInitData.length = 0 : this.wrapperInitData = [], this._isInTransaction = !1
                    },
                    _isInTransaction: !1,
                    getTransactionWrappers: null,
                    isInTransaction: function() {
                        return !!this._isInTransaction
                    },
                    perform: function(e, t, n, o, i, a, u, s) {
                        r(!this.isInTransaction());
                        var l, c;
                        try {
                            this._isInTransaction = !0, l = !0, this.initializeAll(0), c = e.call(t, n, o, i, a, u, s), l = !1
                        } finally {
                            try {
                                if (l) try {
                                    this.closeAll(0)
                                } catch (p) {} else this.closeAll(0)
                            } finally {
                                this._isInTransaction = !1
                            }
                        }
                        return c
                    },
                    initializeAll: function(e) {
                        for (var t = this.transactionWrappers, n = e; n < t.length; n++) {
                            var r = t[n];
                            try {
                                this.wrapperInitData[n] = i.OBSERVED_ERROR, this.wrapperInitData[n] = r.initialize ? r.initialize.call(this) : null
                            } finally {
                                if (this.wrapperInitData[n] === i.OBSERVED_ERROR) try {
                                    this.initializeAll(n + 1)
                                } catch (o) {}
                            }
                        }
                    },
                    closeAll: function(e) {
                        r(this.isInTransaction());
                        for (var t = this.transactionWrappers, n = e; n < t.length; n++) {
                            var o, a = t[n],
                                u = this.wrapperInitData[n];
                            try {
                                o = !0, u !== i.OBSERVED_ERROR && a.close && a.close.call(this, u), o = !1
                            } finally {
                                if (o) try {
                                    this.closeAll(n + 1)
                                } catch (s) {}
                            }
                        }
                        this.wrapperInitData.length = 0
                    }
                },
                i = {
                    Mixin: o,
                    OBSERVED_ERROR: {}
                };
            t.exports = i
        }, {
            133: 133
        }],
        102: [function(e, t, n) {
            "use strict";
            var r = {
                currentScrollLeft: 0,
                currentScrollTop: 0,
                refreshScrollValues: function(e) {
                    r.currentScrollLeft = e.x, r.currentScrollTop = e.y
                }
            };
            t.exports = r
        }, {}],
        103: [function(e, t, n) {
            "use strict";

            function r(e, t) {
                if (o(null != t), null == e) return t;
                var n = Array.isArray(e),
                    r = Array.isArray(t);
                return n && r ? (e.push.apply(e, t), e) : n ? (e.push(t), e) : r ? [e].concat(t) : [e, t]
            }
            var o = e(133);
            t.exports = r
        }, {
            133: 133
        }],
        104: [function(e, t, n) {
            "use strict";

            function r(e) {
                for (var t = 1, n = 0, r = 0; r < e.length; r++) t = (t + e.charCodeAt(r)) % o, n = (n + t) % o;
                return t | n << 16
            }
            var o = 65521;
            t.exports = r
        }, {}],
        105: [function(e, t, n) {
            function r(e) {
                return e.replace(o, function(e, t) {
                    return t.toUpperCase()
                })
            }
            var o = /-(.)/g;
            t.exports = r
        }, {}],
        106: [function(e, t, n) {
            "use strict";

            function r(e) {
                return o(e.replace(i, "ms-"))
            }
            var o = e(105),
                i = /^-ms-/;
            t.exports = r
        }, {
            105: 105
        }],
        107: [function(e, t, n) {
            function r(e, t) {
                return e && t ? e === t ? !0 : o(e) ? !1 : o(t) ? r(e, t.parentNode) : e.contains ? e.contains(t) : e.compareDocumentPosition ? !!(16 & e.compareDocumentPosition(t)) : !1 : !1
            }
            var o = e(137);
            t.exports = r
        }, {
            137: 137
        }],
        108: [function(e, t, n) {
            function r(e) {
                return !!e && ("object" == typeof e || "function" == typeof e) && "length" in e && !("setInterval" in e) && "number" != typeof e.nodeType && (Array.isArray(e) || "callee" in e || "item" in e)
            }

            function o(e) {
                return r(e) ? Array.isArray(e) ? e.slice() : i(e) : [e]
            }
            var i = e(148);
            t.exports = o
        }, {
            148: 148
        }],
        109: [function(e, t, n) {
            "use strict";

            function r(e) {
                var t = i.createFactory(e),
                    n = o.createClass({
                        tagName: e.toUpperCase(),
                        displayName: "ReactFullPageComponent" + e,
                        componentWillUnmount: function() {
                            a(!1)
                        },
                        render: function() {
                            return t(this.props)
                        }
                    });
                return n
            }
            var o = e(33),
                i = e(55),
                a = e(133);
            t.exports = r
        }, {
            133: 133,
            33: 33,
            55: 55
        }],
        110: [function(e, t, n) {
            function r(e) {
                var t = e.match(c);
                return t && t[1].toLowerCase()
            }

            function o(e, t) {
                var n = l;
                s(!!l);
                var o = r(e),
                    i = o && u(o);
                if (i) {
                    n.innerHTML = i[1] + e + i[2];
                    for (var c = i[0]; c--;) n = n.lastChild
                } else n.innerHTML = e;
                var p = n.getElementsByTagName("script");
                p.length && (s(t), a(p).forEach(t));
                for (var d = a(n.childNodes); n.lastChild;) n.removeChild(n.lastChild);
                return d
            }
            var i = e(21),
                a = e(108),
                u = e(125),
                s = e(133),
                l = i.canUseDOM ? document.createElement("div") : null,
                c = /^\s*<(\w+)/;
            t.exports = o
        }, {
            108: 108,
            125: 125,
            133: 133,
            21: 21
        }],
        111: [function(e, t, n) {
            "use strict";

            function r(e, t) {
                var n = null == t || "boolean" == typeof t || "" === t;
                if (n) return "";
                var r = isNaN(t);
                return r || 0 === t || i.hasOwnProperty(e) && i[e] ? "" + t : ("string" == typeof t && (t = t.trim()), t + "px")
            }
            var o = e(4),
                i = o.isUnitlessNumber;
            t.exports = r
        }, {
            4: 4
        }],
        112: [function(e, t, n) {
            function r(e) {
                return function() {
                    return e
                }
            }

            function o() {}
            o.thatReturns = r, o.thatReturnsFalse = r(!1), o.thatReturnsTrue = r(!0), o.thatReturnsNull = r(null), o.thatReturnsThis = function() {
                return this
            }, o.thatReturnsArgument = function(e) {
                return e
            }, t.exports = o
        }, {}],
        113: [function(e, t, n) {
            "use strict";
            var r = {};
            t.exports = r
        }, {}],
        114: [function(e, t, n) {
            "use strict";

            function r(e) {
                return i[e]
            }

            function o(e) {
                return ("" + e).replace(a, r)
            }
            var i = {
                    "&": "&amp;",
                    ">": "&gt;",
                    "<": "&lt;",
                    '"': "&quot;",
                    "'": "&#x27;"
                },
                a = /[&><"']/g;
            t.exports = o
        }, {}],
        115: [function(e, t, n) {
            "use strict";

            function r(e) {
                return null == e ? null : u(e) ? e : o.has(e) ? i.getNodeFromInstance(e) : (a(null == e.render || "function" != typeof e.render), void a(!1))
            }
            var o = (e(39), e(65)),
                i = e(68),
                a = e(133),
                u = e(135);
            e(150), t.exports = r
        }, {
            133: 133,
            135: 135,
            150: 150,
            39: 39,
            65: 65,
            68: 68
        }],
        116: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                var r = e,
                    o = !r.hasOwnProperty(n);
                o && null != t && (r[n] = t)
            }

            function o(e) {
                if (null == e) return e;
                var t = {};
                return i(e, r, t), t
            }
            var i = e(149);
            e(150), t.exports = o
        }, {
            149: 149,
            150: 150
        }],
        117: [function(e, t, n) {
            "use strict";

            function r(e) {
                try {
                    e.focus()
                } catch (t) {}
            }
            t.exports = r
        }, {}],
        118: [function(e, t, n) {
            "use strict";
            var r = function(e, t, n) {
                Array.isArray(e) ? e.forEach(t, n) : e && t.call(n, e)
            };
            t.exports = r
        }, {}],
        119: [function(e, t, n) {
            function r() {
                try {
                    return document.activeElement || document.body
                } catch (e) {
                    return document.body
                }
            }
            t.exports = r
        }, {}],
        120: [function(e, t, n) {
            "use strict";

            function r(e) {
                var t, n = e.keyCode;
                return "charCode" in e ? (t = e.charCode, 0 === t && 13 === n && (t = 13)) : t = n, t >= 32 || 13 === t ? t : 0
            }
            t.exports = r
        }, {}],
        121: [function(e, t, n) {
            "use strict";

            function r(e) {
                if (e.key) {
                    var t = i[e.key] || e.key;
                    if ("Unidentified" !== t) return t
                }
                if ("keypress" === e.type) {
                    var n = o(e);
                    return 13 === n ? "Enter" : String.fromCharCode(n)
                }
                return "keydown" === e.type || "keyup" === e.type ? a[e.keyCode] || "Unidentified" : ""
            }
            var o = e(120),
                i = {
                    Esc: "Escape",
                    Spacebar: " ",
                    Left: "ArrowLeft",
                    Up: "ArrowUp",
                    Right: "ArrowRight",
                    Down: "ArrowDown",
                    Del: "Delete",
                    Win: "OS",
                    Menu: "ContextMenu",
                    Apps: "ContextMenu",
                    Scroll: "ScrollLock",
                    MozPrintableKey: "Unidentified"
                },
                a = {
                    8: "Backspace",
                    9: "Tab",
                    12: "Clear",
                    13: "Enter",
                    16: "Shift",
                    17: "Control",
                    18: "Alt",
                    19: "Pause",
                    20: "CapsLock",
                    27: "Escape",
                    32: " ",
                    33: "PageUp",
                    34: "PageDown",
                    35: "End",
                    36: "Home",
                    37: "ArrowLeft",
                    38: "ArrowUp",
                    39: "ArrowRight",
                    40: "ArrowDown",
                    45: "Insert",
                    46: "Delete",
                    112: "F1",
                    113: "F2",
                    114: "F3",
                    115: "F4",
                    116: "F5",
                    117: "F6",
                    118: "F7",
                    119: "F8",
                    120: "F9",
                    121: "F10",
                    122: "F11",
                    123: "F12",
                    144: "NumLock",
                    145: "ScrollLock",
                    224: "Meta"
                };
            t.exports = r
        }, {
            120: 120
        }],
        122: [function(e, t, n) {
            "use strict";

            function r(e) {
                var t = this,
                    n = t.nativeEvent;
                if (n.getModifierState) return n.getModifierState(e);
                var r = i[e];
                return r ? !!n[r] : !1
            }

            function o(e) {
                return r
            }
            var i = {
                Alt: "altKey",
                Control: "ctrlKey",
                Meta: "metaKey",
                Shift: "shiftKey"
            };
            t.exports = o
        }, {}],
        123: [function(e, t, n) {
            "use strict";

            function r(e) {
                var t = e.target || e.srcElement || window;
                return 3 === t.nodeType ? t.parentNode : t
            }
            t.exports = r
        }, {}],
        124: [function(e, t, n) {
            "use strict";

            function r(e) {
                var t = e && (o && e[o] || e[i]);
                return "function" == typeof t ? t : void 0
            }
            var o = "function" == typeof Symbol && Symbol.iterator,
                i = "@@iterator";
            t.exports = r
        }, {}],
        125: [function(e, t, n) {
            function r(e) {
                return i(!!a), d.hasOwnProperty(e) || (e = "*"), u.hasOwnProperty(e) || ("*" === e ? a.innerHTML = "<link />" : a.innerHTML = "<" + e + "></" + e + ">", u[e] = !a.firstChild), u[e] ? d[e] : null
            }
            var o = e(21),
                i = e(133),
                a = o.canUseDOM ? document.createElement("div") : null,
                u = {
                    circle: !0,
                    clipPath: !0,
                    defs: !0,
                    ellipse: !0,
                    g: !0,
                    line: !0,
                    linearGradient: !0,
                    path: !0,
                    polygon: !0,
                    polyline: !0,
                    radialGradient: !0,
                    rect: !0,
                    stop: !0,
                    text: !0
                },
                s = [1, '<select multiple="true">', "</select>"],
                l = [1, "<table>", "</table>"],
                c = [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                p = [1, "<svg>", "</svg>"],
                d = {
                    "*": [1, "?<div>", "</div>"],
                    area: [1, "<map>", "</map>"],
                    col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
                    legend: [1, "<fieldset>", "</fieldset>"],
                    param: [1, "<object>", "</object>"],
                    tr: [2, "<table><tbody>", "</tbody></table>"],
                    optgroup: s,
                    option: s,
                    caption: l,
                    colgroup: l,
                    tbody: l,
                    tfoot: l,
                    thead: l,
                    td: c,
                    th: c,
                    circle: p,
                    clipPath: p,
                    defs: p,
                    ellipse: p,
                    g: p,
                    line: p,
                    linearGradient: p,
                    path: p,
                    polygon: p,
                    polyline: p,
                    radialGradient: p,
                    rect: p,
                    stop: p,
                    text: p
                };
            t.exports = r
        }, {
            133: 133,
            21: 21
        }],
        126: [function(e, t, n) {
            "use strict";

            function r(e) {
                for (; e && e.firstChild;) e = e.firstChild;
                return e
            }

            function o(e) {
                for (; e;) {
                    if (e.nextSibling) return e.nextSibling;
                    e = e.parentNode
                }
            }

            function i(e, t) {
                for (var n = r(e), i = 0, a = 0; n;) {
                    if (3 === n.nodeType) {
                        if (a = i + n.textContent.length, t >= i && a >= t) return {
                            node: n,
                            offset: t - i
                        };
                        i = a
                    }
                    n = r(o(n))
                }
            }
            t.exports = i
        }, {}],
        127: [function(e, t, n) {
            "use strict";

            function r(e) {
                return e ? e.nodeType === o ? e.documentElement : e.firstChild : null
            }
            var o = 9;
            t.exports = r
        }, {}],
        128: [function(e, t, n) {
            "use strict";

            function r() {
                return !i && o.canUseDOM && (i = "textContent" in document.documentElement ? "textContent" : "innerText"), i
            }
            var o = e(21),
                i = null;
            t.exports = r
        }, {
            21: 21
        }],
        129: [function(e, t, n) {
            "use strict";

            function r(e) {
                return e === window ? {
                    x: window.pageXOffset || document.documentElement.scrollLeft,
                    y: window.pageYOffset || document.documentElement.scrollTop
                } : {
                    x: e.scrollLeft,
                    y: e.scrollTop
                }
            }
            t.exports = r
        }, {}],
        130: [function(e, t, n) {
            function r(e) {
                return e.replace(o, "-$1").toLowerCase()
            }
            var o = /([A-Z])/g;
            t.exports = r
        }, {}],
        131: [function(e, t, n) {
            "use strict";

            function r(e) {
                return o(e).replace(i, "-ms-")
            }
            var o = e(130),
                i = /^ms-/;
            t.exports = r
        }, {
            130: 130
        }],
        132: [function(e, t, n) {
            "use strict";

            function r(e) {
                return "function" == typeof e && "undefined" != typeof e.prototype && "function" == typeof e.prototype.mountComponent && "function" == typeof e.prototype.receiveComponent
            }

            function o(e, t) {
                var n;
                if ((null === e || e === !1) && (e = a.emptyElement), "object" == typeof e) {
                    var o = e;
                    n = t === o.type && "string" == typeof o.type ? u.createInternalComponent(o) : r(o.type) ? new o.type(o) : new c
                } else "string" == typeof e || "number" == typeof e ? n = u.createInstanceForText(e) : l(!1);
                return n.construct(e), n._mountIndex = 0, n._mountImage = null, n
            }
            var i = e(37),
                a = e(57),
                u = e(71),
                s = e(27),
                l = e(133),
                c = (e(150), function() {});
            s(c.prototype, i.Mixin, {
                _instantiateReactComponent: o
            }), t.exports = o
        }, {
            133: 133,
            150: 150,
            27: 27,
            37: 37,
            57: 57,
            71: 71
        }],
        133: [function(e, t, n) {
            "use strict";
            var r = function(e, t, n, r, o, i, a, u) {
                if (!e) {
                    var s;
                    if (void 0 === t) s = new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
                    else {
                        var l = [n, r, o, i, a, u],
                            c = 0;
                        s = new Error("Invariant Violation: " + t.replace(/%s/g, function() {
                            return l[c++]
                        }))
                    }
                    throw s.framesToPop = 1, s
                }
            };
            t.exports = r
        }, {}],
        134: [function(e, t, n) {
            "use strict";

            function r(e, t) {
                if (!i.canUseDOM || t && !("addEventListener" in document)) return !1;
                var n = "on" + e,
                    r = n in document;
                if (!r) {
                    var a = document.createElement("div");
                    a.setAttribute(n, "return;"), r = "function" == typeof a[n]
                }
                return !r && o && "wheel" === e && (r = document.implementation.hasFeature("Events.wheel", "3.0")), r
            }
            var o, i = e(21);
            i.canUseDOM && (o = document.implementation && document.implementation.hasFeature && document.implementation.hasFeature("", "") !== !0), t.exports = r
        }, {
            21: 21
        }],
        135: [function(e, t, n) {
            function r(e) {
                return !(!e || !("function" == typeof Node ? e instanceof Node : "object" == typeof e && "number" == typeof e.nodeType && "string" == typeof e.nodeName))
            }
            t.exports = r
        }, {}],
        136: [function(e, t, n) {
            "use strict";

            function r(e) {
                return e && ("INPUT" === e.nodeName && o[e.type] || "TEXTAREA" === e.nodeName)
            }
            var o = {
                color: !0,
                date: !0,
                datetime: !0,
                "datetime-local": !0,
                email: !0,
                month: !0,
                number: !0,
                password: !0,
                range: !0,
                search: !0,
                tel: !0,
                text: !0,
                time: !0,
                url: !0,
                week: !0
            };
            t.exports = r
        }, {}],
        137: [function(e, t, n) {
            function r(e) {
                return o(e) && 3 == e.nodeType
            }
            var o = e(135);
            t.exports = r
        }, {
            135: 135
        }],
        138: [function(e, t, n) {
            "use strict";
            var r = e(133),
                o = function(e) {
                    var t, n = {};
                    r(e instanceof Object && !Array.isArray(e));
                    for (t in e) e.hasOwnProperty(t) && (n[t] = t);
                    return n
                };
            t.exports = o
        }, {
            133: 133
        }],
        139: [function(e, t, n) {
            var r = function(e) {
                var t;
                for (t in e)
                    if (e.hasOwnProperty(t)) return t;
                return null
            };
            t.exports = r
        }, {}],
        140: [function(e, t, n) {
            "use strict";

            function r(e, t, n) {
                if (!e) return null;
                var r = {};
                for (var i in e) o.call(e, i) && (r[i] = t.call(n, e[i], i, e));
                return r
            }
            var o = Object.prototype.hasOwnProperty;
            t.exports = r
        }, {}],
        141: [function(e, t, n) {
            "use strict";

            function r(e) {
                var t = {};
                return function(n) {
                    return t.hasOwnProperty(n) || (t[n] = e.call(this, n)), t[n]
                }
            }
            t.exports = r
        }, {}],
        142: [function(e, t, n) {
            "use strict";

            function r(e) {
                return i(o.isValidElement(e)), e
            }
            var o = e(55),
                i = e(133);
            t.exports = r
        }, {
            133: 133,
            55: 55
        }],
        143: [function(e, t, n) {
            "use strict";

            function r(e) {
                return '"' + o(e) + '"'
            }
            var o = e(114);
            t.exports = r
        }, {
            114: 114
        }],
        144: [function(e, t, n) {
            "use strict";
            var r = e(21),
                o = /^[ \r\n\t\f]/,
                i = /<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,
                a = function(e, t) {
                    e.innerHTML = t
                };
            if ("undefined" != typeof MSApp && MSApp.execUnsafeLocalFunction && (a = function(e, t) {
                    MSApp.execUnsafeLocalFunction(function() {
                        e.innerHTML = t
                    })
                }), r.canUseDOM) {
                var u = document.createElement("div");
                u.innerHTML = " ", "" === u.innerHTML && (a = function(e, t) {
                    if (e.parentNode && e.parentNode.replaceChild(e, e), o.test(t) || "<" === t[0] && i.test(t)) {
                        e.innerHTML = "\ufeff" + t;
                        var n = e.firstChild;
                        1 === n.data.length ? e.removeChild(n) : n.deleteData(0, 1)
                    } else e.innerHTML = t
                })
            }
            t.exports = a
        }, {
            21: 21
        }],
        145: [function(e, t, n) {
            "use strict";
            var r = e(21),
                o = e(114),
                i = e(144),
                a = function(e, t) {
                    e.textContent = t
                };
            r.canUseDOM && ("textContent" in document.documentElement || (a = function(e, t) {
                i(e, o(t))
            })), t.exports = a
        }, {
            114: 114,
            144: 144,
            21: 21
        }],
        146: [function(e, t, n) {
            "use strict";

            function r(e, t) {
                if (e === t) return !0;
                var n;
                for (n in e)
                    if (e.hasOwnProperty(n) && (!t.hasOwnProperty(n) || e[n] !== t[n])) return !1;
                for (n in t)
                    if (t.hasOwnProperty(n) && !e.hasOwnProperty(n)) return !1;
                return !0
            }
            t.exports = r
        }, {}],
        147: [function(e, t, n) {
            "use strict";

            function r(e, t) {
                if (null != e && null != t) {
                    var n = typeof e,
                        r = typeof t;
                    if ("string" === n || "number" === n) return "string" === r || "number" === r;
                    if ("object" === r && e.type === t.type && e.key === t.key) {
                        var o = e._owner === t._owner;
                        return o
                    }
                }
                return !1
            }
            e(150), t.exports = r
        }, {
            150: 150
        }],
        148: [function(e, t, n) {
            function r(e) {
                var t = e.length;
                if (o(!Array.isArray(e) && ("object" == typeof e || "function" == typeof e)), o("number" == typeof t), o(0 === t || t - 1 in e), e.hasOwnProperty) try {
                    return Array.prototype.slice.call(e)
                } catch (n) {}
                for (var r = Array(t), i = 0; t > i; i++) r[i] = e[i];
                return r
            }
            var o = e(133);
            t.exports = r
        }, {
            133: 133
        }],
        149: [function(e, t, n) {
            "use strict";

            function r(e) {
                return v[e]
            }

            function o(e, t) {
                return e && null != e.key ? a(e.key) : t.toString(36)
            }

            function i(e) {
                return ("" + e).replace(g, r)
            }

            function a(e) {
                return "$" + i(e)
            }

            function u(e, t, n, r, i) {
                var s = typeof e;
                if (("undefined" === s || "boolean" === s) && (e = null), null === e || "string" === s || "number" === s || l.isValidElement(e)) return r(i, e, "" === t ? h + o(e, 0) : t, n), 1;
                var p, v, g, y = 0;
                if (Array.isArray(e))
                    for (var C = 0; C < e.length; C++) p = e[C], v = ("" !== t ? t + m : h) + o(p, C), g = n + y, y += u(p, v, g, r, i);
                else {
                    var E = d(e);
                    if (E) {
                        var b, _ = E.call(e);
                        if (E !== e.entries)
                            for (var x = 0; !(b = _.next()).done;) p = b.value, v = ("" !== t ? t + m : h) + o(p, x++), g = n + y, y += u(p, v, g, r, i);
                        else
                            for (; !(b = _.next()).done;) {
                                var D = b.value;
                                D && (p = D[1], v = ("" !== t ? t + m : h) + a(D[0]) + m + o(p, 0), g = n + y, y += u(p, v, g, r, i))
                            }
                    } else if ("object" === s) {
                        f(1 !== e.nodeType);
                        var M = c.extract(e);
                        for (var N in M) M.hasOwnProperty(N) && (p = M[N], v = ("" !== t ? t + m : h) + a(N) + m + o(p, 0), g = n + y, y += u(p, v, g, r, i))
                    }
                }
                return y
            }

            function s(e, t, n) {
                return null == e ? 0 : u(e, "", 0, t, n)
            }
            var l = e(55),
                c = e(61),
                p = e(64),
                d = e(124),
                f = e(133),
                h = (e(150), p.SEPARATOR),
                m = ":",
                v = {
                    "=": "=0",
                    ".": "=1",
                    ":": "=2"
                },
                g = /[=.:]/g;
            t.exports = s
        }, {
            124: 124,
            133: 133,
            150: 150,
            55: 55,
            61: 61,
            64: 64
        }],
        150: [function(e, t, n) {
            "use strict";
            var r = e(112),
                o = r;
            t.exports = o
        }, {
            112: 112
        }]
    }, {}, [1])(1)
});
! function(i, t) {
    "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : "object" == typeof exports ? exports.Flux = t() : i.Flux = t()
}(this, function() {
    return function(i) {
        function t(s) {
            if (n[s]) return n[s].exports;
            var e = n[s] = {
                exports: {},
                id: s,
                loaded: !1
            };
            return i[s].call(e.exports, e, e.exports, t), e.loaded = !0, e.exports
        }
        var n = {};
        return t.m = i, t.c = n, t.p = "", t(0)
    }([function(i, t, n) {
        "use strict";
        i.exports.Dispatcher = n(1)
    }, function(i, t, n) {
        "use strict";

        function s(i, t) {
            if (!(i instanceof t)) throw new TypeError("Cannot call a class as a function")
        }
        var e, o, r;
        t.__esModule = !0, e = n(2), o = "ID_", r = function() {
            function i() {
                s(this, i), this._callbacks = {}, this._isDispatching = !1, this._isHandled = {}, this._isPending = {}, this._lastID = 1
            }
            return i.prototype.register = function(i) {
                var t = o + this._lastID++;
                return this._callbacks[t] = i, t
            }, i.prototype.unregister = function(i) {
                this._callbacks[i] ? void 0 : e(!1), delete this._callbacks[i]
            }, i.prototype.waitFor = function(i) {
                var t, n;
                for (this._isDispatching ? void 0 : e(!1), t = 0; t < i.length; t++) n = i[t], this._isPending[n] ? this._isHandled[n] ? void 0 : e(!1) : (this._callbacks[n] ? void 0 : e(!1), this._invokeCallback(n))
            }, i.prototype.dispatch = function(i) {
                this._isDispatching ? e(!1) : void 0, this._startDispatching(i);
                try {
                    for (var t in this._callbacks) this._isPending[t] || this._invokeCallback(t)
                } finally {
                    this._stopDispatching()
                }
            }, i.prototype.isDispatching = function() {
                return this._isDispatching
            }, i.prototype._invokeCallback = function(i) {
                this._isPending[i] = !0, this._callbacks[i](this._pendingPayload), this._isHandled[i] = !0
            }, i.prototype._startDispatching = function(i) {
                for (var t in this._callbacks) this._isPending[t] = !1, this._isHandled[t] = !1;
                this._pendingPayload = i, this._isDispatching = !0
            }, i.prototype._stopDispatching = function() {
                delete this._pendingPayload, this._isDispatching = !1
            }, i
        }(), i.exports = r
    }, function(i, t, n) {
        "use strict";
        var s = function(i, t, n, s, e, o, r, a) {
            var c, p, l;
            if (!i) throw void 0 === t ? c = new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.") : (p = [n, s, e, o, r, a], l = 0, c = new Error("Invariant Violation: " + t.replace(/%s/g, function() {
                return p[l++]
            }))), c.framesToPop = 1, c
        };
        i.exports = s
    }])
});
(function() {
    var n = this,
        t = n._,
        r = {},
        e = Array.prototype,
        u = Object.prototype,
        i = Function.prototype,
        o = e.push,
        a = e.slice,
        c = e.concat,
        l = u.toString,
        f = u.hasOwnProperty,
        s = e.forEach,
        p = e.map,
        h = e.reduce,
        v = e.reduceRight,
        d = e.filter,
        y = e.every,
        g = e.some,
        m = e.indexOf,
        b = e.lastIndexOf,
        x = Array.isArray,
        w = Object.keys,
        _ = i.bind,
        j = function(n) {
            return n instanceof j ? n : this instanceof j ? void(this._wrapped = n) : new j(n)
        };
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = j), exports._ = j) : n._ = j, j.VERSION = "1.6.0";
    var A = j.each = j.forEach = function(n, t, e) {
        if (null == n) return n;
        if (s && n.forEach === s) n.forEach(t, e);
        else if (n.length === +n.length) {
            for (var u = 0, i = n.length; i > u; u++)
                if (t.call(e, n[u], u, n) === r) return
        } else
            for (var o = j.keys(n), u = 0, i = o.length; i > u; u++)
                if (t.call(e, n[o[u]], o[u], n) === r) return; return n
    };
    j.map = j.collect = function(n, t, r) {
        var e = [];
        return null == n ? e : p && n.map === p ? n.map(t, r) : (A(n, function(n, u, i) {
            e.push(t.call(r, n, u, i))
        }), e)
    };
    var O = "Reduce of empty array with no initial value";
    j.reduce = j.foldl = j.inject = function(n, t, r, e) {
        var u = arguments.length > 2;
        if (null == n && (n = []), h && n.reduce === h) return e && (t = j.bind(t, e)), u ? n.reduce(t, r) : n.reduce(t);
        if (A(n, function(n, i, o) {
                u ? r = t.call(e, r, n, i, o) : (r = n, u = !0)
            }), !u) throw new TypeError(O);
        return r
    }, j.reduceRight = j.foldr = function(n, t, r, e) {
        var u = arguments.length > 2;
        if (null == n && (n = []), v && n.reduceRight === v) return e && (t = j.bind(t, e)), u ? n.reduceRight(t, r) : n.reduceRight(t);
        var i = n.length;
        if (i !== +i) {
            var o = j.keys(n);
            i = o.length
        }
        if (A(n, function(a, c, l) {
                c = o ? o[--i] : --i, u ? r = t.call(e, r, n[c], c, l) : (r = n[c], u = !0)
            }), !u) throw new TypeError(O);
        return r
    }, j.find = j.detect = function(n, t, r) {
        var e;
        return k(n, function(n, u, i) {
            return t.call(r, n, u, i) ? (e = n, !0) : void 0
        }), e
    }, j.filter = j.select = function(n, t, r) {
        var e = [];
        return null == n ? e : d && n.filter === d ? n.filter(t, r) : (A(n, function(n, u, i) {
            t.call(r, n, u, i) && e.push(n)
        }), e)
    }, j.reject = function(n, t, r) {
        return j.filter(n, function(n, e, u) {
            return !t.call(r, n, e, u)
        }, r)
    }, j.every = j.all = function(n, t, e) {
        t || (t = j.identity);
        var u = !0;
        return null == n ? u : y && n.every === y ? n.every(t, e) : (A(n, function(n, i, o) {
            return (u = u && t.call(e, n, i, o)) ? void 0 : r
        }), !!u)
    };
    var k = j.some = j.any = function(n, t, e) {
        t || (t = j.identity);
        var u = !1;
        return null == n ? u : g && n.some === g ? n.some(t, e) : (A(n, function(n, i, o) {
            return u || (u = t.call(e, n, i, o)) ? r : void 0
        }), !!u)
    };
    j.contains = j.include = function(n, t) {
        return null == n ? !1 : m && n.indexOf === m ? -1 != n.indexOf(t) : k(n, function(n) {
            return n === t
        })
    }, j.invoke = function(n, t) {
        var r = a.call(arguments, 2),
            e = j.isFunction(t);
        return j.map(n, function(n) {
            return (e ? t : n[t]).apply(n, r)
        })
    }, j.pluck = function(n, t) {
        return j.map(n, j.property(t))
    }, j.where = function(n, t) {
        return j.filter(n, j.matches(t))
    }, j.findWhere = function(n, t) {
        return j.find(n, j.matches(t))
    }, j.max = function(n, t, r) {
        if (!t && j.isArray(n) && n[0] === +n[0] && n.length < 65535) return Math.max.apply(Math, n);
        var e = -1 / 0,
            u = -1 / 0;
        return A(n, function(n, i, o) {
            var a = t ? t.call(r, n, i, o) : n;
            a > u && (e = n, u = a)
        }), e
    }, j.min = function(n, t, r) {
        if (!t && j.isArray(n) && n[0] === +n[0] && n.length < 65535) return Math.min.apply(Math, n);
        var e = 1 / 0,
            u = 1 / 0;
        return A(n, function(n, i, o) {
            var a = t ? t.call(r, n, i, o) : n;
            u > a && (e = n, u = a)
        }), e
    }, j.shuffle = function(n) {
        var t, r = 0,
            e = [];
        return A(n, function(n) {
            t = j.random(r++), e[r - 1] = e[t], e[t] = n
        }), e
    }, j.sample = function(n, t, r) {
        return null == t || r ? (n.length !== +n.length && (n = j.values(n)), n[j.random(n.length - 1)]) : j.shuffle(n).slice(0, Math.max(0, t))
    };
    var E = function(n) {
        return null == n ? j.identity : j.isFunction(n) ? n : j.property(n)
    };
    j.sortBy = function(n, t, r) {
        return t = E(t), j.pluck(j.map(n, function(n, e, u) {
            return {
                value: n,
                index: e,
                criteria: t.call(r, n, e, u)
            }
        }).sort(function(n, t) {
            var r = n.criteria,
                e = t.criteria;
            if (r !== e) {
                if (r > e || void 0 === r) return 1;
                if (e > r || void 0 === e) return -1
            }
            return n.index - t.index
        }), "value")
    };
    var F = function(n) {
        return function(t, r, e) {
            var u = {};
            return r = E(r), A(t, function(i, o) {
                var a = r.call(e, i, o, t);
                n(u, a, i)
            }), u
        }
    };
    j.groupBy = F(function(n, t, r) {
        j.has(n, t) ? n[t].push(r) : n[t] = [r]
    }), j.indexBy = F(function(n, t, r) {
        n[t] = r
    }), j.countBy = F(function(n, t) {
        j.has(n, t) ? n[t]++ : n[t] = 1
    }), j.sortedIndex = function(n, t, r, e) {
        r = E(r);
        for (var u = r.call(e, t), i = 0, o = n.length; o > i;) {
            var a = i + o >>> 1;
            r.call(e, n[a]) < u ? i = a + 1 : o = a
        }
        return i
    }, j.toArray = function(n) {
        return n ? j.isArray(n) ? a.call(n) : n.length === +n.length ? j.map(n, j.identity) : j.values(n) : []
    }, j.size = function(n) {
        return null == n ? 0 : n.length === +n.length ? n.length : j.keys(n).length
    }, j.first = j.head = j.take = function(n, t, r) {
        return null == n ? void 0 : null == t || r ? n[0] : 0 > t ? [] : a.call(n, 0, t)
    }, j.initial = function(n, t, r) {
        return a.call(n, 0, n.length - (null == t || r ? 1 : t))
    }, j.last = function(n, t, r) {
        return null == n ? void 0 : null == t || r ? n[n.length - 1] : a.call(n, Math.max(n.length - t, 0))
    }, j.rest = j.tail = j.drop = function(n, t, r) {
        return a.call(n, null == t || r ? 1 : t)
    }, j.compact = function(n) {
        return j.filter(n, j.identity)
    };
    var M = function(n, t, r) {
        return t && j.every(n, j.isArray) ? c.apply(r, n) : (A(n, function(n) {
            j.isArray(n) || j.isArguments(n) ? t ? o.apply(r, n) : M(n, t, r) : r.push(n)
        }), r)
    };
    j.flatten = function(n, t) {
        return M(n, t, [])
    }, j.without = function(n) {
        return j.difference(n, a.call(arguments, 1))
    }, j.partition = function(n, t) {
        var r = [],
            e = [];
        return A(n, function(n) {
            (t(n) ? r : e).push(n)
        }), [r, e]
    }, j.uniq = j.unique = function(n, t, r, e) {
        j.isFunction(t) && (e = r, r = t, t = !1);
        var u = r ? j.map(n, r, e) : n,
            i = [],
            o = [];
        return A(u, function(r, e) {
            (t ? e && o[o.length - 1] === r : j.contains(o, r)) || (o.push(r), i.push(n[e]))
        }), i
    }, j.union = function() {
        return j.uniq(j.flatten(arguments, !0))
    }, j.intersection = function(n) {
        var t = a.call(arguments, 1);
        return j.filter(j.uniq(n), function(n) {
            return j.every(t, function(t) {
                return j.contains(t, n)
            })
        })
    }, j.difference = function(n) {
        var t = c.apply(e, a.call(arguments, 1));
        return j.filter(n, function(n) {
            return !j.contains(t, n)
        })
    }, j.zip = function() {
        for (var n = j.max(j.pluck(arguments, "length").concat(0)), t = new Array(n), r = 0; n > r; r++) t[r] = j.pluck(arguments, "" + r);
        return t
    }, j.object = function(n, t) {
        if (null == n) return {};
        for (var r = {}, e = 0, u = n.length; u > e; e++) t ? r[n[e]] = t[e] : r[n[e][0]] = n[e][1];
        return r
    }, j.indexOf = function(n, t, r) {
        if (null == n) return -1;
        var e = 0,
            u = n.length;
        if (r) {
            if ("number" != typeof r) return e = j.sortedIndex(n, t), n[e] === t ? e : -1;
            e = 0 > r ? Math.max(0, u + r) : r
        }
        if (m && n.indexOf === m) return n.indexOf(t, r);
        for (; u > e; e++)
            if (n[e] === t) return e;
        return -1
    }, j.lastIndexOf = function(n, t, r) {
        if (null == n) return -1;
        var e = null != r;
        if (b && n.lastIndexOf === b) return e ? n.lastIndexOf(t, r) : n.lastIndexOf(t);
        for (var u = e ? r : n.length; u--;)
            if (n[u] === t) return u;
        return -1
    }, j.range = function(n, t, r) {
        arguments.length <= 1 && (t = n || 0, n = 0), r = arguments[2] || 1;
        for (var e = Math.max(Math.ceil((t - n) / r), 0), u = 0, i = new Array(e); e > u;) i[u++] = n, n += r;
        return i
    };
    var R = function() {};
    j.bind = function(n, t) {
        var r, e;
        if (_ && n.bind === _) return _.apply(n, a.call(arguments, 1));
        if (!j.isFunction(n)) throw new TypeError;
        return r = a.call(arguments, 2), e = function() {
            if (!(this instanceof e)) return n.apply(t, r.concat(a.call(arguments)));
            R.prototype = n.prototype;
            var u = new R;
            R.prototype = null;
            var i = n.apply(u, r.concat(a.call(arguments)));
            return Object(i) === i ? i : u
        }
    }, j.partial = function(n) {
        var t = a.call(arguments, 1);
        return function() {
            for (var r = 0, e = t.slice(), u = 0, i = e.length; i > u; u++) e[u] === j && (e[u] = arguments[r++]);
            for (; r < arguments.length;) e.push(arguments[r++]);
            return n.apply(this, e)
        }
    }, j.bindAll = function(n) {
        var t = a.call(arguments, 1);
        if (0 === t.length) throw new Error("bindAll must be passed function names");
        return A(t, function(t) {
            n[t] = j.bind(n[t], n)
        }), n
    }, j.memoize = function(n, t) {
        var r = {};
        return t || (t = j.identity),
            function() {
                var e = t.apply(this, arguments);
                return j.has(r, e) ? r[e] : r[e] = n.apply(this, arguments)
            }
    }, j.delay = function(n, t) {
        var r = a.call(arguments, 2);
        return setTimeout(function() {
            return n.apply(null, r)
        }, t)
    }, j.defer = function(n) {
        return j.delay.apply(j, [n, 1].concat(a.call(arguments, 1)))
    }, j.throttle = function(n, t, r) {
        var e, u, i, o = null,
            a = 0;
        r || (r = {});
        var c = function() {
            a = r.leading === !1 ? 0 : j.now(), o = null, i = n.apply(e, u), e = u = null
        };
        return function() {
            var l = j.now();
            a || r.leading !== !1 || (a = l);
            var f = t - (l - a);
            return e = this, u = arguments, 0 >= f ? (clearTimeout(o), o = null, a = l, i = n.apply(e, u), e = u = null) : o || r.trailing === !1 || (o = setTimeout(c, f)), i
        }
    }, j.debounce = function(n, t, r) {
        var e, u, i, o, a, c = function() {
            var l = j.now() - o;
            t > l ? e = setTimeout(c, t - l) : (e = null, r || (a = n.apply(i, u), i = u = null))
        };
        return function() {
            i = this, u = arguments, o = j.now();
            var l = r && !e;
            return e || (e = setTimeout(c, t)), l && (a = n.apply(i, u), i = u = null), a
        }
    }, j.once = function(n) {
        var t, r = !1;
        return function() {
            return r ? t : (r = !0, t = n.apply(this, arguments), n = null, t)
        }
    }, j.wrap = function(n, t) {
        return j.partial(t, n)
    }, j.compose = function() {
        var n = arguments;
        return function() {
            for (var t = arguments, r = n.length - 1; r >= 0; r--) t = [n[r].apply(this, t)];
            return t[0]
        }
    }, j.after = function(n, t) {
        return function() {
            return --n < 1 ? t.apply(this, arguments) : void 0
        }
    }, j.keys = function(n) {
        if (!j.isObject(n)) return [];
        if (w) return w(n);
        var t = [];
        for (var r in n) j.has(n, r) && t.push(r);
        return t
    }, j.values = function(n) {
        for (var t = j.keys(n), r = t.length, e = new Array(r), u = 0; r > u; u++) e[u] = n[t[u]];
        return e
    }, j.pairs = function(n) {
        for (var t = j.keys(n), r = t.length, e = new Array(r), u = 0; r > u; u++) e[u] = [t[u], n[t[u]]];
        return e
    }, j.invert = function(n) {
        for (var t = {}, r = j.keys(n), e = 0, u = r.length; u > e; e++) t[n[r[e]]] = r[e];
        return t
    }, j.functions = j.methods = function(n) {
        var t = [];
        for (var r in n) j.isFunction(n[r]) && t.push(r);
        return t.sort()
    }, j.extend = function(n) {
        return A(a.call(arguments, 1), function(t) {
            if (t)
                for (var r in t) n[r] = t[r]
        }), n
    }, j.pick = function(n) {
        var t = {},
            r = c.apply(e, a.call(arguments, 1));
        return A(r, function(r) {
            r in n && (t[r] = n[r])
        }), t
    }, j.omit = function(n) {
        var t = {},
            r = c.apply(e, a.call(arguments, 1));
        for (var u in n) j.contains(r, u) || (t[u] = n[u]);
        return t
    }, j.defaults = function(n) {
        return A(a.call(arguments, 1), function(t) {
            if (t)
                for (var r in t) void 0 === n[r] && (n[r] = t[r])
        }), n
    }, j.clone = function(n) {
        return j.isObject(n) ? j.isArray(n) ? n.slice() : j.extend({}, n) : n
    }, j.tap = function(n, t) {
        return t(n), n
    };
    var S = function(n, t, r, e) {
        if (n === t) return 0 !== n || 1 / n == 1 / t;
        if (null == n || null == t) return n === t;
        n instanceof j && (n = n._wrapped), t instanceof j && (t = t._wrapped);
        var u = l.call(n);
        if (u != l.call(t)) return !1;
        switch (u) {
            case "[object String]":
                return n == String(t);
            case "[object Number]":
                return n != +n ? t != +t : 0 == n ? 1 / n == 1 / t : n == +t;
            case "[object Date]":
            case "[object Boolean]":
                return +n == +t;
            case "[object RegExp]":
                return n.source == t.source && n.global == t.global && n.multiline == t.multiline && n.ignoreCase == t.ignoreCase
        }
        if ("object" != typeof n || "object" != typeof t) return !1;
        for (var i = r.length; i--;)
            if (r[i] == n) return e[i] == t;
        var o = n.constructor,
            a = t.constructor;
        if (o !== a && !(j.isFunction(o) && o instanceof o && j.isFunction(a) && a instanceof a) && "constructor" in n && "constructor" in t) return !1;
        r.push(n), e.push(t);
        var c = 0,
            f = !0;
        if ("[object Array]" == u) {
            if (c = n.length, f = c == t.length)
                for (; c-- && (f = S(n[c], t[c], r, e)););
        } else {
            for (var s in n)
                if (j.has(n, s) && (c++, !(f = j.has(t, s) && S(n[s], t[s], r, e)))) break;
            if (f) {
                for (s in t)
                    if (j.has(t, s) && !c--) break;
                f = !c
            }
        }
        return r.pop(), e.pop(), f
    };
    j.isEqual = function(n, t) {
        return S(n, t, [], [])
    }, j.isEmpty = function(n) {
        if (null == n) return !0;
        if (j.isArray(n) || j.isString(n)) return 0 === n.length;
        for (var t in n)
            if (j.has(n, t)) return !1;
        return !0
    }, j.isElement = function(n) {
        return !(!n || 1 !== n.nodeType)
    }, j.isArray = x || function(n) {
        return "[object Array]" == l.call(n)
    }, j.isObject = function(n) {
        return n === Object(n)
    }, A(["Arguments", "Function", "String", "Number", "Date", "RegExp"], function(n) {
        j["is" + n] = function(t) {
            return l.call(t) == "[object " + n + "]"
        }
    }), j.isArguments(arguments) || (j.isArguments = function(n) {
        return !(!n || !j.has(n, "callee"))
    }), "function" != typeof /./ && (j.isFunction = function(n) {
        return "function" == typeof n
    }), j.isFinite = function(n) {
        return isFinite(n) && !isNaN(parseFloat(n))
    }, j.isNaN = function(n) {
        return j.isNumber(n) && n != +n
    }, j.isBoolean = function(n) {
        return n === !0 || n === !1 || "[object Boolean]" == l.call(n)
    }, j.isNull = function(n) {
        return null === n
    }, j.isUndefined = function(n) {
        return void 0 === n
    }, j.has = function(n, t) {
        return f.call(n, t)
    }, j.noConflict = function() {
        return n._ = t, this
    }, j.identity = function(n) {
        return n
    }, j.constant = function(n) {
        return function() {
            return n
        }
    }, j.property = function(n) {
        return function(t) {
            return t[n]
        }
    }, j.matches = function(n) {
        return function(t) {
            if (t === n) return !0;
            for (var r in n)
                if (n[r] !== t[r]) return !1;
            return !0
        }
    }, j.times = function(n, t, r) {
        for (var e = Array(Math.max(0, n)), u = 0; n > u; u++) e[u] = t.call(r, u);
        return e
    }, j.random = function(n, t) {
        return null == t && (t = n, n = 0), n + Math.floor(Math.random() * (t - n + 1))
    }, j.now = Date.now || function() {
        return (new Date).getTime()
    };
    var T = {
        escape: {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#x27;"
        }
    };
    T.unescape = j.invert(T.escape);
    var I = {
        escape: new RegExp("[" + j.keys(T.escape).join("") + "]", "g"),
        unescape: new RegExp("(" + j.keys(T.unescape).join("|") + ")", "g")
    };
    j.each(["escape", "unescape"], function(n) {
        j[n] = function(t) {
            return null == t ? "" : ("" + t).replace(I[n], function(t) {
                return T[n][t]
            })
        }
    }), j.result = function(n, t) {
        if (null != n) {
            var r = n[t];
            return j.isFunction(r) ? r.call(n) : r
        }
    }, j.mixin = function(n) {
        A(j.functions(n), function(t) {
            var r = j[t] = n[t];
            j.prototype[t] = function() {
                var n = [this._wrapped];
                return o.apply(n, arguments), z.call(this, r.apply(j, n))
            }
        })
    };
    var N = 0;
    j.uniqueId = function(n) {
        var t = ++N + "";
        return n ? n + t : t
    }, j.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
    };
    var q = /(.)^/,
        B = {
            "'": "'",
            "\\": "\\",
            "\r": "r",
            "\n": "n",
            "	": "t",
            "\u2028": "u2028",
            "\u2029": "u2029"
        },
        D = /\\|'|\r|\n|\t|\u2028|\u2029/g;
    j.template = function(n, t, r) {
        var e;
        r = j.defaults({}, r, j.templateSettings);
        var u = new RegExp([(r.escape || q).source, (r.interpolate || q).source, (r.evaluate || q).source].join("|") + "|$", "g"),
            i = 0,
            o = "__p+='";
        n.replace(u, function(t, r, e, u, a) {
            return o += n.slice(i, a).replace(D, function(n) {
                return "\\" + B[n]
            }), r && (o += "'+\n((__t=(" + r + "))==null?'':_.escape(__t))+\n'"), e && (o += "'+\n((__t=(" + e + "))==null?'':__t)+\n'"), u && (o += "';\n" + u + "\n__p+='"), i = a + t.length, t
        }), o += "';\n", r.variable || (o = "with(obj||{}){\n" + o + "}\n"), o = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + o + "return __p;\n";
        try {
            e = new Function(r.variable || "obj", "_", o)
        } catch (a) {
            throw a.source = o, a
        }
        if (t) return e(t, j);
        var c = function(n) {
            return e.call(this, n, j)
        };
        return c.source = "function(" + (r.variable || "obj") + "){\n" + o + "}", c
    }, j.chain = function(n) {
        return j(n).chain()
    };
    var z = function(n) {
        return this._chain ? j(n).chain() : n
    };
    j.mixin(j), A(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(n) {
        var t = e[n];
        j.prototype[n] = function() {
            var r = this._wrapped;
            return t.apply(r, arguments), "shift" != n && "splice" != n || 0 !== r.length || delete r[0], z.call(this, r)
        }
    }), A(["concat", "join", "slice"], function(n) {
        var t = e[n];
        j.prototype[n] = function() {
            return z.call(this, t.apply(this._wrapped, arguments))
        }
    }), j.extend(j.prototype, {
        chain: function() {
            return this._chain = !0, this
        },
        value: function() {
            return this._wrapped
        }
    }), "function" == typeof define && define.amd && define("underscore", [], function() {
        return j
    })
}).call(this);
! function() {
    "use strict";

    function e() {
        for (var n = "", r = 0; r < arguments.length; r++) {
            var t = arguments[r];
            if (t) {
                var f = typeof t;
                if ("string" === f || "number" === f) n += " " + t;
                else if (Array.isArray(t)) n += " " + e.apply(null, t);
                else if ("object" === f)
                    for (var o in t) t.hasOwnProperty(o) && t[o] && (n += " " + o)
            }
        }
        return n.substr(1)
    }
    "undefined" != typeof module && module.exports ? module.exports = e : "function" == typeof define && "object" == typeof define.amd && define.amd ? define(function() {
        return e
    }) : window.classNames = e
}();
! function() {
    "use strict";

    function e(e) {
        return e && e.__esModule ? e : {
            "default": e
        }
    }

    function t(e, t) {
        var r = {};
        for (var n in e) t.indexOf(n) >= 0 || Object.prototype.hasOwnProperty.call(e, n) && (r[n] = e[n]);
        return r
    }

    function r(e, t) {
        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
    }

    function n(e, t) {
        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return !t || "object" != typeof t && "function" != typeof t ? e : t
    }

    function o(e, t) {
        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
        e.prototype = Object.create(t && t.prototype, {
            constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
            }
        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
    }
    var i = {},
        a = function(e) {
            function t(n) {
                if (r[n]) return r[n].exports;
                var o = r[n] = {
                    exports: {},
                    id: n,
                    loaded: !1
                };
                return e[n].call(o.exports, o, o.exports, t), o.loaded = !0, o.exports
            }
            var r = {};
            return t.m = e, t.c = r, t.p = "", t(0)
        }([function(e, t, r) {
            t.__esModule = !0, r(8), r(9), t["default"] = function(e, t) {
                if (e && t) {
                    var r = function() {
                        var r = t.split(","),
                            n = e.name || "",
                            o = e.type || "",
                            i = o.replace(/\/.*$/, "");
                        return {
                            v: r.some(function(e) {
                                var t = e.trim();
                                return "." === t.charAt(0) ? n.toLowerCase().endsWith(t.toLowerCase()) : /\/\*$/.test(t) ? i === t.replace(/\/.*$/, "") : o === t
                            })
                        }
                    }();
                    if ("object" == typeof r) return r.v
                }
                return !0
            }, e.exports = t["default"]
        }, function(e, t) {
            var r = e.exports = {
                version: "1.2.2"
            };
            "number" == typeof __e && (__e = r)
        }, function(e, t) {
            var r = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
            "number" == typeof __g && (__g = r)
        }, function(e, t, r) {
            var n = r(2),
                o = r(1),
                i = r(4),
                a = r(19),
                c = "prototype",
                s = function(e, t) {
                    return function() {
                        return e.apply(t, arguments)
                    }
                },
                u = function(e, t, r) {
                    var p, l, f, d, y = e & u.G,
                        h = e & u.P,
                        v = y ? n : e & u.S ? n[t] || (n[t] = {}) : (n[t] || {})[c],
                        g = y ? o : o[t] || (o[t] = {});
                    y && (r = t);
                    for (p in r) l = !(e & u.F) && v && p in v, f = (l ? v : r)[p], d = e & u.B && l ? s(f, n) : h && "function" == typeof f ? s(Function.call, f) : f, v && !l && a(v, p, f), g[p] != f && i(g, p, d), h && ((g[c] || (g[c] = {}))[p] = f)
                };
            n.core = o, u.F = 1, u.G = 2, u.S = 4, u.P = 8, u.B = 16, u.W = 32, e.exports = u
        }, function(e, t, r) {
            var n = r(5),
                o = r(18);
            e.exports = r(22) ? function(e, t, r) {
                return n.setDesc(e, t, o(1, r))
            } : function(e, t, r) {
                return e[t] = r, e
            }
        }, function(e, t) {
            var r = Object;
            e.exports = {
                create: r.create,
                getProto: r.getPrototypeOf,
                isEnum: {}.propertyIsEnumerable,
                getDesc: r.getOwnPropertyDescriptor,
                setDesc: r.defineProperty,
                setDescs: r.defineProperties,
                getKeys: r.keys,
                getNames: r.getOwnPropertyNames,
                getSymbols: r.getOwnPropertySymbols,
                each: [].forEach
            }
        }, function(e, t) {
            var r = 0,
                n = Math.random();
            e.exports = function(e) {
                return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++r + n).toString(36))
            }
        }, function(e, t, r) {
            var n = r(20)("wks"),
                o = r(2).Symbol;
            e.exports = function(e) {
                return n[e] || (n[e] = o && o[e] || (o || r(6))("Symbol." + e))
            }
        }, function(e, t, r) {
            r(26), e.exports = r(1).Array.some
        }, function(e, t, r) {
            r(25), e.exports = r(1).String.endsWith
        }, function(e, t) {
            e.exports = function(e) {
                if ("function" != typeof e) throw TypeError(e + " is not a function!");
                return e
            }
        }, function(e, t) {
            var r = {}.toString;
            e.exports = function(e) {
                return r.call(e).slice(8, -1)
            }
        }, function(e, t, r) {
            var n = r(10);
            e.exports = function(e, t, r) {
                if (n(e), void 0 === t) return e;
                switch (r) {
                    case 1:
                        return function(r) {
                            return e.call(t, r)
                        };
                    case 2:
                        return function(r, n) {
                            return e.call(t, r, n)
                        };
                    case 3:
                        return function(r, n, o) {
                            return e.call(t, r, n, o)
                        }
                }
                return function() {
                    return e.apply(t, arguments)
                }
            }
        }, function(e, t) {
            e.exports = function(e) {
                if (void 0 == e) throw TypeError("Can't call method on  " + e);
                return e
            }
        }, function(e, t, r) {
            e.exports = function(e) {
                var t = /./;
                try {
                    "/./" [e](t)
                } catch (n) {
                    try {
                        return t[r(7)("match")] = !1, !"/./" [e](t)
                    } catch (o) {}
                }
                return !0
            }
        }, function(e, t) {
            e.exports = function(e) {
                try {
                    return !!e()
                } catch (t) {
                    return !0
                }
            }
        }, function(e, t) {
            e.exports = function(e) {
                return "object" == typeof e ? null !== e : "function" == typeof e
            }
        }, function(e, t, r) {
            var n = r(16),
                o = r(11),
                i = r(7)("match");
            e.exports = function(e) {
                var t;
                return n(e) && (void 0 !== (t = e[i]) ? !!t : "RegExp" == o(e))
            }
        }, function(e, t) {
            e.exports = function(e, t) {
                return {
                    enumerable: !(1 & e),
                    configurable: !(2 & e),
                    writable: !(4 & e),
                    value: t
                }
            }
        }, function(e, t, r) {
            var n = r(2),
                o = r(4),
                i = r(6)("src"),
                a = "toString",
                c = Function[a],
                s = ("" + c).split(a);
            r(1).inspectSource = function(e) {
                return c.call(e)
            }, (e.exports = function(e, t, r, a) {
                "function" == typeof r && (o(r, i, e[t] ? "" + e[t] : s.join(String(t))), "name" in r || (r.name = t)), e === n ? e[t] = r : (a || delete e[t], o(e, t, r))
            })(Function.prototype, a, function() {
                return "function" == typeof this && this[i] || c.call(this)
            })
        }, function(e, t, r) {
            var n = r(2),
                o = "__core-js_shared__",
                i = n[o] || (n[o] = {});
            e.exports = function(e) {
                return i[e] || (i[e] = {})
            }
        }, function(e, t, r) {
            var n = r(17),
                o = r(13);
            e.exports = function(e, t, r) {
                if (n(t)) throw TypeError("String#" + r + " doesn't accept regex!");
                return String(o(e))
            }
        }, function(e, t, r) {
            e.exports = !r(15)(function() {
                return 7 != Object.defineProperty({}, "a", {
                    get: function() {
                        return 7
                    }
                }).a
            })
        }, function(e, t) {
            var r = Math.ceil,
                n = Math.floor;
            e.exports = function(e) {
                return isNaN(e = +e) ? 0 : (e > 0 ? n : r)(e)
            }
        }, function(e, t, r) {
            var n = r(23),
                o = Math.min;
            e.exports = function(e) {
                return e > 0 ? o(n(e), 9007199254740991) : 0
            }
        }, function(e, t, r) {
            var n = r(3),
                o = r(24),
                i = r(21),
                a = "endsWith",
                c = "" [a];
            n(n.P + n.F * r(14)(a), "String", {
                endsWith: function(e) {
                    var t = i(this, e, a),
                        r = arguments,
                        n = r.length > 1 ? r[1] : void 0,
                        s = o(t.length),
                        u = void 0 === n ? s : Math.min(o(n), s),
                        p = String(e);
                    return c ? c.call(t, p, u) : t.slice(u - p.length, u) === p
                }
            })
        }, function(e, t, r) {
            var n = r(5),
                o = r(3),
                i = r(1).Array || Array,
                a = {},
                c = function(e, t) {
                    n.each.call(e.split(","), function(e) {
                        void 0 == t && e in i ? a[e] = i[e] : e in [] && (a[e] = r(12)(Function.call, [][e], t))
                    })
                };
            c("pop,reverse,shift,keys,values,entries", 1), c("indexOf,every,some,forEach,map,filter,find,findIndex,includes", 3), c("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill"), o(o.S, "Array", a)
        }]);
    Object.defineProperty(i, "__esModule", {
        value: !0
    });
    var c = Object.assign || function(e) {
            for (var t = 1; t < arguments.length; t++) {
                var r = arguments[t];
                for (var n in r) Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n])
            }
            return e
        },
        s = function() {
            function e(e, t) {
                for (var r = 0; r < t.length; r++) {
                    var n = t[r];
                    n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n)
                }
            }
            return function(t, r, n) {
                return r && e(t.prototype, r), n && e(t, n), t
            }
        }(),
        u = a,
        p = e(u),
        l = window.React,
        f = e(l),
        d = "undefined" != typeof document && document && document.createElement ? "multiple" in document.createElement("input") : !0,
        y = function(e) {
            function i(e, t) {
                r(this, i);
                var o = n(this, Object.getPrototypeOf(i).call(this, e, t));
                return o.onClick = o.onClick.bind(o), o.onDragEnter = o.onDragEnter.bind(o), o.onDragLeave = o.onDragLeave.bind(o), o.onDragOver = o.onDragOver.bind(o), o.onDrop = o.onDrop.bind(o), o.state = {
                    isDragActive: !1
                }, o
            }
            return o(i, e), s(i, [{
                key: "componentDidMount",
                value: function() {
                    this.enterCounter = 0
                }
            }, {
                key: "onDragEnter",
                value: function(e) {
                    e.preventDefault(), ++this.enterCounter;
                    var t = e.dataTransfer && e.dataTransfer.items ? e.dataTransfer.items : [],
                        r = this.allFilesAccepted(Array.prototype.slice.call(t));
                    this.setState({
                        isDragActive: r,
                        isDragReject: !r
                    }), this.props.onDragEnter && this.props.onDragEnter.call(this, e)
                }
            }, {
                key: "onDragOver",
                value: function(e) {
                    e.preventDefault(), e.stopPropagation()
                }
            }, {
                key: "onDragLeave",
                value: function(e) {
                    e.preventDefault(), --this.enterCounter > 0 || (this.setState({
                        isDragActive: !1,
                        isDragReject: !1
                    }), this.props.onDragLeave && this.props.onDragLeave.call(this, e))
                }
            }, {
                key: "onDrop",
                value: function(e) {
                    e.preventDefault(), this.enterCounter = 0, this.setState({
                        isDragActive: !1,
                        isDragReject: !1
                    });
                    for (var t = e.dataTransfer ? e.dataTransfer.files : e.target.files, r = this.props.multiple ? t.length : 1, n = [], o = 0; r > o; o++) {
                        var i = t[o];
                        this.props.disablePreview || (i.preview = window.URL.createObjectURL(i)), n.push(i)
                    }
                    this.props.onDrop && this.props.onDrop.call(this, n, e), this.allFilesAccepted(n) ? this.props.onDropAccepted && this.props.onDropAccepted.call(this, n, e) : this.props.onDropRejected && this.props.onDropRejected.call(this, n, e)
                }
            }, {
                key: "onClick",
                value: function() {
                    this.props.disableClick || this.open()
                }
            }, {
                key: "allFilesAccepted",
                value: function(e) {
                    var t = this;
                    return e.every(function(e) {
                        return (0, p["default"])(e, t.props.accept)
                    })
                }
            }, {
                key: "open",
                value: function() {
                    var e = this.fileInputEl.getDOMNode();
                    e.value = null, e.click()
                }
            }, {
                key: "render",
                value: function() {
                    var e = this,
                        r = this.props,
                        n = r.accept,
                        o = r.activeClassName,
                        i = r.inputProps,
                        a = r.multiple,
                        s = r.name,
                        u = r.rejectClassName,
                        p = t(r, ["accept", "activeClassName", "inputProps", "multiple", "name", "rejectClassName"]),
                        l = p.activeStyle,
                        y = p.className,
                        h = p.rejectStyle,
                        v = p.style,
                        g = t(p, ["activeStyle", "className", "rejectStyle", "style"]),
                        m = this.state,
                        b = m.isDragActive,
                        D = m.isDragReject;
                    y = y || "", b && o && (y += " " + o), D && u && (y += " " + u), y || v || l || h || (v = {
                        width: 200,
                        height: 200,
                        borderWidth: 2,
                        borderColor: "#666",
                        borderStyle: "dashed",
                        borderRadius: 5
                    }, l = {
                        borderStyle: "solid",
                        backgroundColor: "#eee"
                    }, h = {
                        borderStyle: "solid",
                        backgroundColor: "#ffdddd"
                    });
                    var P = void 0;
                    P = l && b ? c({}, v, l) : h && D ? c({}, v, h) : c({}, v);
                    var w = {
                        accept: n,
                        type: "file",
                        style: {
                            display: "none"
                        },
                        multiple: d && a,
                        ref: function(t) {
                            return e.fileInputEl = t
                        },
                        onChange: this.onDrop
                    };
                    return s && s.length && (w.name = s), f["default"].createElement("div", c({
                        className: y,
                        style: P
                    }, g, {
                        onClick: this.onClick,
                        onDragEnter: this.onDragEnter,
                        onDragOver: this.onDragOver,
                        onDragLeave: this.onDragLeave,
                        onDrop: this.onDrop
                    }), this.props.children, f["default"].createElement("input", c({}, i, w)))
                }
            }]), i
        }(f["default"].Component);
    y.defaultProps = {
        disablePreview: !1,
        disableClick: !1,
        multiple: !0
    }, y.propTypes = {
        onDrop: f["default"].PropTypes.func,
        onDropAccepted: f["default"].PropTypes.func,
        onDropRejected: f["default"].PropTypes.func,
        onDragEnter: f["default"].PropTypes.func,
        onDragLeave: f["default"].PropTypes.func,
        children: f["default"].PropTypes.node,
        style: f["default"].PropTypes.object,
        activeStyle: f["default"].PropTypes.object,
        rejectStyle: f["default"].PropTypes.object,
        className: f["default"].PropTypes.string,
        activeClassName: f["default"].PropTypes.string,
        rejectClassName: f["default"].PropTypes.string,
        disablePreview: f["default"].PropTypes.bool,
        disableClick: f["default"].PropTypes.bool,
        inputProps: f["default"].PropTypes.object,
        multiple: f["default"].PropTypes.bool,
        accept: f["default"].PropTypes.string,
        name: f["default"].PropTypes.string
    }, window.Dropzone = y
}();
! function() {
    function n(n) {
        return n && (n.ownerDocument || n.document || n).documentElement
    }

    function t(n) {
        return n && (n.ownerDocument && n.ownerDocument.defaultView || n.document && n || n.defaultView)
    }

    function e(n, t) {
        return t > n ? -1 : n > t ? 1 : n >= t ? 0 : NaN
    }

    function r(n) {
        return null === n ? NaN : +n
    }

    function i(n) {
        return !isNaN(n)
    }

    function u(n) {
        return {
            left: function(t, e, r, i) {
                for (arguments.length < 3 && (r = 0), arguments.length < 4 && (i = t.length); i > r;) {
                    var u = r + i >>> 1;
                    n(t[u], e) < 0 ? r = u + 1 : i = u
                }
                return r
            },
            right: function(t, e, r, i) {
                for (arguments.length < 3 && (r = 0), arguments.length < 4 && (i = t.length); i > r;) {
                    var u = r + i >>> 1;
                    n(t[u], e) > 0 ? i = u : r = u + 1
                }
                return r
            }
        }
    }

    function o(n) {
        return n.length
    }

    function a(n) {
        for (var t = 1; n * t % 1;) t *= 10;
        return t
    }

    function l(n, t) {
        for (var e in t) Object.defineProperty(n.prototype, e, {
            value: t[e],
            enumerable: !1
        })
    }

    function c() {
        this._ = Object.create(null)
    }

    function f(n) {
        return (n += "") === bo || n[0] === _o ? _o + n : n
    }

    function s(n) {
        return (n += "")[0] === _o ? n.slice(1) : n
    }

    function h(n) {
        return f(n) in this._
    }

    function p(n) {
        return (n = f(n)) in this._ && delete this._[n]
    }

    function g() {
        var n = [];
        for (var t in this._) n.push(s(t));
        return n
    }

    function v() {
        var n = 0;
        for (var t in this._) ++n;
        return n
    }

    function d() {
        for (var n in this._) return !1;
        return !0
    }

    function y() {
        this._ = Object.create(null)
    }

    function m(n) {
        return n
    }

    function M(n, t, e) {
        return function() {
            var r = e.apply(t, arguments);
            return r === t ? n : r
        }
    }

    function x(n, t) {
        if (t in n) return t;
        t = t.charAt(0).toUpperCase() + t.slice(1);
        for (var e = 0, r = wo.length; r > e; ++e) {
            var i = wo[e] + t;
            if (i in n) return i
        }
    }

    function b() {}

    function _() {}

    function w(n) {
        function t() {
            for (var t, r = e, i = -1, u = r.length; ++i < u;)(t = r[i].on) && t.apply(this, arguments);
            return n
        }
        var e = [],
            r = new c;
        return t.on = function(t, i) {
            var u, o = r.get(t);
            return arguments.length < 2 ? o && o.on : (o && (o.on = null, e = e.slice(0, u = e.indexOf(o)).concat(e.slice(u + 1)), r.remove(t)), i && e.push(r.set(t, {
                on: i
            })), n)
        }, t
    }

    function S() {
        ao.event.preventDefault()
    }

    function k() {
        for (var n, t = ao.event; n = t.sourceEvent;) t = n;
        return t
    }

    function N(n) {
        for (var t = new _, e = 0, r = arguments.length; ++e < r;) t[arguments[e]] = w(t);
        return t.of = function(e, r) {
            return function(i) {
                try {
                    var u = i.sourceEvent = ao.event;
                    i.target = n, ao.event = i, t[i.type].apply(e, r)
                } finally {
                    ao.event = u
                }
            }
        }, t
    }

    function E(n) {
        return ko(n, Co), n
    }

    function A(n) {
        return "function" == typeof n ? n : function() {
            return No(n, this)
        }
    }

    function C(n) {
        return "function" == typeof n ? n : function() {
            return Eo(n, this)
        }
    }

    function z(n, t) {
        function e() {
            this.removeAttribute(n)
        }

        function r() {
            this.removeAttributeNS(n.space, n.local)
        }

        function i() {
            this.setAttribute(n, t)
        }

        function u() {
            this.setAttributeNS(n.space, n.local, t)
        }

        function o() {
            var e = t.apply(this, arguments);
            null == e ? this.removeAttribute(n) : this.setAttribute(n, e)
        }

        function a() {
            var e = t.apply(this, arguments);
            null == e ? this.removeAttributeNS(n.space, n.local) : this.setAttributeNS(n.space, n.local, e)
        }
        return n = ao.ns.qualify(n), null == t ? n.local ? r : e : "function" == typeof t ? n.local ? a : o : n.local ? u : i
    }

    function L(n) {
        return n.trim().replace(/\s+/g, " ")
    }

    function q(n) {
        return new RegExp("(?:^|\\s+)" + ao.requote(n) + "(?:\\s+|$)", "g")
    }

    function T(n) {
        return (n + "").trim().split(/^|\s+/)
    }

    function R(n, t) {
        function e() {
            for (var e = -1; ++e < i;) n[e](this, t)
        }

        function r() {
            for (var e = -1, r = t.apply(this, arguments); ++e < i;) n[e](this, r)
        }
        n = T(n).map(D);
        var i = n.length;
        return "function" == typeof t ? r : e
    }

    function D(n) {
        var t = q(n);
        return function(e, r) {
            if (i = e.classList) return r ? i.add(n) : i.remove(n);
            var i = e.getAttribute("class") || "";
            r ? (t.lastIndex = 0, t.test(i) || e.setAttribute("class", L(i + " " + n))) : e.setAttribute("class", L(i.replace(t, " ")))
        }
    }

    function P(n, t, e) {
        function r() {
            this.style.removeProperty(n)
        }

        function i() {
            this.style.setProperty(n, t, e)
        }

        function u() {
            var r = t.apply(this, arguments);
            null == r ? this.style.removeProperty(n) : this.style.setProperty(n, r, e)
        }
        return null == t ? r : "function" == typeof t ? u : i
    }

    function U(n, t) {
        function e() {
            delete this[n]
        }

        function r() {
            this[n] = t
        }

        function i() {
            var e = t.apply(this, arguments);
            null == e ? delete this[n] : this[n] = e
        }
        return null == t ? e : "function" == typeof t ? i : r
    }

    function j(n) {
        function t() {
            var t = this.ownerDocument,
                e = this.namespaceURI;
            return e === zo && t.documentElement.namespaceURI === zo ? t.createElement(n) : t.createElementNS(e, n)
        }

        function e() {
            return this.ownerDocument.createElementNS(n.space, n.local)
        }
        return "function" == typeof n ? n : (n = ao.ns.qualify(n)).local ? e : t
    }

    function F() {
        var n = this.parentNode;
        n && n.removeChild(this)
    }

    function H(n) {
        return {
            __data__: n
        }
    }

    function O(n) {
        return function() {
            return Ao(this, n)
        }
    }

    function I(n) {
        return arguments.length || (n = e),
            function(t, e) {
                return t && e ? n(t.__data__, e.__data__) : !t - !e
            }
    }

    function Y(n, t) {
        for (var e = 0, r = n.length; r > e; e++)
            for (var i, u = n[e], o = 0, a = u.length; a > o; o++)(i = u[o]) && t(i, o, e);
        return n
    }

    function Z(n) {
        return ko(n, qo), n
    }

    function V(n) {
        var t, e;
        return function(r, i, u) {
            var o, a = n[u].update,
                l = a.length;
            for (u != e && (e = u, t = 0), i >= t && (t = i + 1); !(o = a[t]) && ++t < l;);
            return o
        }
    }

    function X(n, t, e) {
        function r() {
            var t = this[o];
            t && (this.removeEventListener(n, t, t.$), delete this[o])
        }

        function i() {
            var i = l(t, co(arguments));
            r.call(this), this.addEventListener(n, this[o] = i, i.$ = e), i._ = t
        }

        function u() {
            var t, e = new RegExp("^__on([^.]+)" + ao.requote(n) + "$");
            for (var r in this)
                if (t = r.match(e)) {
                    var i = this[r];
                    this.removeEventListener(t[1], i, i.$), delete this[r]
                }
        }
        var o = "__on" + n,
            a = n.indexOf("."),
            l = $;
        a > 0 && (n = n.slice(0, a));
        var c = To.get(n);
        return c && (n = c, l = B), a ? t ? i : r : t ? b : u
    }

    function $(n, t) {
        return function(e) {
            var r = ao.event;
            ao.event = e, t[0] = this.__data__;
            try {
                n.apply(this, t)
            } finally {
                ao.event = r
            }
        }
    }

    function B(n, t) {
        var e = $(n, t);
        return function(n) {
            var t = this,
                r = n.relatedTarget;
            r && (r === t || 8 & r.compareDocumentPosition(t)) || e.call(t, n)
        }
    }

    function W(e) {
        var r = ".dragsuppress-" + ++Do,
            i = "click" + r,
            u = ao.select(t(e)).on("touchmove" + r, S).on("dragstart" + r, S).on("selectstart" + r, S);
        if (null == Ro && (Ro = "onselectstart" in e ? !1 : x(e.style, "userSelect")), Ro) {
            var o = n(e).style,
                a = o[Ro];
            o[Ro] = "none"
        }
        return function(n) {
            if (u.on(r, null), Ro && (o[Ro] = a), n) {
                var t = function() {
                    u.on(i, null)
                };
                u.on(i, function() {
                    S(), t()
                }, !0), setTimeout(t, 0)
            }
        }
    }

    function J(n, e) {
        e.changedTouches && (e = e.changedTouches[0]);
        var r = n.ownerSVGElement || n;
        if (r.createSVGPoint) {
            var i = r.createSVGPoint();
            if (0 > Po) {
                var u = t(n);
                if (u.scrollX || u.scrollY) {
                    r = ao.select("body").append("svg").style({
                        position: "absolute",
                        top: 0,
                        left: 0,
                        margin: 0,
                        padding: 0,
                        border: "none"
                    }, "important");
                    var o = r[0][0].getScreenCTM();
                    Po = !(o.f || o.e), r.remove()
                }
            }
            return Po ? (i.x = e.pageX, i.y = e.pageY) : (i.x = e.clientX, i.y = e.clientY), i = i.matrixTransform(n.getScreenCTM().inverse()), [i.x, i.y]
        }
        var a = n.getBoundingClientRect();
        return [e.clientX - a.left - n.clientLeft, e.clientY - a.top - n.clientTop]
    }

    function G() {
        return ao.event.changedTouches[0].identifier
    }

    function K(n) {
        return n > 0 ? 1 : 0 > n ? -1 : 0
    }

    function Q(n, t, e) {
        return (t[0] - n[0]) * (e[1] - n[1]) - (t[1] - n[1]) * (e[0] - n[0])
    }

    function nn(n) {
        return n > 1 ? 0 : -1 > n ? Fo : Math.acos(n)
    }

    function tn(n) {
        return n > 1 ? Io : -1 > n ? -Io : Math.asin(n)
    }

    function en(n) {
        return ((n = Math.exp(n)) - 1 / n) / 2
    }

    function rn(n) {
        return ((n = Math.exp(n)) + 1 / n) / 2
    }

    function un(n) {
        return ((n = Math.exp(2 * n)) - 1) / (n + 1)
    }

    function on(n) {
        return (n = Math.sin(n / 2)) * n
    }

    function an() {}

    function ln(n, t, e) {
        return this instanceof ln ? (this.h = +n, this.s = +t, void(this.l = +e)) : arguments.length < 2 ? n instanceof ln ? new ln(n.h, n.s, n.l) : _n("" + n, wn, ln) : new ln(n, t, e)
    }

    function cn(n, t, e) {
        function r(n) {
            return n > 360 ? n -= 360 : 0 > n && (n += 360), 60 > n ? u + (o - u) * n / 60 : 180 > n ? o : 240 > n ? u + (o - u) * (240 - n) / 60 : u
        }

        function i(n) {
            return Math.round(255 * r(n))
        }
        var u, o;
        return n = isNaN(n) ? 0 : (n %= 360) < 0 ? n + 360 : n, t = isNaN(t) ? 0 : 0 > t ? 0 : t > 1 ? 1 : t, e = 0 > e ? 0 : e > 1 ? 1 : e, o = .5 >= e ? e * (1 + t) : e + t - e * t, u = 2 * e - o, new mn(i(n + 120), i(n), i(n - 120))
    }

    function fn(n, t, e) {
        return this instanceof fn ? (this.h = +n, this.c = +t, void(this.l = +e)) : arguments.length < 2 ? n instanceof fn ? new fn(n.h, n.c, n.l) : n instanceof hn ? gn(n.l, n.a, n.b) : gn((n = Sn((n = ao.rgb(n)).r, n.g, n.b)).l, n.a, n.b) : new fn(n, t, e)
    }

    function sn(n, t, e) {
        return isNaN(n) && (n = 0), isNaN(t) && (t = 0), new hn(e, Math.cos(n *= Yo) * t, Math.sin(n) * t)
    }

    function hn(n, t, e) {
        return this instanceof hn ? (this.l = +n, this.a = +t, void(this.b = +e)) : arguments.length < 2 ? n instanceof hn ? new hn(n.l, n.a, n.b) : n instanceof fn ? sn(n.h, n.c, n.l) : Sn((n = mn(n)).r, n.g, n.b) : new hn(n, t, e)
    }

    function pn(n, t, e) {
        var r = (n + 16) / 116,
            i = r + t / 500,
            u = r - e / 200;
        return i = vn(i) * na, r = vn(r) * ta, u = vn(u) * ea, new mn(yn(3.2404542 * i - 1.5371385 * r - .4985314 * u), yn(-.969266 * i + 1.8760108 * r + .041556 * u), yn(.0556434 * i - .2040259 * r + 1.0572252 * u))
    }

    function gn(n, t, e) {
        return n > 0 ? new fn(Math.atan2(e, t) * Zo, Math.sqrt(t * t + e * e), n) : new fn(NaN, NaN, n)
    }

    function vn(n) {
        return n > .206893034 ? n * n * n : (n - 4 / 29) / 7.787037
    }

    function dn(n) {
        return n > .008856 ? Math.pow(n, 1 / 3) : 7.787037 * n + 4 / 29
    }

    function yn(n) {
        return Math.round(255 * (.00304 >= n ? 12.92 * n : 1.055 * Math.pow(n, 1 / 2.4) - .055))
    }

    function mn(n, t, e) {
        return this instanceof mn ? (this.r = ~~n, this.g = ~~t, void(this.b = ~~e)) : arguments.length < 2 ? n instanceof mn ? new mn(n.r, n.g, n.b) : _n("" + n, mn, cn) : new mn(n, t, e)
    }

    function Mn(n) {
        return new mn(n >> 16, n >> 8 & 255, 255 & n)
    }

    function xn(n) {
        return Mn(n) + ""
    }

    function bn(n) {
        return 16 > n ? "0" + Math.max(0, n).toString(16) : Math.min(255, n).toString(16)
    }

    function _n(n, t, e) {
        var r, i, u, o = 0,
            a = 0,
            l = 0;
        if (r = /([a-z]+)\((.*)\)/.exec(n = n.toLowerCase())) switch (i = r[2].split(","), r[1]) {
            case "hsl":
                return e(parseFloat(i[0]), parseFloat(i[1]) / 100, parseFloat(i[2]) / 100);
            case "rgb":
                return t(Nn(i[0]), Nn(i[1]), Nn(i[2]))
        }
        return (u = ua.get(n)) ? t(u.r, u.g, u.b) : (null == n || "#" !== n.charAt(0) || isNaN(u = parseInt(n.slice(1), 16)) || (4 === n.length ? (o = (3840 & u) >> 4, o = o >> 4 | o, a = 240 & u, a = a >> 4 | a, l = 15 & u, l = l << 4 | l) : 7 === n.length && (o = (16711680 & u) >> 16, a = (65280 & u) >> 8, l = 255 & u)), t(o, a, l))
    }

    function wn(n, t, e) {
        var r, i, u = Math.min(n /= 255, t /= 255, e /= 255),
            o = Math.max(n, t, e),
            a = o - u,
            l = (o + u) / 2;
        return a ? (i = .5 > l ? a / (o + u) : a / (2 - o - u), r = n == o ? (t - e) / a + (e > t ? 6 : 0) : t == o ? (e - n) / a + 2 : (n - t) / a + 4, r *= 60) : (r = NaN, i = l > 0 && 1 > l ? 0 : r), new ln(r, i, l)
    }

    function Sn(n, t, e) {
        n = kn(n), t = kn(t), e = kn(e);
        var r = dn((.4124564 * n + .3575761 * t + .1804375 * e) / na),
            i = dn((.2126729 * n + .7151522 * t + .072175 * e) / ta),
            u = dn((.0193339 * n + .119192 * t + .9503041 * e) / ea);
        return hn(116 * i - 16, 500 * (r - i), 200 * (i - u))
    }

    function kn(n) {
        return (n /= 255) <= .04045 ? n / 12.92 : Math.pow((n + .055) / 1.055, 2.4)
    }

    function Nn(n) {
        var t = parseFloat(n);
        return "%" === n.charAt(n.length - 1) ? Math.round(2.55 * t) : t
    }

    function En(n) {
        return "function" == typeof n ? n : function() {
            return n
        }
    }

    function An(n) {
        return function(t, e, r) {
            return 2 === arguments.length && "function" == typeof e && (r = e, e = null), Cn(t, e, n, r)
        }
    }

    function Cn(n, t, e, r) {
        function i() {
            var n, t = l.status;
            if (!t && Ln(l) || t >= 200 && 300 > t || 304 === t) {
                try {
                    n = e.call(u, l)
                } catch (r) {
                    return void o.error.call(u, r)
                }
                o.load.call(u, n)
            } else o.error.call(u, l)
        }
        var u = {},
            o = ao.dispatch("beforesend", "progress", "load", "error"),
            a = {},
            l = new XMLHttpRequest,
            c = null;
        return !this.XDomainRequest || "withCredentials" in l || !/^(http(s)?:)?\/\//.test(n) || (l = new XDomainRequest), "onload" in l ? l.onload = l.onerror = i : l.onreadystatechange = function() {
            l.readyState > 3 && i()
        }, l.onprogress = function(n) {
            var t = ao.event;
            ao.event = n;
            try {
                o.progress.call(u, l)
            } finally {
                ao.event = t
            }
        }, u.header = function(n, t) {
            return n = (n + "").toLowerCase(), arguments.length < 2 ? a[n] : (null == t ? delete a[n] : a[n] = t + "", u)
        }, u.mimeType = function(n) {
            return arguments.length ? (t = null == n ? null : n + "", u) : t
        }, u.responseType = function(n) {
            return arguments.length ? (c = n, u) : c
        }, u.response = function(n) {
            return e = n, u
        }, ["get", "post"].forEach(function(n) {
            u[n] = function() {
                return u.send.apply(u, [n].concat(co(arguments)))
            }
        }), u.send = function(e, r, i) {
            if (2 === arguments.length && "function" == typeof r && (i = r, r = null), l.open(e, n, !0), null == t || "accept" in a || (a.accept = t + ",*/*"), l.setRequestHeader)
                for (var f in a) l.setRequestHeader(f, a[f]);
            return null != t && l.overrideMimeType && l.overrideMimeType(t), null != c && (l.responseType = c), null != i && u.on("error", i).on("load", function(n) {
                i(null, n)
            }), o.beforesend.call(u, l), l.send(null == r ? null : r), u
        }, u.abort = function() {
            return l.abort(), u
        }, ao.rebind(u, o, "on"), null == r ? u : u.get(zn(r))
    }

    function zn(n) {
        return 1 === n.length ? function(t, e) {
            n(null == t ? e : null)
        } : n
    }

    function Ln(n) {
        var t = n.responseType;
        return t && "text" !== t ? n.response : n.responseText
    }

    function qn(n, t, e) {
        var r = arguments.length;
        2 > r && (t = 0), 3 > r && (e = Date.now());
        var i = e + t,
            u = {
                c: n,
                t: i,
                n: null
            };
        return aa ? aa.n = u : oa = u, aa = u, la || (ca = clearTimeout(ca), la = 1, fa(Tn)), u
    }

    function Tn() {
        var n = Rn(),
            t = Dn() - n;
        t > 24 ? (isFinite(t) && (clearTimeout(ca), ca = setTimeout(Tn, t)), la = 0) : (la = 1, fa(Tn))
    }

    function Rn() {
        for (var n = Date.now(), t = oa; t;) n >= t.t && t.c(n - t.t) && (t.c = null), t = t.n;
        return n
    }

    function Dn() {
        for (var n, t = oa, e = 1 / 0; t;) t.c ? (t.t < e && (e = t.t), t = (n = t).n) : t = n ? n.n = t.n : oa = t.n;
        return aa = n, e
    }

    function Pn(n, t) {
        return t - (n ? Math.ceil(Math.log(n) / Math.LN10) : 1)
    }

    function Un(n, t) {
        var e = Math.pow(10, 3 * xo(8 - t));
        return {
            scale: t > 8 ? function(n) {
                return n / e
            } : function(n) {
                return n * e
            },
            symbol: n
        }
    }

    function jn(n) {
        var t = n.decimal,
            e = n.thousands,
            r = n.grouping,
            i = n.currency,
            u = r && e ? function(n, t) {
                for (var i = n.length, u = [], o = 0, a = r[0], l = 0; i > 0 && a > 0 && (l + a + 1 > t && (a = Math.max(1, t - l)), u.push(n.substring(i -= a, i + a)), !((l += a + 1) > t));) a = r[o = (o + 1) % r.length];
                return u.reverse().join(e)
            } : m;
        return function(n) {
            var e = ha.exec(n),
                r = e[1] || " ",
                o = e[2] || ">",
                a = e[3] || "-",
                l = e[4] || "",
                c = e[5],
                f = +e[6],
                s = e[7],
                h = e[8],
                p = e[9],
                g = 1,
                v = "",
                d = "",
                y = !1,
                m = !0;
            switch (h && (h = +h.substring(1)), (c || "0" === r && "=" === o) && (c = r = "0", o = "="), p) {
                case "n":
                    s = !0, p = "g";
                    break;
                case "%":
                    g = 100, d = "%", p = "f";
                    break;
                case "p":
                    g = 100, d = "%", p = "r";
                    break;
                case "b":
                case "o":
                case "x":
                case "X":
                    "#" === l && (v = "0" + p.toLowerCase());
                case "c":
                    m = !1;
                case "d":
                    y = !0, h = 0;
                    break;
                case "s":
                    g = -1, p = "r"
            }
            "$" === l && (v = i[0], d = i[1]), "r" != p || h || (p = "g"), null != h && ("g" == p ? h = Math.max(1, Math.min(21, h)) : "e" != p && "f" != p || (h = Math.max(0, Math.min(20, h)))), p = pa.get(p) || Fn;
            var M = c && s;
            return function(n) {
                var e = d;
                if (y && n % 1) return "";
                var i = 0 > n || 0 === n && 0 > 1 / n ? (n = -n, "-") : "-" === a ? "" : a;
                if (0 > g) {
                    var l = ao.formatPrefix(n, h);
                    n = l.scale(n), e = l.symbol + d
                } else n *= g;
                n = p(n, h);
                var x, b, _ = n.lastIndexOf(".");
                if (0 > _) {
                    var w = m ? n.lastIndexOf("e") : -1;
                    0 > w ? (x = n, b = "") : (x = n.substring(0, w), b = n.substring(w))
                } else x = n.substring(0, _), b = t + n.substring(_ + 1);
                !c && s && (x = u(x, 1 / 0));
                var S = v.length + x.length + b.length + (M ? 0 : i.length),
                    k = f > S ? new Array(S = f - S + 1).join(r) : "";
                return M && (x = u(k + x, k.length ? f - b.length : 1 / 0)), i += v, n = x + b, ("<" === o ? i + n + k : ">" === o ? k + i + n : "^" === o ? k.substring(0, S >>= 1) + i + n + k.substring(S) : i + (M ? n : k + n)) + e
            }
        }
    }

    function Fn(n) {
        return n + ""
    }

    function Hn() {
        this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0])
    }

    function On(n, t, e) {
        function r(t) {
            var e = n(t),
                r = u(e, 1);
            return r - t > t - e ? e : r
        }

        function i(e) {
            return t(e = n(new va(e - 1)), 1), e
        }

        function u(n, e) {
            return t(n = new va(+n), e), n
        }

        function o(n, r, u) {
            var o = i(n),
                a = [];
            if (u > 1)
                for (; r > o;) e(o) % u || a.push(new Date(+o)), t(o, 1);
            else
                for (; r > o;) a.push(new Date(+o)), t(o, 1);
            return a
        }

        function a(n, t, e) {
            try {
                va = Hn;
                var r = new Hn;
                return r._ = n, o(r, t, e)
            } finally {
                va = Date
            }
        }
        n.floor = n, n.round = r, n.ceil = i, n.offset = u, n.range = o;
        var l = n.utc = In(n);
        return l.floor = l, l.round = In(r), l.ceil = In(i), l.offset = In(u), l.range = a, n
    }

    function In(n) {
        return function(t, e) {
            try {
                va = Hn;
                var r = new Hn;
                return r._ = t, n(r, e)._
            } finally {
                va = Date
            }
        }
    }

    function Yn(n) {
        function t(n) {
            function t(t) {
                for (var e, i, u, o = [], a = -1, l = 0; ++a < r;) 37 === n.charCodeAt(a) && (o.push(n.slice(l, a)), null != (i = ya[e = n.charAt(++a)]) && (e = n.charAt(++a)), (u = A[e]) && (e = u(t, null == i ? "e" === e ? " " : "0" : i)), o.push(e), l = a + 1);
                return o.push(n.slice(l, a)), o.join("")
            }
            var r = n.length;
            return t.parse = function(t) {
                var r = {
                        y: 1900,
                        m: 0,
                        d: 1,
                        H: 0,
                        M: 0,
                        S: 0,
                        L: 0,
                        Z: null
                    },
                    i = e(r, n, t, 0);
                if (i != t.length) return null;
                "p" in r && (r.H = r.H % 12 + 12 * r.p);
                var u = null != r.Z && va !== Hn,
                    o = new(u ? Hn : va);
                return "j" in r ? o.setFullYear(r.y, 0, r.j) : "W" in r || "U" in r ? ("w" in r || (r.w = "W" in r ? 1 : 0), o.setFullYear(r.y, 0, 1), o.setFullYear(r.y, 0, "W" in r ? (r.w + 6) % 7 + 7 * r.W - (o.getDay() + 5) % 7 : r.w + 7 * r.U - (o.getDay() + 6) % 7)) : o.setFullYear(r.y, r.m, r.d), o.setHours(r.H + (r.Z / 100 | 0), r.M + r.Z % 100, r.S, r.L), u ? o._ : o
            }, t.toString = function() {
                return n
            }, t
        }

        function e(n, t, e, r) {
            for (var i, u, o, a = 0, l = t.length, c = e.length; l > a;) {
                if (r >= c) return -1;
                if (i = t.charCodeAt(a++), 37 === i) {
                    if (o = t.charAt(a++), u = C[o in ya ? t.charAt(a++) : o], !u || (r = u(n, e, r)) < 0) return -1
                } else if (i != e.charCodeAt(r++)) return -1
            }
            return r
        }

        function r(n, t, e) {
            _.lastIndex = 0;
            var r = _.exec(t.slice(e));
            return r ? (n.w = w.get(r[0].toLowerCase()), e + r[0].length) : -1
        }

        function i(n, t, e) {
            x.lastIndex = 0;
            var r = x.exec(t.slice(e));
            return r ? (n.w = b.get(r[0].toLowerCase()), e + r[0].length) : -1
        }

        function u(n, t, e) {
            N.lastIndex = 0;
            var r = N.exec(t.slice(e));
            return r ? (n.m = E.get(r[0].toLowerCase()), e + r[0].length) : -1
        }

        function o(n, t, e) {
            S.lastIndex = 0;
            var r = S.exec(t.slice(e));
            return r ? (n.m = k.get(r[0].toLowerCase()), e + r[0].length) : -1
        }

        function a(n, t, r) {
            return e(n, A.c.toString(), t, r)
        }

        function l(n, t, r) {
            return e(n, A.x.toString(), t, r)
        }

        function c(n, t, r) {
            return e(n, A.X.toString(), t, r)
        }

        function f(n, t, e) {
            var r = M.get(t.slice(e, e += 2).toLowerCase());
            return null == r ? -1 : (n.p = r, e)
        }
        var s = n.dateTime,
            h = n.date,
            p = n.time,
            g = n.periods,
            v = n.days,
            d = n.shortDays,
            y = n.months,
            m = n.shortMonths;
        t.utc = function(n) {
            function e(n) {
                try {
                    va = Hn;
                    var t = new va;
                    return t._ = n, r(t)
                } finally {
                    va = Date
                }
            }
            var r = t(n);
            return e.parse = function(n) {
                try {
                    va = Hn;
                    var t = r.parse(n);
                    return t && t._
                } finally {
                    va = Date
                }
            }, e.toString = r.toString, e
        }, t.multi = t.utc.multi = ct;
        var M = ao.map(),
            x = Vn(v),
            b = Xn(v),
            _ = Vn(d),
            w = Xn(d),
            S = Vn(y),
            k = Xn(y),
            N = Vn(m),
            E = Xn(m);
        g.forEach(function(n, t) {
            M.set(n.toLowerCase(), t)
        });
        var A = {
                a: function(n) {
                    return d[n.getDay()]
                },
                A: function(n) {
                    return v[n.getDay()]
                },
                b: function(n) {
                    return m[n.getMonth()]
                },
                B: function(n) {
                    return y[n.getMonth()]
                },
                c: t(s),
                d: function(n, t) {
                    return Zn(n.getDate(), t, 2)
                },
                e: function(n, t) {
                    return Zn(n.getDate(), t, 2)
                },
                H: function(n, t) {
                    return Zn(n.getHours(), t, 2)
                },
                I: function(n, t) {
                    return Zn(n.getHours() % 12 || 12, t, 2)
                },
                j: function(n, t) {
                    return Zn(1 + ga.dayOfYear(n), t, 3)
                },
                L: function(n, t) {
                    return Zn(n.getMilliseconds(), t, 3)
                },
                m: function(n, t) {
                    return Zn(n.getMonth() + 1, t, 2)
                },
                M: function(n, t) {
                    return Zn(n.getMinutes(), t, 2)
                },
                p: function(n) {
                    return g[+(n.getHours() >= 12)]
                },
                S: function(n, t) {
                    return Zn(n.getSeconds(), t, 2)
                },
                U: function(n, t) {
                    return Zn(ga.sundayOfYear(n), t, 2)
                },
                w: function(n) {
                    return n.getDay()
                },
                W: function(n, t) {
                    return Zn(ga.mondayOfYear(n), t, 2)
                },
                x: t(h),
                X: t(p),
                y: function(n, t) {
                    return Zn(n.getFullYear() % 100, t, 2)
                },
                Y: function(n, t) {
                    return Zn(n.getFullYear() % 1e4, t, 4)
                },
                Z: at,
                "%": function() {
                    return "%"
                }
            },
            C = {
                a: r,
                A: i,
                b: u,
                B: o,
                c: a,
                d: tt,
                e: tt,
                H: rt,
                I: rt,
                j: et,
                L: ot,
                m: nt,
                M: it,
                p: f,
                S: ut,
                U: Bn,
                w: $n,
                W: Wn,
                x: l,
                X: c,
                y: Gn,
                Y: Jn,
                Z: Kn,
                "%": lt
            };
        return t
    }

    function Zn(n, t, e) {
        var r = 0 > n ? "-" : "",
            i = (r ? -n : n) + "",
            u = i.length;
        return r + (e > u ? new Array(e - u + 1).join(t) + i : i)
    }

    function Vn(n) {
        return new RegExp("^(?:" + n.map(ao.requote).join("|") + ")", "i")
    }

    function Xn(n) {
        for (var t = new c, e = -1, r = n.length; ++e < r;) t.set(n[e].toLowerCase(), e);
        return t
    }

    function $n(n, t, e) {
        ma.lastIndex = 0;
        var r = ma.exec(t.slice(e, e + 1));
        return r ? (n.w = +r[0], e + r[0].length) : -1
    }

    function Bn(n, t, e) {
        ma.lastIndex = 0;
        var r = ma.exec(t.slice(e));
        return r ? (n.U = +r[0], e + r[0].length) : -1
    }

    function Wn(n, t, e) {
        ma.lastIndex = 0;
        var r = ma.exec(t.slice(e));
        return r ? (n.W = +r[0], e + r[0].length) : -1
    }

    function Jn(n, t, e) {
        ma.lastIndex = 0;
        var r = ma.exec(t.slice(e, e + 4));
        return r ? (n.y = +r[0], e + r[0].length) : -1
    }

    function Gn(n, t, e) {
        ma.lastIndex = 0;
        var r = ma.exec(t.slice(e, e + 2));
        return r ? (n.y = Qn(+r[0]), e + r[0].length) : -1
    }

    function Kn(n, t, e) {
        return /^[+-]\d{4}$/.test(t = t.slice(e, e + 5)) ? (n.Z = -t, e + 5) : -1
    }

    function Qn(n) {
        return n + (n > 68 ? 1900 : 2e3)
    }

    function nt(n, t, e) {
        ma.lastIndex = 0;
        var r = ma.exec(t.slice(e, e + 2));
        return r ? (n.m = r[0] - 1, e + r[0].length) : -1
    }

    function tt(n, t, e) {
        ma.lastIndex = 0;
        var r = ma.exec(t.slice(e, e + 2));
        return r ? (n.d = +r[0], e + r[0].length) : -1
    }

    function et(n, t, e) {
        ma.lastIndex = 0;
        var r = ma.exec(t.slice(e, e + 3));
        return r ? (n.j = +r[0], e + r[0].length) : -1
    }

    function rt(n, t, e) {
        ma.lastIndex = 0;
        var r = ma.exec(t.slice(e, e + 2));
        return r ? (n.H = +r[0], e + r[0].length) : -1
    }

    function it(n, t, e) {
        ma.lastIndex = 0;
        var r = ma.exec(t.slice(e, e + 2));
        return r ? (n.M = +r[0], e + r[0].length) : -1
    }

    function ut(n, t, e) {
        ma.lastIndex = 0;
        var r = ma.exec(t.slice(e, e + 2));
        return r ? (n.S = +r[0], e + r[0].length) : -1
    }

    function ot(n, t, e) {
        ma.lastIndex = 0;
        var r = ma.exec(t.slice(e, e + 3));
        return r ? (n.L = +r[0], e + r[0].length) : -1
    }

    function at(n) {
        var t = n.getTimezoneOffset(),
            e = t > 0 ? "-" : "+",
            r = xo(t) / 60 | 0,
            i = xo(t) % 60;
        return e + Zn(r, "0", 2) + Zn(i, "0", 2)
    }

    function lt(n, t, e) {
        Ma.lastIndex = 0;
        var r = Ma.exec(t.slice(e, e + 1));
        return r ? e + r[0].length : -1
    }

    function ct(n) {
        for (var t = n.length, e = -1; ++e < t;) n[e][0] = this(n[e][0]);
        return function(t) {
            for (var e = 0, r = n[e]; !r[1](t);) r = n[++e];
            return r[0](t)
        }
    }

    function ft() {}

    function st(n, t, e) {
        var r = e.s = n + t,
            i = r - n,
            u = r - i;
        e.t = n - u + (t - i)
    }

    function ht(n, t) {
        n && wa.hasOwnProperty(n.type) && wa[n.type](n, t)
    }

    function pt(n, t, e) {
        var r, i = -1,
            u = n.length - e;
        for (t.lineStart(); ++i < u;) r = n[i], t.point(r[0], r[1], r[2]);
        t.lineEnd()
    }

    function gt(n, t) {
        var e = -1,
            r = n.length;
        for (t.polygonStart(); ++e < r;) pt(n[e], t, 1);
        t.polygonEnd()
    }

    function vt() {
        function n(n, t) {
            n *= Yo, t = t * Yo / 2 + Fo / 4;
            var e = n - r,
                o = e >= 0 ? 1 : -1,
                a = o * e,
                l = Math.cos(t),
                c = Math.sin(t),
                f = u * c,
                s = i * l + f * Math.cos(a),
                h = f * o * Math.sin(a);
            ka.add(Math.atan2(h, s)), r = n, i = l, u = c
        }
        var t, e, r, i, u;
        Na.point = function(o, a) {
            Na.point = n, r = (t = o) * Yo, i = Math.cos(a = (e = a) * Yo / 2 + Fo / 4), u = Math.sin(a)
        }, Na.lineEnd = function() {
            n(t, e)
        }
    }

    function dt(n) {
        var t = n[0],
            e = n[1],
            r = Math.cos(e);
        return [r * Math.cos(t), r * Math.sin(t), Math.sin(e)]
    }

    function yt(n, t) {
        return n[0] * t[0] + n[1] * t[1] + n[2] * t[2]
    }

    function mt(n, t) {
        return [n[1] * t[2] - n[2] * t[1], n[2] * t[0] - n[0] * t[2], n[0] * t[1] - n[1] * t[0]]
    }

    function Mt(n, t) {
        n[0] += t[0], n[1] += t[1], n[2] += t[2]
    }

    function xt(n, t) {
        return [n[0] * t, n[1] * t, n[2] * t]
    }

    function bt(n) {
        var t = Math.sqrt(n[0] * n[0] + n[1] * n[1] + n[2] * n[2]);
        n[0] /= t, n[1] /= t, n[2] /= t
    }

    function _t(n) {
        return [Math.atan2(n[1], n[0]), tn(n[2])]
    }

    function wt(n, t) {
        return xo(n[0] - t[0]) < Uo && xo(n[1] - t[1]) < Uo
    }

    function St(n, t) {
        n *= Yo;
        var e = Math.cos(t *= Yo);
        kt(e * Math.cos(n), e * Math.sin(n), Math.sin(t))
    }

    function kt(n, t, e) {
        ++Ea, Ca += (n - Ca) / Ea, za += (t - za) / Ea, La += (e - La) / Ea
    }

    function Nt() {
        function n(n, i) {
            n *= Yo;
            var u = Math.cos(i *= Yo),
                o = u * Math.cos(n),
                a = u * Math.sin(n),
                l = Math.sin(i),
                c = Math.atan2(Math.sqrt((c = e * l - r * a) * c + (c = r * o - t * l) * c + (c = t * a - e * o) * c), t * o + e * a + r * l);
            Aa += c, qa += c * (t + (t = o)), Ta += c * (e + (e = a)), Ra += c * (r + (r = l)), kt(t, e, r)
        }
        var t, e, r;
        ja.point = function(i, u) {
            i *= Yo;
            var o = Math.cos(u *= Yo);
            t = o * Math.cos(i), e = o * Math.sin(i), r = Math.sin(u), ja.point = n, kt(t, e, r)
        }
    }

    function Et() {
        ja.point = St
    }

    function At() {
        function n(n, t) {
            n *= Yo;
            var e = Math.cos(t *= Yo),
                o = e * Math.cos(n),
                a = e * Math.sin(n),
                l = Math.sin(t),
                c = i * l - u * a,
                f = u * o - r * l,
                s = r * a - i * o,
                h = Math.sqrt(c * c + f * f + s * s),
                p = r * o + i * a + u * l,
                g = h && -nn(p) / h,
                v = Math.atan2(h, p);
            Da += g * c, Pa += g * f, Ua += g * s, Aa += v, qa += v * (r + (r = o)), Ta += v * (i + (i = a)), Ra += v * (u + (u = l)), kt(r, i, u)
        }
        var t, e, r, i, u;
        ja.point = function(o, a) {
            t = o, e = a, ja.point = n, o *= Yo;
            var l = Math.cos(a *= Yo);
            r = l * Math.cos(o), i = l * Math.sin(o), u = Math.sin(a), kt(r, i, u)
        }, ja.lineEnd = function() {
            n(t, e), ja.lineEnd = Et, ja.point = St
        }
    }

    function Ct(n, t) {
        function e(e, r) {
            return e = n(e, r), t(e[0], e[1])
        }
        return n.invert && t.invert && (e.invert = function(e, r) {
            return e = t.invert(e, r), e && n.invert(e[0], e[1])
        }), e
    }

    function zt() {
        return !0
    }

    function Lt(n, t, e, r, i) {
        var u = [],
            o = [];
        if (n.forEach(function(n) {
                if (!((t = n.length - 1) <= 0)) {
                    var t, e = n[0],
                        r = n[t];
                    if (wt(e, r)) {
                        i.lineStart();
                        for (var a = 0; t > a; ++a) i.point((e = n[a])[0], e[1]);
                        return void i.lineEnd()
                    }
                    var l = new Tt(e, n, null, !0),
                        c = new Tt(e, null, l, !1);
                    l.o = c, u.push(l), o.push(c), l = new Tt(r, n, null, !1), c = new Tt(r, null, l, !0), l.o = c, u.push(l), o.push(c)
                }
            }), o.sort(t), qt(u), qt(o), u.length) {
            for (var a = 0, l = e, c = o.length; c > a; ++a) o[a].e = l = !l;
            for (var f, s, h = u[0];;) {
                for (var p = h, g = !0; p.v;)
                    if ((p = p.n) === h) return;
                f = p.z, i.lineStart();
                do {
                    if (p.v = p.o.v = !0, p.e) {
                        if (g)
                            for (var a = 0, c = f.length; c > a; ++a) i.point((s = f[a])[0], s[1]);
                        else r(p.x, p.n.x, 1, i);
                        p = p.n
                    } else {
                        if (g) {
                            f = p.p.z;
                            for (var a = f.length - 1; a >= 0; --a) i.point((s = f[a])[0], s[1])
                        } else r(p.x, p.p.x, -1, i);
                        p = p.p
                    }
                    p = p.o, f = p.z, g = !g
                } while (!p.v);
                i.lineEnd()
            }
        }
    }

    function qt(n) {
        if (t = n.length) {
            for (var t, e, r = 0, i = n[0]; ++r < t;) i.n = e = n[r], e.p = i, i = e;
            i.n = e = n[0], e.p = i
        }
    }

    function Tt(n, t, e, r) {
        this.x = n, this.z = t, this.o = e, this.e = r, this.v = !1, this.n = this.p = null
    }

    function Rt(n, t, e, r) {
        return function(i, u) {
            function o(t, e) {
                var r = i(t, e);
                n(t = r[0], e = r[1]) && u.point(t, e)
            }

            function a(n, t) {
                var e = i(n, t);
                d.point(e[0], e[1])
            }

            function l() {
                m.point = a, d.lineStart()
            }

            function c() {
                m.point = o, d.lineEnd()
            }

            function f(n, t) {
                v.push([n, t]);
                var e = i(n, t);
                x.point(e[0], e[1])
            }

            function s() {
                x.lineStart(), v = []
            }

            function h() {
                f(v[0][0], v[0][1]), x.lineEnd();
                var n, t = x.clean(),
                    e = M.buffer(),
                    r = e.length;
                if (v.pop(), g.push(v), v = null, r)
                    if (1 & t) {
                        n = e[0];
                        var i, r = n.length - 1,
                            o = -1;
                        if (r > 0) {
                            for (b || (u.polygonStart(), b = !0), u.lineStart(); ++o < r;) u.point((i = n[o])[0], i[1]);
                            u.lineEnd()
                        }
                    } else r > 1 && 2 & t && e.push(e.pop().concat(e.shift())), p.push(e.filter(Dt))
            }
            var p, g, v, d = t(u),
                y = i.invert(r[0], r[1]),
                m = {
                    point: o,
                    lineStart: l,
                    lineEnd: c,
                    polygonStart: function() {
                        m.point = f, m.lineStart = s, m.lineEnd = h, p = [], g = []
                    },
                    polygonEnd: function() {
                        m.point = o, m.lineStart = l, m.lineEnd = c, p = ao.merge(p);
                        var n = Ot(y, g);
                        p.length ? (b || (u.polygonStart(), b = !0), Lt(p, Ut, n, e, u)) : n && (b || (u.polygonStart(), b = !0), u.lineStart(), e(null, null, 1, u), u.lineEnd()), b && (u.polygonEnd(), b = !1), p = g = null
                    },
                    sphere: function() {
                        u.polygonStart(), u.lineStart(), e(null, null, 1, u), u.lineEnd(), u.polygonEnd()
                    }
                },
                M = Pt(),
                x = t(M),
                b = !1;
            return m
        }
    }

    function Dt(n) {
        return n.length > 1
    }

    function Pt() {
        var n, t = [];
        return {
            lineStart: function() {
                t.push(n = [])
            },
            point: function(t, e) {
                n.push([t, e])
            },
            lineEnd: b,
            buffer: function() {
                var e = t;
                return t = [], n = null, e
            },
            rejoin: function() {
                t.length > 1 && t.push(t.pop().concat(t.shift()))
            }
        }
    }

    function Ut(n, t) {
        return ((n = n.x)[0] < 0 ? n[1] - Io - Uo : Io - n[1]) - ((t = t.x)[0] < 0 ? t[1] - Io - Uo : Io - t[1])
    }

    function jt(n) {
        var t, e = NaN,
            r = NaN,
            i = NaN;
        return {
            lineStart: function() {
                n.lineStart(), t = 1
            },
            point: function(u, o) {
                var a = u > 0 ? Fo : -Fo,
                    l = xo(u - e);
                xo(l - Fo) < Uo ? (n.point(e, r = (r + o) / 2 > 0 ? Io : -Io), n.point(i, r), n.lineEnd(), n.lineStart(), n.point(a, r), n.point(u, r), t = 0) : i !== a && l >= Fo && (xo(e - i) < Uo && (e -= i * Uo), xo(u - a) < Uo && (u -= a * Uo), r = Ft(e, r, u, o), n.point(i, r), n.lineEnd(), n.lineStart(), n.point(a, r), t = 0), n.point(e = u, r = o), i = a
            },
            lineEnd: function() {
                n.lineEnd(), e = r = NaN
            },
            clean: function() {
                return 2 - t
            }
        }
    }

    function Ft(n, t, e, r) {
        var i, u, o = Math.sin(n - e);
        return xo(o) > Uo ? Math.atan((Math.sin(t) * (u = Math.cos(r)) * Math.sin(e) - Math.sin(r) * (i = Math.cos(t)) * Math.sin(n)) / (i * u * o)) : (t + r) / 2
    }

    function Ht(n, t, e, r) {
        var i;
        if (null == n) i = e * Io, r.point(-Fo, i), r.point(0, i), r.point(Fo, i), r.point(Fo, 0), r.point(Fo, -i), r.point(0, -i), r.point(-Fo, -i), r.point(-Fo, 0), r.point(-Fo, i);
        else if (xo(n[0] - t[0]) > Uo) {
            var u = n[0] < t[0] ? Fo : -Fo;
            i = e * u / 2, r.point(-u, i), r.point(0, i), r.point(u, i)
        } else r.point(t[0], t[1])
    }

    function Ot(n, t) {
        var e = n[0],
            r = n[1],
            i = [Math.sin(e), -Math.cos(e), 0],
            u = 0,
            o = 0;
        ka.reset();
        for (var a = 0, l = t.length; l > a; ++a) {
            var c = t[a],
                f = c.length;
            if (f)
                for (var s = c[0], h = s[0], p = s[1] / 2 + Fo / 4, g = Math.sin(p), v = Math.cos(p), d = 1;;) {
                    d === f && (d = 0), n = c[d];
                    var y = n[0],
                        m = n[1] / 2 + Fo / 4,
                        M = Math.sin(m),
                        x = Math.cos(m),
                        b = y - h,
                        _ = b >= 0 ? 1 : -1,
                        w = _ * b,
                        S = w > Fo,
                        k = g * M;
                    if (ka.add(Math.atan2(k * _ * Math.sin(w), v * x + k * Math.cos(w))), u += S ? b + _ * Ho : b, S ^ h >= e ^ y >= e) {
                        var N = mt(dt(s), dt(n));
                        bt(N);
                        var E = mt(i, N);
                        bt(E);
                        var A = (S ^ b >= 0 ? -1 : 1) * tn(E[2]);
                        (r > A || r === A && (N[0] || N[1])) && (o += S ^ b >= 0 ? 1 : -1)
                    }
                    if (!d++) break;
                    h = y, g = M, v = x, s = n
                }
        }
        return (-Uo > u || Uo > u && -Uo > ka) ^ 1 & o
    }

    function It(n) {
        function t(n, t) {
            return Math.cos(n) * Math.cos(t) > u
        }

        function e(n) {
            var e, u, l, c, f;
            return {
                lineStart: function() {
                    c = l = !1, f = 1
                },
                point: function(s, h) {
                    var p, g = [s, h],
                        v = t(s, h),
                        d = o ? v ? 0 : i(s, h) : v ? i(s + (0 > s ? Fo : -Fo), h) : 0;
                    if (!e && (c = l = v) && n.lineStart(), v !== l && (p = r(e, g), (wt(e, p) || wt(g, p)) && (g[0] += Uo, g[1] += Uo, v = t(g[0], g[1]))), v !== l) f = 0, v ? (n.lineStart(), p = r(g, e), n.point(p[0], p[1])) : (p = r(e, g), n.point(p[0], p[1]), n.lineEnd()), e = p;
                    else if (a && e && o ^ v) {
                        var y;
                        d & u || !(y = r(g, e, !0)) || (f = 0, o ? (n.lineStart(), n.point(y[0][0], y[0][1]), n.point(y[1][0], y[1][1]), n.lineEnd()) : (n.point(y[1][0], y[1][1]), n.lineEnd(), n.lineStart(), n.point(y[0][0], y[0][1])))
                    }!v || e && wt(e, g) || n.point(g[0], g[1]), e = g, l = v, u = d
                },
                lineEnd: function() {
                    l && n.lineEnd(), e = null
                },
                clean: function() {
                    return f | (c && l) << 1
                }
            }
        }

        function r(n, t, e) {
            var r = dt(n),
                i = dt(t),
                o = [1, 0, 0],
                a = mt(r, i),
                l = yt(a, a),
                c = a[0],
                f = l - c * c;
            if (!f) return !e && n;
            var s = u * l / f,
                h = -u * c / f,
                p = mt(o, a),
                g = xt(o, s),
                v = xt(a, h);
            Mt(g, v);
            var d = p,
                y = yt(g, d),
                m = yt(d, d),
                M = y * y - m * (yt(g, g) - 1);
            if (!(0 > M)) {
                var x = Math.sqrt(M),
                    b = xt(d, (-y - x) / m);
                if (Mt(b, g), b = _t(b), !e) return b;
                var _, w = n[0],
                    S = t[0],
                    k = n[1],
                    N = t[1];
                w > S && (_ = w, w = S, S = _);
                var E = S - w,
                    A = xo(E - Fo) < Uo,
                    C = A || Uo > E;
                if (!A && k > N && (_ = k, k = N, N = _), C ? A ? k + N > 0 ^ b[1] < (xo(b[0] - w) < Uo ? k : N) : k <= b[1] && b[1] <= N : E > Fo ^ (w <= b[0] && b[0] <= S)) {
                    var z = xt(d, (-y + x) / m);
                    return Mt(z, g), [b, _t(z)]
                }
            }
        }

        function i(t, e) {
            var r = o ? n : Fo - n,
                i = 0;
            return -r > t ? i |= 1 : t > r && (i |= 2), -r > e ? i |= 4 : e > r && (i |= 8), i
        }
        var u = Math.cos(n),
            o = u > 0,
            a = xo(u) > Uo,
            l = ve(n, 6 * Yo);
        return Rt(t, e, l, o ? [0, -n] : [-Fo, n - Fo])
    }

    function Yt(n, t, e, r) {
        return function(i) {
            var u, o = i.a,
                a = i.b,
                l = o.x,
                c = o.y,
                f = a.x,
                s = a.y,
                h = 0,
                p = 1,
                g = f - l,
                v = s - c;
            if (u = n - l, g || !(u > 0)) {
                if (u /= g, 0 > g) {
                    if (h > u) return;
                    p > u && (p = u)
                } else if (g > 0) {
                    if (u > p) return;
                    u > h && (h = u)
                }
                if (u = e - l, g || !(0 > u)) {
                    if (u /= g, 0 > g) {
                        if (u > p) return;
                        u > h && (h = u)
                    } else if (g > 0) {
                        if (h > u) return;
                        p > u && (p = u)
                    }
                    if (u = t - c, v || !(u > 0)) {
                        if (u /= v, 0 > v) {
                            if (h > u) return;
                            p > u && (p = u)
                        } else if (v > 0) {
                            if (u > p) return;
                            u > h && (h = u)
                        }
                        if (u = r - c, v || !(0 > u)) {
                            if (u /= v, 0 > v) {
                                if (u > p) return;
                                u > h && (h = u)
                            } else if (v > 0) {
                                if (h > u) return;
                                p > u && (p = u)
                            }
                            return h > 0 && (i.a = {
                                x: l + h * g,
                                y: c + h * v
                            }), 1 > p && (i.b = {
                                x: l + p * g,
                                y: c + p * v
                            }), i
                        }
                    }
                }
            }
        }
    }

    function Zt(n, t, e, r) {
        function i(r, i) {
            return xo(r[0] - n) < Uo ? i > 0 ? 0 : 3 : xo(r[0] - e) < Uo ? i > 0 ? 2 : 1 : xo(r[1] - t) < Uo ? i > 0 ? 1 : 0 : i > 0 ? 3 : 2
        }

        function u(n, t) {
            return o(n.x, t.x)
        }

        function o(n, t) {
            var e = i(n, 1),
                r = i(t, 1);
            return e !== r ? e - r : 0 === e ? t[1] - n[1] : 1 === e ? n[0] - t[0] : 2 === e ? n[1] - t[1] : t[0] - n[0]
        }
        return function(a) {
            function l(n) {
                for (var t = 0, e = d.length, r = n[1], i = 0; e > i; ++i)
                    for (var u, o = 1, a = d[i], l = a.length, c = a[0]; l > o; ++o) u = a[o], c[1] <= r ? u[1] > r && Q(c, u, n) > 0 && ++t : u[1] <= r && Q(c, u, n) < 0 && --t, c = u;
                return 0 !== t
            }

            function c(u, a, l, c) {
                var f = 0,
                    s = 0;
                if (null == u || (f = i(u, l)) !== (s = i(a, l)) || o(u, a) < 0 ^ l > 0) {
                    do c.point(0 === f || 3 === f ? n : e, f > 1 ? r : t); while ((f = (f + l + 4) % 4) !== s)
                } else c.point(a[0], a[1])
            }

            function f(i, u) {
                return i >= n && e >= i && u >= t && r >= u
            }

            function s(n, t) {
                f(n, t) && a.point(n, t)
            }

            function h() {
                C.point = g, d && d.push(y = []), S = !0, w = !1, b = _ = NaN
            }

            function p() {
                v && (g(m, M), x && w && E.rejoin(), v.push(E.buffer())), C.point = s, w && a.lineEnd()
            }

            function g(n, t) {
                n = Math.max(-Ha, Math.min(Ha, n)), t = Math.max(-Ha, Math.min(Ha, t));
                var e = f(n, t);
                if (d && y.push([n, t]), S) m = n, M = t, x = e, S = !1, e && (a.lineStart(), a.point(n, t));
                else if (e && w) a.point(n, t);
                else {
                    var r = {
                        a: {
                            x: b,
                            y: _
                        },
                        b: {
                            x: n,
                            y: t
                        }
                    };
                    A(r) ? (w || (a.lineStart(), a.point(r.a.x, r.a.y)), a.point(r.b.x, r.b.y), e || a.lineEnd(), k = !1) : e && (a.lineStart(), a.point(n, t), k = !1)
                }
                b = n, _ = t, w = e
            }
            var v, d, y, m, M, x, b, _, w, S, k, N = a,
                E = Pt(),
                A = Yt(n, t, e, r),
                C = {
                    point: s,
                    lineStart: h,
                    lineEnd: p,
                    polygonStart: function() {
                        a = E, v = [], d = [], k = !0
                    },
                    polygonEnd: function() {
                        a = N, v = ao.merge(v);
                        var t = l([n, r]),
                            e = k && t,
                            i = v.length;
                        (e || i) && (a.polygonStart(), e && (a.lineStart(), c(null, null, 1, a), a.lineEnd()), i && Lt(v, u, t, c, a), a.polygonEnd()), v = d = y = null
                    }
                };
            return C
        }
    }

    function Vt(n) {
        var t = 0,
            e = Fo / 3,
            r = ae(n),
            i = r(t, e);
        return i.parallels = function(n) {
            return arguments.length ? r(t = n[0] * Fo / 180, e = n[1] * Fo / 180) : [t / Fo * 180, e / Fo * 180]
        }, i
    }

    function Xt(n, t) {
        function e(n, t) {
            var e = Math.sqrt(u - 2 * i * Math.sin(t)) / i;
            return [e * Math.sin(n *= i), o - e * Math.cos(n)]
        }
        var r = Math.sin(n),
            i = (r + Math.sin(t)) / 2,
            u = 1 + r * (2 * i - r),
            o = Math.sqrt(u) / i;
        return e.invert = function(n, t) {
            var e = o - t;
            return [Math.atan2(n, e) / i, tn((u - (n * n + e * e) * i * i) / (2 * i))]
        }, e
    }

    function $t() {
        function n(n, t) {
            Ia += i * n - r * t, r = n, i = t
        }
        var t, e, r, i;
        $a.point = function(u, o) {
            $a.point = n, t = r = u, e = i = o
        }, $a.lineEnd = function() {
            n(t, e)
        }
    }

    function Bt(n, t) {
        Ya > n && (Ya = n), n > Va && (Va = n), Za > t && (Za = t), t > Xa && (Xa = t)
    }

    function Wt() {
        function n(n, t) {
            o.push("M", n, ",", t, u)
        }

        function t(n, t) {
            o.push("M", n, ",", t), a.point = e
        }

        function e(n, t) {
            o.push("L", n, ",", t)
        }

        function r() {
            a.point = n
        }

        function i() {
            o.push("Z")
        }
        var u = Jt(4.5),
            o = [],
            a = {
                point: n,
                lineStart: function() {
                    a.point = t
                },
                lineEnd: r,
                polygonStart: function() {
                    a.lineEnd = i
                },
                polygonEnd: function() {
                    a.lineEnd = r, a.point = n
                },
                pointRadius: function(n) {
                    return u = Jt(n), a
                },
                result: function() {
                    if (o.length) {
                        var n = o.join("");
                        return o = [], n
                    }
                }
            };
        return a
    }

    function Jt(n) {
        return "m0," + n + "a" + n + "," + n + " 0 1,1 0," + -2 * n + "a" + n + "," + n + " 0 1,1 0," + 2 * n + "z"
    }

    function Gt(n, t) {
        Ca += n, za += t, ++La
    }

    function Kt() {
        function n(n, r) {
            var i = n - t,
                u = r - e,
                o = Math.sqrt(i * i + u * u);
            qa += o * (t + n) / 2, Ta += o * (e + r) / 2, Ra += o, Gt(t = n, e = r)
        }
        var t, e;
        Wa.point = function(r, i) {
            Wa.point = n, Gt(t = r, e = i)
        }
    }

    function Qt() {
        Wa.point = Gt
    }

    function ne() {
        function n(n, t) {
            var e = n - r,
                u = t - i,
                o = Math.sqrt(e * e + u * u);
            qa += o * (r + n) / 2, Ta += o * (i + t) / 2, Ra += o, o = i * n - r * t, Da += o * (r + n), Pa += o * (i + t), Ua += 3 * o, Gt(r = n, i = t)
        }
        var t, e, r, i;
        Wa.point = function(u, o) {
            Wa.point = n, Gt(t = r = u, e = i = o)
        }, Wa.lineEnd = function() {
            n(t, e)
        }
    }

    function te(n) {
        function t(t, e) {
            n.moveTo(t + o, e), n.arc(t, e, o, 0, Ho)
        }

        function e(t, e) {
            n.moveTo(t, e), a.point = r
        }

        function r(t, e) {
            n.lineTo(t, e)
        }

        function i() {
            a.point = t
        }

        function u() {
            n.closePath()
        }
        var o = 4.5,
            a = {
                point: t,
                lineStart: function() {
                    a.point = e
                },
                lineEnd: i,
                polygonStart: function() {
                    a.lineEnd = u
                },
                polygonEnd: function() {
                    a.lineEnd = i, a.point = t
                },
                pointRadius: function(n) {
                    return o = n, a
                },
                result: b
            };
        return a
    }

    function ee(n) {
        function t(n) {
            return (a ? r : e)(n)
        }

        function e(t) {
            return ue(t, function(e, r) {
                e = n(e, r), t.point(e[0], e[1])
            })
        }

        function r(t) {
            function e(e, r) {
                e = n(e, r), t.point(e[0], e[1])
            }

            function r() {
                M = NaN, S.point = u, t.lineStart()
            }

            function u(e, r) {
                var u = dt([e, r]),
                    o = n(e, r);
                i(M, x, m, b, _, w, M = o[0], x = o[1], m = e, b = u[0], _ = u[1], w = u[2], a, t), t.point(M, x)
            }

            function o() {
                S.point = e, t.lineEnd()
            }

            function l() {
                r(), S.point = c, S.lineEnd = f
            }

            function c(n, t) {
                u(s = n, h = t), p = M, g = x, v = b, d = _, y = w, S.point = u
            }

            function f() {
                i(M, x, m, b, _, w, p, g, s, v, d, y, a, t), S.lineEnd = o, o()
            }
            var s, h, p, g, v, d, y, m, M, x, b, _, w, S = {
                point: e,
                lineStart: r,
                lineEnd: o,
                polygonStart: function() {
                    t.polygonStart(), S.lineStart = l
                },
                polygonEnd: function() {
                    t.polygonEnd(), S.lineStart = r
                }
            };
            return S
        }

        function i(t, e, r, a, l, c, f, s, h, p, g, v, d, y) {
            var m = f - t,
                M = s - e,
                x = m * m + M * M;
            if (x > 4 * u && d--) {
                var b = a + p,
                    _ = l + g,
                    w = c + v,
                    S = Math.sqrt(b * b + _ * _ + w * w),
                    k = Math.asin(w /= S),
                    N = xo(xo(w) - 1) < Uo || xo(r - h) < Uo ? (r + h) / 2 : Math.atan2(_, b),
                    E = n(N, k),
                    A = E[0],
                    C = E[1],
                    z = A - t,
                    L = C - e,
                    q = M * z - m * L;
                (q * q / x > u || xo((m * z + M * L) / x - .5) > .3 || o > a * p + l * g + c * v) && (i(t, e, r, a, l, c, A, C, N, b /= S, _ /= S, w, d, y), y.point(A, C), i(A, C, N, b, _, w, f, s, h, p, g, v, d, y))
            }
        }
        var u = .5,
            o = Math.cos(30 * Yo),
            a = 16;
        return t.precision = function(n) {
            return arguments.length ? (a = (u = n * n) > 0 && 16, t) : Math.sqrt(u)
        }, t
    }

    function re(n) {
        var t = ee(function(t, e) {
            return n([t * Zo, e * Zo])
        });
        return function(n) {
            return le(t(n))
        }
    }

    function ie(n) {
        this.stream = n
    }

    function ue(n, t) {
        return {
            point: t,
            sphere: function() {
                n.sphere()
            },
            lineStart: function() {
                n.lineStart()
            },
            lineEnd: function() {
                n.lineEnd()
            },
            polygonStart: function() {
                n.polygonStart()
            },
            polygonEnd: function() {
                n.polygonEnd()
            }
        }
    }

    function oe(n) {
        return ae(function() {
            return n
        })()
    }

    function ae(n) {
        function t(n) {
            return n = a(n[0] * Yo, n[1] * Yo), [n[0] * h + l, c - n[1] * h]
        }

        function e(n) {
            return n = a.invert((n[0] - l) / h, (c - n[1]) / h), n && [n[0] * Zo, n[1] * Zo]
        }

        function r() {
            a = Ct(o = se(y, M, x), u);
            var n = u(v, d);
            return l = p - n[0] * h, c = g + n[1] * h, i()
        }

        function i() {
            return f && (f.valid = !1, f = null), t
        }
        var u, o, a, l, c, f, s = ee(function(n, t) {
                return n = u(n, t), [n[0] * h + l, c - n[1] * h]
            }),
            h = 150,
            p = 480,
            g = 250,
            v = 0,
            d = 0,
            y = 0,
            M = 0,
            x = 0,
            b = Fa,
            _ = m,
            w = null,
            S = null;
        return t.stream = function(n) {
                return f && (f.valid = !1), f = le(b(o, s(_(n)))), f.valid = !0, f
            }, t.clipAngle = function(n) {
                return arguments.length ? (b = null == n ? (w = n, Fa) : It((w = +n) * Yo), i()) : w
            }, t.clipExtent = function(n) {
                return arguments.length ? (S = n, _ = n ? Zt(n[0][0], n[0][1], n[1][0], n[1][1]) : m, i()) : S
            }, t.scale = function(n) {
                return arguments.length ? (h = +n, r()) : h
            }, t.translate = function(n) {
                return arguments.length ? (p = +n[0], g = +n[1], r()) : [p, g]
            }, t.center = function(n) {
                return arguments.length ? (v = n[0] % 360 * Yo, d = n[1] % 360 * Yo, r()) : [v * Zo, d * Zo]
            }, t.rotate = function(n) {
                return arguments.length ? (y = n[0] % 360 * Yo, M = n[1] % 360 * Yo, x = n.length > 2 ? n[2] % 360 * Yo : 0, r()) : [y * Zo, M * Zo, x * Zo]
            }, ao.rebind(t, s, "precision"),
            function() {
                return u = n.apply(this, arguments), t.invert = u.invert && e, r()
            }
    }

    function le(n) {
        return ue(n, function(t, e) {
            n.point(t * Yo, e * Yo)
        })
    }

    function ce(n, t) {
        return [n, t]
    }

    function fe(n, t) {
        return [n > Fo ? n - Ho : -Fo > n ? n + Ho : n, t]
    }

    function se(n, t, e) {
        return n ? t || e ? Ct(pe(n), ge(t, e)) : pe(n) : t || e ? ge(t, e) : fe
    }

    function he(n) {
        return function(t, e) {
            return t += n, [t > Fo ? t - Ho : -Fo > t ? t + Ho : t, e]
        }
    }

    function pe(n) {
        var t = he(n);
        return t.invert = he(-n), t
    }

    function ge(n, t) {
        function e(n, t) {
            var e = Math.cos(t),
                a = Math.cos(n) * e,
                l = Math.sin(n) * e,
                c = Math.sin(t),
                f = c * r + a * i;
            return [Math.atan2(l * u - f * o, a * r - c * i), tn(f * u + l * o)]
        }
        var r = Math.cos(n),
            i = Math.sin(n),
            u = Math.cos(t),
            o = Math.sin(t);
        return e.invert = function(n, t) {
            var e = Math.cos(t),
                a = Math.cos(n) * e,
                l = Math.sin(n) * e,
                c = Math.sin(t),
                f = c * u - l * o;
            return [Math.atan2(l * u + c * o, a * r + f * i), tn(f * r - a * i)]
        }, e
    }

    function ve(n, t) {
        var e = Math.cos(n),
            r = Math.sin(n);
        return function(i, u, o, a) {
            var l = o * t;
            null != i ? (i = de(e, i), u = de(e, u), (o > 0 ? u > i : i > u) && (i += o * Ho)) : (i = n + o * Ho, u = n - .5 * l);
            for (var c, f = i; o > 0 ? f > u : u > f; f -= l) a.point((c = _t([e, -r * Math.cos(f), -r * Math.sin(f)]))[0], c[1])
        }
    }

    function de(n, t) {
        var e = dt(t);
        e[0] -= n, bt(e);
        var r = nn(-e[1]);
        return ((-e[2] < 0 ? -r : r) + 2 * Math.PI - Uo) % (2 * Math.PI)
    }

    function ye(n, t, e) {
        var r = ao.range(n, t - Uo, e).concat(t);
        return function(n) {
            return r.map(function(t) {
                return [n, t]
            })
        }
    }

    function me(n, t, e) {
        var r = ao.range(n, t - Uo, e).concat(t);
        return function(n) {
            return r.map(function(t) {
                return [t, n]
            })
        }
    }

    function Me(n) {
        return n.source
    }

    function xe(n) {
        return n.target
    }

    function be(n, t, e, r) {
        var i = Math.cos(t),
            u = Math.sin(t),
            o = Math.cos(r),
            a = Math.sin(r),
            l = i * Math.cos(n),
            c = i * Math.sin(n),
            f = o * Math.cos(e),
            s = o * Math.sin(e),
            h = 2 * Math.asin(Math.sqrt(on(r - t) + i * o * on(e - n))),
            p = 1 / Math.sin(h),
            g = h ? function(n) {
                var t = Math.sin(n *= h) * p,
                    e = Math.sin(h - n) * p,
                    r = e * l + t * f,
                    i = e * c + t * s,
                    o = e * u + t * a;
                return [Math.atan2(i, r) * Zo, Math.atan2(o, Math.sqrt(r * r + i * i)) * Zo]
            } : function() {
                return [n * Zo, t * Zo]
            };
        return g.distance = h, g
    }

    function _e() {
        function n(n, i) {
            var u = Math.sin(i *= Yo),
                o = Math.cos(i),
                a = xo((n *= Yo) - t),
                l = Math.cos(a);
            Ja += Math.atan2(Math.sqrt((a = o * Math.sin(a)) * a + (a = r * u - e * o * l) * a), e * u + r * o * l), t = n, e = u, r = o
        }
        var t, e, r;
        Ga.point = function(i, u) {
            t = i * Yo, e = Math.sin(u *= Yo), r = Math.cos(u), Ga.point = n
        }, Ga.lineEnd = function() {
            Ga.point = Ga.lineEnd = b
        }
    }

    function we(n, t) {
        function e(t, e) {
            var r = Math.cos(t),
                i = Math.cos(e),
                u = n(r * i);
            return [u * i * Math.sin(t), u * Math.sin(e)]
        }
        return e.invert = function(n, e) {
            var r = Math.sqrt(n * n + e * e),
                i = t(r),
                u = Math.sin(i),
                o = Math.cos(i);
            return [Math.atan2(n * u, r * o), Math.asin(r && e * u / r)]
        }, e
    }

    function Se(n, t) {
        function e(n, t) {
            o > 0 ? -Io + Uo > t && (t = -Io + Uo) : t > Io - Uo && (t = Io - Uo);
            var e = o / Math.pow(i(t), u);
            return [e * Math.sin(u * n), o - e * Math.cos(u * n)]
        }
        var r = Math.cos(n),
            i = function(n) {
                return Math.tan(Fo / 4 + n / 2)
            },
            u = n === t ? Math.sin(n) : Math.log(r / Math.cos(t)) / Math.log(i(t) / i(n)),
            o = r * Math.pow(i(n), u) / u;
        return u ? (e.invert = function(n, t) {
            var e = o - t,
                r = K(u) * Math.sqrt(n * n + e * e);
            return [Math.atan2(n, e) / u, 2 * Math.atan(Math.pow(o / r, 1 / u)) - Io]
        }, e) : Ne
    }

    function ke(n, t) {
        function e(n, t) {
            var e = u - t;
            return [e * Math.sin(i * n), u - e * Math.cos(i * n)]
        }
        var r = Math.cos(n),
            i = n === t ? Math.sin(n) : (r - Math.cos(t)) / (t - n),
            u = r / i + n;
        return xo(i) < Uo ? ce : (e.invert = function(n, t) {
            var e = u - t;
            return [Math.atan2(n, e) / i, u - K(i) * Math.sqrt(n * n + e * e)]
        }, e)
    }

    function Ne(n, t) {
        return [n, Math.log(Math.tan(Fo / 4 + t / 2))]
    }

    function Ee(n) {
        var t, e = oe(n),
            r = e.scale,
            i = e.translate,
            u = e.clipExtent;
        return e.scale = function() {
            var n = r.apply(e, arguments);
            return n === e ? t ? e.clipExtent(null) : e : n
        }, e.translate = function() {
            var n = i.apply(e, arguments);
            return n === e ? t ? e.clipExtent(null) : e : n
        }, e.clipExtent = function(n) {
            var o = u.apply(e, arguments);
            if (o === e) {
                if (t = null == n) {
                    var a = Fo * r(),
                        l = i();
                    u([
                        [l[0] - a, l[1] - a],
                        [l[0] + a, l[1] + a]
                    ])
                }
            } else t && (o = null);
            return o
        }, e.clipExtent(null)
    }

    function Ae(n, t) {
        return [Math.log(Math.tan(Fo / 4 + t / 2)), -n]
    }

    function Ce(n) {
        return n[0]
    }

    function ze(n) {
        return n[1]
    }

    function Le(n) {
        for (var t = n.length, e = [0, 1], r = 2, i = 2; t > i; i++) {
            for (; r > 1 && Q(n[e[r - 2]], n[e[r - 1]], n[i]) <= 0;) --r;
            e[r++] = i
        }
        return e.slice(0, r)
    }

    function qe(n, t) {
        return n[0] - t[0] || n[1] - t[1]
    }

    function Te(n, t, e) {
        return (e[0] - t[0]) * (n[1] - t[1]) < (e[1] - t[1]) * (n[0] - t[0])
    }

    function Re(n, t, e, r) {
        var i = n[0],
            u = e[0],
            o = t[0] - i,
            a = r[0] - u,
            l = n[1],
            c = e[1],
            f = t[1] - l,
            s = r[1] - c,
            h = (a * (l - c) - s * (i - u)) / (s * o - a * f);
        return [i + h * o, l + h * f]
    }

    function De(n) {
        var t = n[0],
            e = n[n.length - 1];
        return !(t[0] - e[0] || t[1] - e[1])
    }

    function Pe() {
        rr(this), this.edge = this.site = this.circle = null
    }

    function Ue(n) {
        var t = cl.pop() || new Pe;
        return t.site = n, t
    }

    function je(n) {
        Be(n), ol.remove(n), cl.push(n), rr(n)
    }

    function Fe(n) {
        var t = n.circle,
            e = t.x,
            r = t.cy,
            i = {
                x: e,
                y: r
            },
            u = n.P,
            o = n.N,
            a = [n];
        je(n);
        for (var l = u; l.circle && xo(e - l.circle.x) < Uo && xo(r - l.circle.cy) < Uo;) u = l.P, a.unshift(l), je(l), l = u;
        a.unshift(l), Be(l);
        for (var c = o; c.circle && xo(e - c.circle.x) < Uo && xo(r - c.circle.cy) < Uo;) o = c.N, a.push(c), je(c), c = o;
        a.push(c), Be(c);
        var f, s = a.length;
        for (f = 1; s > f; ++f) c = a[f], l = a[f - 1], nr(c.edge, l.site, c.site, i);
        l = a[0], c = a[s - 1], c.edge = Ke(l.site, c.site, null, i), $e(l), $e(c)
    }

    function He(n) {
        for (var t, e, r, i, u = n.x, o = n.y, a = ol._; a;)
            if (r = Oe(a, o) - u, r > Uo) a = a.L;
            else {
                if (i = u - Ie(a, o), !(i > Uo)) {
                    r > -Uo ? (t = a.P, e = a) : i > -Uo ? (t = a, e = a.N) : t = e = a;
                    break
                }
                if (!a.R) {
                    t = a;
                    break
                }
                a = a.R
            }
        var l = Ue(n);
        if (ol.insert(t, l), t || e) {
            if (t === e) return Be(t), e = Ue(t.site), ol.insert(l, e), l.edge = e.edge = Ke(t.site, l.site), $e(t), void $e(e);
            if (!e) return void(l.edge = Ke(t.site, l.site));
            Be(t), Be(e);
            var c = t.site,
                f = c.x,
                s = c.y,
                h = n.x - f,
                p = n.y - s,
                g = e.site,
                v = g.x - f,
                d = g.y - s,
                y = 2 * (h * d - p * v),
                m = h * h + p * p,
                M = v * v + d * d,
                x = {
                    x: (d * m - p * M) / y + f,
                    y: (h * M - v * m) / y + s
                };
            nr(e.edge, c, g, x), l.edge = Ke(c, n, null, x), e.edge = Ke(n, g, null, x), $e(t), $e(e)
        }
    }

    function Oe(n, t) {
        var e = n.site,
            r = e.x,
            i = e.y,
            u = i - t;
        if (!u) return r;
        var o = n.P;
        if (!o) return -(1 / 0);
        e = o.site;
        var a = e.x,
            l = e.y,
            c = l - t;
        if (!c) return a;
        var f = a - r,
            s = 1 / u - 1 / c,
            h = f / c;
        return s ? (-h + Math.sqrt(h * h - 2 * s * (f * f / (-2 * c) - l + c / 2 + i - u / 2))) / s + r : (r + a) / 2
    }

    function Ie(n, t) {
        var e = n.N;
        if (e) return Oe(e, t);
        var r = n.site;
        return r.y === t ? r.x : 1 / 0
    }

    function Ye(n) {
        this.site = n, this.edges = []
    }

    function Ze(n) {
        for (var t, e, r, i, u, o, a, l, c, f, s = n[0][0], h = n[1][0], p = n[0][1], g = n[1][1], v = ul, d = v.length; d--;)
            if (u = v[d], u && u.prepare())
                for (a = u.edges, l = a.length, o = 0; l > o;) f = a[o].end(), r = f.x, i = f.y, c = a[++o % l].start(), t = c.x, e = c.y, (xo(r - t) > Uo || xo(i - e) > Uo) && (a.splice(o, 0, new tr(Qe(u.site, f, xo(r - s) < Uo && g - i > Uo ? {
                    x: s,
                    y: xo(t - s) < Uo ? e : g
                } : xo(i - g) < Uo && h - r > Uo ? {
                    x: xo(e - g) < Uo ? t : h,
                    y: g
                } : xo(r - h) < Uo && i - p > Uo ? {
                    x: h,
                    y: xo(t - h) < Uo ? e : p
                } : xo(i - p) < Uo && r - s > Uo ? {
                    x: xo(e - p) < Uo ? t : s,
                    y: p
                } : null), u.site, null)), ++l)
    }

    function Ve(n, t) {
        return t.angle - n.angle
    }

    function Xe() {
        rr(this), this.x = this.y = this.arc = this.site = this.cy = null
    }

    function $e(n) {
        var t = n.P,
            e = n.N;
        if (t && e) {
            var r = t.site,
                i = n.site,
                u = e.site;
            if (r !== u) {
                var o = i.x,
                    a = i.y,
                    l = r.x - o,
                    c = r.y - a,
                    f = u.x - o,
                    s = u.y - a,
                    h = 2 * (l * s - c * f);
                if (!(h >= -jo)) {
                    var p = l * l + c * c,
                        g = f * f + s * s,
                        v = (s * p - c * g) / h,
                        d = (l * g - f * p) / h,
                        s = d + a,
                        y = fl.pop() || new Xe;
                    y.arc = n, y.site = i, y.x = v + o, y.y = s + Math.sqrt(v * v + d * d), y.cy = s, n.circle = y;
                    for (var m = null, M = ll._; M;)
                        if (y.y < M.y || y.y === M.y && y.x <= M.x) {
                            if (!M.L) {
                                m = M.P;
                                break
                            }
                            M = M.L
                        } else {
                            if (!M.R) {
                                m = M;
                                break
                            }
                            M = M.R
                        }
                    ll.insert(m, y), m || (al = y)
                }
            }
        }
    }

    function Be(n) {
        var t = n.circle;
        t && (t.P || (al = t.N), ll.remove(t), fl.push(t), rr(t), n.circle = null)
    }

    function We(n) {
        for (var t, e = il, r = Yt(n[0][0], n[0][1], n[1][0], n[1][1]), i = e.length; i--;) t = e[i], (!Je(t, n) || !r(t) || xo(t.a.x - t.b.x) < Uo && xo(t.a.y - t.b.y) < Uo) && (t.a = t.b = null, e.splice(i, 1))
    }

    function Je(n, t) {
        var e = n.b;
        if (e) return !0;
        var r, i, u = n.a,
            o = t[0][0],
            a = t[1][0],
            l = t[0][1],
            c = t[1][1],
            f = n.l,
            s = n.r,
            h = f.x,
            p = f.y,
            g = s.x,
            v = s.y,
            d = (h + g) / 2,
            y = (p + v) / 2;
        if (v === p) {
            if (o > d || d >= a) return;
            if (h > g) {
                if (u) {
                    if (u.y >= c) return
                } else u = {
                    x: d,
                    y: l
                };
                e = {
                    x: d,
                    y: c
                }
            } else {
                if (u) {
                    if (u.y < l) return
                } else u = {
                    x: d,
                    y: c
                };
                e = {
                    x: d,
                    y: l
                }
            }
        } else if (r = (h - g) / (v - p), i = y - r * d, -1 > r || r > 1)
            if (h > g) {
                if (u) {
                    if (u.y >= c) return
                } else u = {
                    x: (l - i) / r,
                    y: l
                };
                e = {
                    x: (c - i) / r,
                    y: c
                }
            } else {
                if (u) {
                    if (u.y < l) return
                } else u = {
                    x: (c - i) / r,
                    y: c
                };
                e = {
                    x: (l - i) / r,
                    y: l
                }
            }
        else if (v > p) {
            if (u) {
                if (u.x >= a) return
            } else u = {
                x: o,
                y: r * o + i
            };
            e = {
                x: a,
                y: r * a + i
            }
        } else {
            if (u) {
                if (u.x < o) return
            } else u = {
                x: a,
                y: r * a + i
            };
            e = {
                x: o,
                y: r * o + i
            }
        }
        return n.a = u, n.b = e, !0
    }

    function Ge(n, t) {
        this.l = n, this.r = t, this.a = this.b = null
    }

    function Ke(n, t, e, r) {
        var i = new Ge(n, t);
        return il.push(i), e && nr(i, n, t, e), r && nr(i, t, n, r), ul[n.i].edges.push(new tr(i, n, t)), ul[t.i].edges.push(new tr(i, t, n)), i
    }

    function Qe(n, t, e) {
        var r = new Ge(n, null);
        return r.a = t, r.b = e, il.push(r), r
    }

    function nr(n, t, e, r) {
        n.a || n.b ? n.l === e ? n.b = r : n.a = r : (n.a = r, n.l = t, n.r = e)
    }

    function tr(n, t, e) {
        var r = n.a,
            i = n.b;
        this.edge = n, this.site = t, this.angle = e ? Math.atan2(e.y - t.y, e.x - t.x) : n.l === t ? Math.atan2(i.x - r.x, r.y - i.y) : Math.atan2(r.x - i.x, i.y - r.y)
    }

    function er() {
        this._ = null
    }

    function rr(n) {
        n.U = n.C = n.L = n.R = n.P = n.N = null
    }

    function ir(n, t) {
        var e = t,
            r = t.R,
            i = e.U;
        i ? i.L === e ? i.L = r : i.R = r : n._ = r, r.U = i, e.U = r, e.R = r.L, e.R && (e.R.U = e), r.L = e
    }

    function ur(n, t) {
        var e = t,
            r = t.L,
            i = e.U;
        i ? i.L === e ? i.L = r : i.R = r : n._ = r, r.U = i, e.U = r, e.L = r.R, e.L && (e.L.U = e), r.R = e
    }

    function or(n) {
        for (; n.L;) n = n.L;
        return n
    }

    function ar(n, t) {
        var e, r, i, u = n.sort(lr).pop();
        for (il = [], ul = new Array(n.length), ol = new er, ll = new er;;)
            if (i = al, u && (!i || u.y < i.y || u.y === i.y && u.x < i.x)) u.x === e && u.y === r || (ul[u.i] = new Ye(u), He(u), e = u.x, r = u.y), u = n.pop();
            else {
                if (!i) break;
                Fe(i.arc)
            }
        t && (We(t), Ze(t));
        var o = {
            cells: ul,
            edges: il
        };
        return ol = ll = il = ul = null, o
    }

    function lr(n, t) {
        return t.y - n.y || t.x - n.x
    }

    function cr(n, t, e) {
        return (n.x - e.x) * (t.y - n.y) - (n.x - t.x) * (e.y - n.y)
    }

    function fr(n) {
        return n.x
    }

    function sr(n) {
        return n.y
    }

    function hr() {
        return {
            leaf: !0,
            nodes: [],
            point: null,
            x: null,
            y: null
        }
    }

    function pr(n, t, e, r, i, u) {
        if (!n(t, e, r, i, u)) {
            var o = .5 * (e + i),
                a = .5 * (r + u),
                l = t.nodes;
            l[0] && pr(n, l[0], e, r, o, a), l[1] && pr(n, l[1], o, r, i, a), l[2] && pr(n, l[2], e, a, o, u), l[3] && pr(n, l[3], o, a, i, u)
        }
    }

    function gr(n, t, e, r, i, u, o) {
        var a, l = 1 / 0;
        return function c(n, f, s, h, p) {
            if (!(f > u || s > o || r > h || i > p)) {
                if (g = n.point) {
                    var g, v = t - n.x,
                        d = e - n.y,
                        y = v * v + d * d;
                    if (l > y) {
                        var m = Math.sqrt(l = y);
                        r = t - m, i = e - m, u = t + m, o = e + m, a = g
                    }
                }
                for (var M = n.nodes, x = .5 * (f + h), b = .5 * (s + p), _ = t >= x, w = e >= b, S = w << 1 | _, k = S + 4; k > S; ++S)
                    if (n = M[3 & S]) switch (3 & S) {
                        case 0:
                            c(n, f, s, x, b);
                            break;
                        case 1:
                            c(n, x, s, h, b);
                            break;
                        case 2:
                            c(n, f, b, x, p);
                            break;
                        case 3:
                            c(n, x, b, h, p)
                    }
            }
        }(n, r, i, u, o), a
    }

    function vr(n, t) {
        n = ao.rgb(n), t = ao.rgb(t);
        var e = n.r,
            r = n.g,
            i = n.b,
            u = t.r - e,
            o = t.g - r,
            a = t.b - i;
        return function(n) {
            return "#" + bn(Math.round(e + u * n)) + bn(Math.round(r + o * n)) + bn(Math.round(i + a * n))
        }
    }

    function dr(n, t) {
        var e, r = {},
            i = {};
        for (e in n) e in t ? r[e] = Mr(n[e], t[e]) : i[e] = n[e];
        for (e in t) e in n || (i[e] = t[e]);
        return function(n) {
            for (e in r) i[e] = r[e](n);
            return i
        }
    }

    function yr(n, t) {
        return n = +n, t = +t,
            function(e) {
                return n * (1 - e) + t * e
            }
    }

    function mr(n, t) {
        var e, r, i, u = hl.lastIndex = pl.lastIndex = 0,
            o = -1,
            a = [],
            l = [];
        for (n += "", t += "";
            (e = hl.exec(n)) && (r = pl.exec(t));)(i = r.index) > u && (i = t.slice(u, i), a[o] ? a[o] += i : a[++o] = i), (e = e[0]) === (r = r[0]) ? a[o] ? a[o] += r : a[++o] = r : (a[++o] = null, l.push({
            i: o,
            x: yr(e, r)
        })), u = pl.lastIndex;
        return u < t.length && (i = t.slice(u), a[o] ? a[o] += i : a[++o] = i), a.length < 2 ? l[0] ? (t = l[0].x, function(n) {
            return t(n) + ""
        }) : function() {
            return t
        } : (t = l.length, function(n) {
            for (var e, r = 0; t > r; ++r) a[(e = l[r]).i] = e.x(n);
            return a.join("")
        })
    }

    function Mr(n, t) {
        for (var e, r = ao.interpolators.length; --r >= 0 && !(e = ao.interpolators[r](n, t)););
        return e
    }

    function xr(n, t) {
        var e, r = [],
            i = [],
            u = n.length,
            o = t.length,
            a = Math.min(n.length, t.length);
        for (e = 0; a > e; ++e) r.push(Mr(n[e], t[e]));
        for (; u > e; ++e) i[e] = n[e];
        for (; o > e; ++e) i[e] = t[e];
        return function(n) {
            for (e = 0; a > e; ++e) i[e] = r[e](n);
            return i
        }
    }

    function br(n) {
        return function(t) {
            return 0 >= t ? 0 : t >= 1 ? 1 : n(t)
        }
    }

    function _r(n) {
        return function(t) {
            return 1 - n(1 - t)
        }
    }

    function wr(n) {
        return function(t) {
            return .5 * (.5 > t ? n(2 * t) : 2 - n(2 - 2 * t))
        }
    }

    function Sr(n) {
        return n * n
    }

    function kr(n) {
        return n * n * n
    }

    function Nr(n) {
        if (0 >= n) return 0;
        if (n >= 1) return 1;
        var t = n * n,
            e = t * n;
        return 4 * (.5 > n ? e : 3 * (n - t) + e - .75)
    }

    function Er(n) {
        return function(t) {
            return Math.pow(t, n)
        }
    }

    function Ar(n) {
        return 1 - Math.cos(n * Io)
    }

    function Cr(n) {
        return Math.pow(2, 10 * (n - 1))
    }

    function zr(n) {
        return 1 - Math.sqrt(1 - n * n)
    }

    function Lr(n, t) {
        var e;
        return arguments.length < 2 && (t = .45), arguments.length ? e = t / Ho * Math.asin(1 / n) : (n = 1, e = t / 4),
            function(r) {
                return 1 + n * Math.pow(2, -10 * r) * Math.sin((r - e) * Ho / t)
            }
    }

    function qr(n) {
        return n || (n = 1.70158),
            function(t) {
                return t * t * ((n + 1) * t - n)
            }
    }

    function Tr(n) {
        return 1 / 2.75 > n ? 7.5625 * n * n : 2 / 2.75 > n ? 7.5625 * (n -= 1.5 / 2.75) * n + .75 : 2.5 / 2.75 > n ? 7.5625 * (n -= 2.25 / 2.75) * n + .9375 : 7.5625 * (n -= 2.625 / 2.75) * n + .984375
    }

    function Rr(n, t) {
        n = ao.hcl(n), t = ao.hcl(t);
        var e = n.h,
            r = n.c,
            i = n.l,
            u = t.h - e,
            o = t.c - r,
            a = t.l - i;
        return isNaN(o) && (o = 0, r = isNaN(r) ? t.c : r), isNaN(u) ? (u = 0, e = isNaN(e) ? t.h : e) : u > 180 ? u -= 360 : -180 > u && (u += 360),
            function(n) {
                return sn(e + u * n, r + o * n, i + a * n) + ""
            }
    }

    function Dr(n, t) {
        n = ao.hsl(n), t = ao.hsl(t);
        var e = n.h,
            r = n.s,
            i = n.l,
            u = t.h - e,
            o = t.s - r,
            a = t.l - i;
        return isNaN(o) && (o = 0, r = isNaN(r) ? t.s : r), isNaN(u) ? (u = 0, e = isNaN(e) ? t.h : e) : u > 180 ? u -= 360 : -180 > u && (u += 360),
            function(n) {
                return cn(e + u * n, r + o * n, i + a * n) + ""
            }
    }

    function Pr(n, t) {
        n = ao.lab(n), t = ao.lab(t);
        var e = n.l,
            r = n.a,
            i = n.b,
            u = t.l - e,
            o = t.a - r,
            a = t.b - i;
        return function(n) {
            return pn(e + u * n, r + o * n, i + a * n) + ""
        }
    }

    function Ur(n, t) {
        return t -= n,
            function(e) {
                return Math.round(n + t * e)
            }
    }

    function jr(n) {
        var t = [n.a, n.b],
            e = [n.c, n.d],
            r = Hr(t),
            i = Fr(t, e),
            u = Hr(Or(e, t, -i)) || 0;
        t[0] * e[1] < e[0] * t[1] && (t[0] *= -1, t[1] *= -1, r *= -1, i *= -1), this.rotate = (r ? Math.atan2(t[1], t[0]) : Math.atan2(-e[0], e[1])) * Zo, this.translate = [n.e, n.f], this.scale = [r, u], this.skew = u ? Math.atan2(i, u) * Zo : 0
    }

    function Fr(n, t) {
        return n[0] * t[0] + n[1] * t[1]
    }

    function Hr(n) {
        var t = Math.sqrt(Fr(n, n));
        return t && (n[0] /= t, n[1] /= t), t
    }

    function Or(n, t, e) {
        return n[0] += e * t[0], n[1] += e * t[1], n
    }

    function Ir(n) {
        return n.length ? n.pop() + "," : ""
    }

    function Yr(n, t, e, r) {
        if (n[0] !== t[0] || n[1] !== t[1]) {
            var i = e.push("translate(", null, ",", null, ")");
            r.push({
                i: i - 4,
                x: yr(n[0], t[0])
            }, {
                i: i - 2,
                x: yr(n[1], t[1])
            })
        } else(t[0] || t[1]) && e.push("translate(" + t + ")")
    }

    function Zr(n, t, e, r) {
        n !== t ? (n - t > 180 ? t += 360 : t - n > 180 && (n += 360), r.push({
            i: e.push(Ir(e) + "rotate(", null, ")") - 2,
            x: yr(n, t)
        })) : t && e.push(Ir(e) + "rotate(" + t + ")")
    }

    function Vr(n, t, e, r) {
        n !== t ? r.push({
            i: e.push(Ir(e) + "skewX(", null, ")") - 2,
            x: yr(n, t)
        }) : t && e.push(Ir(e) + "skewX(" + t + ")")
    }

    function Xr(n, t, e, r) {
        if (n[0] !== t[0] || n[1] !== t[1]) {
            var i = e.push(Ir(e) + "scale(", null, ",", null, ")");
            r.push({
                i: i - 4,
                x: yr(n[0], t[0])
            }, {
                i: i - 2,
                x: yr(n[1], t[1])
            })
        } else 1 === t[0] && 1 === t[1] || e.push(Ir(e) + "scale(" + t + ")")
    }

    function $r(n, t) {
        var e = [],
            r = [];
        return n = ao.transform(n), t = ao.transform(t), Yr(n.translate, t.translate, e, r), Zr(n.rotate, t.rotate, e, r), Vr(n.skew, t.skew, e, r), Xr(n.scale, t.scale, e, r), n = t = null,
            function(n) {
                for (var t, i = -1, u = r.length; ++i < u;) e[(t = r[i]).i] = t.x(n);
                return e.join("")
            }
    }

    function Br(n, t) {
        return t = (t -= n = +n) || 1 / t,
            function(e) {
                return (e - n) / t
            }
    }

    function Wr(n, t) {
        return t = (t -= n = +n) || 1 / t,
            function(e) {
                return Math.max(0, Math.min(1, (e - n) / t))
            }
    }

    function Jr(n) {
        for (var t = n.source, e = n.target, r = Kr(t, e), i = [t]; t !== r;) t = t.parent, i.push(t);
        for (var u = i.length; e !== r;) i.splice(u, 0, e), e = e.parent;
        return i
    }

    function Gr(n) {
        for (var t = [], e = n.parent; null != e;) t.push(n), n = e, e = e.parent;
        return t.push(n), t
    }

    function Kr(n, t) {
        if (n === t) return n;
        for (var e = Gr(n), r = Gr(t), i = e.pop(), u = r.pop(), o = null; i === u;) o = i, i = e.pop(), u = r.pop();
        return o
    }

    function Qr(n) {
        n.fixed |= 2
    }

    function ni(n) {
        n.fixed &= -7
    }

    function ti(n) {
        n.fixed |= 4, n.px = n.x, n.py = n.y
    }

    function ei(n) {
        n.fixed &= -5
    }

    function ri(n, t, e) {
        var r = 0,
            i = 0;
        if (n.charge = 0, !n.leaf)
            for (var u, o = n.nodes, a = o.length, l = -1; ++l < a;) u = o[l], null != u && (ri(u, t, e), n.charge += u.charge, r += u.charge * u.cx, i += u.charge * u.cy);
        if (n.point) {
            n.leaf || (n.point.x += Math.random() - .5, n.point.y += Math.random() - .5);
            var c = t * e[n.point.index];
            n.charge += n.pointCharge = c, r += c * n.point.x, i += c * n.point.y
        }
        n.cx = r / n.charge, n.cy = i / n.charge
    }

    function ii(n, t) {
        return ao.rebind(n, t, "sort", "children", "value"), n.nodes = n, n.links = fi, n
    }

    function ui(n, t) {
        for (var e = [n]; null != (n = e.pop());)
            if (t(n), (i = n.children) && (r = i.length))
                for (var r, i; --r >= 0;) e.push(i[r])
    }

    function oi(n, t) {
        for (var e = [n], r = []; null != (n = e.pop());)
            if (r.push(n), (u = n.children) && (i = u.length))
                for (var i, u, o = -1; ++o < i;) e.push(u[o]);
        for (; null != (n = r.pop());) t(n)
    }

    function ai(n) {
        return n.children
    }

    function li(n) {
        return n.value
    }

    function ci(n, t) {
        return t.value - n.value
    }

    function fi(n) {
        return ao.merge(n.map(function(n) {
            return (n.children || []).map(function(t) {
                return {
                    source: n,
                    target: t
                }
            })
        }))
    }

    function si(n) {
        return n.x
    }

    function hi(n) {
        return n.y
    }

    function pi(n, t, e) {
        n.y0 = t, n.y = e
    }

    function gi(n) {
        return ao.range(n.length)
    }

    function vi(n) {
        for (var t = -1, e = n[0].length, r = []; ++t < e;) r[t] = 0;
        return r
    }

    function di(n) {
        for (var t, e = 1, r = 0, i = n[0][1], u = n.length; u > e; ++e)(t = n[e][1]) > i && (r = e, i = t);
        return r
    }

    function yi(n) {
        return n.reduce(mi, 0)
    }

    function mi(n, t) {
        return n + t[1]
    }

    function Mi(n, t) {
        return xi(n, Math.ceil(Math.log(t.length) / Math.LN2 + 1))
    }

    function xi(n, t) {
        for (var e = -1, r = +n[0], i = (n[1] - r) / t, u = []; ++e <= t;) u[e] = i * e + r;
        return u
    }

    function bi(n) {
        return [ao.min(n), ao.max(n)]
    }

    function _i(n, t) {
        return n.value - t.value
    }

    function wi(n, t) {
        var e = n._pack_next;
        n._pack_next = t, t._pack_prev = n, t._pack_next = e, e._pack_prev = t
    }

    function Si(n, t) {
        n._pack_next = t, t._pack_prev = n
    }

    function ki(n, t) {
        var e = t.x - n.x,
            r = t.y - n.y,
            i = n.r + t.r;
        return .999 * i * i > e * e + r * r
    }

    function Ni(n) {
        function t(n) {
            f = Math.min(n.x - n.r, f), s = Math.max(n.x + n.r, s), h = Math.min(n.y - n.r, h), p = Math.max(n.y + n.r, p)
        }
        if ((e = n.children) && (c = e.length)) {
            var e, r, i, u, o, a, l, c, f = 1 / 0,
                s = -(1 / 0),
                h = 1 / 0,
                p = -(1 / 0);
            if (e.forEach(Ei), r = e[0], r.x = -r.r, r.y = 0, t(r), c > 1 && (i = e[1], i.x = i.r, i.y = 0, t(i), c > 2))
                for (u = e[2], zi(r, i, u), t(u), wi(r, u), r._pack_prev = u, wi(u, i), i = r._pack_next, o = 3; c > o; o++) {
                    zi(r, i, u = e[o]);
                    var g = 0,
                        v = 1,
                        d = 1;
                    for (a = i._pack_next; a !== i; a = a._pack_next, v++)
                        if (ki(a, u)) {
                            g = 1;
                            break
                        }
                    if (1 == g)
                        for (l = r._pack_prev; l !== a._pack_prev && !ki(l, u); l = l._pack_prev, d++);
                    g ? (d > v || v == d && i.r < r.r ? Si(r, i = a) : Si(r = l, i), o--) : (wi(r, u), i = u, t(u))
                }
            var y = (f + s) / 2,
                m = (h + p) / 2,
                M = 0;
            for (o = 0; c > o; o++) u = e[o], u.x -= y, u.y -= m, M = Math.max(M, u.r + Math.sqrt(u.x * u.x + u.y * u.y));
            n.r = M, e.forEach(Ai)
        }
    }

    function Ei(n) {
        n._pack_next = n._pack_prev = n
    }

    function Ai(n) {
        delete n._pack_next, delete n._pack_prev
    }

    function Ci(n, t, e, r) {
        var i = n.children;
        if (n.x = t += r * n.x, n.y = e += r * n.y, n.r *= r, i)
            for (var u = -1, o = i.length; ++u < o;) Ci(i[u], t, e, r)
    }

    function zi(n, t, e) {
        var r = n.r + e.r,
            i = t.x - n.x,
            u = t.y - n.y;
        if (r && (i || u)) {
            var o = t.r + e.r,
                a = i * i + u * u;
            o *= o, r *= r;
            var l = .5 + (r - o) / (2 * a),
                c = Math.sqrt(Math.max(0, 2 * o * (r + a) - (r -= a) * r - o * o)) / (2 * a);
            e.x = n.x + l * i + c * u, e.y = n.y + l * u - c * i
        } else e.x = n.x + r, e.y = n.y
    }

    function Li(n, t) {
        return n.parent == t.parent ? 1 : 2
    }

    function qi(n) {
        var t = n.children;
        return t.length ? t[0] : n.t
    }

    function Ti(n) {
        var t, e = n.children;
        return (t = e.length) ? e[t - 1] : n.t
    }

    function Ri(n, t, e) {
        var r = e / (t.i - n.i);
        t.c -= r, t.s += e, n.c += r, t.z += e, t.m += e
    }

    function Di(n) {
        for (var t, e = 0, r = 0, i = n.children, u = i.length; --u >= 0;) t = i[u], t.z += e, t.m += e, e += t.s + (r += t.c)
    }

    function Pi(n, t, e) {
        return n.a.parent === t.parent ? n.a : e
    }

    function Ui(n) {
        return 1 + ao.max(n, function(n) {
            return n.y
        })
    }

    function ji(n) {
        return n.reduce(function(n, t) {
            return n + t.x
        }, 0) / n.length
    }

    function Fi(n) {
        var t = n.children;
        return t && t.length ? Fi(t[0]) : n
    }

    function Hi(n) {
        var t, e = n.children;
        return e && (t = e.length) ? Hi(e[t - 1]) : n
    }

    function Oi(n) {
        return {
            x: n.x,
            y: n.y,
            dx: n.dx,
            dy: n.dy
        }
    }

    function Ii(n, t) {
        var e = n.x + t[3],
            r = n.y + t[0],
            i = n.dx - t[1] - t[3],
            u = n.dy - t[0] - t[2];
        return 0 > i && (e += i / 2, i = 0), 0 > u && (r += u / 2, u = 0), {
            x: e,
            y: r,
            dx: i,
            dy: u
        }
    }

    function Yi(n) {
        var t = n[0],
            e = n[n.length - 1];
        return e > t ? [t, e] : [e, t]
    }

    function Zi(n) {
        return n.rangeExtent ? n.rangeExtent() : Yi(n.range())
    }

    function Vi(n, t, e, r) {
        var i = e(n[0], n[1]),
            u = r(t[0], t[1]);
        return function(n) {
            return u(i(n))
        }
    }

    function Xi(n, t) {
        var e, r = 0,
            i = n.length - 1,
            u = n[r],
            o = n[i];
        return u > o && (e = r, r = i, i = e, e = u, u = o, o = e), n[r] = t.floor(u), n[i] = t.ceil(o), n
    }

    function $i(n) {
        return n ? {
            floor: function(t) {
                return Math.floor(t / n) * n
            },
            ceil: function(t) {
                return Math.ceil(t / n) * n
            }
        } : Sl
    }

    function Bi(n, t, e, r) {
        var i = [],
            u = [],
            o = 0,
            a = Math.min(n.length, t.length) - 1;
        for (n[a] < n[0] && (n = n.slice().reverse(), t = t.slice().reverse()); ++o <= a;) i.push(e(n[o - 1], n[o])), u.push(r(t[o - 1], t[o]));
        return function(t) {
            var e = ao.bisect(n, t, 1, a) - 1;
            return u[e](i[e](t))
        }
    }

    function Wi(n, t, e, r) {
        function i() {
            var i = Math.min(n.length, t.length) > 2 ? Bi : Vi,
                l = r ? Wr : Br;
            return o = i(n, t, l, e), a = i(t, n, l, Mr), u
        }

        function u(n) {
            return o(n)
        }
        var o, a;
        return u.invert = function(n) {
            return a(n)
        }, u.domain = function(t) {
            return arguments.length ? (n = t.map(Number), i()) : n
        }, u.range = function(n) {
            return arguments.length ? (t = n, i()) : t
        }, u.rangeRound = function(n) {
            return u.range(n).interpolate(Ur)
        }, u.clamp = function(n) {
            return arguments.length ? (r = n, i()) : r
        }, u.interpolate = function(n) {
            return arguments.length ? (e = n, i()) : e
        }, u.ticks = function(t) {
            return Qi(n, t)
        }, u.tickFormat = function(t, e) {
            return nu(n, t, e)
        }, u.nice = function(t) {
            return Gi(n, t), i()
        }, u.copy = function() {
            return Wi(n, t, e, r)
        }, i()
    }

    function Ji(n, t) {
        return ao.rebind(n, t, "range", "rangeRound", "interpolate", "clamp")
    }

    function Gi(n, t) {
        return Xi(n, $i(Ki(n, t)[2])), Xi(n, $i(Ki(n, t)[2])), n
    }

    function Ki(n, t) {
        null == t && (t = 10);
        var e = Yi(n),
            r = e[1] - e[0],
            i = Math.pow(10, Math.floor(Math.log(r / t) / Math.LN10)),
            u = t / r * i;
        return .15 >= u ? i *= 10 : .35 >= u ? i *= 5 : .75 >= u && (i *= 2), e[0] = Math.ceil(e[0] / i) * i, e[1] = Math.floor(e[1] / i) * i + .5 * i, e[2] = i, e
    }

    function Qi(n, t) {
        return ao.range.apply(ao, Ki(n, t))
    }

    function nu(n, t, e) {
        var r = Ki(n, t);
        if (e) {
            var i = ha.exec(e);
            if (i.shift(), "s" === i[8]) {
                var u = ao.formatPrefix(Math.max(xo(r[0]), xo(r[1])));
                return i[7] || (i[7] = "." + tu(u.scale(r[2]))), i[8] = "f", e = ao.format(i.join("")),
                    function(n) {
                        return e(u.scale(n)) + u.symbol
                    }
            }
            i[7] || (i[7] = "." + eu(i[8], r)), e = i.join("")
        } else e = ",." + tu(r[2]) + "f";
        return ao.format(e)
    }

    function tu(n) {
        return -Math.floor(Math.log(n) / Math.LN10 + .01)
    }

    function eu(n, t) {
        var e = tu(t[2]);
        return n in kl ? Math.abs(e - tu(Math.max(xo(t[0]), xo(t[1])))) + +("e" !== n) : e - 2 * ("%" === n)
    }

    function ru(n, t, e, r) {
        function i(n) {
            return (e ? Math.log(0 > n ? 0 : n) : -Math.log(n > 0 ? 0 : -n)) / Math.log(t)
        }

        function u(n) {
            return e ? Math.pow(t, n) : -Math.pow(t, -n)
        }

        function o(t) {
            return n(i(t))
        }
        return o.invert = function(t) {
            return u(n.invert(t))
        }, o.domain = function(t) {
            return arguments.length ? (e = t[0] >= 0, n.domain((r = t.map(Number)).map(i)), o) : r
        }, o.base = function(e) {
            return arguments.length ? (t = +e, n.domain(r.map(i)), o) : t
        }, o.nice = function() {
            var t = Xi(r.map(i), e ? Math : El);
            return n.domain(t), r = t.map(u), o
        }, o.ticks = function() {
            var n = Yi(r),
                o = [],
                a = n[0],
                l = n[1],
                c = Math.floor(i(a)),
                f = Math.ceil(i(l)),
                s = t % 1 ? 2 : t;
            if (isFinite(f - c)) {
                if (e) {
                    for (; f > c; c++)
                        for (var h = 1; s > h; h++) o.push(u(c) * h);
                    o.push(u(c))
                } else
                    for (o.push(u(c)); c++ < f;)
                        for (var h = s - 1; h > 0; h--) o.push(u(c) * h);
                for (c = 0; o[c] < a; c++);
                for (f = o.length; o[f - 1] > l; f--);
                o = o.slice(c, f)
            }
            return o
        }, o.tickFormat = function(n, e) {
            if (!arguments.length) return Nl;
            arguments.length < 2 ? e = Nl : "function" != typeof e && (e = ao.format(e));
            var r = Math.max(1, t * n / o.ticks().length);
            return function(n) {
                var o = n / u(Math.round(i(n)));
                return t - .5 > o * t && (o *= t), r >= o ? e(n) : ""
            }
        }, o.copy = function() {
            return ru(n.copy(), t, e, r)
        }, Ji(o, n)
    }

    function iu(n, t, e) {
        function r(t) {
            return n(i(t))
        }
        var i = uu(t),
            u = uu(1 / t);
        return r.invert = function(t) {
            return u(n.invert(t))
        }, r.domain = function(t) {
            return arguments.length ? (n.domain((e = t.map(Number)).map(i)), r) : e
        }, r.ticks = function(n) {
            return Qi(e, n)
        }, r.tickFormat = function(n, t) {
            return nu(e, n, t)
        }, r.nice = function(n) {
            return r.domain(Gi(e, n))
        }, r.exponent = function(o) {
            return arguments.length ? (i = uu(t = o), u = uu(1 / t), n.domain(e.map(i)), r) : t
        }, r.copy = function() {
            return iu(n.copy(), t, e)
        }, Ji(r, n)
    }

    function uu(n) {
        return function(t) {
            return 0 > t ? -Math.pow(-t, n) : Math.pow(t, n)
        }
    }

    function ou(n, t) {
        function e(e) {
            return u[((i.get(e) || ("range" === t.t ? i.set(e, n.push(e)) : NaN)) - 1) % u.length]
        }

        function r(t, e) {
            return ao.range(n.length).map(function(n) {
                return t + e * n
            })
        }
        var i, u, o;
        return e.domain = function(r) {
            if (!arguments.length) return n;
            n = [], i = new c;
            for (var u, o = -1, a = r.length; ++o < a;) i.has(u = r[o]) || i.set(u, n.push(u));
            return e[t.t].apply(e, t.a)
        }, e.range = function(n) {
            return arguments.length ? (u = n, o = 0, t = {
                t: "range",
                a: arguments
            }, e) : u
        }, e.rangePoints = function(i, a) {
            arguments.length < 2 && (a = 0);
            var l = i[0],
                c = i[1],
                f = n.length < 2 ? (l = (l + c) / 2, 0) : (c - l) / (n.length - 1 + a);
            return u = r(l + f * a / 2, f), o = 0, t = {
                t: "rangePoints",
                a: arguments
            }, e
        }, e.rangeRoundPoints = function(i, a) {
            arguments.length < 2 && (a = 0);
            var l = i[0],
                c = i[1],
                f = n.length < 2 ? (l = c = Math.round((l + c) / 2), 0) : (c - l) / (n.length - 1 + a) | 0;
            return u = r(l + Math.round(f * a / 2 + (c - l - (n.length - 1 + a) * f) / 2), f), o = 0, t = {
                t: "rangeRoundPoints",
                a: arguments
            }, e
        }, e.rangeBands = function(i, a, l) {
            arguments.length < 2 && (a = 0), arguments.length < 3 && (l = a);
            var c = i[1] < i[0],
                f = i[c - 0],
                s = i[1 - c],
                h = (s - f) / (n.length - a + 2 * l);
            return u = r(f + h * l, h), c && u.reverse(), o = h * (1 - a), t = {
                t: "rangeBands",
                a: arguments
            }, e
        }, e.rangeRoundBands = function(i, a, l) {
            arguments.length < 2 && (a = 0), arguments.length < 3 && (l = a);
            var c = i[1] < i[0],
                f = i[c - 0],
                s = i[1 - c],
                h = Math.floor((s - f) / (n.length - a + 2 * l));
            return u = r(f + Math.round((s - f - (n.length - a) * h) / 2), h), c && u.reverse(), o = Math.round(h * (1 - a)), t = {
                t: "rangeRoundBands",
                a: arguments
            }, e
        }, e.rangeBand = function() {
            return o
        }, e.rangeExtent = function() {
            return Yi(t.a[0])
        }, e.copy = function() {
            return ou(n, t)
        }, e.domain(n)
    }

    function au(n, t) {
        function u() {
            var e = 0,
                r = t.length;
            for (a = []; ++e < r;) a[e - 1] = ao.quantile(n, e / r);
            return o
        }

        function o(n) {
            return isNaN(n = +n) ? void 0 : t[ao.bisect(a, n)]
        }
        var a;
        return o.domain = function(t) {
            return arguments.length ? (n = t.map(r).filter(i).sort(e), u()) : n
        }, o.range = function(n) {
            return arguments.length ? (t = n, u()) : t
        }, o.quantiles = function() {
            return a
        }, o.invertExtent = function(e) {
            return e = t.indexOf(e), 0 > e ? [NaN, NaN] : [e > 0 ? a[e - 1] : n[0], e < a.length ? a[e] : n[n.length - 1]]
        }, o.copy = function() {
            return au(n, t)
        }, u()
    }

    function lu(n, t, e) {
        function r(t) {
            return e[Math.max(0, Math.min(o, Math.floor(u * (t - n))))]
        }

        function i() {
            return u = e.length / (t - n), o = e.length - 1, r
        }
        var u, o;
        return r.domain = function(e) {
            return arguments.length ? (n = +e[0], t = +e[e.length - 1], i()) : [n, t]
        }, r.range = function(n) {
            return arguments.length ? (e = n, i()) : e
        }, r.invertExtent = function(t) {
            return t = e.indexOf(t), t = 0 > t ? NaN : t / u + n, [t, t + 1 / u]
        }, r.copy = function() {
            return lu(n, t, e)
        }, i()
    }

    function cu(n, t) {
        function e(e) {
            return e >= e ? t[ao.bisect(n, e)] : void 0
        }
        return e.domain = function(t) {
            return arguments.length ? (n = t, e) : n
        }, e.range = function(n) {
            return arguments.length ? (t = n, e) : t
        }, e.invertExtent = function(e) {
            return e = t.indexOf(e), [n[e - 1], n[e]]
        }, e.copy = function() {
            return cu(n, t)
        }, e
    }

    function fu(n) {
        function t(n) {
            return +n
        }
        return t.invert = t, t.domain = t.range = function(e) {
            return arguments.length ? (n = e.map(t), t) : n
        }, t.ticks = function(t) {
            return Qi(n, t)
        }, t.tickFormat = function(t, e) {
            return nu(n, t, e)
        }, t.copy = function() {
            return fu(n)
        }, t
    }

    function su() {
        return 0
    }

    function hu(n) {
        return n.innerRadius
    }

    function pu(n) {
        return n.outerRadius
    }

    function gu(n) {
        return n.startAngle
    }

    function vu(n) {
        return n.endAngle
    }

    function du(n) {
        return n && n.padAngle
    }

    function yu(n, t, e, r) {
        return (n - e) * t - (t - r) * n > 0 ? 0 : 1
    }

    function mu(n, t, e, r, i) {
        var u = n[0] - t[0],
            o = n[1] - t[1],
            a = (i ? r : -r) / Math.sqrt(u * u + o * o),
            l = a * o,
            c = -a * u,
            f = n[0] + l,
            s = n[1] + c,
            h = t[0] + l,
            p = t[1] + c,
            g = (f + h) / 2,
            v = (s + p) / 2,
            d = h - f,
            y = p - s,
            m = d * d + y * y,
            M = e - r,
            x = f * p - h * s,
            b = (0 > y ? -1 : 1) * Math.sqrt(Math.max(0, M * M * m - x * x)),
            _ = (x * y - d * b) / m,
            w = (-x * d - y * b) / m,
            S = (x * y + d * b) / m,
            k = (-x * d + y * b) / m,
            N = _ - g,
            E = w - v,
            A = S - g,
            C = k - v;
        return N * N + E * E > A * A + C * C && (_ = S, w = k), [
            [_ - l, w - c],
            [_ * e / M, w * e / M]
        ]
    }

    function Mu(n) {
        function t(t) {
            function o() {
                c.push("M", u(n(f), a))
            }
            for (var l, c = [], f = [], s = -1, h = t.length, p = En(e), g = En(r); ++s < h;) i.call(this, l = t[s], s) ? f.push([+p.call(this, l, s), +g.call(this, l, s)]) : f.length && (o(), f = []);
            return f.length && o(), c.length ? c.join("") : null
        }
        var e = Ce,
            r = ze,
            i = zt,
            u = xu,
            o = u.key,
            a = .7;
        return t.x = function(n) {
            return arguments.length ? (e = n, t) : e
        }, t.y = function(n) {
            return arguments.length ? (r = n, t) : r
        }, t.defined = function(n) {
            return arguments.length ? (i = n, t) : i
        }, t.interpolate = function(n) {
            return arguments.length ? (o = "function" == typeof n ? u = n : (u = Tl.get(n) || xu).key, t) : o
        }, t.tension = function(n) {
            return arguments.length ? (a = n, t) : a
        }, t
    }

    function xu(n) {
        return n.length > 1 ? n.join("L") : n + "Z"
    }

    function bu(n) {
        return n.join("L") + "Z"
    }

    function _u(n) {
        for (var t = 0, e = n.length, r = n[0], i = [r[0], ",", r[1]]; ++t < e;) i.push("H", (r[0] + (r = n[t])[0]) / 2, "V", r[1]);
        return e > 1 && i.push("H", r[0]), i.join("")
    }

    function wu(n) {
        for (var t = 0, e = n.length, r = n[0], i = [r[0], ",", r[1]]; ++t < e;) i.push("V", (r = n[t])[1], "H", r[0]);
        return i.join("")
    }

    function Su(n) {
        for (var t = 0, e = n.length, r = n[0], i = [r[0], ",", r[1]]; ++t < e;) i.push("H", (r = n[t])[0], "V", r[1]);
        return i.join("")
    }

    function ku(n, t) {
        return n.length < 4 ? xu(n) : n[1] + Au(n.slice(1, -1), Cu(n, t))
    }

    function Nu(n, t) {
        return n.length < 3 ? bu(n) : n[0] + Au((n.push(n[0]), n), Cu([n[n.length - 2]].concat(n, [n[1]]), t))
    }

    function Eu(n, t) {
        return n.length < 3 ? xu(n) : n[0] + Au(n, Cu(n, t))
    }

    function Au(n, t) {
        if (t.length < 1 || n.length != t.length && n.length != t.length + 2) return xu(n);
        var e = n.length != t.length,
            r = "",
            i = n[0],
            u = n[1],
            o = t[0],
            a = o,
            l = 1;
        if (e && (r += "Q" + (u[0] - 2 * o[0] / 3) + "," + (u[1] - 2 * o[1] / 3) + "," + u[0] + "," + u[1], i = n[1], l = 2), t.length > 1) {
            a = t[1], u = n[l], l++, r += "C" + (i[0] + o[0]) + "," + (i[1] + o[1]) + "," + (u[0] - a[0]) + "," + (u[1] - a[1]) + "," + u[0] + "," + u[1];
            for (var c = 2; c < t.length; c++, l++) u = n[l], a = t[c], r += "S" + (u[0] - a[0]) + "," + (u[1] - a[1]) + "," + u[0] + "," + u[1]
        }
        if (e) {
            var f = n[l];
            r += "Q" + (u[0] + 2 * a[0] / 3) + "," + (u[1] + 2 * a[1] / 3) + "," + f[0] + "," + f[1]
        }
        return r
    }

    function Cu(n, t) {
        for (var e, r = [], i = (1 - t) / 2, u = n[0], o = n[1], a = 1, l = n.length; ++a < l;) e = u, u = o, o = n[a], r.push([i * (o[0] - e[0]), i * (o[1] - e[1])]);
        return r
    }

    function zu(n) {
        if (n.length < 3) return xu(n);
        var t = 1,
            e = n.length,
            r = n[0],
            i = r[0],
            u = r[1],
            o = [i, i, i, (r = n[1])[0]],
            a = [u, u, u, r[1]],
            l = [i, ",", u, "L", Ru(Pl, o), ",", Ru(Pl, a)];
        for (n.push(n[e - 1]); ++t <= e;) r = n[t], o.shift(), o.push(r[0]), a.shift(), a.push(r[1]), Du(l, o, a);
        return n.pop(), l.push("L", r), l.join("")
    }

    function Lu(n) {
        if (n.length < 4) return xu(n);
        for (var t, e = [], r = -1, i = n.length, u = [0], o = [0]; ++r < 3;) t = n[r], u.push(t[0]), o.push(t[1]);
        for (e.push(Ru(Pl, u) + "," + Ru(Pl, o)), --r; ++r < i;) t = n[r], u.shift(), u.push(t[0]), o.shift(), o.push(t[1]), Du(e, u, o);
        return e.join("")
    }

    function qu(n) {
        for (var t, e, r = -1, i = n.length, u = i + 4, o = [], a = []; ++r < 4;) e = n[r % i], o.push(e[0]), a.push(e[1]);
        for (t = [Ru(Pl, o), ",", Ru(Pl, a)], --r; ++r < u;) e = n[r % i], o.shift(), o.push(e[0]), a.shift(), a.push(e[1]), Du(t, o, a);
        return t.join("")
    }

    function Tu(n, t) {
        var e = n.length - 1;
        if (e)
            for (var r, i, u = n[0][0], o = n[0][1], a = n[e][0] - u, l = n[e][1] - o, c = -1; ++c <= e;) r = n[c], i = c / e, r[0] = t * r[0] + (1 - t) * (u + i * a), r[1] = t * r[1] + (1 - t) * (o + i * l);
        return zu(n)
    }

    function Ru(n, t) {
        return n[0] * t[0] + n[1] * t[1] + n[2] * t[2] + n[3] * t[3]
    }

    function Du(n, t, e) {
        n.push("C", Ru(Rl, t), ",", Ru(Rl, e), ",", Ru(Dl, t), ",", Ru(Dl, e), ",", Ru(Pl, t), ",", Ru(Pl, e))
    }

    function Pu(n, t) {
        return (t[1] - n[1]) / (t[0] - n[0])
    }

    function Uu(n) {
        for (var t = 0, e = n.length - 1, r = [], i = n[0], u = n[1], o = r[0] = Pu(i, u); ++t < e;) r[t] = (o + (o = Pu(i = u, u = n[t + 1]))) / 2;
        return r[t] = o, r
    }

    function ju(n) {
        for (var t, e, r, i, u = [], o = Uu(n), a = -1, l = n.length - 1; ++a < l;) t = Pu(n[a], n[a + 1]), xo(t) < Uo ? o[a] = o[a + 1] = 0 : (e = o[a] / t, r = o[a + 1] / t, i = e * e + r * r, i > 9 && (i = 3 * t / Math.sqrt(i), o[a] = i * e, o[a + 1] = i * r));
        for (a = -1; ++a <= l;) i = (n[Math.min(l, a + 1)][0] - n[Math.max(0, a - 1)][0]) / (6 * (1 + o[a] * o[a])), u.push([i || 0, o[a] * i || 0]);
        return u
    }

    function Fu(n) {
        return n.length < 3 ? xu(n) : n[0] + Au(n, ju(n))
    }

    function Hu(n) {
        for (var t, e, r, i = -1, u = n.length; ++i < u;) t = n[i], e = t[0], r = t[1] - Io, t[0] = e * Math.cos(r), t[1] = e * Math.sin(r);
        return n
    }

    function Ou(n) {
        function t(t) {
            function l() {
                v.push("M", a(n(y), s), f, c(n(d.reverse()), s), "Z")
            }
            for (var h, p, g, v = [], d = [], y = [], m = -1, M = t.length, x = En(e), b = En(i), _ = e === r ? function() {
                    return p
                } : En(r), w = i === u ? function() {
                    return g
                } : En(u); ++m < M;) o.call(this, h = t[m], m) ? (d.push([p = +x.call(this, h, m), g = +b.call(this, h, m)]), y.push([+_.call(this, h, m), +w.call(this, h, m)])) : d.length && (l(), d = [], y = []);
            return d.length && l(), v.length ? v.join("") : null
        }
        var e = Ce,
            r = Ce,
            i = 0,
            u = ze,
            o = zt,
            a = xu,
            l = a.key,
            c = a,
            f = "L",
            s = .7;
        return t.x = function(n) {
            return arguments.length ? (e = r = n, t) : r
        }, t.x0 = function(n) {
            return arguments.length ? (e = n, t) : e
        }, t.x1 = function(n) {
            return arguments.length ? (r = n, t) : r
        }, t.y = function(n) {
            return arguments.length ? (i = u = n, t) : u
        }, t.y0 = function(n) {
            return arguments.length ? (i = n, t) : i
        }, t.y1 = function(n) {
            return arguments.length ? (u = n, t) : u
        }, t.defined = function(n) {
            return arguments.length ? (o = n, t) : o
        }, t.interpolate = function(n) {
            return arguments.length ? (l = "function" == typeof n ? a = n : (a = Tl.get(n) || xu).key, c = a.reverse || a, f = a.closed ? "M" : "L", t) : l
        }, t.tension = function(n) {
            return arguments.length ? (s = n, t) : s
        }, t
    }

    function Iu(n) {
        return n.radius
    }

    function Yu(n) {
        return [n.x, n.y]
    }

    function Zu(n) {
        return function() {
            var t = n.apply(this, arguments),
                e = t[0],
                r = t[1] - Io;
            return [e * Math.cos(r), e * Math.sin(r)]
        }
    }

    function Vu() {
        return 64
    }

    function Xu() {
        return "circle"
    }

    function $u(n) {
        var t = Math.sqrt(n / Fo);
        return "M0," + t + "A" + t + "," + t + " 0 1,1 0," + -t + "A" + t + "," + t + " 0 1,1 0," + t + "Z"
    }

    function Bu(n) {
        return function() {
            var t, e, r;
            (t = this[n]) && (r = t[e = t.active]) && (r.timer.c = null, r.timer.t = NaN, --t.count ? delete t[e] : delete this[n], t.active += .5, r.event && r.event.interrupt.call(this, this.__data__, r.index))
        }
    }

    function Wu(n, t, e) {
        return ko(n, Yl), n.namespace = t, n.id = e, n
    }

    function Ju(n, t, e, r) {
        var i = n.id,
            u = n.namespace;
        return Y(n, "function" == typeof e ? function(n, o, a) {
            n[u][i].tween.set(t, r(e.call(n, n.__data__, o, a)))
        } : (e = r(e), function(n) {
            n[u][i].tween.set(t, e)
        }))
    }

    function Gu(n) {
        return null == n && (n = ""),
            function() {
                this.textContent = n
            }
    }

    function Ku(n) {
        return null == n ? "__transition__" : "__transition_" + n + "__"
    }

    function Qu(n, t, e, r, i) {
        function u(n) {
            var t = v.delay;
            return f.t = t + l, n >= t ? o(n - t) : void(f.c = o)
        }

        function o(e) {
            var i = g.active,
                u = g[i];
            u && (u.timer.c = null, u.timer.t = NaN, --g.count, delete g[i], u.event && u.event.interrupt.call(n, n.__data__, u.index));
            for (var o in g)
                if (r > +o) {
                    var c = g[o];
                    c.timer.c = null, c.timer.t = NaN, --g.count, delete g[o]
                }
            f.c = a, qn(function() {
                return f.c && a(e || 1) && (f.c = null, f.t = NaN), 1
            }, 0, l), g.active = r, v.event && v.event.start.call(n, n.__data__, t), p = [], v.tween.forEach(function(e, r) {
                (r = r.call(n, n.__data__, t)) && p.push(r)
            }), h = v.ease, s = v.duration
        }

        function a(i) {
            for (var u = i / s, o = h(u), a = p.length; a > 0;) p[--a].call(n, o);
            return u >= 1 ? (v.event && v.event.end.call(n, n.__data__, t), --g.count ? delete g[r] : delete n[e], 1) : void 0
        }
        var l, f, s, h, p, g = n[e] || (n[e] = {
                active: 0,
                count: 0
            }),
            v = g[r];
        v || (l = i.time, f = qn(u, 0, l), v = g[r] = {
            tween: new c,
            time: l,
            timer: f,
            delay: i.delay,
            duration: i.duration,
            ease: i.ease,
            index: t
        }, i = null, ++g.count)
    }

    function no(n, t, e) {
        n.attr("transform", function(n) {
            var r = t(n);
            return "translate(" + (isFinite(r) ? r : e(n)) + ",0)"
        })
    }

    function to(n, t, e) {
        n.attr("transform", function(n) {
            var r = t(n);
            return "translate(0," + (isFinite(r) ? r : e(n)) + ")"
        })
    }

    function eo(n) {
        return n.toISOString()
    }

    function ro(n, t, e) {
        function r(t) {
            return n(t)
        }

        function i(n, e) {
            var r = n[1] - n[0],
                i = r / e,
                u = ao.bisect(Kl, i);
            return u == Kl.length ? [t.year, Ki(n.map(function(n) {
                return n / 31536e6
            }), e)[2]] : u ? t[i / Kl[u - 1] < Kl[u] / i ? u - 1 : u] : [tc, Ki(n, e)[2]]
        }
        return r.invert = function(t) {
            return io(n.invert(t))
        }, r.domain = function(t) {
            return arguments.length ? (n.domain(t), r) : n.domain().map(io)
        }, r.nice = function(n, t) {
            function e(e) {
                return !isNaN(e) && !n.range(e, io(+e + 1), t).length
            }
            var u = r.domain(),
                o = Yi(u),
                a = null == n ? i(o, 10) : "number" == typeof n && i(o, n);
            return a && (n = a[0], t = a[1]), r.domain(Xi(u, t > 1 ? {
                floor: function(t) {
                    for (; e(t = n.floor(t));) t = io(t - 1);
                    return t
                },
                ceil: function(t) {
                    for (; e(t = n.ceil(t));) t = io(+t + 1);
                    return t
                }
            } : n))
        }, r.ticks = function(n, t) {
            var e = Yi(r.domain()),
                u = null == n ? i(e, 10) : "number" == typeof n ? i(e, n) : !n.range && [{
                    range: n
                }, t];
            return u && (n = u[0], t = u[1]), n.range(e[0], io(+e[1] + 1), 1 > t ? 1 : t)
        }, r.tickFormat = function() {
            return e
        }, r.copy = function() {
            return ro(n.copy(), t, e)
        }, Ji(r, n)
    }

    function io(n) {
        return new Date(n)
    }

    function uo(n) {
        return JSON.parse(n.responseText)
    }

    function oo(n) {
        var t = fo.createRange();
        return t.selectNode(fo.body), t.createContextualFragment(n.responseText)
    }
    var ao = {
            version: "3.5.17"
        },
        lo = [].slice,
        co = function(n) {
            return lo.call(n)
        },
        fo = this.document;
    if (fo) try {
        co(fo.documentElement.childNodes)[0].nodeType
    } catch (so) {
        co = function(n) {
            for (var t = n.length, e = new Array(t); t--;) e[t] = n[t];
            return e
        }
    }
    if (Date.now || (Date.now = function() {
            return +new Date
        }), fo) try {
        fo.createElement("DIV").style.setProperty("opacity", 0, "")
    } catch (ho) {
        var po = this.Element.prototype,
            go = po.setAttribute,
            vo = po.setAttributeNS,
            yo = this.CSSStyleDeclaration.prototype,
            mo = yo.setProperty;
        po.setAttribute = function(n, t) {
            go.call(this, n, t + "")
        }, po.setAttributeNS = function(n, t, e) {
            vo.call(this, n, t, e + "")
        }, yo.setProperty = function(n, t, e) {
            mo.call(this, n, t + "", e)
        }
    }
    ao.ascending = e, ao.descending = function(n, t) {
        return n > t ? -1 : t > n ? 1 : t >= n ? 0 : NaN
    }, ao.min = function(n, t) {
        var e, r, i = -1,
            u = n.length;
        if (1 === arguments.length) {
            for (; ++i < u;)
                if (null != (r = n[i]) && r >= r) {
                    e = r;
                    break
                }
            for (; ++i < u;) null != (r = n[i]) && e > r && (e = r)
        } else {
            for (; ++i < u;)
                if (null != (r = t.call(n, n[i], i)) && r >= r) {
                    e = r;
                    break
                }
            for (; ++i < u;) null != (r = t.call(n, n[i], i)) && e > r && (e = r)
        }
        return e
    }, ao.max = function(n, t) {
        var e, r, i = -1,
            u = n.length;
        if (1 === arguments.length) {
            for (; ++i < u;)
                if (null != (r = n[i]) && r >= r) {
                    e = r;
                    break
                }
            for (; ++i < u;) null != (r = n[i]) && r > e && (e = r)
        } else {
            for (; ++i < u;)
                if (null != (r = t.call(n, n[i], i)) && r >= r) {
                    e = r;
                    break
                }
            for (; ++i < u;) null != (r = t.call(n, n[i], i)) && r > e && (e = r)
        }
        return e
    }, ao.extent = function(n, t) {
        var e, r, i, u = -1,
            o = n.length;
        if (1 === arguments.length) {
            for (; ++u < o;)
                if (null != (r = n[u]) && r >= r) {
                    e = i = r;
                    break
                }
            for (; ++u < o;) null != (r = n[u]) && (e > r && (e = r), r > i && (i = r))
        } else {
            for (; ++u < o;)
                if (null != (r = t.call(n, n[u], u)) && r >= r) {
                    e = i = r;
                    break
                }
            for (; ++u < o;) null != (r = t.call(n, n[u], u)) && (e > r && (e = r), r > i && (i = r))
        }
        return [e, i]
    }, ao.sum = function(n, t) {
        var e, r = 0,
            u = n.length,
            o = -1;
        if (1 === arguments.length)
            for (; ++o < u;) i(e = +n[o]) && (r += e);
        else
            for (; ++o < u;) i(e = +t.call(n, n[o], o)) && (r += e);
        return r
    }, ao.mean = function(n, t) {
        var e, u = 0,
            o = n.length,
            a = -1,
            l = o;
        if (1 === arguments.length)
            for (; ++a < o;) i(e = r(n[a])) ? u += e : --l;
        else
            for (; ++a < o;) i(e = r(t.call(n, n[a], a))) ? u += e : --l;
        return l ? u / l : void 0
    }, ao.quantile = function(n, t) {
        var e = (n.length - 1) * t + 1,
            r = Math.floor(e),
            i = +n[r - 1],
            u = e - r;
        return u ? i + u * (n[r] - i) : i
    }, ao.median = function(n, t) {
        var u, o = [],
            a = n.length,
            l = -1;
        if (1 === arguments.length)
            for (; ++l < a;) i(u = r(n[l])) && o.push(u);
        else
            for (; ++l < a;) i(u = r(t.call(n, n[l], l))) && o.push(u);
        return o.length ? ao.quantile(o.sort(e), .5) : void 0
    }, ao.variance = function(n, t) {
        var e, u, o = n.length,
            a = 0,
            l = 0,
            c = -1,
            f = 0;
        if (1 === arguments.length)
            for (; ++c < o;) i(e = r(n[c])) && (u = e - a, a += u / ++f, l += u * (e - a));
        else
            for (; ++c < o;) i(e = r(t.call(n, n[c], c))) && (u = e - a, a += u / ++f, l += u * (e - a));
        return f > 1 ? l / (f - 1) : void 0
    }, ao.deviation = function() {
        var n = ao.variance.apply(this, arguments);
        return n ? Math.sqrt(n) : n
    };
    var Mo = u(e);
    ao.bisectLeft = Mo.left, ao.bisect = ao.bisectRight = Mo.right, ao.bisector = function(n) {
        return u(1 === n.length ? function(t, r) {
            return e(n(t), r)
        } : n)
    }, ao.shuffle = function(n, t, e) {
        (u = arguments.length) < 3 && (e = n.length, 2 > u && (t = 0));
        for (var r, i, u = e - t; u;) i = Math.random() * u-- | 0, r = n[u + t], n[u + t] = n[i + t], n[i + t] = r;
        return n
    }, ao.permute = function(n, t) {
        for (var e = t.length, r = new Array(e); e--;) r[e] = n[t[e]];
        return r
    }, ao.pairs = function(n) {
        for (var t, e = 0, r = n.length - 1, i = n[0], u = new Array(0 > r ? 0 : r); r > e;) u[e] = [t = i, i = n[++e]];
        return u
    }, ao.transpose = function(n) {
        if (!(i = n.length)) return [];
        for (var t = -1, e = ao.min(n, o), r = new Array(e); ++t < e;)
            for (var i, u = -1, a = r[t] = new Array(i); ++u < i;) a[u] = n[u][t];
        return r
    }, ao.zip = function() {
        return ao.transpose(arguments)
    }, ao.keys = function(n) {
        var t = [];
        for (var e in n) t.push(e);
        return t
    }, ao.values = function(n) {
        var t = [];
        for (var e in n) t.push(n[e]);
        return t
    }, ao.entries = function(n) {
        var t = [];
        for (var e in n) t.push({
            key: e,
            value: n[e]
        });
        return t
    }, ao.merge = function(n) {
        for (var t, e, r, i = n.length, u = -1, o = 0; ++u < i;) o += n[u].length;
        for (e = new Array(o); --i >= 0;)
            for (r = n[i], t = r.length; --t >= 0;) e[--o] = r[t];
        return e
    };
    var xo = Math.abs;
    ao.range = function(n, t, e) {
        if (arguments.length < 3 && (e = 1, arguments.length < 2 && (t = n, n = 0)), (t - n) / e === 1 / 0) throw new Error("infinite range");
        var r, i = [],
            u = a(xo(e)),
            o = -1;
        if (n *= u, t *= u, e *= u, 0 > e)
            for (;
                (r = n + e * ++o) > t;) i.push(r / u);
        else
            for (;
                (r = n + e * ++o) < t;) i.push(r / u);
        return i
    }, ao.map = function(n, t) {
        var e = new c;
        if (n instanceof c) n.forEach(function(n, t) {
            e.set(n, t)
        });
        else if (Array.isArray(n)) {
            var r, i = -1,
                u = n.length;
            if (1 === arguments.length)
                for (; ++i < u;) e.set(i, n[i]);
            else
                for (; ++i < u;) e.set(t.call(n, r = n[i], i), r)
        } else
            for (var o in n) e.set(o, n[o]);
        return e
    };
    var bo = "__proto__",
        _o = "\x00";
    l(c, {
        has: h,
        get: function(n) {
            return this._[f(n)]
        },
        set: function(n, t) {
            return this._[f(n)] = t
        },
        remove: p,
        keys: g,
        values: function() {
            var n = [];
            for (var t in this._) n.push(this._[t]);
            return n
        },
        entries: function() {
            var n = [];
            for (var t in this._) n.push({
                key: s(t),
                value: this._[t]
            });
            return n
        },
        size: v,
        empty: d,
        forEach: function(n) {
            for (var t in this._) n.call(this, s(t), this._[t])
        }
    }), ao.nest = function() {
        function n(t, o, a) {
            if (a >= u.length) return r ? r.call(i, o) : e ? o.sort(e) : o;
            for (var l, f, s, h, p = -1, g = o.length, v = u[a++], d = new c; ++p < g;)(h = d.get(l = v(f = o[p]))) ? h.push(f) : d.set(l, [f]);
            return t ? (f = t(), s = function(e, r) {
                f.set(e, n(t, r, a))
            }) : (f = {}, s = function(e, r) {
                f[e] = n(t, r, a)
            }), d.forEach(s), f
        }

        function t(n, e) {
            if (e >= u.length) return n;
            var r = [],
                i = o[e++];
            return n.forEach(function(n, i) {
                r.push({
                    key: n,
                    values: t(i, e)
                })
            }), i ? r.sort(function(n, t) {
                return i(n.key, t.key)
            }) : r
        }
        var e, r, i = {},
            u = [],
            o = [];
        return i.map = function(t, e) {
            return n(e, t, 0)
        }, i.entries = function(e) {
            return t(n(ao.map, e, 0), 0)
        }, i.key = function(n) {
            return u.push(n), i
        }, i.sortKeys = function(n) {
            return o[u.length - 1] = n, i
        }, i.sortValues = function(n) {
            return e = n, i
        }, i.rollup = function(n) {
            return r = n, i
        }, i
    }, ao.set = function(n) {
        var t = new y;
        if (n)
            for (var e = 0, r = n.length; r > e; ++e) t.add(n[e]);
        return t
    }, l(y, {
        has: h,
        add: function(n) {
            return this._[f(n += "")] = !0, n
        },
        remove: p,
        values: g,
        size: v,
        empty: d,
        forEach: function(n) {
            for (var t in this._) n.call(this, s(t))
        }
    }), ao.behavior = {}, ao.rebind = function(n, t) {
        for (var e, r = 1, i = arguments.length; ++r < i;) n[e = arguments[r]] = M(n, t, t[e]);
        return n
    };
    var wo = ["webkit", "ms", "moz", "Moz", "o", "O"];
    ao.dispatch = function() {
        for (var n = new _, t = -1, e = arguments.length; ++t < e;) n[arguments[t]] = w(n);
        return n
    }, _.prototype.on = function(n, t) {
        var e = n.indexOf("."),
            r = "";
        if (e >= 0 && (r = n.slice(e + 1), n = n.slice(0, e)), n) return arguments.length < 2 ? this[n].on(r) : this[n].on(r, t);
        if (2 === arguments.length) {
            if (null == t)
                for (n in this) this.hasOwnProperty(n) && this[n].on(r, null);
            return this
        }
    }, ao.event = null, ao.requote = function(n) {
        return n.replace(So, "\\$&")
    };
    var So = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,
        ko = {}.__proto__ ? function(n, t) {
            n.__proto__ = t
        } : function(n, t) {
            for (var e in t) n[e] = t[e]
        },
        No = function(n, t) {
            return t.querySelector(n)
        },
        Eo = function(n, t) {
            return t.querySelectorAll(n)
        },
        Ao = function(n, t) {
            var e = n.matches || n[x(n, "matchesSelector")];
            return (Ao = function(n, t) {
                return e.call(n, t)
            })(n, t)
        };
    "function" == typeof Sizzle && (No = function(n, t) {
        return Sizzle(n, t)[0] || null
    }, Eo = Sizzle, Ao = Sizzle.matchesSelector), ao.selection = function() {
        return ao.select(fo.documentElement)
    };
    var Co = ao.selection.prototype = [];
    Co.select = function(n) {
        var t, e, r, i, u = [];
        n = A(n);
        for (var o = -1, a = this.length; ++o < a;) {
            u.push(t = []), t.parentNode = (r = this[o]).parentNode;
            for (var l = -1, c = r.length; ++l < c;)(i = r[l]) ? (t.push(e = n.call(i, i.__data__, l, o)), e && "__data__" in i && (e.__data__ = i.__data__)) : t.push(null)
        }
        return E(u)
    }, Co.selectAll = function(n) {
        var t, e, r = [];
        n = C(n);
        for (var i = -1, u = this.length; ++i < u;)
            for (var o = this[i], a = -1, l = o.length; ++a < l;)(e = o[a]) && (r.push(t = co(n.call(e, e.__data__, a, i))), t.parentNode = e);
        return E(r)
    };
    var zo = "http://www.w3.org/1999/xhtml",
        Lo = {
            svg: "http://www.w3.org/2000/svg",
            xhtml: zo,
            xlink: "http://www.w3.org/1999/xlink",
            xml: "http://www.w3.org/XML/1998/namespace",
            xmlns: "http://www.w3.org/2000/xmlns/"
        };
    ao.ns = {
        prefix: Lo,
        qualify: function(n) {
            var t = n.indexOf(":"),
                e = n;
            return t >= 0 && "xmlns" !== (e = n.slice(0, t)) && (n = n.slice(t + 1)), Lo.hasOwnProperty(e) ? {
                space: Lo[e],
                local: n
            } : n
        }
    }, Co.attr = function(n, t) {
        if (arguments.length < 2) {
            if ("string" == typeof n) {
                var e = this.node();
                return n = ao.ns.qualify(n), n.local ? e.getAttributeNS(n.space, n.local) : e.getAttribute(n)
            }
            for (t in n) this.each(z(t, n[t]));
            return this
        }
        return this.each(z(n, t))
    }, Co.classed = function(n, t) {
        if (arguments.length < 2) {
            if ("string" == typeof n) {
                var e = this.node(),
                    r = (n = T(n)).length,
                    i = -1;
                if (t = e.classList) {
                    for (; ++i < r;)
                        if (!t.contains(n[i])) return !1
                } else
                    for (t = e.getAttribute("class"); ++i < r;)
                        if (!q(n[i]).test(t)) return !1; return !0
            }
            for (t in n) this.each(R(t, n[t]));
            return this
        }
        return this.each(R(n, t))
    }, Co.style = function(n, e, r) {
        var i = arguments.length;
        if (3 > i) {
            if ("string" != typeof n) {
                2 > i && (e = "");
                for (r in n) this.each(P(r, n[r], e));
                return this
            }
            if (2 > i) {
                var u = this.node();
                return t(u).getComputedStyle(u, null).getPropertyValue(n)
            }
            r = ""
        }
        return this.each(P(n, e, r))
    }, Co.property = function(n, t) {
        if (arguments.length < 2) {
            if ("string" == typeof n) return this.node()[n];
            for (t in n) this.each(U(t, n[t]));
            return this
        }
        return this.each(U(n, t))
    }, Co.text = function(n) {
        return arguments.length ? this.each("function" == typeof n ? function() {
            var t = n.apply(this, arguments);
            this.textContent = null == t ? "" : t
        } : null == n ? function() {
            this.textContent = ""
        } : function() {
            this.textContent = n
        }) : this.node().textContent
    }, Co.html = function(n) {
        return arguments.length ? this.each("function" == typeof n ? function() {
            var t = n.apply(this, arguments);
            this.innerHTML = null == t ? "" : t
        } : null == n ? function() {
            this.innerHTML = ""
        } : function() {
            this.innerHTML = n
        }) : this.node().innerHTML
    }, Co.append = function(n) {
        return n = j(n), this.select(function() {
            return this.appendChild(n.apply(this, arguments))
        })
    }, Co.insert = function(n, t) {
        return n = j(n), t = A(t), this.select(function() {
            return this.insertBefore(n.apply(this, arguments), t.apply(this, arguments) || null)
        })
    }, Co.remove = function() {
        return this.each(F)
    }, Co.data = function(n, t) {
        function e(n, e) {
            var r, i, u, o = n.length,
                s = e.length,
                h = Math.min(o, s),
                p = new Array(s),
                g = new Array(s),
                v = new Array(o);
            if (t) {
                var d, y = new c,
                    m = new Array(o);
                for (r = -1; ++r < o;)(i = n[r]) && (y.has(d = t.call(i, i.__data__, r)) ? v[r] = i : y.set(d, i), m[r] = d);
                for (r = -1; ++r < s;)(i = y.get(d = t.call(e, u = e[r], r))) ? i !== !0 && (p[r] = i, i.__data__ = u) : g[r] = H(u), y.set(d, !0);
                for (r = -1; ++r < o;) r in m && y.get(m[r]) !== !0 && (v[r] = n[r])
            } else {
                for (r = -1; ++r < h;) i = n[r], u = e[r], i ? (i.__data__ = u, p[r] = i) : g[r] = H(u);
                for (; s > r; ++r) g[r] = H(e[r]);
                for (; o > r; ++r) v[r] = n[r]
            }
            g.update = p, g.parentNode = p.parentNode = v.parentNode = n.parentNode, a.push(g), l.push(p), f.push(v)
        }
        var r, i, u = -1,
            o = this.length;
        if (!arguments.length) {
            for (n = new Array(o = (r = this[0]).length); ++u < o;)(i = r[u]) && (n[u] = i.__data__);
            return n
        }
        var a = Z([]),
            l = E([]),
            f = E([]);
        if ("function" == typeof n)
            for (; ++u < o;) e(r = this[u], n.call(r, r.parentNode.__data__, u));
        else
            for (; ++u < o;) e(r = this[u], n);
        return l.enter = function() {
            return a
        }, l.exit = function() {
            return f
        }, l
    }, Co.datum = function(n) {
        return arguments.length ? this.property("__data__", n) : this.property("__data__")
    }, Co.filter = function(n) {
        var t, e, r, i = [];
        "function" != typeof n && (n = O(n));
        for (var u = 0, o = this.length; o > u; u++) {
            i.push(t = []), t.parentNode = (e = this[u]).parentNode;
            for (var a = 0, l = e.length; l > a; a++)(r = e[a]) && n.call(r, r.__data__, a, u) && t.push(r)
        }
        return E(i)
    }, Co.order = function() {
        for (var n = -1, t = this.length; ++n < t;)
            for (var e, r = this[n], i = r.length - 1, u = r[i]; --i >= 0;)(e = r[i]) && (u && u !== e.nextSibling && u.parentNode.insertBefore(e, u), u = e);
        return this
    }, Co.sort = function(n) {
        n = I.apply(this, arguments);
        for (var t = -1, e = this.length; ++t < e;) this[t].sort(n);
        return this.order()
    }, Co.each = function(n) {
        return Y(this, function(t, e, r) {
            n.call(t, t.__data__, e, r)
        })
    }, Co.call = function(n) {
        var t = co(arguments);
        return n.apply(t[0] = this, t), this
    }, Co.empty = function() {
        return !this.node()
    }, Co.node = function() {
        for (var n = 0, t = this.length; t > n; n++)
            for (var e = this[n], r = 0, i = e.length; i > r; r++) {
                var u = e[r];
                if (u) return u
            }
        return null
    }, Co.size = function() {
        var n = 0;
        return Y(this, function() {
            ++n
        }), n
    };
    var qo = [];
    ao.selection.enter = Z, ao.selection.enter.prototype = qo, qo.append = Co.append, qo.empty = Co.empty, qo.node = Co.node, qo.call = Co.call, qo.size = Co.size, qo.select = function(n) {
        for (var t, e, r, i, u, o = [], a = -1, l = this.length; ++a < l;) {
            r = (i = this[a]).update, o.push(t = []), t.parentNode = i.parentNode;
            for (var c = -1, f = i.length; ++c < f;)(u = i[c]) ? (t.push(r[c] = e = n.call(i.parentNode, u.__data__, c, a)), e.__data__ = u.__data__) : t.push(null)
        }
        return E(o)
    }, qo.insert = function(n, t) {
        return arguments.length < 2 && (t = V(this)), Co.insert.call(this, n, t)
    }, ao.select = function(t) {
        var e;
        return "string" == typeof t ? (e = [No(t, fo)], e.parentNode = fo.documentElement) : (e = [t], e.parentNode = n(t)), E([e])
    }, ao.selectAll = function(n) {
        var t;
        return "string" == typeof n ? (t = co(Eo(n, fo)), t.parentNode = fo.documentElement) : (t = co(n), t.parentNode = null), E([t])
    }, Co.on = function(n, t, e) {
        var r = arguments.length;
        if (3 > r) {
            if ("string" != typeof n) {
                2 > r && (t = !1);
                for (e in n) this.each(X(e, n[e], t));
                return this
            }
            if (2 > r) return (r = this.node()["__on" + n]) && r._;
            e = !1
        }
        return this.each(X(n, t, e))
    };
    var To = ao.map({
        mouseenter: "mouseover",
        mouseleave: "mouseout"
    });
    fo && To.forEach(function(n) {
        "on" + n in fo && To.remove(n)
    });
    var Ro, Do = 0;
    ao.mouse = function(n) {
        return J(n, k())
    };
    var Po = this.navigator && /WebKit/.test(this.navigator.userAgent) ? -1 : 0;
    ao.touch = function(n, t, e) {
        if (arguments.length < 3 && (e = t, t = k().changedTouches), t)
            for (var r, i = 0, u = t.length; u > i; ++i)
                if ((r = t[i]).identifier === e) return J(n, r)
    }, ao.behavior.drag = function() {
        function n() {
            this.on("mousedown.drag", u).on("touchstart.drag", o)
        }

        function e(n, t, e, u, o) {
            return function() {
                function a() {
                    var n, e, r = t(h, v);
                    r && (n = r[0] - M[0], e = r[1] - M[1], g |= n | e, M = r, p({
                        type: "drag",
                        x: r[0] + c[0],
                        y: r[1] + c[1],
                        dx: n,
                        dy: e
                    }))
                }

                function l() {
                    t(h, v) && (y.on(u + d, null).on(o + d, null), m(g), p({
                        type: "dragend"
                    }))
                }
                var c, f = this,
                    s = ao.event.target.correspondingElement || ao.event.target,
                    h = f.parentNode,
                    p = r.of(f, arguments),
                    g = 0,
                    v = n(),
                    d = ".drag" + (null == v ? "" : "-" + v),
                    y = ao.select(e(s)).on(u + d, a).on(o + d, l),
                    m = W(s),
                    M = t(h, v);
                i ? (c = i.apply(f, arguments), c = [c.x - M[0], c.y - M[1]]) : c = [0, 0], p({
                    type: "dragstart"
                })
            }
        }
        var r = N(n, "drag", "dragstart", "dragend"),
            i = null,
            u = e(b, ao.mouse, t, "mousemove", "mouseup"),
            o = e(G, ao.touch, m, "touchmove", "touchend");
        return n.origin = function(t) {
            return arguments.length ? (i = t, n) : i
        }, ao.rebind(n, r, "on")
    }, ao.touches = function(n, t) {
        return arguments.length < 2 && (t = k().touches), t ? co(t).map(function(t) {
            var e = J(n, t);
            return e.identifier = t.identifier, e
        }) : []
    };
    var Uo = 1e-6,
        jo = Uo * Uo,
        Fo = Math.PI,
        Ho = 2 * Fo,
        Oo = Ho - Uo,
        Io = Fo / 2,
        Yo = Fo / 180,
        Zo = 180 / Fo,
        Vo = Math.SQRT2,
        Xo = 2,
        $o = 4;
    ao.interpolateZoom = function(n, t) {
        var e, r, i = n[0],
            u = n[1],
            o = n[2],
            a = t[0],
            l = t[1],
            c = t[2],
            f = a - i,
            s = l - u,
            h = f * f + s * s;
        if (jo > h) r = Math.log(c / o) / Vo, e = function(n) {
            return [i + n * f, u + n * s, o * Math.exp(Vo * n * r)]
        };
        else {
            var p = Math.sqrt(h),
                g = (c * c - o * o + $o * h) / (2 * o * Xo * p),
                v = (c * c - o * o - $o * h) / (2 * c * Xo * p),
                d = Math.log(Math.sqrt(g * g + 1) - g),
                y = Math.log(Math.sqrt(v * v + 1) - v);
            r = (y - d) / Vo, e = function(n) {
                var t = n * r,
                    e = rn(d),
                    a = o / (Xo * p) * (e * un(Vo * t + d) - en(d));
                return [i + a * f, u + a * s, o * e / rn(Vo * t + d)]
            }
        }
        return e.duration = 1e3 * r, e
    }, ao.behavior.zoom = function() {
        function n(n) {
            n.on(L, s).on(Wo + ".zoom", p).on("dblclick.zoom", g).on(R, h)
        }

        function e(n) {
            return [(n[0] - k.x) / k.k, (n[1] - k.y) / k.k]
        }

        function r(n) {
            return [n[0] * k.k + k.x, n[1] * k.k + k.y]
        }

        function i(n) {
            k.k = Math.max(A[0], Math.min(A[1], n))
        }

        function u(n, t) {
            t = r(t), k.x += n[0] - t[0], k.y += n[1] - t[1]
        }

        function o(t, e, r, o) {
            t.__chart__ = {
                x: k.x,
                y: k.y,
                k: k.k
            }, i(Math.pow(2, o)), u(d = e, r), t = ao.select(t), C > 0 && (t = t.transition().duration(C)), t.call(n.event)
        }

        function a() {
            b && b.domain(x.range().map(function(n) {
                return (n - k.x) / k.k
            }).map(x.invert)), w && w.domain(_.range().map(function(n) {
                return (n - k.y) / k.k
            }).map(_.invert))
        }

        function l(n) {
            z++ || n({
                type: "zoomstart"
            })
        }

        function c(n) {
            a(), n({
                type: "zoom",
                scale: k.k,
                translate: [k.x, k.y]
            })
        }

        function f(n) {
            --z || (n({
                type: "zoomend"
            }), d = null)
        }

        function s() {
            function n() {
                a = 1, u(ao.mouse(i), h), c(o)
            }

            function r() {
                s.on(q, null).on(T, null), p(a), f(o)
            }
            var i = this,
                o = D.of(i, arguments),
                a = 0,
                s = ao.select(t(i)).on(q, n).on(T, r),
                h = e(ao.mouse(i)),
                p = W(i);
            Il.call(i), l(o)
        }

        function h() {
            function n() {
                var n = ao.touches(g);
                return p = k.k, n.forEach(function(n) {
                    n.identifier in d && (d[n.identifier] = e(n))
                }), n
            }

            function t() {
                var t = ao.event.target;
                ao.select(t).on(x, r).on(b, a), _.push(t);
                for (var e = ao.event.changedTouches, i = 0, u = e.length; u > i; ++i) d[e[i].identifier] = null;
                var l = n(),
                    c = Date.now();
                if (1 === l.length) {
                    if (500 > c - M) {
                        var f = l[0];
                        o(g, f, d[f.identifier], Math.floor(Math.log(k.k) / Math.LN2) + 1), S()
                    }
                    M = c
                } else if (l.length > 1) {
                    var f = l[0],
                        s = l[1],
                        h = f[0] - s[0],
                        p = f[1] - s[1];
                    y = h * h + p * p
                }
            }

            function r() {
                var n, t, e, r, o = ao.touches(g);
                Il.call(g);
                for (var a = 0, l = o.length; l > a; ++a, r = null)
                    if (e = o[a], r = d[e.identifier]) {
                        if (t) break;
                        n = e, t = r
                    }
                if (r) {
                    var f = (f = e[0] - n[0]) * f + (f = e[1] - n[1]) * f,
                        s = y && Math.sqrt(f / y);
                    n = [(n[0] + e[0]) / 2, (n[1] + e[1]) / 2], t = [(t[0] + r[0]) / 2, (t[1] + r[1]) / 2], i(s * p)
                }
                M = null, u(n, t), c(v)
            }

            function a() {
                if (ao.event.touches.length) {
                    for (var t = ao.event.changedTouches, e = 0, r = t.length; r > e; ++e) delete d[t[e].identifier];
                    for (var i in d) return void n()
                }
                ao.selectAll(_).on(m, null), w.on(L, s).on(R, h), N(), f(v)
            }
            var p, g = this,
                v = D.of(g, arguments),
                d = {},
                y = 0,
                m = ".zoom-" + ao.event.changedTouches[0].identifier,
                x = "touchmove" + m,
                b = "touchend" + m,
                _ = [],
                w = ao.select(g),
                N = W(g);
            t(), l(v), w.on(L, null).on(R, t)
        }

        function p() {
            var n = D.of(this, arguments);
            m ? clearTimeout(m) : (Il.call(this), v = e(d = y || ao.mouse(this)), l(n)), m = setTimeout(function() {
                m = null, f(n)
            }, 50), S(), i(Math.pow(2, .002 * Bo()) * k.k), u(d, v), c(n)
        }

        function g() {
            var n = ao.mouse(this),
                t = Math.log(k.k) / Math.LN2;
            o(this, n, e(n), ao.event.shiftKey ? Math.ceil(t) - 1 : Math.floor(t) + 1)
        }
        var v, d, y, m, M, x, b, _, w, k = {
                x: 0,
                y: 0,
                k: 1
            },
            E = [960, 500],
            A = Jo,
            C = 250,
            z = 0,
            L = "mousedown.zoom",
            q = "mousemove.zoom",
            T = "mouseup.zoom",
            R = "touchstart.zoom",
            D = N(n, "zoomstart", "zoom", "zoomend");
        return Wo || (Wo = "onwheel" in fo ? (Bo = function() {
            return -ao.event.deltaY * (ao.event.deltaMode ? 120 : 1)
        }, "wheel") : "onmousewheel" in fo ? (Bo = function() {
            return ao.event.wheelDelta
        }, "mousewheel") : (Bo = function() {
            return -ao.event.detail
        }, "MozMousePixelScroll")), n.event = function(n) {
            n.each(function() {
                var n = D.of(this, arguments),
                    t = k;
                Hl ? ao.select(this).transition().each("start.zoom", function() {
                    k = this.__chart__ || {
                        x: 0,
                        y: 0,
                        k: 1
                    }, l(n)
                }).tween("zoom:zoom", function() {
                    var e = E[0],
                        r = E[1],
                        i = d ? d[0] : e / 2,
                        u = d ? d[1] : r / 2,
                        o = ao.interpolateZoom([(i - k.x) / k.k, (u - k.y) / k.k, e / k.k], [(i - t.x) / t.k, (u - t.y) / t.k, e / t.k]);
                    return function(t) {
                        var r = o(t),
                            a = e / r[2];
                        this.__chart__ = k = {
                            x: i - r[0] * a,
                            y: u - r[1] * a,
                            k: a
                        }, c(n)
                    }
                }).each("interrupt.zoom", function() {
                    f(n)
                }).each("end.zoom", function() {
                    f(n)
                }) : (this.__chart__ = k, l(n), c(n), f(n))
            })
        }, n.translate = function(t) {
            return arguments.length ? (k = {
                x: +t[0],
                y: +t[1],
                k: k.k
            }, a(), n) : [k.x, k.y]
        }, n.scale = function(t) {
            return arguments.length ? (k = {
                x: k.x,
                y: k.y,
                k: null
            }, i(+t), a(), n) : k.k
        }, n.scaleExtent = function(t) {
            return arguments.length ? (A = null == t ? Jo : [+t[0], +t[1]], n) : A
        }, n.center = function(t) {
            return arguments.length ? (y = t && [+t[0], +t[1]], n) : y
        }, n.size = function(t) {
            return arguments.length ? (E = t && [+t[0], +t[1]], n) : E
        }, n.duration = function(t) {
            return arguments.length ? (C = +t, n) : C
        }, n.x = function(t) {
            return arguments.length ? (b = t, x = t.copy(), k = {
                x: 0,
                y: 0,
                k: 1
            }, n) : b
        }, n.y = function(t) {
            return arguments.length ? (w = t, _ = t.copy(), k = {
                x: 0,
                y: 0,
                k: 1
            }, n) : w
        }, ao.rebind(n, D, "on")
    };
    var Bo, Wo, Jo = [0, 1 / 0];
    ao.color = an, an.prototype.toString = function() {
        return this.rgb() + ""
    }, ao.hsl = ln;
    var Go = ln.prototype = new an;
    Go.brighter = function(n) {
        return n = Math.pow(.7, arguments.length ? n : 1), new ln(this.h, this.s, this.l / n)
    }, Go.darker = function(n) {
        return n = Math.pow(.7, arguments.length ? n : 1), new ln(this.h, this.s, n * this.l)
    }, Go.rgb = function() {
        return cn(this.h, this.s, this.l)
    }, ao.hcl = fn;
    var Ko = fn.prototype = new an;
    Ko.brighter = function(n) {
        return new fn(this.h, this.c, Math.min(100, this.l + Qo * (arguments.length ? n : 1)))
    }, Ko.darker = function(n) {
        return new fn(this.h, this.c, Math.max(0, this.l - Qo * (arguments.length ? n : 1)))
    }, Ko.rgb = function() {
        return sn(this.h, this.c, this.l).rgb()
    }, ao.lab = hn;
    var Qo = 18,
        na = .95047,
        ta = 1,
        ea = 1.08883,
        ra = hn.prototype = new an;
    ra.brighter = function(n) {
        return new hn(Math.min(100, this.l + Qo * (arguments.length ? n : 1)), this.a, this.b)
    }, ra.darker = function(n) {
        return new hn(Math.max(0, this.l - Qo * (arguments.length ? n : 1)), this.a, this.b)
    }, ra.rgb = function() {
        return pn(this.l, this.a, this.b)
    }, ao.rgb = mn;
    var ia = mn.prototype = new an;
    ia.brighter = function(n) {
        n = Math.pow(.7, arguments.length ? n : 1);
        var t = this.r,
            e = this.g,
            r = this.b,
            i = 30;
        return t || e || r ? (t && i > t && (t = i), e && i > e && (e = i), r && i > r && (r = i), new mn(Math.min(255, t / n), Math.min(255, e / n), Math.min(255, r / n))) : new mn(i, i, i)
    }, ia.darker = function(n) {
        return n = Math.pow(.7, arguments.length ? n : 1), new mn(n * this.r, n * this.g, n * this.b)
    }, ia.hsl = function() {
        return wn(this.r, this.g, this.b)
    }, ia.toString = function() {
        return "#" + bn(this.r) + bn(this.g) + bn(this.b)
    };
    var ua = ao.map({
        aliceblue: 15792383,
        antiquewhite: 16444375,
        aqua: 65535,
        aquamarine: 8388564,
        azure: 15794175,
        beige: 16119260,
        bisque: 16770244,
        black: 0,
        blanchedalmond: 16772045,
        blue: 255,
        blueviolet: 9055202,
        brown: 10824234,
        burlywood: 14596231,
        cadetblue: 6266528,
        chartreuse: 8388352,
        chocolate: 13789470,
        coral: 16744272,
        cornflowerblue: 6591981,
        cornsilk: 16775388,
        crimson: 14423100,
        cyan: 65535,
        darkblue: 139,
        darkcyan: 35723,
        darkgoldenrod: 12092939,
        darkgray: 11119017,
        darkgreen: 25600,
        darkgrey: 11119017,
        darkkhaki: 12433259,
        darkmagenta: 9109643,
        darkolivegreen: 5597999,
        darkorange: 16747520,
        darkorchid: 10040012,
        darkred: 9109504,
        darksalmon: 15308410,
        darkseagreen: 9419919,
        darkslateblue: 4734347,
        darkslategray: 3100495,
        darkslategrey: 3100495,
        darkturquoise: 52945,
        darkviolet: 9699539,
        deeppink: 16716947,
        deepskyblue: 49151,
        dimgray: 6908265,
        dimgrey: 6908265,
        dodgerblue: 2003199,
        firebrick: 11674146,
        floralwhite: 16775920,
        forestgreen: 2263842,
        fuchsia: 16711935,
        gainsboro: 14474460,
        ghostwhite: 16316671,
        gold: 16766720,
        goldenrod: 14329120,
        gray: 8421504,
        green: 32768,
        greenyellow: 11403055,
        grey: 8421504,
        honeydew: 15794160,
        hotpink: 16738740,
        indianred: 13458524,
        indigo: 4915330,
        ivory: 16777200,
        khaki: 15787660,
        lavender: 15132410,
        lavenderblush: 16773365,
        lawngreen: 8190976,
        lemonchiffon: 16775885,
        lightblue: 11393254,
        lightcoral: 15761536,
        lightcyan: 14745599,
        lightgoldenrodyellow: 16448210,
        lightgray: 13882323,
        lightgreen: 9498256,
        lightgrey: 13882323,
        lightpink: 16758465,
        lightsalmon: 16752762,
        lightseagreen: 2142890,
        lightskyblue: 8900346,
        lightslategray: 7833753,
        lightslategrey: 7833753,
        lightsteelblue: 11584734,
        lightyellow: 16777184,
        lime: 65280,
        limegreen: 3329330,
        linen: 16445670,
        magenta: 16711935,
        maroon: 8388608,
        mediumaquamarine: 6737322,
        mediumblue: 205,
        mediumorchid: 12211667,
        mediumpurple: 9662683,
        mediumseagreen: 3978097,
        mediumslateblue: 8087790,
        mediumspringgreen: 64154,
        mediumturquoise: 4772300,
        mediumvioletred: 13047173,
        midnightblue: 1644912,
        mintcream: 16121850,
        mistyrose: 16770273,
        moccasin: 16770229,
        navajowhite: 16768685,
        navy: 128,
        oldlace: 16643558,
        olive: 8421376,
        olivedrab: 7048739,
        orange: 16753920,
        orangered: 16729344,
        orchid: 14315734,
        palegoldenrod: 15657130,
        palegreen: 10025880,
        paleturquoise: 11529966,
        palevioletred: 14381203,
        papayawhip: 16773077,
        peachpuff: 16767673,
        peru: 13468991,
        pink: 16761035,
        plum: 14524637,
        powderblue: 11591910,
        purple: 8388736,
        rebeccapurple: 6697881,
        red: 16711680,
        rosybrown: 12357519,
        royalblue: 4286945,
        saddlebrown: 9127187,
        salmon: 16416882,
        sandybrown: 16032864,
        seagreen: 3050327,
        seashell: 16774638,
        sienna: 10506797,
        silver: 12632256,
        skyblue: 8900331,
        slateblue: 6970061,
        slategray: 7372944,
        slategrey: 7372944,
        snow: 16775930,
        springgreen: 65407,
        steelblue: 4620980,
        tan: 13808780,
        teal: 32896,
        thistle: 14204888,
        tomato: 16737095,
        turquoise: 4251856,
        violet: 15631086,
        wheat: 16113331,
        white: 16777215,
        whitesmoke: 16119285,
        yellow: 16776960,
        yellowgreen: 10145074
    });
    ua.forEach(function(n, t) {
        ua.set(n, Mn(t))
    }), ao.functor = En, ao.xhr = An(m), ao.dsv = function(n, t) {
        function e(n, e, u) {
            arguments.length < 3 && (u = e, e = null);
            var o = Cn(n, t, null == e ? r : i(e), u);
            return o.row = function(n) {
                return arguments.length ? o.response(null == (e = n) ? r : i(n)) : e
            }, o
        }

        function r(n) {
            return e.parse(n.responseText)
        }

        function i(n) {
            return function(t) {
                return e.parse(t.responseText, n)
            }
        }

        function u(t) {
            return t.map(o).join(n)
        }

        function o(n) {
            return a.test(n) ? '"' + n.replace(/\"/g, '""') + '"' : n
        }
        var a = new RegExp('["' + n + "\n]"),
            l = n.charCodeAt(0);
        return e.parse = function(n, t) {
            var r;
            return e.parseRows(n, function(n, e) {
                if (r) return r(n, e - 1);
                var i = new Function("d", "return {" + n.map(function(n, t) {
                    return JSON.stringify(n) + ": d[" + t + "]"
                }).join(",") + "}");
                r = t ? function(n, e) {
                    return t(i(n), e)
                } : i
            })
        }, e.parseRows = function(n, t) {
            function e() {
                if (f >= c) return o;
                if (i) return i = !1, u;
                var t = f;
                if (34 === n.charCodeAt(t)) {
                    for (var e = t; e++ < c;)
                        if (34 === n.charCodeAt(e)) {
                            if (34 !== n.charCodeAt(e + 1)) break;
                            ++e
                        }
                    f = e + 2;
                    var r = n.charCodeAt(e + 1);
                    return 13 === r ? (i = !0, 10 === n.charCodeAt(e + 2) && ++f) : 10 === r && (i = !0), n.slice(t + 1, e).replace(/""/g, '"')
                }
                for (; c > f;) {
                    var r = n.charCodeAt(f++),
                        a = 1;
                    if (10 === r) i = !0;
                    else if (13 === r) i = !0, 10 === n.charCodeAt(f) && (++f, ++a);
                    else if (r !== l) continue;
                    return n.slice(t, f - a)
                }
                return n.slice(t)
            }
            for (var r, i, u = {}, o = {}, a = [], c = n.length, f = 0, s = 0;
                (r = e()) !== o;) {
                for (var h = []; r !== u && r !== o;) h.push(r), r = e();
                t && null == (h = t(h, s++)) || a.push(h)
            }
            return a
        }, e.format = function(t) {
            if (Array.isArray(t[0])) return e.formatRows(t);
            var r = new y,
                i = [];
            return t.forEach(function(n) {
                for (var t in n) r.has(t) || i.push(r.add(t))
            }), [i.map(o).join(n)].concat(t.map(function(t) {
                return i.map(function(n) {
                    return o(t[n])
                }).join(n)
            })).join("\n")
        }, e.formatRows = function(n) {
            return n.map(u).join("\n")
        }, e
    }, ao.csv = ao.dsv(",", "text/csv"), ao.tsv = ao.dsv("	", "text/tab-separated-values");
    var oa, aa, la, ca, fa = this[x(this, "requestAnimationFrame")] || function(n) {
        setTimeout(n, 17)
    };
    ao.timer = function() {
        qn.apply(this, arguments)
    }, ao.timer.flush = function() {
        Rn(), Dn()
    }, ao.round = function(n, t) {
        return t ? Math.round(n * (t = Math.pow(10, t))) / t : Math.round(n)
    };
    var sa = ["y", "z", "a", "f", "p", "n", "", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"].map(Un);
    ao.formatPrefix = function(n, t) {
        var e = 0;
        return (n = +n) && (0 > n && (n *= -1), t && (n = ao.round(n, Pn(n, t))), e = 1 + Math.floor(1e-12 + Math.log(n) / Math.LN10), e = Math.max(-24, Math.min(24, 3 * Math.floor((e - 1) / 3)))), sa[8 + e / 3]
    };
    var ha = /(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,
        pa = ao.map({
            b: function(n) {
                return n.toString(2)
            },
            c: function(n) {
                return String.fromCharCode(n)
            },
            o: function(n) {
                return n.toString(8)
            },
            x: function(n) {
                return n.toString(16)
            },
            X: function(n) {
                return n.toString(16).toUpperCase()
            },
            g: function(n, t) {
                return n.toPrecision(t)
            },
            e: function(n, t) {
                return n.toExponential(t)
            },
            f: function(n, t) {
                return n.toFixed(t)
            },
            r: function(n, t) {
                return (n = ao.round(n, Pn(n, t))).toFixed(Math.max(0, Math.min(20, Pn(n * (1 + 1e-15), t))))
            }
        }),
        ga = ao.time = {},
        va = Date;
    Hn.prototype = {
        getDate: function() {
            return this._.getUTCDate()
        },
        getDay: function() {
            return this._.getUTCDay()
        },
        getFullYear: function() {
            return this._.getUTCFullYear()
        },
        getHours: function() {
            return this._.getUTCHours()
        },
        getMilliseconds: function() {
            return this._.getUTCMilliseconds()
        },
        getMinutes: function() {
            return this._.getUTCMinutes()
        },
        getMonth: function() {
            return this._.getUTCMonth()
        },
        getSeconds: function() {
            return this._.getUTCSeconds()
        },
        getTime: function() {
            return this._.getTime()
        },
        getTimezoneOffset: function() {
            return 0
        },
        valueOf: function() {
            return this._.valueOf()
        },
        setDate: function() {
            da.setUTCDate.apply(this._, arguments)
        },
        setDay: function() {
            da.setUTCDay.apply(this._, arguments)
        },
        setFullYear: function() {
            da.setUTCFullYear.apply(this._, arguments)
        },
        setHours: function() {
            da.setUTCHours.apply(this._, arguments)
        },
        setMilliseconds: function() {
            da.setUTCMilliseconds.apply(this._, arguments)
        },
        setMinutes: function() {
            da.setUTCMinutes.apply(this._, arguments)
        },
        setMonth: function() {
            da.setUTCMonth.apply(this._, arguments)
        },
        setSeconds: function() {
            da.setUTCSeconds.apply(this._, arguments)
        },
        setTime: function() {
            da.setTime.apply(this._, arguments)
        }
    };
    var da = Date.prototype;
    ga.year = On(function(n) {
        return n = ga.day(n), n.setMonth(0, 1), n
    }, function(n, t) {
        n.setFullYear(n.getFullYear() + t)
    }, function(n) {
        return n.getFullYear()
    }), ga.years = ga.year.range, ga.years.utc = ga.year.utc.range, ga.day = On(function(n) {
        var t = new va(2e3, 0);
        return t.setFullYear(n.getFullYear(), n.getMonth(), n.getDate()), t
    }, function(n, t) {
        n.setDate(n.getDate() + t)
    }, function(n) {
        return n.getDate() - 1
    }), ga.days = ga.day.range, ga.days.utc = ga.day.utc.range, ga.dayOfYear = function(n) {
        var t = ga.year(n);
        return Math.floor((n - t - 6e4 * (n.getTimezoneOffset() - t.getTimezoneOffset())) / 864e5)
    }, ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"].forEach(function(n, t) {
        t = 7 - t;
        var e = ga[n] = On(function(n) {
            return (n = ga.day(n)).setDate(n.getDate() - (n.getDay() + t) % 7), n
        }, function(n, t) {
            n.setDate(n.getDate() + 7 * Math.floor(t))
        }, function(n) {
            var e = ga.year(n).getDay();
            return Math.floor((ga.dayOfYear(n) + (e + t) % 7) / 7) - (e !== t)
        });
        ga[n + "s"] = e.range, ga[n + "s"].utc = e.utc.range, ga[n + "OfYear"] = function(n) {
            var e = ga.year(n).getDay();
            return Math.floor((ga.dayOfYear(n) + (e + t) % 7) / 7)
        }
    }), ga.week = ga.sunday, ga.weeks = ga.sunday.range, ga.weeks.utc = ga.sunday.utc.range, ga.weekOfYear = ga.sundayOfYear;
    var ya = {
            "-": "",
            _: " ",
            0: "0"
        },
        ma = /^\s*\d+/,
        Ma = /^%/;
    ao.locale = function(n) {
        return {
            numberFormat: jn(n),
            timeFormat: Yn(n)
        }
    };
    var xa = ao.locale({
        decimal: ".",
        thousands: ",",
        grouping: [3],
        currency: ["$", ""],
        dateTime: "%a %b %e %X %Y",
        date: "%m/%d/%Y",
        time: "%H:%M:%S",
        periods: ["AM", "PM"],
        days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
        shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
        months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
    });
    ao.format = xa.numberFormat, ao.geo = {}, ft.prototype = {
        s: 0,
        t: 0,
        add: function(n) {
            st(n, this.t, ba), st(ba.s, this.s, this), this.s ? this.t += ba.t : this.s = ba.t
        },
        reset: function() {
            this.s = this.t = 0
        },
        valueOf: function() {
            return this.s
        }
    };
    var ba = new ft;
    ao.geo.stream = function(n, t) {
        n && _a.hasOwnProperty(n.type) ? _a[n.type](n, t) : ht(n, t)
    };
    var _a = {
            Feature: function(n, t) {
                ht(n.geometry, t)
            },
            FeatureCollection: function(n, t) {
                for (var e = n.features, r = -1, i = e.length; ++r < i;) ht(e[r].geometry, t)
            }
        },
        wa = {
            Sphere: function(n, t) {
                t.sphere()
            },
            Point: function(n, t) {
                n = n.coordinates, t.point(n[0], n[1], n[2])
            },
            MultiPoint: function(n, t) {
                for (var e = n.coordinates, r = -1, i = e.length; ++r < i;) n = e[r], t.point(n[0], n[1], n[2])
            },
            LineString: function(n, t) {
                pt(n.coordinates, t, 0)
            },
            MultiLineString: function(n, t) {
                for (var e = n.coordinates, r = -1, i = e.length; ++r < i;) pt(e[r], t, 0)
            },
            Polygon: function(n, t) {
                gt(n.coordinates, t)
            },
            MultiPolygon: function(n, t) {
                for (var e = n.coordinates, r = -1, i = e.length; ++r < i;) gt(e[r], t)
            },
            GeometryCollection: function(n, t) {
                for (var e = n.geometries, r = -1, i = e.length; ++r < i;) ht(e[r], t)
            }
        };
    ao.geo.area = function(n) {
        return Sa = 0, ao.geo.stream(n, Na), Sa
    };
    var Sa, ka = new ft,
        Na = {
            sphere: function() {
                Sa += 4 * Fo
            },
            point: b,
            lineStart: b,
            lineEnd: b,
            polygonStart: function() {
                ka.reset(), Na.lineStart = vt
            },
            polygonEnd: function() {
                var n = 2 * ka;
                Sa += 0 > n ? 4 * Fo + n : n, Na.lineStart = Na.lineEnd = Na.point = b
            }
        };
    ao.geo.bounds = function() {
        function n(n, t) {
            M.push(x = [f = n, h = n]), s > t && (s = t), t > p && (p = t)
        }

        function t(t, e) {
            var r = dt([t * Yo, e * Yo]);
            if (y) {
                var i = mt(y, r),
                    u = [i[1], -i[0], 0],
                    o = mt(u, i);
                bt(o), o = _t(o);
                var l = t - g,
                    c = l > 0 ? 1 : -1,
                    v = o[0] * Zo * c,
                    d = xo(l) > 180;
                if (d ^ (v > c * g && c * t > v)) {
                    var m = o[1] * Zo;
                    m > p && (p = m)
                } else if (v = (v + 360) % 360 - 180, d ^ (v > c * g && c * t > v)) {
                    var m = -o[1] * Zo;
                    s > m && (s = m)
                } else s > e && (s = e), e > p && (p = e);
                d ? g > t ? a(f, t) > a(f, h) && (h = t) : a(t, h) > a(f, h) && (f = t) : h >= f ? (f > t && (f = t), t > h && (h = t)) : t > g ? a(f, t) > a(f, h) && (h = t) : a(t, h) > a(f, h) && (f = t)
            } else n(t, e);
            y = r, g = t
        }

        function e() {
            b.point = t
        }

        function r() {
            x[0] = f, x[1] = h, b.point = n, y = null
        }

        function i(n, e) {
            if (y) {
                var r = n - g;
                m += xo(r) > 180 ? r + (r > 0 ? 360 : -360) : r
            } else v = n, d = e;
            Na.point(n, e), t(n, e)
        }

        function u() {
            Na.lineStart()
        }

        function o() {
            i(v, d), Na.lineEnd(), xo(m) > Uo && (f = -(h = 180)), x[0] = f, x[1] = h, y = null
        }

        function a(n, t) {
            return (t -= n) < 0 ? t + 360 : t
        }

        function l(n, t) {
            return n[0] - t[0]
        }

        function c(n, t) {
            return t[0] <= t[1] ? t[0] <= n && n <= t[1] : n < t[0] || t[1] < n
        }
        var f, s, h, p, g, v, d, y, m, M, x, b = {
            point: n,
            lineStart: e,
            lineEnd: r,
            polygonStart: function() {
                b.point = i, b.lineStart = u, b.lineEnd = o, m = 0, Na.polygonStart()
            },
            polygonEnd: function() {
                Na.polygonEnd(), b.point = n, b.lineStart = e, b.lineEnd = r, 0 > ka ? (f = -(h = 180), s = -(p = 90)) : m > Uo ? p = 90 : -Uo > m && (s = -90), x[0] = f, x[1] = h
            }
        };
        return function(n) {
            p = h = -(f = s = 1 / 0), M = [], ao.geo.stream(n, b);
            var t = M.length;
            if (t) {
                M.sort(l);
                for (var e, r = 1, i = M[0], u = [i]; t > r; ++r) e = M[r], c(e[0], i) || c(e[1], i) ? (a(i[0], e[1]) > a(i[0], i[1]) && (i[1] = e[1]), a(e[0], i[1]) > a(i[0], i[1]) && (i[0] = e[0])) : u.push(i = e);
                for (var o, e, g = -(1 / 0), t = u.length - 1, r = 0, i = u[t]; t >= r; i = e, ++r) e = u[r], (o = a(i[1], e[0])) > g && (g = o, f = e[0], h = i[1])
            }
            return M = x = null, f === 1 / 0 || s === 1 / 0 ? [
                [NaN, NaN],
                [NaN, NaN]
            ] : [
                [f, s],
                [h, p]
            ]
        }
    }(), ao.geo.centroid = function(n) {
        Ea = Aa = Ca = za = La = qa = Ta = Ra = Da = Pa = Ua = 0, ao.geo.stream(n, ja);
        var t = Da,
            e = Pa,
            r = Ua,
            i = t * t + e * e + r * r;
        return jo > i && (t = qa, e = Ta, r = Ra, Uo > Aa && (t = Ca, e = za, r = La), i = t * t + e * e + r * r, jo > i) ? [NaN, NaN] : [Math.atan2(e, t) * Zo, tn(r / Math.sqrt(i)) * Zo]
    };
    var Ea, Aa, Ca, za, La, qa, Ta, Ra, Da, Pa, Ua, ja = {
            sphere: b,
            point: St,
            lineStart: Nt,
            lineEnd: Et,
            polygonStart: function() {
                ja.lineStart = At
            },
            polygonEnd: function() {
                ja.lineStart = Nt
            }
        },
        Fa = Rt(zt, jt, Ht, [-Fo, -Fo / 2]),
        Ha = 1e9;
    ao.geo.clipExtent = function() {
        var n, t, e, r, i, u, o = {
            stream: function(n) {
                return i && (i.valid = !1), i = u(n), i.valid = !0, i
            },
            extent: function(a) {
                return arguments.length ? (u = Zt(n = +a[0][0], t = +a[0][1], e = +a[1][0], r = +a[1][1]), i && (i.valid = !1, i = null), o) : [
                    [n, t],
                    [e, r]
                ]
            }
        };
        return o.extent([
            [0, 0],
            [960, 500]
        ])
    }, (ao.geo.conicEqualArea = function() {
        return Vt(Xt)
    }).raw = Xt, ao.geo.albers = function() {
        return ao.geo.conicEqualArea().rotate([96, 0]).center([-.6, 38.7]).parallels([29.5, 45.5]).scale(1070)
    }, ao.geo.albersUsa = function() {
        function n(n) {
            var u = n[0],
                o = n[1];
            return t = null, e(u, o), t || (r(u, o), t) || i(u, o), t
        }
        var t, e, r, i, u = ao.geo.albers(),
            o = ao.geo.conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]),
            a = ao.geo.conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]),
            l = {
                point: function(n, e) {
                    t = [n, e]
                }
            };
        return n.invert = function(n) {
            var t = u.scale(),
                e = u.translate(),
                r = (n[0] - e[0]) / t,
                i = (n[1] - e[1]) / t;
            return (i >= .12 && .234 > i && r >= -.425 && -.214 > r ? o : i >= .166 && .234 > i && r >= -.214 && -.115 > r ? a : u).invert(n)
        }, n.stream = function(n) {
            var t = u.stream(n),
                e = o.stream(n),
                r = a.stream(n);
            return {
                point: function(n, i) {
                    t.point(n, i), e.point(n, i), r.point(n, i)
                },
                sphere: function() {
                    t.sphere(), e.sphere(), r.sphere()
                },
                lineStart: function() {
                    t.lineStart(), e.lineStart(), r.lineStart()
                },
                lineEnd: function() {
                    t.lineEnd(), e.lineEnd(), r.lineEnd()
                },
                polygonStart: function() {
                    t.polygonStart(), e.polygonStart(), r.polygonStart()
                },
                polygonEnd: function() {
                    t.polygonEnd(), e.polygonEnd(), r.polygonEnd()
                }
            }
        }, n.precision = function(t) {
            return arguments.length ? (u.precision(t), o.precision(t), a.precision(t), n) : u.precision()
        }, n.scale = function(t) {
            return arguments.length ? (u.scale(t), o.scale(.35 * t), a.scale(t), n.translate(u.translate())) : u.scale()
        }, n.translate = function(t) {
            if (!arguments.length) return u.translate();
            var c = u.scale(),
                f = +t[0],
                s = +t[1];
            return e = u.translate(t).clipExtent([
                [f - .455 * c, s - .238 * c],
                [f + .455 * c, s + .238 * c]
            ]).stream(l).point, r = o.translate([f - .307 * c, s + .201 * c]).clipExtent([
                [f - .425 * c + Uo, s + .12 * c + Uo],
                [f - .214 * c - Uo, s + .234 * c - Uo]
            ]).stream(l).point, i = a.translate([f - .205 * c, s + .212 * c]).clipExtent([
                [f - .214 * c + Uo, s + .166 * c + Uo],
                [f - .115 * c - Uo, s + .234 * c - Uo]
            ]).stream(l).point, n
        }, n.scale(1070)
    };
    var Oa, Ia, Ya, Za, Va, Xa, $a = {
            point: b,
            lineStart: b,
            lineEnd: b,
            polygonStart: function() {
                Ia = 0, $a.lineStart = $t
            },
            polygonEnd: function() {
                $a.lineStart = $a.lineEnd = $a.point = b, Oa += xo(Ia / 2)
            }
        },
        Ba = {
            point: Bt,
            lineStart: b,
            lineEnd: b,
            polygonStart: b,
            polygonEnd: b
        },
        Wa = {
            point: Gt,
            lineStart: Kt,
            lineEnd: Qt,
            polygonStart: function() {
                Wa.lineStart = ne
            },
            polygonEnd: function() {
                Wa.point = Gt, Wa.lineStart = Kt, Wa.lineEnd = Qt
            }
        };
    ao.geo.path = function() {
        function n(n) {
            return n && ("function" == typeof a && u.pointRadius(+a.apply(this, arguments)), o && o.valid || (o = i(u)), ao.geo.stream(n, o)), u.result()
        }

        function t() {
            return o = null, n
        }
        var e, r, i, u, o, a = 4.5;
        return n.area = function(n) {
            return Oa = 0, ao.geo.stream(n, i($a)), Oa
        }, n.centroid = function(n) {
            return Ca = za = La = qa = Ta = Ra = Da = Pa = Ua = 0, ao.geo.stream(n, i(Wa)), Ua ? [Da / Ua, Pa / Ua] : Ra ? [qa / Ra, Ta / Ra] : La ? [Ca / La, za / La] : [NaN, NaN]
        }, n.bounds = function(n) {
            return Va = Xa = -(Ya = Za = 1 / 0), ao.geo.stream(n, i(Ba)), [
                [Ya, Za],
                [Va, Xa]
            ]
        }, n.projection = function(n) {
            return arguments.length ? (i = (e = n) ? n.stream || re(n) : m, t()) : e
        }, n.context = function(n) {
            return arguments.length ? (u = null == (r = n) ? new Wt : new te(n), "function" != typeof a && u.pointRadius(a), t()) : r
        }, n.pointRadius = function(t) {
            return arguments.length ? (a = "function" == typeof t ? t : (u.pointRadius(+t), +t), n) : a
        }, n.projection(ao.geo.albersUsa()).context(null)
    }, ao.geo.transform = function(n) {
        return {
            stream: function(t) {
                var e = new ie(t);
                for (var r in n) e[r] = n[r];
                return e
            }
        }
    }, ie.prototype = {
        point: function(n, t) {
            this.stream.point(n, t)
        },
        sphere: function() {
            this.stream.sphere()
        },
        lineStart: function() {
            this.stream.lineStart()
        },
        lineEnd: function() {
            this.stream.lineEnd()
        },
        polygonStart: function() {
            this.stream.polygonStart()
        },
        polygonEnd: function() {
            this.stream.polygonEnd()
        }
    }, ao.geo.projection = oe, ao.geo.projectionMutator = ae, (ao.geo.equirectangular = function() {
        return oe(ce)
    }).raw = ce.invert = ce, ao.geo.rotation = function(n) {
        function t(t) {
            return t = n(t[0] * Yo, t[1] * Yo), t[0] *= Zo, t[1] *= Zo, t
        }
        return n = se(n[0] % 360 * Yo, n[1] * Yo, n.length > 2 ? n[2] * Yo : 0), t.invert = function(t) {
            return t = n.invert(t[0] * Yo, t[1] * Yo), t[0] *= Zo, t[1] *= Zo, t
        }, t
    }, fe.invert = ce, ao.geo.circle = function() {
        function n() {
            var n = "function" == typeof r ? r.apply(this, arguments) : r,
                t = se(-n[0] * Yo, -n[1] * Yo, 0).invert,
                i = [];
            return e(null, null, 1, {
                point: function(n, e) {
                    i.push(n = t(n, e)), n[0] *= Zo, n[1] *= Zo
                }
            }), {
                type: "Polygon",
                coordinates: [i]
            }
        }
        var t, e, r = [0, 0],
            i = 6;
        return n.origin = function(t) {
            return arguments.length ? (r = t, n) : r
        }, n.angle = function(r) {
            return arguments.length ? (e = ve((t = +r) * Yo, i * Yo), n) : t
        }, n.precision = function(r) {
            return arguments.length ? (e = ve(t * Yo, (i = +r) * Yo), n) : i
        }, n.angle(90)
    }, ao.geo.distance = function(n, t) {
        var e, r = (t[0] - n[0]) * Yo,
            i = n[1] * Yo,
            u = t[1] * Yo,
            o = Math.sin(r),
            a = Math.cos(r),
            l = Math.sin(i),
            c = Math.cos(i),
            f = Math.sin(u),
            s = Math.cos(u);
        return Math.atan2(Math.sqrt((e = s * o) * e + (e = c * f - l * s * a) * e), l * f + c * s * a)
    }, ao.geo.graticule = function() {
        function n() {
            return {
                type: "MultiLineString",
                coordinates: t()
            }
        }

        function t() {
            return ao.range(Math.ceil(u / d) * d, i, d).map(h).concat(ao.range(Math.ceil(c / y) * y, l, y).map(p)).concat(ao.range(Math.ceil(r / g) * g, e, g).filter(function(n) {
                return xo(n % d) > Uo
            }).map(f)).concat(ao.range(Math.ceil(a / v) * v, o, v).filter(function(n) {
                return xo(n % y) > Uo
            }).map(s))
        }
        var e, r, i, u, o, a, l, c, f, s, h, p, g = 10,
            v = g,
            d = 90,
            y = 360,
            m = 2.5;
        return n.lines = function() {
            return t().map(function(n) {
                return {
                    type: "LineString",
                    coordinates: n
                }
            })
        }, n.outline = function() {
            return {
                type: "Polygon",
                coordinates: [h(u).concat(p(l).slice(1), h(i).reverse().slice(1), p(c).reverse().slice(1))]
            }
        }, n.extent = function(t) {
            return arguments.length ? n.majorExtent(t).minorExtent(t) : n.minorExtent()
        }, n.majorExtent = function(t) {
            return arguments.length ? (u = +t[0][0], i = +t[1][0], c = +t[0][1], l = +t[1][1], u > i && (t = u, u = i, i = t), c > l && (t = c, c = l, l = t), n.precision(m)) : [
                [u, c],
                [i, l]
            ]
        }, n.minorExtent = function(t) {
            return arguments.length ? (r = +t[0][0], e = +t[1][0], a = +t[0][1], o = +t[1][1], r > e && (t = r, r = e, e = t), a > o && (t = a, a = o, o = t), n.precision(m)) : [
                [r, a],
                [e, o]
            ]
        }, n.step = function(t) {
            return arguments.length ? n.majorStep(t).minorStep(t) : n.minorStep()
        }, n.majorStep = function(t) {
            return arguments.length ? (d = +t[0], y = +t[1], n) : [d, y]
        }, n.minorStep = function(t) {
            return arguments.length ? (g = +t[0], v = +t[1], n) : [g, v]
        }, n.precision = function(t) {
            return arguments.length ? (m = +t, f = ye(a, o, 90), s = me(r, e, m), h = ye(c, l, 90), p = me(u, i, m), n) : m
        }, n.majorExtent([
            [-180, -90 + Uo],
            [180, 90 - Uo]
        ]).minorExtent([
            [-180, -80 - Uo],
            [180, 80 + Uo]
        ])
    }, ao.geo.greatArc = function() {
        function n() {
            return {
                type: "LineString",
                coordinates: [t || r.apply(this, arguments), e || i.apply(this, arguments)]
            }
        }
        var t, e, r = Me,
            i = xe;
        return n.distance = function() {
            return ao.geo.distance(t || r.apply(this, arguments), e || i.apply(this, arguments))
        }, n.source = function(e) {
            return arguments.length ? (r = e, t = "function" == typeof e ? null : e, n) : r
        }, n.target = function(t) {
            return arguments.length ? (i = t, e = "function" == typeof t ? null : t, n) : i
        }, n.precision = function() {
            return arguments.length ? n : 0
        }, n
    }, ao.geo.interpolate = function(n, t) {
        return be(n[0] * Yo, n[1] * Yo, t[0] * Yo, t[1] * Yo)
    }, ao.geo.length = function(n) {
        return Ja = 0, ao.geo.stream(n, Ga), Ja
    };
    var Ja, Ga = {
            sphere: b,
            point: b,
            lineStart: _e,
            lineEnd: b,
            polygonStart: b,
            polygonEnd: b
        },
        Ka = we(function(n) {
            return Math.sqrt(2 / (1 + n))
        }, function(n) {
            return 2 * Math.asin(n / 2)
        });
    (ao.geo.azimuthalEqualArea = function() {
        return oe(Ka)
    }).raw = Ka;
    var Qa = we(function(n) {
        var t = Math.acos(n);
        return t && t / Math.sin(t)
    }, m);
    (ao.geo.azimuthalEquidistant = function() {
        return oe(Qa)
    }).raw = Qa, (ao.geo.conicConformal = function() {
        return Vt(Se)
    }).raw = Se, (ao.geo.conicEquidistant = function() {
        return Vt(ke)
    }).raw = ke;
    var nl = we(function(n) {
        return 1 / n
    }, Math.atan);
    (ao.geo.gnomonic = function() {
        return oe(nl)
    }).raw = nl, Ne.invert = function(n, t) {
        return [n, 2 * Math.atan(Math.exp(t)) - Io]
    }, (ao.geo.mercator = function() {
        return Ee(Ne)
    }).raw = Ne;
    var tl = we(function() {
        return 1
    }, Math.asin);
    (ao.geo.orthographic = function() {
        return oe(tl)
    }).raw = tl;
    var el = we(function(n) {
        return 1 / (1 + n)
    }, function(n) {
        return 2 * Math.atan(n)
    });
    (ao.geo.stereographic = function() {
        return oe(el)
    }).raw = el, Ae.invert = function(n, t) {
        return [-t, 2 * Math.atan(Math.exp(n)) - Io]
    }, (ao.geo.transverseMercator = function() {
        var n = Ee(Ae),
            t = n.center,
            e = n.rotate;
        return n.center = function(n) {
            return n ? t([-n[1], n[0]]) : (n = t(), [n[1], -n[0]])
        }, n.rotate = function(n) {
            return n ? e([n[0], n[1], n.length > 2 ? n[2] + 90 : 90]) : (n = e(), [n[0], n[1], n[2] - 90])
        }, e([0, 0, 90])
    }).raw = Ae, ao.geom = {}, ao.geom.hull = function(n) {
        function t(n) {
            if (n.length < 3) return [];
            var t, i = En(e),
                u = En(r),
                o = n.length,
                a = [],
                l = [];
            for (t = 0; o > t; t++) a.push([+i.call(this, n[t], t), +u.call(this, n[t], t), t]);
            for (a.sort(qe), t = 0; o > t; t++) l.push([a[t][0], -a[t][1]]);
            var c = Le(a),
                f = Le(l),
                s = f[0] === c[0],
                h = f[f.length - 1] === c[c.length - 1],
                p = [];
            for (t = c.length - 1; t >= 0; --t) p.push(n[a[c[t]][2]]);
            for (t = +s; t < f.length - h; ++t) p.push(n[a[f[t]][2]]);
            return p
        }
        var e = Ce,
            r = ze;
        return arguments.length ? t(n) : (t.x = function(n) {
            return arguments.length ? (e = n, t) : e
        }, t.y = function(n) {
            return arguments.length ? (r = n, t) : r
        }, t)
    }, ao.geom.polygon = function(n) {
        return ko(n, rl), n
    };
    var rl = ao.geom.polygon.prototype = [];
    rl.area = function() {
        for (var n, t = -1, e = this.length, r = this[e - 1], i = 0; ++t < e;) n = r, r = this[t], i += n[1] * r[0] - n[0] * r[1];
        return .5 * i
    }, rl.centroid = function(n) {
        var t, e, r = -1,
            i = this.length,
            u = 0,
            o = 0,
            a = this[i - 1];
        for (arguments.length || (n = -1 / (6 * this.area())); ++r < i;) t = a, a = this[r], e = t[0] * a[1] - a[0] * t[1], u += (t[0] + a[0]) * e, o += (t[1] + a[1]) * e;
        return [u * n, o * n]
    }, rl.clip = function(n) {
        for (var t, e, r, i, u, o, a = De(n), l = -1, c = this.length - De(this), f = this[c - 1]; ++l < c;) {
            for (t = n.slice(), n.length = 0, i = this[l], u = t[(r = t.length - a) - 1], e = -1; ++e < r;) o = t[e], Te(o, f, i) ? (Te(u, f, i) || n.push(Re(u, o, f, i)), n.push(o)) : Te(u, f, i) && n.push(Re(u, o, f, i)), u = o;
            a && n.push(n[0]), f = i
        }
        return n
    };
    var il, ul, ol, al, ll, cl = [],
        fl = [];
    Ye.prototype.prepare = function() {
        for (var n, t = this.edges, e = t.length; e--;) n = t[e].edge, n.b && n.a || t.splice(e, 1);
        return t.sort(Ve), t.length
    }, tr.prototype = {
        start: function() {
            return this.edge.l === this.site ? this.edge.a : this.edge.b
        },
        end: function() {
            return this.edge.l === this.site ? this.edge.b : this.edge.a
        }
    }, er.prototype = {
        insert: function(n, t) {
            var e, r, i;
            if (n) {
                if (t.P = n, t.N = n.N, n.N && (n.N.P = t), n.N = t, n.R) {
                    for (n = n.R; n.L;) n = n.L;
                    n.L = t
                } else n.R = t;
                e = n
            } else this._ ? (n = or(this._), t.P = null, t.N = n, n.P = n.L = t, e = n) : (t.P = t.N = null, this._ = t, e = null);
            for (t.L = t.R = null, t.U = e, t.C = !0, n = t; e && e.C;) r = e.U, e === r.L ? (i = r.R, i && i.C ? (e.C = i.C = !1, r.C = !0, n = r) : (n === e.R && (ir(this, e), n = e, e = n.U), e.C = !1, r.C = !0, ur(this, r))) : (i = r.L, i && i.C ? (e.C = i.C = !1, r.C = !0, n = r) : (n === e.L && (ur(this, e), n = e, e = n.U), e.C = !1, r.C = !0, ir(this, r))), e = n.U;
            this._.C = !1
        },
        remove: function(n) {
            n.N && (n.N.P = n.P), n.P && (n.P.N = n.N), n.N = n.P = null;
            var t, e, r, i = n.U,
                u = n.L,
                o = n.R;
            if (e = u ? o ? or(o) : u : o, i ? i.L === n ? i.L = e : i.R = e : this._ = e, u && o ? (r = e.C, e.C = n.C, e.L = u, u.U = e, e !== o ? (i = e.U, e.U = n.U, n = e.R, i.L = n, e.R = o, o.U = e) : (e.U = i, i = e, n = e.R)) : (r = n.C, n = e), n && (n.U = i), !r) {
                if (n && n.C) return void(n.C = !1);
                do {
                    if (n === this._) break;
                    if (n === i.L) {
                        if (t = i.R, t.C && (t.C = !1, i.C = !0, ir(this, i), t = i.R), t.L && t.L.C || t.R && t.R.C) {
                            t.R && t.R.C || (t.L.C = !1, t.C = !0, ur(this, t), t = i.R), t.C = i.C, i.C = t.R.C = !1, ir(this, i), n = this._;
                            break
                        }
                    } else if (t = i.L, t.C && (t.C = !1, i.C = !0, ur(this, i), t = i.L), t.L && t.L.C || t.R && t.R.C) {
                        t.L && t.L.C || (t.R.C = !1, t.C = !0, ir(this, t), t = i.L), t.C = i.C, i.C = t.L.C = !1, ur(this, i), n = this._;
                        break
                    }
                    t.C = !0, n = i, i = i.U
                } while (!n.C);
                n && (n.C = !1)
            }
        }
    }, ao.geom.voronoi = function(n) {
        function t(n) {
            var t = new Array(n.length),
                r = a[0][0],
                i = a[0][1],
                u = a[1][0],
                o = a[1][1];
            return ar(e(n), a).cells.forEach(function(e, a) {
                var l = e.edges,
                    c = e.site,
                    f = t[a] = l.length ? l.map(function(n) {
                        var t = n.start();
                        return [t.x, t.y]
                    }) : c.x >= r && c.x <= u && c.y >= i && c.y <= o ? [
                        [r, o],
                        [u, o],
                        [u, i],
                        [r, i]
                    ] : [];
                f.point = n[a]
            }), t
        }

        function e(n) {
            return n.map(function(n, t) {
                return {
                    x: Math.round(u(n, t) / Uo) * Uo,
                    y: Math.round(o(n, t) / Uo) * Uo,
                    i: t
                }
            })
        }
        var r = Ce,
            i = ze,
            u = r,
            o = i,
            a = sl;
        return n ? t(n) : (t.links = function(n) {
            return ar(e(n)).edges.filter(function(n) {
                return n.l && n.r
            }).map(function(t) {
                return {
                    source: n[t.l.i],
                    target: n[t.r.i]
                }
            })
        }, t.triangles = function(n) {
            var t = [];
            return ar(e(n)).cells.forEach(function(e, r) {
                for (var i, u, o = e.site, a = e.edges.sort(Ve), l = -1, c = a.length, f = a[c - 1].edge, s = f.l === o ? f.r : f.l; ++l < c;) i = f, u = s, f = a[l].edge, s = f.l === o ? f.r : f.l, r < u.i && r < s.i && cr(o, u, s) < 0 && t.push([n[r], n[u.i], n[s.i]])
            }), t
        }, t.x = function(n) {
            return arguments.length ? (u = En(r = n), t) : r
        }, t.y = function(n) {
            return arguments.length ? (o = En(i = n), t) : i
        }, t.clipExtent = function(n) {
            return arguments.length ? (a = null == n ? sl : n, t) : a === sl ? null : a
        }, t.size = function(n) {
            return arguments.length ? t.clipExtent(n && [
                [0, 0], n
            ]) : a === sl ? null : a && a[1]
        }, t)
    };
    var sl = [
        [-1e6, -1e6],
        [1e6, 1e6]
    ];
    ao.geom.delaunay = function(n) {
        return ao.geom.voronoi().triangles(n)
    }, ao.geom.quadtree = function(n, t, e, r, i) {
        function u(n) {
            function u(n, t, e, r, i, u, o, a) {
                if (!isNaN(e) && !isNaN(r))
                    if (n.leaf) {
                        var l = n.x,
                            f = n.y;
                        if (null != l)
                            if (xo(l - e) + xo(f - r) < .01) c(n, t, e, r, i, u, o, a);
                            else {
                                var s = n.point;
                                n.x = n.y = n.point = null, c(n, s, l, f, i, u, o, a), c(n, t, e, r, i, u, o, a)
                            }
                        else n.x = e, n.y = r, n.point = t
                    } else c(n, t, e, r, i, u, o, a)
            }

            function c(n, t, e, r, i, o, a, l) {
                var c = .5 * (i + a),
                    f = .5 * (o + l),
                    s = e >= c,
                    h = r >= f,
                    p = h << 1 | s;
                n.leaf = !1, n = n.nodes[p] || (n.nodes[p] = hr()), s ? i = c : a = c, h ? o = f : l = f, u(n, t, e, r, i, o, a, l)
            }
            var f, s, h, p, g, v, d, y, m, M = En(a),
                x = En(l);
            if (null != t) v = t, d = e, y = r, m = i;
            else if (y = m = -(v = d = 1 / 0), s = [], h = [], g = n.length, o)
                for (p = 0; g > p; ++p) f = n[p], f.x < v && (v = f.x), f.y < d && (d = f.y), f.x > y && (y = f.x), f.y > m && (m = f.y), s.push(f.x), h.push(f.y);
            else
                for (p = 0; g > p; ++p) {
                    var b = +M(f = n[p], p),
                        _ = +x(f, p);
                    v > b && (v = b), d > _ && (d = _), b > y && (y = b), _ > m && (m = _), s.push(b), h.push(_)
                }
            var w = y - v,
                S = m - d;
            w > S ? m = d + w : y = v + S;
            var k = hr();
            if (k.add = function(n) {
                    u(k, n, +M(n, ++p), +x(n, p), v, d, y, m)
                }, k.visit = function(n) {
                    pr(n, k, v, d, y, m)
                }, k.find = function(n) {
                    return gr(k, n[0], n[1], v, d, y, m)
                }, p = -1, null == t) {
                for (; ++p < g;) u(k, n[p], s[p], h[p], v, d, y, m);
                --p
            } else n.forEach(k.add);
            return s = h = n = f = null, k
        }
        var o, a = Ce,
            l = ze;
        return (o = arguments.length) ? (a = fr, l = sr, 3 === o && (i = e, r = t, e = t = 0), u(n)) : (u.x = function(n) {
            return arguments.length ? (a = n, u) : a
        }, u.y = function(n) {
            return arguments.length ? (l = n, u) : l
        }, u.extent = function(n) {
            return arguments.length ? (null == n ? t = e = r = i = null : (t = +n[0][0], e = +n[0][1], r = +n[1][0], i = +n[1][1]), u) : null == t ? null : [
                [t, e],
                [r, i]
            ]
        }, u.size = function(n) {
            return arguments.length ? (null == n ? t = e = r = i = null : (t = e = 0, r = +n[0], i = +n[1]), u) : null == t ? null : [r - t, i - e]
        }, u)
    }, ao.interpolateRgb = vr, ao.interpolateObject = dr, ao.interpolateNumber = yr, ao.interpolateString = mr;
    var hl = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
        pl = new RegExp(hl.source, "g");
    ao.interpolate = Mr, ao.interpolators = [function(n, t) {
        var e = typeof t;
        return ("string" === e ? ua.has(t.toLowerCase()) || /^(#|rgb\(|hsl\()/i.test(t) ? vr : mr : t instanceof an ? vr : Array.isArray(t) ? xr : "object" === e && isNaN(t) ? dr : yr)(n, t)
    }], ao.interpolateArray = xr;
    var gl = function() {
            return m
        },
        vl = ao.map({
            linear: gl,
            poly: Er,
            quad: function() {
                return Sr
            },
            cubic: function() {
                return kr
            },
            sin: function() {
                return Ar
            },
            exp: function() {
                return Cr
            },
            circle: function() {
                return zr
            },
            elastic: Lr,
            back: qr,
            bounce: function() {
                return Tr
            }
        }),
        dl = ao.map({
            "in": m,
            out: _r,
            "in-out": wr,
            "out-in": function(n) {
                return wr(_r(n))
            }
        });
    ao.ease = function(n) {
        var t = n.indexOf("-"),
            e = t >= 0 ? n.slice(0, t) : n,
            r = t >= 0 ? n.slice(t + 1) : "in";
        return e = vl.get(e) || gl, r = dl.get(r) || m, br(r(e.apply(null, lo.call(arguments, 1))))
    }, ao.interpolateHcl = Rr, ao.interpolateHsl = Dr, ao.interpolateLab = Pr, ao.interpolateRound = Ur, ao.transform = function(n) {
        var t = fo.createElementNS(ao.ns.prefix.svg, "g");
        return (ao.transform = function(n) {
            if (null != n) {
                t.setAttribute("transform", n);
                var e = t.transform.baseVal.consolidate()
            }
            return new jr(e ? e.matrix : yl)
        })(n)
    }, jr.prototype.toString = function() {
        return "translate(" + this.translate + ")rotate(" + this.rotate + ")skewX(" + this.skew + ")scale(" + this.scale + ")"
    };
    var yl = {
        a: 1,
        b: 0,
        c: 0,
        d: 1,
        e: 0,
        f: 0
    };
    ao.interpolateTransform = $r, ao.layout = {}, ao.layout.bundle = function() {
        return function(n) {
            for (var t = [], e = -1, r = n.length; ++e < r;) t.push(Jr(n[e]));
            return t
        }
    }, ao.layout.chord = function() {
        function n() {
            var n, c, s, h, p, g = {},
                v = [],
                d = ao.range(u),
                y = [];
            for (e = [], r = [], n = 0, h = -1; ++h < u;) {
                for (c = 0, p = -1; ++p < u;) c += i[h][p];
                v.push(c), y.push(ao.range(u)), n += c
            }
            for (o && d.sort(function(n, t) {
                    return o(v[n], v[t])
                }), a && y.forEach(function(n, t) {
                    n.sort(function(n, e) {
                        return a(i[t][n], i[t][e])
                    })
                }), n = (Ho - f * u) / n, c = 0, h = -1; ++h < u;) {
                for (s = c, p = -1; ++p < u;) {
                    var m = d[h],
                        M = y[m][p],
                        x = i[m][M],
                        b = c,
                        _ = c += x * n;
                    g[m + "-" + M] = {
                        index: m,
                        subindex: M,
                        startAngle: b,
                        endAngle: _,
                        value: x
                    }
                }
                r[m] = {
                    index: m,
                    startAngle: s,
                    endAngle: c,
                    value: v[m]
                }, c += f
            }
            for (h = -1; ++h < u;)
                for (p = h - 1; ++p < u;) {
                    var w = g[h + "-" + p],
                        S = g[p + "-" + h];
                    (w.value || S.value) && e.push(w.value < S.value ? {
                        source: S,
                        target: w
                    } : {
                        source: w,
                        target: S
                    })
                }
            l && t()
        }

        function t() {
            e.sort(function(n, t) {
                return l((n.source.value + n.target.value) / 2, (t.source.value + t.target.value) / 2)
            })
        }
        var e, r, i, u, o, a, l, c = {},
            f = 0;
        return c.matrix = function(n) {
            return arguments.length ? (u = (i = n) && i.length, e = r = null, c) : i
        }, c.padding = function(n) {
            return arguments.length ? (f = n, e = r = null, c) : f
        }, c.sortGroups = function(n) {
            return arguments.length ? (o = n, e = r = null, c) : o
        }, c.sortSubgroups = function(n) {
            return arguments.length ? (a = n, e = null, c) : a
        }, c.sortChords = function(n) {
            return arguments.length ? (l = n, e && t(), c) : l
        }, c.chords = function() {
            return e || n(), e
        }, c.groups = function() {
            return r || n(), r
        }, c
    }, ao.layout.force = function() {
        function n(n) {
            return function(t, e, r, i) {
                if (t.point !== n) {
                    var u = t.cx - n.x,
                        o = t.cy - n.y,
                        a = i - e,
                        l = u * u + o * o;
                    if (l > a * a / y) {
                        if (v > l) {
                            var c = t.charge / l;
                            n.px -= u * c, n.py -= o * c
                        }
                        return !0
                    }
                    if (t.point && l && v > l) {
                        var c = t.pointCharge / l;
                        n.px -= u * c, n.py -= o * c
                    }
                }
                return !t.charge
            }
        }

        function t(n) {
            n.px = ao.event.x, n.py = ao.event.y, l.resume()
        }
        var e, r, i, u, o, a, l = {},
            c = ao.dispatch("start", "tick", "end"),
            f = [1, 1],
            s = .9,
            h = ml,
            p = Ml,
            g = -30,
            v = xl,
            d = .1,
            y = .64,
            M = [],
            x = [];
        return l.tick = function() {
            if ((i *= .99) < .005) return e = null, c.end({
                type: "end",
                alpha: i = 0
            }), !0;
            var t, r, l, h, p, v, y, m, b, _ = M.length,
                w = x.length;
            for (r = 0; w > r; ++r) l = x[r], h = l.source, p = l.target, m = p.x - h.x, b = p.y - h.y, (v = m * m + b * b) && (v = i * o[r] * ((v = Math.sqrt(v)) - u[r]) / v, m *= v, b *= v, p.x -= m * (y = h.weight + p.weight ? h.weight / (h.weight + p.weight) : .5), p.y -= b * y, h.x += m * (y = 1 - y), h.y += b * y);
            if ((y = i * d) && (m = f[0] / 2, b = f[1] / 2, r = -1, y))
                for (; ++r < _;) l = M[r], l.x += (m - l.x) * y, l.y += (b - l.y) * y;
            if (g)
                for (ri(t = ao.geom.quadtree(M), i, a), r = -1; ++r < _;)(l = M[r]).fixed || t.visit(n(l));
            for (r = -1; ++r < _;) l = M[r], l.fixed ? (l.x = l.px, l.y = l.py) : (l.x -= (l.px - (l.px = l.x)) * s, l.y -= (l.py - (l.py = l.y)) * s);
            c.tick({
                type: "tick",
                alpha: i
            })
        }, l.nodes = function(n) {
            return arguments.length ? (M = n, l) : M
        }, l.links = function(n) {
            return arguments.length ? (x = n, l) : x
        }, l.size = function(n) {
            return arguments.length ? (f = n, l) : f
        }, l.linkDistance = function(n) {
            return arguments.length ? (h = "function" == typeof n ? n : +n, l) : h
        }, l.distance = l.linkDistance, l.linkStrength = function(n) {
            return arguments.length ? (p = "function" == typeof n ? n : +n, l) : p
        }, l.friction = function(n) {
            return arguments.length ? (s = +n, l) : s
        }, l.charge = function(n) {
            return arguments.length ? (g = "function" == typeof n ? n : +n, l) : g
        }, l.chargeDistance = function(n) {
            return arguments.length ? (v = n * n, l) : Math.sqrt(v)
        }, l.gravity = function(n) {
            return arguments.length ? (d = +n, l) : d
        }, l.theta = function(n) {
            return arguments.length ? (y = n * n, l) : Math.sqrt(y)
        }, l.alpha = function(n) {
            return arguments.length ? (n = +n, i ? n > 0 ? i = n : (e.c = null, e.t = NaN, e = null, c.end({
                type: "end",
                alpha: i = 0
            })) : n > 0 && (c.start({
                type: "start",
                alpha: i = n
            }), e = qn(l.tick)), l) : i
        }, l.start = function() {
            function n(n, r) {
                if (!e) {
                    for (e = new Array(i), l = 0; i > l; ++l) e[l] = [];
                    for (l = 0; c > l; ++l) {
                        var u = x[l];
                        e[u.source.index].push(u.target), e[u.target.index].push(u.source)
                    }
                }
                for (var o, a = e[t], l = -1, f = a.length; ++l < f;)
                    if (!isNaN(o = a[l][n])) return o;
                return Math.random() * r
            }
            var t, e, r, i = M.length,
                c = x.length,
                s = f[0],
                v = f[1];
            for (t = 0; i > t; ++t)(r = M[t]).index = t, r.weight = 0;
            for (t = 0; c > t; ++t) r = x[t], "number" == typeof r.source && (r.source = M[r.source]), "number" == typeof r.target && (r.target = M[r.target]), ++r.source.weight, ++r.target.weight;
            for (t = 0; i > t; ++t) r = M[t], isNaN(r.x) && (r.x = n("x", s)), isNaN(r.y) && (r.y = n("y", v)), isNaN(r.px) && (r.px = r.x), isNaN(r.py) && (r.py = r.y);
            if (u = [], "function" == typeof h)
                for (t = 0; c > t; ++t) u[t] = +h.call(this, x[t], t);
            else
                for (t = 0; c > t; ++t) u[t] = h;
            if (o = [], "function" == typeof p)
                for (t = 0; c > t; ++t) o[t] = +p.call(this, x[t], t);
            else
                for (t = 0; c > t; ++t) o[t] = p;
            if (a = [], "function" == typeof g)
                for (t = 0; i > t; ++t) a[t] = +g.call(this, M[t], t);
            else
                for (t = 0; i > t; ++t) a[t] = g;
            return l.resume()
        }, l.resume = function() {
            return l.alpha(.1)
        }, l.stop = function() {
            return l.alpha(0)
        }, l.drag = function() {
            return r || (r = ao.behavior.drag().origin(m).on("dragstart.force", Qr).on("drag.force", t).on("dragend.force", ni)), arguments.length ? void this.on("mouseover.force", ti).on("mouseout.force", ei).call(r) : r
        }, ao.rebind(l, c, "on")
    };
    var ml = 20,
        Ml = 1,
        xl = 1 / 0;
    ao.layout.hierarchy = function() {
        function n(i) {
            var u, o = [i],
                a = [];
            for (i.depth = 0; null != (u = o.pop());)
                if (a.push(u), (c = e.call(n, u, u.depth)) && (l = c.length)) {
                    for (var l, c, f; --l >= 0;) o.push(f = c[l]), f.parent = u, f.depth = u.depth + 1;
                    r && (u.value = 0), u.children = c
                } else r && (u.value = +r.call(n, u, u.depth) || 0), delete u.children;
            return oi(i, function(n) {
                var e, i;
                t && (e = n.children) && e.sort(t), r && (i = n.parent) && (i.value += n.value)
            }), a
        }
        var t = ci,
            e = ai,
            r = li;
        return n.sort = function(e) {
            return arguments.length ? (t = e, n) : t
        }, n.children = function(t) {
            return arguments.length ? (e = t, n) : e
        }, n.value = function(t) {
            return arguments.length ? (r = t, n) : r
        }, n.revalue = function(t) {
            return r && (ui(t, function(n) {
                n.children && (n.value = 0)
            }), oi(t, function(t) {
                var e;
                t.children || (t.value = +r.call(n, t, t.depth) || 0), (e = t.parent) && (e.value += t.value)
            })), t
        }, n
    }, ao.layout.partition = function() {
        function n(t, e, r, i) {
            var u = t.children;
            if (t.x = e, t.y = t.depth * i, t.dx = r, t.dy = i, u && (o = u.length)) {
                var o, a, l, c = -1;
                for (r = t.value ? r / t.value : 0; ++c < o;) n(a = u[c], e, l = a.value * r, i), e += l
            }
        }

        function t(n) {
            var e = n.children,
                r = 0;
            if (e && (i = e.length))
                for (var i, u = -1; ++u < i;) r = Math.max(r, t(e[u]));
            return 1 + r
        }

        function e(e, u) {
            var o = r.call(this, e, u);
            return n(o[0], 0, i[0], i[1] / t(o[0])), o
        }
        var r = ao.layout.hierarchy(),
            i = [1, 1];
        return e.size = function(n) {
            return arguments.length ? (i = n, e) : i
        }, ii(e, r)
    }, ao.layout.pie = function() {
        function n(o) {
            var a, l = o.length,
                c = o.map(function(e, r) {
                    return +t.call(n, e, r)
                }),
                f = +("function" == typeof r ? r.apply(this, arguments) : r),
                s = ("function" == typeof i ? i.apply(this, arguments) : i) - f,
                h = Math.min(Math.abs(s) / l, +("function" == typeof u ? u.apply(this, arguments) : u)),
                p = h * (0 > s ? -1 : 1),
                g = ao.sum(c),
                v = g ? (s - l * p) / g : 0,
                d = ao.range(l),
                y = [];
            return null != e && d.sort(e === bl ? function(n, t) {
                return c[t] - c[n]
            } : function(n, t) {
                return e(o[n], o[t])
            }), d.forEach(function(n) {
                y[n] = {
                    data: o[n],
                    value: a = c[n],
                    startAngle: f,
                    endAngle: f += a * v + p,
                    padAngle: h
                }
            }), y
        }
        var t = Number,
            e = bl,
            r = 0,
            i = Ho,
            u = 0;
        return n.value = function(e) {
            return arguments.length ? (t = e, n) : t
        }, n.sort = function(t) {
            return arguments.length ? (e = t, n) : e
        }, n.startAngle = function(t) {
            return arguments.length ? (r = t, n) : r
        }, n.endAngle = function(t) {
            return arguments.length ? (i = t, n) : i
        }, n.padAngle = function(t) {
            return arguments.length ? (u = t, n) : u
        }, n
    };
    var bl = {};
    ao.layout.stack = function() {
        function n(a, l) {
            if (!(h = a.length)) return a;
            var c = a.map(function(e, r) {
                    return t.call(n, e, r)
                }),
                f = c.map(function(t) {
                    return t.map(function(t, e) {
                        return [u.call(n, t, e), o.call(n, t, e)]
                    })
                }),
                s = e.call(n, f, l);
            c = ao.permute(c, s), f = ao.permute(f, s);
            var h, p, g, v, d = r.call(n, f, l),
                y = c[0].length;
            for (g = 0; y > g; ++g)
                for (i.call(n, c[0][g], v = d[g], f[0][g][1]), p = 1; h > p; ++p) i.call(n, c[p][g], v += f[p - 1][g][1], f[p][g][1]);
            return a
        }
        var t = m,
            e = gi,
            r = vi,
            i = pi,
            u = si,
            o = hi;
        return n.values = function(e) {
            return arguments.length ? (t = e, n) : t
        }, n.order = function(t) {
            return arguments.length ? (e = "function" == typeof t ? t : _l.get(t) || gi, n) : e
        }, n.offset = function(t) {
            return arguments.length ? (r = "function" == typeof t ? t : wl.get(t) || vi, n) : r
        }, n.x = function(t) {
            return arguments.length ? (u = t, n) : u
        }, n.y = function(t) {
            return arguments.length ? (o = t, n) : o
        }, n.out = function(t) {
            return arguments.length ? (i = t, n) : i
        }, n
    };
    var _l = ao.map({
            "inside-out": function(n) {
                var t, e, r = n.length,
                    i = n.map(di),
                    u = n.map(yi),
                    o = ao.range(r).sort(function(n, t) {
                        return i[n] - i[t]
                    }),
                    a = 0,
                    l = 0,
                    c = [],
                    f = [];
                for (t = 0; r > t; ++t) e = o[t], l > a ? (a += u[e], c.push(e)) : (l += u[e], f.push(e));
                return f.reverse().concat(c)
            },
            reverse: function(n) {
                return ao.range(n.length).reverse()
            },
            "default": gi
        }),
        wl = ao.map({
            silhouette: function(n) {
                var t, e, r, i = n.length,
                    u = n[0].length,
                    o = [],
                    a = 0,
                    l = [];
                for (e = 0; u > e; ++e) {
                    for (t = 0, r = 0; i > t; t++) r += n[t][e][1];
                    r > a && (a = r), o.push(r)
                }
                for (e = 0; u > e; ++e) l[e] = (a - o[e]) / 2;
                return l
            },
            wiggle: function(n) {
                var t, e, r, i, u, o, a, l, c, f = n.length,
                    s = n[0],
                    h = s.length,
                    p = [];
                for (p[0] = l = c = 0, e = 1; h > e; ++e) {
                    for (t = 0, i = 0; f > t; ++t) i += n[t][e][1];
                    for (t = 0, u = 0, a = s[e][0] - s[e - 1][0]; f > t; ++t) {
                        for (r = 0, o = (n[t][e][1] - n[t][e - 1][1]) / (2 * a); t > r; ++r) o += (n[r][e][1] - n[r][e - 1][1]) / a;
                        u += o * n[t][e][1]
                    }
                    p[e] = l -= i ? u / i * a : 0, c > l && (c = l)
                }
                for (e = 0; h > e; ++e) p[e] -= c;
                return p
            },
            expand: function(n) {
                var t, e, r, i = n.length,
                    u = n[0].length,
                    o = 1 / i,
                    a = [];
                for (e = 0; u > e; ++e) {
                    for (t = 0, r = 0; i > t; t++) r += n[t][e][1];
                    if (r)
                        for (t = 0; i > t; t++) n[t][e][1] /= r;
                    else
                        for (t = 0; i > t; t++) n[t][e][1] = o
                }
                for (e = 0; u > e; ++e) a[e] = 0;
                return a
            },
            zero: vi
        });
    ao.layout.histogram = function() {
        function n(n, u) {
            for (var o, a, l = [], c = n.map(e, this), f = r.call(this, c, u), s = i.call(this, f, c, u), u = -1, h = c.length, p = s.length - 1, g = t ? 1 : 1 / h; ++u < p;) o = l[u] = [], o.dx = s[u + 1] - (o.x = s[u]), o.y = 0;
            if (p > 0)
                for (u = -1; ++u < h;) a = c[u], a >= f[0] && a <= f[1] && (o = l[ao.bisect(s, a, 1, p) - 1], o.y += g, o.push(n[u]));
            return l
        }
        var t = !0,
            e = Number,
            r = bi,
            i = Mi;
        return n.value = function(t) {
            return arguments.length ? (e = t, n) : e
        }, n.range = function(t) {
            return arguments.length ? (r = En(t), n) : r
        }, n.bins = function(t) {
            return arguments.length ? (i = "number" == typeof t ? function(n) {
                return xi(n, t)
            } : En(t), n) : i
        }, n.frequency = function(e) {
            return arguments.length ? (t = !!e, n) : t
        }, n
    }, ao.layout.pack = function() {
        function n(n, u) {
            var o = e.call(this, n, u),
                a = o[0],
                l = i[0],
                c = i[1],
                f = null == t ? Math.sqrt : "function" == typeof t ? t : function() {
                    return t
                };
            if (a.x = a.y = 0, oi(a, function(n) {
                    n.r = +f(n.value)
                }), oi(a, Ni), r) {
                var s = r * (t ? 1 : Math.max(2 * a.r / l, 2 * a.r / c)) / 2;
                oi(a, function(n) {
                    n.r += s
                }), oi(a, Ni), oi(a, function(n) {
                    n.r -= s
                })
            }
            return Ci(a, l / 2, c / 2, t ? 1 : 1 / Math.max(2 * a.r / l, 2 * a.r / c)), o
        }
        var t, e = ao.layout.hierarchy().sort(_i),
            r = 0,
            i = [1, 1];
        return n.size = function(t) {
            return arguments.length ? (i = t, n) : i
        }, n.radius = function(e) {
            return arguments.length ? (t = null == e || "function" == typeof e ? e : +e, n) : t
        }, n.padding = function(t) {
            return arguments.length ? (r = +t, n) : r
        }, ii(n, e)
    }, ao.layout.tree = function() {
        function n(n, i) {
            var f = o.call(this, n, i),
                s = f[0],
                h = t(s);
            if (oi(h, e), h.parent.m = -h.z, ui(h, r), c) ui(s, u);
            else {
                var p = s,
                    g = s,
                    v = s;
                ui(s, function(n) {
                    n.x < p.x && (p = n), n.x > g.x && (g = n), n.depth > v.depth && (v = n)
                });
                var d = a(p, g) / 2 - p.x,
                    y = l[0] / (g.x + a(g, p) / 2 + d),
                    m = l[1] / (v.depth || 1);
                ui(s, function(n) {
                    n.x = (n.x + d) * y, n.y = n.depth * m
                })
            }
            return f
        }

        function t(n) {
            for (var t, e = {
                    A: null,
                    children: [n]
                }, r = [e]; null != (t = r.pop());)
                for (var i, u = t.children, o = 0, a = u.length; a > o; ++o) r.push((u[o] = i = {
                    _: u[o],
                    parent: t,
                    children: (i = u[o].children) && i.slice() || [],
                    A: null,
                    a: null,
                    z: 0,
                    m: 0,
                    c: 0,
                    s: 0,
                    t: null,
                    i: o
                }).a = i);
            return e.children[0]
        }

        function e(n) {
            var t = n.children,
                e = n.parent.children,
                r = n.i ? e[n.i - 1] : null;
            if (t.length) {
                Di(n);
                var u = (t[0].z + t[t.length - 1].z) / 2;
                r ? (n.z = r.z + a(n._, r._), n.m = n.z - u) : n.z = u
            } else r && (n.z = r.z + a(n._, r._));
            n.parent.A = i(n, r, n.parent.A || e[0])
        }

        function r(n) {
            n._.x = n.z + n.parent.m, n.m += n.parent.m
        }

        function i(n, t, e) {
            if (t) {
                for (var r, i = n, u = n, o = t, l = i.parent.children[0], c = i.m, f = u.m, s = o.m, h = l.m; o = Ti(o), i = qi(i), o && i;) l = qi(l), u = Ti(u), u.a = n, r = o.z + s - i.z - c + a(o._, i._), r > 0 && (Ri(Pi(o, n, e), n, r), c += r, f += r), s += o.m, c += i.m, h += l.m, f += u.m;
                o && !Ti(u) && (u.t = o, u.m += s - f), i && !qi(l) && (l.t = i, l.m += c - h, e = n)
            }
            return e
        }

        function u(n) {
            n.x *= l[0], n.y = n.depth * l[1]
        }
        var o = ao.layout.hierarchy().sort(null).value(null),
            a = Li,
            l = [1, 1],
            c = null;
        return n.separation = function(t) {
            return arguments.length ? (a = t, n) : a
        }, n.size = function(t) {
            return arguments.length ? (c = null == (l = t) ? u : null, n) : c ? null : l
        }, n.nodeSize = function(t) {
            return arguments.length ? (c = null == (l = t) ? null : u, n) : c ? l : null
        }, ii(n, o)
    }, ao.layout.cluster = function() {
        function n(n, u) {
            var o, a = t.call(this, n, u),
                l = a[0],
                c = 0;
            oi(l, function(n) {
                var t = n.children;
                t && t.length ? (n.x = ji(t), n.y = Ui(t)) : (n.x = o ? c += e(n, o) : 0, n.y = 0, o = n)
            });
            var f = Fi(l),
                s = Hi(l),
                h = f.x - e(f, s) / 2,
                p = s.x + e(s, f) / 2;
            return oi(l, i ? function(n) {
                n.x = (n.x - l.x) * r[0], n.y = (l.y - n.y) * r[1]
            } : function(n) {
                n.x = (n.x - h) / (p - h) * r[0], n.y = (1 - (l.y ? n.y / l.y : 1)) * r[1]
            }), a
        }
        var t = ao.layout.hierarchy().sort(null).value(null),
            e = Li,
            r = [1, 1],
            i = !1;
        return n.separation = function(t) {
            return arguments.length ? (e = t, n) : e
        }, n.size = function(t) {
            return arguments.length ? (i = null == (r = t), n) : i ? null : r
        }, n.nodeSize = function(t) {
            return arguments.length ? (i = null != (r = t), n) : i ? r : null
        }, ii(n, t)
    }, ao.layout.treemap = function() {
        function n(n, t) {
            for (var e, r, i = -1, u = n.length; ++i < u;) r = (e = n[i]).value * (0 > t ? 0 : t), e.area = isNaN(r) || 0 >= r ? 0 : r
        }

        function t(e) {
            var u = e.children;
            if (u && u.length) {
                var o, a, l, c = s(e),
                    f = [],
                    h = u.slice(),
                    g = 1 / 0,
                    v = "slice" === p ? c.dx : "dice" === p ? c.dy : "slice-dice" === p ? 1 & e.depth ? c.dy : c.dx : Math.min(c.dx, c.dy);
                for (n(h, c.dx * c.dy / e.value), f.area = 0;
                    (l = h.length) > 0;) f.push(o = h[l - 1]), f.area += o.area, "squarify" !== p || (a = r(f, v)) <= g ? (h.pop(), g = a) : (f.area -= f.pop().area, i(f, v, c, !1), v = Math.min(c.dx, c.dy), f.length = f.area = 0, g = 1 / 0);
                f.length && (i(f, v, c, !0), f.length = f.area = 0), u.forEach(t)
            }
        }

        function e(t) {
            var r = t.children;
            if (r && r.length) {
                var u, o = s(t),
                    a = r.slice(),
                    l = [];
                for (n(a, o.dx * o.dy / t.value), l.area = 0; u = a.pop();) l.push(u), l.area += u.area, null != u.z && (i(l, u.z ? o.dx : o.dy, o, !a.length), l.length = l.area = 0);
                r.forEach(e)
            }
        }

        function r(n, t) {
            for (var e, r = n.area, i = 0, u = 1 / 0, o = -1, a = n.length; ++o < a;)(e = n[o].area) && (u > e && (u = e), e > i && (i = e));
            return r *= r, t *= t, r ? Math.max(t * i * g / r, r / (t * u * g)) : 1 / 0
        }

        function i(n, t, e, r) {
            var i, u = -1,
                o = n.length,
                a = e.x,
                c = e.y,
                f = t ? l(n.area / t) : 0;
            if (t == e.dx) {
                for ((r || f > e.dy) && (f = e.dy); ++u < o;) i = n[u], i.x = a, i.y = c, i.dy = f, a += i.dx = Math.min(e.x + e.dx - a, f ? l(i.area / f) : 0);
                i.z = !0, i.dx += e.x + e.dx - a, e.y += f, e.dy -= f
            } else {
                for ((r || f > e.dx) && (f = e.dx); ++u < o;) i = n[u], i.x = a, i.y = c, i.dx = f, c += i.dy = Math.min(e.y + e.dy - c, f ? l(i.area / f) : 0);
                i.z = !1, i.dy += e.y + e.dy - c, e.x += f, e.dx -= f
            }
        }

        function u(r) {
            var i = o || a(r),
                u = i[0];
            return u.x = u.y = 0, u.value ? (u.dx = c[0], u.dy = c[1]) : u.dx = u.dy = 0, o && a.revalue(u), n([u], u.dx * u.dy / u.value), (o ? e : t)(u), h && (o = i), i
        }
        var o, a = ao.layout.hierarchy(),
            l = Math.round,
            c = [1, 1],
            f = null,
            s = Oi,
            h = !1,
            p = "squarify",
            g = .5 * (1 + Math.sqrt(5));
        return u.size = function(n) {
            return arguments.length ? (c = n, u) : c
        }, u.padding = function(n) {
            function t(t) {
                var e = n.call(u, t, t.depth);
                return null == e ? Oi(t) : Ii(t, "number" == typeof e ? [e, e, e, e] : e)
            }

            function e(t) {
                return Ii(t, n)
            }
            if (!arguments.length) return f;
            var r;
            return s = null == (f = n) ? Oi : "function" == (r = typeof n) ? t : "number" === r ? (n = [n, n, n, n], e) : e, u
        }, u.round = function(n) {
            return arguments.length ? (l = n ? Math.round : Number, u) : l != Number
        }, u.sticky = function(n) {
            return arguments.length ? (h = n, o = null, u) : h
        }, u.ratio = function(n) {
            return arguments.length ? (g = n, u) : g
        }, u.mode = function(n) {
            return arguments.length ? (p = n + "", u) : p
        }, ii(u, a)
    }, ao.random = {
        normal: function(n, t) {
            var e = arguments.length;
            return 2 > e && (t = 1), 1 > e && (n = 0),
                function() {
                    var e, r, i;
                    do e = 2 * Math.random() - 1, r = 2 * Math.random() - 1, i = e * e + r * r; while (!i || i > 1);
                    return n + t * e * Math.sqrt(-2 * Math.log(i) / i)
                }
        },
        logNormal: function() {
            var n = ao.random.normal.apply(ao, arguments);
            return function() {
                return Math.exp(n())
            }
        },
        bates: function(n) {
            var t = ao.random.irwinHall(n);
            return function() {
                return t() / n
            }
        },
        irwinHall: function(n) {
            return function() {
                for (var t = 0, e = 0; n > e; e++) t += Math.random();
                return t
            }
        }
    }, ao.scale = {};
    var Sl = {
        floor: m,
        ceil: m
    };
    ao.scale.linear = function() {
        return Wi([0, 1], [0, 1], Mr, !1)
    };
    var kl = {
        s: 1,
        g: 1,
        p: 1,
        r: 1,
        e: 1
    };
    ao.scale.log = function() {
        return ru(ao.scale.linear().domain([0, 1]), 10, !0, [1, 10])
    };
    var Nl = ao.format(".0e"),
        El = {
            floor: function(n) {
                return -Math.ceil(-n)
            },
            ceil: function(n) {
                return -Math.floor(-n)
            }
        };
    ao.scale.pow = function() {
        return iu(ao.scale.linear(), 1, [0, 1])
    }, ao.scale.sqrt = function() {
        return ao.scale.pow().exponent(.5)
    }, ao.scale.ordinal = function() {
        return ou([], {
            t: "range",
            a: [
                []
            ]
        })
    }, ao.scale.category10 = function() {
        return ao.scale.ordinal().range(Al)
    }, ao.scale.category20 = function() {
        return ao.scale.ordinal().range(Cl)
    }, ao.scale.category20b = function() {
        return ao.scale.ordinal().range(zl)
    }, ao.scale.category20c = function() {
        return ao.scale.ordinal().range(Ll)
    };
    var Al = [2062260, 16744206, 2924588, 14034728, 9725885, 9197131, 14907330, 8355711, 12369186, 1556175].map(xn),
        Cl = [2062260, 11454440, 16744206, 16759672, 2924588, 10018698, 14034728, 16750742, 9725885, 12955861, 9197131, 12885140, 14907330, 16234194, 8355711, 13092807, 12369186, 14408589, 1556175, 10410725].map(xn),
        zl = [3750777, 5395619, 7040719, 10264286, 6519097, 9216594, 11915115, 13556636, 9202993, 12426809, 15186514, 15190932, 8666169, 11356490, 14049643, 15177372, 8077683, 10834324, 13528509, 14589654].map(xn),
        Ll = [3244733, 7057110, 10406625, 13032431, 15095053, 16616764, 16625259, 16634018, 3253076, 7652470, 10607003, 13101504, 7695281, 10394312, 12369372, 14342891, 6513507, 9868950, 12434877, 14277081].map(xn);
    ao.scale.quantile = function() {
        return au([], [])
    }, ao.scale.quantize = function() {
        return lu(0, 1, [0, 1])
    }, ao.scale.threshold = function() {
        return cu([.5], [0, 1])
    }, ao.scale.identity = function() {
        return fu([0, 1])
    }, ao.svg = {}, ao.svg.arc = function() {
        function n() {
            var n = Math.max(0, +e.apply(this, arguments)),
                c = Math.max(0, +r.apply(this, arguments)),
                f = o.apply(this, arguments) - Io,
                s = a.apply(this, arguments) - Io,
                h = Math.abs(s - f),
                p = f > s ? 0 : 1;
            if (n > c && (g = c, c = n, n = g), h >= Oo) return t(c, p) + (n ? t(n, 1 - p) : "") + "Z";
            var g, v, d, y, m, M, x, b, _, w, S, k, N = 0,
                E = 0,
                A = [];
            if ((y = (+l.apply(this, arguments) || 0) / 2) && (d = u === ql ? Math.sqrt(n * n + c * c) : +u.apply(this, arguments), p || (E *= -1), c && (E = tn(d / c * Math.sin(y))), n && (N = tn(d / n * Math.sin(y)))), c) {
                m = c * Math.cos(f + E), M = c * Math.sin(f + E), x = c * Math.cos(s - E), b = c * Math.sin(s - E);
                var C = Math.abs(s - f - 2 * E) <= Fo ? 0 : 1;
                if (E && yu(m, M, x, b) === p ^ C) {
                    var z = (f + s) / 2;
                    m = c * Math.cos(z), M = c * Math.sin(z), x = b = null
                }
            } else m = M = 0;
            if (n) {
                _ = n * Math.cos(s - N), w = n * Math.sin(s - N), S = n * Math.cos(f + N), k = n * Math.sin(f + N);
                var L = Math.abs(f - s + 2 * N) <= Fo ? 0 : 1;
                if (N && yu(_, w, S, k) === 1 - p ^ L) {
                    var q = (f + s) / 2;
                    _ = n * Math.cos(q), w = n * Math.sin(q), S = k = null
                }
            } else _ = w = 0;
            if (h > Uo && (g = Math.min(Math.abs(c - n) / 2, +i.apply(this, arguments))) > .001) {
                v = c > n ^ p ? 0 : 1;
                var T = g,
                    R = g;
                if (Fo > h) {
                    var D = null == S ? [_, w] : null == x ? [m, M] : Re([m, M], [S, k], [x, b], [_, w]),
                        P = m - D[0],
                        U = M - D[1],
                        j = x - D[0],
                        F = b - D[1],
                        H = 1 / Math.sin(Math.acos((P * j + U * F) / (Math.sqrt(P * P + U * U) * Math.sqrt(j * j + F * F))) / 2),
                        O = Math.sqrt(D[0] * D[0] + D[1] * D[1]);
                    R = Math.min(g, (n - O) / (H - 1)), T = Math.min(g, (c - O) / (H + 1))
                }
                if (null != x) {
                    var I = mu(null == S ? [_, w] : [S, k], [m, M], c, T, p),
                        Y = mu([x, b], [_, w], c, T, p);
                    g === T ? A.push("M", I[0], "A", T, ",", T, " 0 0,", v, " ", I[1], "A", c, ",", c, " 0 ", 1 - p ^ yu(I[1][0], I[1][1], Y[1][0], Y[1][1]), ",", p, " ", Y[1], "A", T, ",", T, " 0 0,", v, " ", Y[0]) : A.push("M", I[0], "A", T, ",", T, " 0 1,", v, " ", Y[0])
                } else A.push("M", m, ",", M);
                if (null != S) {
                    var Z = mu([m, M], [S, k], n, -R, p),
                        V = mu([_, w], null == x ? [m, M] : [x, b], n, -R, p);
                    g === R ? A.push("L", V[0], "A", R, ",", R, " 0 0,", v, " ", V[1], "A", n, ",", n, " 0 ", p ^ yu(V[1][0], V[1][1], Z[1][0], Z[1][1]), ",", 1 - p, " ", Z[1], "A", R, ",", R, " 0 0,", v, " ", Z[0]) : A.push("L", V[0], "A", R, ",", R, " 0 0,", v, " ", Z[0])
                } else A.push("L", _, ",", w)
            } else A.push("M", m, ",", M), null != x && A.push("A", c, ",", c, " 0 ", C, ",", p, " ", x, ",", b), A.push("L", _, ",", w), null != S && A.push("A", n, ",", n, " 0 ", L, ",", 1 - p, " ", S, ",", k);
            return A.push("Z"), A.join("")
        }

        function t(n, t) {
            return "M0," + n + "A" + n + "," + n + " 0 1," + t + " 0," + -n + "A" + n + "," + n + " 0 1," + t + " 0," + n
        }
        var e = hu,
            r = pu,
            i = su,
            u = ql,
            o = gu,
            a = vu,
            l = du;
        return n.innerRadius = function(t) {
            return arguments.length ? (e = En(t), n) : e
        }, n.outerRadius = function(t) {
            return arguments.length ? (r = En(t), n) : r
        }, n.cornerRadius = function(t) {
            return arguments.length ? (i = En(t), n) : i
        }, n.padRadius = function(t) {
            return arguments.length ? (u = t == ql ? ql : En(t), n) : u
        }, n.startAngle = function(t) {
            return arguments.length ? (o = En(t), n) : o
        }, n.endAngle = function(t) {
            return arguments.length ? (a = En(t), n) : a
        }, n.padAngle = function(t) {
            return arguments.length ? (l = En(t), n) : l
        }, n.centroid = function() {
            var n = (+e.apply(this, arguments) + +r.apply(this, arguments)) / 2,
                t = (+o.apply(this, arguments) + +a.apply(this, arguments)) / 2 - Io;
            return [Math.cos(t) * n, Math.sin(t) * n]
        }, n
    };
    var ql = "auto";
    ao.svg.line = function() {
        return Mu(m)
    };
    var Tl = ao.map({
        linear: xu,
        "linear-closed": bu,
        step: _u,
        "step-before": wu,
        "step-after": Su,
        basis: zu,
        "basis-open": Lu,
        "basis-closed": qu,
        bundle: Tu,
        cardinal: Eu,
        "cardinal-open": ku,
        "cardinal-closed": Nu,
        monotone: Fu
    });
    Tl.forEach(function(n, t) {
        t.key = n, t.closed = /-closed$/.test(n)
    });
    var Rl = [0, 2 / 3, 1 / 3, 0],
        Dl = [0, 1 / 3, 2 / 3, 0],
        Pl = [0, 1 / 6, 2 / 3, 1 / 6];
    ao.svg.line.radial = function() {
        var n = Mu(Hu);
        return n.radius = n.x, delete n.x, n.angle = n.y, delete n.y, n
    }, wu.reverse = Su, Su.reverse = wu, ao.svg.area = function() {
        return Ou(m)
    }, ao.svg.area.radial = function() {
        var n = Ou(Hu);
        return n.radius = n.x, delete n.x, n.innerRadius = n.x0, delete n.x0, n.outerRadius = n.x1, delete n.x1, n.angle = n.y, delete n.y, n.startAngle = n.y0, delete n.y0, n.endAngle = n.y1, delete n.y1, n
    }, ao.svg.chord = function() {
        function n(n, a) {
            var l = t(this, u, n, a),
                c = t(this, o, n, a);
            return "M" + l.p0 + r(l.r, l.p1, l.a1 - l.a0) + (e(l, c) ? i(l.r, l.p1, l.r, l.p0) : i(l.r, l.p1, c.r, c.p0) + r(c.r, c.p1, c.a1 - c.a0) + i(c.r, c.p1, l.r, l.p0)) + "Z"
        }

        function t(n, t, e, r) {
            var i = t.call(n, e, r),
                u = a.call(n, i, r),
                o = l.call(n, i, r) - Io,
                f = c.call(n, i, r) - Io;
            return {
                r: u,
                a0: o,
                a1: f,
                p0: [u * Math.cos(o), u * Math.sin(o)],
                p1: [u * Math.cos(f), u * Math.sin(f)]
            }
        }

        function e(n, t) {
            return n.a0 == t.a0 && n.a1 == t.a1
        }

        function r(n, t, e) {
            return "A" + n + "," + n + " 0 " + +(e > Fo) + ",1 " + t
        }

        function i(n, t, e, r) {
            return "Q 0,0 " + r
        }
        var u = Me,
            o = xe,
            a = Iu,
            l = gu,
            c = vu;
        return n.radius = function(t) {
            return arguments.length ? (a = En(t), n) : a
        }, n.source = function(t) {
            return arguments.length ? (u = En(t), n) : u
        }, n.target = function(t) {
            return arguments.length ? (o = En(t), n) : o
        }, n.startAngle = function(t) {
            return arguments.length ? (l = En(t), n) : l
        }, n.endAngle = function(t) {
            return arguments.length ? (c = En(t), n) : c
        }, n
    }, ao.svg.diagonal = function() {
        function n(n, i) {
            var u = t.call(this, n, i),
                o = e.call(this, n, i),
                a = (u.y + o.y) / 2,
                l = [u, {
                    x: u.x,
                    y: a
                }, {
                    x: o.x,
                    y: a
                }, o];
            return l = l.map(r), "M" + l[0] + "C" + l[1] + " " + l[2] + " " + l[3]
        }
        var t = Me,
            e = xe,
            r = Yu;
        return n.source = function(e) {
            return arguments.length ? (t = En(e), n) : t
        }, n.target = function(t) {
            return arguments.length ? (e = En(t), n) : e
        }, n.projection = function(t) {
            return arguments.length ? (r = t, n) : r
        }, n
    }, ao.svg.diagonal.radial = function() {
        var n = ao.svg.diagonal(),
            t = Yu,
            e = n.projection;
        return n.projection = function(n) {
            return arguments.length ? e(Zu(t = n)) : t
        }, n
    }, ao.svg.symbol = function() {
        function n(n, r) {
            return (Ul.get(t.call(this, n, r)) || $u)(e.call(this, n, r))
        }
        var t = Xu,
            e = Vu;
        return n.type = function(e) {
            return arguments.length ? (t = En(e), n) : t
        }, n.size = function(t) {
            return arguments.length ? (e = En(t), n) : e
        }, n
    };
    var Ul = ao.map({
        circle: $u,
        cross: function(n) {
            var t = Math.sqrt(n / 5) / 2;
            return "M" + -3 * t + "," + -t + "H" + -t + "V" + -3 * t + "H" + t + "V" + -t + "H" + 3 * t + "V" + t + "H" + t + "V" + 3 * t + "H" + -t + "V" + t + "H" + -3 * t + "Z"
        },
        diamond: function(n) {
            var t = Math.sqrt(n / (2 * Fl)),
                e = t * Fl;
            return "M0," + -t + "L" + e + ",0 0," + t + " " + -e + ",0Z"
        },
        square: function(n) {
            var t = Math.sqrt(n) / 2;
            return "M" + -t + "," + -t + "L" + t + "," + -t + " " + t + "," + t + " " + -t + "," + t + "Z"
        },
        "triangle-down": function(n) {
            var t = Math.sqrt(n / jl),
                e = t * jl / 2;
            return "M0," + e + "L" + t + "," + -e + " " + -t + "," + -e + "Z"
        },
        "triangle-up": function(n) {
            var t = Math.sqrt(n / jl),
                e = t * jl / 2;
            return "M0," + -e + "L" + t + "," + e + " " + -t + "," + e + "Z"
        }
    });
    ao.svg.symbolTypes = Ul.keys();
    var jl = Math.sqrt(3),
        Fl = Math.tan(30 * Yo);
    Co.transition = function(n) {
        for (var t, e, r = Hl || ++Zl, i = Ku(n), u = [], o = Ol || {
                time: Date.now(),
                ease: Nr,
                delay: 0,
                duration: 250
            }, a = -1, l = this.length; ++a < l;) {
            u.push(t = []);
            for (var c = this[a], f = -1, s = c.length; ++f < s;)(e = c[f]) && Qu(e, f, i, r, o), t.push(e)
        }
        return Wu(u, i, r)
    }, Co.interrupt = function(n) {
        return this.each(null == n ? Il : Bu(Ku(n)))
    };
    var Hl, Ol, Il = Bu(Ku()),
        Yl = [],
        Zl = 0;
    Yl.call = Co.call, Yl.empty = Co.empty, Yl.node = Co.node, Yl.size = Co.size, ao.transition = function(n, t) {
        return n && n.transition ? Hl ? n.transition(t) : n : ao.selection().transition(n)
    }, ao.transition.prototype = Yl, Yl.select = function(n) {
        var t, e, r, i = this.id,
            u = this.namespace,
            o = [];
        n = A(n);
        for (var a = -1, l = this.length; ++a < l;) {
            o.push(t = []);
            for (var c = this[a], f = -1, s = c.length; ++f < s;)(r = c[f]) && (e = n.call(r, r.__data__, f, a)) ? ("__data__" in r && (e.__data__ = r.__data__), Qu(e, f, u, i, r[u][i]), t.push(e)) : t.push(null)
        }
        return Wu(o, u, i)
    }, Yl.selectAll = function(n) {
        var t, e, r, i, u, o = this.id,
            a = this.namespace,
            l = [];
        n = C(n);
        for (var c = -1, f = this.length; ++c < f;)
            for (var s = this[c], h = -1, p = s.length; ++h < p;)
                if (r = s[h]) {
                    u = r[a][o], e = n.call(r, r.__data__, h, c), l.push(t = []);
                    for (var g = -1, v = e.length; ++g < v;)(i = e[g]) && Qu(i, g, a, o, u), t.push(i)
                }
        return Wu(l, a, o)
    }, Yl.filter = function(n) {
        var t, e, r, i = [];
        "function" != typeof n && (n = O(n));
        for (var u = 0, o = this.length; o > u; u++) {
            i.push(t = []);
            for (var e = this[u], a = 0, l = e.length; l > a; a++)(r = e[a]) && n.call(r, r.__data__, a, u) && t.push(r)
        }
        return Wu(i, this.namespace, this.id)
    }, Yl.tween = function(n, t) {
        var e = this.id,
            r = this.namespace;
        return arguments.length < 2 ? this.node()[r][e].tween.get(n) : Y(this, null == t ? function(t) {
            t[r][e].tween.remove(n)
        } : function(i) {
            i[r][e].tween.set(n, t)
        })
    }, Yl.attr = function(n, t) {
        function e() {
            this.removeAttribute(a)
        }

        function r() {
            this.removeAttributeNS(a.space, a.local)
        }

        function i(n) {
            return null == n ? e : (n += "", function() {
                var t, e = this.getAttribute(a);
                return e !== n && (t = o(e, n), function(n) {
                    this.setAttribute(a, t(n))
                })
            })
        }

        function u(n) {
            return null == n ? r : (n += "", function() {
                var t, e = this.getAttributeNS(a.space, a.local);
                return e !== n && (t = o(e, n), function(n) {
                    this.setAttributeNS(a.space, a.local, t(n))
                })
            })
        }
        if (arguments.length < 2) {
            for (t in n) this.attr(t, n[t]);
            return this
        }
        var o = "transform" == n ? $r : Mr,
            a = ao.ns.qualify(n);
        return Ju(this, "attr." + n, t, a.local ? u : i)
    }, Yl.attrTween = function(n, t) {
        function e(n, e) {
            var r = t.call(this, n, e, this.getAttribute(i));
            return r && function(n) {
                this.setAttribute(i, r(n))
            }
        }

        function r(n, e) {
            var r = t.call(this, n, e, this.getAttributeNS(i.space, i.local));
            return r && function(n) {
                this.setAttributeNS(i.space, i.local, r(n))
            }
        }
        var i = ao.ns.qualify(n);
        return this.tween("attr." + n, i.local ? r : e)
    }, Yl.style = function(n, e, r) {
        function i() {
            this.style.removeProperty(n)
        }

        function u(e) {
            return null == e ? i : (e += "", function() {
                var i, u = t(this).getComputedStyle(this, null).getPropertyValue(n);
                return u !== e && (i = Mr(u, e), function(t) {
                    this.style.setProperty(n, i(t), r)
                })
            })
        }
        var o = arguments.length;
        if (3 > o) {
            if ("string" != typeof n) {
                2 > o && (e = "");
                for (r in n) this.style(r, n[r], e);
                return this
            }
            r = ""
        }
        return Ju(this, "style." + n, e, u)
    }, Yl.styleTween = function(n, e, r) {
        function i(i, u) {
            var o = e.call(this, i, u, t(this).getComputedStyle(this, null).getPropertyValue(n));
            return o && function(t) {
                this.style.setProperty(n, o(t), r)
            }
        }
        return arguments.length < 3 && (r = ""), this.tween("style." + n, i)
    }, Yl.text = function(n) {
        return Ju(this, "text", n, Gu)
    }, Yl.remove = function() {
        var n = this.namespace;
        return this.each("end.transition", function() {
            var t;
            this[n].count < 2 && (t = this.parentNode) && t.removeChild(this)
        })
    }, Yl.ease = function(n) {
        var t = this.id,
            e = this.namespace;
        return arguments.length < 1 ? this.node()[e][t].ease : ("function" != typeof n && (n = ao.ease.apply(ao, arguments)), Y(this, function(r) {
            r[e][t].ease = n
        }))
    }, Yl.delay = function(n) {
        var t = this.id,
            e = this.namespace;
        return arguments.length < 1 ? this.node()[e][t].delay : Y(this, "function" == typeof n ? function(r, i, u) {
            r[e][t].delay = +n.call(r, r.__data__, i, u)
        } : (n = +n, function(r) {
            r[e][t].delay = n
        }))
    }, Yl.duration = function(n) {
        var t = this.id,
            e = this.namespace;
        return arguments.length < 1 ? this.node()[e][t].duration : Y(this, "function" == typeof n ? function(r, i, u) {
            r[e][t].duration = Math.max(1, n.call(r, r.__data__, i, u))
        } : (n = Math.max(1, n), function(r) {
            r[e][t].duration = n
        }))
    }, Yl.each = function(n, t) {
        var e = this.id,
            r = this.namespace;
        if (arguments.length < 2) {
            var i = Ol,
                u = Hl;
            try {
                Hl = e, Y(this, function(t, i, u) {
                    Ol = t[r][e], n.call(t, t.__data__, i, u)
                })
            } finally {
                Ol = i, Hl = u
            }
        } else Y(this, function(i) {
            var u = i[r][e];
            (u.event || (u.event = ao.dispatch("start", "end", "interrupt"))).on(n, t)
        });
        return this
    }, Yl.transition = function() {
        for (var n, t, e, r, i = this.id, u = ++Zl, o = this.namespace, a = [], l = 0, c = this.length; c > l; l++) {
            a.push(n = []);
            for (var t = this[l], f = 0, s = t.length; s > f; f++)(e = t[f]) && (r = e[o][i], Qu(e, f, o, u, {
                time: r.time,
                ease: r.ease,
                delay: r.delay + r.duration,
                duration: r.duration
            })), n.push(e)
        }
        return Wu(a, o, u)
    }, ao.svg.axis = function() {
        function n(n) {
            n.each(function() {
                var n, c = ao.select(this),
                    f = this.__chart__ || e,
                    s = this.__chart__ = e.copy(),
                    h = null == l ? s.ticks ? s.ticks.apply(s, a) : s.domain() : l,
                    p = null == t ? s.tickFormat ? s.tickFormat.apply(s, a) : m : t,
                    g = c.selectAll(".tick").data(h, s),
                    v = g.enter().insert("g", ".domain").attr("class", "tick").style("opacity", Uo),
                    d = ao.transition(g.exit()).style("opacity", Uo).remove(),
                    y = ao.transition(g.order()).style("opacity", 1),
                    M = Math.max(i, 0) + o,
                    x = Zi(s),
                    b = c.selectAll(".domain").data([0]),
                    _ = (b.enter().append("path").attr("class", "domain"), ao.transition(b));
                v.append("line"), v.append("text");
                var w, S, k, N, E = v.select("line"),
                    A = y.select("line"),
                    C = g.select("text").text(p),
                    z = v.select("text"),
                    L = y.select("text"),
                    q = "top" === r || "left" === r ? -1 : 1;
                if ("bottom" === r || "top" === r ? (n = no, w = "x", k = "y", S = "x2", N = "y2", C.attr("dy", 0 > q ? "0em" : ".71em").style("text-anchor", "middle"), _.attr("d", "M" + x[0] + "," + q * u + "V0H" + x[1] + "V" + q * u)) : (n = to, w = "y", k = "x", S = "y2", N = "x2", C.attr("dy", ".32em").style("text-anchor", 0 > q ? "end" : "start"), _.attr("d", "M" + q * u + "," + x[0] + "H0V" + x[1] + "H" + q * u)), E.attr(N, q * i), z.attr(k, q * M), A.attr(S, 0).attr(N, q * i), L.attr(w, 0).attr(k, q * M), s.rangeBand) {
                    var T = s,
                        R = T.rangeBand() / 2;
                    f = s = function(n) {
                        return T(n) + R
                    }
                } else f.rangeBand ? f = s : d.call(n, s, f);
                v.call(n, f, s), y.call(n, s, s)
            })
        }
        var t, e = ao.scale.linear(),
            r = Vl,
            i = 6,
            u = 6,
            o = 3,
            a = [10],
            l = null;
        return n.scale = function(t) {
            return arguments.length ? (e = t, n) : e
        }, n.orient = function(t) {
            return arguments.length ? (r = t in Xl ? t + "" : Vl, n) : r
        }, n.ticks = function() {
            return arguments.length ? (a = co(arguments), n) : a
        }, n.tickValues = function(t) {
            return arguments.length ? (l = t, n) : l
        }, n.tickFormat = function(e) {
            return arguments.length ? (t = e, n) : t
        }, n.tickSize = function(t) {
            var e = arguments.length;
            return e ? (i = +t, u = +arguments[e - 1], n) : i
        }, n.innerTickSize = function(t) {
            return arguments.length ? (i = +t, n) : i
        }, n.outerTickSize = function(t) {
            return arguments.length ? (u = +t, n) : u
        }, n.tickPadding = function(t) {
            return arguments.length ? (o = +t, n) : o
        }, n.tickSubdivide = function() {
            return arguments.length && n
        }, n
    };
    var Vl = "bottom",
        Xl = {
            top: 1,
            right: 1,
            bottom: 1,
            left: 1
        };
    ao.svg.brush = function() {
        function n(t) {
            t.each(function() {
                var t = ao.select(this).style("pointer-events", "all").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)").on("mousedown.brush", u).on("touchstart.brush", u),
                    o = t.selectAll(".background").data([0]);
                o.enter().append("rect").attr("class", "background").style("visibility", "hidden").style("cursor", "crosshair"), t.selectAll(".extent").data([0]).enter().append("rect").attr("class", "extent").style("cursor", "move");
                var a = t.selectAll(".resize").data(v, m);
                a.exit().remove(), a.enter().append("g").attr("class", function(n) {
                    return "resize " + n
                }).style("cursor", function(n) {
                    return $l[n]
                }).append("rect").attr("x", function(n) {
                    return /[ew]$/.test(n) ? -3 : null
                }).attr("y", function(n) {
                    return /^[ns]/.test(n) ? -3 : null
                }).attr("width", 6).attr("height", 6).style("visibility", "hidden"), a.style("display", n.empty() ? "none" : null);
                var l, s = ao.transition(t),
                    h = ao.transition(o);
                c && (l = Zi(c), h.attr("x", l[0]).attr("width", l[1] - l[0]), r(s)), f && (l = Zi(f), h.attr("y", l[0]).attr("height", l[1] - l[0]), i(s)), e(s)
            })
        }

        function e(n) {
            n.selectAll(".resize").attr("transform", function(n) {
                return "translate(" + s[+/e$/.test(n)] + "," + h[+/^s/.test(n)] + ")"
            })
        }

        function r(n) {
            n.select(".extent").attr("x", s[0]), n.selectAll(".extent,.n>rect,.s>rect").attr("width", s[1] - s[0])
        }

        function i(n) {
            n.select(".extent").attr("y", h[0]), n.selectAll(".extent,.e>rect,.w>rect").attr("height", h[1] - h[0])
        }

        function u() {
            function u() {
                32 == ao.event.keyCode && (C || (M = null, L[0] -= s[1], L[1] -= h[1], C = 2), S())
            }

            function v() {
                32 == ao.event.keyCode && 2 == C && (L[0] += s[1], L[1] += h[1], C = 0, S())
            }

            function d() {
                var n = ao.mouse(b),
                    t = !1;
                x && (n[0] += x[0], n[1] += x[1]), C || (ao.event.altKey ? (M || (M = [(s[0] + s[1]) / 2, (h[0] + h[1]) / 2]), L[0] = s[+(n[0] < M[0])], L[1] = h[+(n[1] < M[1])]) : M = null), E && y(n, c, 0) && (r(k), t = !0), A && y(n, f, 1) && (i(k), t = !0), t && (e(k), w({
                    type: "brush",
                    mode: C ? "move" : "resize"
                }))
            }

            function y(n, t, e) {
                var r, i, u = Zi(t),
                    l = u[0],
                    c = u[1],
                    f = L[e],
                    v = e ? h : s,
                    d = v[1] - v[0];
                return C && (l -= f, c -= d + f), r = (e ? g : p) ? Math.max(l, Math.min(c, n[e])) : n[e], C ? i = (r += f) + d : (M && (f = Math.max(l, Math.min(c, 2 * M[e] - r))), r > f ? (i = r, r = f) : i = f), v[0] != r || v[1] != i ? (e ? a = null : o = null, v[0] = r, v[1] = i, !0) : void 0
            }

            function m() {
                d(), k.style("pointer-events", "all").selectAll(".resize").style("display", n.empty() ? "none" : null), ao.select("body").style("cursor", null), q.on("mousemove.brush", null).on("mouseup.brush", null).on("touchmove.brush", null).on("touchend.brush", null).on("keydown.brush", null).on("keyup.brush", null), z(), w({
                    type: "brushend"
                })
            }
            var M, x, b = this,
                _ = ao.select(ao.event.target),
                w = l.of(b, arguments),
                k = ao.select(b),
                N = _.datum(),
                E = !/^(n|s)$/.test(N) && c,
                A = !/^(e|w)$/.test(N) && f,
                C = _.classed("extent"),
                z = W(b),
                L = ao.mouse(b),
                q = ao.select(t(b)).on("keydown.brush", u).on("keyup.brush", v);
            if (ao.event.changedTouches ? q.on("touchmove.brush", d).on("touchend.brush", m) : q.on("mousemove.brush", d).on("mouseup.brush", m), k.interrupt().selectAll("*").interrupt(), C) L[0] = s[0] - L[0], L[1] = h[0] - L[1];
            else if (N) {
                var T = +/w$/.test(N),
                    R = +/^n/.test(N);
                x = [s[1 - T] - L[0], h[1 - R] - L[1]], L[0] = s[T], L[1] = h[R]
            } else ao.event.altKey && (M = L.slice());
            k.style("pointer-events", "none").selectAll(".resize").style("display", null), ao.select("body").style("cursor", _.style("cursor")), w({
                type: "brushstart"
            }), d()
        }
        var o, a, l = N(n, "brushstart", "brush", "brushend"),
            c = null,
            f = null,
            s = [0, 0],
            h = [0, 0],
            p = !0,
            g = !0,
            v = Bl[0];
        return n.event = function(n) {
            n.each(function() {
                var n = l.of(this, arguments),
                    t = {
                        x: s,
                        y: h,
                        i: o,
                        j: a
                    },
                    e = this.__chart__ || t;
                this.__chart__ = t, Hl ? ao.select(this).transition().each("start.brush", function() {
                    o = e.i, a = e.j, s = e.x, h = e.y, n({
                        type: "brushstart"
                    })
                }).tween("brush:brush", function() {
                    var e = xr(s, t.x),
                        r = xr(h, t.y);
                    return o = a = null,
                        function(i) {
                            s = t.x = e(i), h = t.y = r(i), n({
                                type: "brush",
                                mode: "resize"
                            })
                        }
                }).each("end.brush", function() {
                    o = t.i, a = t.j, n({
                        type: "brush",
                        mode: "resize"
                    }), n({
                        type: "brushend"
                    })
                }) : (n({
                    type: "brushstart"
                }), n({
                    type: "brush",
                    mode: "resize"
                }), n({
                    type: "brushend"
                }))
            })
        }, n.x = function(t) {
            return arguments.length ? (c = t, v = Bl[!c << 1 | !f], n) : c
        }, n.y = function(t) {
            return arguments.length ? (f = t, v = Bl[!c << 1 | !f], n) : f
        }, n.clamp = function(t) {
            return arguments.length ? (c && f ? (p = !!t[0], g = !!t[1]) : c ? p = !!t : f && (g = !!t), n) : c && f ? [p, g] : c ? p : f ? g : null
        }, n.extent = function(t) {
            var e, r, i, u, l;
            return arguments.length ? (c && (e = t[0], r = t[1], f && (e = e[0], r = r[0]), o = [e, r], c.invert && (e = c(e), r = c(r)), e > r && (l = e, e = r, r = l), e == s[0] && r == s[1] || (s = [e, r])), f && (i = t[0], u = t[1], c && (i = i[1], u = u[1]), a = [i, u], f.invert && (i = f(i), u = f(u)), i > u && (l = i, i = u, u = l), i == h[0] && u == h[1] || (h = [i, u])), n) : (c && (o ? (e = o[0], r = o[1]) : (e = s[0], r = s[1], c.invert && (e = c.invert(e), r = c.invert(r)), e > r && (l = e, e = r, r = l))), f && (a ? (i = a[0], u = a[1]) : (i = h[0], u = h[1], f.invert && (i = f.invert(i), u = f.invert(u)), i > u && (l = i, i = u, u = l))), c && f ? [
                [e, i],
                [r, u]
            ] : c ? [e, r] : f && [i, u])
        }, n.clear = function() {
            return n.empty() || (s = [0, 0], h = [0, 0], o = a = null), n
        }, n.empty = function() {
            return !!c && s[0] == s[1] || !!f && h[0] == h[1]
        }, ao.rebind(n, l, "on")
    };
    var $l = {
            n: "ns-resize",
            e: "ew-resize",
            s: "ns-resize",
            w: "ew-resize",
            nw: "nwse-resize",
            ne: "nesw-resize",
            se: "nwse-resize",
            sw: "nesw-resize"
        },
        Bl = [
            ["n", "e", "s", "w", "nw", "ne", "se", "sw"],
            ["e", "w"],
            ["n", "s"],
            []
        ],
        Wl = ga.format = xa.timeFormat,
        Jl = Wl.utc,
        Gl = Jl("%Y-%m-%dT%H:%M:%S.%LZ");
    Wl.iso = Date.prototype.toISOString && +new Date("2000-01-01T00:00:00.000Z") ? eo : Gl, eo.parse = function(n) {
        var t = new Date(n);
        return isNaN(t) ? null : t
    }, eo.toString = Gl.toString, ga.second = On(function(n) {
        return new va(1e3 * Math.floor(n / 1e3))
    }, function(n, t) {
        n.setTime(n.getTime() + 1e3 * Math.floor(t))
    }, function(n) {
        return n.getSeconds()
    }), ga.seconds = ga.second.range, ga.seconds.utc = ga.second.utc.range, ga.minute = On(function(n) {
        return new va(6e4 * Math.floor(n / 6e4))
    }, function(n, t) {
        n.setTime(n.getTime() + 6e4 * Math.floor(t))
    }, function(n) {
        return n.getMinutes()
    }), ga.minutes = ga.minute.range, ga.minutes.utc = ga.minute.utc.range, ga.hour = On(function(n) {
        var t = n.getTimezoneOffset() / 60;
        return new va(36e5 * (Math.floor(n / 36e5 - t) + t))
    }, function(n, t) {
        n.setTime(n.getTime() + 36e5 * Math.floor(t))
    }, function(n) {
        return n.getHours()
    }), ga.hours = ga.hour.range, ga.hours.utc = ga.hour.utc.range, ga.month = On(function(n) {
        return n = ga.day(n), n.setDate(1), n
    }, function(n, t) {
        n.setMonth(n.getMonth() + t)
    }, function(n) {
        return n.getMonth()
    }), ga.months = ga.month.range, ga.months.utc = ga.month.utc.range;
    var Kl = [1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6],
        Ql = [
            [ga.second, 1],
            [ga.second, 5],
            [ga.second, 15],
            [ga.second, 30],
            [ga.minute, 1],
            [ga.minute, 5],
            [ga.minute, 15],
            [ga.minute, 30],
            [ga.hour, 1],
            [ga.hour, 3],
            [ga.hour, 6],
            [ga.hour, 12],
            [ga.day, 1],
            [ga.day, 2],
            [ga.week, 1],
            [ga.month, 1],
            [ga.month, 3],
            [ga.year, 1]
        ],
        nc = Wl.multi([
            [".%L", function(n) {
                return n.getMilliseconds()
            }],
            [":%S", function(n) {
                return n.getSeconds()
            }],
            ["%I:%M", function(n) {
                return n.getMinutes()
            }],
            ["%I %p", function(n) {
                return n.getHours()
            }],
            ["%a %d", function(n) {
                return n.getDay() && 1 != n.getDate()
            }],
            ["%b %d", function(n) {
                return 1 != n.getDate()
            }],
            ["%B", function(n) {
                return n.getMonth()
            }],
            ["%Y", zt]
        ]),
        tc = {
            range: function(n, t, e) {
                return ao.range(Math.ceil(n / e) * e, +t, e).map(io)
            },
            floor: m,
            ceil: m
        };
    Ql.year = ga.year, ga.scale = function() {
        return ro(ao.scale.linear(), Ql, nc)
    };
    var ec = Ql.map(function(n) {
            return [n[0].utc, n[1]]
        }),
        rc = Jl.multi([
            [".%L", function(n) {
                return n.getUTCMilliseconds()
            }],
            [":%S", function(n) {
                return n.getUTCSeconds()
            }],
            ["%I:%M", function(n) {
                return n.getUTCMinutes()
            }],
            ["%I %p", function(n) {
                return n.getUTCHours()
            }],
            ["%a %d", function(n) {
                return n.getUTCDay() && 1 != n.getUTCDate()
            }],
            ["%b %d", function(n) {
                return 1 != n.getUTCDate()
            }],
            ["%B", function(n) {
                return n.getUTCMonth()
            }],
            ["%Y", zt]
        ]);
    ec.year = ga.year.utc, ga.scale.utc = function() {
        return ro(ao.scale.linear(), ec, rc)
    }, ao.text = An(function(n) {
        return n.responseText
    }), ao.json = function(n, t) {
        return Cn(n, "application/json", uo, t)
    }, ao.html = function(n, t) {
        return Cn(n, "text/html", oo, t)
    }, ao.xml = An(function(n) {
        return n.responseXML
    }), "function" == typeof define && define.amd ? (this.d3 = ao, define(ao)) : "object" == typeof module && module.exports ? module.exports = ao : this.d3 = ao
}();
! function() {
    var t = {};
    t.dev = !1, t.tooltip = t.tooltip || {}, t.utils = t.utils || {}, t.models = t.models || {}, t.charts = {}, t.logs = {}, t.dom = {}, t.dispatch = d3.dispatch("render_start", "render_end"), Function.prototype.bind || (Function.prototype.bind = function(t) {
        if ("function" != typeof this) throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
        var e = Array.prototype.slice.call(arguments, 1),
            n = this,
            r = function() {},
            i = function() {
                return n.apply(this instanceof r && t ? this : t, e.concat(Array.prototype.slice.call(arguments)))
            };
        return r.prototype = this.prototype, i.prototype = new r, i
    }), t.dev && (t.dispatch.on("render_start", function(e) {
        t.logs.startTime = +new Date
    }), t.dispatch.on("render_end", function(e) {
        t.logs.endTime = +new Date, t.logs.totalTime = t.logs.endTime - t.logs.startTime, t.log("total", t.logs.totalTime)
    })), t.log = function() {
        if (t.dev && window.console && console.log && console.log.apply) console.log.apply(console, arguments);
        else if (t.dev && window.console && "function" == typeof console.log && Function.prototype.bind) {
            var e = Function.prototype.bind.call(console.log, console);
            e.apply(console, arguments)
        }
        return arguments[arguments.length - 1]
    }, t.deprecated = function(t, e) {
        console && console.warn && console.warn("nvd3 warning: `" + t + "` has been deprecated. ", e || "")
    }, t.render = function(e) {
        e = e || 1, t.render.active = !0, t.dispatch.render_start();
        var n = function() {
            for (var r, i, a = 0; e > a && (i = t.render.queue[a]); a++) r = i.generate(), typeof i.callback == typeof Function && i.callback(r);
            t.render.queue.splice(0, a), t.render.queue.length ? setTimeout(n) : (t.dispatch.render_end(), t.render.active = !1)
        };
        setTimeout(n)
    }, t.render.active = !1, t.render.queue = [], t.addGraph = function(e) {
        typeof arguments[0] == typeof Function && (e = {
            generate: arguments[0],
            callback: arguments[1]
        }), t.render.queue.push(e), t.render.active || t.render()
    }, "undefined" != typeof module && "undefined" != typeof exports && (module.exports = t), "undefined" != typeof window && (window.nv = t), t.dom.write = function(t) {
        return void 0 !== window.fastdom ? fastdom.write(t) : t()
    }, t.dom.read = function(t) {
        return void 0 !== window.fastdom ? fastdom.read(t) : t()
    }, t.interactiveGuideline = function() {
        "use strict";

        function e(d) {
            d.each(function(d) {
                function f() {
                    var t = d3.mouse(this),
                        r = t[0],
                        i = t[1],
                        s = !0,
                        l = !1;
                    if (c && (r = d3.event.offsetX, i = d3.event.offsetY, "svg" !== d3.event.target.tagName && (s = !1), d3.event.target.className.baseVal.match("nv-legend") && (l = !0)), s && (r -= n.left, i -= n.top), 0 > r || 0 > i || r > h || i > g || d3.event.relatedTarget && void 0 === d3.event.relatedTarget.ownerSVGElement || l) {
                        if (c && d3.event.relatedTarget && void 0 === d3.event.relatedTarget.ownerSVGElement && (void 0 === d3.event.relatedTarget.className || d3.event.relatedTarget.className.match(u.nvPointerEventsClass))) return;
                        return o.elementMouseout({
                            mouseX: r,
                            mouseY: i
                        }), e.renderGuideLine(null), void u.hidden(!0)
                    }
                    u.hidden(!1);
                    var d = "function" == typeof a.rangeBands,
                        f = void 0;
                    if (d) {
                        var p = d3.bisect(a.range(), r) - 1;
                        if (!(a.range()[p] + a.rangeBand() >= r)) return o.elementMouseout({
                            mouseX: r,
                            mouseY: i
                        }), e.renderGuideLine(null), void u.hidden(!0);
                        f = a.domain()[d3.bisect(a.range(), r) - 1]
                    } else f = a.invert(r);
                    o.elementMousemove({
                        mouseX: r,
                        mouseY: i,
                        pointXValue: f
                    }), "dblclick" === d3.event.type && o.elementDblclick({
                        mouseX: r,
                        mouseY: i,
                        pointXValue: f
                    }), "click" === d3.event.type && o.elementClick({
                        mouseX: r,
                        mouseY: i,
                        pointXValue: f
                    }), "mousedown" === d3.event.type && o.elementMouseDown({
                        mouseX: r,
                        mouseY: i,
                        pointXValue: f
                    }), "mouseup" === d3.event.type && o.elementMouseUp({
                        mouseX: r,
                        mouseY: i,
                        pointXValue: f
                    })
                }
                var p = d3.select(this),
                    h = r || 960,
                    g = i || 400,
                    v = p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([d]),
                    m = v.enter().append("g").attr("class", " nv-wrap nv-interactiveLineLayer");
                m.append("g").attr("class", "nv-interactiveGuideLine"), l && (l.on("touchmove", f).on("mousemove", f, !0).on("mouseout", f, !0).on("mousedown", f, !0).on("mouseup", f, !0).on("dblclick", f).on("click", f), e.guideLine = null, e.renderGuideLine = function(n) {
                    s && (e.guideLine && e.guideLine.attr("x1") === n || t.dom.write(function() {
                        var e = v.select(".nv-interactiveGuideLine").selectAll("line").data(null != n ? [t.utils.NaNtoZero(n)] : [], String);
                        e.enter().append("line").attr("class", "nv-guideline").attr("x1", function(t) {
                            return t
                        }).attr("x2", function(t) {
                            return t
                        }).attr("y1", g).attr("y2", 0), e.exit().remove()
                    }))
                })
            })
        }
        var n = {
                left: 0,
                top: 0
            },
            r = null,
            i = null,
            a = d3.scale.linear(),
            o = d3.dispatch("elementMousemove", "elementMouseout", "elementClick", "elementDblclick", "elementMouseDown", "elementMouseUp"),
            s = !0,
            l = null,
            u = t.models.tooltip(),
            c = "ActiveXObject" in window;
        return u.duration(0).hideDelay(0).hidden(!1), e.dispatch = o, e.tooltip = u, e.margin = function(t) {
            return arguments.length ? (n.top = "undefined" != typeof t.top ? t.top : n.top, n.left = "undefined" != typeof t.left ? t.left : n.left, e) : n
        }, e.width = function(t) {
            return arguments.length ? (r = t, e) : r
        }, e.height = function(t) {
            return arguments.length ? (i = t, e) : i
        }, e.xScale = function(t) {
            return arguments.length ? (a = t, e) : a
        }, e.showGuideLine = function(t) {
            return arguments.length ? (s = t, e) : s
        }, e.svgContainer = function(t) {
            return arguments.length ? (l = t, e) : l
        }, e
    }, t.interactiveBisect = function(t, e, n) {
        "use strict";
        if (!(t instanceof Array)) return null;
        var r;
        r = "function" != typeof n ? function(t) {
            return t.x
        } : n;
        var i = function(t, e) {
                return r(t) - e
            },
            a = d3.bisector(i).left,
            o = d3.max([0, a(t, e) - 1]),
            s = r(t[o]);
        if ("undefined" == typeof s && (s = o), s === e) return o;
        var l = d3.min([o + 1, t.length - 1]),
            u = r(t[l]);
        return "undefined" == typeof u && (u = l), Math.abs(u - e) >= Math.abs(s - e) ? o : l
    }, t.nearestValueIndex = function(t, e, n) {
        "use strict";
        var r = 1 / 0,
            i = null;
        return t.forEach(function(t, a) {
            var o = Math.abs(e - t);
            null != t && r >= o && n > o && (r = o, i = a)
        }), i
    }, t.models.tooltip = function() {
        "use strict";

        function e() {
            if (!f) {
                var t = u ? u : document.body;
                f = d3.select(t).append("div").attr("class", "nvtooltip " + (l ? l : "xy-tooltip")).attr("id", r), f.style("top", 0).style("left", 0), f.style("opacity", 0), f.style("position", "fixed"), f.selectAll("div, table, td, tr").classed(m, !0), f.classed(m, !0)
            }
        }

        function n() {
            return h && M(i) ? (t.dom.write(function() {
                e();
                var t = w(i);
                t && (f.node().innerHTML = t), C()
            }), n) : void 0
        }
        var r = "nvtooltip-" + Math.floor(1e5 * Math.random()),
            i = null,
            a = "w",
            o = 25,
            s = 0,
            l = null,
            u = null,
            c = !0,
            d = 200,
            f = null,
            p = {
                left: null,
                top: null
            },
            h = !0,
            g = 100,
            v = !0,
            m = "nv-pointer-events-none",
            y = function() {
                return {
                    left: null !== d3.event ? d3.event.clientX : 0,
                    top: null !== d3.event ? d3.event.clientY : 0
                }
            },
            x = function(t, e) {
                return t
            },
            b = function(t) {
                return t
            },
            k = function(t, e) {
                return t
            },
            w = function(t) {
                if (null === t) return "";
                var e = d3.select(document.createElement("table"));
                if (v) {
                    var n = e.selectAll("thead").data([t]).enter().append("thead");
                    n.append("tr").append("td").attr("colspan", 3).append("strong").classed("x-value", !0).html(b(t.value))
                }
                var r = e.selectAll("tbody").data([t]).enter().append("tbody"),
                    i = r.selectAll("tr").data(function(t) {
                        return t.series
                    }).enter().append("tr").classed("highlight", function(t) {
                        return t.highlight
                    });
                i.append("td").classed("legend-color-guide", !0).append("div").style("background-color", function(t) {
                    return t.color
                }), i.append("td").classed("key", !0).classed("total", function(t) {
                    return !!t.total
                }).html(function(t, e) {
                    return k(t.key, e)
                }), i.append("td").classed("value", !0).html(function(t, e) {
                    return x(t.value, e)
                }), i.selectAll("td").each(function(t) {
                    if (t.highlight) {
                        var e = d3.scale.linear().domain([0, 1]).range(["#fff", t.color]),
                            n = .6;
                        d3.select(this).style("border-bottom-color", e(n)).style("border-top-color", e(n))
                    }
                });
                var a = e.node().outerHTML;
                return void 0 !== t.footer && (a += "<div class='footer'>" + t.footer + "</div>"), a
            },
            M = function(t) {
                if (t && t.series) {
                    if (t.series instanceof Array) return !!t.series.length;
                    if (t.series instanceof Object) return t.series = [t.series], !0
                }
                return !1
            },
            A = function(t) {
                var e, n, r, i = f.node().offsetHeight,
                    s = f.node().offsetWidth,
                    l = document.documentElement.clientWidth,
                    u = document.documentElement.clientHeight;
                switch (a) {
                    case "e":
                        e = -s - o, n = -(i / 2), t.left + e < 0 && (e = o), (r = t.top + n) < 0 && (n -= r), (r = t.top + n + i) > u && (n -= r - u);
                        break;
                    case "w":
                        e = o, n = -(i / 2), t.left + e + s > l && (e = -s - o), (r = t.top + n) < 0 && (n -= r), (r = t.top + n + i) > u && (n -= r - u);
                        break;
                    case "n":
                        e = -(s / 2) - 5, n = o, t.top + n + i > u && (n = -i - o), (r = t.left + e) < 0 && (e -= r), (r = t.left + e + s) > l && (e -= r - l);
                        break;
                    case "s":
                        e = -(s / 2), n = -i - o, t.top + n < 0 && (n = o), (r = t.left + e) < 0 && (e -= r), (r = t.left + e + s) > l && (e -= r - l);
                        break;
                    case "center":
                        e = -(s / 2), n = -(i / 2);
                        break;
                    default:
                        e = 0, n = 0
                }
                return {
                    left: e,
                    top: n
                }
            },
            C = function() {
                t.dom.read(function() {
                    var t = y(),
                        e = A(t),
                        n = t.left + e.left,
                        r = t.top + e.top;
                    if (c) f.interrupt().transition().delay(d).duration(0).style("opacity", 0);
                    else {
                        var i = "translate(" + p.left + "px, " + p.top + "px)",
                            a = "translate(" + n + "px, " + r + "px)",
                            o = d3.interpolateString(i, a),
                            s = f.style("opacity") < .1;
                        f.interrupt().transition().duration(s ? 0 : g).styleTween("transform", function(t) {
                            return o
                        }, "important").styleTween("-webkit-transform", function(t) {
                            return o
                        }).style("-ms-transform", a).style("opacity", 1)
                    }
                    p.left = n, p.top = r
                })
            };
        return n.nvPointerEventsClass = m, n.options = t.utils.optionsFunc.bind(n), n._options = Object.create({}, {
            duration: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            gravity: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            distance: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            snapDistance: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            classes: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            chartContainer: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u = t
                }
            },
            enabled: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            hideDelay: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            contentGenerator: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t
                }
            },
            valueFormatter: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t
                }
            },
            headerFormatter: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = t
                }
            },
            keyFormatter: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t
                }
            },
            headerEnabled: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            position: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t
                }
            },
            fixedTop: {
                get: function() {
                    return null
                },
                set: function(e) {
                    t.deprecated("fixedTop", "feature removed after 1.8.1")
                }
            },
            offset: {
                get: function() {
                    return {
                        left: 0,
                        top: 0
                    }
                },
                set: function(e) {
                    t.deprecated("offset", "use chart.tooltip.distance() instead")
                }
            },
            hidden: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c != t && (c = !!t, n())
                }
            },
            data: {
                get: function() {
                    return i
                },
                set: function(t) {
                    t.point && (t.value = t.point.x, t.series = t.series || {}, t.series.value = t.point.y, t.series.color = t.point.color || t.series.color), i = t
                }
            },
            node: {
                get: function() {
                    return f.node()
                },
                set: function(t) {}
            },
            id: {
                get: function() {
                    return r
                },
                set: function(t) {}
            }
        }), t.utils.initOptions(n), n
    }, t.utils.windowSize = function() {
        var t = {
            width: 640,
            height: 480
        };
        return window.innerWidth && window.innerHeight ? (t.width = window.innerWidth, t.height = window.innerHeight, t) : "CSS1Compat" == document.compatMode && document.documentElement && document.documentElement.offsetWidth ? (t.width = document.documentElement.offsetWidth, t.height = document.documentElement.offsetHeight, t) : document.body && document.body.offsetWidth ? (t.width = document.body.offsetWidth, t.height = document.body.offsetHeight, t) : t
    }, t.utils.windowResize = function(e) {
        return window.addEventListener ? window.addEventListener("resize", e) : t.log("ERROR: Failed to bind to window.resize with: ", e), {
            callback: e,
            clear: function() {
                window.removeEventListener("resize", e)
            }
        }
    }, t.utils.getColor = function(e) {
        if (void 0 === e) return t.utils.defaultColor();
        if (Array.isArray(e)) {
            var n = d3.scale.ordinal().range(e);
            return function(t, e) {
                var r = void 0 === e ? t : e;
                return t.color || n(r)
            }
        }
        return e
    }, t.utils.defaultColor = function() {
        return t.utils.getColor(d3.scale.category20().range())
    }, t.utils.customTheme = function(t, e, n) {
        e = e || function(t) {
            return t.key
        }, n = n || d3.scale.category20().range();
        var r = n.length;
        return function(i, a) {
            var o = e(i);
            return "function" == typeof t[o] ? t[o]() : void 0 !== t[o] ? t[o] : (r || (r = n.length), r -= 1, n[r])
        }
    }, t.utils.pjax = function(e, n) {
        var r = function(r) {
            d3.html(r, function(r) {
                var i = d3.select(n).node();
                i.parentNode.replaceChild(d3.select(r).select(n).node(), i), t.utils.pjax(e, n)
            })
        };
        d3.selectAll(e).on("click", function() {
            history.pushState(this.href, this.textContent, this.href), r(this.href), d3.event.preventDefault()
        }), d3.select(window).on("popstate", function() {
            d3.event.state && r(d3.event.state)
        })
    }, t.utils.calcApproxTextWidth = function(t) {
        if ("function" == typeof t.style && "function" == typeof t.text) {
            var e = parseInt(t.style("font-size").replace("px", ""), 10),
                n = t.text().length;
            return n * e * .5
        }
        return 0
    }, t.utils.NaNtoZero = function(t) {
        return "number" != typeof t || isNaN(t) || null === t || t === 1 / 0 || t === -(1 / 0) ? 0 : t
    }, d3.selection.prototype.watchTransition = function(t) {
        var e = [this].concat([].slice.call(arguments, 1));
        return t.transition.apply(t, e)
    }, t.utils.renderWatch = function(e, n) {
        if (!(this instanceof t.utils.renderWatch)) return new t.utils.renderWatch(e, n);
        var r = void 0 !== n ? n : 250,
            i = [],
            a = this;
        this.models = function(t) {
            return t = [].slice.call(arguments, 0), t.forEach(function(t) {
                t.__rendered = !1,
                    function(t) {
                        t.dispatch.on("renderEnd", function(e) {
                            t.__rendered = !0, a.renderEnd("model")
                        })
                    }(t), i.indexOf(t) < 0 && i.push(t)
            }), this
        }, this.reset = function(t) {
            void 0 !== t && (r = t), i = []
        }, this.transition = function(t, e, n) {
            if (e = arguments.length > 1 ? [].slice.call(arguments, 1) : [], n = e.length > 1 ? e.pop() : void 0 !== r ? r : 250, t.__rendered = !1, i.indexOf(t) < 0 && i.push(t), 0 === n) return t.__rendered = !0, t.delay = function() {
                return this
            }, t.duration = function() {
                return this
            }, t;
            0 === t.length ? t.__rendered = !0 : t.every(function(t) {
                return !t.length
            }) ? t.__rendered = !0 : t.__rendered = !1;
            var o = 0;
            return t.transition().duration(n).each(function() {
                ++o
            }).each("end", function(n, r) {
                0 === --o && (t.__rendered = !0, a.renderEnd.apply(this, e))
            })
        }, this.renderEnd = function() {
            i.every(function(t) {
                return t.__rendered
            }) && (i.forEach(function(t) {
                t.__rendered = !1
            }), e.renderEnd.apply(this, arguments))
        }
    }, t.utils.deepExtend = function(e) {
        var n = arguments.length > 1 ? [].slice.call(arguments, 1) : [];
        n.forEach(function(n) {
            for (var r in n) {
                var i = e[r] instanceof Array,
                    a = "object" == typeof e[r],
                    o = "object" == typeof n[r];
                a && !i && o ? t.utils.deepExtend(e[r], n[r]) : e[r] = n[r]
            }
        })
    }, t.utils.state = function() {
        if (!(this instanceof t.utils.state)) return new t.utils.state;
        var e = {},
            n = function() {},
            r = function() {
                return {}
            },
            i = null,
            a = null;
        this.dispatch = d3.dispatch("change", "set"), this.dispatch.on("set", function(t) {
            n(t, !0)
        }), this.getter = function(t) {
            return r = t, this
        }, this.setter = function(t, e) {
            return e || (e = function() {}), n = function(n, r) {
                t(n), r && e()
            }, this
        }, this.init = function(e) {
            i = i || {}, t.utils.deepExtend(i, e)
        };
        var o = function() {
            var t = r();
            if (JSON.stringify(t) === JSON.stringify(e)) return !1;
            for (var n in t) void 0 === e[n] && (e[n] = {}), e[n] = t[n], a = !0;
            return !0
        };
        this.update = function() {
            i && (n(i, !1), i = null), o.call(this) && this.dispatch.change(e)
        }
    }, t.utils.optionsFunc = function(t) {
        return t && d3.map(t).forEach(function(t, e) {
            "function" == typeof this[t] && this[t](e)
        }.bind(this)), this
    }, t.utils.calcTicksX = function(e, n) {
        var r = 1,
            i = 0;
        for (i; i < n.length; i += 1) {
            var a = n[i] && n[i].values ? n[i].values.length : 0;
            r = a > r ? a : r
        }
        return t.log("Requested number of ticks: ", e), t.log("Calculated max values to be: ", r), e = e > r ? e = r - 1 : e, e = 1 > e ? 1 : e, e = Math.floor(e), t.log("Calculating tick count as: ", e), e
    }, t.utils.calcTicksY = function(e, n) {
        return t.utils.calcTicksX(e, n)
    }, t.utils.initOption = function(t, e) {
        t._calls && t._calls[e] ? t[e] = t._calls[e] : (t[e] = function(n) {
            return arguments.length ? (t._overrides[e] = !0, t._options[e] = n, t) : t._options[e]
        }, t["_" + e] = function(n) {
            return arguments.length ? (t._overrides[e] || (t._options[e] = n), t) : t._options[e]
        })
    }, t.utils.initOptions = function(e) {
        e._overrides = e._overrides || {};
        var n = Object.getOwnPropertyNames(e._options || {}),
            r = Object.getOwnPropertyNames(e._calls || {});
        n = n.concat(r);
        for (var i in n) t.utils.initOption(e, n[i])
    }, t.utils.inheritOptionsD3 = function(t, e, n) {
        t._d3options = n.concat(t._d3options || []), n.unshift(e), n.unshift(t), d3.rebind.apply(this, n)
    }, t.utils.arrayUnique = function(t) {
        return t.sort().filter(function(e, n) {
            return !n || e != t[n - 1]
        })
    }, t.utils.symbolMap = d3.map(), t.utils.symbol = function() {
        function e(e, i) {
            var a = n.call(this, e, i),
                o = r.call(this, e, i);
            return -1 !== d3.svg.symbolTypes.indexOf(a) ? d3.svg.symbol().type(a).size(o)() : t.utils.symbolMap.get(a)(o)
        }
        var n, r = 64;
        return e.type = function(t) {
            return arguments.length ? (n = d3.functor(t), e) : n
        }, e.size = function(t) {
            return arguments.length ? (r = d3.functor(t), e) : r
        }, e
    }, t.utils.inheritOptions = function(e, n) {
        var r = Object.getOwnPropertyNames(n._options || {}),
            i = Object.getOwnPropertyNames(n._calls || {}),
            a = n._inherited || [],
            o = n._d3options || [],
            s = r.concat(i).concat(a).concat(o);
        s.unshift(n), s.unshift(e), d3.rebind.apply(this, s), e._inherited = t.utils.arrayUnique(r.concat(i).concat(a).concat(r).concat(e._inherited || [])), e._d3options = t.utils.arrayUnique(o.concat(e._d3options || []))
    }, t.utils.initSVG = function(t) {
        t.classed({
            "nvd3-svg": !0
        })
    }, t.utils.sanitizeHeight = function(t, e) {
        return t || parseInt(e.style("height"), 10) || 400
    }, t.utils.sanitizeWidth = function(t, e) {
        return t || parseInt(e.style("width"), 10) || 960
    }, t.utils.availableHeight = function(e, n, r) {
        return Math.max(0, t.utils.sanitizeHeight(e, n) - r.top - r.bottom)
    }, t.utils.availableWidth = function(e, n, r) {
        return Math.max(0, t.utils.sanitizeWidth(e, n) - r.left - r.right)
    }, t.utils.noData = function(e, n) {
        var r = e.options(),
            i = r.margin(),
            a = r.noData(),
            o = null == a ? ["No Data Available."] : [a],
            s = t.utils.availableHeight(null, n, i),
            l = t.utils.availableWidth(null, n, i),
            u = i.left + l / 2,
            c = i.top + s / 2;
        n.selectAll("g").remove();
        var d = n.selectAll(".nv-noData").data(o);
        d.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle"), d.attr("x", u).attr("y", c).text(function(t) {
            return t
        })
    }, t.utils.wrapTicks = function(t, e) {
        t.each(function() {
            for (var t, n = d3.select(this), r = n.text().split(/\s+/).reverse(), i = [], a = 0, o = 1.1, s = n.attr("y"), l = parseFloat(n.attr("dy")), u = n.text(null).append("tspan").attr("x", 0).attr("y", s).attr("dy", l + "em"); t = r.pop();) i.push(t), u.text(i.join(" ")), u.node().getComputedTextLength() > e && (i.pop(), u.text(i.join(" ")), i = [t], u = n.append("tspan").attr("x", 0).attr("y", s).attr("dy", ++a * o + l + "em").text(t))
        })
    }, t.utils.arrayEquals = function(e, n) {
        if (e === n) return !0;
        if (!e || !n) return !1;
        if (e.length != n.length) return !1;
        for (var r = 0, i = e.length; i > r; r++)
            if (e[r] instanceof Array && n[r] instanceof Array) {
                if (!t.arrayEquals(e[r], n[r])) return !1
            } else if (e[r] != n[r]) return !1;
        return !0
    }, t.models.axis = function() {
        "use strict";

        function e(o) {
            return y.reset(), o.each(function(e) {
                var o = d3.select(this);
                t.utils.initSVG(o);
                var g = o.selectAll("g.nv-wrap.nv-axis").data([e]),
                    v = g.enter().append("g").attr("class", "nvd3 nv-wrap nv-axis"),
                    x = (v.append("g"), g.select("g"));
                null !== p ? n.ticks(p) : "top" != n.orient() && "bottom" != n.orient() || n.ticks(Math.abs(r.range()[1] - r.range()[0]) / 100), x.watchTransition(y, "axis").call(n), m = m || n.scale();
                var b = n.tickFormat();
                null == b && (b = m.tickFormat());
                var k = x.selectAll("text.nv-axislabel").data([s || null]);
                k.exit().remove();
                var w, M, A;
                switch (n.orient()) {
                    case "top":
                        k.enter().append("text").attr("class", "nv-axislabel"), A = 0, 1 === r.range().length ? A = f ? 2 * r.range()[0] + r.rangeBand() : 0 : 2 === r.range().length ? A = f ? r.range()[0] + r.range()[1] + r.rangeBand() : r.range()[1] : r.range().length > 2 && (A = r.range()[r.range().length - 1] + (r.range()[1] - r.range()[0])), k.attr("text-anchor", "middle").attr("y", 0).attr("x", A / 2), l && (M = g.selectAll("g.nv-axisMaxMin").data(r.domain()), M.enter().append("g").attr("class", function(t, e) {
                            return ["nv-axisMaxMin", "nv-axisMaxMin-x", 0 == e ? "nv-axisMin-x" : "nv-axisMax-x"].join(" ")
                        }).append("text"), M.exit().remove(), M.attr("transform", function(e, n) {
                            return "translate(" + t.utils.NaNtoZero(r(e)) + ",0)"
                        }).select("text").attr("dy", "-0.5em").attr("y", -n.tickPadding()).attr("text-anchor", "middle").text(function(t, e) {
                            var n = b(t);
                            return ("" + n).match("NaN") ? "" : n
                        }), M.watchTransition(y, "min-max top").attr("transform", function(e, n) {
                            return "translate(" + t.utils.NaNtoZero(r.range()[n]) + ",0)"
                        }));
                        break;
                    case "bottom":
                        w = h + 36;
                        var C = 30,
                            S = 0,
                            W = x.selectAll("g").select("text"),
                            E = "";
                        if (u % 360) {
                            W.each(function(t, e) {
                                var n = this.getBoundingClientRect(),
                                    r = n.width;
                                S = n.height, r > C && (C = r)
                            }), E = "rotate(" + u + " 0," + (S / 2 + n.tickPadding()) + ")";
                            var F = Math.abs(Math.sin(u * Math.PI / 180));
                            w = (F ? F * C : C) + 30, W.attr("transform", E).style("text-anchor", u % 360 > 0 ? "start" : "end")
                        } else d ? W.attr("transform", function(t, e) {
                            return "translate(0," + (e % 2 == 0 ? "0" : "12") + ")"
                        }) : W.attr("transform", "translate(0,0)");
                        k.enter().append("text").attr("class", "nv-axislabel"), A = 0, 1 === r.range().length ? A = f ? 2 * r.range()[0] + r.rangeBand() : 0 : 2 === r.range().length ? A = f ? r.range()[0] + r.range()[1] + r.rangeBand() : r.range()[1] : r.range().length > 2 && (A = r.range()[r.range().length - 1] + (r.range()[1] - r.range()[0])), k.attr("text-anchor", "middle").attr("y", w).attr("x", A / 2), l && (M = g.selectAll("g.nv-axisMaxMin").data([r.domain()[0], r.domain()[r.domain().length - 1]]), M.enter().append("g").attr("class", function(t, e) {
                            return ["nv-axisMaxMin", "nv-axisMaxMin-x", 0 == e ? "nv-axisMin-x" : "nv-axisMax-x"].join(" ")
                        }).append("text"), M.exit().remove(), M.attr("transform", function(e, n) {
                            return "translate(" + t.utils.NaNtoZero(r(e) + (f ? r.rangeBand() / 2 : 0)) + ",0)"
                        }).select("text").attr("dy", ".71em").attr("y", n.tickPadding()).attr("transform", E).style("text-anchor", u ? u % 360 > 0 ? "start" : "end" : "middle").text(function(t, e) {
                            var n = b(t);
                            return ("" + n).match("NaN") ? "" : n
                        }), M.watchTransition(y, "min-max bottom").attr("transform", function(e, n) {
                            return "translate(" + t.utils.NaNtoZero(r(e) + (f ? r.rangeBand() / 2 : 0)) + ",0)"
                        }));
                        break;
                    case "right":
                        k.enter().append("text").attr("class", "nv-axislabel"), k.style("text-anchor", c ? "middle" : "begin").attr("transform", c ? "rotate(90)" : "").attr("y", c ? -Math.max(i.right, a) + 12 : -10).attr("x", c ? d3.max(r.range()) / 2 : n.tickPadding()), l && (M = g.selectAll("g.nv-axisMaxMin").data(r.domain()), M.enter().append("g").attr("class", function(t, e) {
                            return ["nv-axisMaxMin", "nv-axisMaxMin-y", 0 == e ? "nv-axisMin-y" : "nv-axisMax-y"].join(" ")
                        }).append("text").style("opacity", 0), M.exit().remove(), M.attr("transform", function(e, n) {
                            return "translate(0," + t.utils.NaNtoZero(r(e)) + ")"
                        }).select("text").attr("dy", ".32em").attr("y", 0).attr("x", n.tickPadding()).style("text-anchor", "start").text(function(t, e) {
                            var n = b(t);
                            return ("" + n).match("NaN") ? "" : n
                        }), M.watchTransition(y, "min-max right").attr("transform", function(e, n) {
                            return "translate(0," + t.utils.NaNtoZero(r.range()[n]) + ")"
                        }).select("text").style("opacity", 1));
                        break;
                    case "left":
                        k.enter().append("text").attr("class", "nv-axislabel"), k.style("text-anchor", c ? "middle" : "end").attr("transform", c ? "rotate(-90)" : "").attr("y", c ? -Math.max(i.left, a) + 25 - (h || 0) : -10).attr("x", c ? -d3.max(r.range()) / 2 : -n.tickPadding()), l && (M = g.selectAll("g.nv-axisMaxMin").data(r.domain()), M.enter().append("g").attr("class", function(t, e) {
                            return ["nv-axisMaxMin", "nv-axisMaxMin-y", 0 == e ? "nv-axisMin-y" : "nv-axisMax-y"].join(" ")
                        }).append("text").style("opacity", 0), M.exit().remove(), M.attr("transform", function(e, n) {
                            return "translate(0," + t.utils.NaNtoZero(m(e)) + ")"
                        }).select("text").attr("dy", ".32em").attr("y", 0).attr("x", -n.tickPadding()).attr("text-anchor", "end").text(function(t, e) {
                            var n = b(t);
                            return ("" + n).match("NaN") ? "" : n
                        }), M.watchTransition(y, "min-max right").attr("transform", function(e, n) {
                            return "translate(0," + t.utils.NaNtoZero(r.range()[n]) + ")"
                        }).select("text").style("opacity", 1))
                }
                if (k.text(function(t) {
                        return t
                    }), !l || "left" !== n.orient() && "right" !== n.orient() || (x.selectAll("g").each(function(t, e) {
                        d3.select(this).select("text").attr("opacity", 1), (r(t) < r.range()[1] + 10 || r(t) > r.range()[0] - 10) && ((t > 1e-10 || -1e-10 > t) && d3.select(this).attr("opacity", 0), d3.select(this).select("text").attr("opacity", 0))
                    }), r.domain()[0] == r.domain()[1] && 0 == r.domain()[0] && g.selectAll("g.nv-axisMaxMin").style("opacity", function(t, e) {
                        return e ? 0 : 1
                    })), l && ("top" === n.orient() || "bottom" === n.orient())) {
                    var _ = [];
                    g.selectAll("g.nv-axisMaxMin").each(function(t, e) {
                        try {
                            e ? _.push(r(t) - this.getBoundingClientRect().width - 4) : _.push(r(t) + this.getBoundingClientRect().width + 4)
                        } catch (n) {
                            e ? _.push(r(t) - 4) : _.push(r(t) + 4)
                        }
                    }), x.selectAll("g").each(function(t, e) {
                        (r(t) < _[0] || r(t) > _[1]) && (t > 1e-10 || -1e-10 > t ? d3.select(this).remove() : d3.select(this).select("text").remove())
                    })
                }
                x.selectAll(".tick").filter(function(t) {
                    return !parseFloat(Math.round(1e5 * t) / 1e6) && void 0 !== t
                }).classed("zero", !0), m = r.copy()
            }), y.renderEnd("axis immediate"), e
        }
        var n = d3.svg.axis(),
            r = d3.scale.linear(),
            i = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            a = 75,
            o = 60,
            s = null,
            l = !0,
            u = 0,
            c = !0,
            d = !1,
            f = !1,
            p = null,
            h = 0,
            g = 250,
            v = d3.dispatch("renderEnd");
        n.scale(r).orient("bottom").tickFormat(function(t) {
            return t
        });
        var m, y = t.utils.renderWatch(v, g);
        return e.axis = n, e.dispatch = v, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            axisLabelDistance: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            staggerLabels: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            rotateLabels: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u = t
                }
            },
            rotateYLabel: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            showMaxMin: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            axisLabel: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            height: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            ticks: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            width: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            margin: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i.top = void 0 !== t.top ? t.top : i.top, i.right = void 0 !== t.right ? t.right : i.right, i.bottom = void 0 !== t.bottom ? t.bottom : i.bottom, i.left = void 0 !== t.left ? t.left : i.left
                }
            },
            duration: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t, y.reset(g)
                }
            },
            scale: {
                get: function() {
                    return r
                },
                set: function(i) {
                    r = i, n.scale(r), f = "function" == typeof r.rangeBands, t.utils.inheritOptionsD3(e, r, ["domain", "range", "rangeBand", "rangeBands"])
                }
            }
        }), t.utils.initOptions(e), t.utils.inheritOptionsD3(e, n, ["orient", "tickValues", "tickSubdivide", "tickSize", "tickPadding", "tickFormat"]), t.utils.inheritOptionsD3(e, r, ["domain", "range", "rangeBand", "rangeBands"]), e
    }, t.models.boxPlot = function() {
        "use strict";

        function e(d) {
            return k.reset(), d.each(function(e) {
                var d = u - l.left - l.right,
                    g = c - l.top - l.bottom;
                m = d3.select(this), t.utils.initSVG(m), f.domain(n || e.map(function(t, e) {
                    return h(t, e)
                })).rangeBands(i || [0, d], .1);
                var w = [];
                if (!r) {
                    var M = d3.min(e.map(function(t) {
                            var e = [];
                            return e.push(t.values.Q1), t.values.hasOwnProperty("whisker_low") && null !== t.values.whisker_low && e.push(t.values.whisker_low), t.values.hasOwnProperty("outliers") && null !== t.values.outliers && (e = e.concat(t.values.outliers)), d3.min(e)
                        })),
                        A = d3.max(e.map(function(t) {
                            var e = [];
                            return e.push(t.values.Q3), t.values.hasOwnProperty("whisker_high") && null !== t.values.whisker_high && e.push(t.values.whisker_high), t.values.hasOwnProperty("outliers") && null !== t.values.outliers && (e = e.concat(t.values.outliers)), d3.max(e)
                        }));
                    w = [M, A]
                }
                p.domain(r || w), p.range(a || [g, 0]), o = o || f, s = s || p.copy().range([p(0), p(0)]);
                var C = m.selectAll("g.nv-wrap").data([e]);
                C.enter().append("g").attr("class", "nvd3 nv-wrap");
                C.attr("transform", "translate(" + l.left + "," + l.top + ")");
                var S = C.selectAll(".nv-boxplot").data(function(t) {
                        return t
                    }),
                    W = S.enter().append("g").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6);
                S.attr("class", "nv-boxplot").attr("transform", function(t, e, n) {
                    return "translate(" + (f(h(t, e)) + .05 * f.rangeBand()) + ", 0)"
                }).classed("hover", function(t) {
                    return t.hover
                }), S.watchTransition(k, "nv-boxplot: boxplots").style("stroke-opacity", 1).style("fill-opacity", .75).delay(function(t, n) {
                    return n * x / e.length
                }).attr("transform", function(t, e) {
                    return "translate(" + (f(h(t, e)) + .05 * f.rangeBand()) + ", 0)"
                }), S.exit().remove(), W.each(function(t, e) {
                    var n = d3.select(this);
                    ["low", "high"].forEach(function(r) {
                        t.values.hasOwnProperty("whisker_" + r) && null !== t.values["whisker_" + r] && (n.append("line").style("stroke", t.color ? t.color : v(t, e)).attr("class", "nv-boxplot-whisker nv-boxplot-" + r), n.append("line").style("stroke", t.color ? t.color : v(t, e)).attr("class", "nv-boxplot-tick nv-boxplot-" + r))
                    })
                });
                var E = S.selectAll(".nv-boxplot-outlier").data(function(t) {
                    return t.values.hasOwnProperty("outliers") && null !== t.values.outliers ? t.values.outliers : []
                });
                E.enter().append("circle").style("fill", function(t, e, n) {
                    return v(t, n)
                }).style("stroke", function(t, e, n) {
                    return v(t, n)
                }).on("mouseover", function(t, e, n) {
                    d3.select(this).classed("hover", !0), y.elementMouseover({
                        series: {
                            key: t,
                            color: v(t, n)
                        },
                        e: d3.event
                    })
                }).on("mouseout", function(t, e, n) {
                    d3.select(this).classed("hover", !1), y.elementMouseout({
                        series: {
                            key: t,
                            color: v(t, n)
                        },
                        e: d3.event
                    })
                }).on("mousemove", function(t, e) {
                    y.elementMousemove({
                        e: d3.event
                    })
                }), E.attr("class", "nv-boxplot-outlier"), E.watchTransition(k, "nv-boxplot: nv-boxplot-outlier").attr("cx", .45 * f.rangeBand()).attr("cy", function(t, e, n) {
                    return p(t)
                }).attr("r", "3"), E.exit().remove();
                var F = function() {
                        return null === b ? .9 * f.rangeBand() : Math.min(75, .9 * f.rangeBand())
                    },
                    _ = function() {
                        return .45 * f.rangeBand() - F() / 2
                    },
                    D = function() {
                        return .45 * f.rangeBand() + F() / 2
                    };
                ["low", "high"].forEach(function(t) {
                    var e = "low" === t ? "Q1" : "Q3";
                    S.select("line.nv-boxplot-whisker.nv-boxplot-" + t).watchTransition(k, "nv-boxplot: boxplots").attr("x1", .45 * f.rangeBand()).attr("y1", function(e, n) {
                        return p(e.values["whisker_" + t])
                    }).attr("x2", .45 * f.rangeBand()).attr("y2", function(t, n) {
                        return p(t.values[e])
                    }), S.select("line.nv-boxplot-tick.nv-boxplot-" + t).watchTransition(k, "nv-boxplot: boxplots").attr("x1", _).attr("y1", function(e, n) {
                        return p(e.values["whisker_" + t])
                    }).attr("x2", D).attr("y2", function(e, n) {
                        return p(e.values["whisker_" + t])
                    })
                }), ["low", "high"].forEach(function(t) {
                    W.selectAll(".nv-boxplot-" + t).on("mouseover", function(e, n, r) {
                        d3.select(this).classed("hover", !0), y.elementMouseover({
                            series: {
                                key: e.values["whisker_" + t],
                                color: v(e, r)
                            },
                            e: d3.event
                        })
                    }).on("mouseout", function(e, n, r) {
                        d3.select(this).classed("hover", !1), y.elementMouseout({
                            series: {
                                key: e.values["whisker_" + t],
                                color: v(e, r)
                            },
                            e: d3.event
                        })
                    }).on("mousemove", function(t, e) {
                        y.elementMousemove({
                            e: d3.event
                        })
                    })
                }), W.append("rect").attr("class", "nv-boxplot-box").on("mouseover", function(t, e) {
                    d3.select(this).classed("hover", !0), y.elementMouseover({
                        key: t.label,
                        value: t.label,
                        series: [{
                            key: "Q3",
                            value: t.values.Q3,
                            color: t.color || v(t, e)
                        }, {
                            key: "Q2",
                            value: t.values.Q2,
                            color: t.color || v(t, e)
                        }, {
                            key: "Q1",
                            value: t.values.Q1,
                            color: t.color || v(t, e)
                        }],
                        data: t,
                        index: e,
                        e: d3.event
                    })
                }).on("mouseout", function(t, e) {
                    d3.select(this).classed("hover", !1), y.elementMouseout({
                        key: t.label,
                        value: t.label,
                        series: [{
                            key: "Q3",
                            value: t.values.Q3,
                            color: t.color || v(t, e)
                        }, {
                            key: "Q2",
                            value: t.values.Q2,
                            color: t.color || v(t, e)
                        }, {
                            key: "Q1",
                            value: t.values.Q1,
                            color: t.color || v(t, e)
                        }],
                        data: t,
                        index: e,
                        e: d3.event
                    })
                }).on("mousemove", function(t, e) {
                    y.elementMousemove({
                        e: d3.event
                    })
                }), S.select("rect.nv-boxplot-box").watchTransition(k, "nv-boxplot: boxes").attr("y", function(t, e) {
                    return p(t.values.Q3)
                }).attr("width", F).attr("x", _).attr("height", function(t, e) {
                    return Math.abs(p(t.values.Q3) - p(t.values.Q1)) || 1
                }).style("fill", function(t, e) {
                    return t.color || v(t, e)
                }).style("stroke", function(t, e) {
                    return t.color || v(t, e)
                }), W.append("line").attr("class", "nv-boxplot-median"), S.select("line.nv-boxplot-median").watchTransition(k, "nv-boxplot: boxplots line").attr("x1", _).attr("y1", function(t, e) {
                    return p(t.values.Q2)
                }).attr("x2", D).attr("y2", function(t, e) {
                    return p(t.values.Q2)
                }), o = f.copy(), s = p.copy()
            }), k.renderEnd("nv-boxplot immediate"), e
        }
        var n, r, i, a, o, s, l = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            u = 960,
            c = 500,
            d = Math.floor(1e4 * Math.random()),
            f = d3.scale.ordinal(),
            p = d3.scale.linear(),
            h = function(t) {
                return t.x
            },
            g = function(t) {
                return t.y
            },
            v = t.utils.defaultColor(),
            m = null,
            y = d3.dispatch("elementMouseover", "elementMouseout", "elementMousemove", "renderEnd"),
            x = 250,
            b = null,
            k = t.utils.renderWatch(y, x);
        return e.dispatch = y, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u = t
                }
            },
            height: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            maxBoxWidth: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = t
                }
            },
            x: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            y: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            xScale: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            yScale: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            xDomain: {
                get: function() {
                    return n
                },
                set: function(t) {
                    n = t
                }
            },
            yDomain: {
                get: function() {
                    return r
                },
                set: function(t) {
                    r = t
                }
            },
            xRange: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i = t
                }
            },
            yRange: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            id: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            margin: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l.top = void 0 !== t.top ? t.top : l.top, l.right = void 0 !== t.right ? t.right : l.right, l.bottom = void 0 !== t.bottom ? t.bottom : l.bottom, l.left = void 0 !== t.left ? t.left : l.left
                }
            },
            color: {
                get: function() {
                    return v
                },
                set: function(e) {
                    v = t.utils.getColor(e)
                }
            },
            duration: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t, k.reset(x)
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.boxPlotChart = function() {
        "use strict";

        function e(c) {
            return x.reset(), x.models(i), d && x.models(a), f && x.models(o), c.each(function(c) {
                var g = d3.select(this);
                t.utils.initSVG(g);
                var x = (l || parseInt(g.style("width")) || 960) - s.left - s.right,
                    b = (u || parseInt(g.style("height")) || 400) - s.top - s.bottom;
                if (e.update = function() {
                        m.beforeUpdate(),
                            g.transition().duration(y).call(e)
                    }, e.container = this, !(c && c.length && c.filter(function(t) {
                        return t.values.hasOwnProperty("Q1") && t.values.hasOwnProperty("Q2") && t.values.hasOwnProperty("Q3")
                    }).length)) {
                    var k = g.selectAll(".nv-noData").data([v]);
                    return k.enter().append("text").attr("class", "nvd3 nv-noData").attr("dy", "-.7em").style("text-anchor", "middle"), k.attr("x", s.left + x / 2).attr("y", s.top + b / 2).text(function(t) {
                        return t
                    }), e
                }
                g.selectAll(".nv-noData").remove(), n = i.xScale(), r = i.yScale().clamp(!0);
                var w = g.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([c]),
                    M = w.enter().append("g").attr("class", "nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),
                    A = M.append("defs"),
                    C = w.select("g");
                M.append("g").attr("class", "nv-x nv-axis"), M.append("g").attr("class", "nv-y nv-axis").append("g").attr("class", "nv-zeroLine").append("line"), M.append("g").attr("class", "nv-barsWrap"), C.attr("transform", "translate(" + s.left + "," + s.top + ")"), p && C.select(".nv-y.nv-axis").attr("transform", "translate(" + x + ",0)"), i.width(x).height(b);
                var S = C.select(".nv-barsWrap").datum(c.filter(function(t) {
                    return !t.disabled
                }));
                if (S.transition().call(i), A.append("clipPath").attr("id", "nv-x-label-clip-" + i.id()).append("rect"), C.select("#nv-x-label-clip-" + i.id() + " rect").attr("width", n.rangeBand() * (h ? 2 : 1)).attr("height", 16).attr("x", -n.rangeBand() / (h ? 1 : 2)), d) {
                    a.scale(n).ticks(t.utils.calcTicksX(x / 100, c)).tickSize(-b, 0), C.select(".nv-x.nv-axis").attr("transform", "translate(0," + r.range()[0] + ")"), C.select(".nv-x.nv-axis").call(a);
                    var W = C.select(".nv-x.nv-axis").selectAll("g");
                    h && W.selectAll("text").attr("transform", function(t, e, n) {
                        return "translate(0," + (n % 2 == 0 ? "5" : "17") + ")"
                    })
                }
                f && (o.scale(r).ticks(Math.floor(b / 36)).tickSize(-x, 0), C.select(".nv-y.nv-axis").call(o)), C.select(".nv-zeroLine line").attr("x1", 0).attr("x2", x).attr("y1", r(0)).attr("y2", r(0))
            }), x.renderEnd("nv-boxplot chart immediate"), e
        }
        var n, r, i = t.models.boxPlot(),
            a = t.models.axis(),
            o = t.models.axis(),
            s = {
                top: 15,
                right: 10,
                bottom: 50,
                left: 60
            },
            l = null,
            u = null,
            c = t.utils.getColor(),
            d = !0,
            f = !0,
            p = !1,
            h = !1,
            g = t.models.tooltip(),
            v = "No Data Available.",
            m = d3.dispatch("beforeUpdate", "renderEnd"),
            y = 250;
        a.orient("bottom").showMaxMin(!1).tickFormat(function(t) {
            return t
        }), o.orient(p ? "right" : "left").tickFormat(d3.format(",.1f")), g.duration(0);
        var x = t.utils.renderWatch(m, y);
        return i.dispatch.on("elementMouseover.tooltip", function(t) {
            g.data(t).hidden(!1)
        }), i.dispatch.on("elementMouseout.tooltip", function(t) {
            g.data(t).hidden(!0)
        }), i.dispatch.on("elementMousemove.tooltip", function(t) {
            g()
        }), e.dispatch = m, e.boxplot = i, e.xAxis = a, e.yAxis = o, e.tooltip = g, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            height: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u = t
                }
            },
            staggerLabels: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            showXAxis: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            showYAxis: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            tooltipContent: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            noData: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            margin: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s.top = void 0 !== t.top ? t.top : s.top, s.right = void 0 !== t.right ? t.right : s.right, s.bottom = void 0 !== t.bottom ? t.bottom : s.bottom, s.left = void 0 !== t.left ? t.left : s.left
                }
            },
            duration: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t, x.reset(y), i.duration(y), a.duration(y), o.duration(y)
                }
            },
            color: {
                get: function() {
                    return c
                },
                set: function(e) {
                    c = t.utils.getColor(e), i.color(c)
                }
            },
            rightAlignYAxis: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t, o.orient(t ? "right" : "left")
                }
            }
        }), t.utils.inheritOptions(e, i), t.utils.initOptions(e), e
    }, t.models.bullet = function() {
        "use strict";

        function e(r) {
            return r.each(function(e, r) {
                var g = f - n.left - n.right,
                    y = p - n.top - n.bottom;
                h = d3.select(this), t.utils.initSVG(h);
                var x = a.call(this, e, r).slice().sort(d3.descending),
                    b = o.call(this, e, r).slice().sort(d3.descending),
                    k = s.call(this, e, r).slice().sort(d3.descending),
                    w = l.call(this, e, r).slice(),
                    M = u.call(this, e, r).slice(),
                    A = c.call(this, e, r).slice(),
                    C = d3.scale.linear().domain(d3.extent(d3.merge([d, x]))).range(i ? [g, 0] : [0, g]);
                this.__chart__ || d3.scale.linear().domain([0, 1 / 0]).range(C.range());
                this.__chart__ = C;
                var S = d3.min(x),
                    W = d3.max(x),
                    E = x[1],
                    F = h.selectAll("g.nv-wrap.nv-bullet").data([e]),
                    _ = F.enter().append("g").attr("class", "nvd3 nv-wrap nv-bullet"),
                    D = _.append("g"),
                    O = F.select("g");
                D.append("rect").attr("class", "nv-range nv-rangeMax"), D.append("rect").attr("class", "nv-range nv-rangeAvg"), D.append("rect").attr("class", "nv-range nv-rangeMin"), D.append("rect").attr("class", "nv-measure"), F.attr("transform", "translate(" + n.left + "," + n.top + ")");
                var N = function(t) {
                        return Math.abs(C(t) - C(0))
                    },
                    B = function(t) {
                        return C(0 > t ? t : 0)
                    };
                O.select("rect.nv-rangeMax").attr("height", y).attr("width", N(W > 0 ? W : S)).attr("x", B(W > 0 ? W : S)).datum(W > 0 ? W : S), O.select("rect.nv-rangeAvg").attr("height", y).attr("width", N(E)).attr("x", B(E)).datum(E), O.select("rect.nv-rangeMin").attr("height", y).attr("width", N(W)).attr("x", B(W)).attr("width", N(W > 0 ? S : W)).attr("x", B(W > 0 ? S : W)).datum(W > 0 ? S : W), O.select("rect.nv-measure").style("fill", v).attr("height", y / 3).attr("y", y / 3).attr("width", 0 > k ? C(0) - C(k[0]) : C(k[0]) - C(0)).attr("x", B(k)).on("mouseover", function() {
                    m.elementMouseover({
                        value: k[0],
                        label: A[0] || "Current",
                        color: d3.select(this).style("fill")
                    })
                }).on("mousemove", function() {
                    m.elementMousemove({
                        value: k[0],
                        label: A[0] || "Current",
                        color: d3.select(this).style("fill")
                    })
                }).on("mouseout", function() {
                    m.elementMouseout({
                        value: k[0],
                        label: A[0] || "Current",
                        color: d3.select(this).style("fill")
                    })
                });
                var P = y / 6,
                    L = b.map(function(t, e) {
                        return {
                            value: t,
                            label: M[e]
                        }
                    });
                D.selectAll("path.nv-markerTriangle").data(L).enter().append("path").attr("class", "nv-markerTriangle").attr("d", "M0," + P + "L" + P + "," + -P + " " + -P + "," + -P + "Z").on("mouseover", function(t) {
                    m.elementMouseover({
                        value: t.value,
                        label: t.label || "Previous",
                        color: d3.select(this).style("fill"),
                        pos: [C(t.value), y / 2]
                    })
                }).on("mousemove", function(t) {
                    m.elementMousemove({
                        value: t.value,
                        label: t.label || "Previous",
                        color: d3.select(this).style("fill")
                    })
                }).on("mouseout", function(t, e) {
                    m.elementMouseout({
                        value: t.value,
                        label: t.label || "Previous",
                        color: d3.select(this).style("fill")
                    })
                }), O.selectAll("path.nv-markerTriangle").data(L).attr("transform", function(t) {
                    return "translate(" + C(t.value) + "," + y / 2 + ")"
                }), F.selectAll(".nv-range").on("mouseover", function(t, e) {
                    var n = w[e] || (e ? 1 == e ? "Mean" : "Minimum" : "Maximum");
                    m.elementMouseover({
                        value: t,
                        label: n,
                        color: d3.select(this).style("fill")
                    })
                }).on("mousemove", function() {
                    m.elementMousemove({
                        value: k[0],
                        label: A[0] || "Previous",
                        color: d3.select(this).style("fill")
                    })
                }).on("mouseout", function(t, e) {
                    var n = w[e] || (e ? 1 == e ? "Mean" : "Minimum" : "Maximum");
                    m.elementMouseout({
                        value: t,
                        label: n,
                        color: d3.select(this).style("fill")
                    })
                })
            }), e
        }
        var n = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            r = "left",
            i = !1,
            a = function(t) {
                return t.ranges
            },
            o = function(t) {
                return t.markers ? t.markers : []
            },
            s = function(t) {
                return t.measures
            },
            l = function(t) {
                return t.rangeLabels ? t.rangeLabels : []
            },
            u = function(t) {
                return t.markerLabels ? t.markerLabels : []
            },
            c = function(t) {
                return t.measureLabels ? t.measureLabels : []
            },
            d = [0],
            f = 380,
            p = 30,
            h = null,
            g = null,
            v = t.utils.getColor(["#1f77b4"]),
            m = d3.dispatch("elementMouseover", "elementMouseout", "elementMousemove");
        return e.dispatch = m, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            ranges: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            markers: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            measures: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            forceX: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            width: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            height: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            tickFormat: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            margin: {
                get: function() {
                    return n
                },
                set: function(t) {
                    n.top = void 0 !== t.top ? t.top : n.top, n.right = void 0 !== t.right ? t.right : n.right, n.bottom = void 0 !== t.bottom ? t.bottom : n.bottom, n.left = void 0 !== t.left ? t.left : n.left
                }
            },
            orient: {
                get: function() {
                    return r
                },
                set: function(t) {
                    r = t, i = "right" == r || "bottom" == r
                }
            },
            color: {
                get: function() {
                    return v
                },
                set: function(e) {
                    v = t.utils.getColor(e)
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.bulletChart = function() {
        "use strict";

        function e(r) {
            return r.each(function(i, h) {
                var g = d3.select(this);
                t.utils.initSVG(g);
                var v = t.utils.availableWidth(c, g, o),
                    m = d - o.top - o.bottom;
                if (e.update = function() {
                        e(r)
                    }, e.container = this, !i || !s.call(this, i, h)) return t.utils.noData(e, g), e;
                g.selectAll(".nv-noData").remove();
                var y = s.call(this, i, h).slice().sort(d3.descending),
                    x = l.call(this, i, h).slice().sort(d3.descending),
                    b = u.call(this, i, h).slice().sort(d3.descending),
                    k = g.selectAll("g.nv-wrap.nv-bulletChart").data([i]),
                    w = k.enter().append("g").attr("class", "nvd3 nv-wrap nv-bulletChart"),
                    M = w.append("g"),
                    A = k.select("g");
                M.append("g").attr("class", "nv-bulletWrap"), M.append("g").attr("class", "nv-titles"), k.attr("transform", "translate(" + o.left + "," + o.top + ")");
                var C = d3.scale.linear().domain([0, Math.max(y[0], x[0] || 0, b[0])]).range(a ? [v, 0] : [0, v]),
                    S = this.__chart__ || d3.scale.linear().domain([0, 1 / 0]).range(C.range());
                this.__chart__ = C;
                var W = M.select(".nv-titles").append("g").attr("text-anchor", "end").attr("transform", "translate(-6," + (d - o.top - o.bottom) / 2 + ")");
                W.append("text").attr("class", "nv-title").text(function(t) {
                    return t.title
                }), W.append("text").attr("class", "nv-subtitle").attr("dy", "1em").text(function(t) {
                    return t.subtitle
                }), n.width(v).height(m);
                var E = A.select(".nv-bulletWrap");
                d3.transition(E).call(n);
                var F = f || C.tickFormat(v / 100),
                    _ = A.selectAll("g.nv-tick").data(C.ticks(p ? p : v / 50), function(t) {
                        return this.textContent || F(t)
                    }),
                    D = _.enter().append("g").attr("class", "nv-tick").attr("transform", function(t) {
                        return "translate(" + S(t) + ",0)"
                    }).style("opacity", 1e-6);
                D.append("line").attr("y1", m).attr("y2", 7 * m / 6), D.append("text").attr("text-anchor", "middle").attr("dy", "1em").attr("y", 7 * m / 6).text(F);
                var O = d3.transition(_).attr("transform", function(t) {
                    return "translate(" + C(t) + ",0)"
                }).style("opacity", 1);
                O.select("line").attr("y1", m).attr("y2", 7 * m / 6), O.select("text").attr("y", 7 * m / 6), d3.transition(_.exit()).attr("transform", function(t) {
                    return "translate(" + C(t) + ",0)"
                }).style("opacity", 1e-6).remove()
            }), d3.timer.flush(), e
        }
        var n = t.models.bullet(),
            r = t.models.tooltip(),
            i = "left",
            a = !1,
            o = {
                top: 5,
                right: 40,
                bottom: 20,
                left: 120
            },
            s = function(t) {
                return t.ranges
            },
            l = function(t) {
                return t.markers ? t.markers : []
            },
            u = function(t) {
                return t.measures
            },
            c = null,
            d = 55,
            f = null,
            p = null,
            h = null,
            g = d3.dispatch();
        return r.duration(0).headerEnabled(!1), n.dispatch.on("elementMouseover.tooltip", function(t) {
            t.series = {
                key: t.label,
                value: t.value,
                color: t.color
            }, r.data(t).hidden(!1)
        }), n.dispatch.on("elementMouseout.tooltip", function(t) {
            r.hidden(!0)
        }), n.dispatch.on("elementMousemove.tooltip", function(t) {
            r()
        }), e.bullet = n, e.dispatch = g, e.tooltip = r, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            ranges: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            markers: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            measures: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u = t
                }
            },
            width: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            height: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            tickFormat: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            ticks: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            noData: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            margin: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o.top = void 0 !== t.top ? t.top : o.top, o.right = void 0 !== t.right ? t.right : o.right, o.bottom = void 0 !== t.bottom ? t.bottom : o.bottom, o.left = void 0 !== t.left ? t.left : o.left
                }
            },
            orient: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i = t, a = "right" == i || "bottom" == i
                }
            }
        }), t.utils.inheritOptions(e, n), t.utils.initOptions(e), e
    }, t.models.candlestickBar = function() {
        "use strict";

        function e(M) {
            return M.each(function(e) {
                n = d3.select(this);
                var M = t.utils.availableWidth(l, n, s),
                    A = t.utils.availableHeight(u, n, s);
                t.utils.initSVG(n);
                var S = M / e[0].values.length * .45;
                d.domain(r || d3.extent(e[0].values.map(p).concat(x))), k ? d.range(a || [.5 * M / e[0].values.length, M * (e[0].values.length - .5) / e[0].values.length]) : d.range(a || [5 + S / 2, M - S / 2 - 5]), f.domain(i || [d3.min(e[0].values.map(y).concat(b)), d3.max(e[0].values.map(m).concat(b))]).range(o || [A, 0]), d.domain()[0] === d.domain()[1] && (d.domain()[0] ? d.domain([d.domain()[0] - .01 * d.domain()[0], d.domain()[1] + .01 * d.domain()[1]]) : d.domain([-1, 1])), f.domain()[0] === f.domain()[1] && (f.domain()[0] ? f.domain([f.domain()[0] + .01 * f.domain()[0], f.domain()[1] - .01 * f.domain()[1]]) : f.domain([-1, 1]));
                var W = d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([e[0].values]),
                    E = W.enter().append("g").attr("class", "nvd3 nv-wrap nv-candlestickBar"),
                    F = E.append("defs"),
                    _ = E.append("g"),
                    D = W.select("g");
                _.append("g").attr("class", "nv-ticks"), W.attr("transform", "translate(" + s.left + "," + s.top + ")"), n.on("click", function(t, e) {
                    C.chartClick({
                        data: t,
                        index: e,
                        pos: d3.event,
                        id: c
                    })
                }), F.append("clipPath").attr("id", "nv-chart-clip-path-" + c).append("rect"), W.select("#nv-chart-clip-path-" + c + " rect").attr("width", M).attr("height", A), D.attr("clip-path", w ? "url(#nv-chart-clip-path-" + c + ")" : "");
                var O = W.select(".nv-ticks").selectAll(".nv-tick").data(function(t) {
                    return t
                });
                O.exit().remove();
                var N = O.enter().append("g");
                O.attr("class", function(t, e, n) {
                    return (g(t, e) > v(t, e) ? "nv-tick negative" : "nv-tick positive") + " nv-tick-" + n + "-" + e
                });
                N.append("line").attr("class", "nv-candlestick-lines").attr("transform", function(t, e) {
                    return "translate(" + d(p(t, e)) + ",0)"
                }).attr("x1", 0).attr("y1", function(t, e) {
                    return f(m(t, e))
                }).attr("x2", 0).attr("y2", function(t, e) {
                    return f(y(t, e))
                }), N.append("rect").attr("class", "nv-candlestick-rects nv-bars").attr("transform", function(t, e) {
                    return "translate(" + (d(p(t, e)) - S / 2) + "," + (f(h(t, e)) - (g(t, e) > v(t, e) ? f(v(t, e)) - f(g(t, e)) : 0)) + ")"
                }).attr("x", 0).attr("y", 0).attr("width", S).attr("height", function(t, e) {
                    var n = g(t, e),
                        r = v(t, e);
                    return n > r ? f(r) - f(n) : f(n) - f(r)
                });
                O.select(".nv-candlestick-lines").transition().attr("transform", function(t, e) {
                    return "translate(" + d(p(t, e)) + ",0)"
                }).attr("x1", 0).attr("y1", function(t, e) {
                    return f(m(t, e))
                }).attr("x2", 0).attr("y2", function(t, e) {
                    return f(y(t, e))
                }), O.select(".nv-candlestick-rects").transition().attr("transform", function(t, e) {
                    return "translate(" + (d(p(t, e)) - S / 2) + "," + (f(h(t, e)) - (g(t, e) > v(t, e) ? f(v(t, e)) - f(g(t, e)) : 0)) + ")"
                }).attr("x", 0).attr("y", 0).attr("width", S).attr("height", function(t, e) {
                    var n = g(t, e),
                        r = v(t, e);
                    return n > r ? f(r) - f(n) : f(n) - f(r)
                })
            }), e
        }
        var n, r, i, a, o, s = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            l = null,
            u = null,
            c = Math.floor(1e4 * Math.random()),
            d = d3.scale.linear(),
            f = d3.scale.linear(),
            p = function(t) {
                return t.x
            },
            h = function(t) {
                return t.y
            },
            g = function(t) {
                return t.open
            },
            v = function(t) {
                return t.close
            },
            m = function(t) {
                return t.high
            },
            y = function(t) {
                return t.low
            },
            x = [],
            b = [],
            k = !1,
            w = !0,
            M = t.utils.defaultColor(),
            A = !1,
            C = d3.dispatch("stateChange", "changeState", "renderEnd", "chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout", "elementMousemove");
        return e.highlightPoint = function(t, r) {
            e.clearHighlights(), n.select(".nv-candlestickBar .nv-tick-0-" + t).classed("hover", r)
        }, e.clearHighlights = function() {
            n.select(".nv-candlestickBar .nv-tick.hover").classed("hover", !1)
        }, e.dispatch = C, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            height: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u = t
                }
            },
            xScale: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            yScale: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            xDomain: {
                get: function() {
                    return r
                },
                set: function(t) {
                    r = t
                }
            },
            yDomain: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i = t
                }
            },
            xRange: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            yRange: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            forceX: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t
                }
            },
            forceY: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = t
                }
            },
            padData: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t
                }
            },
            clipEdge: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t
                }
            },
            id: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            interactive: {
                get: function() {
                    return A
                },
                set: function(t) {
                    A = t
                }
            },
            x: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            y: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            open: {
                get: function() {
                    return g()
                },
                set: function(t) {
                    g = t
                }
            },
            close: {
                get: function() {
                    return v()
                },
                set: function(t) {
                    v = t
                }
            },
            high: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            low: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t
                }
            },
            margin: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s.top = void 0 != t.top ? t.top : s.top, s.right = void 0 != t.right ? t.right : s.right, s.bottom = void 0 != t.bottom ? t.bottom : s.bottom, s.left = void 0 != t.left ? t.left : s.left
                }
            },
            color: {
                get: function() {
                    return M
                },
                set: function(e) {
                    M = t.utils.getColor(e)
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.cumulativeLineChart = function() {
        "use strict";

        function e(d) {
            return N.reset(), N.models(a), m && N.models(o), y && N.models(s), d.each(function(d) {
                function S(t, n) {
                    d3.select(e.container).style("cursor", "ew-resize")
                }

                function _(t, e) {
                    O.x = d3.event.x, O.i = Math.round(D.invert(O.x)), L()
                }

                function N(t, n) {
                    d3.select(e.container).style("cursor", "auto"), A.index = O.i, E.stateChange(A)
                }

                function L() {
                    et.data([O]);
                    var t = e.duration();
                    e.duration(0), e.update(), e.duration(t)
                }
                var T = d3.select(this);
                t.utils.initSVG(T), T.classed("nv-chart-" + M, !0);
                var V = this,
                    z = t.utils.availableWidth(h, T, f),
                    I = t.utils.availableHeight(g, T, f);
                if (e.update = function() {
                        0 === F ? T.call(e) : T.transition().duration(F).call(e)
                    }, e.container = this, A.setter(P(d), e.update).getter(B(d)).update(), A.disabled = d.map(function(t) {
                        return !!t.disabled
                    }), !C) {
                    var H;
                    C = {};
                    for (H in A) A[H] instanceof Array ? C[H] = A[H].slice(0) : C[H] = A[H]
                }
                var G = d3.behavior.drag().on("dragstart", S).on("drag", _).on("dragend", N);
                if (!(d && d.length && d.filter(function(t) {
                        return t.values.length
                    }).length)) return t.utils.noData(e, T), e;
                if (T.selectAll(".nv-noData").remove(), r = a.xScale(), i = a.yScale(), w) a.yDomain(null);
                else {
                    var Y = d.filter(function(t) {
                            return !t.disabled
                        }).map(function(t, e) {
                            var n = d3.extent(t.values, a.y());
                            return n[0] < -.95 && (n[0] = -.95), [(n[0] - n[1]) / (1 + n[1]), (n[1] - n[0]) / (1 + n[0])]
                        }),
                        X = [d3.min(Y, function(t) {
                            return t[0]
                        }), d3.max(Y, function(t) {
                            return t[1]
                        })];
                    a.yDomain(X)
                }
                D.domain([0, d[0].values.length - 1]).range([0, z]).clamp(!0);
                var d = n(O.i, d),
                    j = k ? "none" : "all",
                    R = T.selectAll("g.nv-wrap.nv-cumulativeLine").data([d]),
                    Z = R.enter().append("g").attr("class", "nvd3 nv-wrap nv-cumulativeLine").append("g"),
                    Q = R.select("g");
                if (Z.append("g").attr("class", "nv-interactive"), Z.append("g").attr("class", "nv-x nv-axis").style("pointer-events", "none"), Z.append("g").attr("class", "nv-y nv-axis"), Z.append("g").attr("class", "nv-background"), Z.append("g").attr("class", "nv-linesWrap").style("pointer-events", j), Z.append("g").attr("class", "nv-avgLinesWrap").style("pointer-events", "none"), Z.append("g").attr("class", "nv-legendWrap"), Z.append("g").attr("class", "nv-controlsWrap"), v && (l.width(z), Q.select(".nv-legendWrap").datum(d).call(l), f.top != l.height() && (f.top = l.height(), I = t.utils.availableHeight(g, T, f)), Q.select(".nv-legendWrap").attr("transform", "translate(0," + -f.top + ")")), b) {
                    var K = [{
                        key: "Re-scale y-axis",
                        disabled: !w
                    }];
                    u.width(140).color(["#444", "#444", "#444"]).rightAlign(!1).margin({
                        top: 5,
                        right: 0,
                        bottom: 5,
                        left: 20
                    }), Q.select(".nv-controlsWrap").datum(K).attr("transform", "translate(0," + -f.top + ")").call(u)
                }
                R.attr("transform", "translate(" + f.left + "," + f.top + ")"), x && Q.select(".nv-y.nv-axis").attr("transform", "translate(" + z + ",0)");
                var q = d.filter(function(t) {
                    return t.tempDisabled
                });
                R.select(".tempDisabled").remove(), q.length && R.append("text").attr("class", "tempDisabled").attr("x", z / 2).attr("y", "-.71em").style("text-anchor", "end").text(q.map(function(t) {
                    return t.key
                }).join(", ") + " values cannot be calculated for this time period."), k && (c.width(z).height(I).margin({
                    left: f.left,
                    top: f.top
                }).svgContainer(T).xScale(r), R.select(".nv-interactive").call(c)), Z.select(".nv-background").append("rect"), Q.select(".nv-background rect").attr("width", z).attr("height", I), a.y(function(t) {
                    return t.display.y
                }).width(z).height(I).color(d.map(function(t, e) {
                    return t.color || p(t, e)
                }).filter(function(t, e) {
                    return !d[e].disabled && !d[e].tempDisabled
                }));
                var U = Q.select(".nv-linesWrap").datum(d.filter(function(t) {
                    return !t.disabled && !t.tempDisabled
                }));
                U.call(a), d.forEach(function(t, e) {
                    t.seriesIndex = e
                });
                var J = d.filter(function(t) {
                        return !t.disabled && !!W(t)
                    }),
                    $ = Q.select(".nv-avgLinesWrap").selectAll("line").data(J, function(t) {
                        return t.key
                    }),
                    tt = function(t) {
                        var e = i(W(t));
                        return 0 > e ? 0 : e > I ? I : e
                    };
                $.enter().append("line").style("stroke-width", 2).style("stroke-dasharray", "10,10").style("stroke", function(t, e) {
                    return a.color()(t, t.seriesIndex)
                }).attr("x1", 0).attr("x2", z).attr("y1", tt).attr("y2", tt), $.style("stroke-opacity", function(t) {
                    var e = i(W(t));
                    return 0 > e || e > I ? 0 : 1
                }).attr("x1", 0).attr("x2", z).attr("y1", tt).attr("y2", tt), $.exit().remove();
                var et = U.selectAll(".nv-indexLine").data([O]);
                et.enter().append("rect").attr("class", "nv-indexLine").attr("width", 3).attr("x", -2).attr("fill", "red").attr("fill-opacity", .5).style("pointer-events", "all").call(G), et.attr("transform", function(t) {
                    return "translate(" + D(t.i) + ",0)"
                }).attr("height", I), m && (o.scale(r)._ticks(t.utils.calcTicksX(z / 70, d)).tickSize(-I, 0), Q.select(".nv-x.nv-axis").attr("transform", "translate(0," + i.range()[0] + ")"), Q.select(".nv-x.nv-axis").call(o)), y && (s.scale(i)._ticks(t.utils.calcTicksY(I / 36, d)).tickSize(-z, 0), Q.select(".nv-y.nv-axis").call(s)), Q.select(".nv-background rect").on("click", function() {
                    O.x = d3.mouse(this)[0], O.i = Math.round(D.invert(O.x)), A.index = O.i, E.stateChange(A), L()
                }), a.dispatch.on("elementClick", function(t) {
                    O.i = t.pointIndex, O.x = D(O.i), A.index = O.i, E.stateChange(A), L()
                }), u.dispatch.on("legendClick", function(t, n) {
                    t.disabled = !t.disabled, w = !t.disabled, A.rescaleY = w, E.stateChange(A), e.update()
                }), l.dispatch.on("stateChange", function(t) {
                    for (var n in t) A[n] = t[n];
                    E.stateChange(A), e.update()
                }), c.dispatch.on("elementMousemove", function(n) {
                    a.clearHighlights();
                    var r, i, l, u = [];
                    if (d.filter(function(t, e) {
                            return t.seriesIndex = e, !t.disabled
                        }).forEach(function(o, s) {
                            i = t.interactiveBisect(o.values, n.pointXValue, e.x()), a.highlightPoint(s, i, !0);
                            var c = o.values[i];
                            "undefined" != typeof c && ("undefined" == typeof r && (r = c), "undefined" == typeof l && (l = e.xScale()(e.x()(c, i))), u.push({
                                key: o.key,
                                value: e.y()(c, i),
                                color: p(o, o.seriesIndex)
                            }))
                        }), u.length > 2) {
                        var f = e.yScale().invert(n.mouseY),
                            h = Math.abs(e.yScale().domain()[0] - e.yScale().domain()[1]),
                            g = .03 * h,
                            v = t.nearestValueIndex(u.map(function(t) {
                                return t.value
                            }), f, g);
                        null !== v && (u[v].highlight = !0)
                    }
                    var m = o.tickFormat()(e.x()(r, i), i);
                    c.tooltip.chartContainer(V.parentNode).valueFormatter(function(t, e) {
                        return s.tickFormat()(t)
                    }).data({
                        value: m,
                        series: u
                    })(), c.renderGuideLine(l)
                }), c.dispatch.on("elementMouseout", function(t) {
                    a.clearHighlights()
                }), E.on("changeState", function(t) {
                    "undefined" != typeof t.disabled && (d.forEach(function(e, n) {
                        e.disabled = t.disabled[n]
                    }), A.disabled = t.disabled), "undefined" != typeof t.index && (O.i = t.index, O.x = D(O.i), A.index = t.index, et.data([O])), "undefined" != typeof t.rescaleY && (w = t.rescaleY), e.update()
                })
            }), N.renderEnd("cumulativeLineChart immediate"), e
        }

        function n(t, e) {
            return L || (L = a.y()), e.map(function(e, n) {
                if (!e.values) return e;
                var r = e.values[t];
                if (null == r) return e;
                var i = L(r, t);
                return -.95 > i && !_ ? (e.tempDisabled = !0, e) : (e.tempDisabled = !1, e.values = e.values.map(function(t, e) {
                    return t.display = {
                        y: (L(t, e) - i) / (1 + i)
                    }, t
                }), e)
            })
        }
        var r, i, a = t.models.line(),
            o = t.models.axis(),
            s = t.models.axis(),
            l = t.models.legend(),
            u = t.models.legend(),
            c = t.interactiveGuideline(),
            d = t.models.tooltip(),
            f = {
                top: 30,
                right: 30,
                bottom: 50,
                left: 60
            },
            p = t.utils.defaultColor(),
            h = null,
            g = null,
            v = !0,
            m = !0,
            y = !0,
            x = !1,
            b = !0,
            k = !1,
            w = !0,
            M = a.id(),
            A = t.utils.state(),
            C = null,
            S = null,
            W = function(t) {
                return t.average
            },
            E = d3.dispatch("stateChange", "changeState", "renderEnd"),
            F = 250,
            _ = !1;
        A.index = 0, A.rescaleY = w, o.orient("bottom").tickPadding(7), s.orient(x ? "right" : "left"), d.valueFormatter(function(t, e) {
            return s.tickFormat()(t, e)
        }).headerFormatter(function(t, e) {
            return o.tickFormat()(t, e)
        }), u.updateState(!1);
        var D = d3.scale.linear(),
            O = {
                i: 0,
                x: 0
            },
            N = t.utils.renderWatch(E, F),
            B = function(t) {
                return function() {
                    return {
                        active: t.map(function(t) {
                            return !t.disabled
                        }),
                        index: O.i,
                        rescaleY: w
                    }
                }
            },
            P = function(t) {
                return function(e) {
                    void 0 !== e.index && (O.i = e.index), void 0 !== e.rescaleY && (w = e.rescaleY), void 0 !== e.active && t.forEach(function(t, n) {
                        t.disabled = !e.active[n]
                    })
                }
            };
        a.dispatch.on("elementMouseover.tooltip", function(t) {
            var n = {
                x: e.x()(t.point),
                y: e.y()(t.point),
                color: t.point.color
            };
            t.point = n, d.data(t).hidden(!1)
        }), a.dispatch.on("elementMouseout.tooltip", function(t) {
            d.hidden(!0)
        });
        var L = null;
        return e.dispatch = E, e.lines = a, e.legend = l, e.controls = u, e.xAxis = o, e.yAxis = s, e.interactiveLayer = c, e.state = A, e.tooltip = d, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            height: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            rescaleY: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t
                }
            },
            showControls: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = t
                }
            },
            showLegend: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            average: {
                get: function() {
                    return W
                },
                set: function(t) {
                    W = t
                }
            },
            defaultState: {
                get: function() {
                    return C
                },
                set: function(t) {
                    C = t
                }
            },
            noData: {
                get: function() {
                    return S
                },
                set: function(t) {
                    S = t
                }
            },
            showXAxis: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            showYAxis: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t
                }
            },
            noErrorCheck: {
                get: function() {
                    return _
                },
                set: function(t) {
                    _ = t
                }
            },
            margin: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f.top = void 0 !== t.top ? t.top : f.top, f.right = void 0 !== t.right ? t.right : f.right, f.bottom = void 0 !== t.bottom ? t.bottom : f.bottom, f.left = void 0 !== t.left ? t.left : f.left
                }
            },
            color: {
                get: function() {
                    return p
                },
                set: function(e) {
                    p = t.utils.getColor(e), l.color(p)
                }
            },
            useInteractiveGuideline: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t, t === !0 && (e.interactive(!1), e.useVoronoi(!1))
                }
            },
            rightAlignYAxis: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t, s.orient(t ? "right" : "left")
                }
            },
            duration: {
                get: function() {
                    return F
                },
                set: function(t) {
                    F = t, a.duration(F), o.duration(F), s.duration(F), N.reset(F)
                }
            }
        }), t.utils.inheritOptions(e, a), t.utils.initOptions(e), e
    }, t.models.discreteBar = function() {
        "use strict";

        function e(f) {
            return A.reset(), f.each(function(e) {
                var f = c - u.left - u.right,
                    M = d - u.top - u.bottom;
                n = d3.select(this), t.utils.initSVG(n), e.forEach(function(t, e) {
                    t.values.forEach(function(t) {
                        t.series = e
                    })
                });
                var C = r && i ? [] : e.map(function(t) {
                    return t.values.map(function(t, e) {
                        return {
                            x: g(t, e),
                            y: v(t, e),
                            y0: t.y0
                        }
                    })
                });
                p.domain(r || d3.merge(C).map(function(t) {
                    return t.x
                })).rangeBands(a || [0, f], .1), h.domain(i || d3.extent(d3.merge(C).map(function(t) {
                    return t.y
                }).concat(m))), x ? h.range(o || [M - (h.domain()[0] < 0 ? 12 : 0), h.domain()[1] > 0 ? 12 : 0]) : h.range(o || [M, 0]), s = s || p, l = l || h.copy().range([h(0), h(0)]);
                var S = n.selectAll("g.nv-wrap.nv-discretebar").data([e]),
                    W = S.enter().append("g").attr("class", "nvd3 nv-wrap nv-discretebar"),
                    E = W.append("g");
                S.select("g");
                E.append("g").attr("class", "nv-groups"), S.attr("transform", "translate(" + u.left + "," + u.top + ")");
                var F = S.select(".nv-groups").selectAll(".nv-group").data(function(t) {
                    return t
                }, function(t) {
                    return t.key
                });
                F.enter().append("g").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6), F.exit().watchTransition(A, "discreteBar: exit groups").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6).remove(), F.attr("class", function(t, e) {
                    return "nv-group nv-series-" + e
                }).classed("hover", function(t) {
                    return t.hover
                }), F.watchTransition(A, "discreteBar: groups").style("stroke-opacity", 1).style("fill-opacity", .75);
                var _ = F.selectAll("g.nv-bar").data(function(t) {
                    return t.values
                });
                _.exit().remove();
                var D = _.enter().append("g").attr("transform", function(t, e, n) {
                    return "translate(" + (p(g(t, e)) + .05 * p.rangeBand()) + ", " + h(0) + ")"
                }).on("mouseover", function(t, e) {
                    d3.select(this).classed("hover", !0), k.elementMouseover({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    })
                }).on("mouseout", function(t, e) {
                    d3.select(this).classed("hover", !1), k.elementMouseout({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    })
                }).on("mousemove", function(t, e) {
                    k.elementMousemove({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    })
                }).on("click", function(t, e) {
                    var n = this;
                    k.elementClick({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill"),
                        event: d3.event,
                        element: n
                    }), d3.event.stopPropagation()
                }).on("dblclick", function(t, e) {
                    k.elementDblClick({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    }), d3.event.stopPropagation()
                });
                D.append("rect").attr("height", 0).attr("width", .9 * p.rangeBand() / e.length), x ? (D.append("text").attr("text-anchor", "middle"), _.select("text").text(function(t, e) {
                    return b(v(t, e))
                }).watchTransition(A, "discreteBar: bars text").attr("x", .9 * p.rangeBand() / 2).attr("y", function(t, e) {
                    return v(t, e) < 0 ? h(v(t, e)) - h(0) + 12 : -4
                })) : _.selectAll("text").remove(), _.attr("class", function(t, e) {
                    return v(t, e) < 0 ? "nv-bar negative" : "nv-bar positive"
                }).style("fill", function(t, e) {
                    return t.color || y(t, e)
                }).style("stroke", function(t, e) {
                    return t.color || y(t, e)
                }).select("rect").attr("class", w).watchTransition(A, "discreteBar: bars rect").attr("width", .9 * p.rangeBand() / e.length), _.watchTransition(A, "discreteBar: bars").attr("transform", function(t, e) {
                    var n = p(g(t, e)) + .05 * p.rangeBand(),
                        r = v(t, e) < 0 ? h(0) : h(0) - h(v(t, e)) < 1 ? h(0) - 1 : h(v(t, e));
                    return "translate(" + n + ", " + r + ")"
                }).select("rect").attr("height", function(t, e) {
                    return Math.max(Math.abs(h(v(t, e)) - h(0)), 1)
                }), s = p.copy(), l = h.copy()
            }), A.renderEnd("discreteBar immediate"), e
        }
        var n, r, i, a, o, s, l, u = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            c = 960,
            d = 500,
            f = Math.floor(1e4 * Math.random()),
            p = d3.scale.ordinal(),
            h = d3.scale.linear(),
            g = function(t) {
                return t.x
            },
            v = function(t) {
                return t.y
            },
            m = [0],
            y = t.utils.defaultColor(),
            x = !1,
            b = d3.format(",.2f"),
            k = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout", "elementMousemove", "renderEnd"),
            w = "discreteBar",
            M = 250,
            A = t.utils.renderWatch(k, M);
        return e.dispatch = k, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            height: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            forceY: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            showValues: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t
                }
            },
            x: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            y: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            xScale: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            yScale: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            xDomain: {
                get: function() {
                    return r
                },
                set: function(t) {
                    r = t
                }
            },
            yDomain: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i = t
                }
            },
            xRange: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            yRange: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            valueFormat: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = t
                }
            },
            id: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            rectClass: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t
                }
            },
            margin: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u.top = void 0 !== t.top ? t.top : u.top, u.right = void 0 !== t.right ? t.right : u.right, u.bottom = void 0 !== t.bottom ? t.bottom : u.bottom, u.left = void 0 !== t.left ? t.left : u.left
                }
            },
            color: {
                get: function() {
                    return y
                },
                set: function(e) {
                    y = t.utils.getColor(e)
                }
            },
            duration: {
                get: function() {
                    return M
                },
                set: function(t) {
                    M = t, A.reset(M)
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.discreteBarChart = function() {
        "use strict";

        function e(l) {
            return M.reset(), M.models(i), h && M.models(a), g && M.models(o), l.each(function(l) {
                var f = d3.select(this);
                t.utils.initSVG(f);
                var b = t.utils.availableWidth(c, f, u),
                    M = t.utils.availableHeight(d, f, u);
                if (e.update = function() {
                        k.beforeUpdate(), f.transition().duration(w).call(e)
                    }, e.container = this, !(l && l.length && l.filter(function(t) {
                        return t.values.length
                    }).length)) return t.utils.noData(e, f), e;
                f.selectAll(".nv-noData").remove(), n = i.xScale(), r = i.yScale().clamp(!0);
                var A = f.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([l]),
                    C = A.enter().append("g").attr("class", "nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),
                    S = C.append("defs"),
                    W = A.select("g");
                C.append("g").attr("class", "nv-x nv-axis"), C.append("g").attr("class", "nv-y nv-axis").append("g").attr("class", "nv-zeroLine").append("line"), C.append("g").attr("class", "nv-barsWrap"), C.append("g").attr("class", "nv-legendWrap"), W.attr("transform", "translate(" + u.left + "," + u.top + ")"), p && (s.width(b), W.select(".nv-legendWrap").datum(l).call(s), u.top != s.height() && (u.top = s.height(), M = t.utils.availableHeight(d, f, u)), A.select(".nv-legendWrap").attr("transform", "translate(0," + -u.top + ")")), v && W.select(".nv-y.nv-axis").attr("transform", "translate(" + b + ",0)"), v && W.select(".nv-y.nv-axis").attr("transform", "translate(" + b + ",0)"), i.width(b).height(M);
                var E = W.select(".nv-barsWrap").datum(l.filter(function(t) {
                    return !t.disabled
                }));
                if (E.transition().call(i), S.append("clipPath").attr("id", "nv-x-label-clip-" + i.id()).append("rect"), W.select("#nv-x-label-clip-" + i.id() + " rect").attr("width", n.rangeBand() * (m ? 2 : 1)).attr("height", 16).attr("x", -n.rangeBand() / (m ? 1 : 2)),
                    h) {
                    a.scale(n)._ticks(t.utils.calcTicksX(b / 100, l)).tickSize(-M, 0), W.select(".nv-x.nv-axis").attr("transform", "translate(0," + (r.range()[0] + (i.showValues() && r.domain()[0] < 0 ? 16 : 0)) + ")"), W.select(".nv-x.nv-axis").call(a);
                    var F = W.select(".nv-x.nv-axis").selectAll("g");
                    m && F.selectAll("text").attr("transform", function(t, e, n) {
                        return "translate(0," + (n % 2 == 0 ? "5" : "17") + ")"
                    }), x && F.selectAll(".tick text").attr("transform", "rotate(" + x + " 0,0)").style("text-anchor", x > 0 ? "start" : "end"), y && W.selectAll(".tick text").call(t.utils.wrapTicks, e.xAxis.rangeBand())
                }
                g && (o.scale(r)._ticks(t.utils.calcTicksY(M / 36, l)).tickSize(-b, 0), W.select(".nv-y.nv-axis").call(o)), W.select(".nv-zeroLine line").attr("x1", 0).attr("x2", v ? -b : b).attr("y1", r(0)).attr("y2", r(0))
            }), M.renderEnd("discreteBar chart immediate"), e
        }
        var n, r, i = t.models.discreteBar(),
            a = t.models.axis(),
            o = t.models.axis(),
            s = t.models.legend(),
            l = t.models.tooltip(),
            u = {
                top: 15,
                right: 10,
                bottom: 50,
                left: 60
            },
            c = null,
            d = null,
            f = t.utils.getColor(),
            p = !1,
            h = !0,
            g = !0,
            v = !1,
            m = !1,
            y = !1,
            x = 0,
            b = null,
            k = d3.dispatch("beforeUpdate", "renderEnd"),
            w = 250;
        a.orient("bottom").showMaxMin(!1).tickFormat(function(t) {
            return t
        }), o.orient(v ? "right" : "left").tickFormat(d3.format(",.1f")), l.duration(0).headerEnabled(!1).valueFormatter(function(t, e) {
            return o.tickFormat()(t, e)
        }).keyFormatter(function(t, e) {
            return a.tickFormat()(t, e)
        });
        var M = t.utils.renderWatch(k, w);
        return i.dispatch.on("elementMouseover.tooltip", function(t) {
            t.series = {
                key: e.x()(t.data),
                value: e.y()(t.data),
                color: t.color
            }, l.data(t).hidden(!1)
        }), i.dispatch.on("elementMouseout.tooltip", function(t) {
            l.hidden(!0)
        }), i.dispatch.on("elementMousemove.tooltip", function(t) {
            l()
        }), e.dispatch = k, e.discretebar = i, e.legend = s, e.xAxis = a, e.yAxis = o, e.tooltip = l, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            height: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            showLegend: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            staggerLabels: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            rotateLabels: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t
                }
            },
            wrapLabels: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = !!t
                }
            },
            showXAxis: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            showYAxis: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            noData: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = t
                }
            },
            margin: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u.top = void 0 !== t.top ? t.top : u.top, u.right = void 0 !== t.right ? t.right : u.right, u.bottom = void 0 !== t.bottom ? t.bottom : u.bottom, u.left = void 0 !== t.left ? t.left : u.left
                }
            },
            duration: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t, M.reset(w), i.duration(w), a.duration(w), o.duration(w)
                }
            },
            color: {
                get: function() {
                    return f
                },
                set: function(e) {
                    f = t.utils.getColor(e), i.color(f), s.color(f)
                }
            },
            rightAlignYAxis: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t, o.orient(t ? "right" : "left")
                }
            }
        }), t.utils.inheritOptions(e, i), t.utils.initOptions(e), e
    }, t.models.distribution = function() {
        "use strict";

        function e(c) {
            return f.reset(), c.each(function(e) {
                var c = (i - ("x" === o ? r.left + r.right : r.top + r.bottom), "x" == o ? "y" : "x"),
                    d = d3.select(this);
                t.utils.initSVG(d), n = n || u;
                var p = d.selectAll("g.nv-distribution").data([e]),
                    h = p.enter().append("g").attr("class", "nvd3 nv-distribution"),
                    g = (h.append("g"), p.select("g"));
                p.attr("transform", "translate(" + r.left + "," + r.top + ")");
                var v = g.selectAll("g.nv-dist").data(function(t) {
                    return t
                }, function(t) {
                    return t.key
                });
                v.enter().append("g"), v.attr("class", function(t, e) {
                    return "nv-dist nv-series-" + e
                }).style("stroke", function(t, e) {
                    return l(t, e)
                });
                var m = v.selectAll("line.nv-dist" + o).data(function(t) {
                    return t.values
                });
                m.enter().append("line").attr(o + "1", function(t, e) {
                    return n(s(t, e))
                }).attr(o + "2", function(t, e) {
                    return n(s(t, e))
                }), f.transition(v.exit().selectAll("line.nv-dist" + o), "dist exit").attr(o + "1", function(t, e) {
                    return u(s(t, e))
                }).attr(o + "2", function(t, e) {
                    return u(s(t, e))
                }).style("stroke-opacity", 0).remove(), m.attr("class", function(t, e) {
                    return "nv-dist" + o + " nv-dist" + o + "-" + e
                }).attr(c + "1", 0).attr(c + "2", a), f.transition(m, "dist").attr(o + "1", function(t, e) {
                    return u(s(t, e))
                }).attr(o + "2", function(t, e) {
                    return u(s(t, e))
                }), n = u.copy()
            }), f.renderEnd("distribution immediate"), e
        }
        var n, r = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            i = 400,
            a = 8,
            o = "x",
            s = function(t) {
                return t[o]
            },
            l = t.utils.defaultColor(),
            u = d3.scale.linear(),
            c = 250,
            d = d3.dispatch("renderEnd"),
            f = t.utils.renderWatch(d, c);
        return e.options = t.utils.optionsFunc.bind(e), e.dispatch = d, e.margin = function(t) {
            return arguments.length ? (r.top = "undefined" != typeof t.top ? t.top : r.top, r.right = "undefined" != typeof t.right ? t.right : r.right, r.bottom = "undefined" != typeof t.bottom ? t.bottom : r.bottom, r.left = "undefined" != typeof t.left ? t.left : r.left, e) : r
        }, e.width = function(t) {
            return arguments.length ? (i = t, e) : i
        }, e.axis = function(t) {
            return arguments.length ? (o = t, e) : o
        }, e.size = function(t) {
            return arguments.length ? (a = t, e) : a
        }, e.getData = function(t) {
            return arguments.length ? (s = d3.functor(t), e) : s
        }, e.scale = function(t) {
            return arguments.length ? (u = t, e) : u
        }, e.color = function(n) {
            return arguments.length ? (l = t.utils.getColor(n), e) : l
        }, e.duration = function(t) {
            return arguments.length ? (c = t, f.reset(c), e) : c
        }, e
    }, t.models.furiousLegend = function() {
        "use strict";

        function e(v) {
            function m(t, e) {
                return "furious" != g ? "#000" : p ? t.disengaged ? o(t, e) : "#fff" : p ? void 0 : t.disabled ? o(t, e) : "#fff"
            }

            function y(t, e) {
                return p && "furious" == g ? t.disengaged ? "#fff" : o(t, e) : t.disabled ? "#fff" : o(t, e)
            }
            return v.each(function(e) {
                var v = r - n.left - n.right,
                    x = d3.select(this);
                t.utils.initSVG(x);
                var b = x.selectAll("g.nv-legend").data([e]),
                    k = (b.enter().append("g").attr("class", "nvd3 nv-legend").append("g"), b.select("g"));
                b.attr("transform", "translate(" + n.left + "," + n.top + ")");
                var w, M = k.selectAll(".nv-series").data(function(t) {
                        return "furious" != g ? t : t.filter(function(t) {
                            return p ? !0 : !t.disengaged
                        })
                    }),
                    A = M.enter().append("g").attr("class", "nv-series");
                if ("classic" == g) A.append("circle").style("stroke-width", 2).attr("class", "nv-legend-symbol").attr("r", 5), w = M.select("circle");
                else if ("furious" == g) {
                    A.append("rect").style("stroke-width", 2).attr("class", "nv-legend-symbol").attr("rx", 3).attr("ry", 3), w = M.select("rect"), A.append("g").attr("class", "nv-check-box").property("innerHTML", '<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform", "translate(-10,-8)scale(0.5)");
                    var C = M.select(".nv-check-box");
                    C.each(function(t, e) {
                        d3.select(this).selectAll("path").attr("stroke", m(t, e))
                    })
                }
                A.append("text").attr("text-anchor", "start").attr("class", "nv-legend-text").attr("dy", ".32em").attr("dx", "8");
                var S = M.select("text.nv-legend-text");
                M.on("mouseover", function(t, e) {
                    h.legendMouseover(t, e)
                }).on("mouseout", function(t, e) {
                    h.legendMouseout(t, e)
                }).on("click", function(t, e) {
                    h.legendClick(t, e);
                    var n = M.data();
                    if (d) {
                        if ("classic" == g) f ? (n.forEach(function(t) {
                            t.disabled = !0
                        }), t.disabled = !1) : (t.disabled = !t.disabled, n.every(function(t) {
                            return t.disabled
                        }) && n.forEach(function(t) {
                            t.disabled = !1
                        }));
                        else if ("furious" == g)
                            if (p) t.disengaged = !t.disengaged, t.userDisabled = void 0 == t.userDisabled ? !!t.disabled : t.userDisabled, t.disabled = t.disengaged || t.userDisabled;
                            else if (!p) {
                            t.disabled = !t.disabled, t.userDisabled = t.disabled;
                            var r = n.filter(function(t) {
                                return !t.disengaged
                            });
                            r.every(function(t) {
                                return t.userDisabled
                            }) && n.forEach(function(t) {
                                t.disabled = t.userDisabled = !1
                            })
                        }
                        h.stateChange({
                            disabled: n.map(function(t) {
                                return !!t.disabled
                            }),
                            disengaged: n.map(function(t) {
                                return !!t.disengaged
                            })
                        })
                    }
                }).on("dblclick", function(t, e) {
                    if (("furious" != g || !p) && (h.legendDblclick(t, e), d)) {
                        var n = M.data();
                        n.forEach(function(t) {
                            t.disabled = !0, "furious" == g && (t.userDisabled = t.disabled)
                        }), t.disabled = !1, "furious" == g && (t.userDisabled = t.disabled), h.stateChange({
                            disabled: n.map(function(t) {
                                return !!t.disabled
                            })
                        })
                    }
                }), M.classed("nv-disabled", function(t) {
                    return t.userDisabled
                }), M.exit().remove(), S.attr("fill", m).text(a);
                var W;
                switch (g) {
                    case "furious":
                        W = 23;
                        break;
                    case "classic":
                        W = 20
                }
                if (l) {
                    var E = [];
                    M.each(function(e, n) {
                        var r;
                        if (a(e).length > s) {
                            var i = a(e).substring(0, s);
                            r = d3.select(this).select("text").text(i + "..."), d3.select(this).append("svg:title").text(a(e))
                        } else r = d3.select(this).select("text");
                        var o;
                        try {
                            if (o = r.node().getComputedTextLength(), 0 >= o) throw Error()
                        } catch (l) {
                            o = t.utils.calcApproxTextWidth(r)
                        }
                        E.push(o + u)
                    });
                    for (var F = 0, _ = 0, D = []; v > _ && F < E.length;) D[F] = E[F], _ += E[F++];
                    for (0 === F && (F = 1); _ > v && F > 1;) {
                        D = [], F--;
                        for (var O = 0; O < E.length; O++) E[O] > (D[O % F] || 0) && (D[O % F] = E[O]);
                        _ = D.reduce(function(t, e, n, r) {
                            return t + e
                        })
                    }
                    for (var N = [], B = 0, P = 0; F > B; B++) N[B] = P, P += D[B];
                    M.attr("transform", function(t, e) {
                        return "translate(" + N[e % F] + "," + (5 + Math.floor(e / F) * W) + ")"
                    }), c ? k.attr("transform", "translate(" + (r - n.right - _) + "," + n.top + ")") : k.attr("transform", "translate(0," + n.top + ")"), i = n.top + n.bottom + Math.ceil(E.length / F) * W
                } else {
                    var L, T = 5,
                        V = 5,
                        z = 0;
                    M.attr("transform", function(t, e) {
                        var i = d3.select(this).select("text").node().getComputedTextLength() + u;
                        return L = V, r < n.left + n.right + L + i && (V = L = 5, T += W), V += i, V > z && (z = V), "translate(" + L + "," + T + ")"
                    }), k.attr("transform", "translate(" + (r - n.right - z) + "," + n.top + ")"), i = n.top + n.bottom + T + 15
                }
                "furious" == g && w.attr("width", function(t, e) {
                    return S[0][e].getComputedTextLength() + 27
                }).attr("height", 18).attr("y", -9).attr("x", -15), w.style("fill", y).style("stroke", function(t, e) {
                    return t.color || o(t, e)
                })
            }), e
        }
        var n = {
                top: 5,
                right: 0,
                bottom: 5,
                left: 0
            },
            r = 400,
            i = 20,
            a = function(t) {
                return t.key
            },
            o = t.utils.getColor(),
            s = 20,
            l = !0,
            u = 28,
            c = !0,
            d = !0,
            f = !1,
            p = !1,
            h = d3.dispatch("legendClick", "legendDblclick", "legendMouseover", "legendMouseout", "stateChange"),
            g = "classic";
        return e.dispatch = h, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return r
                },
                set: function(t) {
                    r = t
                }
            },
            height: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i = t
                }
            },
            key: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            align: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            rightAlign: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            maxKeyLength: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            padding: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u = t
                }
            },
            updateState: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            radioButtonMode: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            expanded: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            vers: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            margin: {
                get: function() {
                    return n
                },
                set: function(t) {
                    n.top = void 0 !== t.top ? t.top : n.top, n.right = void 0 !== t.right ? t.right : n.right, n.bottom = void 0 !== t.bottom ? t.bottom : n.bottom, n.left = void 0 !== t.left ? t.left : n.left
                }
            },
            color: {
                get: function() {
                    return o
                },
                set: function(e) {
                    o = t.utils.getColor(e)
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.historicalBar = function() {
        "use strict";

        function e(M) {
            return M.each(function(e) {
                w.reset(), c = d3.select(this);
                var M = t.utils.availableWidth(s, c, o),
                    A = t.utils.availableHeight(l, c, o);
                t.utils.initSVG(c), d.domain(n || d3.extent(e[0].values.map(p).concat(g))), m ? d.range(i || [.5 * M / e[0].values.length, M * (e[0].values.length - .5) / e[0].values.length]) : d.range(i || [0, M]), f.domain(r || d3.extent(e[0].values.map(h).concat(v))).range(a || [A, 0]), d.domain()[0] === d.domain()[1] && (d.domain()[0] ? d.domain([d.domain()[0] - .01 * d.domain()[0], d.domain()[1] + .01 * d.domain()[1]]) : d.domain([-1, 1])), f.domain()[0] === f.domain()[1] && (f.domain()[0] ? f.domain([f.domain()[0] + .01 * f.domain()[0], f.domain()[1] - .01 * f.domain()[1]]) : f.domain([-1, 1]));
                var C = c.selectAll("g.nv-wrap.nv-historicalBar-" + u).data([e[0].values]),
                    S = C.enter().append("g").attr("class", "nvd3 nv-wrap nv-historicalBar-" + u),
                    W = S.append("defs"),
                    E = S.append("g"),
                    F = C.select("g");
                E.append("g").attr("class", "nv-bars"), C.attr("transform", "translate(" + o.left + "," + o.top + ")"), c.on("click", function(t, e) {
                    b.chartClick({
                        data: t,
                        index: e,
                        pos: d3.event,
                        id: u
                    })
                }), W.append("clipPath").attr("id", "nv-chart-clip-path-" + u).append("rect"), C.select("#nv-chart-clip-path-" + u + " rect").attr("width", M).attr("height", A), F.attr("clip-path", y ? "url(#nv-chart-clip-path-" + u + ")" : "");
                var _ = C.select(".nv-bars").selectAll(".nv-bar").data(function(t) {
                    return t
                }, function(t, e) {
                    return p(t, e)
                });
                _.exit().remove(), _.enter().append("rect").attr("x", 0).attr("y", function(e, n) {
                    return t.utils.NaNtoZero(f(Math.max(0, h(e, n))))
                }).attr("height", function(e, n) {
                    return t.utils.NaNtoZero(Math.abs(f(h(e, n)) - f(0)))
                }).attr("transform", function(t, n) {
                    return "translate(" + (d(p(t, n)) - M / e[0].values.length * .45) + ",0)"
                }).on("mouseover", function(t, e) {
                    k && (d3.select(this).classed("hover", !0), b.elementMouseover({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    }))
                }).on("mouseout", function(t, e) {
                    k && (d3.select(this).classed("hover", !1), b.elementMouseout({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    }))
                }).on("mousemove", function(t, e) {
                    k && b.elementMousemove({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    })
                }).on("click", function(t, e) {
                    k && (b.elementClick({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    }), d3.event.stopPropagation())
                }).on("dblclick", function(t, e) {
                    k && (b.elementDblClick({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    }), d3.event.stopPropagation())
                }), _.attr("fill", function(t, e) {
                    return x(t, e)
                }).attr("class", function(t, e, n) {
                    return (h(t, e) < 0 ? "nv-bar negative" : "nv-bar positive") + " nv-bar-" + n + "-" + e
                }).watchTransition(w, "bars").attr("transform", function(t, n) {
                    return "translate(" + (d(p(t, n)) - M / e[0].values.length * .45) + ",0)"
                }).attr("width", M / e[0].values.length * .9), _.watchTransition(w, "bars").attr("y", function(e, n) {
                    var r = h(e, n) < 0 ? f(0) : f(0) - f(h(e, n)) < 1 ? f(0) - 1 : f(h(e, n));
                    return t.utils.NaNtoZero(r)
                }).attr("height", function(e, n) {
                    return t.utils.NaNtoZero(Math.max(Math.abs(f(h(e, n)) - f(0)), 1))
                })
            }), w.renderEnd("historicalBar immediate"), e
        }
        var n, r, i, a, o = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            s = null,
            l = null,
            u = Math.floor(1e4 * Math.random()),
            c = null,
            d = d3.scale.linear(),
            f = d3.scale.linear(),
            p = function(t) {
                return t.x
            },
            h = function(t) {
                return t.y
            },
            g = [],
            v = [0],
            m = !1,
            y = !0,
            x = t.utils.defaultColor(),
            b = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout", "elementMousemove", "renderEnd"),
            k = !0,
            w = t.utils.renderWatch(b, 0);
        return e.highlightPoint = function(t, e) {
            c.select(".nv-bars .nv-bar-0-" + t).classed("hover", e)
        }, e.clearHighlights = function() {
            c.select(".nv-bars .nv-bar.hover").classed("hover", !1)
        }, e.dispatch = b, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            height: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            forceX: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            forceY: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            padData: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            x: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            y: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            xScale: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            yScale: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            xDomain: {
                get: function() {
                    return n
                },
                set: function(t) {
                    n = t
                }
            },
            yDomain: {
                get: function() {
                    return r
                },
                set: function(t) {
                    r = t
                }
            },
            xRange: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i = t
                }
            },
            yRange: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            clipEdge: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t
                }
            },
            id: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u = t
                }
            },
            interactive: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t
                }
            },
            margin: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o.top = void 0 !== t.top ? t.top : o.top, o.right = void 0 !== t.right ? t.right : o.right, o.bottom = void 0 !== t.bottom ? t.bottom : o.bottom, o.left = void 0 !== t.left ? t.left : o.left
                }
            },
            color: {
                get: function() {
                    return x
                },
                set: function(e) {
                    x = t.utils.getColor(e)
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.historicalBarChart = function(e) {
        "use strict";

        function n(e) {
            return e.each(function(c) {
                C.reset(), C.models(a), v && C.models(o), m && C.models(s);
                var w = d3.select(this),
                    S = this;
                t.utils.initSVG(w);
                var W = t.utils.availableWidth(p, w, d),
                    E = t.utils.availableHeight(h, w, d);
                if (n.update = function() {
                        w.transition().duration(A).call(n)
                    }, n.container = this, b.disabled = c.map(function(t) {
                        return !!t.disabled
                    }), !k) {
                    var F;
                    k = {};
                    for (F in b) b[F] instanceof Array ? k[F] = b[F].slice(0) : k[F] = b[F]
                }
                if (!(c && c.length && c.filter(function(t) {
                        return t.values.length
                    }).length)) return t.utils.noData(n, w), n;
                w.selectAll(".nv-noData").remove(), r = a.xScale(), i = a.yScale();
                var _ = w.selectAll("g.nv-wrap.nv-historicalBarChart").data([c]),
                    D = _.enter().append("g").attr("class", "nvd3 nv-wrap nv-historicalBarChart").append("g"),
                    O = _.select("g");
                D.append("g").attr("class", "nv-x nv-axis"), D.append("g").attr("class", "nv-y nv-axis"), D.append("g").attr("class", "nv-barsWrap"), D.append("g").attr("class", "nv-legendWrap"), D.append("g").attr("class", "nv-interactive"), g && (l.width(W), O.select(".nv-legendWrap").datum(c).call(l), d.top != l.height() && (d.top = l.height(), E = t.utils.availableHeight(h, w, d)), _.select(".nv-legendWrap").attr("transform", "translate(0," + -d.top + ")")), _.attr("transform", "translate(" + d.left + "," + d.top + ")"), y && O.select(".nv-y.nv-axis").attr("transform", "translate(" + W + ",0)"), x && (u.width(W).height(E).margin({
                    left: d.left,
                    top: d.top
                }).svgContainer(w).xScale(r), _.select(".nv-interactive").call(u)), a.width(W).height(E).color(c.map(function(t, e) {
                    return t.color || f(t, e)
                }).filter(function(t, e) {
                    return !c[e].disabled
                }));
                var N = O.select(".nv-barsWrap").datum(c.filter(function(t) {
                    return !t.disabled
                }));
                N.transition().call(a), v && (o.scale(r)._ticks(t.utils.calcTicksX(W / 100, c)).tickSize(-E, 0), O.select(".nv-x.nv-axis").attr("transform", "translate(0," + i.range()[0] + ")"), O.select(".nv-x.nv-axis").transition().call(o)), m && (s.scale(i)._ticks(t.utils.calcTicksY(E / 36, c)).tickSize(-W, 0), O.select(".nv-y.nv-axis").transition().call(s)), u.dispatch.on("elementMousemove", function(e) {
                    a.clearHighlights();
                    var r, i, l, d = [];
                    c.filter(function(t, e) {
                        return t.seriesIndex = e, !t.disabled
                    }).forEach(function(o, s) {
                        i = t.interactiveBisect(o.values, e.pointXValue, n.x()), a.highlightPoint(i, !0);
                        var u = o.values[i];
                        void 0 !== u && (void 0 === r && (r = u), void 0 === l && (l = n.xScale()(n.x()(u, i))), d.push({
                            key: o.key,
                            value: n.y()(u, i),
                            color: f(o, o.seriesIndex),
                            data: o.values[i]
                        }))
                    });
                    var p = o.tickFormat()(n.x()(r, i));
                    u.tooltip.chartContainer(S.parentNode).valueFormatter(function(t, e) {
                        return s.tickFormat()(t)
                    }).data({
                        value: p,
                        index: i,
                        series: d
                    })(), u.renderGuideLine(l)
                }), u.dispatch.on("elementMouseout", function(t) {
                    M.tooltipHide(), a.clearHighlights()
                }), l.dispatch.on("legendClick", function(t, r) {
                    t.disabled = !t.disabled, c.filter(function(t) {
                        return !t.disabled
                    }).length || c.map(function(t) {
                        return t.disabled = !1, _.selectAll(".nv-series").classed("disabled", !1), t
                    }), b.disabled = c.map(function(t) {
                        return !!t.disabled
                    }), M.stateChange(b), e.transition().call(n)
                }), l.dispatch.on("legendDblclick", function(t) {
                    c.forEach(function(t) {
                        t.disabled = !0
                    }), t.disabled = !1, b.disabled = c.map(function(t) {
                        return !!t.disabled
                    }), M.stateChange(b), n.update()
                }), M.on("changeState", function(t) {
                    "undefined" != typeof t.disabled && (c.forEach(function(e, n) {
                        e.disabled = t.disabled[n]
                    }), b.disabled = t.disabled), n.update()
                })
            }), C.renderEnd("historicalBarChart immediate"), n
        }
        var r, i, a = e || t.models.historicalBar(),
            o = t.models.axis(),
            s = t.models.axis(),
            l = t.models.legend(),
            u = t.interactiveGuideline(),
            c = t.models.tooltip(),
            d = {
                top: 30,
                right: 90,
                bottom: 50,
                left: 90
            },
            f = t.utils.defaultColor(),
            p = null,
            h = null,
            g = !1,
            v = !0,
            m = !0,
            y = !1,
            x = !1,
            b = {},
            k = null,
            w = null,
            M = d3.dispatch("tooltipHide", "stateChange", "changeState", "renderEnd"),
            A = 250;
        o.orient("bottom").tickPadding(7), s.orient(y ? "right" : "left"), c.duration(0).headerEnabled(!1).valueFormatter(function(t, e) {
            return s.tickFormat()(t, e)
        }).headerFormatter(function(t, e) {
            return o.tickFormat()(t, e)
        });
        var C = t.utils.renderWatch(M, 0);
        return a.dispatch.on("elementMouseover.tooltip", function(t) {
            t.series = {
                key: n.x()(t.data),
                value: n.y()(t.data),
                color: t.color
            }, c.data(t).hidden(!1)
        }), a.dispatch.on("elementMouseout.tooltip", function(t) {
            c.hidden(!0)
        }), a.dispatch.on("elementMousemove.tooltip", function(t) {
            c()
        }), n.dispatch = M, n.bars = a, n.legend = l, n.xAxis = o, n.yAxis = s, n.interactiveLayer = u, n.tooltip = c, n.options = t.utils.optionsFunc.bind(n), n._options = Object.create({}, {
            width: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            height: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            showLegend: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            showXAxis: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            showYAxis: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            defaultState: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t
                }
            },
            noData: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t
                }
            },
            margin: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d.top = void 0 !== t.top ? t.top : d.top, d.right = void 0 !== t.right ? t.right : d.right, d.bottom = void 0 !== t.bottom ? t.bottom : d.bottom, d.left = void 0 !== t.left ? t.left : d.left
                }
            },
            color: {
                get: function() {
                    return f
                },
                set: function(e) {
                    f = t.utils.getColor(e), l.color(f), a.color(f)
                }
            },
            duration: {
                get: function() {
                    return A
                },
                set: function(t) {
                    A = t, C.reset(A), s.duration(A), o.duration(A)
                }
            },
            rightAlignYAxis: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t, s.orient(t ? "right" : "left")
                }
            },
            useInteractiveGuideline: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t, t === !0 && n.interactive(!1)
                }
            }
        }), t.utils.inheritOptions(n, a), t.utils.initOptions(n), n
    }, t.models.ohlcBarChart = function() {
        var e = t.models.historicalBarChart(t.models.ohlcBar());
        return e.useInteractiveGuideline(!0), e.interactiveLayer.tooltip.contentGenerator(function(t) {
            var n = t.series[0].data,
                r = n.open < n.close ? "2ca02c" : "d62728";
            return '<h3 style="color: #' + r + '">' + t.value + "</h3><table><tr><td>open:</td><td>" + e.yAxis.tickFormat()(n.open) + "</td></tr><tr><td>close:</td><td>" + e.yAxis.tickFormat()(n.close) + "</td></tr><tr><td>high</td><td>" + e.yAxis.tickFormat()(n.high) + "</td></tr><tr><td>low:</td><td>" + e.yAxis.tickFormat()(n.low) + "</td></tr></table>"
        }), e
    }, t.models.candlestickBarChart = function() {
        var e = t.models.historicalBarChart(t.models.candlestickBar());
        return e.useInteractiveGuideline(!0), e.interactiveLayer.tooltip.contentGenerator(function(t) {
            var n = t.series[0].data,
                r = n.open < n.close ? "2ca02c" : "d62728";
            return '<h3 style="color: #' + r + '">' + t.value + "</h3><table><tr><td>open:</td><td>" + e.yAxis.tickFormat()(n.open) + "</td></tr><tr><td>close:</td><td>" + e.yAxis.tickFormat()(n.close) + "</td></tr><tr><td>high</td><td>" + e.yAxis.tickFormat()(n.high) + "</td></tr><tr><td>low:</td><td>" + e.yAxis.tickFormat()(n.low) + "</td></tr></table>"
        }), e
    }, t.models.legend = function() {
        "use strict";

        function e(v) {
            function m(t, e) {
                return "furious" != g ? "#000" : p ? t.disengaged ? "#000" : "#fff" : p ? void 0 : (t.color || (t.color = o(t, e)), t.disabled ? t.color : "#fff")
            }

            function y(t, e) {
                return p && "furious" == g && t.disengaged ? "#eee" : t.color || o(t, e)
            }

            function x(t, e) {
                return p && "furious" == g ? 1 : t.disabled ? 0 : 1
            }
            return v.each(function(e) {
                var o = r - n.left - n.right,
                    v = d3.select(this);
                t.utils.initSVG(v);
                var b = v.selectAll("g.nv-legend").data([e]),
                    k = b.enter().append("g").attr("class", "nvd3 nv-legend").append("g"),
                    w = b.select("g");
                b.attr("transform", "translate(" + n.left + "," + n.top + ")");
                var M, A, C = w.selectAll(".nv-series").data(function(t) {
                        return "furious" != g ? t : t.filter(function(t) {
                            return p ? !0 : !t.disengaged
                        })
                    }),
                    S = C.enter().append("g").attr("class", "nv-series");
                switch (g) {
                    case "furious":
                        A = 23;
                        break;
                    case "classic":
                        A = 20
                }
                if ("classic" == g) S.append("circle").style("stroke-width", 2).attr("class", "nv-legend-symbol").attr("r", 5), M = C.select("circle");
                else if ("furious" == g) {
                    S.append("rect").style("stroke-width", 2).attr("class", "nv-legend-symbol").attr("rx", 3).attr("ry", 3), M = C.select(".nv-legend-symbol"), S.append("g").attr("class", "nv-check-box").property("innerHTML", '<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform", "translate(-10,-8)scale(0.5)");
                    var W = C.select(".nv-check-box");
                    W.each(function(t, e) {
                        d3.select(this).selectAll("path").attr("stroke", m(t, e))
                    })
                }
                S.append("text").attr("text-anchor", "start").attr("class", "nv-legend-text").attr("dy", ".32em").attr("dx", "8");
                var E = C.select("text.nv-legend-text");
                C.on("mouseover", function(t, e) {
                    h.legendMouseover(t, e)
                }).on("mouseout", function(t, e) {
                    h.legendMouseout(t, e)
                }).on("click", function(t, e) {
                    h.legendClick(t, e);
                    var n = C.data();
                    if (d) {
                        if ("classic" == g) f ? (n.forEach(function(t) {
                            t.disabled = !0
                        }), t.disabled = !1) : (t.disabled = !t.disabled, n.every(function(t) {
                            return t.disabled
                        }) && n.forEach(function(t) {
                            t.disabled = !1
                        }));
                        else if ("furious" == g)
                            if (p) t.disengaged = !t.disengaged, t.userDisabled = void 0 == t.userDisabled ? !!t.disabled : t.userDisabled, t.disabled = t.disengaged || t.userDisabled;
                            else if (!p) {
                            t.disabled = !t.disabled, t.userDisabled = t.disabled;
                            var r = n.filter(function(t) {
                                return !t.disengaged
                            });
                            r.every(function(t) {
                                return t.userDisabled
                            }) && n.forEach(function(t) {
                                t.disabled = t.userDisabled = !1
                            })
                        }
                        h.stateChange({
                            disabled: n.map(function(t) {
                                return !!t.disabled
                            }),
                            disengaged: n.map(function(t) {
                                return !!t.disengaged
                            })
                        })
                    }
                }).on("dblclick", function(t, e) {
                    if (("furious" != g || !p) && (h.legendDblclick(t, e), d)) {
                        var n = C.data();
                        n.forEach(function(t) {
                            t.disabled = !0, "furious" == g && (t.userDisabled = t.disabled)
                        }), t.disabled = !1, "furious" == g && (t.userDisabled = t.disabled), h.stateChange({
                            disabled: n.map(function(t) {
                                return !!t.disabled
                            })
                        })
                    }
                }), C.classed("nv-disabled", function(t) {
                    return t.userDisabled
                }), C.exit().remove(), E.attr("fill", m).text(a);
                var F = 0;
                if (l) {
                    var _ = [];
                    C.each(function(e, n) {
                        var r;
                        if (a(e).length > s) {
                            var i = a(e).substring(0, s);
                            r = d3.select(this).select("text").text(i + "..."), d3.select(this).append("svg:title").text(a(e))
                        } else r = d3.select(this).select("text");
                        var o;
                        try {
                            if (o = r.node().getComputedTextLength(), 0 >= o) throw Error()
                        } catch (l) {
                            o = t.utils.calcApproxTextWidth(r)
                        }
                        _.push(o + u)
                    });
                    var D = 0,
                        O = [];
                    for (F = 0; o > F && D < _.length;) O[D] = _[D], F += _[D++];
                    for (0 === D && (D = 1); F > o && D > 1;) {
                        O = [], D--;
                        for (var N = 0; N < _.length; N++) _[N] > (O[N % D] || 0) && (O[N % D] = _[N]);
                        F = O.reduce(function(t, e, n, r) {
                            return t + e
                        })
                    }
                    for (var B = [], P = 0, L = 0; D > P; P++) B[P] = L, L += O[P];
                    C.attr("transform", function(t, e) {
                        return "translate(" + B[e % D] + "," + (5 + Math.floor(e / D) * A) + ")"
                    }), c ? w.attr("transform", "translate(" + (r - n.right - F) + "," + n.top + ")") : w.attr("transform", "translate(0," + n.top + ")"), i = n.top + n.bottom + Math.ceil(_.length / D) * A
                } else {
                    var T, V = 5,
                        z = 5,
                        I = 0;
                    C.attr("transform", function(t, e) {
                        var i = d3.select(this).select("text").node().getComputedTextLength() + u;
                        return T = z, r < n.left + n.right + T + i && (z = T = 5, V += A), z += i, z > I && (I = z), T + I > F && (F = T + I), "translate(" + T + "," + V + ")"
                    }), w.attr("transform", "translate(" + (r - n.right - I) + "," + n.top + ")"), i = n.top + n.bottom + V + 15
                }
                if ("furious" == g) {
                    M.attr("width", function(t, e) {
                        return E[0][e].getComputedTextLength() + 27
                    }).attr("height", 18).attr("y", -9).attr("x", -15), k.insert("rect", ":first-child").attr("class", "nv-legend-bg").attr("fill", "#eee").attr("opacity", 0);
                    var H = w.select(".nv-legend-bg");
                    H.transition().duration(300).attr("x", -A).attr("width", F + A - 12).attr("height", i + 10).attr("y", -n.top - 10).attr("opacity", p ? 1 : 0)
                }
                M.style("fill", y).style("fill-opacity", x).style("stroke", y)
            }), e
        }
        var n = {
                top: 5,
                right: 0,
                bottom: 5,
                left: 0
            },
            r = 400,
            i = 20,
            a = function(t) {
                return t.key
            },
            o = t.utils.getColor(),
            s = 20,
            l = !0,
            u = 32,
            c = !0,
            d = !0,
            f = !1,
            p = !1,
            h = d3.dispatch("legendClick", "legendDblclick", "legendMouseover", "legendMouseout", "stateChange"),
            g = "classic";
        return e.dispatch = h, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return r
                },
                set: function(t) {
                    r = t
                }
            },
            height: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i = t
                }
            },
            key: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            align: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            maxKeyLength: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            rightAlign: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            padding: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u = t
                }
            },
            updateState: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            radioButtonMode: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            expanded: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            vers: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            margin: {
                get: function() {
                    return n
                },
                set: function(t) {
                    n.top = void 0 !== t.top ? t.top : n.top, n.right = void 0 !== t.right ? t.right : n.right, n.bottom = void 0 !== t.bottom ? t.bottom : n.bottom, n.left = void 0 !== t.left ? t.left : n.left
                }
            },
            color: {
                get: function() {
                    return o
                },
                set: function(e) {
                    o = t.utils.getColor(e)
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.line = function() {
        "use strict";

        function e(m) {
            return k.reset(), k.models(i), m.each(function(e) {
                l = d3.select(this);
                var m = t.utils.availableWidth(o, l, a),
                    y = t.utils.availableHeight(s, l, a);
                t.utils.initSVG(l), n = i.xScale(), r = i.yScale(), x = x || n, b = b || r;
                var w = l.selectAll("g.nv-wrap.nv-line").data([e]),
                    M = w.enter().append("g").attr("class", "nvd3 nv-wrap nv-line"),
                    A = M.append("defs"),
                    C = M.append("g"),
                    S = w.select("g");
                C.append("g").attr("class", "nv-groups"), C.append("g").attr("class", "nv-scatterWrap"), w.attr("transform", "translate(" + a.left + "," + a.top + ")"), i.width(m).height(y);
                var W = w.select(".nv-scatterWrap");
                W.call(i), A.append("clipPath").attr("id", "nv-edge-clip-" + i.id()).append("rect"), w.select("#nv-edge-clip-" + i.id() + " rect").attr("width", m).attr("height", y > 0 ? y : 0), S.attr("clip-path", g ? "url(#nv-edge-clip-" + i.id() + ")" : ""), W.attr("clip-path", g ? "url(#nv-edge-clip-" + i.id() + ")" : "");
                var E = w.select(".nv-groups").selectAll(".nv-group").data(function(t) {
                    return t
                }, function(t) {
                    return t.key
                });
                E.enter().append("g").style("stroke-opacity", 1e-6).style("stroke-width", function(t) {
                    return t.strokeWidth || u
                }).style("fill-opacity", 1e-6), E.exit().remove(), E.attr("class", function(t, e) {
                    return (t.classed || "") + " nv-group nv-series-" + e
                }).classed("hover", function(t) {
                    return t.hover
                }).style("fill", function(t, e) {
                    return c(t, e)
                }).style("stroke", function(t, e) {
                    return c(t, e)
                }), E.watchTransition(k, "line: groups").style("stroke-opacity", 1).style("fill-opacity", function(t) {
                    return t.fillOpacity || .5
                });
                var F = E.selectAll("path.nv-area").data(function(t) {
                    return h(t) ? [t] : []
                });
                F.enter().append("path").attr("class", "nv-area").attr("d", function(e) {
                    return d3.svg.area().interpolate(v).defined(p).x(function(e, n) {
                        return t.utils.NaNtoZero(x(d(e, n)))
                    }).y0(function(e, n) {
                        return t.utils.NaNtoZero(b(f(e, n)))
                    }).y1(function(t, e) {
                        return b(r.domain()[0] <= 0 ? r.domain()[1] >= 0 ? 0 : r.domain()[1] : r.domain()[0])
                    }).apply(this, [e.values])
                }), E.exit().selectAll("path.nv-area").remove(), F.watchTransition(k, "line: areaPaths").attr("d", function(e) {
                    return d3.svg.area().interpolate(v).defined(p).x(function(e, r) {
                        return t.utils.NaNtoZero(n(d(e, r)))
                    }).y0(function(e, n) {
                        return t.utils.NaNtoZero(r(f(e, n)))
                    }).y1(function(t, e) {
                        return r(r.domain()[0] <= 0 ? r.domain()[1] >= 0 ? 0 : r.domain()[1] : r.domain()[0])
                    }).apply(this, [e.values])
                });
                var _ = E.selectAll("path.nv-line").data(function(t) {
                    return [t.values]
                });
                _.enter().append("path").attr("class", "nv-line").attr("d", d3.svg.line().interpolate(v).defined(p).x(function(e, n) {
                    return t.utils.NaNtoZero(x(d(e, n)))
                }).y(function(e, n) {
                    return t.utils.NaNtoZero(b(f(e, n)))
                })), _.watchTransition(k, "line: linePaths").attr("d", d3.svg.line().interpolate(v).defined(p).x(function(e, r) {
                    return t.utils.NaNtoZero(n(d(e, r)))
                }).y(function(e, n) {
                    return t.utils.NaNtoZero(r(f(e, n)))
                })), x = n.copy(), b = r.copy()
            }), k.renderEnd("line immediate"), e
        }
        var n, r, i = t.models.scatter(),
            a = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            o = 960,
            s = 500,
            l = null,
            u = 1.5,
            c = t.utils.defaultColor(),
            d = function(t) {
                return t.x
            },
            f = function(t) {
                return t.y
            },
            p = function(t, e) {
                return !isNaN(f(t, e)) && null !== f(t, e)
            },
            h = function(t) {
                return t.area
            },
            g = !1,
            v = "linear",
            m = 250,
            y = d3.dispatch("elementClick", "elementMouseover", "elementMouseout", "renderEnd");
        i.pointSize(16).pointDomain([16, 256]);
        var x, b, k = t.utils.renderWatch(y, m);
        return e.dispatch = y, e.scatter = i, i.dispatch.on("elementClick", function() {
            y.elementClick.apply(this, arguments)
        }), i.dispatch.on("elementMouseover", function() {
            y.elementMouseover.apply(this, arguments)
        }), i.dispatch.on("elementMouseout", function() {
            y.elementMouseout.apply(this, arguments)
        }), e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            height: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            defined: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            interpolate: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            clipEdge: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            margin: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a.top = void 0 !== t.top ? t.top : a.top, a.right = void 0 !== t.right ? t.right : a.right, a.bottom = void 0 !== t.bottom ? t.bottom : a.bottom, a.left = void 0 !== t.left ? t.left : a.left
                }
            },
            duration: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t, k.reset(m), i.duration(m)
                }
            },
            isArea: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = d3.functor(t)
                }
            },
            x: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t, i.x(t)
                }
            },
            y: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t, i.y(t)
                }
            },
            color: {
                get: function() {
                    return c
                },
                set: function(e) {
                    c = t.utils.getColor(e), i.color(c)
                }
            }
        }), t.utils.inheritOptions(e, i), t.utils.initOptions(e), e
    }, t.models.lineChart = function() {
        "use strict";

        function e(d) {
            return L.reset(), L.models(o), L.models(f), w && L.models(s), M && L.models(l), E && L.models(p),
                W && L.models(h), d.each(function(d) {
                    function N() {
                        w && K.select(".nv-focus .nv-x.nv-axis").transition().duration(P).call(s)
                    }

                    function L() {
                        M && K.select(".nv-focus .nv-y.nv-axis").transition().duration(P).call(l)
                    }

                    function z(t) {
                        var e = +("e" == t),
                            n = e ? 1 : -1,
                            r = j / 3;
                        return "M" + .5 * n + "," + r + "A6,6 0 0 " + e + " " + 6.5 * n + "," + (r + 6) + "V" + (2 * r - 6) + "A6,6 0 0 " + e + " " + .5 * n + "," + 2 * r + "ZM" + 2.5 * n + "," + (r + 8) + "V" + (2 * r - 8) + "M" + 4.5 * n + "," + (r + 8) + "V" + (2 * r - 8)
                    }

                    function I() {
                        g.empty() || g.extent(_), tt.data([g.empty() ? i.domain() : _]).each(function(t, e) {
                            var r = i(t[0]) - n.range()[0],
                                a = Y - i(t[1]);
                            d3.select(this).select(".left").attr("width", 0 > r ? 0 : r), d3.select(this).select(".right").attr("x", i(t[1])).attr("width", 0 > a ? 0 : a)
                        })
                    }

                    function H() {
                        _ = g.empty() ? null : g.extent();
                        var t = g.empty() ? i.domain() : g.extent();
                        if (!(Math.abs(t[0] - t[1]) <= 1)) {
                            B.brush({
                                extent: t,
                                brush: g
                            }), I();
                            var e = K.select(".nv-focus .nv-linesWrap").datum(d.filter(function(t) {
                                return !t.disabled
                            }).map(function(e, n) {
                                return {
                                    key: e.key,
                                    area: e.area,
                                    classed: e.classed,
                                    values: e.values.filter(function(e, n) {
                                        return o.x()(e, n) >= t[0] && o.x()(e, n) <= t[1]
                                    }),
                                    disableTooltip: e.disableTooltip
                                }
                            }));
                            e.transition().duration(P).call(o), N(), L()
                        }
                    }
                    var G = d3.select(this);
                    t.utils.initSVG(G);
                    var Y = t.utils.availableWidth(x, G, v),
                        X = t.utils.availableHeight(b, G, v) - (S ? F : 0),
                        j = F - m.top - m.bottom;
                    if (e.update = function() {
                            0 === P ? G.call(e) : G.transition().duration(P).call(e)
                        }, e.container = this, D.setter(V(d), e.update).getter(T(d)).update(), D.disabled = d.map(function(t) {
                            return !!t.disabled
                        }), !O) {
                        var R;
                        O = {};
                        for (R in D) D[R] instanceof Array ? O[R] = D[R].slice(0) : O[R] = D[R]
                    }
                    if (!(d && d.length && d.filter(function(t) {
                            return t.values.length
                        }).length)) return t.utils.noData(e, G), e;
                    G.selectAll(".nv-noData").remove(), n = o.xScale(), r = o.yScale(), i = f.xScale(), a = f.yScale();
                    var Z = G.selectAll("g.nv-wrap.nv-lineChart").data([d]),
                        Q = Z.enter().append("g").attr("class", "nvd3 nv-wrap nv-lineChart").append("g"),
                        K = Z.select("g");
                    Q.append("g").attr("class", "nv-legendWrap");
                    var q = Q.append("g").attr("class", "nv-focus");
                    q.append("g").attr("class", "nv-background").append("rect"), q.append("g").attr("class", "nv-x nv-axis"), q.append("g").attr("class", "nv-y nv-axis"), q.append("g").attr("class", "nv-linesWrap"), q.append("g").attr("class", "nv-interactive");
                    var U = Q.append("g").attr("class", "nv-context");
                    U.append("g").attr("class", "nv-background").append("rect"), U.append("g").attr("class", "nv-x nv-axis"), U.append("g").attr("class", "nv-y nv-axis"), U.append("g").attr("class", "nv-linesWrap"), U.append("g").attr("class", "nv-brushBackground"), U.append("g").attr("class", "nv-x nv-brush"), k && (u.width(Y), K.select(".nv-legendWrap").datum(d).call(u), v.top != u.height() && (v.top = u.height(), X = t.utils.availableHeight(b, G, v) - (S ? F : 0)), Z.select(".nv-legendWrap").attr("transform", "translate(0," + -v.top + ")")), Z.attr("transform", "translate(" + v.left + "," + v.top + ")"), A && K.select(".nv-y.nv-axis").attr("transform", "translate(" + Y + ",0)"), C && (c.width(Y).height(X).margin({
                        left: v.left,
                        top: v.top
                    }).svgContainer(G).xScale(n), Z.select(".nv-interactive").call(c)), K.select(".nv-focus .nv-background rect").attr("width", Y).attr("height", X), o.width(Y).height(X).color(d.map(function(t, e) {
                        return t.color || y(t, e)
                    }).filter(function(t, e) {
                        return !d[e].disabled
                    }));
                    var J = K.select(".nv-linesWrap").datum(d.filter(function(t) {
                        return !t.disabled
                    }));
                    if (w && s.scale(n)._ticks(t.utils.calcTicksX(Y / 100, d)).tickSize(-X, 0), M && l.scale(r)._ticks(t.utils.calcTicksY(X / 36, d)).tickSize(-Y, 0), K.select(".nv-focus .nv-x.nv-axis").attr("transform", "translate(0," + X + ")"), S) {
                        f.defined(o.defined()).width(Y).height(j).color(d.map(function(t, e) {
                            return t.color || y(t, e)
                        }).filter(function(t, e) {
                            return !d[e].disabled
                        })), K.select(".nv-context").attr("transform", "translate(0," + (X + v.bottom + m.top) + ")").style("display", S ? "initial" : "none");
                        var $ = K.select(".nv-context .nv-linesWrap").datum(d.filter(function(t) {
                            return !t.disabled
                        }));
                        d3.transition($).call(f), g.x(i).on("brush", function() {
                            H()
                        }), _ && g.extent(_);
                        var tt = K.select(".nv-brushBackground").selectAll("g").data([_ || g.extent()]),
                            et = tt.enter().append("g");
                        et.append("rect").attr("class", "left").attr("x", 0).attr("y", 0).attr("height", j), et.append("rect").attr("class", "right").attr("x", 0).attr("y", 0).attr("height", j);
                        var nt = K.select(".nv-x.nv-brush").call(g);
                        nt.selectAll("rect").attr("height", j), nt.selectAll(".resize").append("path").attr("d", z), H(), K.select(".nv-context .nv-background rect").attr("width", Y).attr("height", j), E && (p.scale(i)._ticks(t.utils.calcTicksX(Y / 100, d)).tickSize(-j, 0), K.select(".nv-context .nv-x.nv-axis").attr("transform", "translate(0," + a.range()[0] + ")"), d3.transition(K.select(".nv-context .nv-x.nv-axis")).call(p)), W && (h.scale(a)._ticks(t.utils.calcTicksY(j / 36, d)).tickSize(-Y, 0), d3.transition(K.select(".nv-context .nv-y.nv-axis")).call(h)), K.select(".nv-context .nv-x.nv-axis").attr("transform", "translate(0," + a.range()[0] + ")")
                    } else J.call(o), N(), L();
                    u.dispatch.on("stateChange", function(t) {
                        for (var n in t) D[n] = t[n];
                        B.stateChange(D), e.update()
                    }), c.dispatch.on("elementMousemove", function(r) {
                        o.clearHighlights();
                        var a, s, l, u = [];
                        if (d.filter(function(t, e) {
                                return t.seriesIndex = e, !t.disabled && !t.disableTooltip
                            }).forEach(function(c, d) {
                                var f = S ? g.empty() ? i.domain() : g.extent() : n.domain(),
                                    p = c.values.filter(function(t, e) {
                                        return o.x()(t, e) >= f[0] && o.x()(t, e) <= f[1]
                                    });
                                s = t.interactiveBisect(p, r.pointXValue, o.x());
                                var h = p[s],
                                    v = e.y()(h, s);
                                null !== v && o.highlightPoint(c.seriesIndex, s, !0), void 0 !== h && (void 0 === a && (a = h), void 0 === l && (l = e.xScale()(e.x()(h, s))), u.push({
                                    key: c.key,
                                    value: v,
                                    color: y(c, c.seriesIndex),
                                    data: h
                                }))
                            }), u.length > 2) {
                            var f = e.yScale().invert(r.mouseY),
                                p = Math.abs(e.yScale().domain()[0] - e.yScale().domain()[1]),
                                h = .03 * p,
                                v = t.nearestValueIndex(u.map(function(t) {
                                    return t.value
                                }), f, h);
                            null !== v && (u[v].highlight = !0)
                        }
                        c.tooltip.chartContainer(e.container.parentNode).data({
                            value: e.x()(a, s),
                            index: s,
                            series: u
                        })(), c.renderGuideLine(l)
                    }), c.dispatch.on("elementClick", function(n) {
                        var r, i = [];
                        d.filter(function(t, e) {
                            return t.seriesIndex = e, !t.disabled
                        }).forEach(function(a) {
                            var o = t.interactiveBisect(a.values, n.pointXValue, e.x()),
                                s = a.values[o];
                            if ("undefined" != typeof s) {
                                "undefined" == typeof r && (r = e.xScale()(e.x()(s, o)));
                                var l = e.yScale()(e.y()(s, o));
                                i.push({
                                    point: s,
                                    pointIndex: o,
                                    pos: [r, l],
                                    seriesIndex: a.seriesIndex,
                                    series: a
                                })
                            }
                        }), o.dispatch.elementClick(i)
                    }), c.dispatch.on("elementMouseout", function(t) {
                        o.clearHighlights()
                    }), B.on("changeState", function(t) {
                        "undefined" != typeof t.disabled && d.length === t.disabled.length && (d.forEach(function(e, n) {
                            e.disabled = t.disabled[n]
                        }), D.disabled = t.disabled), e.update()
                    })
                }), L.renderEnd("lineChart immediate"), e
        }
        var n, r, i, a, o = t.models.line(),
            s = t.models.axis(),
            l = t.models.axis(),
            u = t.models.legend(),
            c = t.interactiveGuideline(),
            d = t.models.tooltip(),
            f = t.models.line(),
            p = t.models.axis(),
            h = t.models.axis(),
            g = d3.svg.brush(),
            v = {
                top: 30,
                right: 20,
                bottom: 50,
                left: 60
            },
            m = {
                top: 0,
                right: 20,
                bottom: 20,
                left: 60
            },
            y = t.utils.defaultColor(),
            x = null,
            b = null,
            k = !0,
            w = !0,
            M = !0,
            A = !1,
            C = !1,
            S = !1,
            W = !1,
            E = !0,
            F = 50,
            _ = null,
            D = t.utils.state(),
            O = null,
            N = null,
            B = d3.dispatch("tooltipShow", "tooltipHide", "brush", "stateChange", "changeState", "renderEnd"),
            P = 250;
        s.orient("bottom").tickPadding(7), l.orient(A ? "right" : "left"), o.clipEdge(!0).duration(0), f.interactive(!1), f.pointActive(function(t) {
            return !1
        }), p.orient("bottom").tickPadding(5), h.orient(A ? "right" : "left"), d.valueFormatter(function(t, e) {
            return l.tickFormat()(t, e)
        }).headerFormatter(function(t, e) {
            return s.tickFormat()(t, e)
        }), c.tooltip.valueFormatter(function(t, e) {
            return l.tickFormat()(t, e)
        }).headerFormatter(function(t, e) {
            return s.tickFormat()(t, e)
        });
        var L = t.utils.renderWatch(B, P),
            T = function(t) {
                return function() {
                    return {
                        active: t.map(function(t) {
                            return !t.disabled
                        })
                    }
                }
            },
            V = function(t) {
                return function(e) {
                    void 0 !== e.active && t.forEach(function(t, n) {
                        t.disabled = !e.active[n]
                    })
                }
            };
        return o.dispatch.on("elementMouseover.tooltip", function(t) {
            t.series.disableTooltip || d.data(t).hidden(!1)
        }), o.dispatch.on("elementMouseout.tooltip", function(t) {
            d.hidden(!0)
        }), e.dispatch = B, e.lines = o, e.lines2 = f, e.legend = u, e.xAxis = s, e.x2Axis = p, e.yAxis = l, e.y2Axis = h, e.interactiveLayer = c, e.tooltip = d, e.state = D, e.dispatch = B, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t
                }
            },
            height: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = t
                }
            },
            showLegend: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t
                }
            },
            showXAxis: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t
                }
            },
            showYAxis: {
                get: function() {
                    return M
                },
                set: function(t) {
                    M = t
                }
            },
            focusEnable: {
                get: function() {
                    return S
                },
                set: function(t) {
                    S = t
                }
            },
            focusHeight: {
                get: function() {
                    return height2
                },
                set: function(t) {
                    F = t
                }
            },
            focusShowAxisX: {
                get: function() {
                    return E
                },
                set: function(t) {
                    E = t
                }
            },
            focusShowAxisY: {
                get: function() {
                    return W
                },
                set: function(t) {
                    W = t
                }
            },
            brushExtent: {
                get: function() {
                    return _
                },
                set: function(t) {
                    _ = t
                }
            },
            defaultState: {
                get: function() {
                    return O
                },
                set: function(t) {
                    O = t
                }
            },
            noData: {
                get: function() {
                    return N
                },
                set: function(t) {
                    N = t
                }
            },
            margin: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v.top = void 0 !== t.top ? t.top : v.top, v.right = void 0 !== t.right ? t.right : v.right, v.bottom = void 0 !== t.bottom ? t.bottom : v.bottom, v.left = void 0 !== t.left ? t.left : v.left
                }
            },
            duration: {
                get: function() {
                    return P
                },
                set: function(t) {
                    P = t, L.reset(P), o.duration(P), s.duration(P), p.duration(P), l.duration(P), h.duration(P)
                }
            },
            focusMargin: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m.top = void 0 !== t.top ? t.top : m.top, m.right = void 0 !== t.right ? t.right : m.right, m.bottom = void 0 !== t.bottom ? t.bottom : m.bottom, m.left = void 0 !== t.left ? t.left : m.left
                }
            },
            color: {
                get: function() {
                    return y
                },
                set: function(e) {
                    y = t.utils.getColor(e), u.color(y), o.color(y)
                }
            },
            interpolate: {
                get: function() {
                    return o.interpolate()
                },
                set: function(t) {
                    o.interpolate(t), f.interpolate(t)
                }
            },
            xTickFormat: {
                get: function() {
                    return s.tickFormat()
                },
                set: function(t) {
                    s.tickFormat(t), p.tickFormat(t)
                }
            },
            yTickFormat: {
                get: function() {
                    return l.tickFormat()
                },
                set: function(t) {
                    l.tickFormat(t), h.tickFormat(t)
                }
            },
            x: {
                get: function() {
                    return o.x()
                },
                set: function(t) {
                    o.x(t), f.x(t)
                }
            },
            y: {
                get: function() {
                    return o.y()
                },
                set: function(t) {
                    o.y(t), f.y(t)
                }
            },
            rightAlignYAxis: {
                get: function() {
                    return A
                },
                set: function(t) {
                    A = t, l.orient(A ? "right" : "left")
                }
            },
            useInteractiveGuideline: {
                get: function() {
                    return C
                },
                set: function(t) {
                    C = t, C && (o.interactive(!1), o.useVoronoi(!1))
                }
            }
        }), t.utils.inheritOptions(e, o), t.utils.initOptions(e), e
    }, t.models.lineWithFocusChart = function() {
        return t.models.lineChart().margin({
            bottom: 30
        }).focusEnable(!0)
    }, t.models.linePlusBarChart = function() {
        "use strict";

        function e(k) {
            return k.each(function(k) {
                function P(t) {
                    var e = +("e" == t),
                        n = e ? 1 : -1,
                        r = U / 3;
                    return "M" + .5 * n + "," + r + "A6,6 0 0 " + e + " " + 6.5 * n + "," + (r + 6) + "V" + (2 * r - 6) + "A6,6 0 0 " + e + " " + .5 * n + "," + 2 * r + "ZM" + 2.5 * n + "," + (r + 8) + "V" + (2 * r - 8) + "M" + 4.5 * n + "," + (r + 8) + "V" + (2 * r - 8)
                }

                function Y() {
                    b.empty() || b.extent(B), ft.data([b.empty() ? i.domain() : B]).each(function(t, e) {
                        var n = i(t[0]) - i.range()[0],
                            r = i.range()[1] - i(t[1]);
                        d3.select(this).select(".left").attr("width", 0 > n ? 0 : n), d3.select(this).select(".right").attr("x", i(t[1])).attr("width", 0 > r ? 0 : r)
                    })
                }

                function X() {
                    B = b.empty() ? null : b.extent(), n = b.empty() ? i.domain() : b.extent(), L.brush({
                        extent: n,
                        brush: b
                    }), Y(), d.width(K).height(q).color(k.map(function(t, e) {
                        return t.color || E(t, e)
                    }).filter(function(t, e) {
                        return !k[e].disabled && k[e].bar
                    })), u.width(K).height(q).color(k.map(function(t, e) {
                        return t.color || E(t, e)
                    }).filter(function(t, e) {
                        return !k[e].disabled && !k[e].bar
                    }));
                    var e = at.select(".nv-focus .nv-barsWrap").datum($.length ? $.map(function(t, e) {
                            return {
                                key: t.key,
                                values: t.values.filter(function(t, e) {
                                    return d.x()(t, e) >= n[0] && d.x()(t, e) <= n[1]
                                })
                            }
                        }) : [{
                            values: []
                        }]),
                        s = at.select(".nv-focus .nv-linesWrap").datum(Z(tt) ? [{
                            values: []
                        }] : tt.filter(function(t) {
                            return !t.disabled
                        }).map(function(t, e) {
                            return {
                                area: t.area,
                                fillOpacity: t.fillOpacity,
                                key: t.key,
                                values: t.values.filter(function(t, e) {
                                    return u.x()(t, e) >= n[0] && u.x()(t, e) <= n[1]
                                })
                            }
                        }));
                    r = $.length && !G ? d.xScale() : u.xScale(), p.scale(r)._ticks(t.utils.calcTicksX(K / 100, k)).tickSize(-q, 0), p.domain([Math.ceil(n[0]), Math.floor(n[1])]), at.select(".nv-x.nv-axis").transition().duration(T).call(p), e.transition().duration(T).call(d), s.transition().duration(T).call(u), at.select(".nv-focus .nv-x.nv-axis").attr("transform", "translate(0," + a.range()[0] + ")"), g.scale(a)._ticks(t.utils.calcTicksY(q / 36, k)).tickSize(-K, 0), v.scale(o)._ticks(t.utils.calcTicksY(q / 36, k)).tickSize($.length ? 0 : -K, 0);
                    var l = $.length ? 1 : 0,
                        c = tt.length && !Z(tt) ? 1 : 0,
                        f = G ? c : l,
                        h = G ? l : c;
                    at.select(".nv-focus .nv-y1.nv-axis").style("opacity", f), at.select(".nv-focus .nv-y2.nv-axis").style("opacity", h).attr("transform", "translate(" + r.range()[1] + ",0)"), at.select(".nv-focus .nv-y1.nv-axis").transition().duration(T).call(g), at.select(".nv-focus .nv-y2.nv-axis").transition().duration(T).call(v)
                }
                var Q = d3.select(this);
                t.utils.initSVG(Q);
                var K = t.utils.availableWidth(A, Q, w),
                    q = t.utils.availableHeight(C, Q, w) - (_ ? N : 0),
                    U = N - M.top - M.bottom;
                if (e.update = function() {
                        Q.transition().duration(T).call(e)
                    }, e.container = this, V.setter(R(k), e.update).getter(j(k)).update(), V.disabled = k.map(function(t) {
                        return !!t.disabled
                    }), !z) {
                    var J;
                    z = {};
                    for (J in V) V[J] instanceof Array ? z[J] = V[J].slice(0) : z[J] = V[J]
                }
                if (!(k && k.length && k.filter(function(t) {
                        return t.values.length
                    }).length)) return t.utils.noData(e, Q), e;
                Q.selectAll(".nv-noData").remove();
                var $ = k.filter(function(t) {
                        return !t.disabled && t.bar
                    }),
                    tt = k.filter(function(t) {
                        return !t.bar
                    });
                r = d.xScale(), i = h.scale(), a = G ? u.yScale() : d.yScale(), o = G ? d.yScale() : u.yScale(), s = G ? c.yScale() : f.yScale(), l = G ? f.yScale() : c.yScale();
                var et = k.filter(function(t) {
                        return !t.disabled && (G ? !t.bar : t.bar)
                    }).map(function(t) {
                        return t.values.map(function(t, e) {
                            return {
                                x: S(t, e),
                                y: W(t, e)
                            }
                        })
                    }),
                    nt = k.filter(function(t) {
                        return !t.disabled && (G ? t.bar : !t.bar)
                    }).map(function(t) {
                        return t.values.map(function(t, e) {
                            return {
                                x: S(t, e),
                                y: W(t, e)
                            }
                        })
                    });
                r.range([0, K]), i.domain(d3.extent(d3.merge(et.concat(nt)), function(t) {
                    return t.x
                })).range([0, K]);
                var rt = Q.selectAll("g.nv-wrap.nv-linePlusBar").data([k]),
                    it = rt.enter().append("g").attr("class", "nvd3 nv-wrap nv-linePlusBar").append("g"),
                    at = rt.select("g");
                it.append("g").attr("class", "nv-legendWrap");
                var ot = it.append("g").attr("class", "nv-focus");
                ot.append("g").attr("class", "nv-x nv-axis"), ot.append("g").attr("class", "nv-y1 nv-axis"), ot.append("g").attr("class", "nv-y2 nv-axis"), ot.append("g").attr("class", "nv-barsWrap"), ot.append("g").attr("class", "nv-linesWrap");
                var st = it.append("g").attr("class", "nv-context");
                if (st.append("g").attr("class", "nv-x nv-axis"), st.append("g").attr("class", "nv-y1 nv-axis"), st.append("g").attr("class", "nv-y2 nv-axis"), st.append("g").attr("class", "nv-barsWrap"), st.append("g").attr("class", "nv-linesWrap"), st.append("g").attr("class", "nv-brushBackground"), st.append("g").attr("class", "nv-x nv-brush"), F) {
                    var lt = x.align() ? K / 2 : K,
                        ut = x.align() ? lt : 0;
                    x.width(lt), at.select(".nv-legendWrap").datum(k.map(function(t) {
                        return t.originalKey = void 0 === t.originalKey ? t.key : t.originalKey, G ? t.key = t.originalKey + (t.bar ? H : I) : t.key = t.originalKey + (t.bar ? I : H), t
                    })).call(x), w.top != x.height() && (w.top = x.height(), q = t.utils.availableHeight(C, Q, w) - N), at.select(".nv-legendWrap").attr("transform", "translate(" + ut + "," + -w.top + ")")
                }
                rt.attr("transform", "translate(" + w.left + "," + w.top + ")"), at.select(".nv-context").style("display", _ ? "initial" : "none"), f.width(K).height(U).color(k.map(function(t, e) {
                    return t.color || E(t, e)
                }).filter(function(t, e) {
                    return !k[e].disabled && k[e].bar
                })), c.width(K).height(U).color(k.map(function(t, e) {
                    return t.color || E(t, e)
                }).filter(function(t, e) {
                    return !k[e].disabled && !k[e].bar
                }));
                var ct = at.select(".nv-context .nv-barsWrap").datum($.length ? $ : [{
                        values: []
                    }]),
                    dt = at.select(".nv-context .nv-linesWrap").datum(Z(tt) ? [{
                        values: []
                    }] : tt.filter(function(t) {
                        return !t.disabled
                    }));
                at.select(".nv-context").attr("transform", "translate(0," + (q + w.bottom + M.top) + ")"), ct.transition().call(f), dt.transition().call(c), O && (h._ticks(t.utils.calcTicksX(K / 100, k)).tickSize(-U, 0), at.select(".nv-context .nv-x.nv-axis").attr("transform", "translate(0," + s.range()[0] + ")"), at.select(".nv-context .nv-x.nv-axis").transition().call(h)), D && (m.scale(s)._ticks(U / 36).tickSize(-K, 0), y.scale(l)._ticks(U / 36).tickSize($.length ? 0 : -K, 0), at.select(".nv-context .nv-y3.nv-axis").style("opacity", $.length ? 1 : 0).attr("transform", "translate(0," + i.range()[0] + ")"), at.select(".nv-context .nv-y2.nv-axis").style("opacity", tt.length ? 1 : 0).attr("transform", "translate(" + i.range()[1] + ",0)"), at.select(".nv-context .nv-y1.nv-axis").transition().call(m), at.select(".nv-context .nv-y2.nv-axis").transition().call(y)), b.x(i).on("brush", X), B && b.extent(B);
                var ft = at.select(".nv-brushBackground").selectAll("g").data([B || b.extent()]),
                    pt = ft.enter().append("g");
                pt.append("rect").attr("class", "left").attr("x", 0).attr("y", 0).attr("height", U), pt.append("rect").attr("class", "right").attr("x", 0).attr("y", 0).attr("height", U);
                var ht = at.select(".nv-x.nv-brush").call(b);
                ht.selectAll("rect").attr("height", U), ht.selectAll(".resize").append("path").attr("d", P), x.dispatch.on("stateChange", function(t) {
                    for (var n in t) V[n] = t[n];
                    L.stateChange(V), e.update()
                }), L.on("changeState", function(t) {
                    "undefined" != typeof t.disabled && (k.forEach(function(e, n) {
                        e.disabled = t.disabled[n]
                    }), V.disabled = t.disabled), e.update()
                }), X()
            }), e
        }
        var n, r, i, a, o, s, l, u = t.models.line(),
            c = t.models.line(),
            d = t.models.historicalBar(),
            f = t.models.historicalBar(),
            p = t.models.axis(),
            h = t.models.axis(),
            g = t.models.axis(),
            v = t.models.axis(),
            m = t.models.axis(),
            y = t.models.axis(),
            x = t.models.legend(),
            b = d3.svg.brush(),
            k = t.models.tooltip(),
            w = {
                top: 30,
                right: 30,
                bottom: 30,
                left: 60
            },
            M = {
                top: 0,
                right: 30,
                bottom: 20,
                left: 60
            },
            A = null,
            C = null,
            S = function(t) {
                return t.x
            },
            W = function(t) {
                return t.y
            },
            E = t.utils.defaultColor(),
            F = !0,
            _ = !0,
            D = !1,
            O = !0,
            N = 50,
            B = null,
            P = null,
            L = d3.dispatch("brush", "stateChange", "changeState"),
            T = 0,
            V = t.utils.state(),
            z = null,
            I = " (left axis)",
            H = " (right axis)",
            G = !1;
        u.clipEdge(!0), c.interactive(!1), c.pointActive(function(t) {
            return !1
        }), p.orient("bottom").tickPadding(5), g.orient("left"), v.orient("right"), h.orient("bottom").tickPadding(5), m.orient("left"), y.orient("right"), k.headerEnabled(!0).headerFormatter(function(t, e) {
            return p.tickFormat()(t, e)
        });
        var Y = function() {
                return G ? {
                    main: g,
                    focus: m
                } : {
                    main: v,
                    focus: y
                }
            },
            X = function() {
                return G ? {
                    main: v,
                    focus: y
                } : {
                    main: g,
                    focus: m
                }
            },
            j = function(t) {
                return function() {
                    return {
                        active: t.map(function(t) {
                            return !t.disabled
                        })
                    }
                }
            },
            R = function(t) {
                return function(e) {
                    void 0 !== e.active && t.forEach(function(t, n) {
                        t.disabled = !e.active[n]
                    })
                }
            },
            Z = function(t) {
                return t.every(function(t) {
                    return t.disabled
                })
            };
        return u.dispatch.on("elementMouseover.tooltip", function(t) {
            k.duration(100).valueFormatter(function(t, e) {
                return X().main.tickFormat()(t, e)
            }).data(t).hidden(!1)
        }), u.dispatch.on("elementMouseout.tooltip", function(t) {
            k.hidden(!0)
        }), d.dispatch.on("elementMouseover.tooltip", function(t) {
            t.value = e.x()(t.data), t.series = {
                value: e.y()(t.data),
                color: t.color
            }, k.duration(0).valueFormatter(function(t, e) {
                return Y().main.tickFormat()(t, e)
            }).data(t).hidden(!1)
        }), d.dispatch.on("elementMouseout.tooltip", function(t) {
            k.hidden(!0)
        }), d.dispatch.on("elementMousemove.tooltip", function(t) {
            k()
        }), e.dispatch = L, e.legend = x, e.lines = u, e.lines2 = c, e.bars = d, e.bars2 = f, e.xAxis = p, e.x2Axis = h, e.y1Axis = g, e.y2Axis = v, e.y3Axis = m, e.y4Axis = y, e.tooltip = k, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return A
                },
                set: function(t) {
                    A = t
                }
            },
            height: {
                get: function() {
                    return C
                },
                set: function(t) {
                    C = t
                }
            },
            showLegend: {
                get: function() {
                    return F
                },
                set: function(t) {
                    F = t
                }
            },
            brushExtent: {
                get: function() {
                    return B
                },
                set: function(t) {
                    B = t
                }
            },
            noData: {
                get: function() {
                    return P
                },
                set: function(t) {
                    P = t
                }
            },
            focusEnable: {
                get: function() {
                    return _
                },
                set: function(t) {
                    _ = t
                }
            },
            focusHeight: {
                get: function() {
                    return N
                },
                set: function(t) {
                    N = t
                }
            },
            focusShowAxisX: {
                get: function() {
                    return O
                },
                set: function(t) {
                    O = t
                }
            },
            focusShowAxisY: {
                get: function() {
                    return D
                },
                set: function(t) {
                    D = t
                }
            },
            legendLeftAxisHint: {
                get: function() {
                    return I
                },
                set: function(t) {
                    I = t
                }
            },
            legendRightAxisHint: {
                get: function() {
                    return H
                },
                set: function(t) {
                    H = t
                }
            },
            margin: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w.top = void 0 !== t.top ? t.top : w.top, w.right = void 0 !== t.right ? t.right : w.right, w.bottom = void 0 !== t.bottom ? t.bottom : w.bottom, w.left = void 0 !== t.left ? t.left : w.left
                }
            },
            focusMargin: {
                get: function() {
                    return M
                },
                set: function(t) {
                    M.top = void 0 !== t.top ? t.top : M.top, M.right = void 0 !== t.right ? t.right : M.right, M.bottom = void 0 !== t.bottom ? t.bottom : M.bottom, M.left = void 0 !== t.left ? t.left : M.left
                }
            },
            duration: {
                get: function() {
                    return T
                },
                set: function(t) {
                    T = t
                }
            },
            color: {
                get: function() {
                    return E
                },
                set: function(e) {
                    E = t.utils.getColor(e), x.color(E)
                }
            },
            x: {
                get: function() {
                    return S
                },
                set: function(t) {
                    S = t, u.x(t), c.x(t), d.x(t), f.x(t)
                }
            },
            y: {
                get: function() {
                    return W
                },
                set: function(t) {
                    W = t, u.y(t), c.y(t), d.y(t), f.y(t)
                }
            },
            switchYAxisOrder: {
                get: function() {
                    return G
                },
                set: function(t) {
                    if (G !== t) {
                        var e = g.tickFormat();
                        g.tickFormat(v.tickFormat()), v.tickFormat(e)
                    }
                    G = t
                }
            }
        }), t.utils.inheritOptions(e, u), t.utils.initOptions(e), e
    }, t.models.multiBar = function() {
        "use strict";

        function e(_) {
            return E.reset(), _.each(function(e) {
                var _ = c - u.left - u.right,
                    D = d - u.top - u.bottom;
                g = d3.select(this), t.utils.initSVG(g);
                var O = 0;
                if (M && e.length && (M = [{
                        values: e[0].values.map(function(t) {
                            return {
                                x: t.x,
                                y: 0,
                                series: t.series,
                                size: .01
                            }
                        })
                    }]), b) {
                    var N = d3.layout.stack().offset(k).values(function(t) {
                        return t.values
                    }).y(m)(!e.length && M ? M : e);
                    N.forEach(function(t, n) {
                        t.nonStackable ? (e[n].nonStackableSeries = O++, N[n] = e[n]) : n > 0 && N[n - 1].nonStackable && N[n].values.map(function(t, e) {
                            t.y0 -= N[n - 1].values[e].y, t.y1 = t.y0 + t.y
                        })
                    }), e = N
                }
                e.forEach(function(t, e) {
                    t.values.forEach(function(n) {
                        n.series = e, n.key = t.key
                    })
                }), b && e[0].values.map(function(t, n) {
                    var r = 0,
                        i = 0;
                    e.map(function(t, a) {
                        if (!e[a].nonStackable) {
                            var o = t.values[n];
                            o.size = Math.abs(o.y), o.y < 0 ? (o.y1 = i, i -= o.size) : (o.y1 = o.size + r, r += o.size)
                        }
                    })
                });
                var B = r && i ? [] : e.map(function(t, e) {
                    return t.values.map(function(t, n) {
                        return {
                            x: v(t, n),
                            y: m(t, n),
                            y0: t.y0,
                            y1: t.y1,
                            idx: e
                        }
                    })
                });
                f.domain(r || d3.merge(B).map(function(t) {
                    return t.x
                })).rangeBands(a || [0, _], S), p.domain(i || d3.extent(d3.merge(B).map(function(t) {
                    var n = t.y;
                    return b && !e[t.idx].nonStackable && (n = t.y > 0 ? t.y1 : t.y1 + t.y), n
                }).concat(y))).range(o || [D, 0]), f.domain()[0] === f.domain()[1] && (f.domain()[0] ? f.domain([f.domain()[0] - .01 * f.domain()[0], f.domain()[1] + .01 * f.domain()[1]]) : f.domain([-1, 1])), p.domain()[0] === p.domain()[1] && (p.domain()[0] ? p.domain([p.domain()[0] + .01 * p.domain()[0], p.domain()[1] - .01 * p.domain()[1]]) : p.domain([-1, 1])), s = s || f, l = l || p;
                var P = g.selectAll("g.nv-wrap.nv-multibar").data([e]),
                    L = P.enter().append("g").attr("class", "nvd3 nv-wrap nv-multibar"),
                    T = L.append("defs"),
                    V = L.append("g"),
                    z = P.select("g");
                V.append("g").attr("class", "nv-groups"), P.attr("transform", "translate(" + u.left + "," + u.top + ")"), T.append("clipPath").attr("id", "nv-edge-clip-" + h).append("rect"), P.select("#nv-edge-clip-" + h + " rect").attr("width", _).attr("height", D), z.attr("clip-path", x ? "url(#nv-edge-clip-" + h + ")" : "");
                var I = P.select(".nv-groups").selectAll(".nv-group").data(function(t) {
                    return t
                }, function(t, e) {
                    return e
                });
                I.enter().append("g").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6);
                var H = E.transition(I.exit().selectAll("rect.nv-bar"), "multibarExit", Math.min(100, C)).attr("y", function(t, n, r) {
                    var i = l(0) || 0;
                    return b && e[t.series] && !e[t.series].nonStackable && (i = l(t.y0)), i
                }).attr("height", 0).remove();
                H.delay && H.delay(function(t, e) {
                    var n = e * (C / (F + 1)) - e;
                    return n
                }), I.attr("class", function(t, e) {
                    return "nv-group nv-series-" + e
                }).classed("hover", function(t) {
                    return t.hover
                }).style("fill", function(t, e) {
                    return w(t, e)
                }).style("stroke", function(t, e) {
                    return w(t, e)
                }), I.style("stroke-opacity", 1).style("fill-opacity", .75);
                var G = I.selectAll("rect.nv-bar").data(function(t) {
                    return M && !e.length ? M.values : t.values
                });
                G.exit().remove();
                G.enter().append("rect").attr("class", function(t, e) {
                    return m(t, e) < 0 ? "nv-bar negative" : "nv-bar positive"
                }).attr("x", function(t, n, r) {
                    return b && !e[r].nonStackable ? 0 : r * f.rangeBand() / e.length
                }).attr("y", function(t, n, r) {
                    return l(b && !e[r].nonStackable ? t.y0 : 0) || 0
                }).attr("height", 0).attr("width", function(t, n, r) {
                    return f.rangeBand() / (b && !e[r].nonStackable ? 1 : e.length)
                }).attr("transform", function(t, e) {
                    return "translate(" + f(v(t, e)) + ",0)"
                });
                G.style("fill", function(t, e, n) {
                    return w(t, n, e)
                }).style("stroke", function(t, e, n) {
                    return w(t, n, e)
                }).on("mouseover", function(t, e) {
                    d3.select(this).classed("hover", !0), W.elementMouseover({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    })
                }).on("mouseout", function(t, e) {
                    d3.select(this).classed("hover", !1), W.elementMouseout({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    })
                }).on("mousemove", function(t, e) {
                    W.elementMousemove({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    })
                }).on("click", function(t, e) {
                    var n = this;
                    W.elementClick({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill"),
                        event: d3.event,
                        element: n
                    }), d3.event.stopPropagation()
                }).on("dblclick", function(t, e) {
                    W.elementDblClick({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    }), d3.event.stopPropagation()
                }), G.attr("class", function(t, e) {
                    return m(t, e) < 0 ? "nv-bar negative" : "nv-bar positive"
                }).attr("transform", function(t, e) {
                    return "translate(" + f(v(t, e)) + ",0)"
                }), A && (n || (n = e.map(function() {
                    return !0
                })), G.style("fill", function(t, e, r) {
                    return d3.rgb(A(t, e)).darker(n.map(function(t, e) {
                        return e
                    }).filter(function(t, e) {
                        return !n[e]
                    })[r]).toString()
                }).style("stroke", function(t, e, r) {
                    return d3.rgb(A(t, e)).darker(n.map(function(t, e) {
                        return e
                    }).filter(function(t, e) {
                        return !n[e]
                    })[r]).toString()
                }));
                var Y = G.watchTransition(E, "multibar", Math.min(250, C)).delay(function(t, n) {
                    return n * C / e[0].values.length
                });
                b ? Y.attr("y", function(t, n, r) {
                    var i = 0;
                    return i = e[r].nonStackable ? m(t, n) < 0 ? p(0) : p(0) - p(m(t, n)) < -1 ? p(0) - 1 : p(m(t, n)) || 0 : p(t.y1)
                }).attr("height", function(t, n, r) {
                    return e[r].nonStackable ? Math.max(Math.abs(p(m(t, n)) - p(0)), 0) || 0 : Math.max(Math.abs(p(t.y + t.y0) - p(t.y0)), 0)
                }).attr("x", function(t, n, r) {
                    var i = 0;
                    return e[r].nonStackable && (i = t.series * f.rangeBand() / e.length, e.length !== O && (i = e[r].nonStackableSeries * f.rangeBand() / (2 * O))), i
                }).attr("width", function(t, n, r) {
                    if (e[r].nonStackable) {
                        var i = f.rangeBand() / O;
                        return e.length !== O && (i = f.rangeBand() / (2 * O)), i
                    }
                    return f.rangeBand()
                }) : Y.attr("x", function(t, n) {
                    return t.series * f.rangeBand() / e.length
                }).attr("width", f.rangeBand() / e.length).attr("y", function(t, e) {
                    return m(t, e) < 0 ? p(0) : p(0) - p(m(t, e)) < 1 ? p(0) - 1 : p(m(t, e)) || 0
                }).attr("height", function(t, e) {
                    return Math.max(Math.abs(p(m(t, e)) - p(0)), 1) || 0
                }), s = f.copy(), l = p.copy(), e[0] && e[0].values && (F = e[0].values.length)
            }), E.renderEnd("multibar immediate"), e
        }
        var n, r, i, a, o, s, l, u = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            c = 960,
            d = 500,
            f = d3.scale.ordinal(),
            p = d3.scale.linear(),
            h = Math.floor(1e4 * Math.random()),
            g = null,
            v = function(t) {
                return t.x
            },
            m = function(t) {
                return t.y
            },
            y = [0],
            x = !0,
            b = !1,
            k = "zero",
            w = t.utils.defaultColor(),
            M = !1,
            A = null,
            C = 500,
            S = .1,
            W = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout", "elementMousemove", "renderEnd"),
            E = t.utils.renderWatch(W, C),
            F = 0;
        return e.dispatch = W, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            height: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            x: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            y: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            xScale: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            yScale: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            xDomain: {
                get: function() {
                    return r
                },
                set: function(t) {
                    r = t
                }
            },
            yDomain: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i = t
                }
            },
            xRange: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            yRange: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            forceY: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t
                }
            },
            stacked: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = t
                }
            },
            stackOffset: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t
                }
            },
            clipEdge: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t
                }
            },
            disabled: {
                get: function() {
                    return n
                },
                set: function(t) {
                    n = t
                }
            },
            id: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            hideable: {
                get: function() {
                    return M
                },
                set: function(t) {
                    M = t
                }
            },
            groupSpacing: {
                get: function() {
                    return S
                },
                set: function(t) {
                    S = t
                }
            },
            margin: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u.top = void 0 !== t.top ? t.top : u.top, u.right = void 0 !== t.right ? t.right : u.right, u.bottom = void 0 !== t.bottom ? t.bottom : u.bottom, u.left = void 0 !== t.left ? t.left : u.left
                }
            },
            duration: {
                get: function() {
                    return C
                },
                set: function(t) {
                    C = t, E.reset(C)
                }
            },
            color: {
                get: function() {
                    return w
                },
                set: function(e) {
                    w = t.utils.getColor(e)
                }
            },
            barColor: {
                get: function() {
                    return A
                },
                set: function(e) {
                    A = e ? t.utils.getColor(e) : null
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.multiBarChart = function() {
        "use strict";

        function e(W) {
            return O.reset(), O.models(i), y && O.models(a), x && O.models(o), W.each(function(W) {
                var O = d3.select(this),
                    L = this;
                t.utils.initSVG(O);
                var T = t.utils.availableWidth(f, O, d),
                    V = t.utils.availableHeight(p, O, d);
                if (e.update = function() {
                        0 === _ ? O.call(e) : O.transition().duration(_).call(e)
                    }, e.container = this, C.setter(P(W), e.update).getter(B(W)).update(), C.disabled = W.map(function(t) {
                        return !!t.disabled
                    }), !S) {
                    var z;
                    S = {};
                    for (z in C) C[z] instanceof Array ? S[z] = C[z].slice(0) : S[z] = C[z]
                }
                if (!(W && W.length && W.filter(function(t) {
                        return t.values.length
                    }).length)) return t.utils.noData(e, O), e;
                O.selectAll(".nv-noData").remove(), n = i.xScale(), r = i.yScale();
                var I = O.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([W]),
                    H = I.enter().append("g").attr("class", "nvd3 nv-wrap nv-multiBarWithLegend").append("g"),
                    G = I.select("g");
                if (H.append("g").attr("class", "nv-x nv-axis"), H.append("g").attr("class", "nv-y nv-axis"), H.append("g").attr("class", "nv-barsWrap"), H.append("g").attr("class", "nv-legendWrap"), H.append("g").attr("class", "nv-controlsWrap"), H.append("g").attr("class", "nv-interactive"), m && (l.width(T - F()), G.select(".nv-legendWrap").datum(W).call(l), d.top != l.height() && (d.top = l.height(), V = t.utils.availableHeight(p, O, d)), G.select(".nv-legendWrap").attr("transform", "translate(" + F() + "," + -d.top + ")")), g) {
                    var Y = [{
                        key: v.grouped || "Grouped",
                        disabled: i.stacked()
                    }, {
                        key: v.stacked || "Stacked",
                        disabled: !i.stacked()
                    }];
                    u.width(F()).color(["#444", "#444", "#444"]), G.select(".nv-controlsWrap").datum(Y).attr("transform", "translate(0," + -d.top + ")").call(u)
                }
                I.attr("transform", "translate(" + d.left + "," + d.top + ")"), b && G.select(".nv-y.nv-axis").attr("transform", "translate(" + T + ",0)"), i.disabled(W.map(function(t) {
                    return t.disabled
                })).width(T).height(V).color(W.map(function(t, e) {
                    return t.color || h(t, e)
                }).filter(function(t, e) {
                    return !W[e].disabled
                }));
                var X = G.select(".nv-barsWrap").datum(W.filter(function(t) {
                    return !t.disabled
                }));
                if (X.call(i), y) {
                    a.scale(n)._ticks(t.utils.calcTicksX(T / 100, W)).tickSize(-V, 0), G.select(".nv-x.nv-axis").attr("transform", "translate(0," + r.range()[0] + ")"), G.select(".nv-x.nv-axis").call(a);
                    var j = G.select(".nv-x.nv-axis > g").selectAll("g");
                    if (j.selectAll("line, text").style("opacity", 1), w) {
                        var R = function(t, e) {
                                return "translate(" + t + "," + e + ")"
                            },
                            Z = 5,
                            Q = 17;
                        j.selectAll("text").attr("transform", function(t, e, n) {
                            return R(0, n % 2 == 0 ? Z : Q)
                        });
                        var K = d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;
                        G.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform", function(t, e) {
                            return R(0, 0 === e || K % 2 !== 0 ? Q : Z)
                        })
                    }
                    M && G.selectAll(".tick text").call(t.utils.wrapTicks, e.xAxis.rangeBand()), k && j.filter(function(t, e) {
                        return e % Math.ceil(W[0].values.length / (T / 100)) !== 0
                    }).selectAll("text, line").style("opacity", 0), A && j.selectAll(".tick text").attr("transform", "rotate(" + A + " 0,0)").style("text-anchor", A > 0 ? "start" : "end"), G.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity", 1)
                }
                x && (o.scale(r)._ticks(t.utils.calcTicksY(V / 36, W)).tickSize(-T, 0), G.select(".nv-y.nv-axis").call(o)), D && (s.width(T).height(V).margin({
                    left: d.left,
                    top: d.top
                }).svgContainer(O).xScale(n), I.select(".nv-interactive").call(s)), l.dispatch.on("stateChange", function(t) {
                    for (var n in t) C[n] = t[n];
                    E.stateChange(C), e.update()
                }), u.dispatch.on("legendClick", function(t, n) {
                    if (t.disabled) {
                        switch (Y = Y.map(function(t) {
                            return t.disabled = !0, t
                        }), t.disabled = !1, t.key) {
                            case "Grouped":
                            case v.grouped:
                                i.stacked(!1);
                                break;
                            case "Stacked":
                            case v.stacked:
                                i.stacked(!0)
                        }
                        C.stacked = i.stacked(), E.stateChange(C), e.update()
                    }
                }), E.on("changeState", function(t) {
                    "undefined" != typeof t.disabled && (W.forEach(function(e, n) {
                        e.disabled = t.disabled[n]
                    }), C.disabled = t.disabled), "undefined" != typeof t.stacked && (i.stacked(t.stacked), C.stacked = t.stacked, N = t.stacked), e.update()
                }), D ? (s.dispatch.on("elementMousemove", function(t) {
                    if (void 0 != t.pointXValue) {
                        var r, i, a, o, l = [];
                        W.filter(function(t, e) {
                            return t.seriesIndex = e, !t.disabled
                        }).forEach(function(s, u) {
                            i = n.domain().indexOf(t.pointXValue);
                            var c = s.values[i];
                            void 0 !== c && (o = c.x, void 0 === r && (r = c), void 0 === a && (a = t.mouseX), l.push({
                                key: s.key,
                                value: e.y()(c, i),
                                color: h(s, s.seriesIndex),
                                data: s.values[i]
                            }))
                        }), s.tooltip.chartContainer(L.parentNode).data({
                            value: o,
                            index: i,
                            series: l
                        })(), s.renderGuideLine(a)
                    }
                }), s.dispatch.on("elementMouseout", function(t) {
                    s.tooltip.hidden(!0)
                })) : (i.dispatch.on("elementMouseover.tooltip", function(t) {
                    t.value = e.x()(t.data), t.series = {
                        key: t.data.key,
                        value: e.y()(t.data),
                        color: t.color
                    }, c.data(t).hidden(!1)
                }), i.dispatch.on("elementMouseout.tooltip", function(t) {
                    c.hidden(!0)
                }), i.dispatch.on("elementMousemove.tooltip", function(t) {
                    c()
                }))
            }), O.renderEnd("multibarchart immediate"), e
        }
        var n, r, i = t.models.multiBar(),
            a = t.models.axis(),
            o = t.models.axis(),
            s = t.interactiveGuideline(),
            l = t.models.legend(),
            u = t.models.legend(),
            c = t.models.tooltip(),
            d = {
                top: 30,
                right: 20,
                bottom: 50,
                left: 60
            },
            f = null,
            p = null,
            h = t.utils.defaultColor(),
            g = !0,
            v = {},
            m = !0,
            y = !0,
            x = !0,
            b = !1,
            k = !0,
            w = !1,
            M = !1,
            A = 0,
            C = t.utils.state(),
            S = null,
            W = null,
            E = d3.dispatch("stateChange", "changeState", "renderEnd"),
            F = function() {
                return g ? 180 : 0
            },
            _ = 250,
            D = !1;
        C.stacked = !1, i.stacked(!1), a.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(t) {
            return t
        }), o.orient(b ? "right" : "left").tickFormat(d3.format(",.1f")), c.duration(0).valueFormatter(function(t, e) {
            return o.tickFormat()(t, e)
        }).headerFormatter(function(t, e) {
            return a.tickFormat()(t, e)
        }), u.updateState(!1);
        var O = t.utils.renderWatch(E),
            N = !1,
            B = function(t) {
                return function() {
                    return {
                        active: t.map(function(t) {
                            return !t.disabled
                        }),
                        stacked: N
                    }
                }
            },
            P = function(t) {
                return function(e) {
                    void 0 !== e.stacked && (N = e.stacked), void 0 !== e.active && t.forEach(function(t, n) {
                        t.disabled = !e.active[n]
                    })
                }
            };
        return e.dispatch = E, e.multibar = i, e.legend = l, e.controls = u, e.xAxis = a, e.yAxis = o, e.state = C, e.tooltip = c, e.interactiveLayer = s, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            height: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            showLegend: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            showControls: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            controlLabels: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            showXAxis: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t
                }
            },
            showYAxis: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t
                }
            },
            defaultState: {
                get: function() {
                    return S
                },
                set: function(t) {
                    S = t
                }
            },
            noData: {
                get: function() {
                    return W
                },
                set: function(t) {
                    W = t
                }
            },
            reduceXTicks: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t
                }
            },
            rotateLabels: {
                get: function() {
                    return A
                },
                set: function(t) {
                    A = t
                }
            },
            staggerLabels: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t
                }
            },
            wrapLabels: {
                get: function() {
                    return M
                },
                set: function(t) {
                    M = !!t
                }
            },
            margin: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d.top = void 0 !== t.top ? t.top : d.top, d.right = void 0 !== t.right ? t.right : d.right, d.bottom = void 0 !== t.bottom ? t.bottom : d.bottom, d.left = void 0 !== t.left ? t.left : d.left
                }
            },
            duration: {
                get: function() {
                    return _
                },
                set: function(t) {
                    _ = t, i.duration(_), a.duration(_), o.duration(_), O.reset(_)
                }
            },
            color: {
                get: function() {
                    return h
                },
                set: function(e) {
                    h = t.utils.getColor(e), l.color(h)
                }
            },
            rightAlignYAxis: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = t, o.orient(b ? "right" : "left")
                }
            },
            useInteractiveGuideline: {
                get: function() {
                    return D
                },
                set: function(t) {
                    D = t
                }
            },
            barColor: {
                get: function() {
                    return i.barColor
                },
                set: function(t) {
                    i.barColor(t), l.color(function(t, e) {
                        return d3.rgb("#ccc").darker(1.5 * e).toString()
                    })
                }
            }
        }), t.utils.inheritOptions(e, i), t.utils.initOptions(e), e
    }, t.models.multiBarHorizontal = function() {
        "use strict";

        function e(f) {
            return _.reset(), f.each(function(e) {
                var f = c - u.left - u.right,
                    E = d - u.top - u.bottom;
                p = d3.select(this), t.utils.initSVG(p), w && (e = d3.layout.stack().offset("zero").values(function(t) {
                    return t.values
                }).y(m)(e)), e.forEach(function(t, e) {
                    t.values.forEach(function(n) {
                        n.series = e, n.key = t.key
                    })
                }), w && e[0].values.map(function(t, n) {
                    var r = 0,
                        i = 0;
                    e.map(function(t) {
                        var e = t.values[n];
                        e.size = Math.abs(e.y), e.y < 0 ? (e.y1 = i - e.size, i -= e.size) : (e.y1 = r, r += e.size)
                    })
                });
                var D = r && i ? [] : e.map(function(t) {
                    return t.values.map(function(t, e) {
                        return {
                            x: v(t, e),
                            y: m(t, e),
                            y0: t.y0,
                            y1: t.y1
                        }
                    })
                });
                h.domain(r || d3.merge(D).map(function(t) {
                    return t.x
                })).rangeBands(a || [0, E], S), g.domain(i || d3.extent(d3.merge(D).map(function(t) {
                    return w ? t.y > 0 ? t.y1 + t.y : t.y1 : t.y
                }).concat(x))), M && !w ? g.range(o || [g.domain()[0] < 0 ? C : 0, f - (g.domain()[1] > 0 ? C : 0)]) : g.range(o || [0, f]), s = s || h, l = l || d3.scale.linear().domain(g.domain()).range([g(0), g(0)]);
                var O = d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([e]),
                    N = O.enter().append("g").attr("class", "nvd3 nv-wrap nv-multibarHorizontal"),
                    B = (N.append("defs"), N.append("g"));
                O.select("g");
                B.append("g").attr("class", "nv-groups"), O.attr("transform", "translate(" + u.left + "," + u.top + ")");
                var P = O.select(".nv-groups").selectAll(".nv-group").data(function(t) {
                    return t
                }, function(t, e) {
                    return e
                });
                P.enter().append("g").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6), P.exit().watchTransition(_, "multibarhorizontal: exit groups").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6).remove(), P.attr("class", function(t, e) {
                    return "nv-group nv-series-" + e
                }).classed("hover", function(t) {
                    return t.hover
                }).style("fill", function(t, e) {
                    return b(t, e)
                }).style("stroke", function(t, e) {
                    return b(t, e)
                }), P.watchTransition(_, "multibarhorizontal: groups").style("stroke-opacity", 1).style("fill-opacity", .75);
                var L = P.selectAll("g.nv-bar").data(function(t) {
                    return t.values
                });
                L.exit().remove();
                var T = L.enter().append("g").attr("transform", function(t, n, r) {
                    return "translate(" + l(w ? t.y0 : 0) + "," + (w ? 0 : r * h.rangeBand() / e.length + h(v(t, n))) + ")"
                });
                T.append("rect").attr("width", 0).attr("height", h.rangeBand() / (w ? 1 : e.length)), L.on("mouseover", function(t, e) {
                    d3.select(this).classed("hover", !0), F.elementMouseover({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    })
                }).on("mouseout", function(t, e) {
                    d3.select(this).classed("hover", !1), F.elementMouseout({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    })
                }).on("mouseout", function(t, e) {
                    F.elementMouseout({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    })
                }).on("mousemove", function(t, e) {
                    F.elementMousemove({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    })
                }).on("click", function(t, e) {
                    F.elementClick({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    }), d3.event.stopPropagation()
                }).on("dblclick", function(t, e) {
                    F.elementDblClick({
                        data: t,
                        index: e,
                        color: d3.select(this).style("fill")
                    }), d3.event.stopPropagation()
                }), y(e[0], 0) && (T.append("polyline"), L.select("polyline").attr("fill", "none").attr("points", function(t, n) {
                    var r = y(t, n),
                        i = .8 * h.rangeBand() / (2 * (w ? 1 : e.length));
                    r = r.length ? r : [-Math.abs(r), Math.abs(r)], r = r.map(function(t) {
                        return g(t) - g(0)
                    });
                    var a = [
                        [r[0], -i],
                        [r[0], i],
                        [r[0], 0],
                        [r[1], 0],
                        [r[1], -i],
                        [r[1], i]
                    ];
                    return a.map(function(t) {
                        return t.join(",")
                    }).join(" ")
                }).attr("transform", function(t, n) {
                    var r = h.rangeBand() / (2 * (w ? 1 : e.length));
                    return "translate(" + (m(t, n) < 0 ? 0 : g(m(t, n)) - g(0)) + ", " + r + ")"
                })), T.append("text"), M && !w ? (L.select("text").attr("text-anchor", function(t, e) {
                    return m(t, e) < 0 ? "end" : "start"
                }).attr("y", h.rangeBand() / (2 * e.length)).attr("dy", ".32em").text(function(t, e) {
                    var n = W(m(t, e)),
                        r = y(t, e);
                    return void 0 === r ? n : r.length ? n + "+" + W(Math.abs(r[1])) + "-" + W(Math.abs(r[0])) : n + "" + W(Math.abs(r))
                }), L.watchTransition(_, "multibarhorizontal: bars").select("text").attr("x", function(t, e) {
                    return m(t, e) < 0 ? -4 : g(m(t, e)) - g(0) + 4
                })) : L.selectAll("text").text(""), A && !w ? (T.append("text").classed("nv-bar-label", !0), L.select("text.nv-bar-label").attr("text-anchor", function(t, e) {
                    return m(t, e) < 0 ? "start" : "end"
                }).attr("y", h.rangeBand() / (2 * e.length)).attr("dy", ".32em").text(function(t, e) {
                    return v(t, e)
                }), L.watchTransition(_, "multibarhorizontal: bars").select("text.nv-bar-label").attr("x", function(t, e) {
                    return m(t, e) < 0 ? g(0) - g(m(t, e)) + 4 : -4
                })) : L.selectAll("text.nv-bar-label").text(""), L.attr("class", function(t, e) {
                    return m(t, e) < 0 ? "nv-bar negative" : "nv-bar positive"
                }), k && (n || (n = e.map(function() {
                    return !0
                })), L.style("fill", function(t, e, r) {
                    return d3.rgb(k(t, e)).darker(n.map(function(t, e) {
                        return e
                    }).filter(function(t, e) {
                        return !n[e]
                    })[r]).toString()
                }).style("stroke", function(t, e, r) {
                    return d3.rgb(k(t, e)).darker(n.map(function(t, e) {
                        return e
                    }).filter(function(t, e) {
                        return !n[e]
                    })[r]).toString()
                })), w ? L.watchTransition(_, "multibarhorizontal: bars").attr("transform", function(t, e) {
                    return "translate(" + g(t.y1) + "," + h(v(t, e)) + ")"
                }).select("rect").attr("width", function(t, e) {
                    return Math.abs(g(m(t, e) + t.y0) - g(t.y0)) || 0
                }).attr("height", h.rangeBand()) : L.watchTransition(_, "multibarhorizontal: bars").attr("transform", function(t, n) {
                    return "translate(" + g(m(t, n) < 0 ? m(t, n) : 0) + "," + (t.series * h.rangeBand() / e.length + h(v(t, n))) + ")"
                }).select("rect").attr("height", h.rangeBand() / e.length).attr("width", function(t, e) {
                    return Math.max(Math.abs(g(m(t, e)) - g(0)), 1) || 0
                }), s = h.copy(), l = g.copy()
            }), _.renderEnd("multibarHorizontal immediate"), e
        }
        var n, r, i, a, o, s, l, u = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            c = 960,
            d = 500,
            f = Math.floor(1e4 * Math.random()),
            p = null,
            h = d3.scale.ordinal(),
            g = d3.scale.linear(),
            v = function(t) {
                return t.x
            },
            m = function(t) {
                return t.y
            },
            y = function(t) {
                return t.yErr
            },
            x = [0],
            b = t.utils.defaultColor(),
            k = null,
            w = !1,
            M = !1,
            A = !1,
            C = 60,
            S = .1,
            W = d3.format(",.2f"),
            E = 250,
            F = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout", "elementMousemove", "renderEnd"),
            _ = t.utils.renderWatch(F, E);
        return e.dispatch = F, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            height: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            x: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            y: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            yErr: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t
                }
            },
            xScale: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            yScale: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            xDomain: {
                get: function() {
                    return r
                },
                set: function(t) {
                    r = t
                }
            },
            yDomain: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i = t
                }
            },
            xRange: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            yRange: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            forceY: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t
                }
            },
            stacked: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t
                }
            },
            showValues: {
                get: function() {
                    return M
                },
                set: function(t) {
                    M = t
                }
            },
            disabled: {
                get: function() {
                    return n
                },
                set: function(t) {
                    n = t
                }
            },
            id: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            valueFormat: {
                get: function() {
                    return W
                },
                set: function(t) {
                    W = t
                }
            },
            valuePadding: {
                get: function() {
                    return C
                },
                set: function(t) {
                    C = t
                }
            },
            groupSpacing: {
                get: function() {
                    return S
                },
                set: function(t) {
                    S = t
                }
            },
            margin: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u.top = void 0 !== t.top ? t.top : u.top, u.right = void 0 !== t.right ? t.right : u.right, u.bottom = void 0 !== t.bottom ? t.bottom : u.bottom, u.left = void 0 !== t.left ? t.left : u.left
                }
            },
            duration: {
                get: function() {
                    return E
                },
                set: function(t) {
                    E = t, _.reset(E)
                }
            },
            color: {
                get: function() {
                    return b
                },
                set: function(e) {
                    b = t.utils.getColor(e)
                }
            },
            barColor: {
                get: function() {
                    return k
                },
                set: function(e) {
                    k = e ? t.utils.getColor(e) : null
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.multiBarHorizontalChart = function() {
        "use strict";

        function e(u) {
            return E.reset(), E.models(i), m && E.models(a), y && E.models(o), u.each(function(u) {
                var w = d3.select(this);
                t.utils.initSVG(w);
                var E = t.utils.availableWidth(d, w, c),
                    F = t.utils.availableHeight(f, w, c);
                if (e.update = function() {
                        w.transition().duration(C).call(e)
                    }, e.container = this, x = i.stacked(), b.setter(W(u), e.update).getter(S(u)).update(), b.disabled = u.map(function(t) {
                        return !!t.disabled
                    }), !k) {
                    var _;
                    k = {};
                    for (_ in b) b[_] instanceof Array ? k[_] = b[_].slice(0) : k[_] = b[_]
                }
                if (!(u && u.length && u.filter(function(t) {
                        return t.values.length
                    }).length)) return t.utils.noData(e, w), e;
                w.selectAll(".nv-noData").remove(), n = i.xScale(), r = i.yScale().clamp(!0);
                var D = w.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([u]),
                    O = D.enter().append("g").attr("class", "nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),
                    N = D.select("g");
                if (O.append("g").attr("class", "nv-x nv-axis"), O.append("g").attr("class", "nv-y nv-axis").append("g").attr("class", "nv-zeroLine").append("line"), O.append("g").attr("class", "nv-barsWrap"), O.append("g").attr("class", "nv-legendWrap"), O.append("g").attr("class", "nv-controlsWrap"), v && (s.width(E - A()), N.select(".nv-legendWrap").datum(u).call(s), c.top != s.height() && (c.top = s.height(), F = t.utils.availableHeight(f, w, c)), N.select(".nv-legendWrap").attr("transform", "translate(" + A() + "," + -c.top + ")")), h) {
                    var B = [{
                        key: g.grouped || "Grouped",
                        disabled: i.stacked()
                    }, {
                        key: g.stacked || "Stacked",
                        disabled: !i.stacked()
                    }];
                    l.width(A()).color(["#444", "#444", "#444"]), N.select(".nv-controlsWrap").datum(B).attr("transform", "translate(0," + -c.top + ")").call(l)
                }
                D.attr("transform", "translate(" + c.left + "," + c.top + ")"), i.disabled(u.map(function(t) {
                    return t.disabled
                })).width(E).height(F).color(u.map(function(t, e) {
                    return t.color || p(t, e)
                }).filter(function(t, e) {
                    return !u[e].disabled
                }));
                var P = N.select(".nv-barsWrap").datum(u.filter(function(t) {
                    return !t.disabled
                }));
                if (P.transition().call(i), m) {
                    a.scale(n)._ticks(t.utils.calcTicksY(F / 24, u)).tickSize(-E, 0), N.select(".nv-x.nv-axis").call(a);
                    var L = N.select(".nv-x.nv-axis").selectAll("g");
                    L.selectAll("line, text")
                }
                y && (o.scale(r)._ticks(t.utils.calcTicksX(E / 100, u)).tickSize(-F, 0), N.select(".nv-y.nv-axis").attr("transform", "translate(0," + F + ")"), N.select(".nv-y.nv-axis").call(o)), N.select(".nv-zeroLine line").attr("x1", r(0)).attr("x2", r(0)).attr("y1", 0).attr("y2", -F), s.dispatch.on("stateChange", function(t) {
                    for (var n in t) b[n] = t[n];
                    M.stateChange(b), e.update()
                }), l.dispatch.on("legendClick", function(t, n) {
                    if (t.disabled) {
                        switch (B = B.map(function(t) {
                            return t.disabled = !0, t
                        }), t.disabled = !1, t.key) {
                            case "Grouped":
                            case g.grouped:
                                i.stacked(!1);
                                break;
                            case "Stacked":
                            case g.stacked:
                                i.stacked(!0)
                        }
                        b.stacked = i.stacked(), M.stateChange(b), x = i.stacked(), e.update()
                    }
                }), M.on("changeState", function(t) {
                    "undefined" != typeof t.disabled && (u.forEach(function(e, n) {
                        e.disabled = t.disabled[n]
                    }), b.disabled = t.disabled), "undefined" != typeof t.stacked && (i.stacked(t.stacked), b.stacked = t.stacked, x = t.stacked), e.update()
                })
            }), E.renderEnd("multibar horizontal chart immediate"), e
        }
        var n, r, i = t.models.multiBarHorizontal(),
            a = t.models.axis(),
            o = t.models.axis(),
            s = t.models.legend().height(30),
            l = t.models.legend().height(30),
            u = t.models.tooltip(),
            c = {
                top: 30,
                right: 20,
                bottom: 50,
                left: 60
            },
            d = null,
            f = null,
            p = t.utils.defaultColor(),
            h = !0,
            g = {},
            v = !0,
            m = !0,
            y = !0,
            x = !1,
            b = t.utils.state(),
            k = null,
            w = null,
            M = d3.dispatch("stateChange", "changeState", "renderEnd"),
            A = function() {
                return h ? 180 : 0
            },
            C = 250;
        b.stacked = !1, i.stacked(x), a.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(t) {
            return t
        }), o.orient("bottom").tickFormat(d3.format(",.1f")), u.duration(0).valueFormatter(function(t, e) {
            return o.tickFormat()(t, e)
        }).headerFormatter(function(t, e) {
            return a.tickFormat()(t, e)
        }), l.updateState(!1);
        var S = function(t) {
                return function() {
                    return {
                        active: t.map(function(t) {
                            return !t.disabled
                        }),
                        stacked: x
                    }
                }
            },
            W = function(t) {
                return function(e) {
                    void 0 !== e.stacked && (x = e.stacked), void 0 !== e.active && t.forEach(function(t, n) {
                        t.disabled = !e.active[n]
                    })
                }
            },
            E = t.utils.renderWatch(M, C);
        return i.dispatch.on("elementMouseover.tooltip", function(t) {
            t.value = e.x()(t.data), t.series = {
                key: t.data.key,
                value: e.y()(t.data),
                color: t.color
            }, u.data(t).hidden(!1)
        }), i.dispatch.on("elementMouseout.tooltip", function(t) {
            u.hidden(!0)
        }), i.dispatch.on("elementMousemove.tooltip", function(t) {
            u()
        }), e.dispatch = M, e.multibar = i, e.legend = s, e.controls = l, e.xAxis = a, e.yAxis = o, e.state = b, e.tooltip = u, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            height: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            showLegend: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            showControls: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            controlLabels: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            showXAxis: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            showYAxis: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t
                }
            },
            defaultState: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t
                }
            },
            noData: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t
                }
            },
            margin: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c.top = void 0 !== t.top ? t.top : c.top, c.right = void 0 !== t.right ? t.right : c.right, c.bottom = void 0 !== t.bottom ? t.bottom : c.bottom, c.left = void 0 !== t.left ? t.left : c.left
                }
            },
            duration: {
                get: function() {
                    return C
                },
                set: function(t) {
                    C = t, E.reset(C), i.duration(C), a.duration(C), o.duration(C)
                }
            },
            color: {
                get: function() {
                    return p
                },
                set: function(e) {
                    p = t.utils.getColor(e), s.color(p)
                }
            },
            barColor: {
                get: function() {
                    return i.barColor
                },
                set: function(t) {
                    i.barColor(t), s.color(function(t, e) {
                        return d3.rgb("#ccc").darker(1.5 * e).toString()
                    })
                }
            }
        }), t.utils.inheritOptions(e, i), t.utils.initOptions(e), e
    }, t.models.multiChart = function() {
        "use strict";

        function e(u) {
            return u.each(function(u) {
                function p(t) {
                    var e = 2 === u[t.seriesIndex].yAxis ? _ : F;
                    t.value = t.point.x, t.series = {
                        value: t.point.y,
                        color: t.point.color,
                        key: t.series.key
                    }, O.duration(0).valueFormatter(function(t, n) {
                        return e.tickFormat()(t, n)
                    }).data(t).hidden(!1)
                }

                function N(t) {
                    var e = 2 === u[t.seriesIndex].yAxis ? _ : F;
                    t.value = t.point.x, t.series = {
                        value: t.point.y,
                        color: t.point.color,
                        key: t.series.key
                    }, O.duration(100).valueFormatter(function(t, n) {
                        return e.tickFormat()(t, n)
                    }).data(t).hidden(!1)
                }

                function P(t) {
                    var e = 2 === u[t.seriesIndex].yAxis ? _ : F;
                    t.point.x = S.x()(t.point), t.point.y = S.y()(t.point), O.duration(0).valueFormatter(function(t, n) {
                        return e.tickFormat()(t, n)
                    }).data(t).hidden(!1)
                }

                function L(t) {
                    var e = 2 === u[t.data.series].yAxis ? _ : F;
                    t.value = A.x()(t.data), t.series = {
                        value: A.y()(t.data),
                        color: t.color,
                        key: t.data.key
                    }, O.duration(0).valueFormatter(function(t, n) {
                        return e.tickFormat()(t, n)
                    }).data(t).hidden(!1)
                }

                function T() {
                    for (var t = 0, e = B.length; e > t; t++) {
                        var n = B[t];
                        try {
                            n.clearHighlights()
                        } catch (r) {}
                    }
                }

                function V(t, e, n) {
                    for (var r = 0, i = B.length; i > r; r++) {
                        var a = B[r];
                        try {
                            a.highlightPoint(t, e, n)
                        } catch (o) {}
                    }
                }
                var z = d3.select(this);
                t.utils.initSVG(z), e.update = function() {
                    z.transition().call(e)
                }, e.container = this;
                var I = t.utils.availableWidth(o, z, i),
                    H = t.utils.availableHeight(s, z, i),
                    G = u.filter(function(t) {
                        return "line" == t.type && 1 == t.yAxis
                    }),
                    Y = u.filter(function(t) {
                        return "line" == t.type && 2 == t.yAxis
                    }),
                    X = u.filter(function(t) {
                        return "scatter" == t.type && 1 == t.yAxis
                    }),
                    j = u.filter(function(t) {
                        return "scatter" == t.type && 2 == t.yAxis
                    }),
                    R = u.filter(function(t) {
                        return "bar" == t.type && 1 == t.yAxis
                    }),
                    Z = u.filter(function(t) {
                        return "bar" == t.type && 2 == t.yAxis
                    }),
                    Q = u.filter(function(t) {
                        return "area" == t.type && 1 == t.yAxis
                    }),
                    K = u.filter(function(t) {
                        return "area" == t.type && 2 == t.yAxis
                    });
                if (!(u && u.length && u.filter(function(t) {
                        return t.values.length
                    }).length)) return t.utils.noData(e, z), e;
                z.selectAll(".nv-noData").remove();
                var q = u.filter(function(t) {
                        return !t.disabled && 1 == t.yAxis
                    }).map(function(t) {
                        return t.values.map(function(t, e) {
                            return {
                                x: c(t),
                                y: d(t)
                            }
                        })
                    }),
                    U = u.filter(function(t) {
                        return !t.disabled && 2 == t.yAxis
                    }).map(function(t) {
                        return t.values.map(function(t, e) {
                            return {
                                x: c(t),
                                y: d(t)
                            }
                        })
                    });
                m.domain(d3.extent(d3.merge(q.concat(U)), function(t) {
                    return c(t)
                })).range([0, I]);
                var J = z.selectAll("g.wrap.multiChart").data([u]),
                    $ = J.enter().append("g").attr("class", "wrap nvd3 multiChart").append("g");
                $.append("g").attr("class", "nv-x nv-axis"), $.append("g").attr("class", "nv-y1 nv-axis"), $.append("g").attr("class", "nv-y2 nv-axis"), $.append("g").attr("class", "stack1Wrap"), $.append("g").attr("class", "stack2Wrap"), $.append("g").attr("class", "bars1Wrap"), $.append("g").attr("class", "bars2Wrap"), $.append("g").attr("class", "scatters1Wrap"), $.append("g").attr("class", "scatters2Wrap"), $.append("g").attr("class", "lines1Wrap"), $.append("g").attr("class", "lines2Wrap"), $.append("g").attr("class", "legendWrap"), $.append("g").attr("class", "nv-interactive");
                var tt = J.select("g"),
                    et = u.map(function(t, e) {
                        return u[e].color || a(t, e)
                    });
                if (l) {
                    var nt = D.align() ? I / 2 : I,
                        rt = D.align() ? nt : 0;
                    D.width(nt), D.color(et), tt.select(".legendWrap").datum(u.map(function(t) {
                        return t.originalKey = void 0 === t.originalKey ? t.key : t.originalKey, t.key = t.originalKey + (1 == t.yAxis ? "" : v), t
                    })).call(D), i.top != D.height() && (i.top = D.height(), H = t.utils.availableHeight(s, z, i)), tt.select(".legendWrap").attr("transform", "translate(" + rt + "," + -i.top + ")")
                }
                b.width(I).height(H).interpolate(f).color(et.filter(function(t, e) {
                    return !u[e].disabled && 1 == u[e].yAxis && "line" == u[e].type
                })), k.width(I).height(H).interpolate(f).color(et.filter(function(t, e) {
                    return !u[e].disabled && 2 == u[e].yAxis && "line" == u[e].type
                })), w.width(I).height(H).color(et.filter(function(t, e) {
                    return !u[e].disabled && 1 == u[e].yAxis && "scatter" == u[e].type
                })), M.width(I).height(H).color(et.filter(function(t, e) {
                    return !u[e].disabled && 2 == u[e].yAxis && "scatter" == u[e].type
                })), A.width(I).height(H).color(et.filter(function(t, e) {
                    return !u[e].disabled && 1 == u[e].yAxis && "bar" == u[e].type
                })), C.width(I).height(H).color(et.filter(function(t, e) {
                    return !u[e].disabled && 2 == u[e].yAxis && "bar" == u[e].type
                })), S.width(I).height(H).color(et.filter(function(t, e) {
                    return !u[e].disabled && 1 == u[e].yAxis && "area" == u[e].type
                })), W.width(I).height(H).color(et.filter(function(t, e) {
                    return !u[e].disabled && 2 == u[e].yAxis && "area" == u[e].type
                })), tt.attr("transform", "translate(" + i.left + "," + i.top + ")");
                var it = tt.select(".lines1Wrap").datum(G.filter(function(t) {
                        return !t.disabled
                    })),
                    at = tt.select(".scatters1Wrap").datum(X.filter(function(t) {
                        return !t.disabled
                    })),
                    ot = tt.select(".bars1Wrap").datum(R.filter(function(t) {
                        return !t.disabled
                    })),
                    st = tt.select(".stack1Wrap").datum(Q.filter(function(t) {
                        return !t.disabled
                    })),
                    lt = tt.select(".lines2Wrap").datum(Y.filter(function(t) {
                        return !t.disabled
                    })),
                    ut = tt.select(".scatters2Wrap").datum(j.filter(function(t) {
                        return !t.disabled
                    })),
                    ct = tt.select(".bars2Wrap").datum(Z.filter(function(t) {
                        return !t.disabled
                    })),
                    dt = tt.select(".stack2Wrap").datum(K.filter(function(t) {
                        return !t.disabled
                    })),
                    ft = Q.length ? Q.map(function(t) {
                        return t.values
                    }).reduce(function(t, e) {
                        return t.map(function(t, n) {
                            return {
                                x: t.x,
                                y: t.y + e[n].y
                            }
                        })
                    }).concat([{
                        x: 0,
                        y: 0
                    }]) : [],
                    pt = K.length ? K.map(function(t) {
                        return t.values
                    }).reduce(function(t, e) {
                        return t.map(function(t, n) {
                            return {
                                x: t.x,
                                y: t.y + e[n].y
                            }
                        })
                    }).concat([{
                        x: 0,
                        y: 0
                    }]) : [];
                y.domain(n || d3.extent(d3.merge(q).concat(ft), function(t) {
                    return t.y
                })).range([0, H]), x.domain(r || d3.extent(d3.merge(U).concat(pt), function(t) {
                    return t.y
                })).range([0, H]), b.yDomain(y.domain()), w.yDomain(y.domain()), A.yDomain(y.domain()), S.yDomain(y.domain()), k.yDomain(x.domain()), M.yDomain(x.domain()), C.yDomain(x.domain()), W.yDomain(x.domain()), Q.length && d3.transition(st).call(S), K.length && d3.transition(dt).call(W), R.length && d3.transition(ot).call(A), Z.length && d3.transition(ct).call(C), G.length && d3.transition(it).call(b), Y.length && d3.transition(lt).call(k), X.length && d3.transition(at).call(w), j.length && d3.transition(ut).call(M), E._ticks(t.utils.calcTicksX(I / 100, u)).tickSize(-H, 0), tt.select(".nv-x.nv-axis").attr("transform", "translate(0," + H + ")"), d3.transition(tt.select(".nv-x.nv-axis")).call(E), F._ticks(t.utils.calcTicksY(H / 36, u)).tickSize(-I, 0), d3.transition(tt.select(".nv-y1.nv-axis")).call(F), _._ticks(t.utils.calcTicksY(H / 36, u)).tickSize(-I, 0), d3.transition(tt.select(".nv-y2.nv-axis")).call(_), tt.select(".nv-y1.nv-axis").classed("nv-disabled", !q.length).attr("transform", "translate(" + m.range()[0] + ",0)"), tt.select(".nv-y2.nv-axis").classed("nv-disabled", !U.length).attr("transform", "translate(" + m.range()[1] + ",0)"), D.dispatch.on("stateChange", function(t) {
                    e.update()
                }), g && (h.width(I).height(H).margin({
                    left: i.left,
                    top: i.top
                }).svgContainer(z).xScale(m), J.select(".nv-interactive").call(h)), g ? (h.dispatch.on("elementMousemove", function(n) {
                    T();
                    var r, i, o, s = [];
                    u.filter(function(t, e) {
                        return t.seriesIndex = e, !t.disabled
                    }).forEach(function(l, u) {
                        var c = m.domain(),
                            d = l.values.filter(function(t, n) {
                                return e.x()(t, n) >= c[0] && e.x()(t, n) <= c[1]
                            });
                        i = t.interactiveBisect(d, n.pointXValue, e.x());
                        var f = d[i],
                            p = e.y()(f, i);
                        null !== p && V(u, i, !0), void 0 !== f && (void 0 === r && (r = f), void 0 === o && (o = m(e.x()(f, i))), s.push({
                            key: l.key,
                            value: p,
                            color: a(l, l.seriesIndex),
                            data: f,
                            yAxis: 2 == l.yAxis ? _ : F
                        }))
                    }), h.tooltip.chartContainer(e.container.parentNode).valueFormatter(function(t, e) {
                        var n = s[e].yAxis;
                        return null === t ? "N/A" : n.tickFormat()(t)
                    }).data({
                        value: e.x()(r, i),
                        index: i,
                        series: s
                    })(), h.renderGuideLine(o)
                }), h.dispatch.on("elementMouseout", function(t) {
                    T()
                })) : (b.dispatch.on("elementMouseover.tooltip", p), k.dispatch.on("elementMouseover.tooltip", p), b.dispatch.on("elementMouseout.tooltip", function(t) {
                    O.hidden(!0)
                }), k.dispatch.on("elementMouseout.tooltip", function(t) {
                    O.hidden(!0)
                }), w.dispatch.on("elementMouseover.tooltip", N), M.dispatch.on("elementMouseover.tooltip", N), w.dispatch.on("elementMouseout.tooltip", function(t) {
                    O.hidden(!0)
                }), M.dispatch.on("elementMouseout.tooltip", function(t) {
                    O.hidden(!0)
                }), S.dispatch.on("elementMouseover.tooltip", P), W.dispatch.on("elementMouseover.tooltip", P), S.dispatch.on("elementMouseout.tooltip", function(t) {
                    O.hidden(!0)
                }), W.dispatch.on("elementMouseout.tooltip", function(t) {
                    O.hidden(!0)
                }), A.dispatch.on("elementMouseover.tooltip", L), C.dispatch.on("elementMouseover.tooltip", L), A.dispatch.on("elementMouseout.tooltip", function(t) {
                    O.hidden(!0)
                }), C.dispatch.on("elementMouseout.tooltip", function(t) {
                    O.hidden(!0)
                }), A.dispatch.on("elementMousemove.tooltip", function(t) {
                    O()
                }), C.dispatch.on("elementMousemove.tooltip", function(t) {
                    O()
                }))
            }), e
        }
        var n, r, i = {
                top: 30,
                right: 20,
                bottom: 50,
                left: 60
            },
            a = t.utils.defaultColor(),
            o = null,
            s = null,
            l = !0,
            u = null,
            c = function(t) {
                return t.x
            },
            d = function(t) {
                return t.y
            },
            f = "monotone",
            p = !0,
            h = t.interactiveGuideline(),
            g = !1,
            v = " (right axis)",
            m = d3.scale.linear(),
            y = d3.scale.linear(),
            x = d3.scale.linear(),
            b = t.models.line().yScale(y),
            k = t.models.line().yScale(x),
            w = t.models.scatter().yScale(y),
            M = t.models.scatter().yScale(x),
            A = t.models.multiBar().stacked(!1).yScale(y),
            C = t.models.multiBar().stacked(!1).yScale(x),
            S = t.models.stackedArea().yScale(y),
            W = t.models.stackedArea().yScale(x),
            E = t.models.axis().scale(m).orient("bottom").tickPadding(5),
            F = t.models.axis().scale(y).orient("left"),
            _ = t.models.axis().scale(x).orient("right"),
            D = t.models.legend().height(30),
            O = t.models.tooltip(),
            N = d3.dispatch(),
            B = [b, k, w, M, A, C, S, W];
        return e.dispatch = N, e.legend = D, e.lines1 = b, e.lines2 = k, e.scatters1 = w, e.scatters2 = M, e.bars1 = A, e.bars2 = C, e.stack1 = S, e.stack2 = W, e.xAxis = E, e.yAxis1 = F, e.yAxis2 = _, e.tooltip = O, e.interactiveLayer = h, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            height: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            showLegend: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            yDomain1: {
                get: function() {
                    return n
                },
                set: function(t) {
                    n = t
                }
            },
            yDomain2: {
                get: function() {
                    return r
                },
                set: function(t) {
                    r = t
                }
            },
            noData: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u = t
                }
            },
            interpolate: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            legendRightAxisHint: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            margin: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i.top = void 0 !== t.top ? t.top : i.top, i.right = void 0 !== t.right ? t.right : i.right, i.bottom = void 0 !== t.bottom ? t.bottom : i.bottom, i.left = void 0 !== t.left ? t.left : i.left
                }
            },
            color: {
                get: function() {
                    return a
                },
                set: function(e) {
                    a = t.utils.getColor(e)
                }
            },
            x: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t, b.x(t), k.x(t), w.x(t), M.x(t), A.x(t), C.x(t), S.x(t), W.x(t)
                }
            },
            y: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t, b.y(t), k.y(t), w.y(t), M.y(t), S.y(t), W.y(t), A.y(t), C.y(t)
                }
            },
            useVoronoi: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t, b.useVoronoi(t), k.useVoronoi(t), S.useVoronoi(t), W.useVoronoi(t)
                }
            },
            useInteractiveGuideline: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t, g && (b.interactive(!1), b.useVoronoi(!1), k.interactive(!1), k.useVoronoi(!1), S.interactive(!1), S.useVoronoi(!1), W.interactive(!1), W.useVoronoi(!1), w.interactive(!1), M.interactive(!1))
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.ohlcBar = function() {
        "use strict";

        function e(A) {
            return A.each(function(e) {
                c = d3.select(this);
                var A = t.utils.availableWidth(s, c, o),
                    S = t.utils.availableHeight(l, c, o);
                t.utils.initSVG(c);
                var W = A / e[0].values.length * .9;
                d.domain(n || d3.extent(e[0].values.map(p).concat(x))), k ? d.range(i || [.5 * A / e[0].values.length, A * (e[0].values.length - .5) / e[0].values.length]) : d.range(i || [5 + W / 2, A - W / 2 - 5]), f.domain(r || [d3.min(e[0].values.map(y).concat(b)), d3.max(e[0].values.map(m).concat(b))]).range(a || [S, 0]), d.domain()[0] === d.domain()[1] && (d.domain()[0] ? d.domain([d.domain()[0] - .01 * d.domain()[0], d.domain()[1] + .01 * d.domain()[1]]) : d.domain([-1, 1])), f.domain()[0] === f.domain()[1] && (f.domain()[0] ? f.domain([f.domain()[0] + .01 * f.domain()[0], f.domain()[1] - .01 * f.domain()[1]]) : f.domain([-1, 1]));
                var E = d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([e[0].values]),
                    F = E.enter().append("g").attr("class", "nvd3 nv-wrap nv-ohlcBar"),
                    _ = F.append("defs"),
                    D = F.append("g"),
                    O = E.select("g");
                D.append("g").attr("class", "nv-ticks"), E.attr("transform", "translate(" + o.left + "," + o.top + ")"), c.on("click", function(t, e) {
                    C.chartClick({
                        data: t,
                        index: e,
                        pos: d3.event,
                        id: u
                    })
                }), _.append("clipPath").attr("id", "nv-chart-clip-path-" + u).append("rect"), E.select("#nv-chart-clip-path-" + u + " rect").attr("width", A).attr("height", S), O.attr("clip-path", w ? "url(#nv-chart-clip-path-" + u + ")" : "");
                var N = E.select(".nv-ticks").selectAll(".nv-tick").data(function(t) {
                    return t
                });
                N.exit().remove(), N.enter().append("path").attr("class", function(t, e, n) {
                    return (g(t, e) > v(t, e) ? "nv-tick negative" : "nv-tick positive") + " nv-tick-" + n + "-" + e
                }).attr("d", function(t, e) {
                    return "m0,0l0," + (f(g(t, e)) - f(m(t, e))) + "l" + -W / 2 + ",0l" + W / 2 + ",0l0," + (f(y(t, e)) - f(g(t, e))) + "l0," + (f(v(t, e)) - f(y(t, e))) + "l" + W / 2 + ",0l" + -W / 2 + ",0z"
                }).attr("transform", function(t, e) {
                    return "translate(" + d(p(t, e)) + "," + f(m(t, e)) + ")"
                }).attr("fill", function(t, e) {
                    return M[0]
                }).attr("stroke", function(t, e) {
                    return M[0]
                }).attr("x", 0).attr("y", function(t, e) {
                    return f(Math.max(0, h(t, e)))
                }).attr("height", function(t, e) {
                    return Math.abs(f(h(t, e)) - f(0))
                }), N.attr("class", function(t, e, n) {
                    return (g(t, e) > v(t, e) ? "nv-tick negative" : "nv-tick positive") + " nv-tick-" + n + "-" + e
                }), d3.transition(N).attr("transform", function(t, e) {
                    return "translate(" + d(p(t, e)) + "," + f(m(t, e)) + ")"
                }).attr("d", function(t, n) {
                    var r = A / e[0].values.length * .9;
                    return "m0,0l0," + (f(g(t, n)) - f(m(t, n))) + "l" + -r / 2 + ",0l" + r / 2 + ",0l0," + (f(y(t, n)) - f(g(t, n))) + "l0," + (f(v(t, n)) - f(y(t, n))) + "l" + r / 2 + ",0l" + -r / 2 + ",0z"
                })
            }), e
        }
        var n, r, i, a, o = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            s = null,
            l = null,
            u = Math.floor(1e4 * Math.random()),
            c = null,
            d = d3.scale.linear(),
            f = d3.scale.linear(),
            p = function(t) {
                return t.x
            },
            h = function(t) {
                return t.y
            },
            g = function(t) {
                return t.open
            },
            v = function(t) {
                return t.close
            },
            m = function(t) {
                return t.high
            },
            y = function(t) {
                return t.low
            },
            x = [],
            b = [],
            k = !1,
            w = !0,
            M = t.utils.defaultColor(),
            A = !1,
            C = d3.dispatch("stateChange", "changeState", "renderEnd", "chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout", "elementMousemove");
        return e.highlightPoint = function(t, n) {
            e.clearHighlights(), c.select(".nv-ohlcBar .nv-tick-0-" + t).classed("hover", n)
        }, e.clearHighlights = function() {
            c.select(".nv-ohlcBar .nv-tick.hover").classed("hover", !1)
        }, e.dispatch = C, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            height: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            xScale: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            yScale: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            xDomain: {
                get: function() {
                    return n
                },
                set: function(t) {
                    n = t
                }
            },
            yDomain: {
                get: function() {
                    return r
                },
                set: function(t) {
                    r = t
                }
            },
            xRange: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i = t
                }
            },
            yRange: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            forceX: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t
                }
            },
            forceY: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = t
                }
            },
            padData: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t
                }
            },
            clipEdge: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t
                }
            },
            id: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u = t
                }
            },
            interactive: {
                get: function() {
                    return A
                },
                set: function(t) {
                    A = t
                }
            },
            x: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            y: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            open: {
                get: function() {
                    return g()
                },
                set: function(t) {
                    g = t
                }
            },
            close: {
                get: function() {
                    return v()
                },
                set: function(t) {
                    v = t
                }
            },
            high: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            low: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t
                }
            },
            margin: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o.top = void 0 != t.top ? t.top : o.top, o.right = void 0 != t.right ? t.right : o.right, o.bottom = void 0 != t.bottom ? t.bottom : o.bottom, o.left = void 0 != t.left ? t.left : o.left
                }
            },
            color: {
                get: function() {
                    return M
                },
                set: function(e) {
                    M = t.utils.getColor(e)
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.parallelCoordinates = function() {
        "use strict";

        function e(A) {
            return M.reset(), A.each(function(e) {
                function M(t) {
                    return b(d.map(function(e) {
                        if (isNaN(t.values[e.key]) || isNaN(parseFloat(t.values[e.key])) || V) {
                            var n = u[e.key].domain(),
                                r = u[e.key].range(),
                                i = n[0] - (n[1] - n[0]) / 9;
                            if (y.indexOf(e.key) < 0) {
                                var a = d3.scale.linear().domain([i, n[1]]).range([B - 12, r[1]]);
                                u[e.key].brush.y(a), y.push(e.key)
                            }
                            if (isNaN(t.values[e.key]) || isNaN(parseFloat(t.values[e.key]))) return [l(e.key), u[e.key](i)]
                        }
                        return void 0 !== Y && (y.length > 0 || V ? (Y.style("display", "inline"),
                            X.style("display", "inline")) : (Y.style("display", "none"), X.style("display", "none"))), [l(e.key), u[e.key](t.values[e.key])]
                    }))
                }

                function A(t) {
                    g.forEach(function(e) {
                        var n = u[e.dimension].brush.y().domain();
                        e.hasOnlyNaN && (e.extent[1] = (u[e.dimension].domain()[1] - n[0]) * (e.extent[1] - e.extent[0]) / (T[e.dimension] - e.extent[0]) + n[0]), e.hasNaN && (e.extent[0] = n[0]), t && u[e.dimension].brush.extent(e.extent)
                    }), i.select(".nv-brushBackground").each(function(t) {
                        d3.select(this).call(u[t.key].brush)
                    }).selectAll("rect").attr("x", -8).attr("width", 16)
                }

                function C() {
                    p === !1 && A(!0)
                }

                function S() {
                    K = f.filter(function(t) {
                        return !u[t].brush.empty()
                    }), q = K.map(function(t) {
                        return u[t].brush.extent()
                    }), g = [], K.forEach(function(t, e) {
                        g[e] = {
                            dimension: t,
                            extent: q[e],
                            hasNaN: !1,
                            hasOnlyNaN: !1
                        }
                    }), v = [], n.style("display", function(t) {
                        var e = K.every(function(e, n) {
                            return (isNaN(t.values[e]) || isNaN(parseFloat(t.values[e]))) && q[n][0] == u[e].brush.y().domain()[0] ? !0 : q[n][0] <= t.values[e] && t.values[e] <= q[n][1] && !isNaN(parseFloat(t.values[e]))
                        });
                        return e && v.push(t), e ? null : "none"
                    }), w.brush({
                        filters: g,
                        active: v
                    })
                }

                function W() {
                    var t = K.length > 0;
                    g.forEach(function(t) {
                        t.extent[0] === u[t.dimension].brush.y().domain()[0] && y.indexOf(t.dimension) >= 0 && (t.hasNaN = !0), t.extent[1] < u[t.dimension].domain()[0] && (t.hasOnlyNaN = !0)
                    }), w.brushEnd(v, t)
                }

                function E(t) {
                    m[t.key] = this.parentNode.__origin__ = l(t.key), r.attr("visibility", "hidden")
                }

                function F(t) {
                    m[t.key] = Math.min(N, Math.max(0, this.parentNode.__origin__ += d3.event.x)), n.attr("d", M), d.sort(function(t, e) {
                        return D(t.key) - D(e.key)
                    }), d.forEach(function(t, e) {
                        return t.currentPosition = e
                    }), l.domain(d.map(function(t) {
                        return t.key
                    })), i.attr("transform", function(t) {
                        return "translate(" + D(t.key) + ")"
                    })
                }

                function _(t, e) {
                    delete this.parentNode.__origin__, delete m[t.key], d3.select(this.parentNode).attr("transform", "translate(" + l(t.key) + ")"), n.attr("d", M), r.attr("d", M).attr("visibility", null), w.dimensionsOrder(d)
                }

                function D(t) {
                    var e = m[t];
                    return null == e ? l(t) : e
                }
                var O = d3.select(this),
                    N = t.utils.availableWidth(o, O, a),
                    B = t.utils.availableHeight(s, O, a);
                if (t.utils.initSVG(O), void 0 === e[0].values) {
                    var P = [];
                    e.forEach(function(t) {
                        var e = {},
                            n = Object.keys(t);
                        n.forEach(function(n) {
                            "name" !== n && (e[n] = t[n])
                        }), P.push({
                            key: t.name,
                            values: e
                        })
                    }), e = P
                }
                var L = e.map(function(t) {
                    return t.values
                });
                0 === v.length && (v = e), f = c.sort(function(t, e) {
                    return t.currentPosition - e.currentPosition
                }).map(function(t) {
                    return t.key
                }), d = c.filter(function(t) {
                    return !t.disabled
                }), l.rangePoints([0, N], 1).domain(d.map(function(t) {
                    return t.key
                }));
                var T = {},
                    V = !1;
                f.forEach(function(t) {
                    var e = d3.extent(L, function(e) {
                            return +e[t]
                        }),
                        n = e[0],
                        r = e[1],
                        i = !1;
                    (isNaN(n) || isNaN(r)) && (i = !0, n = 0, r = 0), n === r && (n -= 1, r += 1);
                    var a = g.filter(function(e) {
                        return e.dimension == t
                    });
                    0 !== a.length && (i ? (n = u[t].domain()[0], r = u[t].domain()[1]) : !a[0].hasOnlyNaN && p ? (n = n > a[0].extent[0] ? a[0].extent[0] : n, r = r < a[0].extent[1] ? a[0].extent[1] : r) : a[0].hasNaN && (r = r < a[0].extent[1] ? a[0].extent[1] : r, T[t] = u[t].domain()[1], V = !0)), u[t] = d3.scale.linear().domain([n, r]).range([.9 * (B - 12), 0]), y = [], u[t].brush = d3.svg.brush().y(u[t]).on("brushstart", C).on("brush", S).on("brushend", W)
                });
                var z = O.selectAll("g.nv-wrap.nv-parallelCoordinates").data([e]),
                    I = z.enter().append("g").attr("class", "nvd3 nv-wrap nv-parallelCoordinates"),
                    H = I.append("g"),
                    G = z.select("g");
                H.append("g").attr("class", "nv-parallelCoordinates background"), H.append("g").attr("class", "nv-parallelCoordinates foreground"), H.append("g").attr("class", "nv-parallelCoordinates missingValuesline"), z.attr("transform", "translate(" + a.left + "," + a.top + ")"), b.interpolate("cardinal").tension(x), k.orient("left");
                var Y, X, j = d3.behavior.drag().on("dragstart", E).on("drag", F).on("dragend", _),
                    R = l.range()[1] - l.range()[0];
                if (!isNaN(R)) {
                    var Z = [0 + R / 2, B - 12, N - R / 2, B - 12];
                    Y = z.select(".missingValuesline").selectAll("line").data([Z]), Y.enter().append("line"), Y.exit().remove(), Y.attr("x1", function(t) {
                        return t[0]
                    }).attr("y1", function(t) {
                        return t[1]
                    }).attr("x2", function(t) {
                        return t[2]
                    }).attr("y2", function(t) {
                        return t[3]
                    }), X = z.select(".missingValuesline").selectAll("text").data(["undefined values"]), X.append("text").data(["undefined values"]), X.enter().append("text"), X.exit().remove(), X.attr("y", B).attr("x", N - 92 - R / 2).text(function(t) {
                        return t
                    })
                }
                r = z.select(".background").selectAll("path").data(e), r.enter().append("path"), r.exit().remove(), r.attr("d", M), n = z.select(".foreground").selectAll("path").data(e), n.enter().append("path"), n.exit().remove(), n.attr("d", M).style("stroke-width", function(t, e) {
                    return isNaN(t.strokeWidth) && (t.strokeWidth = 1), t.strokeWidth
                }).attr("stroke", function(t, e) {
                    return t.color || h(t, e)
                }), n.on("mouseover", function(t, e) {
                    d3.select(this).classed("hover", !0).style("stroke-width", t.strokeWidth + 2 + "px").style("stroke-opacity", 1), w.elementMouseover({
                        label: t.name,
                        color: t.color || h(t, e)
                    })
                }), n.on("mouseout", function(t, e) {
                    d3.select(this).classed("hover", !1).style("stroke-width", t.strokeWidth + "px").style("stroke-opacity", .7), w.elementMouseout({
                        label: t.name,
                        index: e
                    })
                }), n.on("mousemove", function(t, e) {
                    w.elementMousemove()
                }), n.on("click", function(t) {
                    w.elementClick({
                        id: t.id
                    })
                }), i = G.selectAll(".dimension").data(d);
                var Q = i.enter().append("g").attr("class", "nv-parallelCoordinates dimension");
                i.attr("transform", function(t) {
                    return "translate(" + l(t.key) + ",0)"
                }), Q.append("g").attr("class", "nv-axis"), Q.append("text").attr("class", "nv-label").style("cursor", "move").attr("dy", "-1em").attr("text-anchor", "middle").on("mouseover", function(t, e) {
                    w.elementMouseover({
                        label: t.tooltip || t.key
                    })
                }).on("mouseout", function(t, e) {
                    w.elementMouseout({
                        label: t.tooltip
                    })
                }).on("mousemove", function(t, e) {
                    w.elementMousemove()
                }).call(j), Q.append("g").attr("class", "nv-brushBackground"), i.exit().remove(), i.select(".nv-label").text(function(t) {
                    return t.key
                }), i.select(".nv-axis").each(function(t, e) {
                    d3.select(this).call(k.scale(u[t.key]).tickFormat(d3.format(t.format)))
                }), A(p);
                var K = f.filter(function(t) {
                        return !u[t].brush.empty()
                    }),
                    q = K.map(function(t) {
                        return u[t].brush.extent()
                    }),
                    U = v.slice(0);
                v = [], n.style("display", function(t) {
                    var e = K.every(function(e, n) {
                        return (isNaN(t.values[e]) || isNaN(parseFloat(t.values[e]))) && q[n][0] == u[e].brush.y().domain()[0] ? !0 : q[n][0] <= t.values[e] && t.values[e] <= q[n][1] && !isNaN(parseFloat(t.values[e]))
                    });
                    return e && v.push(t), e ? null : "none"
                }), (g.length > 0 || !t.utils.arrayEquals(v, U)) && w.activeChanged(v)
            }), e
        }
        var n, r, i, a = {
                top: 30,
                right: 0,
                bottom: 10,
                left: 0
            },
            o = null,
            s = null,
            l = d3.scale.ordinal(),
            u = {},
            c = [],
            d = [],
            f = [],
            p = !0,
            h = t.utils.defaultColor(),
            g = [],
            v = [],
            m = [],
            y = [],
            x = 1,
            b = d3.svg.line(),
            k = d3.svg.axis(),
            w = d3.dispatch("brushstart", "brush", "brushEnd", "dimensionsOrder", "stateChange", "elementClick", "elementMouseover", "elementMouseout", "elementMousemove", "renderEnd", "activeChanged"),
            M = t.utils.renderWatch(w);
        return e.dispatch = w, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            height: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            dimensionData: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            displayBrush: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            filters: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            active: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            lineTension: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t
                }
            },
            dimensions: {
                get: function() {
                    return c.map(function(t) {
                        return t.key
                    })
                },
                set: function(e) {
                    t.deprecated("dimensions", "use dimensionData instead"), 0 === c.length ? e.forEach(function(t) {
                        c.push({
                            key: t
                        })
                    }) : e.forEach(function(t, e) {
                        c[e].key = t
                    })
                }
            },
            dimensionNames: {
                get: function() {
                    return c.map(function(t) {
                        return t.key
                    })
                },
                set: function(e) {
                    t.deprecated("dimensionNames", "use dimensionData instead"), f = [], 0 === c.length ? e.forEach(function(t) {
                        c.push({
                            key: t
                        })
                    }) : e.forEach(function(t, e) {
                        c[e].key = t
                    })
                }
            },
            dimensionFormats: {
                get: function() {
                    return c.map(function(t) {
                        return t.format
                    })
                },
                set: function(e) {
                    t.deprecated("dimensionFormats", "use dimensionData instead"), 0 === c.length ? e.forEach(function(t) {
                        c.push({
                            format: t
                        })
                    }) : e.forEach(function(t, e) {
                        c[e].format = t
                    })
                }
            },
            margin: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a.top = void 0 !== t.top ? t.top : a.top, a.right = void 0 !== t.right ? t.right : a.right, a.bottom = void 0 !== t.bottom ? t.bottom : a.bottom, a.left = void 0 !== t.left ? t.left : a.left
                }
            },
            color: {
                get: function() {
                    return h
                },
                set: function(e) {
                    h = t.utils.getColor(e)
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.parallelCoordinatesChart = function() {
        "use strict";

        function e(i) {
            return m.reset(), m.models(n), i.each(function(i) {
                var u = d3.select(this);
                t.utils.initSVG(u);
                var g = t.utils.availableWidth(o, u, a),
                    m = t.utils.availableHeight(s, u, a);
                e.update = function() {
                    u.call(e)
                }, e.container = this, c.setter(x(d), e.update).getter(y(d)).update(), c.disabled = d.map(function(t) {
                    return !!t.disabled
                }), d = d.map(function(t) {
                    return t.disabled = !!t.disabled, t
                }), d.forEach(function(t, e) {
                    t.originalPosition = isNaN(t.originalPosition) ? e : t.originalPosition, t.currentPosition = isNaN(t.currentPosition) ? e : t.currentPosition
                });
                var b = f.map(function(t) {
                        return t.key
                    }),
                    k = d.map(function(t) {
                        return t.key
                    });
                if (d.forEach(function(t, e) {
                        var n = b.indexOf(t.key);
                        if (0 > n) f.splice(e, 0, t);
                        else {
                            var r = f[n].currentPosition - f[n].originalPosition;
                            f[n].originalPosition = t.originalPosition, f[n].currentPosition = t.originalPosition + r
                        }
                    }), f = f.filter(function(t) {
                        return k.indexOf(t.key) >= 0
                    }), !h) {
                    var w;
                    h = {};
                    for (w in c) c[w] instanceof Array ? h[w] = c[w].slice(0) : h[w] = c[w]
                }
                if (!i || !i.length) return t.utils.noData(e, u), e;
                u.selectAll(".nv-noData").remove();
                var M = u.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([i]),
                    A = M.enter().append("g").attr("class", "nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),
                    C = M.select("g");
                A.append("g").attr("class", "nv-parallelCoordinatesWrap"), A.append("g").attr("class", "nv-legendWrap"), C.select("rect").attr("width", g).attr("height", m > 0 ? m : 0), l && (r.width(g).color(function(t) {
                    return "rgb(188,190,192)"
                }), C.select(".nv-legendWrap").datum(f.sort(function(t, e) {
                    return t.originalPosition - e.originalPosition
                })).call(r), a.top != r.height() && (a.top = r.height(), m = t.utils.availableHeight(s, u, a)), M.select(".nv-legendWrap").attr("transform", "translate( 0 ," + -a.top + ")")), M.attr("transform", "translate(" + a.left + "," + a.top + ")"), n.width(g).height(m).dimensionData(f).displayBrush(p);
                var S = C.select(".nv-parallelCoordinatesWrap ").datum(i);
                S.transition().call(n), n.dispatch.on("brushEnd", function(t, e) {
                    e ? (p = !0, v.brushEnd(t)) : p = !1
                }), r.dispatch.on("stateChange", function(t) {
                    for (var n in t) c[n] = t[n];
                    v.stateChange(c), e.update()
                }), n.dispatch.on("dimensionsOrder", function(t) {
                    f.sort(function(t, e) {
                        return t.currentPosition - e.currentPosition
                    });
                    var e = !1;
                    f.forEach(function(t, n) {
                        t.currentPosition = n, t.currentPosition !== t.originalPosition && (e = !0)
                    }), v.dimensionsOrder(f, e)
                }), v.on("changeState", function(t) {
                    "undefined" != typeof t.disabled && (f.forEach(function(e, n) {
                        e.disabled = t.disabled[n]
                    }), c.disabled = t.disabled), e.update()
                })
            }), m.renderEnd("parraleleCoordinateChart immediate"), e
        }
        var n = t.models.parallelCoordinates(),
            r = t.models.legend(),
            i = t.models.tooltip(),
            a = (t.models.tooltip(), {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            }),
            o = null,
            s = null,
            l = !0,
            u = t.utils.defaultColor(),
            c = t.utils.state(),
            d = [],
            f = [],
            p = !0,
            h = null,
            g = null,
            v = d3.dispatch("dimensionsOrder", "brushEnd", "stateChange", "changeState", "renderEnd"),
            m = t.utils.renderWatch(v),
            y = function(t) {
                return function() {
                    return {
                        active: t.map(function(t) {
                            return !t.disabled
                        })
                    }
                }
            },
            x = function(t) {
                return function(e) {
                    void 0 !== e.active && t.forEach(function(t, n) {
                        t.disabled = !e.active[n]
                    })
                }
            };
        return n.dispatch.on("elementMouseover.tooltip", function(t) {
            t.series = {
                key: t.label,
                color: t.color
            }, i.data(t).hidden(!1)
        }), n.dispatch.on("elementMouseout.tooltip", function(t) {
            i.hidden(!0)
        }), n.dispatch.on("elementMousemove.tooltip", function() {
            i()
        }), e.dispatch = v, e.parallelCoordinates = n, e.legend = r, e.tooltip = i, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            height: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            showLegend: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            defaultState: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            dimensionData: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            displayBrush: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            noData: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            margin: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a.top = void 0 !== t.top ? t.top : a.top, a.right = void 0 !== t.right ? t.right : a.right, a.bottom = void 0 !== t.bottom ? t.bottom : a.bottom, a.left = void 0 !== t.left ? t.left : a.left
                }
            },
            color: {
                get: function() {
                    return u
                },
                set: function(e) {
                    u = t.utils.getColor(e), r.color(u), n.color(u)
                }
            }
        }), t.utils.inheritOptions(e, n), t.utils.initOptions(e), e
    }, t.models.pie = function() {
        "use strict";

        function e(_) {
            return F.reset(), _.each(function(e) {
                function _(t, e) {
                    t.endAngle = isNaN(t.endAngle) ? 0 : t.endAngle, t.startAngle = isNaN(t.startAngle) ? 0 : t.startAngle, g || (t.innerRadius = 0);
                    var n = d3.interpolate(this._current, t);
                    return this._current = n(0),
                        function(t) {
                            return W[e](n(t))
                        }
                }
                var D = r - n.left - n.right,
                    O = i - n.top - n.bottom,
                    N = Math.min(D, O) / 2,
                    B = [],
                    P = [];
                if (l = d3.select(this), 0 === C.length)
                    for (var L = N - N / 5, T = A * N, V = 0; V < e[0].length; V++) B.push(L), P.push(T);
                else B = C.map(function(t) {
                    return (t.outer - t.outer / 5) * N
                }), P = C.map(function(t) {
                    return (t.inner - t.inner / 5) * N
                }), A = d3.min(C.map(function(t) {
                    return t.inner - t.inner / 5
                }));
                t.utils.initSVG(l);
                var z = l.selectAll(".nv-wrap.nv-pie").data(e),
                    I = z.enter().append("g").attr("class", "nvd3 nv-wrap nv-pie nv-chart-" + s),
                    H = I.append("g"),
                    G = z.select("g"),
                    Y = H.append("g").attr("class", "nv-pie");
                H.append("g").attr("class", "nv-pieLabels"), z.attr("transform", "translate(" + n.left + "," + n.top + ")"), G.select(".nv-pie").attr("transform", "translate(" + D / 2 + "," + O / 2 + ")"), G.select(".nv-pieLabels").attr("transform", "translate(" + D / 2 + "," + O / 2 + ")"), l.on("click", function(t, e) {
                    S.chartClick({
                        data: t,
                        index: e,
                        pos: d3.event,
                        id: s
                    })
                }), W = [], E = [];
                for (var V = 0; V < e[0].length; V++) {
                    var X = d3.svg.arc().outerRadius(B[V]),
                        j = d3.svg.arc().outerRadius(B[V] + 5);
                    b !== !1 && (X.startAngle(b), j.startAngle(b)), w !== !1 && (X.endAngle(w), j.endAngle(w)), g && (X.innerRadius(P[V]), j.innerRadius(P[V])), X.cornerRadius && M && (X.cornerRadius(M), j.cornerRadius(M)), W.push(X), E.push(j)
                }
                var R = d3.layout.pie().sort(null).value(function(t) {
                    return t.disabled ? 0 : o(t)
                });
                R.padAngle && k && R.padAngle(k), g && v && (Y.append("text").attr("class", "nv-pie-title"), z.select(".nv-pie-title").style("text-anchor", "middle").text(function(t) {
                    return v
                }).style("font-size", Math.min(D, O) * A * 2 / (v.length + 2) + "px").attr("dy", "0.35em").attr("transform", function(t, e) {
                    return "translate(0, " + y + ")"
                }));
                var Z = z.select(".nv-pie").selectAll(".nv-slice").data(R),
                    Q = z.select(".nv-pieLabels").selectAll(".nv-label").data(R);
                Z.exit().remove(), Q.exit().remove();
                var K = Z.enter().append("g");
                K.attr("class", "nv-slice"), K.on("mouseover", function(t, e) {
                    d3.select(this).classed("hover", !0), m && d3.select(this).select("path").transition().duration(70).attr("d", E[e]), S.elementMouseover({
                        data: t.data,
                        index: e,
                        color: d3.select(this).style("fill")
                    })
                }), K.on("mouseout", function(t, e) {
                    d3.select(this).classed("hover", !1), m && d3.select(this).select("path").transition().duration(50).attr("d", W[e]), S.elementMouseout({
                        data: t.data,
                        index: e
                    })
                }), K.on("mousemove", function(t, e) {
                    S.elementMousemove({
                        data: t.data,
                        index: e
                    })
                }), K.on("click", function(t, e) {
                    var n = this;
                    S.elementClick({
                        data: t.data,
                        index: e,
                        color: d3.select(this).style("fill"),
                        event: d3.event,
                        element: n
                    })
                }), K.on("dblclick", function(t, e) {
                    S.elementDblClick({
                        data: t.data,
                        index: e,
                        color: d3.select(this).style("fill")
                    })
                }), Z.attr("fill", function(t, e) {
                    return u(t.data, e)
                }), Z.attr("stroke", function(t, e) {
                    return u(t.data, e)
                });
                K.append("path").each(function(t) {
                    this._current = t
                });
                if (Z.select("path").transition().attr("d", function(t, e) {
                        return W[e](t)
                    }).attrTween("d", _), d) {
                    for (var q = [], V = 0; V < e[0].length; V++) q.push(W[V]), f ? g && (q[V] = d3.svg.arc().outerRadius(W[V].outerRadius()), b !== !1 && q[V].startAngle(b), w !== !1 && q[V].endAngle(w)) : g || q[V].innerRadius(0);
                    Q.enter().append("g").classed("nv-label", !0).each(function(t, e) {
                        var n = d3.select(this);
                        n.attr("transform", function(t, e) {
                            if (x) {
                                t.outerRadius = B[e] + 10, t.innerRadius = B[e] + 15;
                                var n = (t.startAngle + t.endAngle) / 2 * (180 / Math.PI);
                                return (t.startAngle + t.endAngle) / 2 < Math.PI ? n -= 90 : n += 90, "translate(" + q[e].centroid(t) + ") rotate(" + n + ")"
                            }
                            return t.outerRadius = N + 10, t.innerRadius = N + 15, "translate(" + q[e].centroid(t) + ")"
                        }), n.append("rect").style("stroke", "#fff").style("fill", "#fff").attr("rx", 3).attr("ry", 3), n.append("text").style("text-anchor", x ? (t.startAngle + t.endAngle) / 2 < Math.PI ? "start" : "end" : "middle").style("fill", "#000")
                    });
                    var U = {},
                        J = 14,
                        $ = 140,
                        tt = function(t) {
                            return Math.floor(t[0] / $) * $ + "," + Math.floor(t[1] / J) * J
                        },
                        et = function(t) {
                            return (t.endAngle - t.startAngle) / (2 * Math.PI)
                        };
                    Q.watchTransition(F, "pie labels").attr("transform", function(t, e) {
                        if (x) {
                            t.outerRadius = B[e] + 10, t.innerRadius = B[e] + 15;
                            var n = (t.startAngle + t.endAngle) / 2 * (180 / Math.PI);
                            return (t.startAngle + t.endAngle) / 2 < Math.PI ? n -= 90 : n += 90, "translate(" + q[e].centroid(t) + ") rotate(" + n + ")"
                        }
                        t.outerRadius = N + 10, t.innerRadius = N + 15;
                        var r = q[e].centroid(t),
                            i = et(t);
                        if (t.value && i >= h) {
                            var a = tt(r);
                            U[a] && (r[1] -= J), U[tt(r)] = !0
                        }
                        return "translate(" + r + ")"
                    }), Q.select(".nv-label text").style("text-anchor", function(t, e) {
                        return x ? (t.startAngle + t.endAngle) / 2 < Math.PI ? "start" : "end" : "middle"
                    }).text(function(t, e) {
                        var n = et(t),
                            r = "";
                        if (!t.value || h > n) return "";
                        if ("function" == typeof p) r = p(t, e, {
                            key: a(t.data),
                            value: o(t.data),
                            percent: c(n)
                        });
                        else switch (p) {
                            case "key":
                                r = a(t.data);
                                break;
                            case "value":
                                r = c(o(t.data));
                                break;
                            case "percent":
                                r = d3.format("%")(n)
                        }
                        return r
                    })
                }
            }), F.renderEnd("pie immediate"), e
        }
        var n = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            r = 500,
            i = 500,
            a = function(t) {
                return t.x
            },
            o = function(t) {
                return t.y
            },
            s = Math.floor(1e4 * Math.random()),
            l = null,
            u = t.utils.defaultColor(),
            c = d3.format(",.2f"),
            d = !0,
            f = !1,
            p = "key",
            h = .02,
            g = !1,
            v = !1,
            m = !0,
            y = 0,
            x = !1,
            b = !1,
            k = !1,
            w = !1,
            M = 0,
            A = .5,
            C = [],
            S = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMouseover", "elementMouseout", "elementMousemove", "renderEnd"),
            W = [],
            E = [],
            F = t.utils.renderWatch(S);
        return e.dispatch = S, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            arcsRadius: {
                get: function() {
                    return C
                },
                set: function(t) {
                    C = t
                }
            },
            width: {
                get: function() {
                    return r
                },
                set: function(t) {
                    r = t
                }
            },
            height: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i = t
                }
            },
            showLabels: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            title: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            titleOffset: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t
                }
            },
            labelThreshold: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            valueFormat: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            x: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            id: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            endAngle: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t
                }
            },
            startAngle: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = t
                }
            },
            padAngle: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t
                }
            },
            cornerRadius: {
                get: function() {
                    return M
                },
                set: function(t) {
                    M = t
                }
            },
            donutRatio: {
                get: function() {
                    return A
                },
                set: function(t) {
                    A = t
                }
            },
            labelsOutside: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            labelSunbeamLayout: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t
                }
            },
            donut: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            growOnHover: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            pieLabelsOutside: {
                get: function() {
                    return f
                },
                set: function(e) {
                    f = e, t.deprecated("pieLabelsOutside", "use labelsOutside instead")
                }
            },
            donutLabelsOutside: {
                get: function() {
                    return f
                },
                set: function(e) {
                    f = e, t.deprecated("donutLabelsOutside", "use labelsOutside instead")
                }
            },
            labelFormat: {
                get: function() {
                    return c
                },
                set: function(e) {
                    c = e, t.deprecated("labelFormat", "use valueFormat instead")
                }
            },
            margin: {
                get: function() {
                    return n
                },
                set: function(t) {
                    n.top = "undefined" != typeof t.top ? t.top : n.top, n.right = "undefined" != typeof t.right ? t.right : n.right, n.bottom = "undefined" != typeof t.bottom ? t.bottom : n.bottom, n.left = "undefined" != typeof t.left ? t.left : n.left
                }
            },
            y: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = d3.functor(t)
                }
            },
            color: {
                get: function() {
                    return u
                },
                set: function(e) {
                    u = t.utils.getColor(e)
                }
            },
            labelType: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t || "key"
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.pieChart = function() {
        "use strict";

        function e(i) {
            return v.reset(), v.models(n), i.each(function(i) {
                var c = d3.select(this);
                t.utils.initSVG(c);
                var p = t.utils.availableWidth(o, c, a),
                    h = t.utils.availableHeight(s, c, a);
                if (e.update = function() {
                        c.transition().call(e)
                    }, e.container = this, d.setter(y(i), e.update).getter(m(i)).update(), d.disabled = i.map(function(t) {
                        return !!t.disabled
                    }), !f) {
                    var v;
                    f = {};
                    for (v in d) d[v] instanceof Array ? f[v] = d[v].slice(0) : f[v] = d[v]
                }
                if (!i || !i.length) return t.utils.noData(e, c), e;
                c.selectAll(".nv-noData").remove();
                var x = c.selectAll("g.nv-wrap.nv-pieChart").data([i]),
                    b = x.enter().append("g").attr("class", "nvd3 nv-wrap nv-pieChart").append("g"),
                    k = x.select("g");
                if (b.append("g").attr("class", "nv-pieWrap"), b.append("g").attr("class", "nv-legendWrap"), l)
                    if ("top" === u) r.width(p).key(n.x()), x.select(".nv-legendWrap").datum(i).call(r), a.top != r.height() && (a.top = r.height(), h = t.utils.availableHeight(s, c, a)), x.select(".nv-legendWrap").attr("transform", "translate(0," + -a.top + ")");
                    else if ("right" === u) {
                    var w = t.models.legend().width();
                    w > p / 2 && (w = p / 2), r.height(h).key(n.x()), r.width(w), p -= r.width(), x.select(".nv-legendWrap").datum(i).call(r).attr("transform", "translate(" + p + ",0)")
                }
                x.attr("transform", "translate(" + a.left + "," + a.top + ")"), n.width(p).height(h);
                var M = k.select(".nv-pieWrap").datum([i]);
                d3.transition(M).call(n), r.dispatch.on("stateChange", function(t) {
                    for (var n in t) d[n] = t[n];
                    g.stateChange(d), e.update()
                }), g.on("changeState", function(t) {
                    "undefined" != typeof t.disabled && (i.forEach(function(e, n) {
                        e.disabled = t.disabled[n]
                    }), d.disabled = t.disabled), e.update()
                })
            }), v.renderEnd("pieChart immediate"), e
        }
        var n = t.models.pie(),
            r = t.models.legend(),
            i = t.models.tooltip(),
            a = {
                top: 30,
                right: 20,
                bottom: 20,
                left: 20
            },
            o = null,
            s = null,
            l = !0,
            u = "top",
            c = t.utils.defaultColor(),
            d = t.utils.state(),
            f = null,
            p = null,
            h = 250,
            g = d3.dispatch("stateChange", "changeState", "renderEnd");
        i.duration(0).headerEnabled(!1).valueFormatter(function(t, e) {
            return n.valueFormat()(t, e)
        });
        var v = t.utils.renderWatch(g),
            m = function(t) {
                return function() {
                    return {
                        active: t.map(function(t) {
                            return !t.disabled
                        })
                    }
                }
            },
            y = function(t) {
                return function(e) {
                    void 0 !== e.active && t.forEach(function(t, n) {
                        t.disabled = !e.active[n]
                    })
                }
            };
        return n.dispatch.on("elementMouseover.tooltip", function(t) {
            t.series = {
                key: e.x()(t.data),
                value: e.y()(t.data),
                color: t.color
            }, i.data(t).hidden(!1)
        }), n.dispatch.on("elementMouseout.tooltip", function(t) {
            i.hidden(!0)
        }), n.dispatch.on("elementMousemove.tooltip", function(t) {
            i()
        }), e.legend = r, e.dispatch = g, e.pie = n, e.tooltip = i, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            noData: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            showLegend: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            legendPosition: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u = t
                }
            },
            defaultState: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            color: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t, r.color(c), n.color(c)
                }
            },
            duration: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t, v.reset(h)
                }
            },
            margin: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a.top = void 0 !== t.top ? t.top : a.top, a.right = void 0 !== t.right ? t.right : a.right, a.bottom = void 0 !== t.bottom ? t.bottom : a.bottom, a.left = void 0 !== t.left ? t.left : a.left
                }
            }
        }), t.utils.inheritOptions(e, n), t.utils.initOptions(e), e
    }, t.models.scatter = function() {
        "use strict";

        function e(z) {
            return G.reset(), z.each(function(z) {
                function X() {
                    if (H = !1, !w) return !1;
                    if (V === !0) {
                        var t = d3.merge(z.map(function(t, e) {
                            return t.values.map(function(t, n) {
                                var r = g(t, n),
                                    i = v(t, n);
                                return [f(r) + 1e-4 * Math.random(), p(i) + 1e-4 * Math.random(), e, n, t]
                            }).filter(function(t, e) {
                                return M(t[4], e)
                            })
                        }));
                        if (0 == t.length) return !1;
                        t.length < 3 && (t.push([f.range()[0] - 20, p.range()[0] - 20, null, null]), t.push([f.range()[1] + 20, p.range()[1] + 20, null, null]), t.push([f.range()[0] - 20, p.range()[0] + 20, null, null]), t.push([f.range()[1] + 20, p.range()[1] - 20, null, null]));
                        var e = d3.geom.polygon([
                                [-10, -10],
                                [-10, l + 10],
                                [s + 10, l + 10],
                                [s + 10, -10]
                            ]),
                            n = d3.geom.voronoi(t).map(function(n, r) {
                                return {
                                    data: e.clip(n),
                                    series: t[r][2],
                                    point: t[r][3]
                                }
                            });
                        K.select(".nv-point-paths").selectAll("path").remove();
                        var r = K.select(".nv-point-paths").selectAll("path").data(n),
                            i = r.enter().append("svg:path").attr("d", function(t) {
                                return t && t.data && 0 !== t.data.length ? "M" + t.data.join(",") + "Z" : "M 0 0"
                            }).attr("id", function(t, e) {
                                return "nv-path-" + e
                            }).attr("clip-path", function(t, e) {
                                return "url(#nv-clip-" + c + "-" + e + ")"
                            });
                        if (E && i.style("fill", d3.rgb(230, 230, 230)).style("fill-opacity", .4).style("stroke-opacity", 1).style("stroke", d3.rgb(200, 200, 200)), W) {
                            K.select(".nv-point-clips").selectAll("*").remove();
                            var a = K.select(".nv-point-clips").selectAll("clipPath").data(t);
                            a.enter().append("svg:clipPath").attr("id", function(t, e) {
                                return "nv-clip-" + c + "-" + e
                            }).append("svg:circle").attr("cx", function(t) {
                                return t[0]
                            }).attr("cy", function(t) {
                                return t[1]
                            }).attr("r", F)
                        }
                        var h = function(t, e) {
                            if (H) return 0;
                            var n = z[t.series];
                            if (void 0 !== n) {
                                var r = n.values[t.point];
                                r.color = u(n, t.series), r.x = g(r), r.y = v(r);
                                var i = d.node().getBoundingClientRect(),
                                    a = window.pageYOffset || document.documentElement.scrollTop,
                                    s = window.pageXOffset || document.documentElement.scrollLeft,
                                    l = {
                                        left: f(g(r, t.point)) + i.left + s + o.left + 10,
                                        top: p(v(r, t.point)) + i.top + a + o.top + 10
                                    };
                                e({
                                    point: r,
                                    series: n,
                                    pos: l,
                                    relativePos: [f(g(r, t.point)) + o.left, p(v(r, t.point)) + o.top],
                                    seriesIndex: t.series,
                                    pointIndex: t.point
                                })
                            }
                        };
                        r.on("click", function(t) {
                            h(t, T.elementClick)
                        }).on("dblclick", function(t) {
                            h(t, T.elementDblClick)
                        }).on("mouseover", function(t) {
                            h(t, T.elementMouseover)
                        }).on("mouseout", function(t, e) {
                            h(t, T.elementMouseout)
                        })
                    } else K.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click", function(t, e) {
                        if (H || !z[t.series]) return 0;
                        var n = z[t.series],
                            r = n.values[e];
                        T.elementClick({
                            point: r,
                            series: n,
                            pos: [f(g(r, e)) + o.left, p(v(r, e)) + o.top],
                            relativePos: [f(g(r, e)) + o.left, p(v(r, e)) + o.top],
                            seriesIndex: t.series,
                            pointIndex: e
                        })
                    }).on("dblclick", function(t, e) {
                        if (H || !z[t.series]) return 0;
                        var n = z[t.series],
                            r = n.values[e];
                        T.elementDblClick({
                            point: r,
                            series: n,
                            pos: [f(g(r, e)) + o.left, p(v(r, e)) + o.top],
                            relativePos: [f(g(r, e)) + o.left, p(v(r, e)) + o.top],
                            seriesIndex: t.series,
                            pointIndex: e
                        })
                    }).on("mouseover", function(t, e) {
                        if (H || !z[t.series]) return 0;
                        var n = z[t.series],
                            r = n.values[e];
                        T.elementMouseover({
                            point: r,
                            series: n,
                            pos: [f(g(r, e)) + o.left, p(v(r, e)) + o.top],
                            relativePos: [f(g(r, e)) + o.left, p(v(r, e)) + o.top],
                            seriesIndex: t.series,
                            pointIndex: e,
                            color: u(t, e)
                        })
                    }).on("mouseout", function(t, e) {
                        if (H || !z[t.series]) return 0;
                        var n = z[t.series],
                            r = n.values[e];
                        T.elementMouseout({
                            point: r,
                            series: n,
                            pos: [f(g(r, e)) + o.left, p(v(r, e)) + o.top],
                            relativePos: [f(g(r, e)) + o.left, p(v(r, e)) + o.top],
                            seriesIndex: t.series,
                            pointIndex: e,
                            color: u(t, e)
                        })
                    })
                }
                d = d3.select(this);
                var j = t.utils.availableWidth(s, d, o),
                    R = t.utils.availableHeight(l, d, o);
                t.utils.initSVG(d), z.forEach(function(t, e) {
                    t.values.forEach(function(t) {
                        t.series = e
                    })
                });
                var Z = _ && D && B ? [] : d3.merge(z.map(function(t) {
                    return t.values.map(function(t, e) {
                        return {
                            x: g(t, e),
                            y: v(t, e),
                            size: m(t, e)
                        }
                    })
                }));
                if (f.domain(_ || d3.extent(Z.map(function(t) {
                        return t.x
                    }).concat(x))), A && z[0] ? f.range(O || [(j * C + j) / (2 * z[0].values.length), j - j * (1 + C) / (2 * z[0].values.length)]) : f.range(O || [0, j]), "o" === e.yScale().name) {
                    var Q = d3.min(Z.map(function(t) {
                        return 0 !== t.y ? t.y : void 0
                    }));
                    p.clamp(!0).domain(D || d3.extent(Z.map(function(t) {
                        return 0 !== t.y ? t.y : .1 * Q
                    }).concat(b))).range(N || [R, 0])
                } else p.domain(D || d3.extent(Z.map(function(t) {
                    return t.y
                }).concat(b))).range(N || [R, 0]);
                h.domain(B || d3.extent(Z.map(function(t) {
                    return t.size
                }).concat(k))).range(P || Y), L = f.domain()[0] === f.domain()[1] || p.domain()[0] === p.domain()[1], f.domain()[0] === f.domain()[1] && (f.domain()[0] ? f.domain([f.domain()[0] - .01 * f.domain()[0], f.domain()[1] + .01 * f.domain()[1]]) : f.domain([-1, 1])), p.domain()[0] === p.domain()[1] && (p.domain()[0] ? p.domain([p.domain()[0] - .01 * p.domain()[0], p.domain()[1] + .01 * p.domain()[1]]) : p.domain([-1, 1])), isNaN(f.domain()[0]) && f.domain([-1, 1]), isNaN(p.domain()[0]) && p.domain([-1, 1]), n = n || f, r = r || p, i = i || h;
                var K = d.selectAll("g.nv-wrap.nv-scatter").data([z]),
                    q = K.enter().append("g").attr("class", "nvd3 nv-wrap nv-scatter nv-chart-" + c),
                    U = q.append("defs"),
                    J = q.append("g"),
                    $ = K.select("g");
                K.classed("nv-single-point", L), J.append("g").attr("class", "nv-groups"), J.append("g").attr("class", "nv-point-paths"), q.append("g").attr("class", "nv-point-clips"), K.attr("transform", "translate(" + o.left + "," + o.top + ")"), U.append("clipPath").attr("id", "nv-edge-clip-" + c).append("rect"), K.select("#nv-edge-clip-" + c + " rect").attr("width", j).attr("height", R > 0 ? R : 0), $.attr("clip-path", S ? "url(#nv-edge-clip-" + c + ")" : ""), H = !0;
                var tt = K.select(".nv-groups").selectAll(".nv-group").data(function(t) {
                    return t
                }, function(t) {
                    return t.key
                });
                tt.enter().append("g").style("stroke-opacity", 1e-6).style("fill-opacity", 1e-6), tt.exit().remove(), tt.attr("class", function(t, e) {
                    return (t.classed || "") + " nv-group nv-series-" + e
                }).classed("hover", function(t) {
                    return t.hover
                }), tt.watchTransition(G, "scatter: groups").style("fill", function(t, e) {
                    return u(t, e)
                }).style("stroke", function(t, e) {
                    return u(t, e)
                }).style("stroke-opacity", 1).style("fill-opacity", .5);
                var et = tt.selectAll("path.nv-point").data(function(t) {
                    return t.values.map(function(t, e) {
                        return [t, e]
                    }).filter(function(t, e) {
                        return M(t[0], e)
                    })
                });
                et.enter().append("path").style("fill", function(t) {
                    return t.color
                }).style("stroke", function(t) {
                    return t.color
                }).attr("transform", function(e) {
                    return "translate(" + t.utils.NaNtoZero(n(g(e[0], e[1]))) + "," + t.utils.NaNtoZero(r(v(e[0], e[1]))) + ")"
                }).attr("d", t.utils.symbol().type(function(t) {
                    return y(t[0])
                }).size(function(t) {
                    return h(m(t[0], t[1]))
                })), et.exit().remove(), tt.exit().selectAll("path.nv-point").watchTransition(G, "scatter exit").attr("transform", function(e) {
                    return "translate(" + t.utils.NaNtoZero(f(g(e[0], e[1]))) + "," + t.utils.NaNtoZero(p(v(e[0], e[1]))) + ")"
                }).remove(), et.each(function(t) {
                    d3.select(this).classed("nv-point", !0).classed("nv-point-" + t[1], !0).classed("nv-noninteractive", !w).classed("hover", !1)
                }), et.watchTransition(G, "scatter points").attr("transform", function(e) {
                    return "translate(" + t.utils.NaNtoZero(f(g(e[0], e[1]))) + "," + t.utils.NaNtoZero(p(v(e[0], e[1]))) + ")"
                }).attr("d", t.utils.symbol().type(function(t) {
                    return y(t[0])
                }).size(function(t) {
                    return h(m(t[0], t[1]))
                })), I ? (clearTimeout(a), a = setTimeout(X, I)) : X(), n = f.copy(), r = p.copy(), i = h.copy()
            }), G.renderEnd("scatter immediate"), e
        }
        var n, r, i, a, o = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            s = null,
            l = null,
            u = t.utils.defaultColor(),
            c = Math.floor(1e5 * Math.random()),
            d = null,
            f = d3.scale.linear(),
            p = d3.scale.linear(),
            h = d3.scale.linear(),
            g = function(t) {
                return t.x
            },
            v = function(t) {
                return t.y
            },
            m = function(t) {
                return t.size || 1
            },
            y = function(t) {
                return t.shape || "circle"
            },
            x = [],
            b = [],
            k = [],
            w = !0,
            M = function(t) {
                return !t.notActive
            },
            A = !1,
            C = .1,
            S = !1,
            W = !0,
            E = !1,
            F = function() {
                return 25
            },
            _ = null,
            D = null,
            O = null,
            N = null,
            B = null,
            P = null,
            L = !1,
            T = d3.dispatch("elementClick", "elementDblClick", "elementMouseover", "elementMouseout", "renderEnd"),
            V = !0,
            z = 250,
            I = 300,
            H = !1,
            G = t.utils.renderWatch(T, z),
            Y = [16, 256];
        return e.dispatch = T, e.options = t.utils.optionsFunc.bind(e), e._calls = new function() {
            this.clearHighlights = function() {
                return t.dom.write(function() {
                    d.selectAll(".nv-point.hover").classed("hover", !1)
                }), null
            }, this.highlightPoint = function(e, n, r) {
                t.dom.write(function() {
                    d.select(".nv-groups").selectAll(".nv-series-" + e).selectAll(".nv-point-" + n).classed("hover", r)
                })
            }
        }, T.on("elementMouseover.point", function(t) {
            w && e._calls.highlightPoint(t.seriesIndex, t.pointIndex, !0)
        }), T.on("elementMouseout.point", function(t) {
            w && e._calls.highlightPoint(t.seriesIndex, t.pointIndex, !1)
        }), e._options = Object.create({}, {
            width: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            height: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            xScale: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            yScale: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            pointScale: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            xDomain: {
                get: function() {
                    return _
                },
                set: function(t) {
                    _ = t
                }
            },
            yDomain: {
                get: function() {
                    return D
                },
                set: function(t) {
                    D = t
                }
            },
            pointDomain: {
                get: function() {
                    return B
                },
                set: function(t) {
                    B = t
                }
            },
            xRange: {
                get: function() {
                    return O
                },
                set: function(t) {
                    O = t
                }
            },
            yRange: {
                get: function() {
                    return N
                },
                set: function(t) {
                    N = t
                }
            },
            pointRange: {
                get: function() {
                    return P
                },
                set: function(t) {
                    P = t
                }
            },
            forceX: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t
                }
            },
            forceY: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = t
                }
            },
            forcePoint: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t
                }
            },
            interactive: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t
                }
            },
            pointActive: {
                get: function() {
                    return M
                },
                set: function(t) {
                    M = t
                }
            },
            padDataOuter: {
                get: function() {
                    return C
                },
                set: function(t) {
                    C = t
                }
            },
            padData: {
                get: function() {
                    return A
                },
                set: function(t) {
                    A = t
                }
            },
            clipEdge: {
                get: function() {
                    return S
                },
                set: function(t) {
                    S = t
                }
            },
            clipVoronoi: {
                get: function() {
                    return W
                },
                set: function(t) {
                    W = t
                }
            },
            clipRadius: {
                get: function() {
                    return F
                },
                set: function(t) {
                    F = t
                }
            },
            showVoronoi: {
                get: function() {
                    return E
                },
                set: function(t) {
                    E = t
                }
            },
            id: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            interactiveUpdateDelay: {
                get: function() {
                    return I
                },
                set: function(t) {
                    I = t
                }
            },
            x: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = d3.functor(t)
                }
            },
            y: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = d3.functor(t)
                }
            },
            pointSize: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = d3.functor(t)
                }
            },
            pointShape: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = d3.functor(t)
                }
            },
            margin: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o.top = void 0 !== t.top ? t.top : o.top, o.right = void 0 !== t.right ? t.right : o.right, o.bottom = void 0 !== t.bottom ? t.bottom : o.bottom, o.left = void 0 !== t.left ? t.left : o.left
                }
            },
            duration: {
                get: function() {
                    return z
                },
                set: function(t) {
                    z = t, G.reset(z)
                }
            },
            color: {
                get: function() {
                    return u
                },
                set: function(e) {
                    u = t.utils.getColor(e)
                }
            },
            useVoronoi: {
                get: function() {
                    return V
                },
                set: function(t) {
                    V = t, V === !1 && (W = !1)
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.scatterChart = function() {
        "use strict";

        function e(C) {
            return F.reset(), F.models(n), x && F.models(r), b && F.models(i), v && F.models(o), m && F.models(s), C.each(function(C) {
                f = d3.select(this), t.utils.initSVG(f);
                var O = t.utils.availableWidth(c, f, u),
                    N = t.utils.availableHeight(d, f, u);
                if (e.update = function() {
                        0 === S ? f.call(e) : f.transition().duration(S).call(e)
                    }, e.container = this, w.setter(D(C), e.update).getter(_(C)).update(), w.disabled = C.map(function(t) {
                        return !!t.disabled
                    }), !M) {
                    var B;
                    M = {};
                    for (B in w) w[B] instanceof Array ? M[B] = w[B].slice(0) : M[B] = w[B]
                }
                if (!(C && C.length && C.filter(function(t) {
                        return t.values.length
                    }).length)) return t.utils.noData(e, f), F.renderEnd("scatter immediate"), e;
                f.selectAll(".nv-noData").remove(), h = n.xScale(), g = n.yScale();
                var P = f.selectAll("g.nv-wrap.nv-scatterChart").data([C]),
                    L = P.enter().append("g").attr("class", "nvd3 nv-wrap nv-scatterChart nv-chart-" + n.id()),
                    T = L.append("g"),
                    V = P.select("g");
                if (T.append("rect").attr("class", "nvd3 nv-background").style("pointer-events", "none"), T.append("g").attr("class", "nv-x nv-axis"), T.append("g").attr("class", "nv-y nv-axis"), T.append("g").attr("class", "nv-scatterWrap"), T.append("g").attr("class", "nv-regressionLinesWrap"), T.append("g").attr("class", "nv-distWrap"), T.append("g").attr("class", "nv-legendWrap"), k && V.select(".nv-y.nv-axis").attr("transform", "translate(" + O + ",0)"), y) {
                    var z = O;
                    a.width(z), P.select(".nv-legendWrap").datum(C).call(a), u.top != a.height() && (u.top = a.height(), N = t.utils.availableHeight(d, f, u)), P.select(".nv-legendWrap").attr("transform", "translate(0," + -u.top + ")")
                }
                P.attr("transform", "translate(" + u.left + "," + u.top + ")"), n.width(O).height(N).color(C.map(function(t, e) {
                    return t.color = t.color || p(t, e), t.color
                }).filter(function(t, e) {
                    return !C[e].disabled
                })), P.select(".nv-scatterWrap").datum(C.filter(function(t) {
                    return !t.disabled
                })).call(n), P.select(".nv-regressionLinesWrap").attr("clip-path", "url(#nv-edge-clip-" + n.id() + ")");
                var I = P.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t) {
                    return t
                });
                I.enter().append("g").attr("class", "nv-regLines");
                var H = I.selectAll(".nv-regLine").data(function(t) {
                    return [t]
                });
                H.enter().append("line").attr("class", "nv-regLine").style("stroke-opacity", 0), H.filter(function(t) {
                    return t.intercept && t.slope
                }).watchTransition(F, "scatterPlusLineChart: regline").attr("x1", h.range()[0]).attr("x2", h.range()[1]).attr("y1", function(t, e) {
                    return g(h.domain()[0] * t.slope + t.intercept)
                }).attr("y2", function(t, e) {
                    return g(h.domain()[1] * t.slope + t.intercept)
                }).style("stroke", function(t, e, n) {
                    return p(t, n)
                }).style("stroke-opacity", function(t, e) {
                    return t.disabled || "undefined" == typeof t.slope || "undefined" == typeof t.intercept ? 0 : 1
                }), x && (r.scale(h)._ticks(t.utils.calcTicksX(O / 100, C)).tickSize(-N, 0), V.select(".nv-x.nv-axis").attr("transform", "translate(0," + g.range()[0] + ")").call(r)), b && (i.scale(g)._ticks(t.utils.calcTicksY(N / 36, C)).tickSize(-O, 0), V.select(".nv-y.nv-axis").call(i)), v && (o.getData(n.x()).scale(h).width(O).color(C.map(function(t, e) {
                    return t.color || p(t, e)
                }).filter(function(t, e) {
                    return !C[e].disabled
                })), T.select(".nv-distWrap").append("g").attr("class", "nv-distributionX"), V.select(".nv-distributionX").attr("transform", "translate(0," + g.range()[0] + ")").datum(C.filter(function(t) {
                    return !t.disabled
                })).call(o)), m && (s.getData(n.y()).scale(g).width(N).color(C.map(function(t, e) {
                    return t.color || p(t, e)
                }).filter(function(t, e) {
                    return !C[e].disabled
                })), T.select(".nv-distWrap").append("g").attr("class", "nv-distributionY"), V.select(".nv-distributionY").attr("transform", "translate(" + (k ? O : -s.size()) + ",0)").datum(C.filter(function(t) {
                    return !t.disabled
                })).call(s)), a.dispatch.on("stateChange", function(t) {
                    for (var n in t) w[n] = t[n];
                    A.stateChange(w), e.update()
                }), A.on("changeState", function(t) {
                    "undefined" != typeof t.disabled && (C.forEach(function(e, n) {
                        e.disabled = t.disabled[n]
                    }), w.disabled = t.disabled), e.update()
                }), n.dispatch.on("elementMouseout.tooltip", function(t) {
                    l.hidden(!0), f.select(".nv-chart-" + n.id() + " .nv-series-" + t.seriesIndex + " .nv-distx-" + t.pointIndex).attr("y1", 0), f.select(".nv-chart-" + n.id() + " .nv-series-" + t.seriesIndex + " .nv-disty-" + t.pointIndex).attr("x2", s.size())
                }), n.dispatch.on("elementMouseover.tooltip", function(t) {
                    f.select(".nv-series-" + t.seriesIndex + " .nv-distx-" + t.pointIndex).attr("y1", t.relativePos[1] - N), f.select(".nv-series-" + t.seriesIndex + " .nv-disty-" + t.pointIndex).attr("x2", t.relativePos[0] + o.size()), l.data(t).hidden(!1)
                }), W = h.copy(), E = g.copy()
            }), F.renderEnd("scatter with line immediate"), e
        }
        var n = t.models.scatter(),
            r = t.models.axis(),
            i = t.models.axis(),
            a = t.models.legend(),
            o = t.models.distribution(),
            s = t.models.distribution(),
            l = t.models.tooltip(),
            u = {
                top: 30,
                right: 20,
                bottom: 50,
                left: 75
            },
            c = null,
            d = null,
            f = null,
            p = t.utils.defaultColor(),
            h = n.xScale(),
            g = n.yScale(),
            v = !1,
            m = !1,
            y = !0,
            x = !0,
            b = !0,
            k = !1,
            w = t.utils.state(),
            M = null,
            A = d3.dispatch("stateChange", "changeState", "renderEnd"),
            C = null,
            S = 250;
        n.xScale(h).yScale(g), r.orient("bottom").tickPadding(10), i.orient(k ? "right" : "left").tickPadding(10), o.axis("x"), s.axis("y"), l.headerFormatter(function(t, e) {
            return r.tickFormat()(t, e)
        }).valueFormatter(function(t, e) {
            return i.tickFormat()(t, e)
        });
        var W, E, F = t.utils.renderWatch(A, S),
            _ = function(t) {
                return function() {
                    return {
                        active: t.map(function(t) {
                            return !t.disabled
                        })
                    }
                }
            },
            D = function(t) {
                return function(e) {
                    void 0 !== e.active && t.forEach(function(t, n) {
                        t.disabled = !e.active[n]
                    })
                }
            };
        return e.dispatch = A, e.scatter = n, e.legend = a, e.xAxis = r, e.yAxis = i, e.distX = o, e.distY = s, e.tooltip = l, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            height: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            container: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            showDistX: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            showDistY: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            showLegend: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t
                }
            },
            showXAxis: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t
                }
            },
            showYAxis: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = t
                }
            },
            defaultState: {
                get: function() {
                    return M
                },
                set: function(t) {
                    M = t
                }
            },
            noData: {
                get: function() {
                    return C
                },
                set: function(t) {
                    C = t
                }
            },
            duration: {
                get: function() {
                    return S
                },
                set: function(t) {
                    S = t
                }
            },
            margin: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u.top = void 0 !== t.top ? t.top : u.top, u.right = void 0 !== t.right ? t.right : u.right, u.bottom = void 0 !== t.bottom ? t.bottom : u.bottom, u.left = void 0 !== t.left ? t.left : u.left
                }
            },
            rightAlignYAxis: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t, i.orient(t ? "right" : "left")
                }
            },
            color: {
                get: function() {
                    return p
                },
                set: function(e) {
                    p = t.utils.getColor(e), a.color(p), o.color(p), s.color(p)
                }
            }
        }), t.utils.inheritOptions(e, n), t.utils.initOptions(e), e
    }, t.models.sparkline = function() {
        "use strict";

        function e(c) {
            return m.reset(), c.each(function(e) {
                var c = s - o.left - o.right,
                    v = l - o.top - o.bottom;
                u = d3.select(this), t.utils.initSVG(u), d.domain(n || d3.extent(e, p)).range(i || [0, c]), f.domain(r || d3.extent(e, h)).range(a || [v, 0]);
                var m = u.selectAll("g.nv-wrap.nv-sparkline").data([e]),
                    y = m.enter().append("g").attr("class", "nvd3 nv-wrap nv-sparkline");
                y.append("g"), m.select("g");
                m.attr("transform", "translate(" + o.left + "," + o.top + ")");
                var x = m.selectAll("path").data(function(t) {
                    return [t]
                });
                x.enter().append("path"), x.exit().remove(), x.style("stroke", function(t, e) {
                    return t.color || g(t, e)
                }).attr("d", d3.svg.line().x(function(t, e) {
                    return d(p(t, e))
                }).y(function(t, e) {
                    return f(h(t, e))
                }));
                var b = m.selectAll("circle.nv-point").data(function(t) {
                    function e(e) {
                        if (-1 != e) {
                            var n = t[e];
                            return n.pointIndex = e, n
                        }
                        return null
                    }
                    var n = t.map(function(t, e) {
                            return h(t, e)
                        }),
                        r = e(n.lastIndexOf(f.domain()[1])),
                        i = e(n.indexOf(f.domain()[0])),
                        a = e(n.length - 1);
                    return [i, r, a].filter(function(t) {
                        return null != t
                    })
                });
                b.enter().append("circle"), b.exit().remove(), b.attr("cx", function(t, e) {
                    return d(p(t, t.pointIndex))
                }).attr("cy", function(t, e) {
                    return f(h(t, t.pointIndex))
                }).attr("r", 2).attr("class", function(t, e) {
                    return p(t, t.pointIndex) == d.domain()[1] ? "nv-point nv-currentValue" : h(t, t.pointIndex) == f.domain()[0] ? "nv-point nv-minValue" : "nv-point nv-maxValue"
                })
            }), m.renderEnd("sparkline immediate"), e
        }
        var n, r, i, a, o = {
                top: 2,
                right: 0,
                bottom: 2,
                left: 0
            },
            s = 400,
            l = 32,
            u = null,
            c = !0,
            d = d3.scale.linear(),
            f = d3.scale.linear(),
            p = function(t) {
                return t.x
            },
            h = function(t) {
                return t.y
            },
            g = t.utils.getColor(["#000"]),
            v = d3.dispatch("renderEnd"),
            m = t.utils.renderWatch(v);
        return e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            height: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            xDomain: {
                get: function() {
                    return n
                },
                set: function(t) {
                    n = t
                }
            },
            yDomain: {
                get: function() {
                    return r
                },
                set: function(t) {
                    r = t
                }
            },
            xRange: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i = t
                }
            },
            yRange: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            xScale: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            yScale: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            animate: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            x: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = d3.functor(t)
                }
            },
            y: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = d3.functor(t)
                }
            },
            margin: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o.top = void 0 !== t.top ? t.top : o.top, o.right = void 0 !== t.right ? t.right : o.right, o.bottom = void 0 !== t.bottom ? t.bottom : o.bottom, o.left = void 0 !== t.left ? t.left : o.left
                }
            },
            color: {
                get: function() {
                    return g
                },
                set: function(e) {
                    g = t.utils.getColor(e)
                }
            }
        }), e.dispatch = v, t.utils.initOptions(e), e
    }, t.models.sparklinePlus = function() {
        "use strict";

        function e(g) {
            return m.reset(), m.models(i), g.each(function(g) {
                function v() {
                    if (!u) {
                        var t = C.selectAll(".nv-hoverValue").data(l),
                            e = t.enter().append("g").attr("class", "nv-hoverValue").style("stroke-opacity", 0).style("fill-opacity", 0);
                        t.exit().transition().duration(250).style("stroke-opacity", 0).style("fill-opacity", 0).remove(), t.attr("transform", function(t) {
                            return "translate(" + n(i.x()(g[t], t)) + ",0)"
                        }).transition().duration(250).style("stroke-opacity", 1).style("fill-opacity", 1), l.length && (e.append("line").attr("x1", 0).attr("y1", -a.top).attr("x2", 0).attr("y2", b), e.append("text").attr("class", "nv-xValue").attr("x", -6).attr("y", -a.top).attr("text-anchor", "end").attr("dy", ".9em"), C.select(".nv-hoverValue .nv-xValue").text(c(i.x()(g[l[0]], l[0]))), e.append("text").attr("class", "nv-yValue").attr("x", 6).attr("y", -a.top).attr("text-anchor", "start").attr("dy", ".9em"), C.select(".nv-hoverValue .nv-yValue").text(d(i.y()(g[l[0]], l[0]))))
                    }
                }

                function m() {
                    function t(t, e) {
                        for (var n = Math.abs(i.x()(t[0], 0) - e), r = 0, a = 0; a < t.length; a++) Math.abs(i.x()(t[a], a) - e) < n && (n = Math.abs(i.x()(t[a], a) - e), r = a);
                        return r
                    }
                    if (!u) {
                        var e = d3.mouse(this)[0] - a.left;
                        l = [t(g, Math.round(n.invert(e)))], v()
                    }
                }
                var y = d3.select(this);
                t.utils.initSVG(y);
                var x = t.utils.availableWidth(o, y, a),
                    b = t.utils.availableHeight(s, y, a);
                if (e.update = function() {
                        y.call(e)
                    }, e.container = this, !g || !g.length) return t.utils.noData(e, y), e;
                y.selectAll(".nv-noData").remove();
                var k = i.y()(g[g.length - 1], g.length - 1);
                n = i.xScale(), r = i.yScale();
                var w = y.selectAll("g.nv-wrap.nv-sparklineplus").data([g]),
                    M = w.enter().append("g").attr("class", "nvd3 nv-wrap nv-sparklineplus"),
                    A = M.append("g"),
                    C = w.select("g");
                A.append("g").attr("class", "nv-sparklineWrap"), A.append("g").attr("class", "nv-valueWrap"), A.append("g").attr("class", "nv-hoverArea"), w.attr("transform", "translate(" + a.left + "," + a.top + ")");
                var S = C.select(".nv-sparklineWrap");
                if (i.width(x).height(b), S.call(i), f) {
                    var W = C.select(".nv-valueWrap"),
                        E = W.selectAll(".nv-currentValue").data([k]);
                    E.enter().append("text").attr("class", "nv-currentValue").attr("dx", h ? -8 : 8).attr("dy", ".9em").style("text-anchor", h ? "end" : "start"), E.attr("x", x + (h ? a.right : 0)).attr("y", p ? function(t) {
                        return r(t)
                    } : 0).style("fill", i.color()(g[g.length - 1], g.length - 1)).text(d(k))
                }
                A.select(".nv-hoverArea").append("rect").on("mousemove", m).on("click", function() {
                    u = !u
                }).on("mouseout", function() {
                    l = [], v()
                }), C.select(".nv-hoverArea rect").attr("transform", function(t) {
                    return "translate(" + -a.left + "," + -a.top + ")"
                }).attr("width", x + a.left + a.right).attr("height", b + a.top)
            }), m.renderEnd("sparklinePlus immediate"), e
        }
        var n, r, i = t.models.sparkline(),
            a = {
                top: 15,
                right: 100,
                bottom: 10,
                left: 50
            },
            o = null,
            s = null,
            l = [],
            u = !1,
            c = d3.format(",r"),
            d = d3.format(",.2f"),
            f = !0,
            p = !0,
            h = !1,
            g = null,
            v = d3.dispatch("renderEnd"),
            m = t.utils.renderWatch(v);
        return e.dispatch = v, e.sparkline = i, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            height: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            xTickFormat: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            yTickFormat: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = t
                }
            },
            showLastValue: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            alignValue: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            rightAlignValue: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            noData: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            margin: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a.top = void 0 !== t.top ? t.top : a.top, a.right = void 0 !== t.right ? t.right : a.right, a.bottom = void 0 !== t.bottom ? t.bottom : a.bottom, a.left = void 0 !== t.left ? t.left : a.left
                }
            }
        }), t.utils.inheritOptions(e, i), t.utils.initOptions(e), e
    }, t.models.stackedArea = function() {
        "use strict";

        function e(p) {
            return k.reset(), k.models(y), p.each(function(p) {
                var x = a - i.left - i.right,
                    w = o - i.top - i.bottom;
                u = d3.select(this), t.utils.initSVG(u), n = y.xScale(), r = y.yScale();
                var M = p;
                p.forEach(function(t, e) {
                    t.seriesIndex = e, t.values = t.values.map(function(t, n) {
                        return t.index = n, t.seriesIndex = e, t
                    })
                });
                var A = p.filter(function(t) {
                    return !t.disabled
                });
                p = d3.layout.stack().order(g).offset(h).values(function(t) {
                    return t.values
                }).x(c).y(d).out(function(t, e, n) {
                    t.display = {
                        y: n,
                        y0: e
                    }
                })(A);
                var C = u.selectAll("g.nv-wrap.nv-stackedarea").data([p]),
                    S = C.enter().append("g").attr("class", "nvd3 nv-wrap nv-stackedarea"),
                    W = S.append("defs"),
                    E = S.append("g"),
                    F = C.select("g");
                E.append("g").attr("class", "nv-areaWrap"), E.append("g").attr("class", "nv-scatterWrap"), C.attr("transform", "translate(" + i.left + "," + i.top + ")"), 0 == y.forceY().length && y.forceY().push(0), y.width(x).height(w).x(c).y(function(t) {
                    return void 0 !== t.display ? t.display.y + t.display.y0 : void 0
                }).forceY([0]).color(p.map(function(t, e) {
                    return t.color = t.color || s(t, t.seriesIndex), t.color
                }));
                var _ = F.select(".nv-scatterWrap").datum(p);
                _.call(y), W.append("clipPath").attr("id", "nv-edge-clip-" + l).append("rect"), C.select("#nv-edge-clip-" + l + " rect").attr("width", x).attr("height", w), F.attr("clip-path", m ? "url(#nv-edge-clip-" + l + ")" : "");
                var D = d3.svg.area().defined(f).x(function(t, e) {
                        return n(c(t, e))
                    }).y0(function(t) {
                        return r(t.display.y0)
                    }).y1(function(t) {
                        return r(t.display.y + t.display.y0)
                    }).interpolate(v),
                    O = d3.svg.area().defined(f).x(function(t, e) {
                        return n(c(t, e))
                    }).y0(function(t) {
                        return r(t.display.y0)
                    }).y1(function(t) {
                        return r(t.display.y0)
                    }),
                    N = F.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t) {
                        return t
                    });
                N.enter().append("path").attr("class", function(t, e) {
                    return "nv-area nv-area-" + e
                }).attr("d", function(t, e) {
                    return O(t.values, t.seriesIndex)
                }).on("mouseover", function(t, e) {
                    d3.select(this).classed("hover", !0), b.areaMouseover({
                        point: t,
                        series: t.key,
                        pos: [d3.event.pageX, d3.event.pageY],
                        seriesIndex: t.seriesIndex
                    })
                }).on("mouseout", function(t, e) {
                    d3.select(this).classed("hover", !1), b.areaMouseout({
                        point: t,
                        series: t.key,
                        pos: [d3.event.pageX, d3.event.pageY],
                        seriesIndex: t.seriesIndex
                    })
                }).on("click", function(t, e) {
                    d3.select(this).classed("hover", !1), b.areaClick({
                        point: t,
                        series: t.key,
                        pos: [d3.event.pageX, d3.event.pageY],
                        seriesIndex: t.seriesIndex
                    })
                }), N.exit().remove(), N.style("fill", function(t, e) {
                    return t.color || s(t, t.seriesIndex)
                }).style("stroke", function(t, e) {
                    return t.color || s(t, t.seriesIndex)
                }), N.watchTransition(k, "stackedArea path").attr("d", function(t, e) {
                    return D(t.values, e)
                }), y.dispatch.on("elementMouseover.area", function(t) {
                    F.select(".nv-chart-" + l + " .nv-area-" + t.seriesIndex).classed("hover", !0)
                }), y.dispatch.on("elementMouseout.area", function(t) {
                    F.select(".nv-chart-" + l + " .nv-area-" + t.seriesIndex).classed("hover", !1)
                }), e.d3_stackedOffset_stackPercent = function(t) {
                    var e, n, r, i = t.length,
                        a = t[0].length,
                        o = [];
                    for (n = 0; a > n; ++n) {
                        for (e = 0, r = 0; e < M.length; e++) r += d(M[e].values[n]);
                        if (r)
                            for (e = 0; i > e; e++) t[e][n][1] /= r;
                        else
                            for (e = 0; i > e; e++) t[e][n][1] = 0
                    }
                    for (n = 0; a > n; ++n) o[n] = 0;
                    return o
                }
            }), k.renderEnd("stackedArea immediate"), e
        }
        var n, r, i = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            a = 960,
            o = 500,
            s = t.utils.defaultColor(),
            l = Math.floor(1e5 * Math.random()),
            u = null,
            c = function(t) {
                return t.x
            },
            d = function(t) {
                return t.y
            },
            f = function(t, e) {
                return !isNaN(d(t, e)) && null !== d(t, e)
            },
            p = "stack",
            h = "zero",
            g = "default",
            v = "linear",
            m = !1,
            y = t.models.scatter(),
            x = 250,
            b = d3.dispatch("areaClick", "areaMouseover", "areaMouseout", "renderEnd", "elementClick", "elementMouseover", "elementMouseout");
        y.pointSize(2.2).pointDomain([2.2, 2.2]);
        var k = t.utils.renderWatch(b, x);
        return e.dispatch = b, e.scatter = y, y.dispatch.on("elementClick", function() {
            b.elementClick.apply(this, arguments)
        }), y.dispatch.on("elementMouseover", function() {
            b.elementMouseover.apply(this, arguments)
        }), y.dispatch.on("elementMouseout", function() {
            b.elementMouseout.apply(this, arguments)
        }), e.interpolate = function(t) {
            return arguments.length ? (v = t, e) : v
        }, e.duration = function(t) {
            return arguments.length ? (x = t, k.reset(x), y.duration(x), e) : x
        }, e.dispatch = b, e.scatter = y, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a = t
                }
            },
            height: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            defined: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            clipEdge: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            offset: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            order: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            interpolate: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            x: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = d3.functor(t)
                }
            },
            y: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d = d3.functor(t)
                }
            },
            margin: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i.top = void 0 !== t.top ? t.top : i.top, i.right = void 0 !== t.right ? t.right : i.right, i.bottom = void 0 !== t.bottom ? t.bottom : i.bottom, i.left = void 0 !== t.left ? t.left : i.left
                }
            },
            color: {
                get: function() {
                    return s
                },
                set: function(e) {
                    s = t.utils.getColor(e)
                }
            },
            style: {
                get: function() {
                    return p
                },
                set: function(t) {
                    switch (p = t) {
                        case "stack":
                            e.offset("zero"), e.order("default");
                            break;
                        case "stream":
                            e.offset("wiggle"), e.order("inside-out");
                            break;
                        case "stream-center":
                            e.offset("silhouette"), e.order("inside-out");
                            break;
                        case "expand":
                            e.offset("expand"), e.order("default");
                            break;
                        case "stack_percent":
                            e.offset(e.d3_stackedOffset_stackPercent), e.order("default")
                    }
                }
            },
            duration: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t, k.reset(x), y.duration(x)
                }
            }
        }), t.utils.inheritOptions(e, y), t.utils.initOptions(e), e
    }, t.models.stackedAreaChart = function() {
        "use strict";

        function e(c) {
            return N.reset(), N.models(i), m && N.models(a), y && N.models(o), c.each(function(c) {
                var C = d3.select(this),
                    N = this;
                t.utils.initSVG(C);
                var V = t.utils.availableWidth(f, C, d),
                    z = t.utils.availableHeight(p, C, d);
                if (e.update = function() {
                        C.transition().duration(_).call(e)
                    }, e.container = this, M.setter(L(c), e.update).getter(P(c)).update(), M.disabled = c.map(function(t) {
                        return !!t.disabled
                    }), !A) {
                    var I;
                    A = {};
                    for (I in M) M[I] instanceof Array ? A[I] = M[I].slice(0) : A[I] = M[I]
                }
                if (!(c && c.length && c.filter(function(t) {
                        return t.values.length
                    }).length)) return t.utils.noData(e, C), e;
                C.selectAll(".nv-noData").remove(), n = i.xScale(), r = i.yScale();
                var H = C.selectAll("g.nv-wrap.nv-stackedAreaChart").data([c]),
                    G = H.enter().append("g").attr("class", "nvd3 nv-wrap nv-stackedAreaChart").append("g"),
                    Y = H.select("g");
                if (G.append("rect").style("opacity", 0), G.append("g").attr("class", "nv-x nv-axis"), G.append("g").attr("class", "nv-y nv-axis"), G.append("g").attr("class", "nv-stackedWrap"), G.append("g").attr("class", "nv-legendWrap"), G.append("g").attr("class", "nv-controlsWrap"), G.append("g").attr("class", "nv-interactive"), Y.select("rect").attr("width", V).attr("height", z), v) {
                    var X = g ? V - W : V;
                    s.width(X), Y.select(".nv-legendWrap").datum(c).call(s), d.top != s.height() && (d.top = s.height(), z = t.utils.availableHeight(p, C, d)), Y.select(".nv-legendWrap").attr("transform", "translate(" + (V - X) + "," + -d.top + ")")
                }
                if (g) {
                    var j = [{
                        key: F.stacked || "Stacked",
                        metaKey: "Stacked",
                        disabled: "stack" != i.style(),
                        style: "stack"
                    }, {
                        key: F.stream || "Stream",
                        metaKey: "Stream",
                        disabled: "stream" != i.style(),
                        style: "stream"
                    }, {
                        key: F.expanded || "Expanded",
                        metaKey: "Expanded",
                        disabled: "expand" != i.style(),
                        style: "expand"
                    }, {
                        key: F.stack_percent || "Stack %",
                        metaKey: "Stack_Percent",
                        disabled: "stack_percent" != i.style(),
                        style: "stack_percent"
                    }];
                    W = E.length / 3 * 260, j = j.filter(function(t) {
                        return -1 !== E.indexOf(t.metaKey)
                    }), l.width(W).color(["#444", "#444", "#444"]), Y.select(".nv-controlsWrap").datum(j).call(l), d.top != Math.max(l.height(), s.height()) && (d.top = Math.max(l.height(), s.height()), z = t.utils.availableHeight(p, C, d)), Y.select(".nv-controlsWrap").attr("transform", "translate(0," + -d.top + ")")
                }
                H.attr("transform", "translate(" + d.left + "," + d.top + ")"), x && Y.select(".nv-y.nv-axis").attr("transform", "translate(" + V + ",0)"), b && (u.width(V).height(z).margin({
                    left: d.left,
                    top: d.top
                }).svgContainer(C).xScale(n), H.select(".nv-interactive").call(u)), i.width(V).height(z);
                var R = Y.select(".nv-stackedWrap").datum(c);
                if (R.transition().call(i), m && (a.scale(n)._ticks(t.utils.calcTicksX(V / 100, c)).tickSize(-z, 0), Y.select(".nv-x.nv-axis").attr("transform", "translate(0," + z + ")"), Y.select(".nv-x.nv-axis").transition().duration(0).call(a)), y) {
                    var Z;
                    if (Z = "wiggle" === i.offset() ? 0 : t.utils.calcTicksY(z / 36, c), o.scale(r)._ticks(Z).tickSize(-V, 0), "expand" === i.style() || "stack_percent" === i.style()) {
                        var Q = o.tickFormat();
                        D && Q === T || (D = Q), o.tickFormat(T)
                    } else D && (o.tickFormat(D), D = null);
                    Y.select(".nv-y.nv-axis").transition().duration(0).call(o)
                }
                i.dispatch.on("areaClick.toggle", function(t) {
                    1 === c.filter(function(t) {
                        return !t.disabled
                    }).length ? c.forEach(function(t) {
                        t.disabled = !1
                    }) : c.forEach(function(e, n) {
                        e.disabled = n != t.seriesIndex
                    }), M.disabled = c.map(function(t) {
                        return !!t.disabled
                    }), S.stateChange(M), e.update()
                }), s.dispatch.on("stateChange", function(t) {
                    for (var n in t) M[n] = t[n];
                    S.stateChange(M), e.update()
                }), l.dispatch.on("legendClick", function(t, n) {
                    t.disabled && (j = j.map(function(t) {
                        return t.disabled = !0, t
                    }), t.disabled = !1, i.style(t.style), M.style = i.style(), S.stateChange(M), e.update())
                }), u.dispatch.on("elementMousemove", function(n) {
                    i.clearHighlights();
                    var r, a, o, s = [],
                        l = 0;
                    if (c.filter(function(t, e) {
                            return t.seriesIndex = e, !t.disabled
                        }).forEach(function(u, c) {
                            a = t.interactiveBisect(u.values, n.pointXValue, e.x());
                            var d = u.values[a],
                                f = e.y()(d, a);
                            if (null != f && i.highlightPoint(c, a, !0), "undefined" != typeof d) {
                                "undefined" == typeof r && (r = d), "undefined" == typeof o && (o = e.xScale()(e.x()(d, a)));
                                var p = "expand" == i.style() ? d.display.y : e.y()(d, a);
                                s.push({
                                    key: u.key,
                                    value: p,
                                    color: h(u, u.seriesIndex),
                                    stackedValue: d.display
                                }), k && "expand" != i.style() && (l += p)
                            }
                        }), s.reverse(), s.length > 2) {
                        var d = e.yScale().invert(n.mouseY),
                            f = null;
                        s.forEach(function(t, e) {
                            d = Math.abs(d);
                            var n = Math.abs(t.stackedValue.y0),
                                r = Math.abs(t.stackedValue.y);
                            return d >= n && r + n >= d ? void(f = e) : void 0
                        }), null != f && (s[f].highlight = !0)
                    }
                    k && "expand" != i.style() && s.length >= 2 && s.push({
                        key: w,
                        value: l,
                        total: !0
                    });
                    var p = e.x()(r, a),
                        g = u.tooltip.valueFormatter();
                    "expand" === i.style() || "stack_percent" === i.style() ? (O || (O = g), g = d3.format(".1%")) : O && (g = O, O = null), u.tooltip.chartContainer(N.parentNode).valueFormatter(g).data({
                        value: p,
                        series: s
                    })(), u.renderGuideLine(o)
                }), u.dispatch.on("elementMouseout", function(t) {
                    i.clearHighlights()
                }), S.on("changeState", function(t) {
                    "undefined" != typeof t.disabled && c.length === t.disabled.length && (c.forEach(function(e, n) {
                        e.disabled = t.disabled[n]
                    }), M.disabled = t.disabled), "undefined" != typeof t.style && (i.style(t.style), B = t.style), e.update()
                })
            }), N.renderEnd("stacked Area chart immediate"), e
        }
        var n, r, i = t.models.stackedArea(),
            a = t.models.axis(),
            o = t.models.axis(),
            s = t.models.legend(),
            l = t.models.legend(),
            u = t.interactiveGuideline(),
            c = t.models.tooltip(),
            d = {
                top: 30,
                right: 25,
                bottom: 50,
                left: 60
            },
            f = null,
            p = null,
            h = t.utils.defaultColor(),
            g = !0,
            v = !0,
            m = !0,
            y = !0,
            x = !1,
            b = !1,
            k = !0,
            w = "TOTAL",
            M = t.utils.state(),
            A = null,
            C = null,
            S = d3.dispatch("stateChange", "changeState", "renderEnd"),
            W = 250,
            E = ["Stacked", "Stream", "Expanded"],
            F = {},
            _ = 250;
        M.style = i.style(), a.orient("bottom").tickPadding(7), o.orient(x ? "right" : "left"), c.headerFormatter(function(t, e) {
            return a.tickFormat()(t, e)
        }).valueFormatter(function(t, e) {
            return o.tickFormat()(t, e)
        }), u.tooltip.headerFormatter(function(t, e) {
            return a.tickFormat()(t, e)
        }).valueFormatter(function(t, e) {
            return o.tickFormat()(t, e)
        });
        var D = null,
            O = null;
        l.updateState(!1);
        var N = t.utils.renderWatch(S),
            B = i.style(),
            P = function(t) {
                return function() {
                    return {
                        active: t.map(function(t) {
                            return !t.disabled
                        }),
                        style: i.style()
                    }
                }
            },
            L = function(t) {
                return function(e) {
                    void 0 !== e.style && (B = e.style), void 0 !== e.active && t.forEach(function(t, n) {
                        t.disabled = !e.active[n]
                    })
                }
            },
            T = d3.format("%");
        return i.dispatch.on("elementMouseover.tooltip", function(t) {
            t.point.x = i.x()(t.point), t.point.y = i.y()(t.point), c.data(t).hidden(!1)
        }), i.dispatch.on("elementMouseout.tooltip", function(t) {
            c.hidden(!0)
        }), e.dispatch = S, e.stacked = i, e.legend = s, e.controls = l, e.xAxis = a, e.yAxis = o, e.interactiveLayer = u, e.tooltip = c, e.dispatch = S, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return f
                },
                set: function(t) {
                    f = t
                }
            },
            height: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = t
                }
            },
            showLegend: {
                get: function() {
                    return v
                },
                set: function(t) {
                    v = t
                }
            },
            showXAxis: {
                get: function() {
                    return m
                },
                set: function(t) {
                    m = t
                }
            },
            showYAxis: {
                get: function() {
                    return y
                },
                set: function(t) {
                    y = t
                }
            },
            defaultState: {
                get: function() {
                    return A
                },
                set: function(t) {
                    A = t
                }
            },
            noData: {
                get: function() {
                    return C
                },
                set: function(t) {
                    C = t
                }
            },
            showControls: {
                get: function() {
                    return g
                },
                set: function(t) {
                    g = t
                }
            },
            controlLabels: {
                get: function() {
                    return F
                },
                set: function(t) {
                    F = t
                }
            },
            controlOptions: {
                get: function() {
                    return E
                },
                set: function(t) {
                    E = t
                }
            },
            showTotalInTooltip: {
                get: function() {
                    return k
                },
                set: function(t) {
                    k = t
                }
            },
            totalLabel: {
                get: function() {
                    return w
                },
                set: function(t) {
                    w = t
                }
            },
            margin: {
                get: function() {
                    return d
                },
                set: function(t) {
                    d.top = void 0 !== t.top ? t.top : d.top, d.right = void 0 !== t.right ? t.right : d.right, d.bottom = void 0 !== t.bottom ? t.bottom : d.bottom, d.left = void 0 !== t.left ? t.left : d.left
                }
            },
            duration: {
                get: function() {
                    return _
                },
                set: function(t) {
                    _ = t, N.reset(_), i.duration(_), a.duration(_), o.duration(_)
                }
            },
            color: {
                get: function() {
                    return h
                },
                set: function(e) {
                    h = t.utils.getColor(e), s.color(h), i.color(h)
                }
            },
            rightAlignYAxis: {
                get: function() {
                    return x
                },
                set: function(t) {
                    x = t, o.orient(x ? "right" : "left")
                }
            },
            useInteractiveGuideline: {
                get: function() {
                    return b
                },
                set: function(t) {
                    b = !!t, e.interactive(!t), e.useVoronoi(!t), i.scatter.interactive(!t)
                }
            }
        }), t.utils.inheritOptions(e, i), t.utils.initOptions(e), e
    }, t.models.sunburst = function() {
        "use strict";

        function e(k) {
            return b.reset(), k.each(function(b) {
                function k(t) {
                    t.x0 = t.x, t.dx0 = t.dx
                }

                function w(t) {
                    var e = d3.interpolate(v.domain(), [t.x, t.x + t.dx]),
                        n = d3.interpolate(m.domain(), [t.y, 1]),
                        r = d3.interpolate(m.range(), [t.y ? 20 : 0, S]);
                    return function(t, i) {
                        return i ? function(e) {
                            return x(t)
                        } : function(i) {
                            return v.domain(e(i)), m.domain(n(i)).range(r(i)), x(t)
                        }
                    }
                }
                d = d3.select(this);
                var M, A = t.utils.availableWidth(o, d, a),
                    C = t.utils.availableHeight(s, d, a),
                    S = Math.min(A, C) / 2;
                t.utils.initSVG(d);
                var W = d.selectAll(".nv-wrap.nv-sunburst").data(b),
                    E = W.enter().append("g").attr("class", "nvd3 nv-wrap nv-sunburst nv-chart-" + c),
                    F = E.selectAll("nv-sunburst");
                e.update = function() {
                    0 === h ? d.call(e) : d.transition().duration(h).call(e)
                }, e.container = this, W.attr("transform", "translate(" + A / 2 + "," + C / 2 + ")"), d.on("click", function(t, e) {
                    g.chartClick({
                        data: t,
                        index: e,
                        pos: d3.event,
                        id: c
                    })
                }), m.range([0, S]), n = n || b, i = b[0], y.value(u[l] || u.count), M = F.data(y.nodes).enter().append("path").attr("d", x).style("fill", function(t) {
                    return t.color ? t.color : f(p ? (t.children ? t : t.parent).name : t.name)
                }).style("stroke", "#FFF").on("click", function(t) {
                    r !== n && n !== t && (r = n), n = t, M.transition().duration(h).attrTween("d", w(t))
                }).each(k).on("dblclick", function(t) {
                    r.parent == t && M.transition().duration(h).attrTween("d", w(i))
                }).each(k).on("mouseover", function(t, e) {
                    d3.select(this).classed("hover", !0).style("opacity", .8), g.elementMouseover({
                        data: t,
                        color: d3.select(this).style("fill")
                    })
                }).on("mouseout", function(t, e) {
                    d3.select(this).classed("hover", !1).style("opacity", 1), g.elementMouseout({
                        data: t
                    })
                }).on("mousemove", function(t, e) {
                    g.elementMousemove({
                        data: t
                    })
                })
            }), b.renderEnd("sunburst immediate"), e
        }
        var n, r, i, a = {
                top: 0,
                right: 0,
                bottom: 0,
                left: 0
            },
            o = null,
            s = null,
            l = "count",
            u = {
                count: function(t) {
                    return 1
                },
                size: function(t) {
                    return t.size
                }
            },
            c = Math.floor(1e4 * Math.random()),
            d = null,
            f = t.utils.defaultColor(),
            p = !0,
            h = 500,
            g = d3.dispatch("chartClick", "elementClick", "elementDblClick", "elementMousemove", "elementMouseover", "elementMouseout", "renderEnd"),
            v = d3.scale.linear().range([0, 2 * Math.PI]),
            m = d3.scale.sqrt(),
            y = d3.layout.partition().sort(null).value(function(t) {
                return 1
            }),
            x = d3.svg.arc().startAngle(function(t) {
                return Math.max(0, Math.min(2 * Math.PI, v(t.x)))
            }).endAngle(function(t) {
                return Math.max(0, Math.min(2 * Math.PI, v(t.x + t.dx)))
            }).innerRadius(function(t) {
                return Math.max(0, m(t.y))
            }).outerRadius(function(t) {
                return Math.max(0, m(t.y + t.dy))
            }),
            b = t.utils.renderWatch(g);
        return e.dispatch = g, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            width: {
                get: function() {
                    return o
                },
                set: function(t) {
                    o = t
                }
            },
            height: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t
                }
            },
            mode: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            id: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t
                }
            },
            duration: {
                get: function() {
                    return h
                },
                set: function(t) {
                    h = t
                }
            },
            groupColorByParent: {
                get: function() {
                    return p
                },
                set: function(t) {
                    p = !!t
                }
            },
            margin: {
                get: function() {
                    return a
                },
                set: function(t) {
                    a.top = void 0 != t.top ? t.top : a.top, a.right = void 0 != t.right ? t.right : a.right, a.bottom = void 0 != t.bottom ? t.bottom : a.bottom, a.left = void 0 != t.left ? t.left : a.left
                }
            },
            color: {
                get: function() {
                    return f
                },
                set: function(e) {
                    f = t.utils.getColor(e)
                }
            }
        }), t.utils.initOptions(e), e
    }, t.models.sunburstChart = function() {
        "use strict";

        function e(r) {
            return f.reset(), f.models(n), r.each(function(r) {
                var s = d3.select(this);
                t.utils.initSVG(s);
                var l = t.utils.availableWidth(a, s, i),
                    u = t.utils.availableHeight(o, s, i);
                if (e.update = function() {
                        0 === c ? s.call(e) : s.transition().duration(c).call(e)
                    }, e.container = this, !r || !r.length) return t.utils.noData(e, s), e;
                s.selectAll(".nv-noData").remove();
                var d = s.selectAll("g.nv-wrap.nv-sunburstChart").data(r),
                    f = d.enter().append("g").attr("class", "nvd3 nv-wrap nv-sunburstChart").append("g"),
                    p = d.select("g");
                f.append("g").attr("class", "nv-sunburstWrap"), d.attr("transform", "translate(" + i.left + "," + i.top + ")"), n.width(l).height(u);
                var h = p.select(".nv-sunburstWrap").datum(r);
                d3.transition(h).call(n)
            }), f.renderEnd("sunburstChart immediate"), e
        }
        var n = t.models.sunburst(),
            r = t.models.tooltip(),
            i = {
                top: 30,
                right: 20,
                bottom: 20,
                left: 20
            },
            a = null,
            o = null,
            s = t.utils.defaultColor(),
            l = (Math.round(1e5 * Math.random()), null),
            u = null,
            c = 250,
            d = d3.dispatch("stateChange", "changeState", "renderEnd");
        r.duration(0);
        var f = t.utils.renderWatch(d);
        return r.headerEnabled(!1).valueFormatter(function(t, e) {
            return t
        }), n.dispatch.on("elementMouseover.tooltip", function(t) {
            t.series = {
                key: t.data.name,
                value: t.data.size,
                color: t.color
            }, r.data(t).hidden(!1)
        }), n.dispatch.on("elementMouseout.tooltip", function(t) {
            r.hidden(!0)
        }), n.dispatch.on("elementMousemove.tooltip", function(t) {
            r()
        }), e.dispatch = d, e.sunburst = n, e.tooltip = r, e.options = t.utils.optionsFunc.bind(e), e._options = Object.create({}, {
            noData: {
                get: function() {
                    return u
                },
                set: function(t) {
                    u = t
                }
            },
            defaultState: {
                get: function() {
                    return l
                },
                set: function(t) {
                    l = t
                }
            },
            color: {
                get: function() {
                    return s
                },
                set: function(t) {
                    s = t, n.color(s)
                }
            },
            duration: {
                get: function() {
                    return c
                },
                set: function(t) {
                    c = t, f.reset(c), n.duration(c)
                }
            },
            margin: {
                get: function() {
                    return i
                },
                set: function(t) {
                    i.top = void 0 !== t.top ? t.top : i.top, i.right = void 0 !== t.right ? t.right : i.right, i.bottom = void 0 !== t.bottom ? t.bottom : i.bottom, i.left = void 0 !== t.left ? t.left : i.left
                }
            }
        }), t.utils.inheritOptions(e, n), t.utils.initOptions(e), e
    }, t.version = "1.8.2"
}();

function AnalyticsModule(i) {
    this.queue = [], this.loaded = !1, this.identified = !1, _.extend(this, i)
}
_.extend(AnalyticsModule.prototype, {
    load: function() {
        var i = this.innerLoad(),
            t = function() {
                this.loaded = !0, this._identifyLater && (this.identify.apply(this, this._identifyLater), this._identifyLater = null), this.processQueue()
            }.bind(this);
        i && "function" == typeof i.done ? i.done(t) : t()
    },
    track: function() {
        var i = _.toArray(arguments);
        return this.loaded && this.identified ? void this.innerTrack.apply(this, i) : this.queue.push(i)
    },
    identify: function() {
        var i = _.toArray(arguments);
        return this.loaded ? (this.innerIdentify.apply(this, i), this.identified = !0, void this.processQueue()) : void(this._identifyLater = i)
    },
    processQueue: function() {
        if (this.loaded && this.identified)
            for (; this.queue.length > 0;) this.track.apply(this, this.queue.shift())
    }
});
var GoogleAnalytics = new AnalyticsModule({
    innerLoad: function() {
        log("EventTracking: Loading Google Analytics"), pageScope(function() {
            ! function(n, e, o, t, i, a, c) {
                n.GoogleAnalyticsObject = i, n[i] = n[i] || function() {
                    (n[i].q = n[i].q || []).push(arguments)
                }, n[i].l = 1 * new Date, a = e.createElement(o), c = e.getElementsByTagName(o)[0], a.async = 1, a.src = t, c.parentNode.insertBefore(a, c)
            }(window, document, "script", "//www.google-analytics.com/analytics.js", "ga")
        })
    },
    innerIdentify: function(n) {
        log("EventTracking: Identifying Google Analytics"), pageScope(function(n) {
            try {
                var e = btoa(n);
                window.ga("create", "UA-26415783-3", {
                    userId: e,
                    sampleRate: 4
                }), window.ga("send", "pageview")
            } catch (o) {
                console.warn("EventTracking: Unable to identify Google Analytics", o)
            }
        }, n)
    },
    innerTrack: function(n, e) {
        pageScope(function(n) {
            return window.ga ? void window.ga("send", {
                hitType: "event",
                eventCategory: "Extension",
                eventAction: n[0],
                eventLabel: JSON.stringify(n[1])
            }) : void console.warn("EventTracking: window.ga does not exist")
        }, [n, e])
    }
});
var FacebookPixel = new AnalyticsModule({
    innerLoad: function() {
        log("EventTracking: Loading Facebook Pixel"), pageScope(function() {
            ! function(n, e, o, i, c, t, a) {
                n.fbq || (c = n.fbq = function() {
                    c.callMethod ? c.callMethod.apply(c, arguments) : c.queue.push(arguments)
                }, n._fbq || (n._fbq = c), c.push = c, c.loaded = !0, c.version = "2.0", c.queue = [], t = e.createElement(o), t.async = !0, t.src = i, a = e.getElementsByTagName(o)[0], a.parentNode.insertBefore(t, a))
            }(window, document, "script", "//connect.facebook.net/en_US/fbevents.js")
        })
    },
    innerIdentify: function() {
        log("EventTracking: Identifying Facebook Pixel"), pageScope(function() {
            try {
                window.fbq("init", "186533241689483"), window.fbq("track", "PageView")
            } catch (n) {
                console.warn("EventTracking: Unable to initialize Facebook Pixel", n)
            }
        })
    },
    innerTrack: function() {
        log("EventTracking: Tracking Facebook conversion", arguments), pageScope(function(n) {
            return window.fbq ? void window.fbq.apply(window, n) : void console.warn("EventTracking: window.fbq does not exist")
        }, Array.prototype.slice.call(arguments))
    }
});
var TwitterConversionTracking = new AnalyticsModule({
    innerLoad: function() {
        log("EventTracking: Loading Twitter analytics"), $.get("//platform.twitter.com/oct.js")
    },
    innerIdentify: function() {
        log("EventTracking: Identifying Twitter analytics");
        try {
            window.twttr.conversion.trackPid("ntuzv")
        } catch (n) {
            console.warn("EventTracking: Unable to initialize Twitter analytics", n)
        }
    },
    innerTrack: function() {
        return log("EventTracking: Tracking Twitter conversion", arguments), window.twttr ? void window.twttr.conversion.trackPid.apply(window.twttr.conversion, arguments) : void console.warn("EventTracking: window.twttr does not exist")
    }
});
var LeadDynoWrapper = new AnalyticsModule({
    innerLoad: function() {
        return log("EventTracking: Loading LeadDyno"), $.getScript("https://static.leaddyno.com/js")
    },
    innerIdentify: function() {
        log("EventTracking: Identifying LeadDyno"), pageScope(function() {
            try {
                window.LeadDyno.key = "79c117dfa7f76ee73d761d2b40b1f2762d620830", window.LeadDyno.domain = "vidiq.com", window.LeadDyno.recordVisit(), window.LeadDyno.autoWatch()
            } catch (n) {
                console.warn("EventTracking: Unable to initialize LeadDyno", n)
            }
        })
    }
});
var Rollbar = {
    load: function() {
        return $.getScript(chrome.extension.getURL("lib/rollbar.js"))
    },
    identify: function(o) {
        pageScope(function(o) {
            Rollbar.configure({
                payload: {
                    person: o[0],
                    environment: o[1]
                }
            })
        }, [o, api().extensionType])
    },
    report: function(o, e, n) {
        pageScope(function(o) {
            Rollbar[o.method](o.error, o.data || {})
        }, {
            method: o,
            error: e,
            data: n
        })
    }
};
var EventTracking = {
    setup: function() {
        log("EventTracking.setup"), GoogleAnalytics.load(), FacebookPixel.load(), TwitterConversionTracking.load(), Rollbar.load(), LeadDynoWrapper.load()
    },
    identify: function(n, e) {
        log("EventTracking.identify >", _.toArray(arguments)), GoogleAnalytics.identify(n, e), FacebookPixel.identify(), TwitterConversionTracking.identify(), this.identifyRollbar(n, e), LeadDynoWrapper.identify()
    },
    track: function(n, e) {
        log("EventTracking.track > [Chrome Extension] %s", n, e || "");
        var i = "[Chrome Extension] " + n;
        GoogleAnalytics.track(i, e), $.post(api().base + "event", {
            event: i,
            client: api().extensionType,
            props: e
        })
    },
    trackFacebookConversion: function() {
        FacebookPixel.track.apply(FacebookPixel, arguments)
    },
    trackTwitterConversion: function() {
        TwitterConversionTracking.track.apply(TwitterConversionTracking, arguments)
    },
    identifyRollbar: function(n, e) {
        var i;
        try {
            i = (new Date).toString().match(/([A-Z]+[\+-][0-9]+.*)/)[1]
        } catch (t) {
            i = "Unknown"
        }
        Rollbar.identify({
            id: n,
            type: e.userType,
            tz: i,
            client: api().extensionType
        })
    }
};

function forceNumber(t) {
    return "number" == typeof t ? t : ("string" == typeof t && (t = t.replace(/[^0-9\.]/g, "")), t || (t = 0), parseFloat(t, 10))
}

function formatNumber(t, e) {
    if ("N/A" == t || "string" == typeof t && t.indexOf("<") > -1) return t;
    t = forceNumber(t);
    var n, r = "";
    if (t > 1e9) n = Number(t / 1e9).toFixed(1), r = "B";
    else if (t > 1e6) n = Number(t / 1e6).toFixed(1), r = "M";
    else if (t >= 1e4 || e && "smallest" === e.size && t >= 1e3) {
        n = Number(t / 1e3).toFixed(1), r = "K", u = String(n);
        var i = u.indexOf(".");
        if (i > -1) {
            var o = u.substr(i + 1);
            "1" !== o[0] && "9" !== o[0] || (n = Math.round(n))
        }
    } else if (t >= 1e3) n = Math.round(t);
    else if (String(t).indexOf(".") > -1) {
        var a = String(t).split(".");
        a[1][1] > 5 && a[1][0]++, n = a[0] + "." + a[1][0]
    } else n = t;
    var u = String(n);
    return u.match(/^[0-9]*\.[0-9]*0$/) && (u = u.substr(0, u.length - 1), "." === u[u.length - 1] && (u = u.substr(0, u.length - 1))), "" === r && (u = commaNumber(n)), u + r
}

function passNote(t) {
    top.postMessage(t, "*")
}

function log() {
    window.debug && (console.log.apply(console, arguments), "true" === localStorage.trace && console.trace())
}

function warn() {
    window.debug && (console.warn.apply(console, arguments), "true" === localStorage.trace && console.trace())
}

function formatCurrency(t) {
    return "$" + (t > 1e3 ? formatNumber(t) : t.toFixed(2))
}

function calculateEstimatedEarnings(t) {
    var e = 1.5;
    return e * (t / 1e3)
}

function commaNumber(t) {
    return "string" == typeof t ? t : (t = forceNumber(t), Number(t).toLocaleString("en"))
}

function calculatePercentage(t, e) {
    t || (t = 0), e || (e = 0), t = t.toString().split(",").join(""), e = e.toString().split(",").join(""), t = Math.abs(parseFloat(t, 10)), e = Math.abs(parseFloat(e, 10));
    var n = (t / e * 100).toFixed(1);
    return !isNaN(n) && isFinite(n) || (n = null), isNaN(n) || null === n || "undefined" == typeof n ? 0 : n
}

function colorInterpolate(t) {
    if (!t || isNaN(t)) return [0, 0, 0];
    var e = [
            [200, 50, 0],
            [230, 190, 0],
            [100, 200, 0]
        ],
        n = 100,
        r = n / e.length,
        i = t / r,
        o = Math.floor(i),
        a = i - o;
    o > 0 && o--;
    for (var u = e[o], s = e[Math.min(o + 1, e.length - 1)], c = [], l = 0; l < u.length; l++) c[l] = Math.round(u[l] + (s[l] - u[l]) * a);
    return c
}

function runAtTimes(t) {
    for (var e = 1; e < arguments.length; e++) setTimeout(t, arguments[e])
}

function pageScope(t, e) {
    var e = JSON.stringify(e);
    pageExec("(" + t.toString() + ")(" + e + ")")
}

function pageExec(t) {
    var e = document.createElement("script");
    e.textContent = "localStorage.inject_value = " + t + ";", document.documentElement.appendChild(e);
    var n = localStorage.inject_value;
    return delete localStorage.inject_value, n
}

function copyText(t, e) {
    return window.isFirefox ? _cb({
        msg: "copy",
        text: t
    }, function(t) {
        e && e()
    }) : (chrome.extension.sendMessage({
        copy: t
    }), void e())
}

function copyTagsGeneral(t, e) {
    copyText(t, function() {
        log("Send copy message to background page");
        var t = $("<div>", {
            "class": "copied"
        }).text("Tags Copied!").hide();
        e && e.append(t.fadeIn("slow")), setTimeout(function() {
            t.fadeOut("slow"), setTimeout(function() {
                t.remove()
            }, 1e3)
        }, 3e3)
    })
}
window.$ && ($.jsonAjax = function(t, e, n) {
    return $.ajax({
        url: e,
        type: t,
        data: JSON.stringify(n),
        contentType: "application/json"
    })
}, $.jsonPost = function(t, e) {
    return $.jsonAjax("POST", t, e)
}, $.jsonPut = function(t, e) {
    return $.jsonAjax("PUT", t, e)
});
var utilities = {},
    u = utilities;
window.EventTracking && (utilities.track = EventTracking.track.bind(EventTracking), utilities.trackFacebookConversion = EventTracking.trackFacebookConversion.bind(EventTracking), utilities.trackTwitterConversion = EventTracking.trackTwitterConversion.bind(EventTracking)), utilities.trigger = function() {
    var t = _.toArray(arguments);
    return $(window).trigger(t.shift(), t)
}, utilities.handle = function(t, e) {
    return $(window).on(t, e)
}, utilities.dryRun = function() {
    return location.href.match(/DRY_RUN/)
}, utilities.simulateRequest = function() {
    var t = new $.Deferred,
        e = 100 * Math.round(11 * Math.random()),
        n = Math.random() > .2;
    return setTimeout(n ? t.resolve : t.reject, e), log("utilities#simulateRequest > Simulating a %s async request with %dms delay", n ? "SUCCESSFUL" : "FAILED", e), t.promise()
}, utilities.searchTerm = function() {
    var t = window.location.href.match(/(search_query|q)=([^&]+)/);
    if (!t) return !1;
    t = t[2] || "";
    var e = !!t.match(/\+/);
    return t = decodeURIComponent(t), e && (t = t.replace(/\+/g, " ")), t
}, utilities.location = function() {
    var t = {
            graph: "historical",
            twitterFeed: "tweets",
            trends: "trending"
        },
        e = t[localStorage.view];
    return this.searchTerm() ? "search" : e || localStorage.view
}, utilities.pruneUpgraded = function() {
    var t = localStorage.justUpgraded;
    return t && delete localStorage.justUpgraded, t
}, utilities.safely = function(t) {
    try {
        return t()
    } catch (e) {
        log("safely caught error", e)
    }
    return null
}, utilities.keyMirror = function(t, e) {
    return e = e ? e + "_" : "", _.object(_.map(t, function(t) {
        return [t, e + t]
    }))
}, utilities.prettyRandomId = function() {
    return (+new Date + Math.floor(999999 * Math.random())).toString(36)
}, utilities.truncate = function(t, e) {
    return _.isString(t) || (t = ""), _.isNumber(e) || (e = 10), t.length > e ? t.slice(0, e - 3).trim() + "..." : t
}, utilities.getVideoUrl = function(t, e) {
    var n = e === !1 ? "http://" : "https://";
    return n + "www.youtube.com/watch?v=" + t
}, utilities.numbro = function(t, e) {
    e || (e = {});
    var n = numbro(t).format(e.format || "0.0a"),
        r = "";
    if (e.thousands && 9999 > t && t > 999) {
        var i = _.isString(e.thousands) ? e.thousands : "0,0";
        n = numbro(t).format(i)
    }
    return n.match(/[^0-9]$/) && (r = n.slice(-1).toUpperCase(), n = n.slice(0, -1)), e.trim !== !1 && (n = n.replace(/(\.[0-9]*?)0*$/, "$1").replace(/\.$/, "")), e.separate ? [n, r] : n + r
}, utilities.convertTimeToSeconds = function(t) {
    var e = t.split(":"),
        n = 0;
    return 3 === e.length ? n = 60 * +e[0] * 60 + 60 * +e[1] + +e[2] : 2 === e.length ? n = 60 * +e[0] + +e[1] : 1 === e.length && (n = +e[0]), n
};
var numberWithCommas = commaNumber;
utilities.commaNumber = commaNumber;
var idd = 0;
Function.prototype.multiCb = function() {
    var t, e = 0,
        n = !1,
        r = this,
        i = {},
        o = (idd++, function(o) {
            return clearTimeout(t), e++,
                function() {
                    e--, o && (i[o] = arguments), 0 === e && (clearTimeout(t), t = setTimeout(function() {
                        n || (n = !0, r(i))
                    }, 100))
                }
        });
    return o.timeout = function(t) {
        setTimeout(function() {
            n || (n = !0, r(i))
        }, t)
    }, o
};
var htmlEncoder = function() {
    function t() {
        a = {}, u = {}, e({
            "&amp;": "&",
            "&gt;": ">",
            "&lt;": "<",
            "&quot;": '"',
            "&#39;": "'"
        })
    }

    function e(t) {
        var e, n, r = [],
            s = [];
        for (e in t) n = t[e], u[e] = n, a[n] = e, r.push(n), s.push(e);
        i = new RegExp("(" + r.join("|") + ")", "g"), o = new RegExp("(" + s.join("|") + "|&#[0-9]{1,5};)", "g")
    }

    function n(t) {
        var e = function(t, e) {
            return a[e]
        };
        return t ? String(t).replace(i, e) : t
    }

    function r(t) {
        var e = function(t, e) {
            return e in u ? u[e] : String.fromCharCode(parseInt(e.substr(2), 10))
        };
        return t ? String(t).replace(o, e) : t
    }
    var i, o, a, u;
    return t(), {
        htmlEncode: n,
        htmlDecode: r
    }
}();
utilities.mountComponent = function(t) {
    if (t.component && (t.selector || t.element) && (!t.url || -1 !== window.location.href.indexOf(t.url))) {
        var e;
        window.location.href;
        try {
            var n = _.extend({}, t, {
                    component: t.component.displayName
                }),
                r = JSON.stringify(n),
                e = _.map(r, function(t, e) {
                    return r.charCodeAt(e).toString(36)
                }).join("")
        } catch (i) {
            warn("Could not construct unique id for options", t)
        }
        var o = function() {
            return e && $('[data-mount-id="' + e + '"').length > 0 ? (log("mountComponent() > Ignoring duplicate mount"), !0) : !1
        };
        if (!o()) {
            var a = function() {
                    var n = React.createElement(t.component, t.props || {}),
                        r = t.inline ? $("<span/>") : $("<div/>");
                    r.attr("data-mount-id", e);
                    var i = t.insertFn;
                    i && "function" == typeof r[i] || (i = "append"), $(this)[i](r), t.rootClass && r.addClass(t.rootClass), r.length && React.render(n, r.get(0))
                },
                u = function() {
                    if (!o()) {
                        var e = $(t.selector);
                        e.length > 0 ? e.each(a) : setTimeout(u, 1e3)
                    }
                };
            return t.element ? a.apply(t.element) : u(), e
        }
    }
}, utilities.time2sec = function(t) {
    return _.isString(t) ? _.reduce(_.map(t.split(":").reverse(), function(t, e) {
        return parseFloat(t, 10) * Math.pow(60, e)
    }), function(t, e) {
        return t + e
    }, 0) : 0
}, utilities.sec2time = function(t) {
    if (!_.isNumber(t)) return "00:00:00";
    var e = _.map(this.getUnits(t, 3, 60), function(t) {
        var e = t.toString();
        return 1 === e.length ? "0" + e : e
    });
    return e.join(":").replace(/00:00/g, "00").replace(/^00:(..:)/g, "$1")
}, utilities.sec2fancy = function(t) {
    if (!_.isNumber(t) || 0 === t) return "instantaneously";
    var e = ["hour", "minute", "second"],
        n = _.compact(_.map(this.getUnits(t, 3, 60), function(t, n) {
            if (0 !== t) {
                var r = e[n],
                    i = r === e[e.length - 1] ? "and " : "";
                return i + t + " " + r + (1 === t ? "" : "s")
            }
        }));
    return 1 === n.length ? n[0].replace(/and /, "") : n.length > 2 ? n.join(", ") : n.join(" ")
}, utilities.getUnits = function(t, e, n) {
    for (var r = [], i = e - 1; i >= 0; i--) {
        var o = Math.pow(n, i),
            a = t / o;
        a = i > 0 ? Math.floor(a) : Math.round(1e3 * a) / 1e3, r.push(a), t %= o
    }
    return r
}, utilities.indices2literals = function(t, e) {
    return _.map(t, function(t) {
        return e[t]
    })
}, utilities.getAuthToken = function(t, e) {
    var n = new $.Deferred;
    t || (t = window.location.href), e || (e = "auth_token");
    var r = new RegExp("(" + e + '|XSRF_TOKEN)[\'"]: ?"([^"]+)');
    return $.get(t).done(function(t) {
        var e = t.match(r);
        return e && e[1] ? n.resolve(e[2]) : void n.reject("Could not find token")
    }).fail(function(t) {
        n.reject("Could not request token (" + t.status + ")")
    }), n.promise()
}, utilities.retry = function(t, e, n) {
    var r = 3;
    _.isNumber(n) || (n = 1), e || (e = new $.Deferred);
    var i = t();
    return i && i.done ? (i.done(e.resolve).fail(function() {
        if (n >= r) return log("RETRY > Retrying " + r + " times failed"), e.reject.apply(e, arguments);
        var i = 1500 * n;
        log("RETRY > Retrying, attempt #" + n + " in " + i + "ms"), setTimeout(function() {
            utilities.retry(t, e, n + 1)
        }, i)
    }), e.promise()) : void 0
}, utilities.validateUrl = function(t) {
    return t.match(/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/)
}, utilities.precision = function(t, e) {
    var n = Math.pow(10, e);
    return Math.floor(t * n) / n
}, window._ && (utilities._etas = {}, utilities.eta = _.throttle(function(t, e) {
    if (e >= 1 && delete this._etas[t.toString()], t && _.isNumber(e)) {
        var n = new Date,
            r = t.toString();
        this._etas[r] || (this._etas[r] = [{
            ratio: 0,
            progress: 0,
            time: t
        }]);
        var i = this._etas[r],
            o = i[0];
        i.unshift({
            ratio: (e - o.progress) / Math.floor((n - o.time) / 1e3),
            progress: e,
            time: n
        }), isFinite(i[0].ratio) || (i[0].ratio = 0), this._etas[r] = i;
        var a = _.reduce(i, function(t, e) {
                return t + e.ratio
            }, 0),
            u = a / i.length,
            s = (1 - e) / u;
        return isFinite(s) ? s : null
    }
}, 1e3)), utilities.etaString = function(t) {
    if (t) {
        var e = moment().add(t, "seconds").fromNow();
        return e.match(/ago/) && (e = "about " + e.replace(/ago/, "")), e.replace(/^in/, "about") + " remaining"
    }
}, utilities.plural = function(t, e, n) {
    return n || (n = e + "s"), 1 === t ? e : n
}, utilities.capitalize = function(t) {
    return _.isString(t) ? t[0].toUpperCase() + t.slice(1) : void 0
}, utilities.string2regex = function(t, e) {
    var n;
    if (t) {
        t = t.match(/^\/.*\/$/) ? t.slice(1, t.length - 1) : t.replace(/([\[\]\(\)\.\?\^\$\{\}\-\+\*])/g, "\\$1");
        try {
            n = new RegExp(t, e || "")
        } catch (r) {}
    }
    return n
}, utilities.stripHtml = function(t) {
    return t.replace(/<br( \/)?>/g, "\n").replace(/<[^>]+>/g, "")
}, utilities.convertEntities = function(t) {
    var e = {
        gt: ">"
    };
    return t.replace(/&(#(?:x[0-9a-f]+|\d+)|[a-z]+);?/gi, function(t, n) {
        return "#" === n[0] ? String.fromCharCode("x" === n[1].toLowerCase() ? parseInt(n.substr(2), 16) : parseInt(n.substr(1), 10)) : e.hasOwnProperty(n) ? e[n] : t
    })
};

function iso2country(a) {
    return (_.findWhere(isoCountries, {
        Code: a
    }) || {
        Name: "Unkown"
    }).Name
}
var countries = {
        AR: "Argentina",
        AU: "Australia",
        AT: "Austria",
        BE: "Belgium",
        BR: "Brazil",
        CA: "Canada",
        CL: "Chile",
        CO: "Colombia",
        CZ: "Czech Republic",
        EG: "Egypt",
        FR: "France",
        DE: "Germany",
        GB: "UK",
        HK: "Hong Kong",
        HU: "Hungary",
        IN: "India",
        IE: "Ireland",
        IL: "Israel",
        IT: "Italy",
        JP: "Japan",
        JO: "Jordan",
        MY: "Malaysia",
        MX: "Mexico",
        MA: "Morocco",
        NL: "Netherlands",
        NZ: "New Zealand",
        PE: "Peru",
        PH: "Philippines",
        PL: "Poland",
        RU: "Russia",
        SA: "Saudi Arabia",
        SG: "Singapore",
        ZA: "South Africa",
        KR: "South Korea",
        ES: "Spain",
        SE: "Sweden",
        CH: "Switzerland",
        TW: "Taiwan",
        AE: "United Arab Emirates",
        US: "USA",
        BG: "Bulgaria",
        GR: "Greece",
        TR: "Turkey"
    },
    countries2 = {
        US: "United States/Worldwide",
        DZ: "Algeria",
        AR: "Argentina",
        AU: "Australia",
        AT: "Austria",
        BH: "Bahrain",
        BE: "Belgium",
        BA: "Bosnia and Herzegovina",
        BR: "Brazil",
        BG: "Bulgaria",
        CA: "Canada",
        CL: "Chile",
        CO: "Colombia",
        HR: "Croatia",
        CZ: "Czech Republic",
        DK: "Denmark",
        EG: "Egypt",
        EE: "Estonia",
        FI: "Finland",
        FR: "France",
        DE: "Germany",
        GH: "Ghana",
        GR: "Greece",
        HK: "Hong Kong",
        HU: "Hungary",
        IN: "India",
        ID: "Indonesia",
        IE: "Ireland",
        IL: "Israel",
        IT: "Italy",
        JP: "Japan",
        JO: "Jordan",
        KE: "Kenya",
        KW: "Kuwait",
        LV: "Latvia",
        LB: "Lebanon",
        LY: "Libya",
        LT: "Lithuania",
        MK: "Macedonia",
        MY: "Malaysia",
        MX: "Mexico",
        ME: "Montenegro",
        MA: "Morocco",
        NL: "Netherlands",
        NZ: "New Zealand",
        NG: "Nigeria",
        NO: "Norway",
        OM: "Oman",
        PE: "Peru",
        PH: "Philippines",
        PL: "Poland",
        PT: "Portugal",
        PR: "Puerto Rico",
        QA: "Qatar",
        RO: "Romania",
        RU: "Russia",
        SA: "Saudi Arabia",
        SN: "Senegal",
        RS: "Serbia",
        SG: "Singapore",
        SK: "Slovakia",
        SI: "Slovenia",
        ZA: "South Africa",
        KR: "South Korea",
        ES: "Spain",
        SE: "Sweden",
        CH: "Switzerland",
        TW: "Taiwan",
        TH: "Thailand",
        TN: "Tunisia",
        TR: "Turkey",
        UG: "Uganda",
        UA: "Ukraine",
        AE: "United Arab Emirates",
        GB: "United Kingdom",
        VN: "Vietnam",
        YE: "Yemen"
    },
    languages = {
        af: "Afrikaans",
        id: "Indonesian",
        ms: "Malay",
        ca: "Catalan",
        cs: "Czech",
        da: "Danish",
        de: "German",
        et: "Estonian",
        "en-GB": "English (United Kingdom)",
        en: "English",
        es: "Spanish (Spain)",
        "es-419": "Spanish (Latin America)",
        eu: "Basque",
        fil: "Filipino",
        fr: "French",
        "fr-CA": "French (Canada)",
        gl: "Galician",
        hr: "Croatian",
        zu: "Zulu",
        is: "Icelandic",
        it: "Italian",
        sw: "Swahili",
        lv: "Latvian",
        lt: "Lithuanian",
        hu: "Hungarian",
        nl: "Dutch",
        no: "Norwegian",
        pl: "Polish",
        "pt-PT": "Portuguese (Portugal)",
        pt: "Portuguese (Brazil)",
        ro: "Romanian",
        sk: "Slovak",
        sl: "Slovenian",
        fi: "Finnish",
        sv: "Swedish",
        vi: "Vietnamese",
        tr: "Turkish",
        bg: "Bulgarian",
        ru: "Russian",
        sr: "Serbian",
        uk: "Ukrainian",
        el: "Greek",
        iw: "Hebrew",
        ur: "Urdu",
        ar: "Arabic",
        fa: "Persian",
        mr: "Marathi",
        hi: "Hindi",
        bn: "Bengali",
        gu: "Gujarati",
        ta: "Tamil",
        te: "Telugu",
        kn: "Kannada",
        ml: "Malayalam",
        th: "Thai",
        am: "Amharic",
        "zh-CN": "Chinese",
        "zh-TW": "Chinese (Taiwan)",
        "zh-HK": "Chinese (Hong Kong)",
        ja: "Japanese",
        ko: "Korean"
    },
    isoCountries = [{
        Name: "Afghanistan",
        Code: "AF"
    }, {
        Name: "land Islands",
        Code: "AX"
    }, {
        Name: "Albania",
        Code: "AL"
    }, {
        Name: "Algeria",
        Code: "DZ"
    }, {
        Name: "American Samoa",
        Code: "AS"
    }, {
        Name: "Andorra",
        Code: "AD"
    }, {
        Name: "Angola",
        Code: "AO"
    }, {
        Name: "Anguilla",
        Code: "AI"
    }, {
        Name: "Antarctica",
        Code: "AQ"
    }, {
        Name: "Antigua and Barbuda",
        Code: "AG"
    }, {
        Name: "Argentina",
        Code: "AR"
    }, {
        Name: "Armenia",
        Code: "AM"
    }, {
        Name: "Aruba",
        Code: "AW"
    }, {
        Name: "Australia",
        Code: "AU"
    }, {
        Name: "Austria",
        Code: "AT"
    }, {
        Name: "Azerbaijan",
        Code: "AZ"
    }, {
        Name: "Bahamas",
        Code: "BS"
    }, {
        Name: "Bahrain",
        Code: "BH"
    }, {
        Name: "Bangladesh",
        Code: "BD"
    }, {
        Name: "Barbados",
        Code: "BB"
    }, {
        Name: "Belarus",
        Code: "BY"
    }, {
        Name: "Belgium",
        Code: "BE"
    }, {
        Name: "Belize",
        Code: "BZ"
    }, {
        Name: "Benin",
        Code: "BJ"
    }, {
        Name: "Bermuda",
        Code: "BM"
    }, {
        Name: "Bhutan",
        Code: "BT"
    }, {
        Name: "Bolivia, Plurinational State of",
        Code: "BO"
    }, {
        Name: "Bonaire, Sint Eustatius and Saba",
        Code: "BQ"
    }, {
        Name: "Bosnia and Herzegovina",
        Code: "BA"
    }, {
        Name: "Botswana",
        Code: "BW"
    }, {
        Name: "Bouvet Island",
        Code: "BV"
    }, {
        Name: "Brazil",
        Code: "BR"
    }, {
        Name: "British Indian Ocean Territory",
        Code: "IO"
    }, {
        Name: "Brunei Darussalam",
        Code: "BN"
    }, {
        Name: "Bulgaria",
        Code: "BG"
    }, {
        Name: "Burkina Faso",
        Code: "BF"
    }, {
        Name: "Burundi",
        Code: "BI"
    }, {
        Name: "Cambodia",
        Code: "KH"
    }, {
        Name: "Cameroon",
        Code: "CM"
    }, {
        Name: "Canada",
        Code: "CA"
    }, {
        Name: "Cape Verde",
        Code: "CV"
    }, {
        Name: "Cayman Islands",
        Code: "KY"
    }, {
        Name: "Central African Republic",
        Code: "CF"
    }, {
        Name: "Chad",
        Code: "TD"
    }, {
        Name: "Chile",
        Code: "CL"
    }, {
        Name: "China",
        Code: "CN"
    }, {
        Name: "Christmas Island",
        Code: "CX"
    }, {
        Name: "Cocos (Keeling) Islands",
        Code: "CC"
    }, {
        Name: "Colombia",
        Code: "CO"
    }, {
        Name: "Comoros",
        Code: "KM"
    }, {
        Name: "Congo",
        Code: "CG"
    }, {
        Name: "Congo, the Democratic Republic of the",
        Code: "CD"
    }, {
        Name: "Cook Islands",
        Code: "CK"
    }, {
        Name: "Costa Rica",
        Code: "CR"
    }, {
        Name: "Cte d'Ivoire",
        Code: "CI"
    }, {
        Name: "Croatia",
        Code: "HR"
    }, {
        Name: "Cuba",
        Code: "CU"
    }, {
        Name: "Curaao",
        Code: "CW"
    }, {
        Name: "Cyprus",
        Code: "CY"
    }, {
        Name: "Czech Republic",
        Code: "CZ"
    }, {
        Name: "Denmark",
        Code: "DK"
    }, {
        Name: "Djibouti",
        Code: "DJ"
    }, {
        Name: "Dominica",
        Code: "DM"
    }, {
        Name: "Dominican Republic",
        Code: "DO"
    }, {
        Name: "Ecuador",
        Code: "EC"
    }, {
        Name: "Egypt",
        Code: "EG"
    }, {
        Name: "El Salvador",
        Code: "SV"
    }, {
        Name: "Equatorial Guinea",
        Code: "GQ"
    }, {
        Name: "Eritrea",
        Code: "ER"
    }, {
        Name: "Estonia",
        Code: "EE"
    }, {
        Name: "Ethiopia",
        Code: "ET"
    }, {
        Name: "Falkland Islands (Malvinas)",
        Code: "FK"
    }, {
        Name: "Faroe Islands",
        Code: "FO"
    }, {
        Name: "Fiji",
        Code: "FJ"
    }, {
        Name: "Finland",
        Code: "FI"
    }, {
        Name: "France",
        Code: "FR"
    }, {
        Name: "French Guiana",
        Code: "GF"
    }, {
        Name: "French Polynesia",
        Code: "PF"
    }, {
        Name: "French Southern Territories",
        Code: "TF"
    }, {
        Name: "Gabon",
        Code: "GA"
    }, {
        Name: "Gambia",
        Code: "GM"
    }, {
        Name: "Georgia",
        Code: "GE"
    }, {
        Name: "Germany",
        Code: "DE"
    }, {
        Name: "Ghana",
        Code: "GH"
    }, {
        Name: "Gibraltar",
        Code: "GI"
    }, {
        Name: "Greece",
        Code: "GR"
    }, {
        Name: "Greenland",
        Code: "GL"
    }, {
        Name: "Grenada",
        Code: "GD"
    }, {
        Name: "Guadeloupe",
        Code: "GP"
    }, {
        Name: "Guam",
        Code: "GU"
    }, {
        Name: "Guatemala",
        Code: "GT"
    }, {
        Name: "Guernsey",
        Code: "GG"
    }, {
        Name: "Guinea",
        Code: "GN"
    }, {
        Name: "Guinea-Bissau",
        Code: "GW"
    }, {
        Name: "Guyana",
        Code: "GY"
    }, {
        Name: "Haiti",
        Code: "HT"
    }, {
        Name: "Heard Island and McDonald Islands",
        Code: "HM"
    }, {
        Name: "Holy See (Vatican City State)",
        Code: "VA"
    }, {
        Name: "Honduras",
        Code: "HN"
    }, {
        Name: "Hong Kong",
        Code: "HK"
    }, {
        Name: "Hungary",
        Code: "HU"
    }, {
        Name: "Iceland",
        Code: "IS"
    }, {
        Name: "India",
        Code: "IN"
    }, {
        Name: "Indonesia",
        Code: "ID"
    }, {
        Name: "Iran, Islamic Republic of",
        Code: "IR"
    }, {
        Name: "Iraq",
        Code: "IQ"
    }, {
        Name: "Ireland",
        Code: "IE"
    }, {
        Name: "Isle of Man",
        Code: "IM"
    }, {
        Name: "Israel",
        Code: "IL"
    }, {
        Name: "Italy",
        Code: "IT"
    }, {
        Name: "Jamaica",
        Code: "JM"
    }, {
        Name: "Japan",
        Code: "JP"
    }, {
        Name: "Jersey",
        Code: "JE"
    }, {
        Name: "Jordan",
        Code: "JO"
    }, {
        Name: "Kazakhstan",
        Code: "KZ"
    }, {
        Name: "Kenya",
        Code: "KE"
    }, {
        Name: "Kiribati",
        Code: "KI"
    }, {
        Name: "Korea, Democratic People's Republic of",
        Code: "KP"
    }, {
        Name: "Korea, Republic of",
        Code: "KR"
    }, {
        Name: "Kuwait",
        Code: "KW"
    }, {
        Name: "Kyrgyzstan",
        Code: "KG"
    }, {
        Name: "Lao People's Democratic Republic",
        Code: "LA"
    }, {
        Name: "Latvia",
        Code: "LV"
    }, {
        Name: "Lebanon",
        Code: "LB"
    }, {
        Name: "Lesotho",
        Code: "LS"
    }, {
        Name: "Liberia",
        Code: "LR"
    }, {
        Name: "Libya",
        Code: "LY"
    }, {
        Name: "Liechtenstein",
        Code: "LI"
    }, {
        Name: "Lithuania",
        Code: "LT"
    }, {
        Name: "Luxembourg",
        Code: "LU"
    }, {
        Name: "Macao",
        Code: "MO"
    }, {
        Name: "Macedonia, the Former Yugoslav Republic of",
        Code: "MK"
    }, {
        Name: "Madagascar",
        Code: "MG"
    }, {
        Name: "Malawi",
        Code: "MW"
    }, {
        Name: "Malaysia",
        Code: "MY"
    }, {
        Name: "Maldives",
        Code: "MV"
    }, {
        Name: "Mali",
        Code: "ML"
    }, {
        Name: "Malta",
        Code: "MT"
    }, {
        Name: "Marshall Islands",
        Code: "MH"
    }, {
        Name: "Martinique",
        Code: "MQ"
    }, {
        Name: "Mauritania",
        Code: "MR"
    }, {
        Name: "Mauritius",
        Code: "MU"
    }, {
        Name: "Mayotte",
        Code: "YT"
    }, {
        Name: "Mexico",
        Code: "MX"
    }, {
        Name: "Micronesia, Federated States of",
        Code: "FM"
    }, {
        Name: "Moldova, Republic of",
        Code: "MD"
    }, {
        Name: "Monaco",
        Code: "MC"
    }, {
        Name: "Mongolia",
        Code: "MN"
    }, {
        Name: "Montenegro",
        Code: "ME"
    }, {
        Name: "Montserrat",
        Code: "MS"
    }, {
        Name: "Morocco",
        Code: "MA"
    }, {
        Name: "Mozambique",
        Code: "MZ"
    }, {
        Name: "Myanmar",
        Code: "MM"
    }, {
        Name: "Namibia",
        Code: "NA"
    }, {
        Name: "Nauru",
        Code: "NR"
    }, {
        Name: "Nepal",
        Code: "NP"
    }, {
        Name: "Netherlands",
        Code: "NL"
    }, {
        Name: "New Caledonia",
        Code: "NC"
    }, {
        Name: "New Zealand",
        Code: "NZ"
    }, {
        Name: "Nicaragua",
        Code: "NI"
    }, {
        Name: "Niger",
        Code: "NE"
    }, {
        Name: "Nigeria",
        Code: "NG"
    }, {
        Name: "Niue",
        Code: "NU"
    }, {
        Name: "Norfolk Island",
        Code: "NF"
    }, {
        Name: "Northern Mariana Islands",
        Code: "MP"
    }, {
        Name: "Norway",
        Code: "NO"
    }, {
        Name: "Oman",
        Code: "OM"
    }, {
        Name: "Pakistan",
        Code: "PK"
    }, {
        Name: "Palau",
        Code: "PW"
    }, {
        Name: "Palestine, State of",
        Code: "PS"
    }, {
        Name: "Panama",
        Code: "PA"
    }, {
        Name: "Papua New Guinea",
        Code: "PG"
    }, {
        Name: "Paraguay",
        Code: "PY"
    }, {
        Name: "Peru",
        Code: "PE"
    }, {
        Name: "Philippines",
        Code: "PH"
    }, {
        Name: "Pitcairn",
        Code: "PN"
    }, {
        Name: "Poland",
        Code: "PL"
    }, {
        Name: "Portugal",
        Code: "PT"
    }, {
        Name: "Puerto Rico",
        Code: "PR"
    }, {
        Name: "Qatar",
        Code: "QA"
    }, {
        Name: "Runion",
        Code: "RE"
    }, {
        Name: "Romania",
        Code: "RO"
    }, {
        Name: "Russian Federation",
        Code: "RU"
    }, {
        Name: "Rwanda",
        Code: "RW"
    }, {
        Name: "Saint Barthlemy",
        Code: "BL"
    }, {
        Name: "Saint Helena, Ascension and Tristan da Cunha",
        Code: "SH"
    }, {
        Name: "Saint Kitts and Nevis",
        Code: "KN"
    }, {
        Name: "Saint Lucia",
        Code: "LC"
    }, {
        Name: "Saint Martin (French part)",
        Code: "MF"
    }, {
        Name: "Saint Pierre and Miquelon",
        Code: "PM"
    }, {
        Name: "Saint Vincent and the Grenadines",
        Code: "VC"
    }, {
        Name: "Samoa",
        Code: "WS"
    }, {
        Name: "San Marino",
        Code: "SM"
    }, {
        Name: "Sao Tome and Principe",
        Code: "ST"
    }, {
        Name: "Saudi Arabia",
        Code: "SA"
    }, {
        Name: "Senegal",
        Code: "SN"
    }, {
        Name: "Serbia",
        Code: "RS"
    }, {
        Name: "Seychelles",
        Code: "SC"
    }, {
        Name: "Sierra Leone",
        Code: "SL"
    }, {
        Name: "Singapore",
        Code: "SG"
    }, {
        Name: "Sint Maarten (Dutch part)",
        Code: "SX"
    }, {
        Name: "Slovakia",
        Code: "SK"
    }, {
        Name: "Slovenia",
        Code: "SI"
    }, {
        Name: "Solomon Islands",
        Code: "SB"
    }, {
        Name: "Somalia",
        Code: "SO"
    }, {
        Name: "South Africa",
        Code: "ZA"
    }, {
        Name: "South Georgia and the South Sandwich Islands",
        Code: "GS"
    }, {
        Name: "South Sudan",
        Code: "SS"
    }, {
        Name: "Spain",
        Code: "ES"
    }, {
        Name: "Sri Lanka",
        Code: "LK"
    }, {
        Name: "Sudan",
        Code: "SD"
    }, {
        Name: "Suriname",
        Code: "SR"
    }, {
        Name: "Svalbard and Jan Mayen",
        Code: "SJ"
    }, {
        Name: "Swaziland",
        Code: "SZ"
    }, {
        Name: "Sweden",
        Code: "SE"
    }, {
        Name: "Switzerland",
        Code: "CH"
    }, {
        Name: "Syrian Arab Republic",
        Code: "SY"
    }, {
        Name: "Taiwan, Province of China",
        Code: "TW"
    }, {
        Name: "Tajikistan",
        Code: "TJ"
    }, {
        Name: "Tanzania, United Republic of",
        Code: "TZ"
    }, {
        Name: "Thailand",
        Code: "TH"
    }, {
        Name: "Timor-Leste",
        Code: "TL"
    }, {
        Name: "Togo",
        Code: "TG"
    }, {
        Name: "Tokelau",
        Code: "TK"
    }, {
        Name: "Tonga",
        Code: "TO"
    }, {
        Name: "Trinidad and Tobago",
        Code: "TT"
    }, {
        Name: "Tunisia",
        Code: "TN"
    }, {
        Name: "Turkey",
        Code: "TR"
    }, {
        Name: "Turkmenistan",
        Code: "TM"
    }, {
        Name: "Turks and Caicos Islands",
        Code: "TC"
    }, {
        Name: "Tuvalu",
        Code: "TV"
    }, {
        Name: "Uganda",
        Code: "UG"
    }, {
        Name: "Ukraine",
        Code: "UA"
    }, {
        Name: "United Arab Emirates",
        Code: "AE"
    }, {
        Name: "United Kingdom",
        Code: "GB"
    }, {
        Name: "United States",
        Code: "US"
    }, {
        Name: "United States Minor Outlying Islands",
        Code: "UM"
    }, {
        Name: "Uruguay",
        Code: "UY"
    }, {
        Name: "Uzbekistan",
        Code: "UZ"
    }, {
        Name: "Vanuatu",
        Code: "VU"
    }, {
        Name: "Venezuela, Bolivarian Republic of",
        Code: "VE"
    }, {
        Name: "Vietnam",
        Code: "VN"
    }, {
        Name: "Virgin Islands, British",
        Code: "VG"
    }, {
        Name: "Virgin Islands, U.S.",
        Code: "VI"
    }, {
        Name: "Wallis and Futuna",
        Code: "WF"
    }, {
        Name: "Western Sahara",
        Code: "EH"
    }, {
        Name: "Yemen",
        Code: "YE"
    }, {
        Name: "Zambia",
        Code: "ZM"
    }, {
        Name: "Zimbabwe",
        Code: "ZW"
    }];
var languages = {
    ar: "Arabic",
    bg: "Bulgarian",
    ca: "Catalan",
    cs: "Czech",
    da: "Danish",
    de: "German",
    el: "Greek",
    en: "English",
    es: "Spanish",
    et: "Estonian",
    fi: "Finnish",
    fr: "French",
    hi: "Hindi",
    hr: "Croatian",
    hu: "Hungarian",
    id: "Indonesian",
    is: "Icelandic",
    it: "Italian",
    iw: "Hebrew",
    ja: "Japanese",
    ko: "Korean",
    lt: "Lithuanian",
    lv: "Latvian",
    nl: "Dutch",
    no: "Norwegian",
    pl: "Polish",
    pt: "Portuguese",
    ro: "Romanian",
    ru: "Russian",
    sk: "Slovak",
    sl: "Slovenian",
    sr: "Serbian",
    sv: "Swedish",
    th: "Thai",
    tl: "Tagalog",
    tr: "Turkish",
    uk: "Ukrainian",
    ur: "Urdu",
    vi: "Vietnamese",
    zh_CN: "Chinese (Simplified Han)",
    zh_TW: "Chinese (Traditional Han)"
};
var langSpokenBy = {
    AR: "es",
    AU: "en",
    AT: "de",
    BE: "nl",
    BR: "pt",
    CA: "en",
    CL: "es",
    CO: "es",
    CZ: "cs",
    EG: "ar",
    FR: "fr",
    DE: "de",
    GB: "en",
    HK: "en",
    HU: "hu",
    IN: "hi",
    IE: "en",
    IL: "iw",
    IT: "it",
    JP: "ja",
    JO: "ar",
    MY: "zh_CN",
    MX: "es",
    MA: "ar",
    NL: "nl",
    NZ: "en",
    PE: "es",
    PH: "en",
    PL: "po",
    RU: "ru",
    SA: "ar",
    SG: "zh_CN",
    ZA: "en",
    KR: "ko",
    ES: "es",
    SE: "sv",
    CH: "de",
    TW: "zh_TW",
    AE: "ar",
    US: "en",
    BG: "bg",
    GR: "el",
    TR: "tr"
};
! function(t, e) {
    "function" == typeof define && define.amd ? define(e) : t.Dragdealer = e()
}(this, function() {
    var t = function(t, e) {
        this.bindMethods(), this.options = this.applyDefaults(e || {}), this.wrapper = this.getWrapperElement(t), this.wrapper && (this.handle = this.getHandleElement(this.wrapper, this.options.handleClass), this.handle && (this.init(), this.bindEventListeners()))
    };
    t.prototype = {
        defaults: {
            disabled: !1,
            horizontal: !0,
            vertical: !1,
            slide: !0,
            steps: 0,
            snap: !1,
            loose: !1,
            speed: .1,
            xPrecision: 0,
            yPrecision: 0,
            handleClass: "handle"
        },
        init: function() {
            this.value = {
                prev: [-1, -1],
                current: [this.options.x || 0, this.options.y || 0],
                target: [this.options.x || 0, this.options.y || 0]
            }, this.offset = {
                wrapper: [0, 0],
                mouse: [0, 0],
                prev: [-999999, -999999],
                current: [0, 0],
                target: [0, 0]
            }, this.change = [0, 0], this.stepRatios = this.calculateStepRatios(), this.activity = !1, this.dragging = !1, this.tapping = !1, this.reflow(), this.options.disabled && this.disable()
        },
        applyDefaults: function(t) {
            for (var e in this.defaults) t.hasOwnProperty(e) || (t[e] = this.defaults[e]);
            return t
        },
        getWrapperElement: function(t) {
            return "string" == typeof t ? document.getElementById(t) : t
        },
        getHandleElement: function(t, e) {
            var s, i = t.getElementsByTagName("div"),
                o = new RegExp("(^|\\s)" + e + "(\\s|$)");
            for (s = 0; s < i.length; s++)
                if (o.test(i[s].className)) return i[s]
        },
        calculateStepRatios: function() {
            var t = [];
            if (this.options.steps > 1)
                for (var e = 0; e <= this.options.steps - 1; e++) t[e] = e / (this.options.steps - 1);
            return t
        },
        setWrapperOffset: function() {
            this.offset.wrapper = h.get(this.wrapper)
        },
        calculateBounds: function() {
            var t = {
                top: this.options.top || 0,
                bottom: -(this.options.bottom || 0) + this.wrapper.offsetHeight,
                left: this.options.left || 0,
                right: -(this.options.right || 0) + this.wrapper.offsetWidth
            };
            return t.availWidth = t.right - t.left - this.handle.offsetWidth, t.availHeight = t.bottom - t.top - this.handle.offsetHeight, t
        },
        calculateValuePrecision: function() {
            var t = this.options.xPrecision || Math.abs(this.bounds.availWidth),
                e = this.options.yPrecision || Math.abs(this.bounds.availHeight);
            return [t ? 1 / t : 0, e ? 1 / e : 0]
        },
        bindMethods: function() {
            this.onHandleMouseDown = e(this.onHandleMouseDown, this), this.onHandleTouchStart = e(this.onHandleTouchStart, this), this.onDocumentMouseMove = e(this.onDocumentMouseMove, this), this.onWrapperTouchMove = e(this.onWrapperTouchMove, this), this.onWrapperMouseDown = e(this.onWrapperMouseDown, this), this.onWrapperTouchStart = e(this.onWrapperTouchStart, this), this.onDocumentMouseUp = e(this.onDocumentMouseUp, this), this.onDocumentTouchEnd = e(this.onDocumentTouchEnd, this), this.onHandleClick = e(this.onHandleClick, this), this.onWindowResize = e(this.onWindowResize, this)
        },
        bindEventListeners: function() {
            s(this.handle, "mousedown", this.onHandleMouseDown), s(this.handle, "touchstart", this.onHandleTouchStart), s(document, "mousemove", this.onDocumentMouseMove), s(this.wrapper, "touchmove", this.onWrapperTouchMove), s(this.wrapper, "mousedown", this.onWrapperMouseDown), s(this.wrapper, "touchstart", this.onWrapperTouchStart), s(document, "mouseup", this.onDocumentMouseUp), s(document, "touchend", this.onDocumentTouchEnd), s(this.handle, "click", this.onHandleClick), s(window, "resize", this.onWindowResize);
            var t = this;
            this.interval = setInterval(function() {
                t.animate()
            }, 25), this.animate(!1, !0)
        },
        unbindEventListeners: function() {
            i(this.handle, "mousedown", this.onHandleMouseDown), i(this.handle, "touchstart", this.onHandleTouchStart), i(document, "mousemove", this.onDocumentMouseMove), i(this.wrapper, "touchmove", this.onWrapperTouchMove), i(this.wrapper, "mousedown", this.onWrapperMouseDown), i(this.wrapper, "touchstart", this.onWrapperTouchStart), i(document, "mouseup", this.onDocumentMouseUp), i(document, "touchend", this.onDocumentTouchEnd), i(this.handle, "click", this.onHandleClick), i(window, "resize", this.onWindowResize), clearInterval(this.interval)
        },
        onHandleMouseDown: function(t) {
            a.refresh(t), o(t), n(t), this.activity = !1, this.startDrag()
        },
        onHandleTouchStart: function(t) {
            a.refresh(t), n(t), this.activity = !1, this.startDrag()
        },
        onDocumentMouseMove: function(t) {
            a.refresh(t), this.dragging && (this.activity = !0)
        },
        onWrapperTouchMove: function(t) {
            return a.refresh(t), !this.activity && this.draggingOnDisabledAxis() ? void(this.dragging && this.stopDrag()) : (o(t), void(this.activity = !0))
        },
        onWrapperMouseDown: function(t) {
            a.refresh(t), o(t), this.startTap()
        },
        onWrapperTouchStart: function(t) {
            a.refresh(t), o(t), this.startTap()
        },
        onDocumentMouseUp: function(t) {
            this.stopDrag(), this.stopTap()
        },
        onDocumentTouchEnd: function(t) {
            this.stopDrag(), this.stopTap()
        },
        onHandleClick: function(t) {
            this.activity && (o(t), n(t))
        },
        onWindowResize: function(t) {
            this.reflow()
        },
        enable: function() {
            this.disabled = !1, this.handle.className = this.handle.className.replace(/\s?disabled/g, "")
        },
        disable: function() {
            this.disabled = !0, this.handle.className += " disabled"
        },
        reflow: function() {
            this.setWrapperOffset(), this.bounds = this.calculateBounds(), this.valuePrecision = this.calculateValuePrecision(), this.updateOffsetFromValue()
        },
        getStep: function() {
            return [this.getStepNumber(this.value.target[0]), this.getStepNumber(this.value.target[1])]
        },
        getValue: function() {
            return this.value.target
        },
        setStep: function(t, e, s) {
            this.setValue(this.options.steps && t > 1 ? (t - 1) / (this.options.steps - 1) : 0, this.options.steps && e > 1 ? (e - 1) / (this.options.steps - 1) : 0, s)
        },
        setValue: function(t, e, s) {
            this.setTargetValue([t, e || 0]), s && (this.groupCopy(this.value.current, this.value.target), this.updateOffsetFromValue(), this.callAnimationCallback())
        },
        startTap: function() {
            this.disabled || (this.tapping = !0, this.setWrapperOffset(), this.setTargetValueByOffset([a.x - this.offset.wrapper[0] - this.handle.offsetWidth / 2, a.y - this.offset.wrapper[1] - this.handle.offsetHeight / 2]))
        },
        stopTap: function() {
            !this.disabled && this.tapping && (this.tapping = !1, this.setTargetValue(this.value.current))
        },
        startDrag: function() {
            this.disabled || (this.dragging = !0, this.setWrapperOffset(), this.offset.mouse = [a.x - h.get(this.handle)[0], a.y - h.get(this.handle)[1]])
        },
        stopDrag: function() {
            if (!this.disabled && this.dragging) {
                this.dragging = !1;
                var t = this.groupClone(this.value.current);
                if (this.options.slide) {
                    var e = this.change;
                    t[0] += 4 * e[0], t[1] += 4 * e[1]
                }
                this.setTargetValue(t)
            }
        },
        callAnimationCallback: function() {
            var t = this.value.current;
            this.options.snap && this.options.steps > 1 && (t = this.getClosestSteps(t)), this.groupCompare(t, this.value.prev) || ("function" == typeof this.options.animationCallback && this.options.animationCallback.call(this, t[0], t[1]), this.groupCopy(this.value.prev, t))
        },
        callTargetCallback: function() {
            "function" == typeof this.options.callback && this.options.callback.call(this, this.value.target[0], this.value.target[1])
        },
        animate: function(t, e) {
            if (!t || this.dragging) {
                if (this.dragging) {
                    var s = this.groupClone(this.value.target),
                        i = [a.x - this.offset.wrapper[0] - this.offset.mouse[0], a.y - this.offset.wrapper[1] - this.offset.mouse[1]];
                    this.setTargetValueByOffset(i, this.options.loose), this.change = [this.value.target[0] - s[0], this.value.target[1] - s[1]]
                }(this.dragging || e) && this.groupCopy(this.value.current, this.value.target), (this.dragging || this.glide() || e) && (this.updateOffsetFromValue(), this.callAnimationCallback())
            }
        },
        glide: function() {
            var t = [this.value.target[0] - this.value.current[0], this.value.target[1] - this.value.current[1]];
            return t[0] || t[1] ? (Math.abs(t[0]) > this.valuePrecision[0] || Math.abs(t[1]) > this.valuePrecision[1] ? (this.value.current[0] += t[0] * this.options.speed, this.value.current[1] += t[1] * this.options.speed) : this.groupCopy(this.value.current, this.value.target), !0) : !1
        },
        updateOffsetFromValue: function() {
            this.options.snap ? this.offset.current = this.getOffsetsByRatios(this.getClosestSteps(this.value.current)) : this.offset.current = this.getOffsetsByRatios(this.value.current), this.groupCompare(this.offset.current, this.offset.prev) || (this.renderHandlePosition(), this.groupCopy(this.offset.prev, this.offset.current))
        },
        renderHandlePosition: function() {
            this.options.horizontal && (this.handle.style.left = String(this.offset.current[0]) + "px"), this.options.vertical && (this.handle.style.top = String(this.offset.current[1]) + "px")
        },
        setTargetValue: function(t, e) {
            var s = e ? this.getLooseValue(t) : this.getProperValue(t);
            this.groupCopy(this.value.target, s), this.offset.target = this.getOffsetsByRatios(s), this.callTargetCallback()
        },
        setTargetValueByOffset: function(t, e) {
            var s = this.getRatiosByOffsets(t),
                i = e ? this.getLooseValue(s) : this.getProperValue(s);
            this.groupCopy(this.value.target, i), this.offset.target = this.getOffsetsByRatios(i)
        },
        getLooseValue: function(t) {
            var e = this.getProperValue(t);
            return [e[0] + (t[0] - e[0]) / 4, e[1] + (t[1] - e[1]) / 4]
        },
        getProperValue: function(t) {
            var e = this.groupClone(t);
            return e[0] = Math.max(e[0], 0), e[1] = Math.max(e[1], 0), e[0] = Math.min(e[0], 1), e[1] = Math.min(e[1], 1), (!this.dragging && !this.tapping || this.options.snap) && this.options.steps > 1 && (e = this.getClosestSteps(e)), e
        },
        getRatiosByOffsets: function(t) {
            return [this.getRatioByOffset(t[0], this.bounds.availWidth, this.bounds.left), this.getRatioByOffset(t[1], this.bounds.availHeight, this.bounds.top)]
        },
        getRatioByOffset: function(t, e, s) {
            return e ? (t - s) / e : 0
        },
        getOffsetsByRatios: function(t) {
            return [this.getOffsetByRatio(t[0], this.bounds.availWidth, this.bounds.left), this.getOffsetByRatio(t[1], this.bounds.availHeight, this.bounds.top)]
        },
        getOffsetByRatio: function(t, e, s) {
            return Math.round(t * e) + s
        },
        getStepNumber: function(t) {
            return this.getClosestStep(t) * (this.options.steps - 1) + 1
        },
        getClosestSteps: function(t) {
            return [this.getClosestStep(t[0]), this.getClosestStep(t[1])]
        },
        getClosestStep: function(t) {
            for (var e = 0, s = 1, i = 0; i <= this.options.steps - 1; i++) Math.abs(this.stepRatios[i] - t) < s && (s = Math.abs(this.stepRatios[i] - t), e = i);
            return this.stepRatios[e]
        },
        groupCompare: function(t, e) {
            return t[0] == e[0] && t[1] == e[1]
        },
        groupCopy: function(t, e) {
            t[0] = e[0], t[1] = e[1]
        },
        groupClone: function(t) {
            return [t[0], t[1]]
        },
        draggingOnDisabledAxis: function() {
            return !this.options.horizontal && a.xDiff > a.yDiff || !this.options.vertical && a.yDiff > a.xDiff
        }
    };
    var e = function(t, e) {
            return function() {
                return t.apply(e, arguments)
            }
        },
        s = function(t, e, s) {
            t.addEventListener ? t.addEventListener(e, s, !1) : t.attachEvent && t.attachEvent("on" + e, s)
        },
        i = function(t, e, s) {
            t.removeEventListener ? t.removeEventListener(e, s, !1) : t.detachEvent && t.detachEvent("on" + e, s)
        },
        o = function(t) {
            t || (t = window.event), t.preventDefault && t.preventDefault(), t.returnValue = !1
        },
        n = function(t) {
            t || (t = window.event), t.stopPropagation && t.stopPropagation(), t.cancelBubble = !0
        },
        a = {
            x: 0,
            y: 0,
            xDiff: 0,
            yDiff: 0,
            refresh: function(t) {
                t || (t = window.event), "mousemove" == t.type ? this.set(t) : t.touches && this.set(t.touches[0])
            },
            set: function(t) {
                var e = this.x,
                    s = this.y;
                t.pageX || t.pageY ? (this.x = t.pageX, this.y = t.pageY) : (t.clientX || t.clientY) && (this.x = t.clientX + document.body.scrollLeft + document.documentElement.scrollLeft, this.y = t.clientY + document.body.scrollTop + document.documentElement.scrollTop), this.xDiff = Math.abs(this.x - e), this.yDiff = Math.abs(this.y - s)
            }
        },
        h = {
            get: function(t) {
                var e = 0,
                    s = 0;
                if (t.offsetParent)
                    do e += t.offsetLeft, s += t.offsetTop; while (t = t.offsetParent);
                return [e, s]
            }
        };
    return t
});

function channelGrowthTooltipFunction(e, o, s) {
    return s && s.change ? "Compares growth over the last 30 days to the previous period (" + numbro(s._comparison).format("0,0") + ")" : void 0
}
var AnnotationCardTemplatesConstants = u.keyMirror(["UPDATE"], "ANNOTATION_TEMPLATES"),
    AnnotationsConstants = u.keyMirror(["UPDATE_SELF", "UPDATE", "DELETE", "FETCH"], "ANNOTATIONS"),
    CardsConstants = u.keyMirror(["UPDATE_SELF", "DELETE", "UPDATE", "FETCH"], "CARDS"),
    CommentTemplatesConstants = u.keyMirror(["UPDATE"], "COMMENT_TEMPLATES"),
    CommentsConstants = u.keyMirror(["UPDATE", "ADD_THREAD", "REGISTER_THREAD"], "COMMENTS"),
    FACEBOOK_ERROR_CODES = {
        1: {
            error_code: 1,
            message: "An unknown error occurred"
        },
        4: {
            error_code: 10,
            message: "Application request limit reached"
        },
        10: {
            error_code: 10,
            message: "Application does not have permission for this action"
        },
        17: {
            error_code: 17,
            message: "User request limit reached"
        },
        100: {
            error_code: 100,
            message: "Invalid parameter"
        },
        102: {
            error_code: 102,
            message: "Session key invalid or no longer valid"
        },
        104: {
            error_code: 104,
            message: "Incorrect signature"
        },
        190: {
            error_code: 190,
            message: "Invalid OAuth 2.0 Access Token"
        },
        200: {
            error_code: 200,
            message: "Permission error"
        },
        6e3: {
            error_code: 6e3,
            message: "There was a problem uploading your video file. Please try again with another file.",
            suggestion: "Retry several times and report bug if this still doesn't work."
        },
        1363042: {
            error_code: 1363042,
            message: "No Permission to Upload Video: You don't have permission to upload a video here.",
            suggestion: "Get valid access token. See Access Tokens"
        },
        1363022: {
            error_code: 1363022,
            message: "Video Too Small: The video you tried to upload is too small. The minimum size for a video is 1 KB. Please try again with a larger file.",
            suggestion: "Make sure your file is not empty."
        },
        1363030: {
            error_code: 1363030,
            message: "Video Upload Timeout. Your video upload timed out before it could be completed. This is probably because of a slow network connection or because the video is too large. Please try again.",
            suggestion: "Fix issues then retry upload."
        },
        1363019: {
            error_code: 1363019,
            message: "There was a problem uploading your video. Please try uploading it again.",
            suggestion: "Retry upload."
        },
        1363037: {
            error_code: 1363037,
            message: "There was a problem uploading your video. Please try uploading it again.",
            suggestion: "Returned when the server receives an invalid start offset from the client. Try uploading the previous successful chunks again."
        },
        1363033: {
            error_code: 1363033,
            message: "There was a problem uploading your video. Please try uploading it again.",
            suggestion: "Typically caused by connection issue, which causes server to receive partial file. Need to retry."
        },
        1363020: {
            error_code: 1363020,
            message: "No Video Selected. Please select the video you want to upload.",
            suggestion: "Need to include a file name in the parameter"
        },
        1363005: {
            error_code: 1363005,
            message: "No Permission to Edit Video. You lack permission to edit this video.",
            suggestion: "Need to include a file name in the parameter"
        },
        1363031: {
            error_code: 1363031,
            message: "No Video Detected. It looks like you are uploading a file that is not a video. Please try uploading a supported format. See Graph API Reference, Supported Formats",
            suggestion: "Provide supported format"
        },
        1363045: {
            error_code: 1363045,
            message: "There was a problem uploading your video. Please try uploading it again.",
            suggestion: "The upload video does not match the size. For example, someone start an upload session to upload 1MB file, but uploads more than 1MB data."
        },
        1363032: {
            error_code: 1363032,
            message: "No Video Detected. It looks like you are uploading a file that is not a video. Please try uploading a supported format. See Graph API Reference, Supported Formats",
            suggestion: "Provide supported format"
        },
        1363025: {
            error_code: 1363025,
            message: "Video Too Short: The video you tried to upload is too short. The minimum length for a video is 0 minutes. Please upload a longer video.",
            suggestion: "Provide video of minimum duration"
        },
        1363026: {
            error_code: 1363026,
            message: "Video Too Long. The video you tried to upload is too long. The maximum length for a video is 40 minutes. Please upload a shorter video.",
            suggestion: "Provide video under maximum duration"
        },
        1363021: {
            error_code: 1363021,
            message: "Video Upload Problem: There was a problem uploading your video. Please try again.",
            suggestion: "Retry upload"
        },
        1363023: {
            error_code: 1363023,
            message: "Video Too Large: The video you tried to upload is too large. The maximum size for a video is 2 GB. Please try again with a smaller file.",
            suggestion: "Provide video less than maximum allowed size."
        },
        1363024: {
            error_code: 1363024,
            message: "Unsupported Video Format: The video you try to upload is in a format that is not supported. Please try again with a video in a supported format, see Graph API Reference, Supported Formats.",
            suggestion: "Provide supported format."
        },
        1617005: {
            error_code: 1617005,
            message: "Cannot Add Tag: You do not have permission to add this tag.",
            suggestion: "See Permissions with Facebook Login."
        },
        1617003: {
            error_code: 1617003,
            message: "Too Many User Tags: Sorry, we can not save your tag because this video has already been tagged with the maximum number of people allowed. Please see the FAQ page on Tagging.",
            suggestion: "Limit allowed tags."
        },
        1363011: {
            error_code: 1363011,
            message: "Error Storing or Editing Video: There was an error storing or editing your video. Please try again.",
            suggestion: "Retry post."
        },
        1617006: {
            error_code: 1617006,
            message: "Already Tagged: The specified user or page is already tagged in this video."
        },
        1357005: {
            error_code: 1357005,
            message: "User-provided request parameters do not match the types specified in param_get/param_post."
        },
        1611177: {
            error_code: 1611177,
            message: "Not allowed to attach action to container: You do not have permission to publish an action with the container number",
            suggestion: "Make sure your access token has publish_actions permission"
        },
        1607004: {
            error_code: 1607004,
            message: "The date provided is earlier than the one for User birthday.",
            suggestion: "Check and verify the date is correct then retry the post"
        },
        1363041: {
            error_code: 1363041,
            message: "Error Uploading Video: There was a problem uploading your video. Please try uploading it again.",
            suggestion: "Check that you do not use an expired upload session id."
        },
        1607002: {
            error_code: 1607002,
            message: "Invalid Date, TIMELINE__INVALID_TIME_TOO_EARLY. You cannot post to that time period.",
            suggestion: "Change to a later date."
        }
    },
    FacebookSyndicationSettingsConstants = {};
FacebookSyndicationSettingsConstants.FACEBOOK_CATEGORIES = ["BEAUTY_FASHION", "BUSINESS", "CARS_TRUCKS", "COMEDY", "CUTE_ANIMALS", "ENTERTAINMENT", "FAMILY", "FOOD_HEALTH", "HOME", "LIFESTYLE", "MUSIC", "NEWS", "POLITICS", "SCIENCE", "SPORTS", "TECHNOLOGY", "VIDEO_GAMING", "OTHER"], FacebookSyndicationSettingsConstants.FACEBOOK_CALLS_TO_ACTION = ["NO_BUTTON", "SHOP_NOW", "BOOK_TRAVEL", "LEARN_MORE", "SIGN_UP", "DOWNLOAD", "WATCH_MORE"], FacebookSyndicationSettingsConstants.FACEBOOK_UNPUBLISHED_TYPES = ["PUBLISHED", "SCHEDULED", "DRAFT", "ADS_POST"];
var FilterConstants = u.keyMirror(["UPDATE_SELF", "FILTER"], "FILTER"),
    KeywordDataConstants = u.keyMirror(["UPDATE"], "KEYWORD_DATA"),
    MainConstants = u.keyMirror(["UPDATE"], "MAIN"),
    MassExportConstants = u.keyMirror(["START", "CANCEL"], "MASS_EXPORT"),
    MassLikeConstants = u.keyMirror(["FETCH_CHANNELS", "SELECT_CHANNEL", "DESELECT_CHANNEL", "SELECT_ALL", "DESELECT_ALL", "MASS_LIKE"], "MASS_LIKE"),
    MasterVideosConstants = u.keyMirror(["CREATE_VIDEO", "CREATE_FACEBOOK_VIDEO", "UPDATE_FACEBOOK_VIDEO", "SET_FILE", "SET_YOUTUBE_ID", "START_UPLOAD", "CANCEL_UPLOAD", "SYNDICATE", "LOAD_FROM_YOUTUBE_ID"], "MASTER_VIDEOS"),
    MyVideosConstants = u.keyMirror(["UPDATE_SELF", "FETCH_ALL", "FETCH_PAGE", "CANCEL"], "MY_VIDEOS"),
    PlaylistsConstants = u.keyMirror(["UPDATE_SELF", "FETCH"], "PLAYLISTS"),
    SubscribersConstants = u.keyMirror(["UPDATE"], "SUBSCRIBERS"),
    TemporaryConstants = u.keyMirror(["UPDATE_SELF"], "TEMPORARY"),
    ThumbnailEditorConstants = u.keyMirror(["UPDATE"], "THUMBNAIL_EDITOR"),
    ThumbnailTemplatesConstants = u.keyMirror(["UPDATE", "ADD_TEMPLATE"], "THUMBNAIL_TEMPLATES"),
    TranslationConstants = u.keyMirror(["TRANSLATE", "UPDATE_LANGUAGE", "UPDATE"], "TRANSLATION"),
    TrendingVideosConstants = u.keyMirror(["SORT", "FETCH"], "TRENDING_VIDEOS"),
    UploadCompanionConstants = u.keyMirror(["UPDATE", "UPDATE_SETTING"], "UPLOAD_COMPANION"),
    VideoBufferConstants = u.keyMirror(["UPDATE_SELF"], "VIDEO_BUFFER"),
    VideoCompanionConstants = u.keyMirror(["UPDATE", "ADD_KEYWORD", "REQUEST_DATA"], "VIDEO_COMPANION"),
    OVERVIEW_STAT_BOXES = [{
        keys: ["vidiq_score"]
    }, {
        keys: ["vph"]
    }, {
        keys: ["views"]
    }, {
        keys: ["engagements"]
    }, {
        keys: ["subs_driven", "percent_sub_views"]
    }, {
        keys: ["organic_views"]
    }, {
        keys: ["avg_view_time", "duration"]
    }, {
        keys: ["estimated_earnings"]
    }],
    SEO_STAT_BOXES = [{
        keys: ["seo_score"],
        popover: "VC_SeoScorePopover"
    }, {
        keys: ["creator_suggested"]
    }, {
        keys: ["desc_word_count"]
    }, {
        keys: ["annotations", "cards"]
    }, {
        keys: ["words_per_minute"]
    }, {
        keys: ["desc_link_count"]
    }, {
        keys: ["yt_search_views", "suggested_views"],
        popover: "VC_YtSearchSuggestedPopover"
    }, {
        keys: ["num_google_traffic_sources", "referred_views"],
        popover: "VC_ReferrerPopover"
    }, {
        keys: ["num_google_embed_sources", "embedded_views"],
        popover: "VC_EmbedPopover"
    }],
    CHANNEL_STAT_BOXES = [{
        keys: ["estimated_monthly_revenue"]
    }, {
        keys: ["channel_views"]
    }, {
        keys: ["avg_daily_views"]
    }, {
        keys: ["recent_channel_views"]
    }, {
        keys: ["mcn"]
    }, {
        keys: ["channel_subscribers"]
    }, {
        keys: ["avg_daily_subs"]
    }, {
        keys: ["recent_channel_subs"]
    }],
    SOCIAL_STAT_BOXES = [{
        keys: ["engagement_rate"]
    }, {
        keys: ["like_ratio", "yt_likes", "yt_dislikes", "yt_comments", "yt_shares"]
    }, {
        keys: ["fb_likes", "fb_shares", "fb_comments"]
    }, {
        keys: ["reddit_likes", "reddit_comments", "reddit_posts", "stumbleupon", "linkedin", "google_plus"]
    }],
    VC_OTHER_REQUESTED_DATA = ["insight_traffic_ext", "insight_top_embeds", "insight_traffic_yt_search", "insight_traffic_yt_suggested", "suggested_video_referrer_details", "top_countries", "top_devices", "tweet_list", "charts", "historical_csv", "channel_keywords"],
    VC_DECLARED_STATS = [{
        key: "views"
    }, {
        key: "duration"
    }, {
        key: "desc_word_count"
    }, {
        key: "desc_link_count"
    }, {
        key: "cards"
    }, {
        key: "words_per_minute"
    }, {
        key: "engagements"
    }, {
        key: "yt_likes"
    }, {
        key: "yt_dislikes"
    }, {
        key: "yt_comments"
    }, {
        key: "fb_shares"
    }, {
        key: "fb_comments"
    }, {
        key: "stumbleupon"
    }, {
        key: "linkedin"
    }, {
        key: "google_plus"
    }, {
        key: "keyword_recs"
    }, {
        key: "engagement_dist"
    }, {
        key: "channel_views",
        label: "total views"
    }, {
        key: "avg_daily_subs",
        tooltip: "Based on last 30 days"
    }, {
        key: "avg_daily_views",
        tooltip: "Based on last 30 days"
    }, {
        key: "estimated_monthly_revenue",
        label: " monthly revenue",
        currency: !0
    }, {
        key: "like_ratio",
        percent: !0
    }, {
        key: "yt_shares",
        tooltip: function(e, o) {
            var s = o.views;
            if (!(1e3 > s)) return e / s >= .01 ? "This video is heavily shared!" : "This video does not have a large percentage of shares."
        }
    }, {
        key: "fb_likes",
        tooltip: function(e, o) {
            var s = o.views;
            if (!(1e3 > s)) return e / s >= .01 ? "This video is heavily liked on Facebook!" : "This video does not have a large percentage of likes on Facebook."
        }
    }, {
        key: "creator_suggested",
        tooltip: "The number of total suggestions in the right-hand side that YouTube is making back to the creator. An indicator of how well the creator is optimized for retaining users."
    }, {
        key: "annotations",
        tooltip: "The number of annotations on this video."
    }, {
        key: "cards",
        tooltip: "The number of cards on this video."
    }, {
        key: "mcn",
        size: "smaller"
    }, {
        key: "reddit_comments",
        url: "reddit_url"
    }, {
        key: "reddit_posts",
        url: "reddit_url"
    }, {
        key: "reddit_likes",
        label: "reddit upvotes",
        url: "reddit_url"
    }, {
        key: "channel_subscribers",
        label: "subscribers"
    }, {
        key: "engagement_rate",
        percent: !0
    }, {
        key: "num_google_traffic_sources",
        label: "referrers"
    }, {
        key: "num_google_embed_sources",
        label: "embed srcs"
    }, {
        key: "estimated_earnings",
        currency: !0,
        tooltip: "Estimated earnings are based on a $1.50 CPM for this video."
    }, {
        key: "vidiq_score",
        label: "vidIQ score",
        score: !0,
        outOf: 100,
        tooltip: "vidIQ score is the popularity of a video based on engagements and views relative to other videos on YouTube. 99/100 would mean that its in the 99th percentile of videos on YouTube, built on an equal weight of views and engagements."
    }, {
        key: "seo_score",
        label: "SEO score",
        outOf: 100,
        score: !0,
        size: "bigger"
    }, {
        key: "vph",
        label: "views per hour",
        include: "VC_SpeedometerWrapper",
        hideZero: !0,
        tooltip: function(e, o) {
            var s = o.average_vph,
                r = u.numbro(s, {
                    thousands: !0
                }),
                t = u.numbro(e, {
                    thousands: !0
                }),
                i = e - s,
                a = u.numbro(Math.abs(i), {
                    thousands: !0
                }),
                n = i > 0 ? "more than" : "less than";
            return 0 !== i && "0" !== a || (n = "SAME"), "average" !== o.vph_method && "SAME" !== n ? "This video is currently getting " + t + " views per hour, which is " + a + " " + n + " this video's average views per hour of " + r + "." : "The amount of views per hour this video is currently getting is " + t + "."
        }
    }, {
        key: "subs_driven",
        "private": !0
    }, {
        key: "percent_sub_views",
        label: "sub views",
        "private": !0,
        percent: !0
    }, {
        key: "organic_views",
        "private": !0,
        percent: !0
    }, {
        key: "avg_view_time",
        "private": !0,
        percent: !0,
        tooltip: function(e) {
            return .3 > e ? "Watch time is low" : .7 > e ? "Watch time is average" : .85 > e ? "Watch time is good" : "Watch time is incredible!"
        }
    }, {
        key: "referred_views",
        "private": !0
    }, {
        key: "embedded_views",
        label: "embed views",
        "private": !0
    }, {
        key: "yt_search_views",
        "private": !0
    }, {
        key: "suggested_views",
        "private": !0
    }, {
        key: "recent_channel_views",
        label: "views last 30 days",
        tooltip: channelGrowthTooltipFunction
    }, {
        key: "recent_channel_subs",
        label: "subs last 30 days",
        tooltip: channelGrowthTooltipFunction
    }],
    SOCIAL_STATS = ["yt_likes", "yt_dislikes", "yt_comments", "yt_shares", "fb_likes", "fb_shares", "fb_comments", "tweets", "reddit_likes", "google_plus", "stumbleupon", "linkedin"],
    HISTORICAL_SOCIAL_STATS = ["comments", "likes", "dislikes", "shares", "facebook_likes", "facebook_shares", "facebook_comments", "tweets", "reddit_count", "reddit_posts", "reddit_comments", "google_plus_ones", "stumbleupon_count", "linkedin_count"],
    HISTORICAL_SOCIAL_STATS_MAP = [{
        label: "YouTube Comments",
        color: "#cf2000"
    }, {
        label: "YouTube Likes",
        color: "#cf2000"
    }, {
        label: "YouTube Dislikes",
        color: "#cf2000"
    }, {
        label: "YouTube Shares",
        color: "#cf2000"
    }, {
        label: "Facebook Likes",
        color: "#09509c"
    }, {
        label: "Facebook Shares",
        color: "#09509c"
    }, {
        label: "Facebook Comments",
        color: "#09509c"
    }, {
        label: "Tweets",
        color: "#399ac5"
    }, {
        label: "Reddit Upvotes",
        color: "#fc5100"
    }, {
        label: "Reddit Posts",
        color: "#fc5100"
    }, {
        label: "Reddit Comments",
        color: "#fc5100"
    }, {
        label: "Google+",
        color: "#6f6f6f"
    }, {
        label: "Stumbleupon",
        color: "#932f00"
    }, {
        label: "LinkedIn",
        color: "#2384c0"
    }],
    VideoInfoConstants = u.keyMirror(["UPDATE"], "VIDEO_INFO"),
    VideosConstants = u.keyMirror(["UPDATE_SELF", "UPDATE_VIDEO", "REGISTER_UPDATE", "UNREGISTER_UPDATE"], "VIDEOS");

function tooltips(t) {
    this._defaultConfig = t || {}, this.config = _.extend({}, this._defaultConfig), this.bind(), this.timeout = null, this.tip = this.getTipEl(), this.tf = !1, this.forceCloseTimeout = null
}
var Tooltips = tooltips;
tooltips.prototype.bind = function() {
    var t = this,
        i = $(this.config.parent),
        s = this.config.namespace || "vidiqtt";
    $("body").off("." + s), i.off("." + s), i.on("mouseenter." + s, "[data-tip-message]", function(i) {
        t.tipShow(i, this.getAttribute("data-tip-message"))
    }), i.on("mouseleave." + s, "[data-tip-message]", _.bind(this.tipHide, this)), $("body").on("mousemove." + s, function(i) {
        if ("follow" === t.config.position) {
            var s = 15;
            t.tip.css({
                top: i.pageY - s + (t.config.adjustY || 0),
                left: i.pageX + s
            })
        }
    })
}, tooltips.prototype.tipHide = function() {
    if (this.tip) {
        var t = this,
            i = _.isNumber(this.config.delay) ? this.config.delay : 300;
        this.timeout = setTimeout(function() {
            t.tip.fadeOut("fast", function() {
                t.timeout = null
            })
        }, i)
    }
}, tooltips.prototype.getTipEl = function() {
    var t = $(".judgement-tip");
    return t.length || (t = $('<span class="judgement-tip"></span>'), t.hide(), $("body").append(t)), t
}, tooltips.prototype.tipShow = function(t, i) {
    this.timeout && clearTimeout(this.timeout), this.forceCloseTimeout && clearTimeout(this.forceCloseTimeout), this.forceCloseTimeout = setTimeout(_.bind(this.tipHide, this), 2e4);
    var s = $(t.currentTarget),
        e = !1;
    if (s.parents().each(function() {
            var t = $(this);
            (t.is(":hidden") || "0" === t.css("opacity")) && (e = !0)
        }), !e && i) {
        this.config.className && this.tip.removeClass(this.config.className), this.config = _.extend({}, this._defaultConfig), s.data("follow") === !0 ? this.config.position = "follow" : s.data("fixed") === !0 && (this.config.position = "fixed"), s.data("adjust-y") ? this.config.adjustY = parseInt(s.data("adjust-y"), 10) : this.config.adjustY = 0;
        var o = s.data("delay");
        if ((_.isNumber(o) || o) && (this.config.delay = _.isNumber(o) ? o : parseInt(o, 10)), s.data("center") && (this.config.center = !0), s.data("class") && (this.config.className = s.data("class"), this.tip.addClass(this.config.className)), i != this.tip.html()) this.tip.html(i);
        else if (this.tip.is(":visible") && 1 === this.tip.css("opacity")) return;
        if ("follow" === this.config.position) this.tip.fadeIn("fast");
        else {
            var a, n = this.tip.outerHeight(),
                f = 8,
                h = 0;
            a = this.tip.outerHeight() > 50 ? s.offset().top + s.outerHeight() + h : s.offset().top - (n + h), a += this.config.adjustY || 0;
            var p = s.offset().left + f;
            if (this.config.center) var p = s.offset().left - (this.tip.outerWidth() - s.outerWidth()) / 2;
            this.tip.is(":animated") || this.timeout ? this.tip.stop().css({
                display: "block"
            }).animate({
                top: a,
                left: p,
                opacity: 1
            }, 300) : (this.tf || (this.tip.hide(), this.tf = !0), this.tip.css({
                top: a,
                left: p
            }).fadeIn("fast"))
        }
        this.timeout = null
    }
};
window.tabs = {
    state: {},
    off: {
        active: "",
        display: "hidden"
    },
    on: {
        active: "tab-active",
        display: "shown"
    },
    getState: function(t, a) {
        return this.state[t] || (this.state[t] = {}, _.each(a, function(a, i) {
            this.state[t][a] = 0 === i ? _.clone(this.on) : _.clone(this.off)
        }, this)), this.state[t]
    },
    enable: function(t, a) {
        _.each(this.state[t], function(i, e) {
            this.state[t][e] = e === a ? _.clone(this.on) : _.clone(this.off)
        }, this)
    }
}, $("body").on("click", ".tab-group .tab-links a", function(t) {
    t.preventDefault();
    var a = $(this),
        i = a.parents(".tab-group").data("tab-group"),
        e = a.data("tab");
    window.tabs.enable(i, e), a.parents(".tab-group").find(".tab-container[data-tab=" + e + "]").show().siblings(".tab-container").hide(), a.addClass("tab-active").parents("li").siblings().find("a").removeClass("tab-active"), a.parents(".tab-group").trigger("tabs:change")
});

function vph(t, e) {
    this.args = t;
    var i = this;
    this.bestStrategy(function(t) {
        function a(t) {
            if (!t.length) return e("N/A");
            var r = t.shift();
            i[r](function(c) {
                "N/A" === c || 0 > c ? a(t) : (i.strategyUsed = r, e.call(i, c ? c : "N/A"))
            })
        }
        a(t)
    })
}
vph.prototype = {
    bestStrategy: function(t) {
        ytApi().getLocalStats(["publishedAt"], function(e) {
            var i = (Date.now() - Date.parse(e.publishedAt)) / 864e5;
            t(7 > i ? ["calcWithDiff", "calcWithViewsOverTime", "calcWithSubsDriven"] : ["calcWithDiff", "calcWithSubsDriven"])
        })
    },
    calcWithSubsDriven: function(t) {
        try {
            ytApi().subsDriven(this.args.videoID, function(e) {
                var i, a = e.graphData.views.daily.data;
                if (!a.length) throw 1;
                var r = a.length - 2;
                0 > r && (r = 0);
                var i = Number(Number(a[r] / 24).toFixed(1));
                i && !isNaN(i) || (i = "N/A"), t(i)
            })
        } catch (e) {
            t("N/A")
        }
    },
    calcWithViewsOverTime: function(t) {
        try {
            ytApi().getLocalStats(["views", "publishedAt"], function(e) {
                var i = (Date.now() - Date.parse(e.publishedAt)) / 36e5,
                    a = e.views,
                    r = Number(Number(a / i).toFixed(1));
                r && !isNaN(r) || (r = "N/A"), t(r)
            })
        } catch (e) {
            t("N/A")
        }
    },
    calcWithDiff: function(t) {
        var e = this;
        ytApi().subsDriven(e.args.videoID, function(e) {
            var i = Date.parse(e.date),
                a = (Date.now() - i) / 36e5;
            ytApi().getLocalStats(["views"], function(i) {
                var r;
                try {
                    r = document.querySelector(".watch-view-count").innerText.match(/[0-9,]+/).pop().replace(/,/g, "")
                } catch (c) {}
                var n = i.views;
                r && (n = r);
                var s = n - e.views,
                    u = Number(Number(s / a).toFixed(1));
                u && !isNaN(u) || (u = "N/A"), t(u)
            })
        })
    }
};
! function(e) {
    "use strict";
    "function" == typeof define && define.amd ? define(["jquery", "underscore"], function(a, o) {
        return e(a, o)
    }) : window.HotSearch = e($, _)
}(function($, _) {
    "use strict";

    function HotSearch(e, a) {
        this.base = e, this.cid = a
    }
    var MAGIC_WORDS = ["pautips", "game maker", "captainsparklez tnt", "let's play minecraft", "rich gang", "caligula", "spacetoononline", "portuguese", "lacey sturm", "brexit referendum", "look alive rae sremmurd", "plus size", "getter", "secretary", "kohh", "live agar.io", "on the floor jennifer lopez lyrics", "big room ", "pumped up cardio warmup blogilates", "sam hunt in a small town ", "portugal vs france euro 2016 highlights", "i cheated on my boyfriend", "girl dance sexy", "coil master 521 tab", "grouplove", "fits", "fuck off", "photography jobs", "all overwatch characters", "wait for it", "demon king", "my little pony - friendship is magic", "how you remind me nickelback", "indonesian idol", "super vines", "lizza", "chopped", "thy will be done", "beauty and the beast song", "j star", "mandopony", "kid songs", "chudai", "don don song", "luffy vs goku", "calum mcswiggan", "hare krishna", "how to download windows 10", "train drops of jupiter", "call of duty dlc 3", "random lol moments", "water world", "50 cent 21 questions", "steven universe theme song", "bashurverse breakdown ", "save me bts live", "persona q battle theme", "funny sexy", "skinwalker", "best of the voice", "lonely kodak black", "evidence", "muerte en hawaii", "top euro 2016 goals", "turkey spain", "naruto shippuden ending", "stressed out 21 pilots", "ov", "gripex", "sabaton the lost battalion ", "strange addiction full episode", "when you tell me that you love me", "lamborghini aventador", "let it go remix", "mandy moore", "fifa gameplay 2016", "lova", "tal para cual", "pewdiepie leafy", "red lights", "shivaya", "cartoon songs", "be a man", "multimedia", "karnage clan", "watch out for this major lazer", "monster drake ", "lil uzi you was right", "rihanna bitch", "the finger family", "pokemon indigo league", "kobe paras", "france vs germany", "land of confusion", "ronin", "mad max fury road", "hate story 3 songs", "salvatore", "star fox", "dead rising 4", "transition", "last resort papa roach", "my niggaa yg ft young jeezy lyrics", "kanye west official", "missy elliott work it", "fat burning", "michael jordan highlights", "dreamcast", "here without you", "p v p", "king of the road", "21:9", "smosh pokemon", "borgore 100s", "the day after tomorrow ", "pancake art", "gta san andreas 2016", "enter the gungeon boss", "futbolist", " berleezy]\\", "game 7 steph curry", "pokemon highway", "cat tv", "savdhaan india", " iridocyclitis", "nintendo 3ds", "kalista", "caravan palace", "burn it down", "song of the deep", "motherfucker", "only a chilling elegy", "panda cover", "viking clap", "drake calabasas", "hat karaoke", "sonali bendre", "property", "50 in da club", "chris froome", "tipsy bartender", "funniest video ", "rumble 2015", "best healthy foods", "full concert 2016", "call of duty world at war", "xxx deepika", "dbz animation", "the finest hours", "you know my name", "huahwi", "dan deacon", "bass house", "stolen dance remix", "stain", "zal", "soccer skills", "chile vs colombia 2016", "tibetan mastiff", "alli west", "vaquero", "what happened", "yana", "bfg trailer", "kabali movie trailer", "world tv", "gta 5 cj", "real suicide squad", "fire challenge", "girls party", "clash royale tournament", "cercas", "god gave me you blake shelton", "jo joe", "kevin macleod ", "suicide squad trailer 3", "pratik bilgiler", "transistor", "all me drake", "lone star", "country rock", "free game play", "thiojoe", "no megan ", "pokemon go gps not found]", "sarainodu video songs", "em da biet", "redman freestyle", "chance the rapper mixtape", "h3h3 dj khaled", "romantic comedy movies", "loot 2", "gaming room tour", "fnaf songs", "england vs sri lanka 2016", "1070 review", "sky 1 apocalypse", "butterflies michael jackson", "conjuring full movie hindi", "elite: dangerous", "soccer trailer", "spongebob song", "chinchilla", "monark", "rap god eminem lyrics", "carly rae jepsen i really like you", "pewdiepew", "rihanna instrumental", "goldie", "juniper", "bo make happy", "eminem 8 mile ", "coffe", "new hindi songs 2016 latest this week ", "watch dog", "fireplace ", "nothing gonna my love for you", "plex", "seeker", "usa basketball", "feminism", "top amazing", "best vines 2016", "love you  song 2016", "ecs", "r&b playlist", "song khmer", "stage dance", "back to school lunch ideas", "dana white", "bungou stray dogs", '"a fish"', "everything wrong with deadpool ", "sieu nhan nhen]", "80 music", "madonna live", "unbreak my heart", "hollow da don", "linkin park inthe end", "vocal trance", "evil dead trailer ", "tip top", "twilight zone", "shadowbeatz", "dragon animation", "td jakes", "minnesotaboyy", "beartooth", "kim chi", "hotel room", "to the ground", "the kapil sharma show - episode 22", "trung luong", "cpm", "wildfire ", "wukong top", "unboxing samsung", "diep vu mua he", "dirtpatcheaven", "top 1o", "irl", "10000 days", "aspiradora casera", "wizard101 walkthrough part 1", "team coco", "lil dicky freestyle", "spyro", "enya only time", "family guy episodes", "scott stapp", "hindi x", "pepsiman", "flash episode 1", "new police shooting", "overwatch competitive", "new punjabi movies 2016 full movies ", "re7", "seven nation army glitch mob ", "malayalam full movie 2015", "dragon ball song", "pythongb", "zit", "abstract", "davidsocomedy", "lien minh truc tiep", '"earned it," the weeknd', "ozone", "syndicate project ", "liza koshy ", "panda trap", "a drama", "pokemon battles", "sex movie english", "blue exorcist", "deep 2016 mix", "pink floyd lyrics", "ben simmons interview", "movies 2016 release", "paradise logic", "arms of sorrow", "circle of life", "chance the rapper xxl", "corn makes whiskey official video", "sony tv", "ice hockey", "rob stone", "yo gotti law ", "oportunidad de negocio herbalife", "slipknot snuff", "sharpie shock challenge", "work from home song", "yamborghini high instrumental", "hypnotized", "sex tips", "pfister 811", "friday rebecca black ", "assetto corsa", "blink 182 full album", "best car", "guitar lessons ", "i prevail", "damn daniel", "blender templates", "brothers in arms dire straits", "lay me down sam smith lyrics", "roundabout\\", "android gameplay", "brazil vs argentina", "panda instrumental ", "omfg - i love you", "animals song", "how to make a game", "eminem till i collapse ", "how to get phantom for snapchat without jailbreak", "ayesha curry", "headphone", "criousgamers", "democracy", "titanium cover", "loans", "gta glitches", "la now", "movieclips", "berserk 2016 episode 2", "beatles something", "7 years lukas graham cover", "drake bell", "vodkprod", "ronaldo best goals", "battlefield 4 multiplayer", "baby  sex", "thor ragnarok", "try not to laugh kids", "more ali a", "gagatun", "minecraft war", "terraria mods", "los buitres de culiacan", "gunah benim", "the stock market", "wildside", "bicycle kick", "wonderful tonight eric clapton", "turtle dove yeezy", "do lafzon ki kahani full movie ", "allen iverson highlights", "prank bomb", "the walking dead reaction", "oh wonder white blood", "viewtiful joe", "tcr", "sufjan stevens", "pluto ", "ca nha thuong nhau", "logic pro x", "rochelle fox", "bluegrass", "ruins", "shattered backboard", "jordyn jones", "amazon fire tv kodi", "contest of champions 5 star", "potion minecraft", "phantomlord", "first night", "mndsgn camelblues", "macy", "designer panda", "dj khaled drake for free", "selfies", "noahj456 origins", "vr games", "no problem chance the rapper", "richa sharma", "trach ai vo tinh", "masha and the bear english episodes", "conjuring 2 valak", "nexus 6p", "elon musk", "nexus siege", "la la latch - pentatonix", "drug dealers anonymous pusha t", "ugly god ", "man of the year", "game of thrones season 1 episode 1 full episode part 1", "we dem boyz wiz khalifa", "whales ", "cancer cure", "volleyball world", "asmr tapping ", "daemon tools", "alors on danse", "suicide squad twenty one pilots", "fallout 4 nuka world", "if i cant", "game of thrones explained", "vishnu sahasranamam", "hao xiang", "kung fu panda 3 full movie ", "vuelveme a querer thalia", "flower bada", "brock vs mark hunt", "pakistani movie", "i hate everything about you", "exid l.i.e", "mighty no.9", "taz ", "panda desiigner dance", "prank compilation", "dance moms season 1", "thahasan", "wadi diab 10", "reality show", "under the water", "sdmn", "maple leaf rag", "sinan sakic", "ainsley", "carrie (2013)", "beneath your beautiful ", "wtfast", "accounting", "the day naruto became hokage ", "xxx return of xander ", "windows 10 download", "beartooth ", "sy ari da kid", "senbonzakura", "nawazuddin siddiqui latest movie", "shut up unnies", "company of heroes 2", "inna love ", "xvideos", "computers", "cnn breaking news", "you give love a bad name", "onivia", "algeria", "david blaine", "filmora", "hospital scene", "new bangla natok ", "mark zuckerberg", "mahnilar", "eminem beautiful", "handmade", "tom odell another love", "lmms", "passe compose", "try not to laugh 2016", "get rich", "productiion", "itv", "why is the rum gone", "queen of the south", "world wide choppers tech n9ne", "jeana", "allahu akbar song", "disneyland paris", "shawn johnson", "borderlands gameplay", "10 minutes", "comedy thai", "curar", "geometry dash 2.1", "ground up", "nelly hot in here", "youtube gaming", "fairy tail main theme ", "squidward", "hyderabadi", "the movie guys", "chiropractic", "parks and recreation", "super fly", "live argentina vs chile ", "variable", "pet wolf", "anuel farruko", "city angels", "justin bieber never say never", "matt black", "bud spencer", "happy new year", "wash and go", "how to twitch", "metallica sanitarium ", "tyronn lue obama", "it scene", "minecraft episode 1", "x factor worst auditions", "j cole fire squad ", "thrasher", "colbert report", "got talent best auditions", "bangla movie new song 2016", "ride remix", "bad religion", "genghis khan", "road trip", "i see stars ", "danteh", "short film hot", "fitoor songs", "niger", "sorr", "jailhouse rock", "pokemon go level", "dizzy dros", "masha 2016", "italy vs spain 2016", "nina playlist", "pc fifa 16", "missouri", "patrik", "consumer", "kofs", "the tiny", "mad city lyrics", "independence day 2016", "law of attraction affirmations", "new horror movies", "cimorelli", "justin bieber skrillex", "jealousy roy woods", "broughy1322", "era istrefi  bon bon\\", "how to download minecraft for free ", "bombom", "real time with bill maher", "the voice china", "coby persin", "norfolk", "jauz", "true stories", "story for kids", "yella beezy run up a check", "therichest", "paper planes mia", "honey boo boo", "fik shun ", "boat paper", "republican national convention", "tales music", "uk leaving eu", "logic flexecution", "abhishek bachchan", "rin tin tin", "resident evil 7 biohazard", "game kids", "dwyane wade bulls", "videos for cats", "dirty song", "animals life", "audi a3", "craig ferguson", "mad max gameplay", "i want to travel", "(personagens", "rif", "grand theft auto 5", "prank videos funny", "lovefool cardigans", "bellulargaming", "never say goodbye", "ufc embedded", "un amor de verdad ", "yah", "horror movie trailer", "armpit", "jason upton", "she said hola como esta she said konichiwa", "and i love you so", "desi indian ", "addicted to you", "fight worldstar", "let it go karaoke", "eid song", "100m", "german shepherd", "game night", "shahrukh khan songs", "kaskade", "cristiano euro 2016", "monkey king", "nutrition", "overwatch free", "guess who", "flocabulary", "fack", "boos", "carly rose", "the binding of isaac", "kinky", "tool cover", "eleni", "beach city", "jason lake", "good take", "tsum tsum", "singing before and after", "afrosenju", "free outro templates", "grace helbig ", "are you with me lost frequencies ", "great wolf sif", "ld", "black ops 3 emblems", "david dobrik", "em cua ngay hom qua", "bahubali movie mistakes", "sex india", "kylo ren", "eminem vevo", "et katy perry ", "transformers 4 full movie", "health clinic", "typical gamer", "king for a day pierce the veil", "covered", "always - panama", "painkiller", "horse riding", "circus halligalli", "the mermaid full movie", "daenerys targaryen", "supercars", "spanish guitar", "gta v mod menu", "cordero", "faith george michael", "flash vs zoom", "karlee grey", "youtube game", "benny greb", "blackjack bo3", "electronics", "desiigner panda remix", "miesha vs nunes", "scary games ", "bgc ", "spaider man", "trump live", "troll 2", "focus rs", "shakira songs", "nananana", "stranger of sword city ", "elvis presley jailhouse rock", "mayo chiki", "lat mat 2", "cake without oven", "i dont want to oh oh oh ", "epic meal time", "ironman 2016", "anh muon noi", "fun run", "jekyll and hyde ", "sexy music", "ordinary love", "dallas officers", "roger rabbit", "deemo gameplay", "railways", "cat vines", "neil degrasse tyson", "teen show", "butt workout ", "hocus pocus ", "gta 3 download for pc free full version ", "something about you", "ray j ", "video reaction", "ultimate edition batman v superman", "mr robot trailer", "calculus", "twist crunches", "end of the time", "excision bass cannon", "salsa dance", "flp ", "dirty harry", "bangla cartoon", "opps", "stop motion animation", "faded - sing me to sleep", "mrsuicidesheep ", "one piece 747", "hoopa", "kailash kher", "minecraft city", " ethangamertv ", "international relations", "pokemon go glitch", "haunted collector full episodes", "baby crying", "khmer movies", "famous kanye west lyrics", "wake me up inside", "planet x", "acoustic cover songs", "atencion atencion", "mma hour", "cinema 3d", "jay leno garage", "chester ", "how to disappear completely radiohead ", "formal", "sanam teri kasam full movie", "safe and sound capital cities", "telemundo", "anna marie ", "allahu akbar remix", "wide awake", "digibro", "shampoo prank", "zico boys and girls", "ludacris move b tch", "uber everywhere trill sammy", "daytime", "best magician", "cafunga carequinha", "gym music", "i am the best", "panda remix desiigner", "news 24", "coronamos", "youtube partnerships", "bluecoats 2016 ", "trapnation", "photoshop coloring tutorial", "spongebob caveman", "break my mind", "ipad air 2 ", "omam", "g2a ", "star wars battlefront gameplay", "dark souls soundtrack", "mustafa sandal", "anne happy", "prophet muscle rich piana", "christina grimmie jesus", "wisconsin dells", "highest pokemon go cp", "krampus trailer 2015", "toys kids", "cuoi xuyen viet tap 6", "amber rose", "bengali full movies", "real life minecraft", "808 mafia type beat", "tweark ", "best monitor", "shoot to thrill", "mckinney", "kaitangata", "karl lagerfeld", " idubbbz", "cultural", "stanley parable", "indian bangla movie", "region", "ricegum roast yourself", "ps4 minecraft", "sonic x", "hot news", "battleblock theater", "batman spiderman", "naruto ultimate ninja storm 3", "mint lemonade", "maitre gims bella", "behind blue eyes", "top teen", "diy testing", "inspirational videos - ", "richkidstv ", "fender squier", "enb", "kuusou mesorogiwi", "mass effect andromeda gameplay", "nude beach", "forex trading platform", "bangla hit song", "john cena vine", "i got song", "kairosplanet", "audition adobe", "dam vinh hung 2016", "marvel spiderman", "uninstall", "trap queen fetty wap lyrics", "saitama vs goku", "bones this is the last time", "kiznaiver", "how to display iphone on computer", "song collection", "adam locked away", "free photoshop", "edm remix", "tom va jerry", "zane", "duncan trussell", "corsair strafe rgb", "tokyo ghoul 3", "fifa 15 career mode", "beethoven moonlight sonata", "macintosh plus", "jeremy lin", "iphone function", "red chris", "pharah guide", " gadgets", "minecraft gameplay", "we own it", "blink 182 new album", "nargis", "440 volt song", "just smoke ", "funniest videos", "karaoke all of me'", "bichagadu full movie", "stupcat", "kidd keo ", "jinn", "jump in the line", "clueless gamer", "ipl cricket", "no hay mas alto", "the good dinosaur", "game of thrones ending", "kikilu hot", "hum tv drama", "alesana", "show champion", "american woman ", "motivational music", "the judge", "spiders", "w2s pack opening", "swat team", "haynes", "our family nest", "activated charcoal", "breakdance", "milf $", "wrong side of heaven five finger death punch", "gulabi", "dayz 0.60", "all the time jeremih lyrics", "munchies", "why i think this world should end", "doraemon vietsub", "chilled chaos", "phantom forces roblox", "modest mouse", "by chance", "new releases", "ashique", "sme", "chuggaaconroy", "pillars of eternity", "undertale sans song", "around the world daft punk", "sanic", "history live", "swimming pools kendrick lamar", "miss teacher movie", "twenty one pilots cover", "2016 audi q5 ", "club lock", "irql_not_less_or_equal", "server no premium 1.8", "audi a6", "rc adventures", "jenn", "ign news", "adobe illustrator ", "oye mujer", "star wars episode 8", "right left brain", "shikari movie", "braveheart", "oun", "schwartz", "battlefront bespin", "next cod ", "rides with strangers ", "e cig explosion ", "alen", "skyward sword", "indoor games", "clean car", "gucci mane jail ", "phoebe ryan", "daniel bryan", "mithzan ", "nipsey hussle", "panda freestyle", "3d things", "angelic ", "kanye west video", "skyrim archer build", "vine try not to laugh", "pokemon anime", "hi-tech", "kids colors", "audi s6", "electronic dance music", "dudesons ", "nick live", "zoe saldana", "it's my life", "dying hair", "tense", "panda beat", "buenos vecinos", "ghostbusters theme song", "behind the scenes game of thrones", "most viewed video on youtube\\", "keemstar fight", "how to play pokemon on iphone ", "vr video", "guitar background music", "ahmed and wajeeh", "2pac dear mama", "zomboy", "buildings", "chapter 1", "dead or alive xtreme 3", "body rock tv", "ld shadow lady", "duane ", "this could be us", "thieving", "vr star trek game", "best edm", "this is amazing grace ", "xm21", "samara", "pumped up kicks remix ", "matt damon", "how to make intro ", "beyond good and evil", "russian roulette", "yamaha r1 ", "beautiful day", "homestuck", "nba 2k15 ", "cejas perfectas", "for jason", "radhika", "happy birthday to you", "haggard merle", "korea movie 18+", " hilarious", "the man who sold the world nirvana", "jesse wellens  ", "pres", "game of thrones sex", "rio olympics", "le bao binh", "brexit the movie", "parker games", "stirling engine", "pewdiepie diamond play", "cocoa butter kisses ", "la vagabonde", "green day 21 guns", "funy", "pokemon black battle music", "hinder", "bayonetta 2", "extv", "wiz khalifa we dem boyz", "ndng  baturay", "zone patrol", "cod montage", "chiquis rivera", "airbus ", "yori yori", "stay kygo", "space bound eminem", "photoshop cs6 tutorial ", "skylander boy and girl ", "company drake", "pewdiepie csgo", "ritz", "korea hot", "black betty", "garo ", "nislt", "unravel piano", "landmark", "im madonna", "call of duty remastered", "ugly god", "moon river", "need for speed 2005 most wanted ", "925", "sylvester stallone", "play the game of winston", "fania", "kids movies 2016", "ace of spades", "tiw tiw", "aha take on me", "remix nhac vang", "descuidos", "marcus and martinus", "the weeknd acquainted", "pretty little psycho", "driftor ", "glove", "youtube banner", "bajan", "tamil hindi dubbed movie 2016 ", "anime vines ", "contouring", "pokemon intro", "bitch, dont kill my vibe", "hot boy xam tro", "childs play", "mithzan", "baby lyrics justin bieber ft ludacris", "apple iphone", "child's play drake", "mila kunis", "overwatch fr", "lonnie", "levanto mis manos", "batman telltale", "messi best goals", "elton john sorry seems to be the hardest word", "coco jambo", "end of the world", "freddieismyqueen", "mentor kurtishi", "steven tyler", "royal blood ", "pour it up", "messi hat trick", "star wars clone wars", " bangla songs 2016", "food recipe", "shawn mendes interview", "anime crack", "olympic trials 2016", "lol dance", "timmy trumpet freaks", "halsey castle", "rock vs roman reigns", "reaction video", "video editing", "dil cheez tujhe dedi", "elvis presley suspicious minds", "pnd", "4chan ", "jumbo mumbo", "bring it on ", "minions 2", "playstation 4 trailer", "the only way", "audi tt", "best gaming music mix", "lil yachty xxl freestyle ", "work work work spongebob", "one in a million", "snoop dogg show", "lesbian kiss", "the plaza roblox", "nude party", "celine dion awards", "havoc", "tera chehra", "live argentina vs chile", "lost-isle", "i'm all the way up ", "oh man", "icrackuridevice", " sepa", "rainbow six vegas 2", "quake 3", "deus ex mankind divided", "really really kevin gates", "naruto ost", "drunken peasants", "apb", "nirvana smells like teen spirit", "james bay best fake smile", "fuck kd ", "black ops 3 gameplay", "its broken", "kawasaki h2r", "paperclip to a house", "sasuke vs itachi", "purge 3", "bass boost", "we don't talk anymore", "cinemabox", "drake grammys ft future", "lebron james high school", "twerk naked", "joe bonamassa", "funky town", "flyleaf - fully alive", "allah hoo allah hoo", "ww", "cs vs csgo", "saw trailer", "vital", "xnestorio", "wisteriamoon ", "wildcat", "bangladesh army", "faze teeqo", "civilization 6", "download manager", "bon bon live", "guns roses patience", "nagin dance", "dance performance 2016", "sleepwalking", "american beauty trailer", "el torito ", "relaxing sound", "papua", "pokemon emulator", "ncis", "enzo amore", "medi", "fast 8 official trailer", "phim 18 ", "jared and ellie", "hot video song", "cancione", "pewdiepie dogs", "kill them with kindness ", "hang with me", "oops martin garrix", "dead island trailer", "k-on ", "scatman", "robot  2016", "\\ gun 2016", "belfast", "graham norton jennifer lawrence", "in winter", "adventure movies", "google game", "trombone", "minotaur - battlebots", "stephen curry high school", "nick bean", "don omar danza kuduro ", "one megabyte plays", "wwe highlights", "england iceland", "dead to me", "tyrant", "hobo", "rain sounds", "higuain", "chris brown usher", "conway", "3x", "flipagram ", "huntin fishin and lovin everyday", "disturbia", "hypnotic", "dj snake talk", "imagine me and you trailer", "street dance 2", "radeon 480", "heart of gold", "alom hero", "j cole no role modelz", "take a bow", "sprite", "resident evil game", "fola", "musica de piano", "low testosterone", "young thug best friend ", "ami g ", "the dark knight full movie", "son of styamurthy 2016", "miss katy", "playing kids ", "2nd channel", "finger family nursery rhymes", "khmer kikilu new", "mario markiplier", "el universo", "international love", "motorola", "kanye power", "jonas blue perfect strangers", "necklace", "chloe moretz", "i feel the love ", "hd bangla natok", "red hot chili peppers give it away", "ben phillips ", "prank video", "minecraft who's your daddy", "millennials", "minecraft funny", "taeyeon why dance", "dekha ek khawab", "432", "starbucks ", "snow gameplay", "immigration", "female with female", "draco", "orange is the new black trailer ", "finding dory ellen", "prabhas", "my radio", "bd sex", "armored warfare", "notes of obsession", "best wish for you  ", "the gaming lemon", "the rebel", "black goku vs trunks", "school days", "best day ever", "shell shocked", "godspeed", "flower girl", "cristina ramos", "best live performance", "jimmy choo", "yo gabba gabba", "lecrae", "technology 2016", "famous dex type beat ", "hells bells", "hiro", "twenty one pilots songs", "steve jobs", "infowars", "prank calls", "kanye schoolboy q", "leafy face reveal", "g dragon crooked", "thu thuat", "dumpper ", "candyland ", "real slim shady", "l1", "albert 06", "drake one dance official video", "gay film", "chali re", "the warriors game", "blues backing track", "mrsuicidesheep", "aryan khan", "clones", "animated series", "nick cannon", "saathiya", "blink-182 - all the small things", "okbaby", "young thug digits ", "eu lcs", "scary pranks", "abdul sattar edhi", "roza", "gta 5 online pc", "filthy frank lore", "trr", "chicago bulls conference", "jealousy", "ssundee lucky block challenge", "robbie williams supreme", "flying jatt movie trailer", "taylor swift i knew you were trouble", "one piece pirate warriors 3", "r u mine arctic monkeys", "sony vegas download", "jacob musically", "musicbank", "7 years karaoke", "khum dhan", "crysis 2", "18  movie", "moretdm", "10 different", "led zeppelin kashmir", "battlefield bad company 2", "smash mouth", "salman khan controversy", "england vs slovakia", "fluffy unicorns dancing on rainbows", "asap new level", "draw for kids", "csak", "articuno", "how to draw you", "baby i like your style", "funny bangla natok", "indian hot girls", "paul mooney", "gun game", "underachievers flatbush zombies", "v10", "eritrean music", "psy psy gangnam style", "wales vs portugal euro 2016", "g-eazy lyrics", "spider man gameplay", "csgo tips", "penis sex", "monkey song", "natok 2016 tahsan", "vine compilation 2016", "mehmet erdem", "amazon video ", "you and i live", "username 666", "hangimiz sevmedik", "drake chopped and screwed", "foot worship", "dota lol", "vi sao", "what it do", "chicken masala", "labs", "the jungle book trailer", "'devastated' joey badass", "punk goes punk ", "peta", "freak radiohead", "forest fire", "getting high", "dayz base", "bajo el agua manuel medrano letra", "sanji", "dont be so shy", "evolve trailer", "computex 2016", "amjad sabri qawali", "movies latest hollywood", "don 3", "horse sex", "bugatti chiron", "hasi ban gaye ", "breezeblocks", "download youtubers life", "how to earn money", "game top 2016", "man shot", "the monkey king ", "dumbbell", "napkin of truth", "patience guns n roses", "hot video bangla", "jeet new song", "thumbnail", "street fifa", "behemoth", "mdr", "super mega", "huniepop ", "girls fight", "da ga cua", "jacy and kacy", "listen to your heart lyrics", "noizy ft elgit doda", "coheed and cambria", "go radio", "radbrad", "exploding", "ex boyfriend lil dicky", "lebron james speech", "man u", "kennys", "the clairvoyants", "hairstyles for medium hair", "adalat 2", "anthrax", "andy milonakis song", "you need to cut it lyrics", "incubus wish you were here", "lam lai cuoc doi", "red yoshi", "mass effect 2 trailer", "ichigo vs grimmjow", "doctor song", "brain freeze cat", "exorcism", "charlotte paige", "dota song", "lyrics natural", "partner", "catfishing", "real football", "rich the kid", "lito kirino", "live euro 2016 france ", "hip hop 2016 mix", "nogor alo part 40", "funny minecraft", "the bfg trailer", "busy signal", "illusions", "hindi movie comedy scenes", "ashik", "gril", "one piece we can ", "tory lanez 2016", "game of thrones cast", "2016 predictions", "how to hack account ", "the technomancer gameplay", "pokemon battle theme remix", "james corden anna kendrick", "future panda", "paper planes", "goku vs full fight", "fik shun", "woody", "starrkeisha", "chris brown loyal", "auf uns", "cute girl car", "up soundtrack", "the rain gagal bersembunyi", "google chromecast", "wwe draft", "dr sandra lee", "blockbuster", "sketchbook", "dan bull", "minutephysics", "sia letra", "battlefiel", "acting", "cleaveland", "man vs pin", "deadendhiphop", "iranian hulk", "the division gta 5", "room movie", "rob dyke", "pokemon wifi", "victoria justice", "gyptian", "gall", "descargar the forest mega", "gangs of wasseypur", "newtitan", "review pc", "big lez", "the new  show", "when doves cry prince", "bangla new natok 2016", "8 ball pool ", "popcaan ova dweet", "how to sell", "sarkodie", "rainmaker", "game of thrones - season 6 soundtrack", "hero ana", "exploring abandoned", "eminem dre forgot about dre", "edge of tomorrow", "kids game", "tum hum", "im jealous of the rain", "i'm blue", "cod4", "laki", "video phone", "lawson", "prius ", "grim dawn", "tesoro ", "di hoc", "nier automata", "nila", "thomas dank", "hotline miami 2", "sleep asmr", "sailing la vagabonde", "xzibit ", "phim ma thai lan", "japanese massage erotic", "black or white michael jackson", "crip walk", "chile vs argentina 2016 highlights", "oggy hindi", "fitnessblender", "racing cars", "apple tv", "slick ", "ucl", "moskau", "orlando shooting hoax", "uhohbro", "cain velasquez", "wedding march", "sal valentinetti", "big man tyrone", "new cartoon 2016", "immortals lyrics", "topp dog", "activities", "a flying jatt trailer", "lg g5 camera", "ankit tiwari  ", "bank robbery", "sbs inkigayo", "nothing but trouble", "kafeneja jone", "kirby planet robobot", "avicii live", "resident evil revelations 2", "take it out on me", "magma gojira", "buddy holly ", "ksi car", "so high wiz khalifa", "yuri boyka", "hair color", "fish tank", "games review", "pla", "mayday parade", "pokemon go uk", "aki ", "orchestra music", "the hulk", "pussy marijuana", "cf parkour", "vitalyzdtv world cup", "cooking show", "snowy", "ssundee house tour", "kendrick lamar freestyle", "ca nhac hai", "cheat codes x kris kross amsterdam", "reev", "why not me", "living on a plane", "roots 2016", "backing track blues", "hardcore (1979)", "bolna instrumental", "kham", "nolan", "troopers", "halsey gasoline", "flowey laugh ", "punk goes pop", "chosen", "young thug digits", "8 ball pool", "rihanna twerk", "snow tha product hola", "defenders", "la story", "so into you", "counter-strike global offensive", "star wars lego the force awakens", "beatles abbey road full album", ".io", "friendship is magic", "ben simons", "the next cut", "bob marley three little birds", "type beat free", "motor trend", "man mayal episode 20", "norman reedus", "boozled bean challenge", "sadhguru", "itsjudyslife", "amy adams", "borgore syrup", "mauricio meirelles", "snoop lion", "funny dance videos", "how to make music", "official story", "sasuke and ", "con nhi", "shokugeki no soma op", "blender intro template", "phim hanh dong thuyet minh", "the following ", "london calling", "radiohead burn the witch", "eminem i am", "sexy and i know it ", "future beat", "dancin", "music nation ", "how to make pokemon go", "rich kids", "anubis", "jayden ", "parody songs", "leroy sanchez", "goodbye angels", "solotica", "2015 movie trailers", "bobby lee ", "bowfishing", "tarzan boy", "154", "phillip phillips", "video ideas", "xs ", "selma blair ", "capguntom", "anushka sharma", "lesbian answers", "1920 london full movie", "fan full movie 2016", "gamecube", "portugal vs france highlights 2016", "skinrush promo code", "gta 5 how to mod ps3", "justin timberlake - can't stop the feeling ", "dark souls gameplay", "cameo", "spade", "super mario 64", "no future", "disney princess", "pewdiepie my car", "scribblenauts", "xin loi anh", "ghostbusters 2016", "on everything", "wwe wrestlemania 28", " gaming setup", "teen top", "trends", "nh", "time for that", "popular hip hop songs 2016", "squadron", "breathe blu cantrell", "leafy keemstar", "flux pavilion", "the gioi dong vat", "anh cu di di cover ", "megatron voice", "man utd", "new found glory", "pitbull copa america", "frag movie", "russian music", "soul khan vs", "pool of death", "minecraft in real life is terrifying", "beach house", "sling tv", "arewefamousnow", "joeysworldtour", "chatroulette", "fly fishing", "obama viet nam", "spiderman song", "safar", "official music video 2016 ", "chivalry ", "apple commercial", "pokemon go hacks ", "thanh duy", "ghostbusters theme remix", "europe final countdown", "new tamil songs 2016", "precision", "diabetes", "building time ", "industries", "daenerys targaryen ", "cid new episode 2016", "beyonce drunk in love", "dubstep beatbox", "pat and jen minecraft", "a red letter day", "japan hot", "hilal", "o sensin ki", "magic the song", "xbox live", "alive rae sremmurd", "ellen song", "my new song", "come on eileen ", "paige vs charlotte", "best of e3", "action song", "lil reese ", "jacqueline fernandez", "july 4 2016", "draymond green suspended", "milo moire", "danish girl", "danirephappy", "my name is no ", "how to make slime", "joe budden drake diss", "nier automata ", "if i stay", "yosuga no sora", "argentina vs chili", "ptx", "automatic vs manual", "blue skies", "body shake", "justin timberlake rock your body", "musically baby ariel", "akash", "fade away logic", "redmi note 3 pro", "wwe 2016 money inthe bank", "ygs", "kinder malo", "rock star", "s7 edge vs", "epic meal time\\", "another day in paradise", "education academy", "kripp", "i hate that i love you", "gopro parkour", "rhett and link", "great grand masti songs ", "nightcore rock", "moly", "lund broken", "guude", "20th century fox", "faze jev\\", "dalton", "girl kissing", "do you believe ", "physc", "bmw drift", "everybody dance now", "game of thrones season 6 episode 10 reaction", "how to make omelette ", "mama boyz 2 men", "entro", "gohan vs buu", "twice cheer up", "riders of icarus gameplay", "fluorescent adolescent", "bowling for soup", "desi perkins", "ranting", "batman game", "andres garcia", "how to download windows 7", "forest hills drive", "antenna", "portugal vs hungary", "deep web video", "linkin park songs", "counter-strike:global offensive", "horror movies 2015 full movie english ", " bang gang", "vanossgaming gmod", "gundam breaker", "bulleya", "sex education", "music 2016 new songs", "mr bean full episodes", "pokemon evolve", "political", "funny monkey", "i get up", "grgmarkos", "five years", "gutter trap", "they call me juan", "the woods trailer", "fredi", "atilla", "stalingrad", "macintosh plus ", "xbox 360 mod", "vr box", "nameless", "zeke", "village engineer"],
        countries = {
            US: "United States/Worldwide",
            DZ: "Algeria",
            AR: "Argentina",
            AU: "Australia",
            AT: "Austria",
            BH: "Bahrain",
            BE: "Belgium",
            BA: "Bosnia and Herzegovina",
            BR: "Brazil",
            BG: "Bulgaria",
            CA: "Canada",
            CL: "Chile",
            CO: "Colombia",
            HR: "Croatia",
            CZ: "Czech Republic",
            DK: "Denmark",
            EG: "Egypt",
            EE: "Estonia",
            FI: "Finland",
            FR: "France",
            DE: "Germany",
            GH: "Ghana",
            GR: "Greece",
            HK: "Hong Kong",
            HU: "Hungary",
            IN: "India",
            ID: "Indonesia",
            IE: "Ireland",
            IL: "Israel",
            IT: "Italy",
            JP: "Japan",
            JO: "Jordan",
            KE: "Kenya",
            KW: "Kuwait",
            LV: "Latvia",
            LB: "Lebanon",
            LY: "Libya",
            LT: "Lithuania",
            MK: "Macedonia",
            MY: "Malaysia",
            MX: "Mexico",
            ME: "Montenegro",
            MA: "Morocco",
            NL: "Netherlands",
            NZ: "New Zealand",
            NG: "Nigeria",
            NO: "Norway",
            OM: "Oman",
            PE: "Peru",
            PH: "Philippines",
            PL: "Poland",
            PT: "Portugal",
            PR: "Puerto Rico",
            QA: "Qatar",
            RO: "Romania",
            RU: "Russia",
            SA: "Saudi Arabia",
            SN: "Senegal",
            RS: "Serbia",
            SG: "Singapore",
            SK: "Slovakia",
            SI: "Slovenia",
            ZA: "South Africa",
            KR: "South Korea",
            ES: "Spain",
            SE: "Sweden",
            CH: "Switzerland",
            TW: "Taiwan",
            TH: "Thailand",
            TN: "Tunisia",
            TR: "Turkey",
            UG: "Uganda",
            UA: "Ukraine",
            AE: "United Arab Emirates",
            GB: "United Kingdom",
            VN: "Vietnam",
            YE: "Yemen"
        },
        languages = {
            af: "Afrikaans",
            id: "Indonesian",
            ms: "Malay",
            ca: "Catalan",
            cs: "Czech",
            da: "Danish",
            de: "German",
            et: "Estonian",
            "en-GB": "English (United Kingdom)",
            en: "English",
            es: "Spanish (Spain)",
            "es-419": "Spanish (Latin America)",
            eu: "Basque",
            fil: "Filipino",
            fr: "French",
            "fr-CA": "French (Canada)",
            gl: "Galician",
            hr: "Croatian",
            zu: "Zulu",
            is: "Icelandic",
            it: "Italian",
            sw: "Swahili",
            lv: "Latvian",
            lt: "Lithuanian",
            hu: "Hungarian",
            nl: "Dutch",
            no: "Norwegian",
            pl: "Polish",
            "pt-PT": "Portuguese (Portugal)",
            pt: "Portuguese (Brazil)",
            ro: "Romanian",
            sk: "Slovak",
            sl: "Slovenian",
            fi: "Finnish",
            sv: "Swedish",
            vi: "Vietnamese",
            tr: "Turkish",
            bg: "Bulgarian",
            ru: "Russian",
            sr: "Serbian",
            uk: "Ukrainian",
            el: "Greek",
            iw: "Hebrew",
            ur: "Urdu",
            ar: "Arabic",
            fa: "Persian",
            mr: "Marathi",
            hi: "Hindi",
            bn: "Bengali",
            gu: "Gujarati",
            ta: "Tamil",
            te: "Telugu",
            kn: "Kannada",
            ml: "Malayalam",
            th: "Thai",
            am: "Amharic",
            "zh-CN": "Chinese",
            "zh-TW": "Chinese (Taiwan)",
            "zh-HK": "Chinese (Hong Kong)",
            ja: "Japanese",
            ko: "Korean"
        };
    return HotSearch.defaults = {
        country: "US",
        language: "en",
        countries: countries,
        languages: languages
    }, HotSearch.prototype.defaults = function() {
        return _.clone(HotSearch.defaults)
    }, HotSearch.prototype.getDefaultLanguage = function() {
        if ("function" == typeof this.defaultLanguageCountryCallback) {
            var e = this.defaultLanguageCountryCallback();
            if (languages[e.language]) return e.language
        }
        return HotSearch.defaults.language
    }, HotSearch.prototype.getDefaultCountry = function() {
        if ("function" == typeof this.defaultLanguageCountryCallback) {
            var e = this.defaultLanguageCountryCallback();
            if (countries[e.country]) return e.country
        }
        return HotSearch.defaults.country
    }, HotSearch.prototype.get = function(e, a, o, i) {
        if (_.isObject(e)) {
            var n = e;
            e = n.query, a = n.country || this.getDefaultCountry(), o = n.language || this.getDefaultLanguage(), i = n.kwscore
        }
        e = _.isArray(e) ? _.map(e, function(e) {
            return e.toString()
        }) : e.toString();
        var r = new $.Deferred,
            n = {
                q: e,
                c: a,
                l: o,
                cid: this.cid
            };
        _.isArray(e) || (e = [e]), e = _.map(e, function(a) {
            return _.isString(e) || (e = e.toString()), this.sanitize(a)
        }, this), this.client && (n.client = this.client);
        var t = function(e) {
                var a = $.get(this.base + "hottersearch", n);
                a.done(function(a) {
                    _.extend(a.search_stats || {}, {
                        scoreParamsFound: e
                    }), r.resolve(a)
                }).fail(r.reject)
            }.bind(this),
            s = function() {
                this.getScoreParams(e[0]).done(function(e) {
                    _.extend(n, e), t(!e.magic_word_score)
                })
            }.bind(this);
        return i && 1 === e.length ? this.getCachedScores(e[0]).done(function(e) {
            var a = Date.parse(e.updated_at),
                o = (new Date).getTime(),
                i = 168,
                n = !isFinite(a) || o - 60 * i * 60 * 1e3 > a;
            return n ? (log("TRENDS > Cache outdated, requesting new data"), s()) : (log("TRENDS > Cache was fresh!"), void t(!0))
        }).fail(s) : t(), r.promise()
    }, HotSearch.prototype.markMagicWord = function(e, a) {
        var o = a ? 24 : 1,
            i = new Date((new Date).getTime() + 60 * o * 60 * 1e3),
            n = MAGIC_WORDS.indexOf(e);
        localStorage["vidiq_magic_word_backoff_" + n] = i, log("TRENDS > Marking magic word", n, i)
    }, HotSearch.prototype.getWorkingMagicWord = function() {
        var e = _.compact(_.map(MAGIC_WORDS, function(e, a) {
            var o = localStorage["vidiq_magic_word_backoff_" + a],
                i = o ? new Date(o) : null,
                n = new Date;
            return !i || n > i ? e : void 0
        }));
        return _.sample(e)
    }, HotSearch.prototype.getCachedScores = function(e) {
        var a = new $.Deferred;
        return $.get(this.base + "hottersearch", {
            q: e,
            skip_recs: "t"
        }).done(function(o) {
            var i = _.extend({
                compvol: {}
            }, o.search_stats || {});
            a.resolve(i.compvol[e] || {})
        }).fail(a.reject), a
    }, HotSearch.prototype.sanitize = function(e) {
        return e.replace(/[+,\-]/g, " ")
    }, HotSearch.prototype.getScoreParams = function(e) {
        var a = new $.Deferred,
            o = this.getWorkingMagicWord();
        return o ? (log("TRENDS > using magic word", MAGIC_WORDS.indexOf(o), "and keyword", e), this.getScoreParamsInner(e, o).done(function(a) {
            a.quota_hit ? (Rollbar.report("warning", "Trends Quota Hit", {
                keyword: e,
                magic_word: o,
                raw_response: a.raw_response
            }), log("TRENDS > Reporting quota hit")) : log("TRENDS > Successfully got trend data"), this.markMagicWord(o, !!a.quota_hit)
        }.bind(this))) : (log("TRENDS > no available magic word"), a.resolve({}), a.promise())
    }, HotSearch.prototype.getScoreParamsInner = function(keyword, magicWord) {
        keyword = encodeURIComponent(this.sanitize(keyword));
        var dfd = new $.Deferred,
            min = 20,
            max = 60,
            n = min + Math.round(Math.random() * (max - min)),
            url = "https://www.google.com/trends/fetchComponent?hl=en-US&q=" + magicWord + "," + keyword + "&gprop=youtube&content=1&cid=TIMESERIES_GRAPH_0&export=5&w=100&h=100&date=today+" + n + "-d",
            quotaHit = {
                quota_hit: "t",
                magic_word: magicWord
            };
        return $.get(url).always(function(html) {
            if (quotaHit.raw_response = html, !html || !html.match) return dfd.resolve(quotaHit);
            var match = html.match(/var chartData = ({.+})/);
            if (!match) return dfd.resolve(quotaHit);
            try {
                var data = eval("(" + match[1] + ")"),
                    opts = {
                        q_score: 0,
                        magic_word_score: 0,
                        magic_word: magicWord
                    };
                _.each(data.rows, function(e) {
                    var a = e[3],
                        o = e[7];
                    a > opts.magic_word_score && (opts.magic_word_score = a), o > opts.q_score && (opts.q_score = o)
                }), opts.date_range = n, dfd.resolve(opts)
            } catch (e) {
                dfd.resolve(quotaHit)
            }
        }), dfd.promise()
    }, HotSearch
});
! function(e) {
    "use strict";
    "function" == typeof define && define.amd ? define(["jquery", "underscore", "React", "HotSearch", "moment"], function(t, s, i, o, r) {
        return e(t, s, i, o, r)
    }) : window.KeywordInspector = e($, _, React, HotSearch, moment)
}(function(e, t, s, i, o) {
    "use strict";

    function r(e, s) {
        return t.isString(e) || (e = ""), t.isNumber(s) || (s = 10), e.length > s ? e.slice(0, s - 3).trim() + "..." : e
    }

    function n(e) {
        t.isNumber(e) || (e = parseInt(e, 10));
        var s = Math.log10(e),
            i = 3 * Math.floor(s / 3),
            o = ["K", "M", "B"];
        return 0 >= i ? Math.round(100 * e) / 100 : (e /= Math.pow(10, i), Math.floor(e) !== e && (e = e.toFixed(1)), e = e.toString().replace(/\.0$/, ""), e + o[i / 3 - 1])
    }
    var a = {},
        d = s.createElement;
    a.Root = s.createClass({
        getDefaultProps: function() {
            return {
                visible: !1,
                loading: !0,
                keyword: "",
                srcKeywords: [],
                relKeywords: [],
                relVideos: [],
                top: 0
            }
        },
        onClickOverlay: function() {
            h.hide()
        },
        render: function() {
            if (!this.props.visible) return null;
            var e = d(a.Body, this.props),
                t = d(a.Loading);
            return d("div", {
                id: "kwins-all",
                className: "kwins-container"
            }, d("div", {
                id: "kwins-overlay",
                onClick: this.onClickOverlay
            }), this.props.loading ? t : e)
        }
    }), a.Loading = s.createClass({
        render: function() {
            return d("div", {
                className: "kwins-loading"
            }, "loading...")
        }
    }), a.KeywordScores = s.createClass({
        getInitialState: function() {
            var e = t.values(this.props.compvol || {})[0];
            return t.each(e, function(t, s) {
                e[s] = Math.round(t)
            }), e || {}
        },
        render: function() {
            function e(e) {
                return Math.min(Math.max(4, e), 92)
            }
            var s = this.state.volume,
                i = this.state.competition,
                o = this.state.overall,
                r = {
                    left: s + "%"
                },
                n = {
                    left: e(s) + "%"
                },
                a = {
                    left: i + "%"
                },
                l = {
                    left: e(i) + "%"
                },
                h = d("div", {
                    className: "kw-score"
                }, d("span", {
                    className: "label"
                }, "Search Volume"), d("div", {
                    className: "score-bar"
                }, d("span", {
                    className: "triangle",
                    style: r
                }), d("span", {
                    className: "score-value",
                    style: n
                }, s))),
                c = d("div", {
                    className: "kw-score"
                }, d("span", {
                    className: "label"
                }, "Competition"), d("div", {
                    className: "score-bar score-bar-inverted"
                }, d("span", {
                    className: "triangle",
                    style: a
                }), d("span", {
                    className: "score-value",
                    style: l
                }, i))),
                p = d("div", {
                    className: "kw-score"
                }, d("span", {
                    className: "label"
                }, "Overall"), d("span", {
                    className: "score-value"
                }, o + "/100")),
                u = null;
            if (!t.isNumber(s)) {
                h = p = null;
                var w = "Unable to get full results due to quota limits";
                u = d("p", null, w)
            }
            return d("div", {
                className: "kw-scores"
            }, h, c, p, u)
        }
    }), a.Keyword = s.createClass({
        getInitialState: function() {
            return {
                hidKeywords: this.props.hidKeywords || h.hidKeywords
            }
        },
        componentDidMount: function() {
            e(window).on("kwins:add", this.onAddKeyword)
        },
        componentWillUnmount: function() {
            e(window).off("kwins:add", this.onAddKeyword)
        },
        onAddKeyword: function(e, s) {
            var i = t.uniq(t.union(this.state.hidKeywords, [s]));
            this.setState({
                hidKeywords: i
            })
        },
        onPlusClick: function() {
            var t = this.props.namespace || h._namespace;
            e(window).trigger("kwins:add", [this.props.keyword, t]), this.setState({
                hid: !0
            })
        },
        onBodyClick: function() {
            if (!this.props.noclick)
                if (this.props.namespace) {
                    var e = {
                        keyword: this.props.keyword,
                        hidKeywords: this.state.hidKeywords
                    };
                    t.extend(e, h.getOptions(this.props.namespace, e)), h._namespace = this.props.namespace, h.show(e)
                } else h.swap(this.props.keyword)
        },
        isHidden: function() {
            return this.isBare() ? !1 : (this.state.hidKeywords || []).indexOf(this.props.keyword) >= 0
        },
        isBare: function() {
            var e = this.props;
            return e.bare || !h.addable && !e.addable
        },
        render: function() {
            var e = d("button", {
                    className: "keyword-add",
                    title: 'Add "' + this.props.keyword + '"',
                    onClick: this.onPlusClick
                }, "+"),
                t = d("span", {
                    className: "keyword-check"
                }, ""),
                s = ["keyword", this.isHidden() ? "keyword-hid" : null].join(" "),
                i = this.isHidden() ? t : e;
            this.isBare() && (i = null);
            var o = d("span", {
                className: "keyword-body",
                onClick: this.onBodyClick,
                style: {
                    cursor: this.props.noclick ? "inherit" : "pointer"
                }
            }, this.props.keyword);
            return d("span", {
                className: s
            }, i, o)
        }
    }), a.KeywordList = s.createClass({
        getInitialState: function() {
            return {
                showAll: this.props.showAll || !1
            }
        },
        getExtraEl: function(e, t, s) {
            var i = s ? "Hide extra" : "Show all";
            return s || (s = ""), d("li", {
                key: "extra"
            }, d("span", {
                className: "keyword " + e,
                title: i
            }, d("span", {
                className: "keyword-body",
                onClick: t
            }, s)))
        },
        onShowAllClick: function() {
            this.setState({
                showAll: !0
            })
        },
        onShowFewerClick: function() {
            this.setState({
                showAll: !1
            })
        },
        render: function() {
            var e = t.map(this.props.keywords, function(e, s) {
                    var i = this.props;
                    return t.isString(e) && (e = {
                        keyword: e
                    }), (i.bare || !h.addable && !i.mayAddKeywords) && (e.bare = !0), e.addable = this.props.mayAddKeywords, e.namespace = this.props.namespace, e.hidKeywords = this.props.hidKeywords, d("li", {
                        key: s
                    }, d(a.Keyword, e))
                }, this),
                s = this.props.limit || 5;
            return !this.state.showAll && e.length > s && (e = e.slice(0, s), e.push(this.getExtraEl("keyword-show-all", this.onShowAllClick))), this.state.showAll && e.length > s && e.push(this.getExtraEl("keyword-show-fewer", this.onShowFewerClick, "")), d("ul", {
                className: "keyword-list"
            }, e)
        }
    }), a.Video = s.createClass({
        render: function() {
            var e = this.props.id,
                t = u.getVideoUrl(e),
                s = this.props.title,
                i = "https://i.ytimg.com/vi/" + e + "/default.jpg",
                l = o(this.props.published_at).fromNow(),
                h = "  ",
                c = this.props.statistics.viewCount;
            return d("div", {
                className: "video"
            }, d("img", {
                src: i,
                className: "thumb"
            }), d("div", {
                className: "video-right"
            }, d("h4", null, d("a", {
                href: t,
                target: "new"
            }, s)), d("span", {
                className: "video-info"
            }, "by ", d("b", null, this.props.channel_title), h, l), d("span", {
                className: "video-info"
            }, d("b", null, n(c)), " views", h, d("b", null, n(this.props.vph), " VPH")), d("p", null, r(this.props.description, 100)), d(a.KeywordList, {
                keywords: this.props.tags
            })))
        }
    }), a.VideoList = s.createClass({
        getInitialState: function() {
            return {
                showAll: !1
            }
        },
        onToggleClick: function() {
            this.setState({
                showAll: !this.state.showAll
            })
        },
        render: function() {
            var e, s, i = t.map(this.props.videos || [], function(e, s) {
                    return d(a.Video, t.extend({
                        key: s
                    }, e))
                }),
                o = this.props.limit || 5;
            return i.length > o && (this.state.showAll || (i = i.slice(0, o)), s = "Show all (" + this.props.videos.length + ")", this.state.showAll && (s = "Show fewer (" + o + ")"), e = d("button", {
                className: "video-list-toggle",
                onClick: this.onToggleClick
            }, s)), d("div", {
                className: "video-list"
            }, i, e)
        }
    }), a.Reports = s.createClass({
        render: function() {
            var e, t, s, i = this.props.timeDataExists,
                o = this.props.topQueriesHtml || this.props.risingQueriesHtml,
                r = !i && !o;
            return r ? e = d(a.NoReport, {
                message: "to show reports"
            }) : (e = d(a.TimeReport, {
                keyword: this.props.keyword,
                date: this.props.date,
                ok: i
            }), t = d(a.QueriesReport, {
                topHtml: this.props.topQueriesHtml,
                risingHtml: this.props.risingQueriesHtml
            }), s = d("p", {
                className: "data-source"
            }, "Source: Google Trends (YouTube Search)")), d("div", {
                id: "kwins-reports",
                className: "kwins-section"
            }, d("h2", null, "Reports"), d(a.DateSelector), e, t, s)
        }
    }), a.TimeReport = s.createClass({
        render: function() {
            if (!this.props.ok) return d(a.NoReport, {
                message: "for Interest Over Time report"
            });
            var s = 414,
                i = 343,
                o = h.getTrendsComponentUrl({
                    type: l.Time,
                    keyword: this.props.keyword,
                    width: s,
                    height: i,
                    date: this.props.date
                }),
                r = {
                    height: "233px",
                    overflow: "hidden"
                },
                n = {
                    position: "relative",
                    top: "-62px"
                };
            return setTimeout(function() {
                e("#kwins-all .temp-hide").removeClass("temp-hide")
            }, 900), t.defer(function() {
                e("#kwins-all .interest-over-time").addClass("temp-hide")
            }), d("div", {
                className: "report"
            }, d("h3", null, "Interest Over Time"), d("div", {
                className: "report-inner interest-over-time",
                style: r
            }, d("iframe", {
                width: s,
                height: i,
                src: o,
                style: n
            })))
        }
    }), a.QueriesReport = s.createClass({
        getInitialState: function() {
            return {
                active: "top"
            }
        },
        componentDidMount: function() {
            this.mountKeywords()
        },
        componentDidUpdate: function() {
            this.mountKeywords()
        },
        mountKeywords: function() {
            e(".kwins-container .report-inner a").each(function() {
                var t = e(this),
                    i = t.text().trim(),
                    o = t.parent();
                s.render(d(a.Keyword, {
                    keyword: i
                }), o[0])
            })
        },
        getReport: function(e) {
            var t = this.props[e + "Html"];
            if (t) return this.getDiv(t, e + "-search-queries")
        },
        getDiv: function(e, t) {
            return d("div", {
                className: "report-inner " + t,
                dangerouslySetInnerHTML: {
                    __html: e
                }
            })
        },
        onButtonGroupClick: function(e) {
            this.setState({
                active: e
            })
        },
        render: function() {
            var e, t, s = this.getReport("top"),
                i = this.getReport("rising"),
                o = "Search Queries";
            return s || i ? (s || (o = "Rising " + o, t = i), i || (o = "Top " + o, t = s), s && i && (e = d(a.ButtonGroup, {
                className: "query-report-selector",
                buttons: {
                    top: "Top",
                    rising: "Rising"
                },
                active: this.state.active,
                handleClick: this.onButtonGroupClick
            }), t = "top" === this.state.active ? s : i), this.props.header && (o = this.props.header), d("div", {
                className: "report"
            }, d("div", {
                className: "heading-button-group"
            }, d("h3", null, o), e), t)) : d(a.NoReport, {
                message: "for Search Queries reports"
            })
        }
    }), a.NoReport = s.createClass({
        render: function() {
            return d("div", {
                className: "report"
            }, d("h3", null, "Not enough search volume " + this.props.message))
        }
    }), a.ButtonGroup = s.createClass({
        onClick: function(e) {
            var t = e.target;
            t && !t.disabled && "function" == typeof this.props.handleClick && this.props.handleClick(t.dataset.buttonId)
        },
        render: function() {
            var e = 0,
                s = this.props.active,
                i = t.map(this.props.buttons || {}, function(t, i) {
                    return s || (s = i), d("li", {
                        key: ++e
                    }, d("button", {
                        className: s === i ? "active" : "",
                        "data-button-id": i,
                        disabled: s === i,
                        onClick: this.onClick
                    }, t))
                }, this),
                o = t.compact(["button-group", this.props.className]).join(" ");
            return d("ul", {
                className: o
            }, i)
        }
    }), a.DateSelector = s.createClass({
        getInitialState: function() {
            var e = t.invert(this.getKeys())[h.date];
            return {
                active: e
            }
        },
        getKeys: function() {
            return {
                allTime: "",
                lastYear: "today+12-m",
                last30: "today+1-m"
            }
        },
        onButtonGroupClick: function(e) {
            this.setState({
                active: e
            }), h.changeDate(this.getKeys()[e])
        },
        render: function() {
            return d(a.ButtonGroup, {
                className: "date-selector",
                buttons: {
                    allTime: "All Time",
                    lastYear: "Last Year",
                    last30: "Last 30 Days"
                },
                active: this.state.active,
                handleClick: this.onButtonGroupClick
            })
        }
    }), a.Header = s.createClass({
        getInitialState: function() {
            var e = this.props.keyword;
            return {
                field: e,
                hidKeywords: h.hidKeywords
            }
        },
        componentDidMount: function() {
            e(window).on("kwins:add", this.onAddKeyword), this.blurField()
        },
        componentWillUnmount: function() {
            e(window).off("kwins:add", this.onAddKeyword)
        },
        componentDidUpdate: function() {
            this._callBlur && this.blurField(), this._callBlur = !1
        },
        onClickHide: function() {
            h.hide()
        },
        onAddKeyword: function() {
            this.setState({
                hidKeywords: h.hidKeywords
            })
        },
        onChangeInput: function(e) {
            this.setState({
                field: e.target.value
            })
        },
        onInputKey: function(e) {
            var t = 13;
            e.keyCode === t && this.onClickSearch()
        },
        onClickSearch: function() {
            var e = this.state.field.trim();
            e && h.swap(e)
        },
        onClickPlus: function() {
            var t = h._namespace;
            e(window).trigger("kwins:add", [this.state.field, t]), this._callBlur = !0
        },
        blurField: function() {
            var e = document.activeElement;
            "kwins-input" === e.className && e.blur()
        },
        render: function() {
            var e = this.state.field;
            "undefined" == typeof e && (e = this.props.keyword);
            var t, s, i, o = chrome.extension.getURL("images/vidiq_dark.svg");
            e !== this.props.keyword && e ? t = d("button", {
                className: "action-button",
                onClick: this.onClickSearch
            }, "Search") : h.addable && this.state.hidKeywords.indexOf(e) < 0 && e ? s = d("button", {
                className: "action-button add-tag-button",
                onClick: this.onClickPlus
            }, "+") : this.state.hidKeywords.indexOf(e) >= 0 && (i = d("span", {
                className: "checkmark"
            }, ""));
            var r = this.props.noContentCls || "";
            return d("div", {
                className: "kwins-header " + r
            }, d("button", {
                id: "kwins-hide",
                onClick: this.onClickHide,
                title: "Hide keyword inspector"
            }, ""), d("img", {
                src: o
            }), d("input", {
                className: "kwins-input",
                type: "text",
                value: e,
                onChange: this.onChangeInput,
                onKeyDown: this.onInputKey,
                placeholder: "Search for a keyword",
                autoFocus: !0
            }), t, s, i)
        }
    }), a.Body = s.createClass({
        getInitialState: function() {
            return {
                upsell: "Improve your videos and<br>use the best tags possible"
            }
        },
        onClickUpsell: function() {
            this.setState({
                upsell: "Remember to refresh the page after you upgrade!"
            })
        },
        getKeywordScoreTooltip: function() {
            return "Keyword score is determined to help gauge how effective this keyword would be in your video optimization efforts. If you have a 1M+ subscriber channel, you might be able to break into highly competitive search terms. If you are a smaller channel its better to stay focused on the mid-range search terms with low competition"
        },
        render: function() {
            var e = d("div", {
                    id: "kwins-src-kw",
                    className: "kwins-section"
                }, d("h2", null, "Recommended by"), d(a.KeywordList, {
                    keywords: this.props.srcKeywords,
                    bare: !0
                })),
                t = null;
            if (this.props.score) {
                var s = d("span", {
                    className: "tooltip",
                    "data-tooltip": this.getKeywordScoreTooltip()
                }, "?");
                t = d("div", {
                    id: "kwins-score",
                    className: "kwins-section"
                }, d("h2", null, "Keyword Score", s), d(a.KeywordScores, this.props.score))
            }
            this.props.srcKeywords && this.props.srcKeywords.length || (e = null);
            var i = d(a.KeywordList, {
                    keywords: this.props.relKeywords,
                    limit: 20
                }),
                o = d(a.VideoList, {
                    videos: this.props.relVideos
                }),
                r = null,
                n = null;
            if (!h.isPermitted()) {
                var l = "https://app.vidiq.com/plans";
                o = d("img", {
                    className: "upsell-img",
                    src: chrome.extension.getURL("lib/vidiq/kwins/upsell-videos.jpg")
                }), r = d("div", {
                    id: "kwins-upsell"
                }, d("h2", {
                    dangerouslySetInnerHTML: {
                        __html: this.state.upsell
                    }
                }), d("a", {
                    href: l,
                    target: "_blank",
                    className: "btn upgradeButton no-remove",
                    onClick: this.onClickUpsell
                }, "Upgrade Now!")), n = d("p", {
                    style: {
                        textAlign: "center"
                    }
                }, d("a", {
                    href: l,
                    target: "_blank"
                }, "Upgrade"), " to get more related keywords")
            }
            var c = d("div", {
                id: "kwins-rel-vids",
                className: "kwins-section"
            }, d("h2", null, "Related trending videos"), o);
            this.props.relVideos && 0 !== this.props.relVideos.length || (c = d("h2", null, "No related trending videos found"));
            var p, u = [d("div", {
                id: "kwins-left"
            }, d("div", {
                id: "kwins-rel-kw",
                className: "kwins-section"
            }, d("h2", {}, "Related keywords"), i, n), c), d("div", {
                id: "kwins-right"
            }, e, t, d(a.Reports, {
                keyword: this.props.keyword,
                topQueriesHtml: this.props.topQueriesHtml,
                risingQueriesHtml: this.props.risingQueriesHtml,
                timeDataExists: this.props.timeDataExists,
                date: this.props.date
            })), r];
            return this.props.keyword || (u = null, p = "kwins-no-content"), d("div", {
                id: "kwins-body",
                style: {
                    top: this.props.top
                }
            }, d(a.Header, {
                keyword: this.props.keyword,
                noContentCls: p
            }), u)
        }
    });
    var l = {
            Time: "TIMESERIES_GRAPH_0",
            TopQueries: "TOP_QUERIES_0_0",
            RisingQueries: "RISING_QUERIES_0_0"
        },
        h = {
            keyword: "",
            hidKeywords: [],
            relKeywords: [],
            relVideos: [],
            hotSearch: null,
            country: null,
            language: null,
            addable: !1,
            namespaces: {},
            date: null,
            setHotSearch: function(e) {
                return this.hotSearch = e, this
            },
            mount: function() {
                return this.el = e('<div id="kwins-mount"></div>').appendTo("body"), this.render({}), this.addCss(), e(window).on("kwins:add", this.onAddKeyword), this
            },
            render: function(e) {
                var i = t.extend({}, this._lastProps || {}, e || {}),
                    o = d(a.Root, i);
                return this.root = s.render(o, this.el[0]), this._lastProps = i, this.root
            },
            addCss: function() {
                var t = chrome.extension.getURL("lib/vidiq/kwins/kwins.css");
                e.get(t, function(t) {
                    e("head").append('<style type="text/css">' + t + "</style>")
                })
            },
            unmount: function() {
                this.el && (s.unmountComponentAtNode(this.el[0]), this.el.remove(), e(window).off("kwins:add", this.onAddKeyword))
            },
            show: function(e) {
                if (this.root) {
                    void 0 !== e.country && (this.country = e.country), void 0 !== e.language && (this.language = e.language), void 0 !== e.addable && (this.addable = !!e.addable), e.keyword && (e.keyword = e.keyword.toString()), this.rememberDate(e.date), this.hidKeywords = e.hidKeywords || [];
                    var s = e.keyword !== this.keyword;
                    s && (this.keyword = e.keyword, this.keyword && this.load());
                    var i = t.map(e.srcKeywords || [], function(e) {
                        return t.isString(e) ? {
                            keyword: e
                        } : e
                    });
                    this.hidKeywords = t.compact(t.uniq(t.union(t.pluck(i, "keyword"), this.hidKeywords))), this.render({
                        keyword: e.keyword,
                        srcKeywords: i,
                        visible: !0,
                        loading: !!this.keyword && s,
                        top: window.scrollY + 50,
                        date: this.date
                    })
                }
            },
            swap: function(e) {
                return this._lastProps.visible ? void(e !== this.keyword && (this.keyword = e, this.render({
                    keyword: e,
                    srcKeywords: [],
                    loading: !0
                }), this.load())) : this.show({
                    keyword: e
                })
            },
            load: function() {
                var s = this,
                    i = window.scrollY;
                this.keyword && e.when(this.getRelatedKeywords(this.keyword, this.country, this.language), this.getRelatedVideos(this.keyword), this.getQueriesHtml(this.keyword, this.date, l.TopQueries), this.getQueriesHtml(this.keyword, this.date, l.RisingQueries), this.getTimeDataExists(this.keyword, this.date)).then(function() {
                    if (s.root) {
                        var o = arguments[0] || {},
                            r = o.search_stats || {};
                        0 === t.keys(r).length && (r = null), s.render({
                            relKeywords: o.keywords || [],
                            relVideos: arguments[1] || [],
                            topQueriesHtml: arguments[2],
                            risingQueriesHtml: arguments[3],
                            timeDataExists: arguments[4],
                            score: r,
                            loading: !1
                        }), window.scrollTo(window.scrollX, i);
                        var n = s._lastProps.top - 50 + "px";
                        e("html, body").animate({
                            scrollTop: n
                        }, 600, "swing")
                    }
                })
            },
            changeDate: function(t) {
                var s = this;
                this.rememberDate(t), this.render({
                    date: this.date
                }), e.when(this.getQueriesHtml(this.keyword, this.date, l.TopQueries), this.getQueriesHtml(this.keyword, this.date, l.RisingQueries), this.getTimeDataExists(this.keyword, this.date)).then(function() {
                    s.root && s.render({
                        topQueriesHtml: arguments[0],
                        risingQueriesHtml: arguments[1],
                        timeDataExists: arguments[2]
                    })
                })
            },
            getRelatedKeywords: function(e, t, s) {
                return this.hotSearch.get({
                    query: e,
                    country: t,
                    language: s,
                    kwscore: !0
                })
            },
            getRelatedVideos: function(t, s, i) {
                var o = new e.Deferred;
                return e.get("https://app.vidiq.com/v0/trendy", {
                    q: t,
                    c: s,
                    l: i
                }).done(function(e) {
                    var t = [];
                    try {
                        t = e.videos
                    } catch (s) {}
                    o.resolve(t)
                }).fail(function() {
                    o.resolve([])
                }), o.promise()
            },
            getQueriesHtml: function(t, s, i) {
                var o = new e.Deferred,
                    r = this.getTrendsComponentUrl({
                        type: i,
                        keyword: t,
                        date: s
                    });
                return e.get(r, function(t) {
                    var s = e(t),
                        r = s.find("#" + i + "table");
                    o.resolve(r.html())
                }).fail(function() {
                    o.resolve(null)
                }), o.promise()
            },
            getTimeDataExists: function(t, s) {
                var i = new e.Deferred,
                    o = this.getTrendsComponentUrl({
                        keyword: t,
                        type: l.Time,
                        date: s
                    });
                return e.get(o, function(e) {
                    e || (e = ""), i.resolve(!e.match(/not enough search volume/i))
                }).fail(function() {
                    i.resolve(!1)
                }), i
            },
            getTrendsComponentUrl: function(e) {
                var t = e.width || 100,
                    s = e.height || 100,
                    i = e.type,
                    o = e.keyword,
                    r = e.date ? "&date=" + e.date : "",
                    n = /(.*) \(.*\)/,
                    a = o.match(n);
                return a && a[1] && (o = a[1]), "https://www.google.com/trends/fetchComponent?hl=en-US&q=" + o + "&tz&gprop=youtube&content=1&cid=" + i + "&export=5&w=" + t + "&h=" + s + r
            },
            hide: function() {
                this.root && this.render({
                    visible: !1
                })
            },
            namespace: function(e, t) {
                this.namespaces[e] = t
            },
            getOptions: function(e, t) {
                return "function" == typeof this.namespaces[e] ? this.namespaces[e](t) || t : t
            },
            rememberDate: function(e) {
                var t = "kwins-date";
                return "undefined" != typeof e && localStorage.setItem(t, e), this.date = localStorage.getItem(t) || "", this.date
            },
            implementTooltips: function(t) {
                var s = e(".kwins-tooltip"),
                    i = e(t.target);
                if (s.length || (s = e('<span class="kwins-tooltip"></span>').appendTo("body"), e("body").mousemove(function(e) {
                        var t = 10;
                        s.css({
                            left: e.clientX + t + "px",
                            top: e.clientY + t + "px"
                        })
                    })), s.stop(), "mouseenter" === t.type) {
                    var o = i.attr("data-tooltip");
                    if (!o) return;
                    s.html(o), s.fadeIn("fast")
                } else s.fadeOut("fast")
            },
            attachEventHandler: function() {
                var s = this,
                    i = "[data-keyword-inspector], .open-kwins";
                return e("body").off(".kwins").on("click.kwins", i, function(i) {
                    i.preventDefault(), i.stopPropagation();
                    var o = e(i.currentTarget),
                        r = o.data("keyword-sources");
                    r = r ? r.split(",") : [];
                    var n = {
                        keyword: o.data("keyword-inspector"),
                        addable: o.data("keyword-addable"),
                        srcKeywords: r
                    };
                    t.extend(n, s.getOptions(o.data("keyword-namespace"), n)), h._namespace = o.data("keyword-namespace"), h.show(n)
                }).on("mouseenter.kwins mouseleave.kwins", ".tooltip", this.implementTooltips), e(window).off(".kwins").on("kwins:add.kwins", function(e, i) {
                    var o = t.uniq(t.union(h, [i]));
                    h.hidKeywords = o, s.render({
                        hidKeywords: o
                    })
                }), this
            },
            isPermitted: function() {
                return "function" == typeof this._permit ? this._permit() : !0
            },
            permitted: function(e) {
                return "function" == typeof e && (this._permit = e), this
            }
        };
    return h.Components = a, h.Trends = l, h
});
! function(t) {
    "use strict";
    var e = t.HTMLCanvasElement && t.HTMLCanvasElement.prototype,
        o = t.Blob && function() {
            try {
                return Boolean(new Blob)
            } catch (t) {
                return !1
            }
        }(),
        n = o && t.Uint8Array && function() {
            try {
                return 100 === new Blob([new Uint8Array(100)]).size
            } catch (t) {
                return !1
            }
        }(),
        r = t.BlobBuilder || t.WebKitBlobBuilder || t.MozBlobBuilder || t.MSBlobBuilder,
        a = /^data:((.*?)(;charset=.*?)?)(;base64)?,/,
        i = (o || r) && t.atob && t.ArrayBuffer && t.Uint8Array && function(t) {
            var e, i, l, u, b, c, d, B, f;
            if (e = t.match(a), !e) throw new Error("invalid data URI");
            for (i = e[2] ? e[1] : "text/plain" + (e[3] || ";charset=US-ASCII"), l = !!e[4], u = t.slice(e[0].length), b = l ? atob(u) : decodeURIComponent(u), c = new ArrayBuffer(b.length), d = new Uint8Array(c), B = 0; B < b.length; B += 1) d[B] = b.charCodeAt(B);
            return o ? new Blob([n ? d : c], {
                type: i
            }) : (f = new r, f.append(c), f.getBlob(i))
        };
    t.HTMLCanvasElement && !e.toBlob && (e.mozGetAsFile ? e.toBlob = function(t, o, n) {
        t(n && e.toDataURL && i ? i(this.toDataURL(o, n)) : this.mozGetAsFile("blob", o))
    } : e.toDataURL && i && (e.toBlob = function(t, e, o) {
        t(i(this.toDataURL(e, o)))
    })), "function" == typeof define && define.amd ? define(function() {
        return i
    }) : "object" == typeof module && module.exports ? module.exports = i : t.dataURLtoBlob = i
}(window);
var dataStore = {
    LS_PREFIX: "vidIQ_",
    getItem: function(t) {
        var e = JSON.parse(localStorage.getItem(this.LS_PREFIX + t));
        return e ? e[0] : void 0
    },
    setItem: function(t, e) {
        try {
            localStorage.setItem(this.LS_PREFIX + t, JSON.stringify([e]))
        } catch (o) {}
    },
    set: function(t) {
        _.map(t, function(t, e) {
            this.setItem(e, t)
        }, this)
    },
    removeItem: function(t) {
        return localStorage.removeItem(this.LS_PREFIX + t)
    }
};

function taskProxy(t) {
    this.done = !1, this.callbacks = [];
    var o = this,
        n = {};
    t(function() {
        if (!o.done)
            for (o.args = arguments, o.done = !0; o.callbacks.length > 0;) try {
                var t = o.callbacks.pop();
                n[t.function_id] = !0, t.apply(this, arguments)
            } catch (a) {
                log("error in taskProxy", a)
            }
    })
}
taskProxy.prototype.function_id_count = 0, taskProxy.prototype.onReady = function(t) {
    this.done ? t.apply(this, this.args) : (t.function_id || (t.function_id = taskProxy.prototype.function_id_count++), this.callbacks.push(t))
}, taskProxy.prototype.clear = function() {
    this.callbacks.length = 0
};

function api() {
    if (!(this instanceof api)) return api.prototype.sharedInstance ? api.prototype.sharedInstance : api.prototype.sharedInstance = new api;
    var e = "unknown";
    try {
        e = chrome.runtime.getManifest().version
    } catch (t) {}
    this.extensionType = window.isFirefox ? "vff" : "vch/" + e, this.cache = dataStore.getItem("cache") || {
        channels: []
    }, chrome.runtime.onMessage.addListener(function(e) {
        "fbauth" === e.type && $(window).trigger("fbauth")
    })
}
window.CORS_ajax || (window.CORS_ajax = function(e, t, i) {
    return "string" == typeof e && (e = {
        url: e
    }, "function" == typeof t ? e.success = t : (e.data = t, e.success = i)), $.ajax(e)
}, window.CORS_ajax_post = function(e, t, i, n) {
    return $.post(e, t, i, n)
}), api.prototype.base = "https://app.vidiq.com/v0/", api.prototype.baseV1 = "https://app.vidiq.com/v1/", location.href.match(/VIDIQ_TEST/) && (api.prototype.base = "https://beta.vidiq.com/v0/", api.prototype.baseV1 = "https://beta.vidiq.com/v1/"), api.prototype.loggedin = !1, api.prototype.activeChannel = 0, api.prototype.getSessionData = !1, api.prototype.getSession = function(e, t) {
    if (this.getSessionData) return e(this.getSessionData);
    var i = this,
        n = (new Date).getTime().toString().replace(/0\./, "");
    $.ajax({
        data: {
            extended: !0,
            client: i.extensionType,
            ts: n
        },
        url: i.base + "session",
        dataType: "json",
        success: function(t) {
            i.getSessionData = t, i._sessionResponse = t, i.cache.gplus_pages = t.gplus_pages, i.cache.channels = t.channels;
            var n = "unauthenticated" === t.state ? null : i.cache;
            dataStore.set({
                cache: n,
                pro: t.pro,
                boost_lite: t.boost_lite,
                boost: t.pro_plus,
                boost_plus: t.boost_plus,
                enterprise: t.premium,
                optim: t.video_optimizer
            }), e(t)
        },
        error: t
    })
}, api.prototype.getRetriedSession = function(e, t, i) {
    var n = this;
    i || (i = 1), this.getSession(function(t) {
        "function" == typeof e && e(t)
    }, function(o) {
        return 401 === o.status && "Unauthorized" === o.statusText && (Rollbar.report("error", "Invalid session token", {
            session_token: dataStore.getItem("session_token")
        }), dataStore.removeItem("session_token")), i >= 4 ? (n.reportDisplayError("session retry failed"), $(window).trigger("vidiqDisplayFailure"), void("function" == typeof t && t(o))) : (n.reportDisplayError("session fail, retrying..."), void setTimeout(function() {
            n.getRetriedSession(e, t, ++i)
        }, 500))
    })
}, api.prototype.getOptim = function() {
    return dataStore.getItem("optim") || {}
}, api.prototype.getVideoOptimStatus = function(e) {
    return $.get(this.base + "video_optim/" + e)
}, api.prototype.enableVideoOptim = function(e) {
    return $.post(this.base + "video_optim/" + e).done(function(e) {
        dataStore.set(_.extend(dataStore.getItem("optim") || {}, {
            quota_left: e.quota_left,
            quota_used: e.quota_used
        }))
    })
}, api.prototype.subscription = function(e, t, i) {
    $.ajax({
        type: "POST",
        data: {
            token: e,
            plan: t,
            client: this.extensionType
        },
        url: this.base + "subscription",
        dataType: "json",
        success: i || function() {}
    })
}, api.prototype.getSubscription = function(e) {
    $.get(this.base + "subscription", e)
}, api.prototype.getPlans = function() {
    return "basic pro boost_lite boost boost_plus enterprise".split(" ")
}, api.prototype.getCurrentPayment = function() {
    var e = this.getPlanPrice(this.getUserType());
    return e.free || e.ent ? null : "$" + e.monthly + "/month"
}, api.prototype.getPlanPrice = function(e) {
    var t = {
            pro: [10, 100],
            boost_lite: [49],
            boost: [79],
            boost_plus: [149]
        }[e],
        i = {
            monthly: null,
            yearly: null,
            free: !0,
            ent: !1,
            plan: e
        };
    return (t || "enterprise" === e) && (i.free = !1, t || (i.ent = !0)), t && (i.monthly = t[0], i.yearly = t[1]), i
}, api.prototype.getDowngrades = function() {
    var e = this.getPlans(),
        t = e.slice(0, e.indexOf(this.getUserType()));
    return _.map(t, function(e) {
        return this.getPlanPrice(e)
    }, this).reverse()
}, api.prototype.featureLimits = {
    "export": {
        basic: 10,
        pro: 100
    },
    search: {
        basic: 2
    }
}, api.prototype.getFeatureLimit = function(e, t) {
    return this.featureLimits[e][t || this.getUserType()]
}, api.prototype.featurePermitted = function(e) {
    var t = this.getUserType(),
        i = {
            historical: "pro",
            tweets: "basic",
            trending: "pro",
            search: "pro",
            searchSocialStats: "pro",
            sortByVolume: "enterprise",
            uploadAndEdit: "boost_lite",
            translate: "pro",
            downgrade: "pro",
            upgrade: "basic",
            changePlan: "basic",
            optimize: "boost_lite",
            legacyTagRecs: "admin",
            ownVideoStats: "pro",
            optimizationHints: "boost_lite",
            kwins: "pro",
            syndication: "boost_lite",
            massLike: "enterprise",
            keywordStats: "pro",
            fullHotSearch: "boost_lite"
        },
        n = {
            enterprise: ["downgrade", "upgrade", "changePlan", "optimize"],
            boost_plus: ["upgrade"]
        },
        o = !1;
    if (_.each(n, function(i, n) {
            n === t && (o = i.indexOf(e) >= 0)
        }), o) return !1;
    if ("optimize" === e && 0 === this.getOptim().quota_left) return !1;
    if ("admin" === i[e]) try {
        return "admin" === this._cachedUser.current_user.role
    } catch (s) {
        return !1
    }
    var a = this.getPlans().indexOf(i[e]),
        r = this.getPlans().indexOf(t);
    return a >= 0 ? r >= a : !0
}, api.prototype.getUserType = function() {
    if (!this.loggedin) return "loggedout";
    var e = ["basic", "pro", "boost_lite", "boost", "boost_plus", "enterprise"],
        t = e[2];
    window.location.href.match(/VIDIQ_TYPE=([^\&]+)/);
    return _.each(e, function(e) {
        dataStore.getItem(e) && (t = e)
    }), t
}, api.prototype.getLogoBadge = function() {
    var e = {
            basic: "badge-basic.png",
            pro: "badge-pro.png",
            boost_lite: "badge-boost.png",
            boost: "badge-boost.png",
            boost_plus: "badge-boost.png",
            enterprise: "badge-ent.png"
        },
        t = this.getUserType();
    return chrome.extension.getURL("images/" + e[t])
}, api.prototype.getUser = function() {
    var e = this.base + "user";
    return log("api#getUser > GET %s", e), $.get(e).done(function(t) {
        this._cachedUser = t;
        var i = ((t || {}).current_user || {}).email;
        i && dataStore.setItem("email", i), log("api#getUser > GET SUCCESS %s", e, t)
    }.bind(this)).fail(function(t) {
        log("api#getUser > GET FAIL %s", e, t)
    }.bind(this))
}, api.prototype.getIntegration = function(e) {
    var t = new $.Deferred;
    return this.getUser().done(function(i) {
        var n = this.findIntegration(e, i);
        t.resolve(n)
    }.bind(this)).fail(t.reject), t.promise()
}, api.prototype.findIntegration = function(e, t) {
    var i = null;
    return t && t.current_user && t.current_user.integrations && (i = t.current_user.integrations[e]), i
}, api.prototype.histViews = function(e, t) {
    CORS_ajax("https://app.vidiq.com/v0/experiments/histviews?video_id=" + e, {
        client: this.extensionType
    }, t)
}, api.prototype.ownedVideo = function(e) {
    if (this.cache.channels && this.cache.channels.length > 0)
        for (var t = 0; t < this.cache.channels.length; t++)
            if (e == this.cache.channels[t].channel_id) return !0;
    return !1
}, api.prototype.login = function(e, t, i) {
    if (this.loggedin) return i(!0);
    var n = this;
    CORS_ajax({
        type: "POST",
        url: this.base + "session",
        data: {
            email: e,
            passwd: t,
            type: "new",
            extended: !0,
            client: n.extensionType
        },
        success: function(t, o, s) {
            t.state && "unauthenticated" != t.state ? (n.session_id = t.session_id, dataStore.setItem("session_token", t.session_token), dataStore.setItem("session_id", t.session_id), dataStore.setItem("email", e.toLowerCase()), n.loggedin = !0, n.cache = {
                channels: []
            }, n.getSessionData = !1, n.getRetriedSession(function() {
                "function" == typeof i && i(!0)
            })) : ("function" == typeof i && i(!1), n.loggedin = !1)
        }
    })
}, api.prototype.logout = function() {
    dataStore.removeItem("cookie"), dataStore.removeItem("cache"), dataStore.removeItem("enterprise"), dataStore.removeItem("boost_plus"), dataStore.removeItem("boost_lite"), dataStore.removeItem("boost"), dataStore.removeItem("pro"), dataStore.removeItem("basic"), dataStore.removeItem("session_token"), chrome.runtime.sendMessage({
        method: "removeCookie"
    }), this.loggedin = !1, this.getSessionData = !1, $.ajax({
        type: "DELETE",
        url: this.base + "session"
    })
}, api.prototype.sendMessage = function(e, t) {
    $.post(this.base + "feedback", {
        message: e
    }, t)
}, api.prototype.getChannel = function(e) {
    return _.where(this.cache.channels, {
        channel_id: e
    })[0]
}, api.prototype.getCurrentChannel = function(e) {
    var t = new $.Deferred;
    return e && this._cachedChannel ? (_.defer(function() {
        t.resolve(this._cachedChannel)
    }.bind(this)), t.promise()) : (ytApi().getCurrentChannelID().done(function(e) {
        this._cachedChannel = this.getChannel(e), t.resolve(this._cachedChannel)
    }.bind(this)), t.promise())
}, api.prototype.getChannelName = function(e) {
    for (var t, i = 0; i < this.cache.channels.length; i++)
        if (this.cache.channels[i].channel_id == e) {
            t = this.cache.channels[i].name;
            break
        }
    return t
}, api.prototype.getChannelToken = function(e) {
    for (var t, i = 0; i < this.cache.channels.length; i++)
        if (this.cache.channels[i].channel_id == e) {
            t = this.cache.channels[i].token;
            break
        }
    return t
}, api.prototype.signup = function(e, t, i, n) {
    var o = this.base + "user",
        s = {
            email: e,
            fullname: t,
            password: i,
            newsletter: "no",
            client: this.extensionType,
            source: "chrome",
            user_language: window.navigator.language
        };
    log("api.signup > Posting to %s with %o", o, s), $.post(o, s, function(t) {
        t && !t.error ? this.login(e, i, n) : n(t)
    }.bind(this))
}, api.prototype.userTypeIs = function(e) {
    return this.getUserType() === e
}, api.prototype.recoverPW = function(e, t) {
    $.post(this.base + "user/reset_password", {
        client: this.extensionType,
        email: e,
        session_id: ""
    }, function(e) {
        "function" == typeof t && t(e && e.success)
    })
}, api.prototype.embeddedLocations = function(e, t, i, n, o) {
    var s = this;
    CORS_ajax(s.base + "youtube/channels/" + i + "/youtube_proxy?dimensions=insightPlaybackLocationDetail&metrics=views,estimatedMinutesWatched&sort=-views&max_results=25&filter=insightPlaybackLocationType==EMBEDDED%3Bvideo==" + n, {
        client: s.extensionType,
        start: e,
        end: t
    }, function(e) {
        "function" == typeof o && o(e.response)
    })
}, api.prototype.suggestedLocations = function(e, t, i, n, o) {
    var s = this;
    CORS_ajax(s.base + "youtube/channels/" + i + "/youtube_proxy?dimensions=insightTrafficSourceDetail&metrics=views,estimatedMinutesWatched&sort=-views&max_results=25&filter=insightTrafficSourceType==RELATED_VIDEO%3Bvideo==" + n, {
        client: s.extensionType,
        start: e,
        end: t
    }, function(e) {
        "function" == typeof o && o(e.response)
    })
}, api.prototype.historicViewsCache = {}, api.prototype.historicViews = function(e, t, i, n, o) {
    var s = "" + e + t + i + n;
    if (!this.historicViewsCache[s]) {
        var a = this;
        this.historicViewsCache[s] = new taskProxy(function(o) {
            CORS_ajax(a.base + "youtube/channels/" + i + "/youtube_proxy?metrics=views&sort=-views&filter=video==" + n, {
                client: a.extensionType,
                start: e,
                end: t
            }, function(e) {
                o(e.response[0].views)
            })
        })
    }
    return this.historicViewsCache[s].onReady(o)
}, api.prototype.specificViewsCache = {}, api.prototype.specificViews = function(e, t, i, n, o) {
    var s = "" + e + t + i + n;
    if (!this.specificViewsCache[s]) {
        var a = this;
        this.specificViewsCache[s] = new taskProxy(function(o) {
            CORS_ajax(a.base + "youtube/channels/" + i + "/youtube_proxy?metrics=views&sort=-views&dimensions=insightTrafficSourceType&filter=video==" + n, {
                client: a.extensionType,
                start: e,
                end: t
            }, function(e) {
                var t = {};
                for (var i in e.response) t[e.response[i].insightTrafficSourceType] = e.response[i].views;
                o(t)
            })
        })
    }
    return this.specificViewsCache[s].onReady(o)
}, api.prototype.deviceInfoCache = {}, api.prototype.deviceInfo = function(e, t, i, n, o) {
    var s = "" + e + t + i + n;
    if (!this.deviceInfoCache[s]) {
        var a = this;
        this.deviceInfoCache[s] = new taskProxy(function(o) {
            CORS_ajax(a.base + "youtube/channels/" + i + "/youtube_proxy?metrics=views&sort=-views&dimensions=deviceType&filter=video==" + n, {
                client: a.extensionType,
                start: e,
                end: t
            }, function(e) {
                var t = {};
                for (var i in e.response) t[e.response[i].deviceType] = e.response[i].views;
                o(t)
            })
        })
    }
    return this.deviceInfoCache[s].onReady(o)
}, api.prototype.countryCache = {}, api.prototype.country = function(e, t, i, n, o) {
    var s = "" + e + t + i + n;
    if (!this.countryCache[s]) {
        var a = this;
        this.countryCache[s] = new taskProxy(function(o) {
            CORS_ajax(a.base + "youtube/channels/" + i + "/youtube_proxy?metrics=views&sort=-views&dimensions=country&filter=video==" + n, {
                client: a.extensionType,
                start: e,
                end: t
            }, function(e) {
                o(e.response)
            })
        })
    }
    return this.countryCache[s].onReady(o)
}, api.prototype.referrals = function(e, t, i, n, o) {
    var s = this;
    CORS_ajax(s.base + "youtube/channels/" + i + "/youtube_proxy?dimensions=insightTrafficSourceDetail&metrics=views,estimatedMinutesWatched&sort=-views&max_results=25&filter=insightTrafficSourceType==EXT_URL%3Bvideo==" + n, {
        client: s.extensionType,
        start: e,
        end: t
    }, function(e) {
        "function" == typeof o && o(e.response)
    })
}, api.prototype.subsDriven = function(e, t, i, n, o) {
    var s = this;
    CORS_ajax(s.base + "youtube/channels/" + i + "/youtube_proxy?metrics=subscribersGained&filter=video==" + n, {
        client: s.extensionType,
        start: e,
        end: t
    }, function(e) {
        if ("function" == typeof o) {
            var t = e && e.response[0] && e.response[0].subscribersGained && e.response[0].subscribersGained ? e.response[0].subscribersGained : void 0;
            o(t)
        }
    })
}, api.prototype.ytSearches = function(e, t, i, n, o) {
    var s = this;
    CORS_ajax(s.base + "youtube/channels/" + i + "/youtube_proxy?dimensions=insightTrafficSourceDetail&metrics=views,estimatedMinutesWatched&sort=-views&max_results=25&filter=insightTrafficSourceType==YT_SEARCH%3Bvideo==" + n, {
        client: s.extensionType,
        start: e,
        end: t
    }, function(e) {
        "function" == typeof o && o(e.response)
    })
}, api.prototype.youtubeProxy = function(e, t) {
    var i = _.extend({
        client: this.extensionType
    }, t);
    return $.get(this.base + "youtube/channels/" + e + "/youtube_proxy", i)
}, api.prototype.recTags = function(e, t) {
    _.isArray(e) && (e = e.join(",")), CORS_ajax({
        url: "https://app.vidiq.com/v0/experiments/relwords",
        data: {
            tags: e
        },
        success: t
    })
}, api.prototype.audit = function(e, t) {
    $.post(this.base + "event", {
        event: "audit." + e,
        client: this.extensionType,
        props: t
    })
}, api.prototype.reportDisplayError = function(e) {
    this.audit("chrome_extension.error", {
        code: "display_failure",
        message: e
    })
}, api.prototype.generateUID = function() {
    return (new Date).getTime().toString() + Math.round(1e4 * Math.random()).toString()
}, api.prototype.suggestTags = function(e, t, i) {
    var n = this;
    CORS_ajax("https://app.vidiq.com/v0/tags/suggest", e).always(function(o) {
        return o.tags || i ? void t(o.tags) : (delete e.video_id, n.suggestTags(e, t, 2))
    })
}, api.prototype.getTagsVolume = function(e, t) {
    var i = e.map(function(e) {
        return "tags%5B%5D=" + encodeURIComponent(e).replace(/%20/g, "+")
    }).join("&");
    CORS_ajax({
        url: "https://app.vidiq.com/v0/tags/info?" + i,
        success: t
    })
}, api.prototype.setTags = function(e, t, i) {
    for (var n, o = this, s = $("meta[itemprop=channelId]").attr("content"), a = 0; a < this.cache.channels.length; a++) this.cache.channels[a].channel_id == s && (n = this.cache.channels[a].token);
    this.getActiveChannel(function(s) {
        CORS_ajax_post(o.base + "youtube/channels/" + n + "/videos/" + e + "/set_tags", {
            tags: t,
            client: o.extensionType
        }, i)
    })
}, api.prototype.add_tag = function(e, t, i, n) {
    if (!e || $.isEmptyObject(e)) return void("function" == typeof n && n(!1));
    var o = this,
        s = this.getChannelToken(i),
        a = {};
    a[t] = "object" == typeof e ? e : [e], a = JSON.stringify(a), CORS_ajax_post(o.base + "youtube/channels/" + s + "/videos/" + t + "/add_tags", {
        tags: a,
        client: o.extensionType
    }, function(e) {
        n && n(e.status)
    }).error(n)
}, api.prototype.addTag = api.prototype.add_tag, api.prototype.trendy = function(e) {
    var t = new $.Deferred;
    return $.get(this.base + "trendy", {
        q: e.query,
        c: e.country,
        l: e.language,
        limit: e.limit || 11
    }).done(function(i) {
        e.videoId && (i.videos = _.filter(i.videos, function(t) {
            return t.id !== e.videoId
        })), i.videos = i.videos.slice(0, e.limit || 10), t.resolve(i)
    }).fail(t.reject), t.promise()
}, api.prototype.gplusPages = function(e) {
    return this.loggedin ? void e(this.cache.gplus_pages) : void e([])
}, api.prototype.channels = function(e) {
    if (!this.loggedin) return void e([]);
    var t = this;
    CORS_ajax({
        url: this.base + "youtube/channels",
        data: {
            session_id: this.session_id,
            client: t.extensionType
        },
        success: function(i) {
            t.cache.channels = i.channels, e(i)
        }
    })
}, api.prototype.getFirstChannelToken = function(e) {
    this.channels(function(t) {
        for (var i in t.channels) {
            e(t.channels[i].token);
            break
        }
    })
}, api.prototype.getActiveChannel = function(e) {
    this.channels(function(t) {
        ytApi().getChannelId(function(i) {
            var n = !1;
            for (var o in t.channels) {
                var s = t.channels[o];
                if (s.channel_id === i) {
                    n = s.token;
                    break
                }
            }
            e(n)
        })
    })
}, api.prototype.comment = function(e, t, i, n) {
    var o = this;
    this.getActiveChannel(function(s) {
        s || (s = o.cache.channels[0].token), CORS_ajax({
            url: "https://app.vidiq.com/v0/youtube/channels/" + s + "/comments/",
            type: "POST",
            data: {
                author: e,
                content: t,
                reply_to: i,
                client: o.extensionType
            },
            success: n
        })
    })
}, api.prototype.getCategories = function() {
    return $.get(this.base + "youtube_video_categories")
}, api.prototype.getCountries = function() {
    return $.get(this.base + "countries")
}, api.prototype.clientIqScore = function(e) {
    var t = e.youtube.views || 0,
        i = 1,
        n = (e.facebook.shares || 0) + (e.facebook.comments || 0) + (e.facebook.likes || 0) + (e.twitter.tweets || 0),
        o = 0;
    return o += 1 > t ? 0 : 3 * Math.log2(t), o += 1 > i ? 0 : 3 * Math.log2(i), o += 1 > n ? 0 : 3 * Math.log2(n), Math.min(o, 100)
}, api.prototype.getChannelGrowthStats = function(e) {
    return $.get(this.base + "youtube/competitors/growth_stats/" + e)
};

function ytApi() {
    return this instanceof ytApi ? void 0 : ytApi.prototype.sharedInstance ? ytApi.prototype.sharedInstance : ytApi.prototype.sharedInstance = new ytApi
}
ytApi.prototype.cache = {}, ytApi.prototype.DATA_API_KEY = "AIzaSyDGpsACYv_PFx9d_b2WZKITYJbxcp0omeA", ytApi.prototype.getVideoStats = function(t) {
    var e = "https://www.googleapis.com/youtube/v3/videos?part=statistics",
        n = e + "&id=" + t + "&key=" + this.DATA_API_KEY,
        i = new $.Deferred,
        r = {};
    return $.get(n).done(function(t, e, n) {
        try {
            var o = t.items[0].statistics;
            r = {
                views: parseInt(o.viewCount, 10),
                likes: parseInt(o.likeCount, 10),
                dislikes: parseInt(o.dislikeCount, 10),
                comments: parseInt(o.commentCount, 10)
            }
        } catch (a) {}
        i.resolve(r)
    }).fail(function(t, e, n) {
        var o;
        try {
            o = t.responseJSON.error.errors[0]
        } catch (a) {
            o = {
                status_code: t.status
            }
        }
        api().audit("chrome_extension.error", {
            code: "youtube_data_api_error",
            message: o
        }), i.resolve(r)
    }), i.promise()
}, ytApi.prototype.subsDriveCache = {}, ytApi.prototype.subsDriven = function(t, e) {
    return this.subsDriveCache[t] || (this.subsDriveCache[t] = new taskProxy(function(e) {
        function n() {
            $.ajax({
                type: "POST",
                url: "https://www.youtube.com/insight_ajax?action_get_statistics_and_data=1&v=" + t,
                data: {
                    session_token: i
                }
            }).always(function(t, n, i) {
                var r = i.responseText;
                if ("success" !== n) return log("error fetching subs driven", n), e({});
                try {
                    var o, a = {},
                        c = ["views", "timeWatched", "subsDriven", "shares"];
                    try {
                        o = r.match(/Through ([^<]+)/).pop().trim(), a.date = moment(o).add("days", 1).format("YYYY-MM-DD") + "T00:00:32.000Z"
                    } catch (s) {
                        var u = r.match(/Up to (.*?)\</) || [];
                        u.length && (o = (u.pop() || "").trim(), o.length && (a.date = moment(o).format("YYYY-MM-DD") + "T00:00:32.000Z"))
                    }
                    var p = r.match(/bragbar-metric[^>]+>(.+)<\/div/g),
                        l = p.length;
                    p.map(function(t) {
                        var e = t.substr(t.indexOf(">") + 1);
                        if (e = e.substr(0, e.lastIndexOf("<")).replace(/,/g, ""), "timeWatched" === c[0]) {
                            try {
                                t = e.split(" ");
                                var n = t[1].replace(/<.*?>/g, "");
                                e = t[0]
                            } catch (i) {
                                var r = e.match(/[0-9]+/) || [];
                                t = r.pop()
                            }
                            "years" === n ? e *= 525600 : "days" === n ? e *= 1440 : "hours" === n && (e *= 60), 3 == l ? a[c.shift()] = "N/A" : a[c.shift()] = e
                        } else e = parseInt(e), a[c.shift()] = e
                    });
                    try {
                        a.graphData = JSON.parse(r.toString().match(/<graph_data><!\[CDATA\[(.*?)\]\]><\/graph_data>/).pop())
                    } catch (s) {
                        a.graphData = {}
                    }
                    e(a)
                } catch (s) {
                    log("error fetching subs driven", s), e({
                        views: "N/A",
                        timeWatched: "N/A",
                        subsDriven: "N/A",
                        shares: "N/A"
                    })
                }
            })
        }
        var i;
        try {
            var r = document.createElement("script");
            if (r.innerHTML = "localStorage.ytToken = ytplayer.config.args.watch_ajax_token || ytplayer.config.args.account_playback_token;", document.body.appendChild(r), i = localStorage.ytToken, !i) throw 0;
            n()
        } catch (o) {
            $.get("https://www.youtube.com/watch", {
                v: t
            }, function(t) {
                i = match(/(watch_ajax_token|account playback token)['"].*['"](.*?)['"]/).pop(), n()
            })
        }
    })), this.subsDriveCache[t].onReady(e)
}, ytApi.prototype.getPublicStats = function(t, e) {
    var n = new $.Deferred,
        i = "https://www.youtube.com/insight_ajax?action_get_statistics_and_data=1&v=" + t,
        r = {};
    return $.ajax({
        url: i,
        type: "POST",
        data: {
            session_token: e
        }
    }).done(function(t) {
        var e = $(t).find("html_content").html();
        e = e.replace(/^<!\[CDATA\[|]]>$/g, "");
        var i = $(e).find("h1 .stats-sub-header").text().replace(/Through /, "").split("\n")[0],
            o = new Date(i);
        "Invalid Date" !== o.toString() && (r.date = o), $(e).find(".stats-bragbar, .stats-menu-metric").each(function() {
            var t = $(this).find(".metric-label").text(),
                e = $(this).find(".bragbar-metric").text();
            e || (e = $(this).find(".bragbar-metric-large").text());
            var n = null;
            e || (e = $(this).find(".menu-metric-value").text()), e.match(":") || (n = parseInt(e.replace(/[^0-9]/g, ""), 10));
            var i = _.isNumber(n) ? n : e;
            r[t.toLowerCase().replace(/ /g, "_")] = i
        }), _.isEmpty(r) ? n.reject() : n.resolve(r)
    }).fail(n.reject), n.promise()
}, ytApi.prototype.str2int = function(t, e) {
    var n = parseInt((t || "").replace(/[^0-9]/g, ""), 10);
    return isFinite(n) ? n : void warn("vidIQ: Could not get " + e + " (" + t + ")")
}, ytApi.prototype.getLocalLikesDislikes = function(t) {
    t || (t = $("body"));
    var e, n, i = t.find(".like-button-renderer-like-button:not(.hid)"),
        r = t.find(".like-button-renderer-dislike-button:not(.hid)");
    return e = i.find(".yt-uix-button-content").text(), n = r.find(".yt-uix-button-content").text(), {
        likes: this.str2int(e, "likes"),
        dislikes: this.str2int(n, "dislikes")
    }
}, ytApi.prototype.getCurrentVideoHtml = function() {
    var t = new $.Deferred,
        e = this,
        n = this.currentVideoID();
    return this.html || (this.html = {}), this.html[n] ? _.defer(function() {
        t.resolve(e.html[n])
    }) : $.get(window.location.href, function(i) {
        e.html[n] = i, t.resolve(i)
    }), t.promise()
}, ytApi.prototype.getLocalStat = function(t) {
    function e(t) {
        "pending" === i.state() && i.resolve(t)
    }
    var n, i = new $.Deferred,
        r = this,
        o = "_timeout_" + (new Date).getTime() + "_" + t;
    switch (this[o] && clearTimeout(this[o]), t) {
        case "views":
            var a = $(".watch-view-count").text();
            n = this.str2int(a, "local views");
            break;
        case "subscribers":
            var c = $(".yt-subscription-button-subscriber-count-branded-horizontal[title]"),
                s = c.attr("title");
            n = this.str2int(s, "local subscriber count");
            break;
        case "likes":
            n = this.getLocalLikesDislikes().likes;
            break;
        case "dislikes":
            n = this.getLocalLikesDislikes().dislikes;
            break;
        case "publishedAt":
            this.getCurrentVideoHtml().done(function(t) {
                var n = t.match(/itemprop="datePublished" content="(.+)"/);
                n ? e(n[1]) : i.reject()
            });
            break;
        case "channelId":
            n = $("#watch7-user-header > a[data-ytid]").attr("data-ytid");
            break;
        case "duration":
            this.getCurrentVideoHtml().done(function(t) {
                var n = t.match(/itemprop="datePublished" content="(.+)"/),
                    o = n[1];
                if (!o) return void i.reject();
                var o = t.match(/itemprop="duration" content="(.+)"/)[1],
                    a = o.replace(/(PT|S)/g, "").replace(/M|H/, ",").split(","),
                    c = r.str2int(a[0], "duration minutes"),
                    s = r.str2int(a[1], "duration seconds");
                e(60 * c + s)
            });
            break;
        case "comments":
            var u, p = ".all-comments a";
            u = setInterval(function() {
                if ($(p).length && "pending" === i.state()) {
                    var t = $(p).text(),
                        n = r.str2int(t, "comments");
                    e(n), clearInterval(u)
                }
            }, 10)
    }
    return "undefined" != typeof n ? _.defer(function() {
        i.resolve(n)
    }) : this[o] = setTimeout(function() {
        "pending" === i.state() && i.reject()
    }, 6500), i.promise()
}, ytApi.prototype.getLocalStats = function(t, e) {
    "function" == typeof t && (e = t, t = null), _.isString(t) && (t = [t]), _.isArray(t) || (t = ["views", "subscribers", "likes", "dislikes", "publishedAt", "duration", "comments"]);
    var n = {},
        i = {};
    _.each(t, function(t) {
        i[t] = 0, this.getLocalStat(t).done(function(e) {
            void 0 !== e && (n[t] = e)
        }).always(function() {
            i[t] = 1, "1" === _.uniq(_.values(i)).join() && "function" == typeof e && (e(n), e = null)
        })
    }, this)
}, ytApi.prototype.currentVideoID = function() {
    var t = window.location.href.match(/(v|video_id)=([^&#]+)/),
        e = t ? t[2] : null,
        n = ($(".watch-page-link a").attr("href") || "").split("/")[3];
    return e || n
}, ytApi.prototype.currentVideoTitle = function() {
    return $("#eow-title").text().replace(/[\r\n\t]|^\s+|\s+$/g, "").replace(/ +/g, " ").replace(/^\s+|\s+$/g, "")
}, ytApi.prototype.currentVideoThumbnail = function() {
    return $('link[itemprop="thumbnailUrl"]').attr("href")
}, ytApi.prototype.currentVideoDescription = function() {
    return $("#eow-description").text()
}, ytApi.prototype.countViews = function(t) {
    var e = $(".yt-lockup-meta-info li:last-child"),
        n = 0,
        i = [];
    e.each(function() {
        var t = parseInt(this.innerHTML.split(" ")[0].replace(/,/g, ""));
        isNaN(t) || (n += t, i.push(t))
    });
    var r = "average" === t ? Math.round(n / e.length) : _.max(i);
    return isFinite(r) ? r : 0
}, ytApi.prototype.newVideos = function() {
    return $('.yt-badge:contains("New")').length + "/20"
}, ytApi.prototype.topCreator = function() {
    var t = [];
    return $(".yt-lockup-byline a").each(function(e) {
        t.push($(this).text())
    }), _.max(_.map(_.countBy(t), function(t, e) {
        return {
            creator: e,
            num: t
        }
    }), function(t) {
        return t.num
    }).creator
}, String.prototype.startsWith = function(t) {
    return this.substr(0, t.length) === t
}, ytApi.prototype.getChannelName = function() {
    var t = $('#masthead-expanded-menu a[href*="/user/"]');
    return t.length ? t.attr("href").split("/").pop() : !1
}, ytApi.prototype.getChannelSubs = function(t, e) {
    t && $.get("https://www.youtube.com/channel/" + t, function(t) {
        var n = Number($(t).find("#channel-header-subscriber-count .nav-text").text().replace(" subscribers", ""));
        n = isNaN(n) ? "Unretrievable" : n, "function" == typeof e && e(n)
    }).fail(function() {
        e("Unretrievable")
    })
}, ytApi.prototype.getVideoOwnerChannelId = function(t) {
    t($("meta[itemprop=channelId]").attr("content"))
}, ytApi.prototype.getChannelId = function(t) {
    CORS_ajax("https://www.youtube.com/account_advanced", function(e) {
        try {
            var n = e.match(/<p>([^<]*?):([^<]*?)<\/p>([^<]*?)<\/div>/m)[2].trim();
            dataStore.setItem("ytChannelID", n), t(n)
        } catch (i) {
            t("signed_out_user")
        }
    }).fail(function() {
        t("Unretrievable", !0)
    })
}, ytApi.prototype.averageAge = function() {
    var t = 0,
        e = 0;
    $('.yt-lockup-meta-info li:contains("ago")').each(function() {
        var n = this.innerHTML.match(/([0-9]+) (.+?) ago/),
            i = 1;
        if (n) n[2].startsWith("year") ? i = 525949 : n[2].startsWith("month") ? i = 43829.1 : n[2].startsWith("week") ? i = 10080 : n[2].startsWith("day") ? i = 1440 : n[2].startsWith("hour") && (i = 60);
        else {
            if (n = [], i = (Date.now() - new Date(this.innerHTML, 1, 1, 1, 1, 1, 1).getTime()) / 6e4, !i) return;
            n[1] = 1
        }
        t += parseInt(n[1]) * i, e++
    }), t /= e;
    var n;
    return n = t > 525949 ? [Math.round(t / 525949), "YEAR"] : t > 43829.1 ? [Math.round(t / 43829.1), "MONTH"] : t > 10080 ? [Math.round(t / 10080), "WEEK"] : t > 1440 ? [Math.round(t / 1440), "DAY"] : t > 60 ? [Math.round(t / 60), "HOUR"] : [Math.round(t), "MINUTE"], n[0] > 1 ? n[0] + " " + n[1] + "S" : n[0] + " " + n[1]
}, ytApi.prototype.timesInTitles = function(t) {
    var e = 0;
    return t = (t || "").toLowerCase().replace(/\+/, " "), $(".yt-lockup-title > [class]").each(function() {
        e += this.innerHTML.toLowerCase().indexOf(t) > -1 ? 1 : 0
    }), e + "/20"
}, ytApi.prototype.timesInSearch = function(t) {
    var e = 0;
    return t = (t || "").toLowerCase().replace(/\+/, " "), $(".yt-lockup-description").each(function() {
        e += this.innerHTML.toLowerCase().indexOf(t) > -1 ? 1 : 0
    }), e + "/20"
}, ytApi.prototype.hd = function(t) {
    return $('.yt-badge:contains("HD")').length + "/20"
}, ytApi.prototype.cc = function(t) {
    return $('.yt-badge:contains("CC")').length + "/20"
}, ytApi.prototype.getSingleVolume = function(t, e, n, i) {
    function r(e) {
        return e++, e > 5 ? i(null) : (log("attempting", t), void CORS_ajax({
            url: "https://app.vidiq.com/v0/tags/info?tags[]=" + t,
            success: function(t) {
                t = t.tags[0], t ? i(!t || !t.broad_volume && 0 !== t.broad_volume || !t.exact_volume && 0 !== t.exact_volume ? null : t) : setTimeout(function() {
                    r(e + 1)
                }, 1e3)
            },
            fail: function() {
                r(e + 1)
            }
        }))
    }
    r(0)
}, ytApi.prototype.getSearchVolume = function(t, e, n, i) {
    return CORS_ajax({
        url: "https://www.youtube.com/keyword_tool_ajax",
        data: {
            action_get_kw_by_score: 1,
            query: t,
            lang: n,
            country: e
        },
        type: "GET",
        dataType: "json",
        success: i
    })
}, ytApi.prototype.annotationsCache = {}, ytApi.prototype.getAnnotations = function(t, e) {
    return this.annotationsCache[t] || (this.annotationsCache[t] = new taskProxy(function(e) {
        $.get("https://www.youtube.com/annotations_invideo?cap_hist=1&cta=2&video_id=" + t, function(t) {
            e($(t).find("annotation").length)
        })
    })), this.annotationsCache[t].onReady(e)
}, ytApi.prototype.verifyMcn = function(t) {
    var e = unescape(t).replace(/_affiliate$/, "").replace(/_/g, " "),
        n = null,
        i = e || "";
    i.indexOf(" ") > -1 && (i = i.split(" ")[1]);
    var r = $(".yt-user-info a").data("ytid") || "";
    return r.indexOf("_") > -1 && (r = r.split("_")[1]), r.indexOf(i) > -1 || n === e ? "None" : (e.match(/\+user$/) && (e = e.replace(/\+user$/, "")), e)
}, ytApi.prototype.NONEMCN = "__NONEMCN__", ytApi.prototype.getMcnAttribution = function(t, e) {
    "function" != typeof t && (t = function() {});
    var n = this;
    if (this._mcnLock) {
        e = _.isNumber(e) ? e + 1 : 1, log("MCN is locked! Waiting for unlock...", e);
        var i = 100;
        if (1e3 > e * i) return void setTimeout(function() {
            n.getMcnAttribution(t, e)
        }, i)
    }
    if (this._mcnLock = !0, log("MCN trying to load, will return cache if not blank:", this._mcnCache), this._mcnCache) {
        this._mcnLock = !1;
        var r = this._mcnCache;
        return r === this.NONEMCN && (r = null), t(r)
    }
    var n = this;
    log("MCN is now being loaded by getting YT HTML async! SHOULD ONLY HAPPEN ONCE PER VIDEO"), $.get(window.location.href, function(e) {
        var i = e.match(/meta name=.?attribution.?.content=['"]?(.+?)['" ]*\/>/),
            r = i ? n.verifyMcn(i[1]) : null;
        r || log("no MCN found...", n.NONEMCN), n._mcnCache = r || n.NONEMCN, log("MCN setting cache:", n._mcnCache), t(r), n._mcnLock = !1
    })
}, ytApi.prototype.resetMcnCache = function() {
    this._mcnCache = null, log("MCN reset cache!")
}, ytApi.prototype.getLocalMcnAttribution = function() {
    log("MCN getting local MCN...");
    var t = document.querySelectorAll("meta[name=attribution]")[0];
    return t ? (this._mcnCache = this.verifyMcn((t.content || "").replace(/\/$/, "")), log("MCN got local MCN!", this._mcnCache), this._mcnCache) : (log('MCN could not find local MCN meta name="attribution" el'), null)
}, ytApi.prototype.getCurrentChannelID = function() {
    var t = new $.Deferred;
    return $.get("https://www.youtube.com/dashboard", function(e) {
        var n = _.pluck(api().cache.channels, "channel_id").join("|");
        m = e.match(new RegExp('data-ytid="(' + n + ')"')), t.resolve(m ? m[1] : null)
    }).fail(function() {
        t.resolve(null)
    }), t.promise()
}, ytApi.prototype.getLanguageCode = function() {
    var t;
    try {
        t = window.ytconfig.INNERTUBE_CONTEXT_HL
    } catch (e) {}
    return t
}, ytApi.prototype.getCountryCode = function() {
    var t;
    try {
        t = window.ytconfig.INNERTUBE_CONTEXT_GL
    } catch (e) {}
    return t
};

function extApi() {
    return this instanceof extApi ? void 0 : extApi.prototype.sharedInstance ? extApi.prototype.sharedInstance : extApi.prototype.sharedInstance = new extApi
}
extApi.prototype.socialStatsForVideoCache = {}, extApi.prototype.socialStatsForVideo = function(t, e) {
    this.socialStatsForVideoCache[t] || (this.socialStatsForVideoCache[t] = new taskProxy(function(e) {
        var o = u.getVideoUrl(t, !1),
            r = u.getVideoUrl(t),
            a = function(t) {
                var o = t.http[0],
                    r = Number(o.Twitter.toString().replace(/,/g, "")),
                    a = o.Facebook.share_count,
                    i = o.Facebook.like_count,
                    s = o.Facebook.comment_count,
                    n = o.GooglePlusOne,
                    c = t.https[0],
                    d = Number(c.Twitter.toString().replace(/,/g, "")),
                    p = c.Facebook.share_count,
                    u = c.Facebook.like_count,
                    h = c.Facebook.comment_count,
                    l = c.GooglePlusOne;
                e({
                    twitterCount: r == d ? r : r + d,
                    fbShares: a == p ? a : a + p,
                    fbLikes: i == u ? i : i + u,
                    fbComments: s == h ? s : s + h,
                    gPlus: n == l ? n : n + l
                })
            }.multiCb();
        CORS_ajax({
            type: "GET",
            url: "https://vidiq.sharedcount.com/?apikey=3dbb54bf1e0e58869502d9036dd53279d1abafd7&url=" + o,
            success: a("http")
        }), CORS_ajax({
            type: "GET",
            url: "https://vidiq.sharedcount.com/?apikey=3dbb54bf1e0e58869502d9036dd53279d1abafd7&url=" + r,
            success: a("https")
        })
    })), this.socialStatsForVideoCache[t].onReady(e)
}, extApi.prototype.redditLikesForVideoCache = {}, extApi.prototype.redditLikesForVideo = function(t, e) {
    return this.redditLikesForVideoCache[t] || (this.redditLikesForVideoCache[t] = new taskProxy(function(e) {
        CORS_ajax("https://www.reddit.com/search.json?q=url%3A" + t + "&restrict_sr=off&sort=relevance&t=all", function(t, o) {
            if ("error" === o) e("N/A");
            else {
                var r = 0,
                    a = t.data.children.reduce(function(t, e) {
                        return r += e.data.num_comments, t + e.data.ups - e.data.downs
                    }, 0);
                e(a, t.data.children.length, r)
            }
        })
    })), this.redditLikesForVideoCache[t].onReady(e), "https://www.reddit.com/search?q=url%3A" + t + "&restrict_sr=off&sort=relevance&t=all"
}, extApi.prototype.getRedditData = function(t) {
    var e = "https://www.reddit.com/search.json?q=url%3A" + t + "&restrict_sr=off&sort=relevance&t=all",
        o = new $.Deferred;
    return $.get(e).done(function(t) {
        o.resolve(_.reduce(t.data.children, function(t, e) {
            return t.posts += 1, t.comments += e.data.num_comments, t.votes += e.data.ups - e.data.downs, t
        }, {
            votes: 0,
            posts: 0,
            comments: 0
        }))
    }).fail(o.reject), o.promise()
}, extApi.prototype.fetchTwitterTweets = function(t, e) {
    return isFirefox ? void $.get("https://query.yahooapis.com/v1/public/yql?q=SELECT%20*%20FROM%20html%20WHERE%20url%20%3D%20'https%3A%2F%2Fmobile.twitter.com%2Fsearch%3Fq%3D" + t + "'&diagnostics=true", function(t, o, r) {
        var a = r.responseText.split("tweet-header"),
            i = [];
        for (var s in a) try {
            var n = a[s];
            i.push({
                displayPic: n.match(/https:\/\/pbs\.twimg\.com\/profile_images\/(.*?)\.[a-zA-Z]+/i)[0],
                fullname: n.match(/fullname(.*?)>(.*?)</).pop(),
                username: n.match(/\/(.*?)\/status/).pop(),
                time: n.match(/tweet_([0-9]+)">(.*?)</).pop(),
                str_id: n.match(/tweet_([0-9]+)/).pop(),
                text: n.match(/<p>([\s\S]+?)<\/p>/m).pop()
            })
        } catch (c) {}
        e(i)
    }) : void chrome.runtime.sendMessage({
        method: "removeTwitterCookies"
    }, function() {
        var o = "https://www.youtube.com/watch?v=" + t;
        CORS_ajax("https://twitter.com/search?q=" + o, function(t) {
            var o = $(t).find("#timeline"),
                r = 10,
                a = [];
            o.find(".tweet").slice(0, r).each(function() {
                var t = $(this);
                a.push({
                    displayPic: t.find(".avatar").attr("src"),
                    name: t.data("name"),
                    username: t.data("screen-name"),
                    time: t.find("._timestamp").text(),
                    href: "https://twitter.com" + t.data("permalink-path"),
                    text: t.find(".tweet-text").text()
                })
            }), e(a)
        })
    })
}, extApi.prototype.stumbleUponForVideoCache = {}, extApi.prototype.stumbleUponForVideo = function(t, e) {
    this.stumbleUponForVideoCache[t] || (this.stumbleUponForVideoCache[t] = new taskProxy(function(o) {
        var r = "http://www.youtube.com/watch?v=" + t;
        CORS_ajax({
            url: "https://www.stumbleupon.com/services/1.01/badge.getinfo?url=" + r,
            type: "GET",
            dataType: "json",
            success: function(t) {
                var r;
                try {
                    r = t.result.views > 0 ? t.result.views.toString().replace(/,/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, ",") : "N/A"
                } catch (a) {
                    r = "N/A"
                }
                "function" == typeof e && o(r)
            }
        })
    })), this.stumbleUponForVideoCache[t].onReady(e)
}, extApi.prototype.googleResultsCache = {}, extApi.prototype.googleResults = function(t, e) {
    var o = t.embedded ? "embed/" : "";
    this.googleResultsCache[o + t.video_id] || (this.googleResultsCache[o + t.video_id] = new taskProxy(function(e) {
        $.get("https://www.google.com/search?safe=off&output=search&sclient=psy-ab&q=" + o + t.video_id + "+-site:youtube.com&btnG=&sei=6u34U-emFIreigLbxoCQBQ&gbv=2&gws_rd=ssl", function(t) {
            var o = (t.match(/<h3 class="r"><a href="(.*?)"/g) || []).map(function(t) {
                    var e = t.substring('<h3 class="r"><a href="'.length, t.length - 1);
                    return "/url" == e.substr(0, 4) && (e = decodeURIComponent(e.substr(e.indexOf("http")))), htmlEncoder.htmlDecode(e)
                }),
                r = t.match(/<h3[^>]*><a[^>]*rwt\([^>]*event\)[^>]*>(?!Cached|Trans)(.*?)<\/a>/g),
                a = (r || []).map(function(t) {
                    var e = t.replace(/<h3[^>]*><a[^>]*>/, "").replace(/<\/a>/, "");
                    return $("<div/>").html(e).text()
                }),
                i = void 0;
            try {
                i = t.match(/<[^>]*resultStats[^>]*>(.*?)</).pop().match(/\d/g).join("")
            } catch (s) {}
            var t = o.map(function(t, e) {
                return {
                    title: a[e],
                    url: t
                }
            });
            e && e({
                results: t,
                resultCount: i
            })
        })
    })), this.googleResultsCache[o + t.video_id].onReady(e)
}, extApi.prototype.linkedInForVideoCache = {}, extApi.prototype.linkedInForVideo = function(t, e) {
    this.linkedInForVideoCache[t] || (this.linkedInForVideoCache[t] = new taskProxy(function(o) {
        var r = "http://www.youtube.com/watch?v=" + t;
        CORS_ajax({
            url: "https://www.linkedin.com/countserv/count/share?format=json&url=" + r,
            type: "GET",
            dataType: "json",
            success: function(t) {
                var r;
                try {
                    r = t.count > 0 ? t.count.toString().replace(/,/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, ",") : "N/A"
                } catch (a) {
                    r = "N/A"
                }
                "function" == typeof e && o(r)
            }
        })
    })), this.linkedInForVideoCache[t].onReady(e)
};
var AdvancedEmbed = {
    getEmbedCode: function(e, o, t) {
        var s = this.getQueryString(e, o, t),
            i = t.fs ? " allowfullscreen" : "",
            n = t.enhancedPrivacy ? "www.youtube-nocookie.com" : "www.youtube.com",
            r = "https://" + n + "/embed/" + e + s,
            u = 'width="' + t.width + '" height="' + t.height + '" src="' + r + '"';
        return '<iframe type="text/html" frameborder="0" ' + u + i + "></iframe>"
    },
    getQueryString: function(e, o, t) {
        var s = [],
            i = u.convertTimeToSeconds(o),
            n = u.convertTimeToSeconds(t.start),
            r = u.convertTimeToSeconds(t.end);
        return n > 0 && s.push("start=" + n), r !== i && isFinite(r) && s.push("end=" + r), t.autoplay && s.push("autoplay=1"), t.cc_load_policy && s.push("cc_load_policy=1"), t.controls || s.push("controls=0"), t.disablekb && s.push("disablekb=1"), t.fs || s.push("fs=0"), t.iv_load_policy || s.push("iv_load_policy=3"), t.loop && s.push("loop=1", "playlist=" + e), t.modestbranding && s.push("modestbranding=1"), t.rel || s.push("rel=0"), t.showinfo || s.push("showinfo=0"), "default" !== t.vq && s.push("vq=" + t.vq), s.length > 0 ? "?" + s.join("&") : ""
    }
};
var Annotations = {
    findDiff: function(e, t) {
        var n = [];
        return _.each(e, function(e) {
            var i = !1,
                r = e.getAll();
            _.each(t, function(e) {
                var t = e.getAll();
                _.isEqual(r, t) && (i = !0)
            }, this), i || n.push(e)
        }, this), n
    },
    verify: function(e, t) {
        var n = new $.Deferred;
        return this.get(e).done(function(e) {
            var i = this.findDiff(t, e);
            if (0 === i.length) n.resolve();
            else {
                var r = u.plural(i.length, "annotation"),
                    o = i.length + " " + r;
                n.reject(o + " not saved: " + i.join(", ")), Rollbar.report("error", "Annotations Error: Did not save correctly", {
                    types: i.join(", "),
                    xml: this.itemList2xml(i)
                })
            }
        }.bind(this)).fail(n.resolve), n.promise()
    },
    getByType: function(e, t) {
        var n = new $.Deferred,
            i = this;
        return $.get("/annotations_invideo?video_id=" + e).done(function(r) {
            return "raw" === t ? n.resolve(r) : void n.resolve(i.getFilteredItems(r, function(t) {
                var n = AnnotationItem.fromNode(t);
                if (n) return n._videoId = e, n._uid = [n._id, e].join("::"), n
            }))
        }).fail(function(e) {
            n.reject(e)
        }), n.promise()
    },
    get: function(e) {
        return this.getByType(e, "annotations")
    },
    set: function(e, t) {
        if (u.dryRun()) return u.simulateRequest();
        var n = new $.Deferred,
            i = this,
            r = this.itemList2xml(t);
        return u.getAuthToken("/my_videos_annotate?v=" + e).done(function(o) {
            i.update(e, o, "<updatedItems>" + r + "</updatedItems>").done(function() {
                i.publish(e, o).fail(n.reject).done(function() {
                    i.verify(e, t).fail(n.reject).done(n.resolve)
                })
            }).fail(n.reject)
        }).fail(_.partial(Annotations.reject, n)), n.promise()
    },
    "delete": function(e, t) {
        if (u.dryRun()) return u.simulateRequest();
        var n = new $.Deferred,
            i = this,
            r = _.flatten(_.map(t, function(e) {
                var t = [e._id];
                return e.childXml && t.push([e.childXml.attr("id")]), _.map(t, function(e) {
                    return '<deletedItem id="' + e + '" author=""/>'
                })
            })).join("\n");
        return u.getAuthToken("/my_videos_annotate?v=" + e).done(function(t) {
            var o = "<deletedItems>" + r + "</deletedItems>";
            i.update(e, t, o).done(function() {
                i.publish(e, t).done(n.resolve).fail(n.reject)
            }).fail(n.reject)
        }).fail(_.partial(Annotations.reject, n)), n
    },
    update: function(e, t, n) {
        var i = new $.Deferred,
            r = this.getXml(e, t, n),
            o = r.match(/deletedItems/) ? "delete" : "update";
        return $.post("/annotations_auth/update2", r).done(function() {
            i.resolve()
        }).fail(function(e) {
            Annotations.reject(i, "Could not " + o + " (" + e.status + ")", r)
        }), i
    },
    publish: function(e, t) {
        var n = new $.Deferred,
            i = this.getXml(e, t);
        return $.post("/annotations_auth/publish2", i).done(function() {
            n.resolve()
        }).fail(function(e) {
            Annotations.reject(n, "Could not publish (" + e.status + ")")
        }), n
    },
    getXml: function(e, t, n) {
        return '<document><requestHeader video_id="' + e + '"/><authenticationHeader auth_token="' + t + '" video_id="' + e + '" />' + (n || "") + "</document>"
    },
    getFilteredItems: function(e, t) {
        var n = [];
        return $(e).find("annotation").each(function() {
            var e = $(this),
                i = t(e);
            i && n.push(i)
        }), n
    },
    itemList2xml: function(e) {
        return $("<div></div>").append(_.flatten(_.invoke(e, "getXml"))).html()
    },
    adjustTimes: function(e, t, n) {
        return _.map(e, function(e) {
            var i = e.clone();
            return i.adjustTimes(t, n), i
        })
    },
    reject: function(e, t, n) {
        return Rollbar.report("error", "Annotations Error: " + t, n), e.reject(t)
    },
    getVideoTitle: function() {
        return $("#creator-editor-title-link").attr("title")
    },
    ensureSliders: function(e, t, n) {
        var i = "#" + e + ".range-slider",
            r = $(i),
            o = 1;
        n && (n = u.time2sec(n), o = 100 / n), r.slider({
            range: !0,
            min: 0,
            max: 100,
            step: o,
            values: t,
            animate: "fast",
            slide: function(t, n) {
                return n.values[0] === n.values[1] ? !1 : void $(window).trigger(e + "-slider-update", n.values)
            }
        })
    }
};

function AnnotationItem(t) {
    this.xml = AnnotationItem.sanitizeXml(t), this._id = this.getId()
}
AnnotationItem.fromNode = function(t) {
    var e = new AnnotationItem(t);
    if ((e.getId() || "").match("annotation") && !_.isEmpty(e.getTimes())) {
        var i = e.getType();
        if ("highlight" === i) {
            var n = t.parent().find("[spaceRelative=" + e.getId() + "]").parents("annotation").first();
            n.length && e.setChild(n)
        } else if ("highlightText" === i) return;
        return e
    }
}, AnnotationItem.getEndMargin = function(t) {
    var e = 30,
        i = 120,
        n = .07;
    return Math.round(Math.min(Math.max(t * n, e), i))
}, AnnotationItem.sanitizeXml = function(t) {
    var e = t.find("action url");
    if (e.length > 0 && e.attr("value")) {
        var i = ["annotation_id", "src_vid", "ei", "feature"],
            n = new RegExp("&(" + i.join("|") + ")=[^&]+", "g"),
            r = e.attr("value").replace(n, "");
        e.attr("value", r)
    }
    return t.removeAttr("log_data"), t
}, _.extend(AnnotationItem.prototype, {
    editableValues: function() {
        return {
            text: this.getText(),
            url: this.getUrl()
        }
    },
    toString: function() {
        return this.getDisplayName() + " Annotation @ " + this.getTimes()[0]
    },
    getDisplayName: function() {
        var t = {
            anchored: "Speech Bubble",
            popup: "Note",
            title: "Title",
            highlight: "Spotlight",
            label: "Label"
        };
        return t[this.getType()]
    },
    getAll: function() {
        return {
            id: this.getId(),
            type: this.getType(),
            text: this.getText(),
            url: this.getUrl(),
            start: this.getTimes()[0],
            stop: this.getTimes()[1],
            duration: this.getDuration()
        }
    },
    getId: function() {
        return this.xml.attr("id")
    },
    getType: function() {
        return this.xml.attr("style") || this.xml.attr("type")
    },
    getTextNode: function() {
        var t = _.compact(_.map([this.xml, this.childXml], function(t) {
            return t ? t.find("TEXT")[0] : void 0
        }))[0];
        return $(t)
    },
    set: function(t, e) {
        this["set" + u.capitalize(t)](e)
    },
    getText: function() {
        return this.getTextNode().text()
    },
    setText: function(t) {
        return this.getTextNode().text(t), t
    },
    getUrl: function() {
        return this.xml.find("url[value]").attr("value") || null
    },
    setUrl: function(t) {
        var e = this.xml.find("url[value]").first();
        if (e.length) e.attr("value", t);
        else {
            var i = $('<action type="openUrl" trigger="click"></action>');
            i.append('<url value="' + t + '" target="new" />'), this.xml.append(i)
        }
        return t
    },
    setPercentRange: function(t, e, i) {
        this.percentRange = t, t && e && i && this.setTimesFromPercentages(u.time2sec(i), t)
    },
    togglePercentageOption: function(t) {
        this.percentageOption = t
    },
    getTimes: function() {
        var t = [];
        return this.xml.find("[t]").each(function() {
            t.push($(this).attr("t"))
        }), t
    },
    getDuration: function() {
        var t = this.getTimes();
        return Math.round(1e3 * (u.time2sec(t[1]) - u.time2sec(t[0]))) / 1e3
    },
    setTimes: function(t, e) {
        return this.xml.find("[t]").slice(0, 2).each(function(i) {
            var n = 0 === i ? t : e;
            $(this).attr("t", n)
        }), this
    },
    setChild: function(t) {
        this.childXml = t
    },
    getXml: function() {
        return _.map(_.compact([this.xml, this.childXml]), function(t) {
            var e = t.clone(),
                i = e.find('action url[value=""]');
            return i.length > 0 && i.parents("action").remove(), e
        })
    },
    clone: function() {
        var t = new AnnotationItem(this.xml.clone());
        return this.childXml && (t.childXml = this.childXml.clone()), t._videoId = this._videoId, t._uid = this._uid, t.percentRange = this.percentRange, t.percentageOption = this.percentageOption, t.originalTimes = this.originalTimes, t
    },
    adjustTimes: function(t, e, i) {
        if (i.active) return this.setTimesFromPercentages(e, i.range);
        var n = this.getTimes(),
            r = Math.max(u.time2sec(n[0]), 0),
            a = Math.min(u.time2sec(n[1]), t),
            s = Math.round(1e3 * (a - r)) / 1e3,
            o = AnnotationItem.getEndMargin(t),
            h = e - (t - r),
            l = h + s;
        if (s > e) r = 0, a = e;
        else if (t >= 120 && r >= t - o && e >= l) r = h, a = l;
        else if (e > r && a > e) {
            a = e;
            var c = Math.min(e / 2, 2);
            s > c && c > e - r && (r = e - c)
        } else r > e && (r = e - s, a = e);
        return this.setTimes(u.sec2time(r), u.sec2time(a))
    },
    setTimesFromPercentages: function(t, e) {
        var i = e[0] / 100,
            n = e[1] / 100,
            r = Math.round(t * i),
            a = Math.round(t * n);
        return this.setTimes(u.sec2time(r), u.sec2time(a))
    },
    setPercentagesFromTimes: function(t, e, i) {
        t = u.time2sec(t);
        var n = u.time2sec(e[0]) / t * 100,
            r = u.time2sec(e[1]) / t * 100;
        i && (n = Math.round(n), r = Math.round(r));
        var a = [n, r];
        return this.setPercentRange(a), a
    }
});
var Cards = {
    get: function(e) {
        var r = new $.Deferred;
        return $.get("/cards_ajax?v=" + e + "&action_list=1").done(function(t) {
            r.resolve(_.compact(_.map(t.feature_templates, function(r) {
                return "donation" !== r.type ? new CardItem(r, {
                    videoId: e
                }) : void 0
            })))
        }).fail(r.reject), r.promise()
    },
    post: function(e) {
        var r = e.startMs || e.card.get("start_ms"),
            t = e.card.getPayload(e.action, {
                start_ms: r
            });
        return this.submit(e.videoId, t)
    },
    update: function(e, r) {
        return this.post({
            videoId: e,
            card: r,
            action: "update"
        })
    },
    create: function(e, r, t) {
        return this.post({
            videoId: e,
            card: r,
            startMs: t,
            action: "create"
        })
    },
    "delete": function(e, r) {
        var t = new $.Deferred;
        return u.getAuthToken("/cards?v=" + e, "XSRF_TOKEN").done(function(a) {
            var n = {
                session_token: a,
                key: r.get("key")
            };
            $.post("/cards_ajax?v=" + e + "&action_delete=1", n).done(t.resolve).fail(function(e) {
                Cards.reject(t, "Could not delete (" + e.status + ")", r.data)
            })
        }).fail(_.partial(Cards.reject, t, _, r.data)), t.promise()
    },
    createMany: function(e, r) {
        var t = new $.Deferred,
            a = [],
            n = [];
        return $.when.apply($, _.map(r, function(o) {
            return Cards.create(e, o).always(function() {
                setTimeout(_.partial(function(e) {
                    if (n.push(e), n.length === r.length) {
                        if (a.length > 0) return t.reject(a);
                        t.resolve(n)
                    }
                }, _.toArray(arguments)), 100)
            }).fail(function(e) {
                a.push(e + " (" + o.toString() + ")")
            })
        })), t.promise()
    },
    submit: function(e, r) {
        if (u.dryRun()) return u.simulateRequest();
        var t = new $.Deferred;
        return u.getAuthToken("/cards?v=" + e, "XSRF_TOKEN").done(function(a) {
            this.ajaxPost(e, _.extend({}, r, {
                session_token: a
            })).done(t.resolve).fail(t.reject)
        }.bind(this)).fail(_.partial(Cards.reject, t)), t.promise()
    },
    ajaxPost: function(e, r) {
        var t = new FormData;
        _.each(r, function(e, r) {
            _.isArray(e) ? _.each(e, function(e) {
                t.append(r, e)
            }) : t.append(r, e)
        });
        var a = new $.Deferred;
        return $.ajax({
            url: "/cards_ajax?v=" + e,
            type: "POST",
            cache: !1,
            contentType: !1,
            processData: !1,
            data: t
        }).success(function(e) {
            var t, n = (e.match(/{.+}/) || [])[0];
            if (!e) return Cards.reject(a, "No response", r);
            try {
                t = JSON.parse(n)
            } catch (o) {
                return log("Error decoding JSON", n), Cards.reject(a, "Unrecognized response format", r)
            }
            if (t.errors || t.form_errors) {
                var s = t.errors[0],
                    i = t.form_errors[0] || {},
                    c = i.field + (i.message ? ": " + i.message : null);
                c && (s += " - " + c), Cards.reject(a, s, r)
            } else a.resolve(t)
        }).fail(function(e) {
            Cards.reject(a, "Could not update (" + e.status + ")", r)
        }), a.promise()
    },
    reject: function(e, r, t) {
        return Rollbar.report("error", "Cards Error: " + r, t), e.reject(r)
    }
};

function CardItem(t, e) {
    this.data = _.extend({}, t), this.meta = _.extend({}, e), this._id = t.type + ":" + t.key, this._uid = [this._id, e.videoId].join("::"), this._videoId = e.videoId
}
_.extend(CardItem.prototype, {
    data: {},
    toString: function() {
        var t = u.sec2time(this.data.start_ms / 1e3);
        return this.getDisplayName() + " Card @ " + t
    },
    getDisplayName: function() {
        var t = {
            associated: "Associated Website",
            fundraising: "Fundraising",
            merch: "Merchandise",
            video: "Video/Playlist",
            collaborator: "Channel"
        };
        return t[this.data.type] || u.capitalize(this.data.type)
    },
    getAll: function() {
        return {
            id: this._id,
            type: "card",
            style: this.data.type,
            data: this.getData(),
            kind: this.data.type,
            hasImage: this.data.image_url
        }
    },
    getData: function() {
        return _.extend({}, this.data)
    },
    getPayload: function(t, e) {
        var a = ["vote_counts", "auto_open", "amount_per_channel_per_nonprofit", "amount_per_card", "visibility"],
            i = {},
            n = this.data.type;
        switch ("playlist" === n && (n = "video"), "create" === t && (i.key = ""), n) {
            case "video":
                this.data.target_url ? i.video_url = this.data.target_url : (i.video_url = "", i.video_item_id = this.data.video_id), a.push("video_id");
                break;
            case "donation":
                a.push("name"), a.push("custom_message"), i.query = "miri"
        }
        var s = _.omit.apply(_, [this.data].concat(a));
        return s.type = n, s.show_warnings = !0, s[["action", t, s.type].join("_")] = 1, _.extend({}, s, i, e || {})
    },
    get: function(t) {
        return this.data[t]
    },
    getKind: function() {
        return this.data.type
    },
    clone: function() {
        return new CardItem(this.data, this.meta)
    },
    set: function(t, e) {
        return this.data[t] = e, this
    },
    adjustStart: function(t, e) {
        return this.set("start_ms", this.getAdjustedStart(t, e))
    },
    editableValues: function() {
        return _.pick(this.data, "teaser_text", "custom_message")
    },
    searchableValues: function() {
        return _.extend({}, _.pick(this.data, "title"), this.editableValues())
    },
    getAdjustedStart: function(t, e) {
        var a = 1e3 * t,
            i = 1e3 * e,
            n = 1e3 * AnnotationItem.getEndMargin(t),
            s = this.data.start_ms,
            d = s,
            r = a - s;
        return s > i ? (d = i - r, 0 > d && (d = s / t * e)) : t >= 120 && s >= a - n && (d = i - (a - s)), Math.floor(d)
    }
});
var CommentsDOM = {
    listenForShowMore: function() {
        var t = $(".paginator.load-comments");
        t.on("click", function() {
            setTimeout(function() {
                this.applyFilters()
            }.bind(this), 3e3)
        }.bind(this))
    },
    addThread: function(t) {
        var e = $(t);
        if (!e.attr("vidiq-comment-id")) {
            var i = e.children().last().attr("id");
            e.attr("vidiq-comment-id", i);
            var n = {
                    element: t,
                    id: i
                },
                s = this.hasReplies(t),
                r = this.hasOwnerReplies(t),
                o = this.getVideoId(t);
            return n.hasReplies = s, n.noReplies = !s, n.hasOwnerReplies = r, n.noOwnerReplies = !r, n.videoId = o, n.profanity = [], n.positive = [], n.negative = [], n.highestSubCount = 0, this.eachThreadComment(t, function(t, e) {
                var i = new $.Deferred;
                this.hasQuestions(t) && (n.question = !0), n.profanity[e] = this.wordMatch(t, "profanity"), n.positive[e] = this.wordMatch(t, "positive"), n.negative[e] = this.wordMatch(t, "negative");
                var s = this.getChannelPath(t);
                return u.mountComponent({
                    component: SubscriberCount,
                    element: $(t).find(".comment-header")[0],
                    inline: !0,
                    props: {
                        channelPath: s,
                        id: u.prettyRandomId()
                    }
                }), this.getSubCount(s).done(function(e) {
                    !$(t).hasClass("channel-owner") && this.stringToInt(e) > this.stringToInt(n.highestSubCount) && (n.highestSubCount = e)
                }.bind(this)), i.resolve(), i.promise()
            }.bind(this)).done(function() {
                CommentsActions.addThread(n)
            })
        }
    },
    eachThreadComment: function(t, e) {
        var i = new $.Deferred,
            n = $(t).find(".comment-item"),
            s = 0;
        return n.each(function(t, r) {
            e(r, t).done(function() {
                s += 1, s === n.length && i.resolve()
            })
        }), i.promise()
    },
    hasReplies: function(t) {
        var e = this.getReplies(t);
        return $.trim(e.html()).length > 0
    },
    hasOwnerReplies: function(t) {
        var e = this.getReplies(t);
        return e.find(".channel-owner").length > 0
    },
    getVideoId: function(t) {
        var e = $(t).find(".comment-item");
        return e.attr("data-vid")
    },
    getReplies: function(t) {
        return $(t).find(".comment-item").siblings(":not('.comment-replies-header')")
    },
    hasQuestions: function(t) {
        var e = $(t).find(".comment-text-content").first().text();
        return !!e.match(/\?+/)
    },
    applyFilters: function() {
        var t = CommentsStore.getData();
        if (this.clearFilters(), "all" === t.filter) return void CommentsActions.update({
            showCount: null,
            filtering: !1
        });
        var e = {
                search: t.searchTerms,
                blacklist: t.blacklist,
                videoIds: t.videoIds,
                profanity: ProfanityList,
                positive: PositiveList,
                negative: NegativeList
            },
            i = 0,
            n = 0,
            s = "multiple" === t.filter ? t.multiFilters : [t.filter];
        _.each(t.allThreads, function(r) {
            setTimeout(function() {
                var o = _.every(s, function(i) {
                    switch (i) {
                        case "search":
                            return this.filterByWords(r, e[i]);
                        case "blacklist":
                            return this.filterByWords(r, e[i], !0);
                        case "videoIds":
                            return this.filterOutVideos(r, e[i]);
                        case "commentsBy":
                            return this.filterByUser(r, t.username);
                        case "minSubscribers":
                            return this.filterMinSubs(r, t.minSubscribers);
                        case "profanity":
                        case "positive":
                        case "negative":
                            return this.highlightMatches(r, i), $(".vidiq-" + i + "-match").addClass("vidiq-highlight-on"), _.flatten(r[i]).length > 0
                    }
                    return r[i]
                }.bind(this));
                o ? i += 1 : $(r.element).addClass("vidiq-hidden-thread"), n += 1, n === t.allThreads.length && CommentsActions.update({
                    showCount: i,
                    filtering: !1
                })
            }.bind(this))
        }, this)
    },
    filterByUser: function(t, e) {
        if (!e) return !0;
        var i = $(t.element).find(".comment-item"),
            n = !1;
        return i.each(function(t, i) {
            var s = $(i).attr("data-name"),
                r = new RegExp(e, "gi");
            n = n || !_.isEmpty(s.match(r))
        }), n
    },
    clearFilters: function() {
        $(".comment-entry").removeClass("vidiq-hidden-thread"), this.removeHighlights()
    },
    highlightMatches: function(t, e) {
        var i = t[e],
            n = $(t.element).find(".comment-text-content"),
            s = "vidiq-" + e + "-match";
        _.each(i, function(t, e) {
            _.each(t, function(t) {
                this.addHighlights(n[e], t, s)
            }.bind(this))
        }.bind(this))
    },
    removeHighlights: function() {
        $(".comment-entry .vidiq-highlight").each(function(t, e) {
            var i = $(e).text();
            $(e).replaceWith(i)
        })
    },
    addHighlights: function(t, e, i) {
        if ("" !== e) {
            var n = '<span class="vidiq-highlight ' + i + '">' + e + "</span>",
                s = new RegExp("\\b" + e + "\\b", "gi");
            $(t).html(function(t, e) {
                return e.replace(s, n)
            })
        }
    },
    filterByWords: function(t, e, i) {
        var n = !1,
            s = $(t.element).find(".comment-text-content");
        return !i || !_.isEmpty(e) && e[0].length ? (s.each(function(t, i) {
            n = n || this.searchMatch(e, i)
        }.bind(this)), i ? !n : n) : !0
    },
    wordMatch: function(t, e) {
        var i;
        switch (e) {
            case "profanity":
                i = ProfanityList;
                break;
            case "negative":
                i = NegativeList;
                break;
            case "positive":
                i = PositiveList
        }
        var n = [],
            s = $(t).find(".comment-text-content").first(),
            r = s.text().split(" ");
        return _.each(i, function(t) {
            var e = r.indexOf(t);
            e > -1 && n.push(t)
        }), n
    },
    searchMatch: function(t, e) {
        return _.some(t, function(t) {
            var i = new RegExp("\\b" + [t] + "\\b", "gi"),
                n = $(e).text(),
                s = n.match(i);
            return _.isEmpty(s) ? void 0 : (_.each(s, function(t) {
                this.addHighlights(e, t, "vidiq-search-match")
            }.bind(this)), $(".vidiq-search-match").addClass("vidiq-highlight-on"), !0)
        }.bind(this))
    },
    filterOutVideos: function(t, e) {
        return !_.some(e, function(e) {
            return t.videoId === e
        })
    },
    getChannelPath: function(t) {
        var e = $(t).find(".user-name").first(),
            i = e.attr("href");
        return i
    },
    getSubCount: function(t) {
        var e = new $.Deferred,
            i = CommentsStore.getData();
        return i.subCounts[t] ? e.resolve(i.subCounts[t]) : this.fetchSubCount(t).done(function(n) {
            var s = {};
            s[t] = n, CommentsActions.update({
                subCounts: _.extend(i.subCounts, s)
            }), e.resolve(n)
        }), e.promise()
    },
    registeredSubCounts: [],
    fetchSubCount: function(t) {
        var e = new $.Deferred,
            i = CommentsStore.getData();
        if (this.registeredSubCounts.indexOf(t) > -1) var n = setInterval(function() {
            i.subCounts[t] && (clearInterval(n), e.resolve(i.subCounts[t]))
        }, 200);
        else this.registeredSubCounts.push(t), $.get("https://www.youtube.com" + t).done(function(t) {
            var i = t.match(/<span class="yt-subscription-button-subscriber-count-branded-horizontal [^>]+>(\S+)<\/span>/),
                n = i ? i[1] : "-1";
            e.resolve(n)
        });
        return e.promise()
    },
    stringToInt: function(t) {
        return _.isString(t) ? parseInt(t.trim().replace(",", ""), 10) : t
    },
    filterMinSubs: function(t, e) {
        return e && "" !== e.trim() ? isNaN(this.stringToInt(e)) ? !0 : this.stringToInt(t.highestSubCount) >= this.stringToInt(e) : !0
    }
};
var ColorSpectrum = {
    init: function(e) {
        $(e.id).spectrum({
            color: e.color,
            replacerClassName: e.replacer,
            showButtons: !1,
            showInput: !0,
            preferredFormat: "hex3",
            showPalette: !0,
            palette: [],
            localStorageKey: "vidIQ_palette",
            maxSelectionSize: 6,
            move: e.onChange,
            change: e.onChange,
            appendTo: e.appendTo
        })
    }
};
var FeaturedContentApi = {
    setFeaturedVideo: function(e, t) {
        if (u.dryRun()) return u.simulateRequest();
        var n = new $.Deferred;
        return this.getSessionToken().done(function(r) {
            var o = "https://www.youtube.com/featured_content?action_save=1",
                s = {
                    type: "video",
                    encrypted_video_id: e,
                    timing: "end",
                    start_time: "01:30",
                    smart_timing: !0,
                    custom_message: t,
                    session_token: r
                };
            $.post(o, s).done(function(e) {
                var t = e.match(/<div class="yt-alert-message">[\s]*(.+)[\s]*<\/div>/);
                return t && t[1] && "Saved successfully." === t[1] ? n.resolve() : n.reject(t && t[1] ? t[1] : "Unknown error")
            }).fail(function() {
                return n.reject("Unknown error")
            })
        }).fail(function(e) {
            return n.reject(e)
        }), n.promise()
    },
    getSessionToken: function() {
        var e = new $.Deferred,
            t = "https://www.youtube.com/featured_content";
        return $.get(t).done(function(t) {
            var n = t.match(/'XSRF_TOKEN':[\s\S]?"(.+)"/);
            return n && n[1] ? e.resolve(n[1]) : e.reject("Unable to retrieve session token")
        }).fail(function() {
            return e.reject("Unable to retrieve session token")
        }), e.promise()
    }
};
var MassLike = {
    massLikeVideo: function(e, n) {
        if (u.dryRun()) return u.simulateRequest();
        var r = new $.Deferred;
        return api().getCurrentChannel().done(function(i) {
            var t = api().getChannelToken(i.channel_id),
                a = api().extensionType,
                o = "https://app.vidiq.com/v0/youtube/channels/" + t + "/videos/" + e + "/mass_like",
                s = {
                    channels: n,
                    client: a
                };
            $.post(o, s).done(r.resolve).fail(function() {
                return r.reject("Unknown error")
            })
        }).fail(function(e) {
            return r.reject(e)
        }), r.promise()
    }
};
var MyVideos = {
    page: function(page) {
        var dfd = new $.Deferred,
            regex = /html":"(([^"](\\")*)+)"/g,
            spoofed = window.location.href.match(/LOTSA_VIDS/);
        if (this.isCancelled()) return dfd.reject("cancelled");
        (!_.isNumber(page) || 0 >= page) && (page = 1);
        var requestedPage = page;
        return spoofed && (page = 1), $.get("/my_videos?o=U&pi=" + page, function(response) {
            var $node = $(response),
                totalVideos = parseInt($node.find("#creator-subheader-item-count").text(), 10);
            spoofed && (totalVideos = 500);
            var estimatedMaxPages = Math.ceil(totalVideos / 30),
                matches = response.match(regex);
            if (!matches || _.isEmpty(matches)) return dfd.fail();
            var videos = _.compact(_.map(matches, function(string) {
                    string = string.replace(/^html":/, "");
                    var html;
                    try {
                        html = eval(string)
                    } catch (e) {
                        return
                    }
                    var wrapper = new VideoWrapper(html);
                    return wrapper.isValid() ? wrapper.getAll() : void log("Found invalid video!", wrapper.getAll(), page)
                })),
                pageRegex = /href="\/my_videos\?o=U&amp;pi=[0-9]+"/g,
                pageMatches = response.match(pageRegex) || [],
                pages = _.uniq(pageMatches),
                pageNumbers = _.map(pages, function(e) {
                    return parseInt(e.replace(/[^0-9]/g, ""), 10)
                }),
                highestPageNumber = _.max(pageNumbers),
                totalPages = Math.max(highestPageNumber, estimatedMaxPages),
                hasPages = !_.isEmpty(pageNumbers);
            spoofed || highestPageNumber !== requestedPage && hasPages || (totalPages = requestedPage, hasPages || 1 !== requestedPage || (totalVideos = videos.length)), hasPages && requestedPage > highestPageNumber && (totalPages = requestedPage, videos = []), dfd.resolve({
                videos: videos,
                totalPages: totalPages,
                totalVideos: totalVideos,
                currentPage: requestedPage,
                morePages: requestedPage !== totalPages
            }, videos)
        }).fail(dfd.reject), dfd.promise()
    },
    batch: function(e, t) {
        var a = new $.Deferred,
            r = t || function() {},
            i = 5,
            o = e[0],
            n = e[1],
            s = [],
            d = [],
            l = isFinite(e[1]),
            c = null;
        if (l)
            for (var u = o; n >= u; u += 1) {
                var p = Math.floor((u - o) / i);
                s[p] || (s[p] = []), s[p].push(u)
            }
        var g = function() {
            if (l && 0 === s.length || c) return a.resolve(_.flatten(d), c);
            if (this.isCancelled()) return a.reject("canceled");
            var e = [];
            if (l) e = s.shift();
            else {
                var t = d.length * i + o;
                d.length || (t = o);
                for (var n = t; t + i > n; n += 1) e.push(n)
            }
            this.list(e, r).done(function(e, t) {
                d.push(e), c = t, g()
            }).fail(a.reject)
        }.bind(this);
        return g(), a.promise()
    },
    list: function(e, t) {
        var a = 0,
            r = [],
            i = new $.Deferred,
            o = !1;
        return _.each(e, function(n) {
            return this.isCancelled() ? i.reject("cancelled") : void this.page(n).done(function(e) {
                t(e), r.push([n, e.videos]), e.morePages || (o = e.currentPage)
            }).fail(i.reject).always(function() {
                if (++a === e.length) {
                    var t = _.sortBy(r, function(e) {
                        return e[0]
                    }).map(function(e) {
                        return e[1]
                    });
                    i.resolve(_.flatten(t), o)
                }
            })
        }, this), i.promise()
    },
    all: function(e, t) {
        "function" == typeof e && (t = e, e = 1);
        var a = this,
            r = new $.Deferred,
            i = r.promise(),
            o = "function" == typeof t;
        return i.cancel = function() {
            a._cancelled = !0
        }, this._cancelled = !1, this.page(e).done(function(e) {
            return o && t(e), e.morePages ? void a.batch([e.currentPage + 1, e.totalPages], function(e) {
                o && t(e)
            }).done(function(t, a) {
                r.resolve({
                    totalPages: a || e.totalPages,
                    videos: e.videos.concat(t)
                }, t)
            }).fail(r.reject) : r.resolve({
                totalPages: e.totalPages,
                videos: e.videos
            })
        }).fail(r.reject), i
    },
    isCancelled: function() {
        var e = this._cancelled;
        return e && !this._timeout && (this._timeout = setTimeout(function() {
            this._cancelled = !1, this._timeout = null
        }.bind(this, 10))), e
    },
    update: function(e, t) {
        var a = new $.Deferred,
            r = _.extend({}, t, {
                video_id: e
            });
        return r.modified_fields = _.without(_.keys(r), "video_id").join(","), u.getAuthToken("/edit?video_id=" + e).done(function(i) {
            r.session_token = i, log("MyVideos.update >", r), $.post("/metadata_ajax?action_edit_video=1", r).done(function(r) {
                VideosActions.update(e, t), a.resolve(r)
            }).error(a.reject)
        }), a.promise()
    },
    thumbnail: function(e, t, a) {
        var r = new FormData;
        r.append("imagefile", t), r.append("video_id", e), r.append("is_ajax", 1), r.append("o", "U"), r.append("session_token", a);
        var i = new $.Deferred;
        return $.ajax({
            url: "/my_thumbnail_post",
            type: "POST",
            cache: !1,
            contentType: !1,
            dataType: "json",
            processData: !1,
            data: r
        }).done(function(t) {
            return t.error && t.error.length > 0 ? i.reject(t.error) : void this.update(e, {
                thumbnail_preview_version: t.version,
                still_id: 0
            }).done(i.resolve).fail(i.reject)
        }.bind(this)).error(i.reject), i.promise()
    }
};

function TheirVideos(e) {
    this.channel = e
}
_.extend(TheirVideos.prototype, {
    firstPage: function(e, t) {
        return e || (e = new $.Deferred), t || (t = "user"), $.get("/" + t + "/" + this.channel + "/videos").done(function(t) {
            e.resolve(this.scrapeHtml(t))
        }.bind(this)).fail(function(i) {
            "user" === t ? this.firstPage(e, "channel") : e.reject(i)
        }.bind(this)), e.promise()
    },
    scrapeHtml: function(e) {
        var t = [];
        $(e).find(".yt-lockup-video").each(function() {
            var e = $(this),
                i = {};
            i.id = e.attr("data-context-item-id"), i.title = e.find(".yt-lockup-title a").text(), i.duration = e.find(".video-time span").text(), i.thumb = e.find(".yt-thumb-clip img").attr("src"), i.status = "public", t.push(i)
        });
        var i = $(e).find(".load-more-button"),
            o = {
                videos: t,
                morePages: i.length > 0
            };
        return o.morePages && (o.nextPageUrl = i.attr("data-uix-load-more-href")), o
    },
    page: function(e) {
        var t = new $.Deferred;
        return $.get(e).done(function(e) {
            var i = _.values(e),
                o = "<body><div>" + i.join("</div><div>") + "</div></body>";
            t.resolve(this.scrapeHtml(o))
        }.bind(this)).fail(t.reject), t.promise()
    },
    loop: function(e) {
        return e.dfd || (e.dfd = new $.Deferred), e.videos || (e.videos = []), this._cancelled ? e.dfd.resolve(e.videos) : (this.page(e.pageUrl).done(function(t) {
            var i = e.videos.concat(t.videos);
            "function" == typeof e.pageCallback && e.pageCallback(t), t.morePages ? this.loop(_.extend({}, e, {
                pageUrl: t.nextPageUrl,
                videos: i
            })) : e.dfd.resolve(i)
        }.bind(this)).fail(e.dfd.reject), e.dfd.promise())
    },
    all: function(e) {
        var t = new $.Deferred,
            i = {
                videos: [],
                totalVideos: 0,
                morePages: !1
            };
        return this.firstPage().done(function(o) {
            e(o), i.videos = i.videos.concat(o.videos), i.totalVideos = i.videos.length, o.morePages ? this.loop({
                videos: i.videos,
                pageUrl: o.nextPageUrl,
                pageCallback: function(t) {
                    i.totalVideos += t.videos.length, e(_.extend({}, t, {
                        totalVideos: i.totalVideos
                    }))
                }
            }).always(function(e) {
                i.videos = e, i.totalVideos = e.length, t.resolve(i)
            }) : t.resolve(i)
        }.bind(this)).fail(t.reject), _.extend(t.promise(), {
            cancel: this.cancel.bind(this)
        })
    },
    cancel: function() {
        this._cancelled = !0
    }
});
var Playlists = {
    getVideos: function(e) {
        var t = new $.Deferred;
        return $.get("/playlist?list=" + e).done(function(e) {
            var i = $(e),
                n = [],
                a = i.find(".pl-header-details a[data-ytid]").text().trim();
            i.find("#pl-video-table tr.pl-video").each(function(e, t) {
                n.push(this.scrapeVideo($(t)))
            }.bind(this)), this.loadMoreVideos(e, n).done(function(e) {
                t.resolve(_.map(e, function(e) {
                    return e.sameChannel = e.channel === a, e
                }))
            })
        }.bind(this)).error(t.reject), t.promise()
    },
    scrapeVideo: function(e) {
        var t = {};
        t.id = e.attr("data-video-id"), t.title = e.find(".pl-video-title-link").text().trim();
        var i = e.find(".yt-thumb-clip img").first();
        return t.thumb = i.attr("data-thumb") || i.attr("src"), t.duration = e.find(".pl-video-time .timestamp").text().trim(), t.channel = e.find(".pl-video-owner a[data-ytid]").text().trim(), t
    },
    loadMoreVideos: function(e, t, i) {
        i || (i = new $.Deferred), t || (t = []);
        var n = $("<div>" + e + "</div>"),
            a = n.find(".load-more-button");
        if (0 === a.length) i.resolve(t);
        else {
            var r = a.attr("data-uix-load-more-href");
            $.get(r, function(e) {
                if (!e || _.isEmpty(e) || !e.content_html) return i.resolve(t);
                var n = $("<table>" + e.content_html + "</table>");
                return n.find("[data-video-id]").each(function(e, i) {
                    t.push(this.scrapeVideo($(i)))
                }.bind(this)), this.loadMoreVideos(e.load_more_widget_html, t, i)
            }.bind(this)).error(function() {
                i.resolve(t)
            })
        }
        return i.promise()
    },
    page: function(e) {
        var t = new $.Deferred;
        return e || (e = 1), $.get("/view_all_playlists?page=" + e).done(function(i) {
            var n = $(i),
                a = [],
                r = [],
                o = [];
            n.find("#vm-video-list-container .playlist-item").each(function() {
                var e = $(this),
                    t = e.attr("id").split("vm-playlist-").pop(),
                    i = e.find(".vm-pl-title a").text(),
                    n = {
                        id: t,
                        title: i,
                        videoIds: []
                    },
                    r = new $.Deferred;
                t && (Playlists.getVideos(t).done(function(e) {
                    n.videos = e, a.push(n), r.resolve()
                }).fail(r.reject), o.push(r.promise()))
            }), n.find("#vm-pagination .yt-uix-button-content").each(function() {
                var e = parseInt($(this).text(), 10);
                isFinite(e) && r.push(e)
            });
            var s = _.max(r);
            $.when.apply($, o).always(function() {
                t.resolve({
                    playlists: a,
                    page: e,
                    morePages: s > e
                })
            })
        }).error(t.reject), t.promise()
    },
    all: function(e, t, i) {
        return t || (t = new $.Deferred), i || (i = []), this.page(e).done(function(e) {
            i = i.concat(e.playlists), e.morePages ? this.all(e.page + 1, t, i) : t.resolve(i)
        }.bind(this)).fail(t.reject), t.promise()
    },
    create: function(e, t) {
        return $.post("/playlist_ajax?action_create_playlist=1", {
            n: e,
            p: "public",
            session_token: t
        })
    },
    addVideos: function(e, t, i) {
        return $.post("/playlist_edit_service_ajax?action_add_video=1", {
            video_id: t.join(","),
            playlist_id: e,
            session_token: i
        })
    }
};
var VideoWrapper = function(t) {
    this.node = $(t)
};
_.extend(VideoWrapper.prototype, {
    getAll: function() {
        var t = this.getVideoId();
        return {
            id: t,
            videoId: t,
            title: this.getTitle(),
            thumb: this.getThumb(),
            duration: this.getDuration(),
            status: this.getStatus()
        }
    },
    isValid: function() {
        var t = [this.getVideoId(), this.getTitle(), this.getDuration()];
        return _.compact(t).length === t.length
    },
    getVideoId: function() {
        return this.node.data("video-id")
    },
    getTitle: function() {
        return this.node.find("[id^=title] a").text().trim()
    },
    getThumb: function() {
        return this.node.find(".yt-thumb-clip img").attr("src")
    },
    getDuration: function() {
        return this.node.find(".video-time").text().trim()
    },
    getStatus: function() {
        return this.node.find(".vm-video-privacy:not(.hid)").first().attr("data-tooltip-text")
    }
});
var Screeny = {
    _objs: [],
    watch: function(e, t) {
        var n = {
            selector: e
        };
        t && (n.id = t);
        var i = _.findWhere(this._objs, n);
        if (i) return i;
        var r = {
            _els: [],
            _events: {},
            _ignored: [],
            selector: e,
            id: t,
            enter: function(e) {
                return this._enter = e, this
            },
            leave: function(e) {
                return this._leave = e, this
            },
            test: function(e) {
                return this._test = e, this
            },
            on: function(e, t) {
                this._events[e] = t
            },
            trigger: function(e, t) {
                var n = "_" + e;
                "function" == typeof this[n] && this[n](t)
            }
        };
        return this._objs.push(r), r
    },
    clear: function(e) {
        this._objs = _.compact(_.map(this._objs, function(t) {
            return t.selector === e ? void _.each(t._els, function(e) {
                t.trigger("leave", e)
            }) : t
        }))
    },
    monitor: function() {
        this._monitor || (log("Screeny#monitor > Starting!"), this._monitor = !0, this.check(), setInterval(_.bind(this.check, this), 1e3))
    },
    check: function() {
        $(window).trigger("screeny:before-check"), _.each(this._objs, function(e) {
            var t = $(e.selector).filter(":visible").toArray(),
                n = _.difference(t, e._ignored),
                i = _.difference(e._els, n),
                r = _.difference(n, e._els),
                o = _.difference(e._els, i).concat(r);
            e._els = o, i.length > 0 && log("Screeny check: left elements for " + e.selector, i), _.each(i, function(t) {
                e.trigger("leave", t)
            }), _.each(o, function(t) {
                r.indexOf(t) >= 0 && (log("Screeny check: new el for " + e.selector, t), _.each(e._events, function(e, n) {
                    $(t).on(n, function(n, i) {
                        e(t, i)
                    })
                }), $(t).on("screeny:ignore", function() {
                    e._els = _.without(e._els, this), e._ignored.push(this)
                }), e.trigger("enter", t)), e.trigger("test", t)
            })
        })
    },
    waitUntil: function(e, t) {
        var n = new $.Deferred,
            i = setInterval(function() {
                var t = e();
                t.length > 0 && (n.resolve(t), clearInterval(i))
            }, 100);
        return t && setTimeout(function() {
            clearInterval(i), "pending" === n.state() && n.reject()
        }, t), n.promise()
    },
    forPath: function(e, t, n) {
        function i() {
            var i;
            i = e instanceof RegExp ? window.location.pathname.match(e) : window.location.pathname === e, i && !r ? (r = !0, "function" == typeof t && t(e)) : !i && r && (r = !1, "function" == typeof n && n(e))
        }
        var r = !1;
        i(), setInterval(i, 500)
    },
    forPaths: function(e, t, n) {
        e.forEach(function(e) {
            Screeny.forPath(e, t, n)
        })
    }
};
var Translations = {
    defaults: {
        source: "auto",
        target: "choose"
    },
    get: function(a, n, e) {
        var i = new $.Deferred,
            t = "https://app.vidiq.com/v1/translate",
            r = _.map(a, function(a) {
                return "q[]=" + a
            });
        r.push("target=" + e), "auto" !== n && r.push("source=" + n);
        var s = t + "?" + r.join("&");
        return $.get(s).done(function(a) {
            return a.error ? i.reject(a.error) : void i.resolve(a)
        }).fail(i.reject), i.promise()
    },
    getLanguageCode: function(a) {
        return _.compact(_.map(this.languages, function(n, e) {
            return n === a ? e : null
        }))[0]
    },
    titleDescTranslate: function(a, n, e) {
        var i = UploadCompanionStore.id(a).getData(),
            t = i.title,
            r = i.desc,
            s = r.split("\n");
        e && this.get([t].concat(s), n, e).done(function(n) {
            var i = n.data.translations[0].translatedText.replace(/&#39;/g, "'"),
                t = "";
            _.each(n.data.translations, function(a, n) {
                0 !== n && (t += a.translatedText + "\n")
            }), t = t.replace(/&#39;/g, "'"), UploadDOM.setTranslations(a, {
                language: e,
                title: i,
                description: t
            })
        })
    },
    languages: {
        af: "Afrikaans",
        sq: "Albanian",
        am: "Amharic",
        ar: "Arabic",
        hy: "Armenian",
        az: "Azerbaijani",
        eu: "Basque",
        be: "Belarusian",
        bn: "Bengali",
        bs: "Bosnian",
        bg: "Bulgarian",
        ca: "Catalan",
        ceb: "Cebuano",
        ny: "Chichewa",
        "zh-CN": "Chinese (Simplified)",
        "zh-TW": "Chinese (Traditional)",
        co: "Corsican",
        hr: "Croatian",
        cs: "Czech",
        da: "Danish",
        nl: "Dutch",
        en: "English",
        eo: "Esperanto",
        et: "Estonian",
        tl: "Filipino",
        fi: "Finnish",
        fr: "French",
        fy: "Western Frisian",
        gl: "Galician",
        ka: "Georgian",
        de: "German",
        el: "Greek",
        gu: "Gujarati",
        ht: "Haitian Creole",
        haw: "Hawaiian",
        ha: "Hausa",
        iw: "Hebrew",
        hi: "Hindi",
        hmn: "Hmong",
        hu: "Hungarian",
        is: "Icelandic",
        ig: "Igbo",
        id: "Indonesian",
        ga: "Irish",
        it: "Italian",
        ja: "Japanese",
        jw: "Javanese",
        kn: "Kannada",
        kk: "Kazakh",
        km: "Khmer",
        ko: "Korean",
        ku: "Kurdish",
        ky: "Kyrgyz",
        lo: "Lao",
        la: "Latin",
        lv: "Latvian",
        lt: "Lithuanian",
        lb: "Luxembourgish",
        mk: "Macedonian",
        mg: "Malagasy",
        ms: "Malay",
        ml: "Malayalam",
        mt: "Maltese",
        mi: "Maori",
        mr: "Marathi",
        mn: "Mongolian",
        my: "Myanmar (Burmese)",
        ne: "Nepali",
        no: "Norwegian",
        ps: "Pashto",
        fa: "Persian",
        pl: "Polish",
        pt: "Portuguese",
        pa: "Punjabi",
        ro: "Romanian",
        ru: "Russian",
        gd: "Scottish Gaelic",
        sm: "Samoan",
        sr: "Serbian",
        st: "Sesotho",
        sn: "Shona",
        sd: "Sindhi",
        si: "Sinhala",
        sk: "Slovak",
        sl: "Slovenian",
        so: "Somali",
        es: "Spanish",
        su: "Sudanese",
        sw: "Swahili",
        sv: "Swedish",
        tg: "Tajik",
        ta: "Tamil",
        te: "Telugu",
        th: "Thai",
        tr: "Turkish",
        uk: "Ukrainian",
        ur: "Urdu",
        uz: "Uzbek",
        vi: "Vietnamese",
        cy: "Welsh",
        xh: "Xhosa",
        yi: "Yiddish",
        yo: "Yoruba",
        zu: "Zulu"
    }
};
var Templates = {
    base: "https://app.vidiq.com",
    updateMsgOpacity: function() {
        setTimeout(function() {
            ThumbnailTemplatesActions.update({
                msgOpacity: 0
            })
        }, 3e3)
    },
    updateSuccess: function(e, t, a) {
        var n = {
            loading: !1,
            message: {
                type: "success",
                text: e + " " + t
            },
            msgOpacity: 1,
            loadName: e
        };
        a && _.extend(n, {
            thumbnail_templates: a
        }), "deleted" === t.split(" ")[0] && _.extend(n, {
            saveName: null
        }), ThumbnailTemplatesActions.update(n), this.updateMsgOpacity()
    },
    updateFailure: function(e) {
        ThumbnailTemplatesActions.update({
            loading: !1,
            message: {
                type: "error",
                text: e
            },
            msgOpacity: 1
        }), this.updateMsgOpacity()
    },
    getUpdatedStoreTemplates: function(e) {
        var t = ThumbnailTemplatesStore.getData().thumbnail_templates,
            a = _.omit(t, e);
        return a
    },
    getAdjustedObjects: function(e, t) {
        var a = new $.Deferred,
            n = 0;
        if (_.isEmpty(t)) a.reject("No objects");
        else {
            var s = [];
            _.each(t, function(r) {
                var o = _.extend({}, r);
                s.push(o), this.uploadImage(e, r).done(function(o) {
                    o && (r.src = o, r.crossOrigin = "anonymous"), n += 1, n === t.length && (this.addTemplateToStore(e, s), a.resolve(t))
                }.bind(this)).fail(function(e) {
                    a.reject(e)
                })
            }, this)
        }
        return a.promise()
    },
    uploadImage: function(e, t) {
        var a = 15e5,
            n = new $.Deferred;
        "image" !== t.type && n.resolve();
        var s = new XMLHttpRequest;
        return s.open("GET", t.src, !0), s.responseType = "blob", s.onload = function() {
            if (200 === this.status) {
                var t = this.response;
                t.size > a ? n.reject("Image too large, maximum is 1.5 MB") : (t.lastModifiedDate = new Date, t.name = e, Templates.getCachedUrl(t).done(function(e) {
                    n.resolve(e)
                }).fail(function(a) {
                    var s = new Upload({
                        tempId: e,
                        file: t,
                        type: "image"
                    });
                    s.start().done(function(e) {
                        var t = Templates.base + "/v1/uploads/" + e.id.toString() + "/download";
                        Templates.cacheImageUrl(a, t), n.resolve(t)
                    })
                }))
            } else n.reject("ERROR " + this.status)
        }, s.send(), n.promise()
    },
    addTemplateToStore: function(e, t) {
        var a = ThumbnailTemplatesStore.getData().thumbnail_templates,
            n = {};
        n[e] = t;
        var s = _.extend({}, a, n);
        ThumbnailTemplatesActions.update({
            thumbnail_templates: s
        })
    },
    createImageBlobs: function(e) {
        ThumbnailTemplatesActions.update({
            loading: !0
        });
        var t = {},
            a = new $.Deferred,
            n = 0;
        return e && !_.isEmpty(e) || a.resolve(t), _.each(e, function(s, r) {
            this.getImageBlobs(s).done(function(s) {
                t[r] = s, n += 1, n === _.keys(e).length && a.resolve(t)
            })
        }, this), a.promise()
    },
    getImageBlobs: function(e) {
        var t = new $.Deferred,
            a = [],
            n = [];
        _.each(e, function() {
            a.push(new $.Deferred)
        }), $.when.apply(this, a).done(function() {
            t.resolve(n)
        });
        var s = /https:\/\/app.vidiq.com\/v1\/uploads\/[0-9]+\/download/;
        return _.each(e, function(e, t) {
            this.getBlob(e, s).done(function(e) {
                n[t] = e, a[t].resolve()
            })
        }, this), t.promise()
    },
    getBlob: function(e, t) {
        var a = new $.Deferred,
            n = _.extend({}, e);
        if (n.src && n.src.match(t)) {
            var s = new XMLHttpRequest;
            s.open("GET", n.src, !0), s.responseType = "arraybuffer", s.onload = function() {
                var e = new Uint8Array(this.response),
                    t = Templates.checksum(e);
                Templates.cacheImageUrl(t, n.src);
                var s = new Blob([e], {
                        type: "image/jpeg"
                    }),
                    r = window.URL || window.webkitURL,
                    o = r.createObjectURL(s);
                n.src = o, a.resolve(n)
            }, s.send()
        } else a.resolve(n);
        return a.promise()
    },
    cacheImageUrl: function(e, t) {
        var a = ThumbnailTemplatesStore.getData().imageCodes,
            n = {};
        n[e] = t;
        var s = _.extend({}, a, n);
        ThumbnailTemplatesActions.update({
            imageCodes: s
        })
    },
    getCachedUrl: function(e) {
        var t = new $.Deferred,
            a = new FileReader;
        return a.onload = function() {
            var e = new Uint8Array(this.result),
                a = Templates.checksum(e),
                n = Templates.checkImageCodes(a);
            n ? t.resolve(n) : t.reject(a)
        }, a.readAsArrayBuffer(e), t.promise()
    },
    checkImageCodes: function(e) {
        var t = ThumbnailTemplatesStore.getData().imageCodes;
        return t[e] ? t[e] : null
    },
    checksum: function(e) {
        for (var t = 2166136261, a = e.length, n = 0; a > n; n += 1) t = t + ((t << 1) + (t << 4) + (t << 7) + (t << 8) + (t << 24) >>> 0) ^ 255 & e[n];
        return t >>> 0
    },
    clearAll: function() {
        var e = this.base + "/v2/user_settings?keys=thumbnail_templates";
        $.ajax({
            url: e,
            type: "DELETE"
        });
        for (var t = 3542; t >= 3530; t -= 1) {
            var a = this.base + "/v1/uploads/" + t.toString();
            $.ajax({
                url: a,
                type: "DELETE"
            })
        }
    }
};
var Upload = function(t) {
    _.extend(this, t), _.bindAll(this, "onPartDone", "onPartError", "onPartProgress"), log("Upload > Created new upload", this)
};
Upload.isValid = function(t) {
    return t.size <= this.prototype.PART_LIMIT * this.prototype.PART_SIZE
}, _.extend(Upload.prototype, {
    id: null,
    tempId: null,
    file: null,
    type: null,
    parts: [],
    queue: [],
    fail: !1,
    video: null,
    done: !1,
    PART_LIMIT: 1e3,
    PART_SIZE: 52428800,
    THROTTLE: 3,
    isValid: function() {
        return Upload.isValid(this.file)
    },
    start: function() {
        var t = new $.Deferred;
        if (this.isValid()) {
            this.parts = [], this.queue = [], this.fail = !1;
            var n = api().baseV1 + "uploads",
                o = {
                    name: this.file.name,
                    type: this.type || "video",
                    mime_type: this.file.type
                };
            return log("Upload#start > POST %s", n, o), u.retry(function() {
                return $.jsonPost(n, o)
            }).done(function(o) {
                return o.error ? this.onPartError() : (log("Upload#start > POST SUCCESS %s", n, o), this.response = o, this.id = o.id, this.send(), void t.resolve(this))
            }.bind(this)).fail(function(n) {
                this.onPartError(), t.reject(n)
            }.bind(this))
        }
    },
    cancel: function() {
        if (_.each(this.parts, function(t) {
                log("Upload#cancel > CANCEL PART", t), t.xhr && t.xhr.abort(), t.cancelled = !0
            }), $(window).trigger("upload-error:" + this.tempId), this.id) {
            var t = api().baseV1 + "uploads/" + this.id;
            log("Upload#cancel > DELETE %s", t), u.retry(function() {
                return $.ajax(t, {
                    type: "DELETE"
                })
            }).done(function() {
                log("Upload#cancel > DELETE SUCCESS %s", t)
            }).fail(function(n) {
                log("Upload#cancel > DELETE FAIL %s", t, n)
            })
        }
    },
    finish: function() {
        var t, n = this,
            o = api().baseV1 + "uploads/" + this.id + "/complete";
        log("Upload#finish > GET %s", o), u.retry(function() {
            return $.get(o)
        }).done(function(r) {
            log("Upload#finish > GET SUCCESS %s", o, r), o = r, t = n.getXML(), log("Upload#finish > POST %s", o, t), u.retry(function() {
                return $.ajax({
                    type: "POST",
                    url: o,
                    data: t,
                    contentType: "text/xml"
                })
            }).done(function() {
                log("Upload#finish > POST SUCCESS %s", o), o = api().baseV1 + "uploads/" + n.id + "/complete", log("Upload#finish > POST %s", o), u.retry(function() {
                    return $.post(o)
                }).done(function() {
                    log("Upload#finish > POST SUCCESS %s", o), n.done = !0, $(window).trigger("upload-done:" + n.tempId), "function" == typeof n.onFinish && n.onFinish()
                }).fail(n.onPartError)
            }).fail(n.onPartError)
        }).fail(this.onPartError)
    },
    send: function() {
        var t = this,
            n = api().baseV1 + "uploads/" + t.id + "/parts";
        log("Upload#send > POST %s", n), u.retry(function() {
            return $.post(n)
        }).done(function() {
            log("Upload#send > POST SUCCESS %s", n), t.slice(function(n, o) {
                var r = new UploadPart({
                    id: t.id,
                    number: n,
                    blob: o,
                    onDone: t.onPartDone,
                    onError: t.onPartError,
                    onProgress: t.onPartProgress
                });
                t.parts.push(r), n > t.THROTTLE ? t.queue.push(r) : r.send()
            })
        }).fail(this.onPartError)
    },
    slice: function(t) {
        var n = this.file.size,
            o = this.PART_SIZE;
        n / o > this.PART_LIMIT && (o = Math.ceil(n / this.PART_LIMIT));
        var r = Math.ceil(n / o);
        log("Upload#slice > Splitting file into %i chunks of %f MB", r, o / 1024 / 1024);
        for (var i = 1; r >= i; i += 1) {
            var e = (i - 1) * o,
                a = Math.min(i * o, n);
            "function" == typeof t && t(i, this.file.slice(e, a))
        }
    },
    onPartProgress: _.throttle(function() {
        var t = this.getProgress();
        this.callback("onProgress", t), $(window).trigger("upload-progress:" + this.tempId, [t])
    }, 500),
    getProgress: function() {
        if (!this.parts.length) return 0;
        var t = _.map(this.parts, function(t) {
                return t.progress
            }),
            n = t.reduce(function(t, n) {
                return t + n
            });
        return n / t.length
    },
    getXML: function() {
        var t = _.map(this.parts, function(t) {
                return ["<Part><PartNumber>", t.number, "</PartNumber>", "<ETag>", t.etag, "</ETag>", "</Part>"]
            }),
            n = ["<CompleteMultipartUpload>", t, "</CompleteMultipartUpload>"];
        return _.flatten(n).join("")
    },
    onPartError: function(t) {
        this.fail || (log("Upload#onPartError > AJAX FAIL", t), this.fail = !0, this.cancel())
    },
    onPartDone: function() {
        var t = this.queue.pop();
        t && (log("Upload#onPartDone > Sending next queued part", t), t.send());
        var n = _.uniq(_.map(this.parts, function(t) {
            return t.done
        }));
        1 === n.length && n[0] && (log("Upload#onPartDone > All parts finished uploading"), this.finish())
    },
    callback: function(t, n) {
        "function" == typeof this[t] && this[t](n)
    }
});
var UploadPart = function(t) {
    _.extend(this, t), log("UploadPart > Created new upload part", this)
};
_.extend(UploadPart.prototype, {
    progress: 0,
    id: null,
    blob: null,
    number: null,
    etag: null,
    xhr: null,
    done: !1,
    cancelled: !1,
    send: function(t) {
        var e = api().baseV1 + "uploads/" + this.id + "/parts/" + this.number;
        log("UploadPart#send > POST %s", e), u.retry(function() {
            return $.get(e)
        }).done(function(t) {
            log("UploadPart#send > POST SUCCESS %s", e, t), this.cancelled || u.retry(function() {
                return this.put(t)
            }.bind(this))
        }.bind(this)).fail(function(n) {
            log("UploadPart#send > POST FAIL %s", e, n), this.cancelled || (3 > t ? this.send((t || 0) + 1) : this.callback("onError", n))
        }.bind(this))
    },
    put: function(t) {
        if (!this.cancelled) {
            var e = new $.Deferred,
                n = this.blob;
            log("UploadPart#put > PUT %s", t, n);
            var o = new XMLHttpRequest;
            return this.xhr = o, o.open("PUT", t, !0), o.onerror = function(n) {
                log("UploadPart#put > PUT FAIL %s", t, n), this.callback("onError", [this, n]), e.reject(o)
            }.bind(this), o.onreadystatechange = function() {
                if (4 === o.readyState && !this.done) {
                    if (log("UploadPart#put > PUT SUCCESS %s", t, o), 200 !== o.status) return this.callback("onError", o), void e.reject(o);
                    this.etag = o.getResponseHeader("ETag"), this.done = !0, this.callback("onDone", this), e.resolve(o)
                }
            }.bind(this), o.upload.onprogress = function(t) {
                t.lengthComputable && (this.progress = t.loaded / t.total, this.callback("onProgress", this.progress))
            }.bind(this), o.send(n), e.promise()
        }
    },
    callback: function(t, e) {
        _.isArray(e) || (e = [e]), "function" == typeof this[t] && this[t].apply(this, e)
    }
});
var Syndication = {
    defaults: {
        archiving: dataStore.getItem("syn-archiving") || !1
    },
    files: [],
    uploads: [],
    getDefault: function(t) {
        return this.defaults[t]
    },
    setDefault: function(t, e) {
        return dataStore.setItem("syn-" + t, e), this.defaults[t] = e, e
    },
    _ytFileInput: null,
    hackInitialUpload: function(t, e) {
        log("hacking! hackInitialUpload");
        var i = this,
            n = e.first(),
            o = $('<input type="file" id="vidiq-file-upload" multiple>');
        this._ytFileInput = n.get(0), o.change(function() {
            $(window).trigger("capture-files", [this.files]), i.hackYtUpload(this.files)
        }).css({
            cursor: "pointer"
        }), o.insertAfter(n), o.attr("style", n.attr("style")), n.css({
            left: "-99999px"
        }), n.parent().on("mouseenter mouseleave", function(t) {
            var e = $("#start-upload-button-single"),
                i = "upload-element-hover";
            e.toggleClass(i), "mouseleave" === t.type && e.removeClass(i)
        })
    },
    hackUploadFooter: function(t) {
        log("hacking! hackUploadFooter");
        var e = this,
            i = $('<input type="file">'),
            n = t.find(".start-upload-button"),
            o = n.clone().addClass("vidiq-was-here");
        o.click(function() {
            i.click()
        }), i.change(function() {
            $(window).trigger("capture-files", [this.files]), e.hackYtUpload(this.files)
        }), n.replaceWith(o)
    },
    hackYtUpload: function(t) {
        log("hacking! hackYtUpload"), this._ytFileInput && t && (this._ytFileInput.files = t)
    },
    listen: function() {
        _.bindAll(this, "onCaptureFiles", "onUploadPrepare"), $(window).on("capture-files", this.onCaptureFiles).on("upload-prepare", this.onUploadPrepare)
    },
    onCaptureFiles: function(t, e) {
        if (log("Syndication#onCaptureFiles > Captured new files", e), !e.length) return void this.files.push(e);
        for (var i = 0; i < e.length; i += 1) this.files.push(e[i])
    },
    onUploadPrepare: function(t, e) {
        var i = this.files[e.index];
        return i && !Upload.isValid(i) && (log("Syndication#onUploadPrepare > File is too big to upload"), i = null), i ? (MasterVideosActions.setFile(e.tempId, i), log("Syndication#onUploadPrepare > File is ready to upload"), void(this.getDefault("archiving") && (log("Syndication#onUploadPrepare > Starting upload"), MasterVideosActions.startUpload(e.tempId)))) : void log("Syndication#onUploadPrepare > No file associated with #%i. User must choose a file manually", e.index)
    },
    getUpload: function(t) {
        return _.where(this.uploads, {
            tempId: t
        })[0]
    },
    couple: function() {
        Screeny.forPath("/upload", function() {
            var t = api().featurePermitted("syndication"),
                e = Syndication.currentChannel;
            return e && t ? (Screeny.watch("#upload-prompt-box").enter(function(t) {
                var e = $(t);
                $("body").on("drop", function(t) {
                    var e = t.originalEvent.dataTransfer.files;
                    $(window).trigger("capture-files", [e])
                }), Screeny.waitUntil(function() {
                    return e.find("input[type=file]")
                }, 5e3).done(function(t) {
                    Syndication.hackInitialUpload(e, t), u.mountComponent({
                        component: SyndicationSettings,
                        selector: "#upload-prompt-box",
                        rootClass: "vidiq-mount-syn-settings"
                    }), $(".vidiq-wait-upload").remove(), window.location.href.match(/VIDIQ_INLINE_UPLOAD/) && u.mountComponent({
                        component: InlineUpload,
                        selector: "#upload-prompt-box",
                        rootClass: "vidiq-mount-inline-upload",
                        props: {
                            id: "tempid",
                            youtubeId: "fBC9HsckwuU"
                        }
                    })
                }).fail(function() {
                    warn("Could not find file inputs for upload page")
                })
            }), Screeny.watch(".upload-item", "syndication-upload").enter(function(t) {
                var e = $(t),
                    i = parseInt((e.attr("id") || "").split("-").reverse()[0], 10),
                    n = u.prettyRandomId();
                MasterVideosStore.createVideo(n), e.data("vidiq-temp-id", n), $(window).trigger("upload-prepare", {
                    index: i,
                    tempId: n
                }), u.mountComponent({
                    component: InlineUpload,
                    selector: "#upload-item-" + i + " .upload-state-bar",
                    rootClass: "vidiq-mount-inline-upload",
                    props: {
                        id: n
                    }
                }), Screeny.waitUntil(function() {
                    return e.find(".watch-page-link a")
                }).done(function(t) {
                    var e = (t.attr("href") || "").split("/").reverse()[0];
                    MasterVideosActions.setYoutubeId(n, e)
                })
            }).leave(function(t) {
                $(t).trigger("screeny:failed")
            }).test(function(t) {
                $(t).is(".upload-item-failed") && $(t).trigger("screeny:failed")
            }).on("screeny:failed", function(t) {
                var e = $(t).data("vidiq-temp-id");
                MasterVideosActions.cancelUpload(e, "duplicate"), $(t).trigger("screeny:ignore")
            }), void Screeny.watch(".upload-footer").enter(function(t) {
                Syndication.hackUploadFooter($(t))
            })) : (u.mountComponent({
                component: SyndicationPrompt,
                selector: "#upload-prompt-box",
                rootClass: "vidiq-mount-syn-prompt"
            }), void $(".vidiq-wait-upload").remove())
        })
    }
};
Screeny.forPath("/upload", function() {
    if (setInterval(function() {
            $(".vidiq-wait-upload").remove()
        }, 5e3), $.when(ytApi().getCurrentChannelID(), api().getUser()).then(function(t) {
            var e = api().getChannel(t);
            Syndication.listen(), Syndication.currentChannel = e, Syndication.couple()
        }), api().featurePermitted("syndication")) {
        var t = ".upload-widget-left-column > .upload-widget:first-child";
        Screeny.watch(t).enter(function(t) {
            var e = $(t);
            $("<div></div>").addClass("vidiq-wait-upload").css({
                width: e.outerWidth(),
                height: e.outerHeight(),
                position: "absolute",
                top: 0,
                left: 0
            }).appendTo(e)
        })
    }
});

function Export(t) {
    this.data = {
        id: t
    }, this.dfd = new $.Deferred, this.promise = this.dfd.promise()
}
Export.STATS = ["id", "title", "description", "duration", "status", "date_published", "keywords", "vidiq_score", "views", "yt_likes", "yt_dislikes", "yt_comments", "fb_likes", "fb_shares", "fb_comments", "tweets", "reddit", "google_plus", "stumbleupon", "linkedin", "desc_link_count", "desc_word_count", "creator_suggested", "engagement_rate", "estimated_earnings"], Export.start = function(t) {
    var e = new Export(t);
    return e.build(), e
}, Export.fromVideo = function(t) {
    var e = new Export(t.id);
    return e.set({
        title: t.title,
        duration: u.time2sec(t.duration),
        status: t.status
    }), e._video = t, e
}, Export.csv = function(t, e) {
    e || (e = this.STATS);
    var i = [e.join(",").toUpperCase()].concat(_.map(t, function(t) {
        return _.map(e, function(e) {
            var i = t[e];
            return i && "function" == typeof i.match && i.match(/"|,/) && (i = '"' + i.replace(/"/g, '""') + '"'), i
        }).join(",")
    }, this));
    return i.join("\n")
}, Export.csv2url = function(t) {
    return URL.createObjectURL(new Blob([t], {
        type: "text/csv"
    }))
}, Export.scrapeVideo = function(t) {
    var e = new $.Deferred,
        i = "https://www.youtube.com/watch?v=" + t;
    return $.get(i).done(function(i) {
        var s = $(i),
            n = (s.find("#eow-description").html() || "").trim(),
            r = (s.find("#eow-title").text() || "").trim(),
            o = s.find('[itemprop="datePublished"]').attr("content"),
            a = (i.match(/"keywords":"([^"]+)/) || [])[1],
            d = ytApi().getLocalLikesDislikes(s),
            l = s.find('[name="session_token"]').val(),
            c = s.find(".watch-view-count").text(),
            h = s.find("#watch7-main .yt-user-info a").attr("data-ytid"),
            p = s.find('#watch-related span.stat.attribution > span[data-ytid="' + h + '"]').length || 0;
        n = n.replace(/href=/g, "___HREF___").replace(/( ?[^ ]+)="[^"]+"/g, "").replace(/___HREF___/g, "href=");
        var f = n.replace(/<[^>]+>/g, " ").replace(/ +/g, " ").split(" ");
        f = _.without(f, ""), c = parseInt(c.replace(/[^0-9]/g, ""), 10), isFinite(c) || (c = 0);
        var m, g = "$" + calculateEstimatedEarnings(c).toFixed(2),
            v = "https://i.ytimg.com/vi/" + t + "/default.jpg",
            w = s.find('meta[itemprop="duration"]').attr("content");
        if (w) {
            var y = w.replace(/(PT|S)/g, "").replace(/M|H/, ",").split(","),
                k = ytApi().str2int(y[0], "duration minutes"),
                b = ytApi().str2int(y[1], "duration seconds");
            m = 60 * k + b
        }
        var x = {
            thumb: v,
            duration: m ? u.sec2time(m) : null,
            description: n,
            desc_link_count: (n.match(/<a/g) || []).length,
            desc_word_count: f.length,
            title: r,
            date_published: o,
            keywords: a,
            views: c,
            yt_likes: d.likes,
            yt_dislikes: d.dislikes,
            yt_comments: null,
            estimated_earnings: c ? g : null,
            creator_suggested: p
        };
        e.resolve(x, l)
    }).fail(e.reject), e.promise()
}, Export.scrapeComments = function(t, e) {
    var i = new $.Deferred,
        s = "https://www.youtube.com/watch?v=" + t,
        n = "/watch_fragments_ajax?v=" + t + "&tr=scroll&distiller=1&frags=comments&spf=load";
    return $.ajax({
        method: "POST",
        url: n,
        data: {
            client_url: s,
            session_token: e
        },
        headers: {
            "X-YouTube-Identity-Token": e
        }
    }).done(function(t) {
        if (!t || !t.body) return i.reject();
        var e = t.body["watch-discussion"].match(/\(([0-9]+)\)/);
        i.resolve(e ? parseInt(e[1], 10) : 0)
    }).error(i.reject), i.promise()
}, _.extend(Export.prototype, {
    started: !1,
    data: null,
    promise: null,
    progress: 0,
    build: function() {
        return this.started = !0, this.set(this.getScrapedStats()), this.set(this.getSocialStats()), this.set(this.getScore()), this.set(this.getEngagementRate()), this.promise
    },
    set: function(t) {
        return "function" == typeof t.done ? t.done(function(t) {
            this.set(t)
        }.bind(this)) : (this._idleTimeout && clearTimeout(this._idleTimeout), _.extend(this.data, _.pick.apply(_, [t].concat(Export.STATS))), "pending" !== this.dfd.state() ? void log("Set values for completed video", t, this) : (this.checkWaitedFor(), this.progress = this.getProgress(), "function" == typeof this.onProgress && this.onProgress(this.progress), void(this.progress >= 1 ? this.dfd.resolve(this.data) : this.started && (this._idleTimeout = setTimeout(function() {
            if (!(this.getProgress() >= 1)) {
                var t = _.difference(Export.STATS, _.keys(this.data));
                log("Video export timed out!", _.extend({}, this), t), _.each(t, function(t) {
                    this.data[t] = null
                }, this), this.set(this.data)
            }
        }.bind(this), 7e3)))))
    },
    hasKeys: function(t) {
        return 0 === _.difference(t, _.keys(this.data)).length
    },
    checkWaitedFor: function() {
        this._waitingFor && (this._waitingFor = _.chain(this._waitingFor).map(function(t, e) {
            return this.hasKeys(t.keys) ? (t.dfd.resolve(), null) : [e, t]
        }, this).compact().object().value())
    },
    waitFor: function(t) {
        var e = new $.Deferred;
        return this.hasKeys(t) ? _.defer(function() {
            e.resolve()
        }) : (this._waitingFor || (this._waitingFor = {}), this._waitingFor[u.prettyRandomId()] = {
            keys: t,
            dfd: e
        }), e.promise()
    },
    getProgress: function() {
        return _.keys(this.data).length / Export.STATS.length
    },
    getScrapedStats: function() {
        var t = new $.Deferred,
            e = this.data.id;
        return Export.scrapeVideo(e).done(function(i, s) {
            Export.scrapeComments(e, s).done(function(e) {
                i.yt_comments = e, t.resolve(i)
            }).fail(function() {
                t.resolve(i)
            })
        }).fail(function() {
            t.resolve({
                description: null,
                desc_link_count: null,
                desc_word_count: null,
                title: null,
                date_published: null,
                keywords: null,
                yt_views: null,
                yt_likes: null,
                yt_dislikes: null,
                yt_comments: null,
                estimated_earnings: null,
                creator_suggested: null
            })
        }), t.promise()
    },
    getSocialStats: function() {
        for (var t = new $.Deferred, e = [], i = 0; 4 > i; i += 1) {
            var s = new $.Deferred;
            e.push(s)
        }
        return setTimeout(function() {
            _.each(e, function(t) {
                "pending" === t.state() && t.resolve(null)
            })
        }, 5e3), extApi().socialStatsForVideo(this.data.id, function(t) {
            e[0].resolve({
                tweets: t.twitterCount,
                fb_shares: t.fbShares,
                fb_likes: t.fbLikes,
                fb_comments: t.fbComments,
                google_plus: t.gPlus
            })
        }), extApi().redditLikesForVideo(this.data.id, function(t) {
            var i = t ? parseInt(t, 10) : 0;
            e[1].resolve({
                reddit: i
            })
        }), extApi().stumbleUponForVideo(this.data.id, function(t) {
            var i = t ? parseInt(t, 10) : 0;
            e[2].resolve({
                stumbleupon: i
            })
        }), extApi().linkedInForVideo(this.data.id, function(t) {
            var i = t ? parseInt(t, 10) : 0;
            e[3].resolve({
                linkedin: i
            })
        }), $.when.apply($, e).always(function() {
            var e = _.extend.apply(_, _.compact(_.toArray(arguments)));
            e = _.object(_.map(e, function(t, e) {
                return [e, "N/A" === t ? null : t]
            })), t.resolve(_.extend({
                tweets: null,
                fb_shares: null,
                fb_likes: null,
                fb_comments: null,
                google_plus: null,
                reddit: null,
                stumbleupon: null,
                linkedin: null
            }, e))
        }), t.promise()
    },
    getScore: function() {
        var t = new $.Deferred,
            e = {
                youtube: {
                    id: "id",
                    views: "views",
                    likes: "yt_likes",
                    dislikes: "yt_dislikes",
                    comments: "yt_comments"
                },
                facebook: {
                    likes: "fb_likes",
                    shares: "fb_shares",
                    comments: "fb_comments"
                },
                twitter: {
                    tweets: "tweets"
                }
            },
            i = _.flatten(_.map(_.values(e), function(t) {
                return _.values(t)
            }));
        return this.waitFor(i).done(function() {
            var i = _.extend({}, e);
            _.each(e, function(t) {
                _.each(t, function(e, i) {
                    t[i] = this.data[e]
                }, this)
            }, this);
            var s = u.precision(api().clientIqScore(i), 2);
            t.resolve({
                vidiq_score: s
            })
        }.bind(this)), t.promise()
    },
    getEngagementRate: function() {
        var t = new $.Deferred,
            e = ["yt_likes", "yt_dislikes", "yt_comments", "fb_likes", "fb_shares", "fb_comments", "tweets", "reddit", "google_plus", "stumbleupon", "linkedin"];
        return this.waitFor(e.concat(["views"])).done(function() {
            var i = _.reduce(e, function(t, e) {
                    var i = this.data[e] || 0;
                    return _.isNumber(i) || (i = parseInt(i, 10)), isFinite(i) || (i = 0), t + i
                }, 0, this),
                s = this.data.views || 0,
                n = i / s;
            isFinite(n) || (n = 0), t.resolve({
                engagement_rate: n.toFixed(2)
            })
        }.bind(this)), t.promise()
    }
});
var GrandCentral = {
    locked: !1,
    batch_size: 8,
    stack: [],
    pushed: 0,
    popped: 0,
    resolved: 0,
    uids: [],
    cancel: function(t) {
        _.each(this.stack, function(e) {
            e.namespace === t && (e.cancelled = !0)
        })
    },
    searchStack: function(t, e) {
        return _.filter(_.pluck(this.stack, t), function(t) {
            return t === e
        })
    },
    isPending: function(t) {
        return this.searchStack("namespace", t).length > 0
    },
    log: _.throttle(function() {
        log("GrandCentral > Report", this)
    }, 5e3),
    push: function(t, e, n) {
        var s = [e, n].join(":"),
            i = new $.Deferred;
        return !n || this.uids.indexOf(s) < 0 ? (this.uids.push(s), this.stack.push({
            fn: t,
            dfd: i,
            uid: s,
            namespace: e
        }), this.pushed += 1, setTimeout(this.exec.bind(this), 1)) : i.reject("duplicate"), i.promise()
    },
    exec: function() {
        if (this.log(), !this.locked) {
            this.locked = !0;
            for (var t = [], e = Math.min(this.batch_size, this.stack.length), n = 0; e > n; n += 1) t.push(this.stack.shift()), this.popped += 1;
            var s = _.map(t, function(t) {
                return t.fn().done(t.dfd.resolve).fail(t.dfd.reject).always(function() {
                    GrandCentral.resolved += 1
                })
            });
            $.when.apply($, s).always(function() {
                this.locked = !1, this.stack.length > 0 && this.exec()
            }.bind(this))
        }
    }
};
var Subscribers = {
    get: function() {
        var e = new $.Deferred;
        return $.get("https://www.youtube.com/subscribers", function(r) {
            var n = _.uniq(r.match(/\/channel\/[^\s"]+/g));
            e.resolve(n)
        }), e.promise()
    }
};

function TaskManager(e) {
    this.extra = e.extra || {}, this.getData = e.getData, this.mergeData = e.mergeData, this.tasks = [], this.onProgressChange = e.onProgressChange
}

function UnknownKeyException(e) {
    this.message = e, this.name = "UnknownKeyException (" + e + ")"
}
_.extend(TaskManager.prototype, {
    stop: function() {
        this.stopped = !0
    },
    progress: function() {
        var e = _.reduce(this.tasks, function(e, t) {
            return t.promise && (e.requested += 1), (t.complete || t.failed) && (e.finished += 1), e
        }, {
            requested: 0,
            finished: 0
        });
        return e.finished / e.requested
    },
    callOnProgressChange: function() {
        "function" == typeof this.onProgressChange && this.onProgressChange(this.progress())
    },
    missingKeys: function(e) {
        if (!e) return [];
        var t = _.keys(this.getData()).concat(_.keys(this.extra));
        return _.difference(e, t)
    },
    getTaskFromKey: function(e) {
        var t = _.filter(this.tasks, function(t) {
                return t.returns.indexOf(e) >= 0
            }),
            n = t[0];
        if (!n) throw new UnknownKeyException('No tasks match "' + e + '"');
        return n
    },
    register: function(e) {
        var t = this.tasks.push(_.extend({}, e)),
            n = this.tasks[t - 1],
            s = this.getData(),
            r = _.reduce(n.returns, function(e, t) {
                void 0 !== s[t] && (e += 1)
            }, 0);
        r === n.returns.length && (n.complete = !0)
    },
    registerMany: function(e) {
        _.each(e, function(e) {
            this.register(e)
        }, this)
    },
    runTask: function(e, t) {
        if (!this.stopped) {
            if (t.timeout !== !1) {
                var n = setTimeout(function() {
                    "pending" === e.state() && (warn("TaskManager:  task timed out", t.returns), e.reject("timeout"))
                }, 7e3);
                e.always(function() {
                    clearTimeout(n)
                })
            }
            try {
                var s = _.extend({}, this.extra, this.getData()),
                    r = _.pick.apply(_, [s].concat(t.requires || [])),
                    i = t.fn.apply(r, [e.resolve, e.reject]);
                void 0 !== i && i !== window && e.resolve(i)
            } catch (a) {
                warn("TaskManager:  task failed", t.returns, a), e.reject(a)
            }
        }
    },
    callMergeData: function(e) {
        this.stopped || this.mergeData(e)
    },
    request: function(e) {
        var t = this.getTaskFromKey(e),
            n = t.returns.join(", "),
            s = new $.Deferred;
        if (t.complete) return s.resolve(_.pick.apply(_, [this.getData()].concat(t.returns))), s.promise();
        if (t.promise) return t.promise;
        var r = _.partial(this.runTask, s, t).bind(this),
            i = this.missingKeys(t.requires);
        return t.promise = s.promise(), t.promise.done(function(e) {
            log('TaskManager: completed task "' + n + '" '), e && (e[t.returns[0]] || 1 !== t.returns.length) || (e = _.object([
                [t.returns[0], e]
            ]));
            try {
                this.callMergeData(e), t.complete = !0
            } catch (s) {
                warn("TaskManager:  could not save data!", t.returns, s)
            }
        }.bind(this)).fail(function() {
            log("TaskManager: rejected task " + n + '" '), this.callMergeData(_.object([
                [e, null]
            ])), t.failed = !0
        }.bind(this)).always(function() {
            setTimeout(this.callOnProgressChange.bind(this), 1)
        }.bind(this)), i.length > 0 ? this.requestMany(i).done(function(e, n) {
            return t.strict !== !1 && n.length > 0 ? s.reject() : void r()
        }) : r(), t.promise
    },
    requestMany: function(e) {
        var t = new $.Deferred,
            n = [],
            s = [],
            r = _.chain(e).map(function(e) {
                var t = this.getTaskFromKey(e);
                return t ? t.returns[0] : null
            }, this).uniq().compact().value(),
            i = _.debounce(function() {
                n.length + s.length === r.length && t.resolve(s, n)
            }, 200);
        return _.each(r, function(e) {
            this.request(e).fail(function() {
                n.push(e)
            }).done(function() {
                s.push(e)
            }).always(function() {
                setTimeout(i, 10)
            })
        }, this), t.promise()
    },
    requestAll: function() {
        var e = _.uniq(_.flatten(_.pluck(this.tasks, "returns")));
        return this.requestMany(e)
    }
});
var UserSettings = {
    baseUrl: "https://app.vidiq.com/v2/user_settings",
    fetchTemplates: function(e, t) {
        var n = new $.Deferred,
            a = e + "_templates",
            r = t();
        if (r) n.resolve(r);
        else {
            var i = this.baseUrl + "?keys=" + a;
            $.get(i).done(function(e) {
                n.resolve(e[a] || e)
            }).fail(function(e) {
                n.reject(e.status + " " + e.statusText)
            })
        }
        return n.promise()
    },
    updateTemplates: function(e) {
        var t = new $.Deferred;
        return $.ajax({
            url: this.baseUrl,
            data: JSON.stringify(e),
            type: "PATCH",
            contentType: "application/json",
            processData: !1,
            dataType: "json"
        }).done(function() {
            t.resolve()
        }).fail(function(e) {
            t.reject(e)
        }), t.promise()
    },
    saveTemplate: function(e) {
        var t = new $.Deferred;
        return this.fetchTemplates(e.type, e.findCache).done(function(n) {
            var a = {};
            a[e.name] = e.data;
            var r = _.extend({}, n || {}, a),
                i = {};
            i[e.type + "_templates"] = r, this.updateTemplates(i).done(function() {
                t.resolve(r)
            }).fail(function(e) {
                t.reject(e)
            })
        }.bind(this)).fail(function(e) {
            t.reject(e)
        }), t.promise()
    },
    deleteTemplate: function(e, t, n) {
        var a = new $.Deferred;
        return this.fetchTemplates(e, n).done(function(n) {
            var r = _.omit(n, t),
                i = {};
            i[e + "_templates"] = r, this.updateTemplates(i).done(function() {
                a.resolve(r)
            }).fail(function(e) {
                a.reject(e)
            })
        }.bind(this)).fail(function(e) {
            a.reject(e)
        }), a.promise()
    }
};
var VideoPreview = {
    mount: function(t, i, n) {
        if (!n) {
            var o = $(t).find(".yt-uix-sessionlink")[0];
            n = o ? $(o).attr("href").split("=")[1] : null
        }
        n && i["rating-bar"] && this.mountRatingBar(n, t)
    },
    isVideoListItem: function(t) {
        return $(t).hasClass("video-list-item")
    },
    mountRatingBar: function(t, i) {
        var n = $(i).find(".yt-thumb")[0];
        n || (n = $(i).find(".thumb-link")[0]), u.mountComponent({
            component: RatingBar,
            element: n,
            insertFn: "after",
            rootClass: "vidiq-rating-bar-container",
            props: {
                videoId: t,
                randomId: u.prettyRandomId()
            }
        })
    },
    mountPopover: function(t, i, n) {
        var o = this.isVideoListItem(n) ? $(n).find(".thumb-link")[0] : n;
        $(o).attr("data-react-popover", "PreviewPopup"), $(o).attr("data-react-popover-props", '{"videoId":"' + t + '","showTags":"' + i + '"}')
    }
};
var ExtensionDebug = {
    setup: function() {
        var e;
        try {
            e = localStorage.debug
        } catch (t) {}
        window.debug = e || !1, window.location.href.match(/VIDIQ_DEBUG/) && (window.debug = !0)
    },
    showDebugInfo: function() {
        if (window.location.href.match(/VIDIQ_DEBUG/)) {
            var e = JSON.stringify({
                session: api()._sessionResponse,
                dataStore: {
                    pro: dataStore.getItem("pro"),
                    boost: dataStore.getItem("boost"),
                    boost_plus: dataStore.getItem("boost_plus"),
                    enterprise: dataStore.getItem("enterprise")
                },
                userType: api().getUserType()
            }).replace(/,/g, ", ");
            $("#vidiq-debug-info").remove(), $('<pre id="vidiq-debug-info"></pre>').text(e).appendTo("body").css({
                padding: "20px",
                "white-space": "normal"
            })
        }
    }
};
var Extension;
ExtensionDebug.setup(), EventTracking.setup(), window.isFirefox = !1, $(function() {
    Extension.getYtConfig().done(function(e) {
        window.ytconfig = e, ytApi().getLocalMcnAttribution()
    }), Screeny.monitor(), Extension.setupHotSearch(), Extension.setupKeywordInspector(), Extension.setupUniversalEvents(), Extension.setupTooltips(), Extension.watchForThumbnails(), ReactPopover.setup(), Extension.setupAjaxHeaders(), Extension.start()
}), Extension = {
    loading: null,
    error: null,
    isReady: function() {
        return !(this.loading || this.error)
    },
    getYtConfig: function() {
        var e = new $.Deferred,
            t = setTimeout(function() {
                e.reject()
            }, 10);
        try {
            window.addEventListener("message", function(n) {
                n.data.ytconfig && (t && clearTimeout(t), e.resolve(JSON.parse(n.data.ytconfig)))
            }), pageScope(function() {
                !window.yt && window.yt.config || postMessage({
                    ytconfig: JSON.stringify(window.yt.config_)
                }, window.location.href)
            })
        } catch (n) {
            log("Error reporting YT config", n)
        }
        return e.promise()
    },
    setupTooltips: function() {
        window.bodyTooltips = new Tooltips({
            parent: "body"
        })
    },
    watchForThumbnails: function() {
        var e = [".yt-lockup-video", ".video-list-item", ".vm-video-item-content", ".pl-video-thumb", ".lohp-thumb-wrap"];
        chrome.runtime.sendMessage({
            method: "getLocalStorage"
        }, function(t) {
            var n = t.vidiq_options ? JSON.parse(t.vidiq_options)[0] : {
                "rating-bar": !0
            };
            n["rating-bar"] && _.each(e, function(e) {
                Screeny.watch(e).enter(function(e) {
                    VideoPreview.mount(e, n)
                })
            })
        })
    },
    setupHotSearch: function() {
        var e = new HotSearch(api().base, dataStore.getItem("ytChannelID"));
        window.HS = e, window.HS.client = api().extensionType, window.HS.defaultLanguageCountryCallback = function() {
            return {
                language: ytApi().getLanguageCode(),
                country: ytApi().getCountryCode()
            }
        }
    },
    setupKeywordInspector: function() {
        KeywordInspector.setHotSearch(window.HS).mount().attachEventHandler().permitted(function() {
            return api().featurePermitted("kwins")
        })
    },
    setupUniversalEvents: function() {
        $(window, "body").off(".vidiqu"), $(window).on("click.vidiqu", "[data-img]", function(e) {
            e.preventDefault();
            var t = $(this).attr("data-img");
            if (t) {
                $(".vidiq-popup").remove();
                var n = $("#ytStats");
                n.length || (n = $(".yt-search-stats")), n.append('<div class="vidiq-popup"><img src="' + t + '"><span>Close</span></div>'), $(".vidiq-popup").hide().fadeIn()
            }
        }), $(window).on("click.vidiqu", function(e) {
            var t = $(e.target);
            t.is("[data-img]") || t.parents("[data-img]").length || $(".vidiq-popup").fadeOut(function() {
                $(".vidiq-popup").remove()
            })
        });
        var e = ".keyword:not(.react-keyword) .plus-button[data-event-value]";
        $(window).on("click.vidiqu", e, function(e) {
            e.preventDefault(), e.stopPropagation();
            var t = $(this);
            t.is(".added") || t.trigger("plus-button-click", t.data("event-value"))
        }), $(window).on("plus-button-click", ".plus-button", function() {
            $(this).html("&#10004;").addClass("added")
        })
    },
    setupAjaxHeaders: function() {
        $.ajaxSetup({
            beforeSend: function(e, t) {
                var n = /app\.vidiq\.com/,
                    i = dataStore.getItem("session_token");
                n.test(t.url) && i && e.setRequestHeader("Authorization", "Bearer " + i)
            }
        })
    },
    getSession: function() {
        var e = new $.Deferred;
        return api().getRetriedSession(function(t) {
            ExtensionDebug.showDebugInfo(), "authenticated" === t.state ? (EventTracking.identify(dataStore.getItem("email"), {
                isPremium: api().userTypeIs("enterprise"),
                userType: api().getUserType()
            }), api().loggedin = !0, MainActions.update({
                authed: !0
            }), u.trigger("vidiq:ready")) : (EventTracking.identify("loggedoutuser", {
                isPremium: !1,
                userType: "loggedout"
            }), api().loggedin = !1, MainActions.update({
                authed: !1
            }), this.trackUnauthed()), e.resolve(t)
        }.bind(this), e.reject), e.promise()
    },
    login: function(e, t) {
        var n = new $.Deferred;
        return api().login(e, t, function(e) {
            return e ? (u.track("User logged in"), dataStore.setItem("tracked_historic_login", !0), $.get("https://app.vidiq.com/v0/youtube/channels", {
                session_id: api().session_id
            }).done(function(e) {
                e.channels.length > 0 ? u.track("User logged in (existing vidIQ User)") : u.track("User logged in (chrome exclusive User)")
            }), chrome.runtime.sendMessage({
                method: "broadcast",
                message: {
                    type: "login",
                    status: e
                }
            }), void n.resolve()) : n.reject("Invalid login credentials")
        }), n.promise()
    },
    signup: function(e, t, n) {
        var i = new $.Deferred;
        return api().signup(e, t, n, function(t) {
            if (!t || t.error) {
                var n = t ? t.error : "An error occurred, please try again";
                return i.reject(n)
            }
            u.track("New sign up", {
                email: e
            }), u.trackFacebookConversion("track", "CompleteRegistration"), u.trackTwitterConversion("ntuzr"), i.resolve()
        }), i.promise()
    },
    start: function() {
        u.track("User loaded extension"), MainActions.update({
            loading: !0,
            error: !1
        }), this.getSession().always(function() {
            MainActions.update({
                loading: !1
            })
        }).fail(function() {
            MainActions.update({
                error: !0
            }), api().reportDisplayError("session retry failed")
        })
    },
    trackUnauthed: function() {
        u.track("User not logged in")
    }
}, u.handle("screeny:before-check", function() {
    var e = window.location.href;
    Extension.url ? e !== Extension.url && (Extension.url = e, MainStore.getData().error && Extension.start()) : Extension.url = e
}), chrome.runtime.onMessage.addListener(function(e) {
    "login" === e.type && e.status ? Extension.getSession() : "logout" === e.type && (api().logout(), MainActions.update({
        authed: !1
    }))
});
UploadController = {
    mountSettingsMenu: function(o, t) {
        var e = "edit" === t ? "#creator-page-sidebar" : ".upload-item-sidebar",
            n = "edit" === t ? $(e)[0] : UploadDOM.getElement(o, e);
        u.mountComponent({
            component: UploadSettingsMenu,
            element: n,
            props: {
                permitted: api().featurePermitted("uploadAndEdit"),
                id: o,
                mode: t
            }
        })
    },
    mountTitleSuggestions: function(o) {
        var t = UploadDOM.getElement(o, ".video-settings-title");
        u.mountComponent({
            component: TitleDescSuggestions,
            element: t,
            insertFn: "after",
            props: {
                addKeyword: function(t) {
                    UploadDOM.addKeywordToTitle(o, t)
                },
                mode: "title",
                id: o,
                permitted: api().featurePermitted("uploadAndEdit")
            }
        })
    },
    mountDescSuggestions: function(o) {
        var t = UploadDOM.getElement(o, ".video-settings-description");
        u.mountComponent({
            component: TitleDescSuggestions,
            element: t,
            insertFn: "after",
            props: {
                addKeyword: function(t) {
                    UploadDOM.addKeywordToDesc(o, t)
                },
                mode: "description",
                id: o,
                permitted: api().featurePermitted("uploadAndEdit")
            }
        })
    },
    mountKwinsButton: function(o) {
        var t = UploadDOM.getElement(o, "div.basic-info-form-input");
        u.mountComponent({
            component: UploadKwinsButton,
            element: t,
            props: {
                id: o
            }
        }), UploadDOM.setKwinsButtonData(o)
    },
    mountClearButton: function(o) {
        var t = UploadDOM.getElement(o, "div.basic-info-form-input");
        u.mountComponent({
            component: UploadClearKeywords,
            element: t,
            props: {
                id: o,
                clear: UploadDOM.clearKeywords
            }
        })
    },
    mountCopyButton: function(o) {
        var t = UploadDOM.getElement(o, "div.basic-info-form-input");
        u.mountComponent({
            component: UploadCopyKeywords,
            element: t,
            props: {
                id: o
            }
        })
    },
    mountCharacterCounter: function(o) {
        var t = UploadDOM.getElement(o, ".video-settings-title"),
            e = UploadDOM.getElement(o, ".video-settings-description"),
            n = UploadDOM.getElement(o, "div.basic-info-form-input:not(.upload-item-tag-suggestions)"),
            a = [
                [t, 'input[name="title"]', 100],
                [e, 'textarea[name="description"]', 5e3],
                [n, 'input[name="keywords"]', 500]
            ];
        _.each(a, function(t) {
            u.mountComponent({
                component: CharacterCounter,
                element: t[0],
                insertFn: "after",
                props: {
                    id: o,
                    watchSelector: t[1],
                    maxChars: t[2]
                }
            })
        })
    },
    mountUploadTooltip: function(o) {
        var t = UploadDOM.getElement(o, ".video-settings-description");
        u.mountComponent({
            component: UploadTooltip,
            element: t,
            insertFn: "after",
            rootClass: "description-hint-parent",
            props: {
                id: o
            }
        })
    },
    mountTranslate: function(o) {
        var t = UploadDOM.getElement(o, "div.basic-info-form-input"),
            e = UploadDOM.getElement(o, ".translation-editor-container");
        u.mountComponent({
            component: UploadTranslations,
            element: t,
            props: {
                id: o,
                addKeyword: UploadDOM.addKeyword,
                addAll: UploadDOM.addKeywords
            }
        }), UploadDOM.languageListener(o), u.mountComponent({
            component: TitleDescTranslation,
            element: e,
            props: {
                id: o
            }
        })
    },
    mountKeywordRank: function(o, t) {
        u.mountComponent({
            component: KeywordRank,
            element: o,
            insertFn: "before",
            inline: !0,
            rootClass: "keyword",
            props: {
                rank: t
            }
        })
    },
    mountKeywordScore: function(o, t) {
        u.mountComponent({
            component: KeywordScore,
            element: o,
            insertFn: "before",
            inline: !0,
            rootClass: "keyword",
            props: {
                compvol: t
            }
        })
    },
    mountThumbnailButton: function(o, t, e) {
        if ("edit" === e) {
            var n = UploadDOM.getElement(o, ".subnav .tabs");
            u.mountComponent({
                component: UploadThumbnailButton,
                element: n,
                inline: !0,
                props: {
                    videoId: t
                }
            })
        }
    },
    mountUploadOrEditView: function(o, t) {
        u.mountComponent({
            component: UploadCompanion,
            element: $(t.el),
            insertFn: "after",
            props: {
                mode: t.mode,
                addKeyword: UploadDOM.addKeyword,
                id: o
            }
        })
    },
    mountAnnotationCardTemplates: function(o, t, e) {
        u.mountComponent({
            component: AnnotationCardTemplates,
            selector: o,
            insertFn: "after",
            props: {
                videoId: t,
                mode: e
            }
        })
    },
    mount: _.debounce(function(o, t) {
        var e = u.prettyRandomId();
        if ($(o).addClass("vidiq-" + e), UploadDOM.setupTooltips(e), "annotate" === t || "card" === t) {
            var n = window.location.search.match(/v=([^&]+)/),
                a = n[1];
            return void this.mountAnnotationCardTemplates(o, a, t)
        }
        KeywordInspector.namespace(e, function(o) {
            return _.extend({}, o, {
                addable: !0
            })
        });
        var d = UploadCompanionStore.create(e);
        TranslationStore.create(e), d.addChangeListener(function() {
            var o = d.getData();
            o.settings.dragDrop ? UploadDOM.ensureDragAndDrop(e) : UploadDOM.disableDragAndDrop(e)
        }), KeywordDataStore.addChangeListener(function() {
            var o = KeywordDataStore.getData();
            _.isEmpty(o) || UploadDOM.insertKeywordScores(e, t, o)
        }), UploadDOM.listenForInput(e, t), UploadDOM.onChangeTab(e), d.getData().settings.dragDrop && UploadDOM.ensureDragAndDrop(e), UploadController.mountSettingsMenu(e, t), UploadController.mountKwinsButton(e), UploadController.mountTranslate(e), UploadController.mountClearButton(e), UploadController.mountCopyButton(e), UploadController.mountUploadTooltip(e), UploadController.mountTitleSuggestions(e), UploadController.mountDescSuggestions(e), UploadController.mountCharacterCounter(e), UploadDOM.getCurrentVideoId(e).done(function(n) {
            UploadCompanionActions.update(e, {
                videoId: n
            }), UploadCompanionActions.setInitOptimStatus(e), UploadController.mountThumbnailButton(e, n, t), UploadController.mountUploadOrEditView(e, {
                mode: t,
                el: o
            })
        })
    }, 500, !0),
    recordStats: function() {
        if (dataStore.getItem("uploadedVideos")) {
            var o = dataStore.getItem("uploadedVideos");
            dataStore.removeItem("uploadedVideos"), u.track("User has uploaded videos", {
                value: o
            })
        }
        if (dataStore.getItem("tagsAdded")) {
            var t = dataStore.getItem("tagsAdded");
            dataStore.removeItem("tagsAdded"), u.track("User used suggested tags when " + (dataStore.getItem("isEditing") ? "editing" : "creating") + " video", {
                value: t
            })
        }
    }
}, $(window).one("vidiq:ready", function() {
    function o() {
        Screeny.forPaths(["/edit", "/upload", "/my_videos_annotate", "/cards"], function(o) {
            if ("loggedout" !== api().getUserType())
                if ("/edit" === o) {
                    dataStore.setItem("isEditing", !0);
                    var t = ".metadata-editor-container";
                    UploadController.mount(t, "edit")
                } else if ("/upload" === o) {
                dataStore.setItem("isEditing", !1);
                var e = 0;
                Screeny.watch(".upload-item", "upload-companion").enter(function(o) {
                    e += 1, dataStore.setItem("uploadedVideos", e), UploadController.mount(o, "upload")
                })
            } else "/my_videos_annotate" === o ? UploadController.mount("#annotator-add-div", "annotate") : "/cards" === o && UploadController.mount(".annotator-learn-more-container", "card")
        }, function() {
            Screeny.clear(".upload-item")
        }), UploadController.recordStats()
    }
    api().getSession(o), api().getUser()
});
UploadDOM = {
    _data: {},
    getElement: function(t, e) {
        return t ? $(".vidiq-" + t).find(e) : $(e)
    },
    getData: function(t) {
        return this._data[t] || (this._data[t] = {}), this._data[t]
    },
    touchTagInputField: function(t, e) {
        var n = window.scrollY,
            i = this.getElement(t, ".video-settings-add-tag");
        i.trigger("focus"), i.trigger("blur"), e && setTimeout(function() {
            i.trigger("focus")
        }, 10), this.resetScrollPosition(n)
    },
    resetScrollPosition: function(t) {
        window.scrollTo(window.scrollX, t), setTimeout(function() {
            window.scrollTo(window.scrollX, t)
        }, 10)
    },
    getCurrentVideoId: function(t) {
        var e = new $.Deferred,
            n = window.location.search.match(/video_id=([^&]+)/);
        return n && n[1] ? (e.resolve(n[1]), e.promise()) : (Screeny.waitUntil(function() {
            return this.getElement(t, ".watch-page-link a")
        }.bind(this)).done(function(t) {
            e.resolve((t.attr("href") || "").split("/").reverse()[0])
        }), e.promise())
    },
    listenForInput: function(t, e) {
        var n = this.getElement(t, ".video-settings-title");
        n.on("input", _.debounce(function() {
            UploadCompanionActions.update(t, {
                title: this.getUserTitle(t)
            })
        }.bind(this), 500));
        var i = this.getElement(t, ".video-settings-description");
        i.on("input", _.debounce(function() {
            UploadCompanionActions.update(t, {
                desc: this.getUserDesc(t)
            })
        }.bind(this), 500));
        var a = this.getElement(t, ".video-settings-add-tag");
        a.on("blur", function() {
            this.setHiddenInputVal(t)
        }.bind(this));
        var o = [];
        this.getData(t).interval && clearInterval(this.getData(t).interval), this.getData(t).interval = setInterval(function() {
            var e = this.getUserKeywords(t);
            this.getData(t).dragging || _.isEqual(e, o) || (UploadDOM.setProperKeywordsValue(t, e), this.enforceKwins(t, _.difference(e, o)), UploadCompanionActions.update(t, {
                keywords: e
            })), o = e
        }.bind(this), 500), "/edit" === window.location.pathname && ($(".save-changes-button").click(function() {
            this.getData(t).pendingSave = !1
        }.bind(this)), $(window).on("beforeunload", function() {
            var e = "Some of the changes you have made to video settings have not been saved and will be lost if you navigate away from this page.";
            return this.getData(t).pendingSave ? e : void 0
        }.bind(this)))
    },
    addKeyword: function(t, e) {
        if (!(UploadDOM.getUserKeywords(e).indexOf(t) >= 0)) {
            u.track("User added a vidIQ suggested tag");
            var n = dataStore.getItem("tagsAdded") ? dataStore.getItem("tagsAdded") : 0;
            dataStore.setItem("tagsAdded", n + 1);
            var i = UploadDOM.getElement(e, ".video-settings-add-tag");
            i.val(t), UploadDOM.touchTagInputField(e);
            var a = ytApi().currentVideoID();
            api().audit("hot_search_tag.added", {
                video_id: a,
                tag: t
            })
        }
    },
    addKeywords: function(t, e) {
        var n = new $.Deferred,
            i = 300;
        return _.each(e, function(a) {
            setTimeout(function() {
                UploadDOM.addKeyword(a.trim(), t), e.indexOf(a) === e.length - 1 && n.resolve()
            }, i), i += 300
        }), n.promise()
    },
    addKeywordToTitle: function(t, e) {
        var n = UploadDOM.getElement(t, ".video-settings-title");
        n.val(n.val() + " " + e), n.trigger("input"), this.getData(t).pendingSave = !0
    },
    addKeywordToDesc: function(t, e) {
        var n = UploadDOM.getElement(t, ".video-settings-description");
        n.val(n.val() + " " + e), n.trigger("input"), this.getData(t).pendingSave = !0
    },
    clearKeywords: function(t) {
        var e = UploadDOM.getElement(t, ".video-settings-tag-chips-container .yt-chip .yt-delete-chip");
        e.length && (_.each(e, function(t) {
            t.click()
        }), UploadDOM.touchTagInputField(t))
    },
    getUserKeywords: function(t) {
        var e = this.getElement(t, ".video-settings-tag-chips-container .yt-chip");
        return _.map(e, function(t) {
            var e = $(t).attr("title");
            return e ? e.trim() : ""
        })
    },
    getUserTitle: function(t) {
        var e = this.getElement(t, ".video-settings-title");
        return e.val().trim()
    },
    getUserDesc: function(t) {
        var e = this.getElement(t, ".video-settings-description");
        return e.val().trim()
    },
    enforceKwins: function(t, e) {
        var n = this.getElement(t, ".video-settings-tag-chips-container");
        _.each(e, function(e) {
            var i = n.find('.yt-chip[title="' + e.replace(/(')/g, "\\$1") + '"]');
            i.is("vidiq-kwins-attached") || (i.attr({
                "data-keyword-inspector": e,
                "data-keyword-addable": !0,
                "data-keyword-namespace": t
            }), i.addClass("vidiq-kwins-attached"))
        })
    },
    setKwinsButtonData: function(t) {
        var e = this.getElement(t, ".open-kwins");
        e.data({
            "keyword-namespace": t,
            "keyword-addable": !0
        })
    },
    onChangeTab: function(t) {
        var e = this.getElement(t, ".tabs li[data-tab-id]");
        $("body").on("click", e, function(e) {
            var n = this.getElement(t, "[data-tab-id=basic-info]");
            if (n.length) {
                var i;
                i = t ? $(".vidiq-" + t).next().children(".vidiq-upload") : $(".vidiq-upload"), n.is(".selected") ? i.show() : i.hide()
            }
        }.bind(this))
    },
    setupTooltips: function(t) {
        var e = new Tooltips({
            parent: $("body"),
            position: "follow"
        });
        $("body").data("tooltips", e);
        var n = this.getElement(t, ".video-settings-description");
        n.on("focus", function() {
            $(window).trigger("desc:edit", !0)
        }).on("blur", function() {
            $(window).trigger("desc:edit", !1)
        })
    },
    setProperKeywordsValue: function(t, e) {
        e || (e = this.getUserKeywords(t)), UploadDOM.getData(t).properKeywords = _.map(e, function(t) {
            return t.indexOf(" ") >= 0 ? '"' + t + '"' : t
        }).join(" "), this.setHiddenInputVal(t)
    },
    setHiddenInputVal: function(t) {
        setTimeout(function() {
            var e = UploadDOM.getElement(t, ".video-settings-tags");
            if (e.val() !== this.getData(t).properKeywords) {
                e.val(this.getData(t).properKeywords), this.getData(t).pendingSave = !0;
                var n = $(".save-changes-button");
                n.attr("disabled", !1)
            }
        }.bind(this), 50)
    },
    ensureDragAndDrop: function(t) {
        var e = this.getElement(t, ".video-settings-tag-chips-container");
        $(".yt-chip").css("cursor", "move"), e.sortable("instance") ? e.sortable("refresh") : e.sortable({
            items: ".yt-chip",
            revert: !0,
            tolerance: "pointer",
            containment: "parent",
            cursor: "move",
            start: function() {
                UploadDOM.getData(t).dragging = !0
            },
            stop: function() {
                UploadDOM.setProperKeywordsValue(t);
                var e = UploadDOM.getElement(t, ".video-settings-add-tag");
                e.trigger("focus"), UploadDOM.getData(t).dragging = !1
            }
        })
    },
    disableDragAndDrop: function(t) {
        var e = this.getElement(t, ".video-settings-tag-chips-container");
        e.sortable("instance") && e.sortable("destroy"), $(".yt-chip").css("cursor", "pointer")
    },
    insertKeywordScores: function(t, e, n) {
        var i = this.getUserKeywords(t);
        _.map(i, function(i) {
            var a = i.replace(/(')/g, "\\$1"),
                o = this.getElement(t, '.yt-chip[title="' + a + '"]'),
                r = o.find(".score"),
                s = o.find(".yt-delete-chip"),
                d = n[i];
            if (d && (o.is(".has-score") ? o.is(".has-score") && d.overall && r.attr("data-value") !== d.overall.toString() && (o.find(".keyword-text").parent().remove(), UploadController.mountKeywordScore(s, d)) : (o.addClass("has-score"), UploadController.mountKeywordScore(s, d))), "edit" === e && !o.is(".with-search-rank")) {
                var l, g = UploadCompanionStore.id(t).getData().videoId,
                    c = i.trim().replace(/\(.+\)$/, ""),
                    u = "https://www.youtube.com/results?search_query=" + encodeURI(c);
                $.get(u, function(t) {
                    _.map(_.uniq(t.match(/watch\?v=[^"&<]+/g)), function(t, e) {
                        t.slice(8) === g && (l = e + 1)
                    })
                }).always(function() {
                    l && UploadController.mountKeywordRank(s, l), o.addClass("with-search-rank")
                })
            }
        }, this)
    },
    getOriginalLang: function(t) {
        var e = this.getElement(t, ".translation-editor-original-language .yt-uix-button-content");
        return Translations.getLanguageCode(e.text())
    },
    getTranslationLang: function(t) {
        var e = this.getElement(t, ".translation-editor-translation-menu-button .yt-uix-button-content");
        return Translations.getLanguageCode(e.text())
    },
    languageListener: function(t) {
        var e = UploadCompanionStore.id(t).getData();
        this.langInterval && clearInterval(this.langInterval), this.langInterval = setInterval(function() {
            var n = {},
                i = this.getTranslationLang(t),
                a = this.getOriginalLang(t);
            i !== e.transLang && (n.transLang = i), a !== e.origLang && (n.origLang = a), _.isEmpty(n) || UploadCompanionActions.update(t, n)
        }.bind(this), 500)
    },
    setTranslations: function(t, e) {
        var n = this.getElement(t, ".translation-editor-translated-title"),
            i = this.getElement(t, ".translation-editor-translated-description");
        n.val(e.title), i.val(e.description), this.saveTranslations(t)
    },
    saveTranslations: function(t) {
        pageScope(function(t) {
            var e = document.querySelector(".vidiq-" + t.id + " .translation-editor-translated-title"),
                n = document.querySelector(".vidiq-" + t.id + " .translation-editor-translated-description");
            angular.element(e).triggerHandler("change"), angular.element(n).triggerHandler("change")
        }, {
            id: t
        })
    }
};
var Channel = {
    getKeywords: function(e) {
        var n = new $.Deferred;
        return $.get(e).done(function(e) {
            var t = e.match(/"og:video:tag" content="([^"]+)"/g);
            n.resolve(_.map(t, function(e) {
                return u.convertEntities(e.split('"')[3])
            }))
        }).fail(n.reject), n.promise()
    }
};
$(window).one("vidiq:ready", function() {
    Screeny.watch(".qualified-channel-title-text a:first").enter(function(e) {
        var n = ($(e).attr("href") || "").split("/")[2],
            t = $(e).text().trim(),
            o = new RegExp("^/((user|channel)|" + n.toLowerCase() + "$)");
        if (log(window.location.pathname.toLowerCase(), o), window.location.pathname.toLowerCase().match(o)) {
            if (!n) return void log("Cannot find channel id");
            u.mountComponent({
                component: YouTubeButton,
                props: {
                    text: "CSV Export",
                    onClick: function() {
                        Modal.create({
                            title: "CSV Export (" + t + ")",
                            innerComponent: MassExport,
                            innerProps: {
                                channel: {
                                    id: n,
                                    name: t
                                }
                            }
                        })
                    }
                },
                inline: !0,
                selector: ".primary-header-actions",
                rootClass: "public-csv-export"
            }), Channel.getKeywords(window.location.href).done(function(e) {
                0 !== e.length && u.mountComponent({
                    component: KeywordList,
                    props: {
                        keywords: e,
                        channel: !0
                    },
                    selector: ".primary-header-contents",
                    insertFn: "after",
                    rootClass: "vidiq-react channel-keyword-list"
                })
            })
        }
    })
});
$(window).one("vidiq:ready", function() {
    Screeny.forPath("/comments", function() {
        "loggedout" !== api().getUserType() && (CommentsDOM.listenForShowMore(), CommentsActions.update({
            pending: !0
        }), u.mountComponent({
            component: CommentsFilter,
            selector: ".options-bar"
        }), Screeny.watch(".comment-entry:not([vidiq-comment-id])").enter(function(e) {
            CommentsActions.registerThread(), GrandCentral.push(_.partial(CommentsDOM.addThread, e).bind(CommentsDOM), "comments-filter")
        }), CommentTemplatesActions.fetch(), Screeny.watch(".comment-footer-actions").enter(function(e) {
            var t = $(e).parents(".comment-item").get(0),
                n = $(t).find(".user-name")[0],
                o = $(n).text(),
                m = $(e).find(".yt-commentbox-show-reply")[0],
                c = $(t).attr("data-cid");
            $(window).on("comment-templates:insert-reply:<" + c + ">", function(e, t) {
                $(m).click(), $(".yt-commentbox-text").text(t), $(".yt-commentbox-button").attr("disabled", !1)
            }), u.mountComponent({
                component: CommentTemplatesDropdown,
                element: e,
                inline: !0,
                props: {
                    channelName: o,
                    id: c
                }
            })
        }))
    }, function() {
        Screeny.clear(".comment-entry"), Screeny.clear(".comment-footer-actions")
    })
});
var SearchController = {
    mountSearchCompanion: function() {
        u.mountComponent({
            component: SearchCompanion,
            selector: ".branded-page-v2-secondary-col",
            insertFn: "prepend"
        })
    },
    mountInlineKeywords: function(t) {
        u.mountComponent({
            component: SearchInlineKeywords,
            element: $(t.el).find(".yt-lockup-content")[0],
            props: {
                videoId: t.id
            }
        })
    },
    mountSocialStats: function(t) {
        u.mountComponent({
            component: SearchInlineSocialStats,
            element: $(t.el).find(".yt-lockup-thumbnail")[0],
            props: {
                videoId: t.id
            }
        })
    },
    mountSocialStatsUpsell: function(t) {
        u.mountComponent({
            component: SearchInlineUpsell,
            element: $(t).parent()[0]
        })
    },
    getVideoObject: function(t) {
        if (!(_.isNumber(this._limit) && this._limit <= 0)) {
            var o = $(t).addClass("vidiq-hijacked-lockup-video"),
                e = o.data("context-item-id"),
                n = o.find(".yt-uix-tile-link").attr("href");
            if (n && !n.match(/doubleclick\.net/)) {
                var i = {
                        el: t,
                        id: e
                    },
                    l = new Tooltips({
                        parent: o,
                        position: "follow",
                        namespace: "vidiqsstt"
                    });
                return o.data("tooltips", l), _.isNumber(this._limit) && (this._limit = this._limit - 1), i
            }
        }
    },
    mount: _.debounce(function(t) {
        if ("loggedout" !== api().getUserType()) {
            if (this._limit = api().getFeatureLimit("search"), this._mountedUpsell = !1, SearchController.mountSearchCompanion(), Screeny.watch(".yt-lockup-video").enter(function(o) {
                    if ("/results" === window.location.pathname) {
                        _.isNumber(this._limit) && 0 === this._limit && !this._mountedUpsell && (this._mountedUpsell = !0, SearchController.mountSocialStatsUpsell(o));
                        var e = this.getVideoObject(o);
                        e && (SearchController.mountInlineKeywords(e), SearchController.mountSocialStats(e), t["rating-bar"] && VideoPreview.mount(e.el, t, e.id))
                    }
                }.bind(this)), !SearchController.addedToolTips) {
                SearchController.addedToolTips = !0;
                var o = new Tooltips({
                    parent: $("body"),
                    position: "follow"
                });
                $("body").data("tooltips", o)
            }
            SearchController.startPolling()
        }
    }, 500, !0),
    startPolling: function() {
        this.stopPolling(), this.poll = setInterval(function() {
            "/results" === window.location.pathname && 0 === $(".yt-search-stats-container").length && SearchController.mount()
        }, 1e3)
    },
    stopPolling: function() {
        this.poll && clearInterval(this.poll)
    }
};
$(window).one("vidiq:ready", function() {
    Screeny.forPath("/results", function() {
        chrome.runtime.sendMessage({
            method: "getLocalStorage"
        }, function(t) {
            var o = t.vidiq_options ? JSON.parse(t.vidiq_options)[0] : {
                "rating-bar": !0
            };
            SearchController.mount(o)
        })
    }, function() {
        Screeny.clear(".yt-lockup-video"), SearchController.stopPolling()
    })
});

function callExtApi(e, t, i) {
    extApi()[e](t, function(e) {
        i(e ? parseInt(e, 10) : 0)
    })
}

function processGrowthResponse(e, t) {
    if (!t.month_growth || !t.two_months_growth) return null;
    var i = t.month_growth[e],
        n = (t.two_months_growth || {})[e],
        r = n ? n - i : null,
        s = -1 + i / r;
    return isFinite(s) || (s = 0), {
        value: i,
        change: s,
        _comparison: r
    }
}

function processHistorical(e) {
    var t = null,
        i = _.map(e.values, function(t) {
            return _.object(_.map(t, function(t, i) {
                return [e.keys[i], t]
            }))
        });
    return _.compact(i.map(function(e, n) {
        if (null === e.views) return null;
        if (i[n + 1] && i[n + 1].views < e.views) return null;
        if (e.views < t) return null;
        t = e.views;
        var r = ["_id", "chan_id", "recorded_at"];
        return _.extend(_.object(_.map(e, function(e, t) {
            if (r.indexOf(t) < 0 && null !== e) {
                var i = parseFloat(e, 10);
                e = isFinite(i) ? i : null
            }
            return [t, e]
        })), {
            created_at: new Date(1e3 * e.recorded_at).toString()
        })
    }))
}

function chartMapHistorical(e, t) {
    var i = 0,
        n = _.compact(_.map(e, function(e) {
            return e[t] ? (i += e[t], {
                x: new Date(e.created_at).getTime(),
                y: e[t]
            }) : null
        }));
    return i > 0 ? n : []
}

function findLastRecordOf(e, t) {
    if (0 === t.length) return 0;
    var i = t.slice(-1)[0];
    return void 0 !== i[e] && null !== i[e] ? i[e] : findLastRecordOf(e, t.slice(0, -2))
}

function warnMalformedHtml(e, t, i) {
    _malformed[t] || (_malformed[t] = !0, Rollbar.report("warning", "Malformed HTML", {
        html: e,
        canary: i
    }), warn("Malformed HTML detected"))
}

function createVideoStatsManager(e) {
    var t = new TaskManager(e);
    return t.registerMany(_.values(VideoStatsTasks)), t
}
var videoStatsQuickFetch, _malformed = {},
    DATE_FORMAT = "YYYY-MM-DD",
    VideoStatsTasks = {
        html: {
            returns: ["html", "$h"],
            requires: ["video_id"],
            timeout: !1,
            fn: function(e, t) {
                var i, n = "https://www.youtube.com/watch?v=" + this.video_id,
                    r = function(r) {
                        $.get(n).done(function(n) {
                            var s = $(n);
                            return s.find("#player-unavailable:not(.hid)").length > 0 ? t() : 0 === s.find("#content").length ? i(r) : void e({
                                html: n,
                                $h: s
                            })
                        }).fail(function() {
                            i(r)
                        })
                    };
                i = function(e) {
                    return e && e >= 5 ? (Rollbar.report("warning", "Retry limit hit for HTML request"), t()) : void setTimeout(function() {
                        r((e || 0) + 1)
                    }, 1e3)
                }, r()
            }
        },
        sessionToken: {
            returns: ["session_token"],
            requires: ["html"],
            fn: function(e, t) {
                var i = new RegExp('XSRF_TOKEN[\'"]: ?"([^"]+)'),
                    n = this.html.match(i);
                n && n[1] ? e(n[1]) : t()
            }
        },
        thumb: {
            returns: ["thumb"],
            requires: ["video_id"],
            fn: function() {
                return "https://i.ytimg.com/vi/" + this.video_id + "/default.jpg"
            }
        },
        duration: {
            returns: ["duration", "duration_sec"],
            requires: ["$h"],
            fn: function() {
                var e, t = this.$h.find('meta[itemprop="duration"]').attr("content");
                if (t) {
                    var i = t.replace(/(PT|S)/g, "").replace(/M|H/, ",").split(","),
                        n = ytApi().str2int(i[0], "duration minutes"),
                        r = ytApi().str2int(i[1], "duration seconds");
                    e = 60 * n + r
                }
                return e ? {
                    duration: u.sec2time(e),
                    duration_sec: e
                } : void 0
            }
        },
        description: {
            returns: ["desc"],
            requires: ["$h", "html", "video_id"],
            fn: function() {
                var e = this.$h.find("#eow-description");
                0 === e.length && warnMalformedHtml(this.html, this.video_id, "desc");
                var t = (e.html() || "").trim();
                return t = t.replace(/href=/g, "___HREF___").replace(/( ?[^ ]+)="[^"]+"/g, "").replace(/___HREF___/g, "href=")
            }
        },
        descLinkCount: {
            returns: ["desc_link_count"],
            requires: ["desc"],
            fn: function() {
                return (this.desc.match(/<a/g) || []).length
            }
        },
        descWordCount: {
            returns: ["desc_word_count"],
            requires: ["desc"],
            fn: function() {
                var e = this.desc.replace(/<[^>]+>/g, " ").replace(/ +/g, " ").split(" ");
                return e = _.without(e, ""), e.length
            }
        },
        wordsPerMinute: {
            returns: ["words_per_minute"],
            requires: ["duration_sec"],
            fn: function(e, t) {
                var i = pageExec("ytplayer.config.args.caption_tracks");
                if (!i || "undefined" === i) return t();
                var n = unescape(unescape(i)).replace(/^.*(http)/, "$1").replace(/&v=\.[^&]+/, "");
                $.get(n).done(function(t) {
                    var i = [];
                    $(t).find("text").each(function() {
                        var e = $(this).text().split("\n"),
                            t = e.length > 1 ? e[1] : e[0];
                        t && (i = _.compact(i.concat(t.split(" "))))
                    });
                    var n = i.length / (this.duration_sec / 60);
                    e(n)
                }.bind(this)).fail(t)
            }
        },
        license: {
            returns: ["license"],
            requires: ["$h"],
            fn: function() {
                var e = this.$h.find(".watch-extras-section").children().eq(1).find("li").first();
                return "/t/creative_commons" === e.children("a").attr("href") ? "creative_commons" : "youtube_standard"
            }
        },
        vidiqScore: {
            strict: !1,
            returns: ["vidiq_score"],
            requires: ["video_id", "views", "channel_subscribers", "yt_likes", "yt_dislikes", "yt_comments", "desc_link_count", "desc_word_count", "words_per_minute", "keywords", "creator_suggested", "engagement_rate", "vph", "annotations", "channel_id", "mcn", "title", "desc", "fb_likes", "fb_shares", "fb_comments", "tweets", "google_plus", "linkedin", "stumbleupon", "reddit_likes", "reddit_comments", "reddit_posts", "date_published", "seo_score", "duration_sec", "license"],
            fn: function() {
                var e = null;
                this.date_published && (e = moment(this.date_published).format("YYYY-MM-DD"));
                var t = {
                    reddit: {
                        count: this.reddit_likes,
                        comments: this.reddit_comments,
                        posts: this.reddit_posts
                    },
                    stumbleupon: {
                        count: this.stumbleupon
                    },
                    linkedin: {
                        count: this.linkedin
                    },
                    google: {
                        google_plus_ones: this.google_plus
                    },
                    twitter: {
                        tweets: this.tweets
                    },
                    facebook: {
                        likes: this.fb_likes,
                        shares: this.fb_shares,
                        comments: this.fb_comments
                    },
                    youtube: {
                        id: this.video_id,
                        views: this.views,
                        channel_subscribers: this.channel_subscribers,
                        likes: this.yt_likes,
                        dislikes: this.yt_dislikes,
                        comments: this.yt_comments,
                        description_link_count: this.desc_link_count,
                        description_word_count: this.desc_word_count,
                        words_per_minute: this.words_per_minute,
                        tags: this.keywords,
                        creator_suggested: this.creator_suggested.value,
                        true_engagement: this.engagement_rate,
                        velocity: this.vpm,
                        annotations: this.annotations,
                        channel_id: this.channel_id,
                        mcn: this.mcn,
                        title: this.title,
                        description: this.desc,
                        license: this.license,
                        duration: this.duration_sec,
                        seo_score: this.seo_score,
                        date_published_at: e
                    }
                };
                return $.post("//app.vidiq.com/v0/vidiq_score/get", t), api().clientIqScore(t)
            }
        },
        tweetList: {
            returns: ["tweet_list", "tweets"],
            requires: ["video_id"],
            fn: function(e, t) {
                var i = "https://www.youtube.com/watch?v=" + this.video_id;
                $.get("https://twitter.com/search?q=" + i).done(function(t) {
                    var i = $(t).find("#timeline"),
                        n = [];
                    i.find(".tweet").each(function() {
                        var e = $(this);
                        n.push({
                            avatar: e.find(".avatar").attr("src"),
                            name: e.data("name"),
                            username: e.data("screen-name"),
                            time: e.find("._timestamp").text(),
                            href: "https://twitter.com" + e.data("permalink-path"),
                            text: e.find(".tweet-text").text()
                        })
                    }), e({
                        tweet_list: n,
                        tweets: n.length
                    })
                }).fail(t)
            }
        },
        seoScore: {
            strict: !1,
            returns: ["seo_score", "seo_score_data"],
            requires: ["title", "desc", "keyword_data"],
            fn: function(e, t) {
                var i = "https://app.vidiq.com/v2/youtube_seo_score?",
                    n = {
                        title: this.title,
                        description: this.desc,
                        tags: this.keyword_data,
                        client: api().extensionType.split("/")[1]
                    };
                $.jsonPost(i, n).done(function(t) {
                    e({
                        seo_score_data: t,
                        seo_score: t.overall
                    })
                }).fail(t)
            }
        },
        vph: {
            returns: ["vph", "average_vph", "vph_method"],
            requires: ["date_published", "views", "public_stats"],
            fn: function() {
                var e, t, i = (Date.now() - this.date_published) / 60 / 60 / 1e3,
                    n = this.views / i;
                if (this.public_stats) {
                    var r = this.views - this.public_stats.views,
                        s = new Date - this.public_stats.date,
                        a = r / (s / 1e3 / 60 / 60);
                    isFinite(a) && (e = a, t = "public")
                }
                return void 0 === typeof e && 168 > i && (e = n, t = "average"), {
                    vph_method: t,
                    average_vph: n,
                    vph: e
                }
            }
        },
        embeddedLocations: {
            returns: ["embedded_locations"],
            requires: ["video_id"],
            fn: function(e, t) {
                var i = {
                    video_id: this.video_id,
                    embedded: !0
                };
                extApi().googleResults(i, function(i) {
                    if (!i.resultCount) return t();
                    var n = parseInt(i.resultCount, 10);
                    e(n)
                })
            }
        },
        localChannelSubscribers: {
            returns: ["local_channel_subscribers"],
            requires: ["$h"],
            fn: function() {
                var e = ".yt-subscription-button-subscriber-count-branded-horizontal[title]",
                    t = this.$h.find(e).attr("title"),
                    i = parseInt((t || "").replace(/[^0-9]+/g, ""), 10);
                return isFinite(i) ? i : null
            }
        },
        channelSubscribers: {
            strict: !1,
            returns: ["channel_subscribers"],
            requires: ["local_channel_subscribers", "channel_growth_stats"],
            fn: function() {
                var e = this.local_channel_subscribers,
                    t = this.channel_growth_stats;
                return e || t.current.subscribers || null
            }
        },
        channelViews: {
            returns: ["channel_views"],
            requires: ["channel_username_url"],
            fn: function(e, t) {
                $.get(this.channel_username_url + "/about").done(function(t) {
                    var i = $(t).find('.about-stat:contains("views")');
                    e(parseInt(i.text().replace(/[^0-9]+/g, ""), 10))
                }).fail(t)
            }
        },
        channelGrowthStats: {
            returns: ["channel_growth_stats"],
            requires: ["channel_id"],
            fn: function(e, t) {
                api().getChannelGrowthStats(this.channel_id).done(e).fail(t)
            }
        },
        recentChannelViews: {
            returns: ["recent_channel_views"],
            requires: ["channel_growth_stats"],
            fn: function() {
                return processGrowthResponse("upload_views", this.channel_growth_stats)
            }
        },
        recentChannelSubs: {
            returns: ["recent_channel_subs"],
            requires: ["channel_growth_stats"],
            fn: function() {
                return processGrowthResponse("subscribers", this.channel_growth_stats)
            }
        },
        avgDailyViews: {
            returns: ["avg_daily_views"],
            requires: ["recent_channel_views"],
            fn: function() {
                return this.recent_channel_views.value / 30
            }
        },
        avgDailySubs: {
            returns: ["avg_daily_subs"],
            requires: ["recent_channel_subs"],
            fn: function() {
                return this.recent_channel_subs.value / 30
            }
        },
        estimatedMonthlyRevenue: {
            returns: ["estimated_monthly_revenue"],
            requires: ["recent_channel_views"],
            fn: function() {
                return calculateEstimatedEarnings(this.recent_channel_views.value)
            }
        },
        annotations: {
            returns: ["annotations"],
            requires: ["video_id"],
            fn: function(e) {
                Annotations.get(this.video_id).done(function(t) {
                    e(t.length)
                }).fail(_.partial(e, 0))
            }
        },
        cards: {
            returns: ["cards"],
            requires: ["video_id"],
            fn: function(e) {
                Cards.get(this.video_id).done(function(t) {
                    e(t.length)
                }).fail(_.partial(e, 0))
            }
        },
        mcn: {
            returns: ["mcn"],
            requires: ["html"],
            fn: function() {
                var e = this.html.match(/meta name=.?attribution.?.content=['"]?(.+?)['" ]*\/>/);
                return e ? ytApi().verifyMcn(e[1]) : "None"
            }
        },
        title: {
            returns: ["title"],
            requires: ["$h", "html", "video_id"],
            fn: function() {
                var e = this.$h.find("#eow-title");
                0 === e.length && warnMalformedHtml(this.html, this.video_id, "title");
                var t = e.text();
                return t ? t.trim() : null
            }
        },
        datePublished: {
            returns: ["date_published"],
            requires: ["$h"],
            fn: function() {
                var e = this.$h.find('[itemprop="datePublished"]').attr("content");
                return new Date(e)
            }
        },
        keywords: {
            returns: ["keywords"],
            requires: ["html"],
            fn: function() {
                var e = (this.html.match(/"keywords":"([^"]+)/) || [])[1];
                return _.isEmpty(e) ? [] : e.split(",")
            }
        },
        keywordData: {
            strict: !1,
            returns: ["keyword_data"],
            requires: ["keywords", "keyword_ranks"],
            timeout: !1,
            fn: function(e) {
                if (_.isEmpty(this.keywords)) return [];
                var t = this.keyword_ranks || {},
                    i = _.map(this.keywords, function(e) {
                        return {
                            text: e,
                            search_rank: t[e]
                        }
                    }, this);
                if (!api().featurePermitted("fullHotSearch")) return i;
                var n = / +\([^)]+\)$/,
                    r = _.map(this.keywords, function(e) {
                        return e.replace(n, "")
                    });
                setTimeout(function() {
                    e(i)
                }, 5e3), $.get(api().base + "hottersearch", {
                    skip_recs: !0,
                    q: r
                }).done(function(r) {
                    var s = r.search_stats.compvol;
                    return s ? void e(_.map(this.keywords, function(e) {
                        var i = e.toLowerCase().replace(n, ""),
                            r = s[i] || {};
                        return {
                            text: e,
                            search_rank: t[e] || null,
                            competition: r.competition || 0,
                            volume: r.volume || 0,
                            overall: r.overall || 0
                        }
                    })) : e(i)
                }.bind(this)).fail(_.partial(e, i))
            }
        },
        keywordRanks: {
            returns: ["keyword_ranks"],
            requires: ["keywords", "video_id"],
            fn: function(e) {
                if (_.isEmpty(this.keywords)) return {};
                var t = 0,
                    i = {};
                _.map(this.keywords, function(n, r) {
                    var s = n.trim().replace(/ \(.+\)$/, ""),
                        a = "https://www.youtube.com/results?search_query=" + encodeURI(s);
                    setTimeout(function() {
                        $.get(a, function(e) {
                            _.map(_.uniq(e.match(/watch\?v=[^"&<]+/g)), function(e, t) {
                                _.isNumber(i[n]) || e.slice(8) === this.video_id && (i[n] = t + 1)
                            }, this)
                        }.bind(this)).always(function() {
                            t += 1, t === this.keywords.length && e(i)
                        }.bind(this))
                    }.bind(this), 50 * r)
                }, this)
            }
        },
        keywordRecsAllowed: {
            returns: ["keyword_recs_allowed"],
            requires: ["video_id"],
            fn: function(e, t) {
                var i = api().getPlans(),
                    n = api().getUserType(),
                    r = i.indexOf(n) >= i.indexOf("boost_lite");
                return r ? n.indexOf("boost") < 0 ? !0 : void api().getVideoOptimStatus(this.video_id).done(function(t) {
                    e(t[this.video_id])
                }.bind(this)).fail(t) : !1
            }
        },
        keywordRecs: {
            returns: ["keyword_recs"],
            requires: ["owned", "keywords", "keyword_recs_allowed"],
            timeout: !1,
            fn: function(e, t) {
                this.owned && this.keyword_recs_allowed && HS.get({
                    query: this.keywords
                }).done(function(t) {
                    e(t)
                }).fail(t)
            }
        },
        views: {
            returns: ["views"],
            requires: ["$h", "html", "video_id"],
            fn: function() {
                var e = this.$h.find(".watch-view-count");
                0 === e.length && warnMalformedHtml(this.html, this.video_id, "views");
                var t = parseInt(e.text().replace(/[^0-9]/g, ""), 10);
                return isFinite(t) || (t = 0), t
            }
        },
        votes: {
            returns: ["yt_likes", "yt_dislikes"],
            requires: ["$h"],
            fn: function() {
                var e = ytApi().getLocalLikesDislikes(this.$h);
                return {
                    yt_likes: e.likes,
                    yt_dislikes: e.dislikes
                }
            }
        },
        ytShares: {
            returns: ["yt_shares"],
            requires: ["public_stats"],
            fn: function() {
                return this.public_stats.shares
            }
        },
        commentsToken: {
            returns: ["comments_token"],
            requires: ["html"],
            fn: function() {
                var e = this.html.match(/COMMENTS_TOKEN[^"]+"([^"]+)/),
                    t = e ? e[1] : null;
                return t ? t : void 0
            }
        },
        ytComments: {
            returns: ["yt_comments"],
            requires: ["session_token", "comments_token", "video_id"],
            fn: function(e, t) {
                var i = "https://www.youtube.com/watch?v=" + this.video_id,
                    n = "/watch_fragments_ajax?v=" + this.video_id + "&tr=scroll&distiller=1&ctoken=" + this.comments_token + "&frags=comments&spf=load";
                $.ajax({
                    method: "POST",
                    url: n,
                    data: {
                        client_url: i,
                        session_token: this.session_token
                    },
                    headers: {
                        "X-YouTube-Identity-Token": this.session_token
                    }
                }).done(function(i) {
                    if (!i || !i.body) return t();
                    var n = i.body["watch-discussion"],
                        r = $("<div>" + n + "</div>"),
                        s = r.find(".comment-section-header-renderer").text();
                    if (!s) return t();
                    var a = parseInt(s.replace(/[^0-9]/g, ""), 10);
                    return isFinite(a) ? void e(a) : t()
                })
            }
        },
        estimatedEarnings: {
            returns: ["estimated_earnings"],
            requires: ["views"],
            fn: function() {
                return calculateEstimatedEarnings(this.views)
            }
        },
        creatorSuggested: {
            returns: ["creator_suggested"],
            requires: ["$h", "channel_id"],
            fn: function() {
                var e = this.channel_id,
                    t = this.$h.find('#watch-related span.stat.attribution > span[data-ytid="' + e + '"]').length || 0;
                return {
                    value: t,
                    outOf: this.$h.find("#watch-related li.video-list-item").length
                }
            }
        },
        engagements: {
            strict: !1,
            returns: ["engagements"],
            requires: SOCIAL_STATS,
            fn: function() {
                var e = _.reduce(SOCIAL_STATS, function(e, t) {
                    var i = this[t] || 0;
                    return _.isNumber(i) || (i = parseInt(i, 10)), isFinite(i) || (i = 0), e + i
                }, 0, this);
                return e
            }
        },
        engagementRate: {
            returns: ["engagement_rate"],
            requires: ["engagements", "views"],
            fn: function() {
                var e = this.views || 0,
                    t = this.engagements / e;
                return isFinite(t) || (t = 0), t
            }
        },
        engagementDistribution: {
            strict: !1,
            returns: ["engagement_dist"],
            requires: ["engagements"].concat(SOCIAL_STATS),
            fn: function() {
                return _.chain(SOCIAL_STATS).reduce(function(e, t) {
                    var i = t.split("_")[0];
                    e[i] || (e[i] = 0);
                    var n = this[t];
                    return n && isFinite(n) || (n = 0), e[i] += n, e
                }, {}, this).map(function(e, t) {
                    var i = this.engagements || 0;
                    isFinite(i) || (i = 0);
                    var n = e / i;
                    return isFinite(n) || (n = 0), [t, n]
                }, this).object().value()
            }
        },
        social: {
            returns: ["fb_shares", "fb_likes", "fb_comments", "google_plus"],
            requires: ["video_id"],
            fn: function(e) {
                extApi().socialStatsForVideo(this.video_id, function(t) {
                    e({
                        fb_comments: t.fbComments,
                        fb_shares: t.fbShares,
                        fb_likes: t.fbLikes,
                        google_plus: t.gPlus
                    })
                })
            }
        },
        likeRatio: {
            returns: ["like_ratio"],
            requires: ["yt_likes", "yt_dislikes"],
            fn: function() {
                return this.yt_likes / (this.yt_likes + this.yt_dislikes)
            }
        },
        reddit: {
            returns: ["reddit_likes", "reddit_posts", "reddit_comments", "reddit_url"],
            requires: ["video_id"],
            fn: function(e, t) {
                var i = "https://www.reddit.com/search?q=url%3A" + this.video_id + "&restrict_sr=off&sort=relevance&t=all";
                extApi().getRedditData(this.video_id).done(function(t) {
                    e({
                        reddit_url: i,
                        reddit_likes: t.votes,
                        reddit_posts: t.posts,
                        reddit_comments: t.comments
                    })
                }).fail(t)
            }
        },
        stumbleUpon: {
            returns: ["stumbleupon"],
            requires: ["video_id"],
            fn: function(e) {
                callExtApi("stumbleUponForVideo", this.video_id, function(t) {
                    e(t)
                })
            }
        },
        linkedIn: {
            returns: ["linkedin"],
            requires: ["video_id"],
            fn: function(e) {
                callExtApi("linkedInForVideo", this.video_id, function(t) {
                    e(t)
                })
            }
        },
        channelId: {
            returns: ["channel_id"],
            requires: ["$h"],
            fn: function() {
                return this.$h.find('meta[itemprop="channelId"]').attr("content")
            }
        },
        userInfo: {
            returns: ["channel_name", "channel_url"],
            requires: ["$h"],
            fn: function() {
                var e = this.$h.find(".yt-user-info a");
                return 0 === e.length ? {
                    channel_name: null,
                    channel_url: null
                } : {
                    channel_name: e.text().trim(),
                    channel_url: "https://www.youtube.com" + e.attr("href")
                }
            }
        },
        channelUsernameUrl: {
            returns: ["channel_username_url"],
            requires: ["$h"],
            fn: function() {
                return this.$h.find(".yt-user-photo").attr("href")
            }
        },
        channel: {
            returns: ["channel", "owned"],
            requires: ["channel_id"],
            fn: function(e) {
                var t = this.channel_id;
                api().channels(function(i) {
                    var n = _.filter(i.channels, function(e) {
                        return [e.user_id, e.channel_id].indexOf(t) >= 0
                    });
                    e({
                        channel: n[0],
                        owned: !!n[0]
                    })
                })
            }
        },
        channelKeywords: {
            returns: ["channel_keywords"],
            requires: ["channel_username_url"],
            fn: function(e, t) {
                Channel.getKeywords(this.channel_username_url).done(function(t) {
                    e(_.map(t, function(e) {
                        return {
                            keyword: e
                        }
                    }))
                }).fail(t)
            }
        },
        historical: {
            returns: ["historical"],
            requires: ["video_id"],
            fn: function(e) {
                $.get("https://app.vidiq.com/v2/youtube_video_scores", {
                    youtube_video_id: this.video_id
                }).done(function(t) {
                    t || e([]), e(processHistorical(t))
                }).fail(function() {
                    e([])
                })
            }
        },
        historical_csv: {
            returns: ["historical_csv"],
            requires: ["historical"],
            fn: function() {
                var e = _.map(this.historical, function(e) {
                        return _.omit(e, "recorded_at", "record_id")
                    }),
                    t = _.keys(e[0]);
                t = ["created_at"].concat(_.without(t, "created_at"));
                var i = Export.csv(e, t);
                return Export.csv2url(i)
            }
        },
        pieChart: {
            returns: ["pie_chart"],
            requires: ["historical"],
            fn: function() {
                var e = 0,
                    t = _.map(HISTORICAL_SOCIAL_STATS, function(t, i) {
                        var n = HISTORICAL_SOCIAL_STATS_MAP[i].label,
                            r = findLastRecordOf(t, this.historical);
                        return e += r, {
                            label: n,
                            value: r
                        }
                    }, this);
                return e > 0 ? t : []
            }
        },
        viewsChart: {
            returns: ["views_chart"],
            requires: ["historical"],
            fn: function() {
                var e = chartMapHistorical(this.historical, "views");
                return _.isEmpty(e) ? [] : [{
                    values: e,
                    area: !0,
                    key: "Views"
                }]
            }
        },
        engagementRateChart: {
            returns: ["engagement_rate_chart"],
            requires: ["historical"],
            fn: function() {
                var e = chartMapHistorical(this.historical, "true_engagement");
                return _.isEmpty(e) ? [] : [{
                    values: e,
                    area: !0,
                    key: "Engagement Rate"
                }]
            }
        },
        vphChart: {
            returns: ["vph_chart"],
            requires: ["historical"],
            fn: function() {
                var e = chartMapHistorical(this.historical, "velocity");
                return _.isEmpty(e) ? [] : [{
                    values: e,
                    area: !0,
                    key: "Views Per Hour"
                }]
            }
        },
        engagementsChart: {
            returns: ["engagements_chart"],
            requires: ["historical"],
            fn: function() {
                var e = this.historical,
                    t = 0,
                    i = _.map(HISTORICAL_SOCIAL_STATS, function(i, n) {
                        var r = HISTORICAL_SOCIAL_STATS_MAP[n],
                            s = 0,
                            a = _.map(e, function(e) {
                                var n = e[i];
                                return n ? (t += n, s = n) : n = s, [new Date(e.created_at).getTime(), n]
                            });
                        return {
                            values: a,
                            key: r.label,
                            color: r.color
                        }
                    });
                return t > 0 ? i : []
            }
        },
        charts: {
            strict: !1,
            returns: ["charts"],
            requires: ["pie_chart", "views_chart", "engagement_rate_chart", "vph_chart", "engagements_chart"],
            fn: function() {
                return this
            }
        },
        googleTrafficSources: {
            returns: ["google_traffic_sources"],
            requires: ["video_id"],
            fn: function(e) {
                extApi().googleResults({
                    video_id: this.video_id
                }, e)
            }
        },
        numGoogleTrafficSources: {
            returns: ["num_google_traffic_sources"],
            requires: ["google_traffic_sources"],
            fn: function() {
                var e = (this.google_traffic_sources || {}).resultCount || 0;
                return _.isNumber(e) ? e : parseInt(e, 10)
            }
        },
        googleEmbedSources: {
            returns: ["google_embed_sources"],
            requires: ["video_id"],
            fn: function(e) {
                extApi().googleResults({
                    embedded: !0,
                    video_id: this.video_id
                }, e)
            }
        },
        numGoogleEmbedSources: {
            returns: ["num_google_embed_sources"],
            requires: ["google_embed_sources"],
            fn: function() {
                var e = (this.google_embed_sources || {}).resultCount;
                return _.isNumber(e) ? e : parseInt(e, 10)
            }
        },
        tweetsData: {
            returns: ["tweets_data"],
            requires: ["video_id"],
            fn: function(e) {
                extApi().fetchTwitterTweets(this.video_id, e)
            }
        },
        ranges: {
            returns: ["start_date", "end_date"],
            requires: ["date_published"],
            fn: function() {
                return {
                    start_date: this.date_published,
                    end_date: moment().subtract(1, "day")
                }
            }
        },
        subViews: {
            returns: ["sub_views"],
            requires: ["insight_traffic"],
            fn: function() {
                var e = this.insight_traffic.response,
                    t = _.findWhere(e, {
                        insightTrafficSourceType: "SUBSCRIBER"
                    });
                return (t || {}).views || null
            }
        },
        percentSubViews: {
            returns: ["percent_sub_views"],
            requires: ["sub_views", "views"],
            fn: function() {
                return null === this.sub_views ? {
                    value: 0,
                    hideZero: !0
                } : this.sub_views / this.views
            }
        },
        publicStats: {
            returns: ["public_stats"],
            requires: ["session_token", "video_id"],
            fn: function(e, t) {
                ytApi().getPublicStats(this.video_id, this.session_token).done(e).fail(t)
            }
        },
        subsDriven: {
            strict: !1,
            returns: ["subs_driven"],
            requires: ["subscribers_gained", "public_stats"],
            fn: function() {
                if (this.subscribers_gained) {
                    var e = this.subscribers_gained.response[0];
                    if (e) return e.subscribersGained || null
                } else if (this.public_stats) return this.public_stats.subscriptions_driven || null;
                return null
            }
        },
        avgViewTime: {
            strict: !1,
            returns: ["avg_view_time"],
            requires: ["views_data", "public_stats", "duration_sec"],
            fn: function() {
                if (this.views_data) return this.views_data.response[0].averageViewPercentage / 100;
                if (this.public_stats && this.public_stats.average_view_duration) {
                    var e = u.time2sec(this.public_stats.average_view_duration);
                    return e / this.duration_sec
                }
            }
        },
        organicViews: {
            returns: ["organic_views"],
            requires: ["views", "insight_traffic"],
            fn: function() {
                var e = _.findWhere(this.insight_traffic.response, {
                    insightTrafficSourceType: "ADVERTISING"
                });
                return e ? 1 - e.views / this.views : null
            }
        },
        ytSearchViews: {
            returns: ["yt_search_views"],
            requires: ["insight_traffic"],
            fn: function() {
                var e = _.findWhere(this.insight_traffic.response, {
                    insightTrafficSourceType: "YT_SEARCH"
                });
                return (e || {}).views || null
            }
        },
        suggestedViews: {
            returns: ["suggested_views"],
            requires: ["insight_traffic"],
            fn: function() {
                var e = _.findWhere(this.insight_traffic.response, {
                    insightTrafficSourceType: "RELATED_VIDEO"
                });
                return (e || {}).views || null
            }
        },
        referredViews: {
            returns: ["referred_views"],
            requires: ["insight_traffic"],
            fn: function() {
                var e = _.findWhere(this.insight_traffic.response, {
                    insightTrafficSourceType: "EXT_URL"
                });
                return (e || {}).views || null
            }
        },
        embeddedViews: {
            returns: ["embedded_views"],
            requires: ["insight_playback_location"],
            fn: function() {
                var e = _.findWhere(this.insight_playback_location.response, {
                    insightPlaybackLocationType: "EMBEDDED"
                });
                return (e || {}).views || null
            }
        },
        topCountries: {
            returns: ["top_countries"],
            requires: ["views_by_country", "views"],
            fn: function() {
                return _.object(_.map(this.views_by_country.response, function(e) {
                    var t = e.views / this.views;
                    return [e.country, {
                        views: e.views,
                        percent: t
                    }]
                }, this).slice(0, 10))
            }
        },
        topDevices: {
            returns: ["top_devices"],
            requires: ["views_by_device", "views"],
            fn: function() {
                var e = this.views_by_device.response;
                return _.object(_.compact(_.map(e, function(e) {
                    var t = e.deviceType.toLowerCase().replace(/_/g, " ");
                    if ("unknown platform" !== t) {
                        var i = e.views / this.views;
                        return [t, {
                            views: e.views,
                            percent: i
                        }]
                    }
                }, this)))
            }
        },
        viewsData: {
            returns: ["views_data"],
            requires: ["video_id", "channel", "owned", "start_date", "end_date"],
            fn: function(e, t) {
                return this.owned ? void api().youtubeProxy(this.channel.token, {
                    metrics: "views,averageViewPercentage",
                    filter: "video==" + this.video_id,
                    start: moment(this.start_date).format(DATE_FORMAT),
                    end: moment(this.end_date).format(DATE_FORMAT)
                }).done(e).fail(t) : t()
            }
        },
        viewsByCountry: {
            returns: ["views_by_country"],
            requires: ["video_id", "channel", "owned", "start_date", "end_date"],
            fn: function(e, t) {
                return this.owned ? void api().youtubeProxy(this.channel.token, {
                    metrics: "views",
                    sort: "-views",
                    dimensions: "country",
                    filter: "video==" + this.video_id,
                    start: moment(this.start_date).format(DATE_FORMAT),
                    end: moment(this.end_date).format(DATE_FORMAT)
                }).done(e).fail(t) : t()
            }
        },
        viewsByDevice: {
            returns: ["views_by_device"],
            requires: ["video_id", "channel", "owned", "start_date", "end_date"],
            fn: function(e, t) {
                return this.owned ? void api().youtubeProxy(this.channel.token, {
                    metrics: "views",
                    sort: "-views",
                    dimensions: "deviceType",
                    filter: "video==" + this.video_id,
                    start: moment(this.start_date).format(DATE_FORMAT),
                    end: moment(this.end_date).format(DATE_FORMAT)
                }).done(e).fail(t) : t()
            }
        },
        insightTraffic: {
            returns: ["insight_traffic"],
            requires: ["video_id", "channel", "owned", "start_date", "end_date"],
            fn: function(e, t) {
                return this.owned ? void api().youtubeProxy(this.channel.token, {
                    metrics: "views",
                    sort: "-views",
                    dimensions: "insightTrafficSourceType",
                    filter: "video==" + this.video_id,
                    start: moment(this.start_date).format(DATE_FORMAT),
                    end: moment(this.end_date).format(DATE_FORMAT)
                }).done(e).fail(t) : t()
            }
        },
        insightTrafficYtSearch: {
            returns: ["insight_traffic_yt_search"],
            requires: ["video_id", "channel", "owned", "start_date", "end_date"],
            fn: function(e, t) {
                return this.owned ? void api().youtubeProxy(this.channel.token, {
                    metrics: "views,estimatedMinutesWatched",
                    sort: "-views",
                    dimensions: "insightTrafficSourceDetail",
                    filter: "insightTrafficSourceType==YT_SEARCH;video==" + this.video_id,
                    start: moment(this.start_date).format(DATE_FORMAT),
                    end: moment(this.end_date).format(DATE_FORMAT),
                    max_results: 25
                }).done(e).fail(t) : t()
            }
        },
        insightTrafficYtSuggested: {
            returns: ["insight_traffic_yt_suggested"],
            requires: ["video_id", "channel", "owned", "start_date", "end_date"],
            fn: function(e, t) {
                return this.owned ? void api().youtubeProxy(this.channel.token, {
                    metrics: "views,estimatedMinutesWatched",
                    sort: "-views",
                    dimensions: "insightTrafficSourceDetail",
                    filter: "insightTrafficSourceType==RELATED_VIDEO;video==" + this.video_id,
                    start: moment(this.start_date).format(DATE_FORMAT),
                    end: moment(this.end_date).format(DATE_FORMAT),
                    max_results: 25
                }).done(e).fail(t) : t()
            }
        },
        suggestedVideoReferrerDetails: {
            returns: ["suggested_video_referrer_details"],
            requires: ["insight_traffic_yt_suggested"],
            fn: function(e) {
                var t = {},
                    i = this.insight_traffic_yt_suggested.response;
                _.map(i, function(n) {
                    var r = n.insightTrafficSourceDetail;
                    "unknown" === r ? (t[r] = {
                        title: "",
                        channel_name: "",
                        channel_url: ""
                    }, _.values(t).length === i.length && e(t)) : videoStatsQuickFetch(r, ["title", "channel_name", "channel_url"]).done(function(n) {
                        t[r] = n, _.values(t).length === i.length && e(t)
                    })
                })
            }
        },
        insightTrafficExt: {
            returns: ["insight_traffic_ext"],
            requires: ["video_id", "channel", "owned", "start_date", "end_date"],
            fn: function(e, t) {
                return this.owned ? void api().youtubeProxy(this.channel.token, {
                    metrics: "views,estimatedMinutesWatched",
                    sort: "-views",
                    dimensions: "insightTrafficSourceDetail",
                    filter: "insightTrafficSourceType==EXT_URL;video==" + this.video_id,
                    start: moment(this.start_date).format(DATE_FORMAT),
                    end: moment(this.end_date).format(DATE_FORMAT),
                    max_results: 25
                }).done(e).fail(t) : t()
            }
        },
        insightTopEmbeds: {
            returns: ["insight_top_embeds"],
            requires: ["video_id", "channel", "owned", "start_date", "end_date"],
            fn: function(e, t) {
                return this.owned ? void api().youtubeProxy(this.channel.token, {
                    metrics: "views,estimatedMinutesWatched",
                    sort: "-views",
                    dimensions: "insightPlaybackLocationDetail",
                    filter: "insightPlaybackLocationType==EMBEDDED;video==" + this.video_id,
                    start: moment(this.start_date).format(DATE_FORMAT),
                    end: moment(this.end_date).format(DATE_FORMAT),
                    max_results: 25
                }).done(e).fail(t) : t()
            }
        },
        insightPlaybackLocationViews: {
            returns: ["insight_playback_location"],
            requires: ["video_id", "channel", "owned", "start_date", "end_date"],
            fn: function(e, t) {
                return this.owned ? void api().youtubeProxy(this.channel.token, {
                    metrics: "views",
                    dimensions: "insightPlaybackLocationType",
                    filter: "video==" + this.video_id,
                    start: moment(this.start_date).format(DATE_FORMAT),
                    end: moment(this.end_date).format(DATE_FORMAT)
                }).done(e).fail(t) : t()
            }
        },
        subscribersGained: {
            returns: ["subscribers_gained"],
            requires: ["video_id", "channel", "owned", "start_date", "end_date"],
            fn: function(e, t) {
                return this.owned ? void api().youtubeProxy(this.channel.token, {
                    metrics: "subscribersGained",
                    filter: "video==" + this.video_id,
                    start: moment(this.start_date).format(DATE_FORMAT),
                    end: moment(this.end_date).format(DATE_FORMAT)
                }).done(e).fail(t) : t()
            }
        }
    };
videoStatsQuickFetch = function(e, t) {
    if ("unknown" !== e && e) {
        var i = new $.Deferred,
            n = {
                video_id: e
            },
            r = createVideoStatsManager({
                getData: function() {
                    return n
                },
                mergeData: function(e) {
                    _.extend(n, e)
                },
                onProgressChange: function(e) {
                    var r = [n].concat(t);
                    e >= 1 && i.resolve(_.pick.apply(_, r))
                }
            });
        return r.requestMany(t), i.promise()
    }
};
var VideoCompanion = {
    containerSelector: "#watch7-sidebar",
    lastRoot: null,
    getRoot: function() {
        var e = $("#video-companion-root");
        return e.length > 0 ? e[0] : (e = $('<div id="video-companion-root" class="vidiq-react"></div>'), e.insertAfter($(this.containerSelector).find("#placeholder-playlist")), e[0])
    },
    isUnavailable: function() {
        return $("#player-unavailable:not(.hid)").length > 0
    },
    mount: function() {
        if (!this.isUnavailable()) {
            VideoCompanionActions.update({
                videoId: ytApi().currentVideoID()
            }), log("Mounting video companion @ %s", window.location.href);
            var e = React.createElement(VideoCompanionBase);
            this.lastRoot = this.getRoot(), React.render(e, this.lastRoot), u.mountComponent({
                selector: "#watch7-subscription-container",
                component: VideoCompanionExtra,
                inline: !0
            })
        }
    },
    unmount: function() {
        this.lastRoot && (React.unmountComponentAtNode(this.lastRoot), log("Unmounted old video companion"))
    }
};
Screeny.watch(VideoCompanion.containerSelector).enter(VideoCompanion.mount.bind(VideoCompanion)).leave(VideoCompanion.unmount.bind(VideoCompanion)), Screeny.watch(".comment-renderer").enter(function(e) {
    if (!$(e).hasClass("vidiq-has-sub-count")) {
        $(e).addClass("vidiq-has-sub-count");
        var n = $(e).find(".yt-uix-sessionlink").attr("href");
        u.mountComponent({
            component: SubscriberCount,
            element: $(e).find(".comment-renderer-header")[0],
            inline: !0,
            rootClass: "video-page",
            props: {
                channelPath: n,
                id: u.prettyRandomId()
            }
        }), CommentsDOM.getSubCount(n)
    }
});
var fetched = !1;
Screeny.watch(".comment-renderer-footer").enter(function(e) {
    fetched || (CommentTemplatesActions.fetch(), fetched = !0);
    var n = $(e).parents(".comment-renderer").get(0),
        o = $(n).find(".comment-author-text")[0],
        t = $(o).text(),
        i = $(e).find(".comment-renderer-reply")[0],
        a = $(n).attr("data-cid");
    $(window).on("comment-templates:insert-reply:<" + a + ">", function(e, n) {
        $(i).click(), $(".comment-simplebox-text").text(n), $(".comment-simplebox-submit").attr("disabled", !1)
    });
    var r = $(e).find(".sprite-dislike")[0];
    u.mountComponent({
        component: CommentTemplatesDropdown,
        element: r,
        insertFn: "after",
        inline: !0,
        rootClass: "video-page",
        props: {
            channelName: t,
            id: a
        }
    })
});
$(window).on("vidiq:ready", function() {
    u.mountComponent({
        component: VideoActionsDropdownMenu,
        selector: ".vm-video-item-content .yt-uix-button-group",
        url: "youtube.com/my_videos",
        inline: !0,
        props: {
            size: "small"
        }
    }), u.mountComponent({
        component: MyVideosDropdownMenu,
        selector: ".vm-video-actions-inner .yt-uix-overlay",
        insertFn: "before",
        url: "youtube.com/my_videos",
        inline: !0
    })
});
! function(t, e) {
    "use strict";
    var n;
    if ("object" == typeof exports) {
        try {
            n = require("moment")
        } catch (i) {}
        module.exports = e(n)
    } else "function" == typeof define && define.amd ? define(function(t) {
        var i = "moment";
        return n = t.defined && t.defined(i) ? t(i) : void 0, e(n)
    }) : t.Pikaday = e(t.moment)
}(this, function(t) {
    "use strict";
    var e = "function" == typeof t,
        n = !!window.addEventListener,
        i = window.document,
        a = window.setTimeout,
        o = function(t, e, i, a) {
            n ? t.addEventListener(e, i, !!a) : t.attachEvent("on" + e, i)
        },
        s = function(t, e, i, a) {
            n ? t.removeEventListener(e, i, !!a) : t.detachEvent("on" + e, i)
        },
        r = function(t, e, n) {
            var a;
            i.createEvent ? (a = i.createEvent("HTMLEvents"), a.initEvent(e, !0, !1), a = y(a, n), t.dispatchEvent(a)) : i.createEventObject && (a = i.createEventObject(), a = y(a, n), t.fireEvent("on" + e, a))
        },
        h = function(t) {
            return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "")
        },
        l = function(t, e) {
            return -1 !== (" " + t.className + " ").indexOf(" " + e + " ")
        },
        u = function(t, e) {
            l(t, e) || (t.className = "" === t.className ? e : t.className + " " + e)
        },
        d = function(t, e) {
            t.className = h((" " + t.className + " ").replace(" " + e + " ", " "))
        },
        f = function(t) {
            return /Array/.test(Object.prototype.toString.call(t))
        },
        c = function(t) {
            return /Date/.test(Object.prototype.toString.call(t)) && !isNaN(t.getTime())
        },
        m = function(t) {
            return t % 4 === 0 && t % 100 !== 0 || t % 400 === 0
        },
        g = function(t, e) {
            return [31, m(t) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][e]
        },
        p = function(t) {
            c(t) && t.setHours(0, 0, 0, 0)
        },
        v = function(t, e) {
            return t.getTime() === e.getTime()
        },
        y = function(t, e, n) {
            var i, a;
            for (i in e) a = void 0 !== t[i], a && "object" == typeof e[i] && void 0 === e[i].nodeName ? c(e[i]) ? n && (t[i] = new Date(e[i].getTime())) : f(e[i]) ? n && (t[i] = e[i].slice(0)) : t[i] = y({}, e[i], n) : !n && a || (t[i] = e[i]);
            return t
        },
        D = function(t) {
            return t.month < 0 && (t.year -= Math.ceil(Math.abs(t.month) / 12), t.month += 12), t.month > 11 && (t.year += Math.floor(Math.abs(t.month) / 12), t.month -= 12), t
        },
        _ = {
            field: null,
            bound: void 0,
            position: "bottom left",
            format: "YYYY-MM-DD",
            defaultDate: null,
            setDefaultDate: !1,
            firstDay: 0,
            minDate: null,
            maxDate: null,
            yearRange: 10,
            minYear: 0,
            maxYear: 9999,
            minMonth: void 0,
            maxMonth: void 0,
            isRTL: !1,
            yearSuffix: "",
            showMonthAfterYear: !1,
            numberOfMonths: 1,
            mainCalendar: "left",
            i18n: {
                previousMonth: "Previous Month",
                nextMonth: "Next Month",
                months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                weekdays: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                weekdaysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]
            },
            onSelect: null,
            onOpen: null,
            onClose: null,
            onDraw: null
        },
        b = function(t, e, n) {
            for (e += t.firstDay; e >= 7;) e -= 7;
            return n ? t.i18n.weekdaysShort[e] : t.i18n.weekdays[e]
        },
        w = function(t, e, n, i, a, o, s) {
            if (s) return '<td class="is-empty"></td>';
            var r = [];
            return o && r.push("is-disabled"), a && r.push("is-today"), i && r.push("is-selected"), '<td data-day="' + t + '" class="' + r.join(" ") + '"><button class="pika-button pika-day" type="button" data-pika-year="' + n + '" data-pika-month="' + e + '" data-pika-day="' + t + '">' + t + "</button></td>"
        },
        M = function(t, e) {
            return "<tr>" + (e ? t.reverse() : t).join("") + "</tr>"
        },
        x = function(t) {
            return "<tbody>" + t.join("") + "</tbody>"
        },
        k = function(t) {
            var e, n = [];
            for (e = 0; 7 > e; e++) n.push('<th scope="col"><abbr title="' + b(t, e) + '">' + b(t, e, !0) + "</abbr></th>");
            return "<thead>" + (t.isRTL ? n.reverse() : n).join("") + "</thead>"
        },
        T = function(t, e, n, i, a) {
            var o, s, r, h, l, u = t._o,
                d = n === u.minYear,
                c = n === u.maxYear,
                m = '<div class="pika-title">',
                g = !0,
                p = !0;
            for (r = [], o = 0; 12 > o; o++) r.push('<option value="' + (n === a ? o - e : 12 + o - e) + '"' + (o === i ? " selected" : "") + (d && o < u.minMonth || c && o > u.maxMonth ? "disabled" : "") + ">" + u.i18n.months[o] + "</option>");
            for (h = '<div class="pika-label">' + u.i18n.months[i] + '<select class="pika-select pika-select-month">' + r.join("") + "</select></div>", f(u.yearRange) ? (o = u.yearRange[0], s = u.yearRange[1] + 1) : (o = n - u.yearRange, s = 1 + n + u.yearRange), r = []; s > o && o <= u.maxYear; o++) o >= u.minYear && r.push('<option value="' + o + '"' + (o === n ? " selected" : "") + ">" + o + "</option>");
            return l = '<div class="pika-label">' + n + u.yearSuffix + '<select class="pika-select pika-select-year">' + r.join("") + "</select></div>", m += u.showMonthAfterYear ? l + h : h + l, d && (0 === i || u.minMonth >= i) && (g = !1), c && (11 === i || u.maxMonth <= i) && (p = !1), 0 === e && (m += '<button class="pika-prev' + (g ? "" : " is-disabled") + '" type="button">' + u.i18n.previousMonth + "</button>"), e === t._o.numberOfMonths - 1 && (m += '<button class="pika-next' + (p ? "" : " is-disabled") + '" type="button">' + u.i18n.nextMonth + "</button>"), m += "</div>"
        },
        C = function(t, e) {
            return '<table cellpadding="0" cellspacing="0" class="pika-table">' + k(t) + x(e) + "</table>"
        },
        N = function(s) {
            var r = this,
                h = r.config(s);
            r._onMouseDown = function(t) {
                if (r._v) {
                    t = t || window.event;
                    var e = t.target || t.srcElement;
                    if (e) {
                        if (!l(e, "is-disabled")) {
                            if (l(e, "pika-button") && !l(e, "is-empty")) return r.setDate(new Date(e.getAttribute("data-pika-year"), e.getAttribute("data-pika-month"), e.getAttribute("data-pika-day"))), void(h.bound && a(function() {
                                r.hide()
                            }, 100));
                            l(e, "pika-prev") ? r.prevMonth() : l(e, "pika-next") && r.nextMonth()
                        }
                        if (l(e, "pika-select")) r._c = !0;
                        else {
                            if (!t.preventDefault) return t.returnValue = !1, !1;
                            t.preventDefault()
                        }
                    }
                }
            }, r._onChange = function(t) {
                t = t || window.event;
                var e = t.target || t.srcElement;
                e && (l(e, "pika-select-month") ? r.gotoMonth(e.value) : l(e, "pika-select-year") && r.gotoYear(e.value))
            }, r._onInputChange = function(n) {
                var i;
                n.firedBy !== r && (e ? (i = t(h.field.value, h.format), i = i && i.isValid() ? i.toDate() : null) : i = new Date(Date.parse(h.field.value)), r.setDate(c(i) ? i : null), r._v || r.show())
            }, r._onInputFocus = function() {
                r.show()
            }, r._onInputClick = function() {
                r.show()
            }, r._onInputBlur = function() {
                r._c || (r._b = a(function() {}, 50)), r._c = !1
            }, r._onClick = function(t) {
                t = t || window.event;
                var e = t.target || t.srcElement,
                    i = e;
                if (e) {
                    !n && l(e, "pika-select") && (e.onchange || (e.setAttribute("onchange", "return;"), o(e, "change", r._onChange)));
                    do
                        if (l(i, "pika-single")) return;
                    while (i = i.parentNode);
                    r._v && e !== h.trigger && r.hide()
                }
            }, r.el = i.createElement("div"), r.el.className = "pika-single" + (h.isRTL ? " is-rtl" : ""), o(r.el, "mousedown", r._onMouseDown, !0), o(r.el, "change", r._onChange), h.field && (h.bound ? i.body.appendChild(r.el) : h.field.parentNode.insertBefore(r.el, h.field.nextSibling), o(h.field, "change", r._onInputChange), h.defaultDate || (e && h.field.value ? h.defaultDate = t(h.field.value, h.format).toDate() : h.defaultDate = new Date(Date.parse(h.field.value)), h.setDefaultDate = !0));
            var u = h.defaultDate;
            c(u) ? h.setDefaultDate ? r.setDate(u, !0) : r.gotoDate(u) : r.gotoDate(new Date), h.bound ? (this.hide(), r.el.className += " is-bound", o(h.trigger, "click", r._onInputClick), o(h.trigger, "focus", r._onInputFocus), o(h.trigger, "blur", r._onInputBlur)) : this.show()
        };
    return N.prototype = {
        config: function(t) {
            this._o || (this._o = y({}, _, !0));
            var e = y(this._o, t, !0);
            e.isRTL = !!e.isRTL, e.field = e.field && e.field.nodeName ? e.field : null, e.bound = !!(void 0 !== e.bound ? e.field && e.bound : e.field), e.trigger = e.trigger && e.trigger.nodeName ? e.trigger : e.field;
            var n = parseInt(e.numberOfMonths, 10) || 1;
            if (e.numberOfMonths = n > 4 ? 4 : n, c(e.minDate) || (e.minDate = !1), c(e.maxDate) || (e.maxDate = !1), e.minDate && e.maxDate && e.maxDate < e.minDate && (e.maxDate = e.minDate = !1), e.minDate && (p(e.minDate), e.minYear = e.minDate.getFullYear(), e.minMonth = e.minDate.getMonth()), e.maxDate && (p(e.maxDate), e.maxYear = e.maxDate.getFullYear(), e.maxMonth = e.maxDate.getMonth()), f(e.yearRange)) {
                var i = (new Date).getFullYear() - 10;
                e.yearRange[0] = parseInt(e.yearRange[0], 10) || i, e.yearRange[1] = parseInt(e.yearRange[1], 10) || i
            } else e.yearRange = Math.abs(parseInt(e.yearRange, 10)) || _.yearRange, e.yearRange > 100 && (e.yearRange = 100);
            return e
        },
        toString: function(n) {
            return c(this._d) ? e ? t(this._d).format(n || this._o.format) : this._d.toDateString() : ""
        },
        getMoment: function() {
            return e ? t(this._d) : null
        },
        setMoment: function(n, i) {
            e && t.isMoment(n) && this.setDate(n.toDate(), i)
        },
        getDate: function() {
            return c(this._d) ? new Date(this._d.getTime()) : null
        },
        setDate: function(t, e) {
            if (!t) return this._d = null, this.draw();
            if ("string" == typeof t && (t = new Date(Date.parse(t))), c(t)) {
                var n = this._o.minDate,
                    i = this._o.maxDate;
                c(n) && n > t ? t = n : c(i) && t > i && (t = i), this._d = new Date(t.getTime()), p(this._d), this.gotoDate(this._d), this._o.field && (this._o.field.value = this.toString(), r(this._o.field, "change", {
                    firedBy: this
                })), e || "function" != typeof this._o.onSelect || this._o.onSelect.call(this, this.getDate())
            }
        },
        gotoDate: function(t) {
            var e = !0;
            if (c(t)) {
                if (this.calendars) {
                    var n = new Date(this.calendars[0].year, this.calendars[0].month, 1),
                        i = new Date(this.calendars[this.calendars.length - 1].year, this.calendars[this.calendars.length - 1].month, 1),
                        a = t.getTime();
                    i.setMonth(i.getMonth() + 1), i.setDate(i.getDate() - 1), e = a < n.getTime() || i.getTime() < a
                }
                e && (this.calendars = [{
                    month: t.getMonth(),
                    year: t.getFullYear()
                }], "right" === this._o.mainCalendar && (this.calendars[0].month += 1 - this._o.numberOfMonths)), this.adjustCalendars()
            }
        },
        adjustCalendars: function() {
            this.calendars[0] = D(this.calendars[0]);
            for (var t = 1; t < this._o.numberOfMonths; t++) this.calendars[t] = D({
                month: this.calendars[0].month + t,
                year: this.calendars[0].year
            });
            this.draw()
        },
        gotoToday: function() {
            this.gotoDate(new Date)
        },
        gotoMonth: function(t) {
            isNaN(t) || (this.calendars[0].month = parseInt(t, 10), this.adjustCalendars())
        },
        nextMonth: function() {
            this.calendars[0].month++, this.adjustCalendars()
        },
        prevMonth: function() {
            this.calendars[0].month--, this.adjustCalendars()
        },
        gotoYear: function(t) {
            isNaN(t) || (this.calendars[0].year = parseInt(t, 10), this.adjustCalendars())
        },
        setMinDate: function(t) {
            this._o.minDate = t
        },
        setMaxDate: function(t) {
            this._o.maxDate = t
        },
        draw: function(t) {
            if (this._v || t) {
                var e = this._o,
                    n = e.minYear,
                    i = e.maxYear,
                    o = e.minMonth,
                    s = e.maxMonth,
                    r = "";
                this._y <= n && (this._y = n, !isNaN(o) && this._m < o && (this._m = o)), this._y >= i && (this._y = i, !isNaN(s) && this._m > s && (this._m = s));
                for (var h = 0; h < e.numberOfMonths; h++) r += '<div class="pika-lendar">' + T(this, h, this.calendars[h].year, this.calendars[h].month, this.calendars[0].year) + this.render(this.calendars[h].year, this.calendars[h].month) + "</div>";
                if (this.el.innerHTML = r, e.bound && "hidden" !== e.field.type && a(function() {
                        e.trigger.focus()
                    }, 1), "function" == typeof this._o.onDraw) {
                    var l = this;
                    a(function() {
                        l._o.onDraw.call(l)
                    }, 0)
                }
            }
        },
        adjustPosition: function() {
            var t, e, n, a = this._o.trigger,
                o = a,
                s = this.el.offsetWidth,
                r = this.el.offsetHeight,
                h = window.innerWidth || i.documentElement.clientWidth,
                l = window.innerHeight || i.documentElement.clientHeight,
                u = window.pageYOffset || i.body.scrollTop || i.documentElement.scrollTop;
            if ("function" == typeof a.getBoundingClientRect) n = a.getBoundingClientRect(), t = n.left + window.pageXOffset, e = n.bottom + window.pageYOffset;
            else
                for (t = o.offsetLeft, e = o.offsetTop + o.offsetHeight; o = o.offsetParent;) t += o.offsetLeft, e += o.offsetTop;
            (t + s > h || this._o.position.indexOf("right") > -1 && t - s + a.offsetWidth > 0) && (t = t - s + a.offsetWidth), (e + r > l + u || this._o.position.indexOf("top") > -1 && e - r - a.offsetHeight > 0) && (e = e - r - a.offsetHeight), this.el.style.cssText = ["position: absolute", "left: " + t + "px", "top: " + e + "px"].join(";")
        },
        render: function(t, e) {
            var n = this._o,
                i = new Date,
                a = g(t, e),
                o = new Date(t, e, 1).getDay(),
                s = [],
                r = [];
            p(i), n.firstDay > 0 && (o -= n.firstDay, 0 > o && (o += 7));
            for (var h = a + o, l = h; l > 7;) l -= 7;
            h += 7 - l;
            for (var u = 0, d = 0; h > u; u++) {
                var f = new Date(t, e, 1 + (u - o)),
                    m = n.minDate && f < n.minDate || n.maxDate && f > n.maxDate,
                    y = c(this._d) ? v(f, this._d) : !1,
                    D = v(f, i),
                    _ = o > u || u >= a + o;
                r.push(w(1 + (u - o), e, t, y, D, m, _)), 7 === ++d && (s.push(M(r, n.isRTL)), r = [], d = 0)
            }
            return C(n, s)
        },
        isVisible: function() {
            return this._v
        },
        show: function() {
            this._v || (d(this.el, "is-hidden"), this._v = !0, this.draw(), this._o.bound && (o(i, "click", this._onClick), this.adjustPosition()), "function" == typeof this._o.onOpen && this._o.onOpen.call(this))
        },
        hide: function() {
            var t = this._v;
            t !== !1 && (this._o.bound && s(i, "click", this._onClick), this.el.style.cssText = "", u(this.el, "is-hidden"), this._v = !1, void 0 !== t && "function" == typeof this._o.onClose && this._o.onClose.call(this))
        },
        destroy: function() {
            this.hide(), s(this.el, "mousedown", this._onMouseDown, !0), s(this.el, "change", this._onChange), this._o.field && (s(this._o.field, "change", this._onInputChange), this._o.bound && (s(this._o.trigger, "click", this._onInputClick), s(this._o.trigger, "focus", this._onInputFocus), s(this._o.trigger, "blur", this._onInputBlur))), this.el.parentNode && this.el.parentNode.removeChild(this.el)
        }
    }, N
});
! function(t) {
    "function" == typeof define && define.amd ? define(["jquery"], t) : t(jQuery)
}(function(t) {
    function e(e, s) {
        var n, o, a, r = e.nodeName.toLowerCase();
        return "area" === r ? (n = e.parentNode, o = n.name, e.href && o && "map" === n.nodeName.toLowerCase() ? (a = t("img[usemap='#" + o + "']")[0], !!a && i(a)) : !1) : (/^(input|select|textarea|button|object)$/.test(r) ? !e.disabled : "a" === r ? e.href || s : s) && i(e)
    }

    function i(e) {
        return t.expr.filters.visible(e) && !t(e).parents().addBack().filter(function() {
            return "hidden" === t.css(this, "visibility")
        }).length
    }

    function s(t) {
        for (var e, i; t.length && t[0] !== document;) {
            if (e = t.css("position"), ("absolute" === e || "relative" === e || "fixed" === e) && (i = parseInt(t.css("zIndex"), 10), !isNaN(i) && 0 !== i)) return i;
            t = t.parent()
        }
        return 0
    }

    function n() {
        this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], this._datepickerShowing = !1, this._inDialog = !1, this._mainDivId = "ui-datepicker-div", this._inlineClass = "ui-datepicker-inline", this._appendClass = "ui-datepicker-append", this._triggerClass = "ui-datepicker-trigger", this._dialogClass = "ui-datepicker-dialog", this._disableClass = "ui-datepicker-disabled", this._unselectableClass = "ui-datepicker-unselectable", this._currentClass = "ui-datepicker-current-day", this._dayOverClass = "ui-datepicker-days-cell-over", this.regional = [], this.regional[""] = {
            closeText: "Done",
            prevText: "Prev",
            nextText: "Next",
            currentText: "Today",
            monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
            weekHeader: "Wk",
            dateFormat: "mm/dd/yy",
            firstDay: 0,
            isRTL: !1,
            showMonthAfterYear: !1,
            yearSuffix: ""
        }, this._defaults = {
            showOn: "focus",
            showAnim: "fadeIn",
            showOptions: {},
            defaultDate: null,
            appendText: "",
            buttonText: "...",
            buttonImage: "",
            buttonImageOnly: !1,
            hideIfNoPrevNext: !1,
            navigationAsDateFormat: !1,
            gotoCurrent: !1,
            changeMonth: !1,
            changeYear: !1,
            yearRange: "c-10:c+10",
            showOtherMonths: !1,
            selectOtherMonths: !1,
            showWeek: !1,
            calculateWeek: this.iso8601Week,
            shortYearCutoff: "+10",
            minDate: null,
            maxDate: null,
            duration: "fast",
            beforeShowDay: null,
            beforeShow: null,
            onSelect: null,
            onChangeMonthYear: null,
            onClose: null,
            numberOfMonths: 1,
            showCurrentAtPos: 0,
            stepMonths: 1,
            stepBigMonths: 12,
            altField: "",
            altFormat: "",
            constrainInput: !0,
            showButtonPanel: !1,
            autoSize: !1,
            disabled: !1
        }, t.extend(this._defaults, this.regional[""]), this.regional.en = t.extend(!0, {}, this.regional[""]), this.regional["en-US"] = t.extend(!0, {}, this.regional.en), this.dpDiv = o(t("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))
    }

    function o(e) {
        var i = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return e.delegate(i, "mouseout", function() {
            t(this).removeClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && t(this).removeClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && t(this).removeClass("ui-datepicker-next-hover")
        }).delegate(i, "mouseover", a)
    }

    function a() {
        t.datepicker._isDisabledDatepicker(d.inline ? d.dpDiv.parent()[0] : d.input[0]) || (t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), t(this).addClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && t(this).addClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && t(this).addClass("ui-datepicker-next-hover"))
    }

    function r(e, i) {
        t.extend(e, i);
        for (var s in i) null == i[s] && (e[s] = i[s]);
        return e
    }
    t.ui = t.ui || {}, t.extend(t.ui, {
        version: "1.11.4",
        keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }
    }), t.fn.extend({
        scrollParent: function(e) {
            var i = this.css("position"),
                s = "absolute" === i,
                n = e ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
                o = this.parents().filter(function() {
                    var e = t(this);
                    return s && "static" === e.css("position") ? !1 : n.test(e.css("overflow") + e.css("overflow-y") + e.css("overflow-x"))
                }).eq(0);
            return "fixed" !== i && o.length ? o : t(this[0].ownerDocument || document)
        },
        uniqueId: function() {
            var t = 0;
            return function() {
                return this.each(function() {
                    this.id || (this.id = "ui-id-" + ++t)
                })
            }
        }(),
        removeUniqueId: function() {
            return this.each(function() {
                /^ui-id-\d+$/.test(this.id) && t(this).removeAttr("id")
            })
        }
    }), t.extend(t.expr[":"], {
        data: t.expr.createPseudo ? t.expr.createPseudo(function(e) {
            return function(i) {
                return !!t.data(i, e)
            }
        }) : function(e, i, s) {
            return !!t.data(e, s[3])
        },
        focusable: function(i) {
            return e(i, !isNaN(t.attr(i, "tabindex")))
        },
        tabbable: function(i) {
            var s = t.attr(i, "tabindex"),
                n = isNaN(s);
            return (n || s >= 0) && e(i, !n)
        }
    }), t("<a>").outerWidth(1).jquery || t.each(["Width", "Height"], function(e, i) {
        function s(e, i, s, o) {
            return t.each(n, function() {
                i -= parseFloat(t.css(e, "padding" + this)) || 0, s && (i -= parseFloat(t.css(e, "border" + this + "Width")) || 0), o && (i -= parseFloat(t.css(e, "margin" + this)) || 0)
            }), i
        }
        var n = "Width" === i ? ["Left", "Right"] : ["Top", "Bottom"],
            o = i.toLowerCase(),
            a = {
                innerWidth: t.fn.innerWidth,
                innerHeight: t.fn.innerHeight,
                outerWidth: t.fn.outerWidth,
                outerHeight: t.fn.outerHeight
            };
        t.fn["inner" + i] = function(e) {
            return void 0 === e ? a["inner" + i].call(this) : this.each(function() {
                t(this).css(o, s(this, e) + "px")
            })
        }, t.fn["outer" + i] = function(e, n) {
            return "number" != typeof e ? a["outer" + i].call(this, e) : this.each(function() {
                t(this).css(o, s(this, e, !0, n) + "px")
            })
        }
    }), t.fn.addBack || (t.fn.addBack = function(t) {
        return this.add(null == t ? this.prevObject : this.prevObject.filter(t))
    }), t("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (t.fn.removeData = function(e) {
        return function(i) {
            return arguments.length ? e.call(this, t.camelCase(i)) : e.call(this)
        }
    }(t.fn.removeData)), t.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), t.fn.extend({
        focus: function(e) {
            return function(i, s) {
                return "number" == typeof i ? this.each(function() {
                    var e = this;
                    setTimeout(function() {
                        t(e).focus(), s && s.call(e)
                    }, i)
                }) : e.apply(this, arguments)
            }
        }(t.fn.focus),
        disableSelection: function() {
            var t = "onselectstart" in document.createElement("div") ? "selectstart" : "mousedown";
            return function() {
                return this.bind(t + ".ui-disableSelection", function(t) {
                    t.preventDefault()
                })
            }
        }(),
        enableSelection: function() {
            return this.unbind(".ui-disableSelection")
        },
        zIndex: function(e) {
            if (void 0 !== e) return this.css("zIndex", e);
            if (this.length)
                for (var i, s, n = t(this[0]); n.length && n[0] !== document;) {
                    if (i = n.css("position"), ("absolute" === i || "relative" === i || "fixed" === i) && (s = parseInt(n.css("zIndex"), 10), !isNaN(s) && 0 !== s)) return s;
                    n = n.parent()
                }
            return 0
        }
    }), t.ui.plugin = {
        add: function(e, i, s) {
            var n, o = t.ui[e].prototype;
            for (n in s) o.plugins[n] = o.plugins[n] || [], o.plugins[n].push([i, s[n]])
        },
        call: function(t, e, i, s) {
            var n, o = t.plugins[e];
            if (o && (s || t.element[0].parentNode && 11 !== t.element[0].parentNode.nodeType))
                for (n = 0; o.length > n; n++) t.options[o[n][0]] && o[n][1].apply(t.element, i)
        }
    };
    var h = 0,
        l = Array.prototype.slice;
    t.cleanData = function(e) {
        return function(i) {
            var s, n, o;
            for (o = 0; null != (n = i[o]); o++) try {
                s = t._data(n, "events"), s && s.remove && t(n).triggerHandler("remove")
            } catch (a) {}
            e(i)
        }
    }(t.cleanData), t.widget = function(e, i, s) {
        var n, o, a, r, h = {},
            l = e.split(".")[0];
        return e = e.split(".")[1], n = l + "-" + e, s || (s = i, i = t.Widget), t.expr[":"][n.toLowerCase()] = function(e) {
            return !!t.data(e, n)
        }, t[l] = t[l] || {}, o = t[l][e], a = t[l][e] = function(t, e) {
            return this._createWidget ? void(arguments.length && this._createWidget(t, e)) : new a(t, e)
        }, t.extend(a, o, {
            version: s.version,
            _proto: t.extend({}, s),
            _childConstructors: []
        }), r = new i, r.options = t.widget.extend({}, r.options), t.each(s, function(e, s) {
            return t.isFunction(s) ? void(h[e] = function() {
                var t = function() {
                        return i.prototype[e].apply(this, arguments)
                    },
                    n = function(t) {
                        return i.prototype[e].apply(this, t)
                    };
                return function() {
                    var e, i = this._super,
                        o = this._superApply;
                    return this._super = t, this._superApply = n, e = s.apply(this, arguments), this._super = i, this._superApply = o, e
                }
            }()) : void(h[e] = s)
        }), a.prototype = t.widget.extend(r, {
            widgetEventPrefix: o ? r.widgetEventPrefix || e : e
        }, h, {
            constructor: a,
            namespace: l,
            widgetName: e,
            widgetFullName: n
        }), o ? (t.each(o._childConstructors, function(e, i) {
            var s = i.prototype;
            t.widget(s.namespace + "." + s.widgetName, a, i._proto)
        }), delete o._childConstructors) : i._childConstructors.push(a), t.widget.bridge(e, a), a
    }, t.widget.extend = function(e) {
        for (var i, s, n = l.call(arguments, 1), o = 0, a = n.length; a > o; o++)
            for (i in n[o]) s = n[o][i], n[o].hasOwnProperty(i) && void 0 !== s && (e[i] = t.isPlainObject(s) ? t.isPlainObject(e[i]) ? t.widget.extend({}, e[i], s) : t.widget.extend({}, s) : s);
        return e
    }, t.widget.bridge = function(e, i) {
        var s = i.prototype.widgetFullName || e;
        t.fn[e] = function(n) {
            var o = "string" == typeof n,
                a = l.call(arguments, 1),
                r = this;
            return o ? this.each(function() {
                var i, o = t.data(this, s);
                return "instance" === n ? (r = o, !1) : o ? t.isFunction(o[n]) && "_" !== n.charAt(0) ? (i = o[n].apply(o, a), i !== o && void 0 !== i ? (r = i && i.jquery ? r.pushStack(i.get()) : i, !1) : void 0) : t.error("no such method '" + n + "' for " + e + " widget instance") : t.error("cannot call methods on " + e + " prior to initialization; attempted to call method '" + n + "'")
            }) : (a.length && (n = t.widget.extend.apply(null, [n].concat(a))), this.each(function() {
                var e = t.data(this, s);
                e ? (e.option(n || {}), e._init && e._init()) : t.data(this, s, new i(n, this))
            })), r
        }
    }, t.Widget = function() {}, t.Widget._childConstructors = [], t.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {
            disabled: !1,
            create: null
        },
        _createWidget: function(e, i) {
            i = t(i || this.defaultElement || this)[0], this.element = t(i), this.uuid = h++, this.eventNamespace = "." + this.widgetName + this.uuid, this.bindings = t(), this.hoverable = t(), this.focusable = t(), i !== this && (t.data(i, this.widgetFullName, this), this._on(!0, this.element, {
                remove: function(t) {
                    t.target === i && this.destroy()
                }
            }), this.document = t(i.style ? i.ownerDocument : i.document || i), this.window = t(this.document[0].defaultView || this.document[0].parentWindow)), this.options = t.widget.extend({}, this.options, this._getCreateOptions(), e), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init()
        },
        _getCreateOptions: t.noop,
        _getCreateEventData: t.noop,
        _create: t.noop,
        _init: t.noop,
        destroy: function() {
            this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")
        },
        _destroy: t.noop,
        widget: function() {
            return this.element
        },
        option: function(e, i) {
            var s, n, o, a = e;
            if (0 === arguments.length) return t.widget.extend({}, this.options);
            if ("string" == typeof e)
                if (a = {}, s = e.split("."), e = s.shift(), s.length) {
                    for (n = a[e] = t.widget.extend({}, this.options[e]), o = 0; s.length - 1 > o; o++) n[s[o]] = n[s[o]] || {}, n = n[s[o]];
                    if (e = s.pop(), 1 === arguments.length) return void 0 === n[e] ? null : n[e];
                    n[e] = i
                } else {
                    if (1 === arguments.length) return void 0 === this.options[e] ? null : this.options[e];
                    a[e] = i
                }
            return this._setOptions(a), this
        },
        _setOptions: function(t) {
            var e;
            for (e in t) this._setOption(e, t[e]);
            return this
        },
        _setOption: function(t, e) {
            return this.options[t] = e, "disabled" === t && (this.widget().toggleClass(this.widgetFullName + "-disabled", !!e), e && (this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus"))), this
        },
        enable: function() {
            return this._setOptions({
                disabled: !1
            })
        },
        disable: function() {
            return this._setOptions({
                disabled: !0
            })
        },
        _on: function(e, i, s) {
            var n, o = this;
            "boolean" != typeof e && (s = i, i = e, e = !1), s ? (i = n = t(i), this.bindings = this.bindings.add(i)) : (s = i, i = this.element, n = this.widget()), t.each(s, function(s, a) {
                function r() {
                    return e || o.options.disabled !== !0 && !t(this).hasClass("ui-state-disabled") ? ("string" == typeof a ? o[a] : a).apply(o, arguments) : void 0
                }
                "string" != typeof a && (r.guid = a.guid = a.guid || r.guid || t.guid++);
                var h = s.match(/^([\w:-]*)\s*(.*)$/),
                    l = h[1] + o.eventNamespace,
                    c = h[2];
                c ? n.delegate(c, l, r) : i.bind(l, r)
            })
        },
        _off: function(e, i) {
            i = (i || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, e.unbind(i).undelegate(i), this.bindings = t(this.bindings.not(e).get()), this.focusable = t(this.focusable.not(e).get()), this.hoverable = t(this.hoverable.not(e).get())
        },
        _delay: function(t, e) {
            function i() {
                return ("string" == typeof t ? s[t] : t).apply(s, arguments)
            }
            var s = this;
            return setTimeout(i, e || 0)
        },
        _hoverable: function(e) {
            this.hoverable = this.hoverable.add(e), this._on(e, {
                mouseenter: function(e) {
                    t(e.currentTarget).addClass("ui-state-hover")
                },
                mouseleave: function(e) {
                    t(e.currentTarget).removeClass("ui-state-hover")
                }
            })
        },
        _focusable: function(e) {
            this.focusable = this.focusable.add(e), this._on(e, {
                focusin: function(e) {
                    t(e.currentTarget).addClass("ui-state-focus")
                },
                focusout: function(e) {
                    t(e.currentTarget).removeClass("ui-state-focus")
                }
            })
        },
        _trigger: function(e, i, s) {
            var n, o, a = this.options[e];
            if (s = s || {}, i = t.Event(i), i.type = (e === this.widgetEventPrefix ? e : this.widgetEventPrefix + e).toLowerCase(), i.target = this.element[0], o = i.originalEvent)
                for (n in o) n in i || (i[n] = o[n]);
            return this.element.trigger(i, s), !(t.isFunction(a) && a.apply(this.element[0], [i].concat(s)) === !1 || i.isDefaultPrevented())
        }
    }, t.each({
        show: "fadeIn",
        hide: "fadeOut"
    }, function(e, i) {
        t.Widget.prototype["_" + e] = function(s, n, o) {
            "string" == typeof n && (n = {
                effect: n
            });
            var a, r = n ? n === !0 || "number" == typeof n ? i : n.effect || i : e;
            n = n || {}, "number" == typeof n && (n = {
                duration: n
            }), a = !t.isEmptyObject(n), n.complete = o, n.delay && s.delay(n.delay), a && t.effects && t.effects.effect[r] ? s[e](n) : r !== e && s[r] ? s[r](n.duration, n.easing, o) : s.queue(function(i) {
                t(this)[e](), o && o.call(s[0]), i()
            })
        }
    }), t.widget;
    var c = !1;
    t(document).mouseup(function() {
            c = !1
        }), t.widget("ui.mouse", {
            version: "1.11.4",
            options: {
                cancel: "input,textarea,button,select,option",
                distance: 1,
                delay: 0
            },
            _mouseInit: function() {
                var e = this;
                this.element.bind("mousedown." + this.widgetName, function(t) {
                    return e._mouseDown(t)
                }).bind("click." + this.widgetName, function(i) {
                    return !0 === t.data(i.target, e.widgetName + ".preventClickEvent") ? (t.removeData(i.target, e.widgetName + ".preventClickEvent"), i.stopImmediatePropagation(), !1) : void 0
                }), this.started = !1
            },
            _mouseDestroy: function() {
                this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
            },
            _mouseDown: function(e) {
                if (!c) {
                    this._mouseMoved = !1, this._mouseStarted && this._mouseUp(e), this._mouseDownEvent = e;
                    var i = this,
                        s = 1 === e.which,
                        n = "string" == typeof this.options.cancel && e.target.nodeName ? t(e.target).closest(this.options.cancel).length : !1;
                    return s && !n && this._mouseCapture(e) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                        i.mouseDelayMet = !0
                    }, this.options.delay)), this._mouseDistanceMet(e) && this._mouseDelayMet(e) && (this._mouseStarted = this._mouseStart(e) !== !1, !this._mouseStarted) ? (e.preventDefault(), !0) : (!0 === t.data(e.target, this.widgetName + ".preventClickEvent") && t.removeData(e.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function(t) {
                        return i._mouseMove(t)
                    }, this._mouseUpDelegate = function(t) {
                        return i._mouseUp(t)
                    }, this.document.bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), e.preventDefault(), c = !0, !0)) : !0
                }
            },
            _mouseMove: function(e) {
                if (this._mouseMoved) {
                    if (t.ui.ie && (!document.documentMode || 9 > document.documentMode) && !e.button) return this._mouseUp(e);
                    if (!e.which) return this._mouseUp(e)
                }
                return (e.which || e.button) && (this._mouseMoved = !0), this._mouseStarted ? (this._mouseDrag(e), e.preventDefault()) : (this._mouseDistanceMet(e) && this._mouseDelayMet(e) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, e) !== !1, this._mouseStarted ? this._mouseDrag(e) : this._mouseUp(e)), !this._mouseStarted)
            },
            _mouseUp: function(e) {
                return this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, e.target === this._mouseDownEvent.target && t.data(e.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(e)), c = !1, !1
            },
            _mouseDistanceMet: function(t) {
                return Math.max(Math.abs(this._mouseDownEvent.pageX - t.pageX), Math.abs(this._mouseDownEvent.pageY - t.pageY)) >= this.options.distance
            },
            _mouseDelayMet: function() {
                return this.mouseDelayMet
            },
            _mouseStart: function() {},
            _mouseDrag: function() {},
            _mouseStop: function() {},
            _mouseCapture: function() {
                return !0
            }
        }),
        function() {
            function e(t, e, i) {
                return [parseFloat(t[0]) * (u.test(t[0]) ? e / 100 : 1), parseFloat(t[1]) * (u.test(t[1]) ? i / 100 : 1)]
            }

            function i(e, i) {
                return parseInt(t.css(e, i), 10) || 0
            }

            function s(e) {
                var i = e[0];
                return 9 === i.nodeType ? {
                    width: e.width(),
                    height: e.height(),
                    offset: {
                        top: 0,
                        left: 0
                    }
                } : t.isWindow(i) ? {
                    width: e.width(),
                    height: e.height(),
                    offset: {
                        top: e.scrollTop(),
                        left: e.scrollLeft()
                    }
                } : i.preventDefault ? {
                    width: 0,
                    height: 0,
                    offset: {
                        top: i.pageY,
                        left: i.pageX
                    }
                } : {
                    width: e.outerWidth(),
                    height: e.outerHeight(),
                    offset: e.offset()
                }
            }
            t.ui = t.ui || {};
            var n, o, a = Math.max,
                r = Math.abs,
                h = Math.round,
                l = /left|center|right/,
                c = /top|center|bottom/,
                d = /[\+\-]\d+(\.[\d]+)?%?/,
                p = /^\w+/,
                u = /%$/,
                f = t.fn.position;
            t.position = {
                    scrollbarWidth: function() {
                        if (void 0 !== n) return n;
                        var e, i, s = t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
                            o = s.children()[0];
                        return t("body").append(s), e = o.offsetWidth, s.css("overflow", "scroll"), i = o.offsetWidth, e === i && (i = s[0].clientWidth), s.remove(), n = e - i
                    },
                    getScrollInfo: function(e) {
                        var i = e.isWindow || e.isDocument ? "" : e.element.css("overflow-x"),
                            s = e.isWindow || e.isDocument ? "" : e.element.css("overflow-y"),
                            n = "scroll" === i || "auto" === i && e.width < e.element[0].scrollWidth,
                            o = "scroll" === s || "auto" === s && e.height < e.element[0].scrollHeight;
                        return {
                            width: o ? t.position.scrollbarWidth() : 0,
                            height: n ? t.position.scrollbarWidth() : 0
                        }
                    },
                    getWithinInfo: function(e) {
                        var i = t(e || window),
                            s = t.isWindow(i[0]),
                            n = !!i[0] && 9 === i[0].nodeType;
                        return {
                            element: i,
                            isWindow: s,
                            isDocument: n,
                            offset: i.offset() || {
                                left: 0,
                                top: 0
                            },
                            scrollLeft: i.scrollLeft(),
                            scrollTop: i.scrollTop(),
                            width: s || n ? i.width() : i.outerWidth(),
                            height: s || n ? i.height() : i.outerHeight()
                        }
                    }
                }, t.fn.position = function(n) {
                    if (!n || !n.of) return f.apply(this, arguments);
                    n = t.extend({}, n);
                    var u, g, m, _, v, y, b = t(n.of),
                        w = t.position.getWithinInfo(n.within),
                        k = t.position.getScrollInfo(w),
                        D = (n.collision || "flip").split(" "),
                        x = {};
                    return y = s(b), b[0].preventDefault && (n.at = "left top"), g = y.width, m = y.height, _ = y.offset, v = t.extend({}, _), t.each(["my", "at"], function() {
                        var t, e, i = (n[this] || "").split(" ");
                        1 === i.length && (i = l.test(i[0]) ? i.concat(["center"]) : c.test(i[0]) ? ["center"].concat(i) : ["center", "center"]), i[0] = l.test(i[0]) ? i[0] : "center", i[1] = c.test(i[1]) ? i[1] : "center", t = d.exec(i[0]), e = d.exec(i[1]), x[this] = [t ? t[0] : 0, e ? e[0] : 0], n[this] = [p.exec(i[0])[0], p.exec(i[1])[0]]
                    }), 1 === D.length && (D[1] = D[0]), "right" === n.at[0] ? v.left += g : "center" === n.at[0] && (v.left += g / 2), "bottom" === n.at[1] ? v.top += m : "center" === n.at[1] && (v.top += m / 2), u = e(x.at, g, m), v.left += u[0], v.top += u[1], this.each(function() {
                        var s, l, c = t(this),
                            d = c.outerWidth(),
                            p = c.outerHeight(),
                            f = i(this, "marginLeft"),
                            y = i(this, "marginTop"),
                            C = d + f + i(this, "marginRight") + k.width,
                            P = p + y + i(this, "marginBottom") + k.height,
                            I = t.extend({}, v),
                            M = e(x.my, c.outerWidth(), c.outerHeight());
                        "right" === n.my[0] ? I.left -= d : "center" === n.my[0] && (I.left -= d / 2), "bottom" === n.my[1] ? I.top -= p : "center" === n.my[1] && (I.top -= p / 2), I.left += M[0], I.top += M[1], o || (I.left = h(I.left), I.top = h(I.top)), s = {
                            marginLeft: f,
                            marginTop: y
                        }, t.each(["left", "top"], function(e, i) {
                            t.ui.position[D[e]] && t.ui.position[D[e]][i](I, {
                                targetWidth: g,
                                targetHeight: m,
                                elemWidth: d,
                                elemHeight: p,
                                collisionPosition: s,
                                collisionWidth: C,
                                collisionHeight: P,
                                offset: [u[0] + M[0], u[1] + M[1]],
                                my: n.my,
                                at: n.at,
                                within: w,
                                elem: c
                            })
                        }), n.using && (l = function(t) {
                            var e = _.left - I.left,
                                i = e + g - d,
                                s = _.top - I.top,
                                o = s + m - p,
                                h = {
                                    target: {
                                        element: b,
                                        left: _.left,
                                        top: _.top,
                                        width: g,
                                        height: m
                                    },
                                    element: {
                                        element: c,
                                        left: I.left,
                                        top: I.top,
                                        width: d,
                                        height: p
                                    },
                                    horizontal: 0 > i ? "left" : e > 0 ? "right" : "center",
                                    vertical: 0 > o ? "top" : s > 0 ? "bottom" : "middle"
                                };
                            d > g && g > r(e + i) && (h.horizontal = "center"), p > m && m > r(s + o) && (h.vertical = "middle"), h.important = a(r(e), r(i)) > a(r(s), r(o)) ? "horizontal" : "vertical", n.using.call(this, t, h)
                        }), c.offset(t.extend(I, {
                            using: l
                        }))
                    })
                }, t.ui.position = {
                    fit: {
                        left: function(t, e) {
                            var i, s = e.within,
                                n = s.isWindow ? s.scrollLeft : s.offset.left,
                                o = s.width,
                                r = t.left - e.collisionPosition.marginLeft,
                                h = n - r,
                                l = r + e.collisionWidth - o - n;
                            e.collisionWidth > o ? h > 0 && 0 >= l ? (i = t.left + h + e.collisionWidth - o - n, t.left += h - i) : t.left = l > 0 && 0 >= h ? n : h > l ? n + o - e.collisionWidth : n : h > 0 ? t.left += h : l > 0 ? t.left -= l : t.left = a(t.left - r, t.left)
                        },
                        top: function(t, e) {
                            var i, s = e.within,
                                n = s.isWindow ? s.scrollTop : s.offset.top,
                                o = e.within.height,
                                r = t.top - e.collisionPosition.marginTop,
                                h = n - r,
                                l = r + e.collisionHeight - o - n;
                            e.collisionHeight > o ? h > 0 && 0 >= l ? (i = t.top + h + e.collisionHeight - o - n, t.top += h - i) : t.top = l > 0 && 0 >= h ? n : h > l ? n + o - e.collisionHeight : n : h > 0 ? t.top += h : l > 0 ? t.top -= l : t.top = a(t.top - r, t.top)
                        }
                    },
                    flip: {
                        left: function(t, e) {
                            var i, s, n = e.within,
                                o = n.offset.left + n.scrollLeft,
                                a = n.width,
                                h = n.isWindow ? n.scrollLeft : n.offset.left,
                                l = t.left - e.collisionPosition.marginLeft,
                                c = l - h,
                                d = l + e.collisionWidth - a - h,
                                p = "left" === e.my[0] ? -e.elemWidth : "right" === e.my[0] ? e.elemWidth : 0,
                                u = "left" === e.at[0] ? e.targetWidth : "right" === e.at[0] ? -e.targetWidth : 0,
                                f = -2 * e.offset[0];
                            0 > c ? (i = t.left + p + u + f + e.collisionWidth - a - o, (0 > i || r(c) > i) && (t.left += p + u + f)) : d > 0 && (s = t.left - e.collisionPosition.marginLeft + p + u + f - h, (s > 0 || d > r(s)) && (t.left += p + u + f))
                        },
                        top: function(t, e) {
                            var i, s, n = e.within,
                                o = n.offset.top + n.scrollTop,
                                a = n.height,
                                h = n.isWindow ? n.scrollTop : n.offset.top,
                                l = t.top - e.collisionPosition.marginTop,
                                c = l - h,
                                d = l + e.collisionHeight - a - h,
                                p = "top" === e.my[1],
                                u = p ? -e.elemHeight : "bottom" === e.my[1] ? e.elemHeight : 0,
                                f = "top" === e.at[1] ? e.targetHeight : "bottom" === e.at[1] ? -e.targetHeight : 0,
                                g = -2 * e.offset[1];
                            0 > c ? (s = t.top + u + f + g + e.collisionHeight - a - o, (0 > s || r(c) > s) && (t.top += u + f + g)) : d > 0 && (i = t.top - e.collisionPosition.marginTop + u + f + g - h, (i > 0 || d > r(i)) && (t.top += u + f + g))
                        }
                    },
                    flipfit: {
                        left: function() {
                            t.ui.position.flip.left.apply(this, arguments), t.ui.position.fit.left.apply(this, arguments)
                        },
                        top: function() {
                            t.ui.position.flip.top.apply(this, arguments), t.ui.position.fit.top.apply(this, arguments)
                        }
                    }
                },
                function() {
                    var e, i, s, n, a, r = document.getElementsByTagName("body")[0],
                        h = document.createElement("div");
                    e = document.createElement(r ? "div" : "body"), s = {
                        visibility: "hidden",
                        width: 0,
                        height: 0,
                        border: 0,
                        margin: 0,
                        background: "none"
                    }, r && t.extend(s, {
                        position: "absolute",
                        left: "-1000px",
                        top: "-1000px"
                    });
                    for (a in s) e.style[a] = s[a];
                    e.appendChild(h), i = r || document.documentElement, i.insertBefore(e, i.firstChild), h.style.cssText = "position: absolute; left: 10.7432222px;", n = t(h).offset().left, o = n > 10 && 11 > n, e.innerHTML = "", i.removeChild(e)
                }()
        }(), t.ui.position, t.widget("ui.draggable", t.ui.mouse, {
            version: "1.11.4",
            widgetEventPrefix: "drag",
            options: {
                addClasses: !0,
                appendTo: "parent",
                axis: !1,
                connectToSortable: !1,
                containment: !1,
                cursor: "auto",
                cursorAt: !1,
                grid: !1,
                handle: !1,
                helper: "original",
                iframeFix: !1,
                opacity: !1,
                refreshPositions: !1,
                revert: !1,
                revertDuration: 500,
                scope: "default",
                scroll: !0,
                scrollSensitivity: 20,
                scrollSpeed: 20,
                snap: !1,
                snapMode: "both",
                snapTolerance: 20,
                stack: !1,
                zIndex: !1,
                drag: null,
                start: null,
                stop: null
            },
            _create: function() {
                "original" === this.options.helper && this._setPositionRelative(), this.options.addClasses && this.element.addClass("ui-draggable"), this.options.disabled && this.element.addClass("ui-draggable-disabled"), this._setHandleClassName(), this._mouseInit()
            },
            _setOption: function(t, e) {
                this._super(t, e), "handle" === t && (this._removeHandleClassName(), this._setHandleClassName())
            },
            _destroy: function() {
                return (this.helper || this.element).is(".ui-draggable-dragging") ? void(this.destroyOnClear = !0) : (this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), this._removeHandleClassName(), void this._mouseDestroy())
            },
            _mouseCapture: function(e) {
                var i = this.options;
                return this._blurActiveElement(e), this.helper || i.disabled || t(e.target).closest(".ui-resizable-handle").length > 0 ? !1 : (this.handle = this._getHandle(e), this.handle ? (this._blockFrames(i.iframeFix === !0 ? "iframe" : i.iframeFix), !0) : !1)
            },
            _blockFrames: function(e) {
                this.iframeBlocks = this.document.find(e).map(function() {
                    var e = t(this);
                    return t("<div>").css("position", "absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]
                })
            },
            _unblockFrames: function() {
                this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
            },
            _blurActiveElement: function(e) {
                var i = this.document[0];
                if (this.handleElement.is(e.target)) try {
                    i.activeElement && "body" !== i.activeElement.nodeName.toLowerCase() && t(i.activeElement).blur()
                } catch (s) {}
            },
            _mouseStart: function(e) {
                var i = this.options;
                return this.helper = this._createHelper(e), this.helper.addClass("ui-draggable-dragging"), this._cacheHelperProportions(), t.ui.ddmanager && (t.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(!0), this.offsetParent = this.helper.offsetParent(), this.hasFixedAncestor = this.helper.parents().filter(function() {
                    return "fixed" === t(this).css("position")
                }).length > 0, this.positionAbs = this.element.offset(), this._refreshOffsets(e), this.originalPosition = this.position = this._generatePosition(e, !1), this.originalPageX = e.pageX, this.originalPageY = e.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), this._setContainment(), this._trigger("start", e) === !1 ? (this._clear(), !1) : (this._cacheHelperProportions(), t.ui.ddmanager && !i.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e), this._normalizeRightBottom(), this._mouseDrag(e, !0), t.ui.ddmanager && t.ui.ddmanager.dragStart(this, e), !0)
            },
            _refreshOffsets: function(t) {
                this.offset = {
                    top: this.positionAbs.top - this.margins.top,
                    left: this.positionAbs.left - this.margins.left,
                    scroll: !1,
                    parent: this._getParentOffset(),
                    relative: this._getRelativeOffset()
                }, this.offset.click = {
                    left: t.pageX - this.offset.left,
                    top: t.pageY - this.offset.top
                }
            },
            _mouseDrag: function(e, i) {
                if (this.hasFixedAncestor && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(e, !0), this.positionAbs = this._convertPositionTo("absolute"), !i) {
                    var s = this._uiHash();
                    if (this._trigger("drag", e, s) === !1) return this._mouseUp({}), !1;
                    this.position = s.position
                }
                return this.helper[0].style.left = this.position.left + "px", this.helper[0].style.top = this.position.top + "px", t.ui.ddmanager && t.ui.ddmanager.drag(this, e), !1
            },
            _mouseStop: function(e) {
                var i = this,
                    s = !1;
                return t.ui.ddmanager && !this.options.dropBehaviour && (s = t.ui.ddmanager.drop(this, e)), this.dropped && (s = this.dropped, this.dropped = !1), "invalid" === this.options.revert && !s || "valid" === this.options.revert && s || this.options.revert === !0 || t.isFunction(this.options.revert) && this.options.revert.call(this.element, s) ? t(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                    i._trigger("stop", e) !== !1 && i._clear()
                }) : this._trigger("stop", e) !== !1 && this._clear(), !1
            },
            _mouseUp: function(e) {
                return this._unblockFrames(), t.ui.ddmanager && t.ui.ddmanager.dragStop(this, e), this.handleElement.is(e.target) && this.element.focus(), t.ui.mouse.prototype._mouseUp.call(this, e)
            },
            cancel: function() {
                return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), this
            },
            _getHandle: function(e) {
                return this.options.handle ? !!t(e.target).closest(this.element.find(this.options.handle)).length : !0
            },
            _setHandleClassName: function() {
                this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element, this.handleElement.addClass("ui-draggable-handle")
            },
            _removeHandleClassName: function() {
                this.handleElement.removeClass("ui-draggable-handle")
            },
            _createHelper: function(e) {
                var i = this.options,
                    s = t.isFunction(i.helper),
                    n = s ? t(i.helper.apply(this.element[0], [e])) : "clone" === i.helper ? this.element.clone().removeAttr("id") : this.element;
                return n.parents("body").length || n.appendTo("parent" === i.appendTo ? this.element[0].parentNode : i.appendTo), s && n[0] === this.element[0] && this._setPositionRelative(), n[0] === this.element[0] || /(fixed|absolute)/.test(n.css("position")) || n.css("position", "absolute"), n
            },
            _setPositionRelative: function() {
                /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative")
            },
            _adjustOffsetFromHelper: function(e) {
                "string" == typeof e && (e = e.split(" ")), t.isArray(e) && (e = {
                    left: +e[0],
                    top: +e[1] || 0
                }), "left" in e && (this.offset.click.left = e.left + this.margins.left), "right" in e && (this.offset.click.left = this.helperProportions.width - e.right + this.margins.left), "top" in e && (this.offset.click.top = e.top + this.margins.top), "bottom" in e && (this.offset.click.top = this.helperProportions.height - e.bottom + this.margins.top)
            },
            _isRootNode: function(t) {
                return /(html|body)/i.test(t.tagName) || t === this.document[0]
            },
            _getParentOffset: function() {
                var e = this.offsetParent.offset(),
                    i = this.document[0];
                return "absolute" === this.cssPosition && this.scrollParent[0] !== i && t.contains(this.scrollParent[0], this.offsetParent[0]) && (e.left += this.scrollParent.scrollLeft(), e.top += this.scrollParent.scrollTop()), this._isRootNode(this.offsetParent[0]) && (e = {
                    top: 0,
                    left: 0
                }), {
                    top: e.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                    left: e.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
                }
            },
            _getRelativeOffset: function() {
                if ("relative" !== this.cssPosition) return {
                    top: 0,
                    left: 0
                };
                var t = this.element.position(),
                    e = this._isRootNode(this.scrollParent[0]);
                return {
                    top: t.top - (parseInt(this.helper.css("top"), 10) || 0) + (e ? 0 : this.scrollParent.scrollTop()),
                    left: t.left - (parseInt(this.helper.css("left"), 10) || 0) + (e ? 0 : this.scrollParent.scrollLeft())
                }
            },
            _cacheMargins: function() {
                this.margins = {
                    left: parseInt(this.element.css("marginLeft"), 10) || 0,
                    top: parseInt(this.element.css("marginTop"), 10) || 0,
                    right: parseInt(this.element.css("marginRight"), 10) || 0,
                    bottom: parseInt(this.element.css("marginBottom"), 10) || 0
                }
            },
            _cacheHelperProportions: function() {
                this.helperProportions = {
                    width: this.helper.outerWidth(),
                    height: this.helper.outerHeight()
                }
            },
            _setContainment: function() {
                var e, i, s, n = this.options,
                    o = this.document[0];
                return this.relativeContainer = null, n.containment ? "window" === n.containment ? void(this.containment = [t(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, t(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, t(window).scrollLeft() + t(window).width() - this.helperProportions.width - this.margins.left, t(window).scrollTop() + (t(window).height() || o.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]) : "document" === n.containment ? void(this.containment = [0, 0, t(o).width() - this.helperProportions.width - this.margins.left, (t(o).height() || o.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]) : n.containment.constructor === Array ? void(this.containment = n.containment) : ("parent" === n.containment && (n.containment = this.helper[0].parentNode), i = t(n.containment), s = i[0], void(s && (e = /(scroll|auto)/.test(i.css("overflow")), this.containment = [(parseInt(i.css("borderLeftWidth"), 10) || 0) + (parseInt(i.css("paddingLeft"), 10) || 0), (parseInt(i.css("borderTopWidth"), 10) || 0) + (parseInt(i.css("paddingTop"), 10) || 0), (e ? Math.max(s.scrollWidth, s.offsetWidth) : s.offsetWidth) - (parseInt(i.css("borderRightWidth"), 10) || 0) - (parseInt(i.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (e ? Math.max(s.scrollHeight, s.offsetHeight) : s.offsetHeight) - (parseInt(i.css("borderBottomWidth"), 10) || 0) - (parseInt(i.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relativeContainer = i))) : void(this.containment = null)
            },
            _convertPositionTo: function(t, e) {
                e || (e = this.position);
                var i = "absolute" === t ? 1 : -1,
                    s = this._isRootNode(this.scrollParent[0]);
                return {
                    top: e.top + this.offset.relative.top * i + this.offset.parent.top * i - ("fixed" === this.cssPosition ? -this.offset.scroll.top : s ? 0 : this.offset.scroll.top) * i,
                    left: e.left + this.offset.relative.left * i + this.offset.parent.left * i - ("fixed" === this.cssPosition ? -this.offset.scroll.left : s ? 0 : this.offset.scroll.left) * i
                }
            },
            _generatePosition: function(t, e) {
                var i, s, n, o, a = this.options,
                    r = this._isRootNode(this.scrollParent[0]),
                    h = t.pageX,
                    l = t.pageY;
                return r && this.offset.scroll || (this.offset.scroll = {
                    top: this.scrollParent.scrollTop(),
                    left: this.scrollParent.scrollLeft()
                }), e && (this.containment && (this.relativeContainer ? (s = this.relativeContainer.offset(), i = [this.containment[0] + s.left, this.containment[1] + s.top, this.containment[2] + s.left, this.containment[3] + s.top]) : i = this.containment,
                    t.pageX - this.offset.click.left < i[0] && (h = i[0] + this.offset.click.left), t.pageY - this.offset.click.top < i[1] && (l = i[1] + this.offset.click.top), t.pageX - this.offset.click.left > i[2] && (h = i[2] + this.offset.click.left), t.pageY - this.offset.click.top > i[3] && (l = i[3] + this.offset.click.top)), a.grid && (n = a.grid[1] ? this.originalPageY + Math.round((l - this.originalPageY) / a.grid[1]) * a.grid[1] : this.originalPageY, l = i ? n - this.offset.click.top >= i[1] || n - this.offset.click.top > i[3] ? n : n - this.offset.click.top >= i[1] ? n - a.grid[1] : n + a.grid[1] : n, o = a.grid[0] ? this.originalPageX + Math.round((h - this.originalPageX) / a.grid[0]) * a.grid[0] : this.originalPageX, h = i ? o - this.offset.click.left >= i[0] || o - this.offset.click.left > i[2] ? o : o - this.offset.click.left >= i[0] ? o - a.grid[0] : o + a.grid[0] : o), "y" === a.axis && (h = this.originalPageX), "x" === a.axis && (l = this.originalPageY)), {
                    top: l - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.offset.scroll.top : r ? 0 : this.offset.scroll.top),
                    left: h - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.offset.scroll.left : r ? 0 : this.offset.scroll.left)
                }
            },
            _clear: function() {
                this.helper.removeClass("ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), this.helper = null, this.cancelHelperRemoval = !1, this.destroyOnClear && this.destroy()
            },
            _normalizeRightBottom: function() {
                "y" !== this.options.axis && "auto" !== this.helper.css("right") && (this.helper.width(this.helper.width()), this.helper.css("right", "auto")), "x" !== this.options.axis && "auto" !== this.helper.css("bottom") && (this.helper.height(this.helper.height()), this.helper.css("bottom", "auto"))
            },
            _trigger: function(e, i, s) {
                return s = s || this._uiHash(), t.ui.plugin.call(this, e, [i, s, this], !0), /^(drag|start|stop)/.test(e) && (this.positionAbs = this._convertPositionTo("absolute"), s.offset = this.positionAbs), t.Widget.prototype._trigger.call(this, e, i, s)
            },
            plugins: {},
            _uiHash: function() {
                return {
                    helper: this.helper,
                    position: this.position,
                    originalPosition: this.originalPosition,
                    offset: this.positionAbs
                }
            }
        }), t.ui.plugin.add("draggable", "connectToSortable", {
            start: function(e, i, s) {
                var n = t.extend({}, i, {
                    item: s.element
                });
                s.sortables = [], t(s.options.connectToSortable).each(function() {
                    var i = t(this).sortable("instance");
                    i && !i.options.disabled && (s.sortables.push(i), i.refreshPositions(), i._trigger("activate", e, n))
                })
            },
            stop: function(e, i, s) {
                var n = t.extend({}, i, {
                    item: s.element
                });
                s.cancelHelperRemoval = !1, t.each(s.sortables, function() {
                    var t = this;
                    t.isOver ? (t.isOver = 0, s.cancelHelperRemoval = !0, t.cancelHelperRemoval = !1, t._storedCSS = {
                        position: t.placeholder.css("position"),
                        top: t.placeholder.css("top"),
                        left: t.placeholder.css("left")
                    }, t._mouseStop(e), t.options.helper = t.options._helper) : (t.cancelHelperRemoval = !0, t._trigger("deactivate", e, n))
                })
            },
            drag: function(e, i, s) {
                t.each(s.sortables, function() {
                    var n = !1,
                        o = this;
                    o.positionAbs = s.positionAbs, o.helperProportions = s.helperProportions, o.offset.click = s.offset.click, o._intersectsWith(o.containerCache) && (n = !0, t.each(s.sortables, function() {
                        return this.positionAbs = s.positionAbs, this.helperProportions = s.helperProportions, this.offset.click = s.offset.click, this !== o && this._intersectsWith(this.containerCache) && t.contains(o.element[0], this.element[0]) && (n = !1), n
                    })), n ? (o.isOver || (o.isOver = 1, s._parent = i.helper.parent(), o.currentItem = i.helper.appendTo(o.element).data("ui-sortable-item", !0), o.options._helper = o.options.helper, o.options.helper = function() {
                        return i.helper[0]
                    }, e.target = o.currentItem[0], o._mouseCapture(e, !0), o._mouseStart(e, !0, !0), o.offset.click.top = s.offset.click.top, o.offset.click.left = s.offset.click.left, o.offset.parent.left -= s.offset.parent.left - o.offset.parent.left, o.offset.parent.top -= s.offset.parent.top - o.offset.parent.top, s._trigger("toSortable", e), s.dropped = o.element, t.each(s.sortables, function() {
                        this.refreshPositions()
                    }), s.currentItem = s.element, o.fromOutside = s), o.currentItem && (o._mouseDrag(e), i.position = o.position)) : o.isOver && (o.isOver = 0, o.cancelHelperRemoval = !0, o.options._revert = o.options.revert, o.options.revert = !1, o._trigger("out", e, o._uiHash(o)), o._mouseStop(e, !0), o.options.revert = o.options._revert, o.options.helper = o.options._helper, o.placeholder && o.placeholder.remove(), i.helper.appendTo(s._parent), s._refreshOffsets(e), i.position = s._generatePosition(e, !0), s._trigger("fromSortable", e), s.dropped = !1, t.each(s.sortables, function() {
                        this.refreshPositions()
                    }))
                })
            }
        }), t.ui.plugin.add("draggable", "cursor", {
            start: function(e, i, s) {
                var n = t("body"),
                    o = s.options;
                n.css("cursor") && (o._cursor = n.css("cursor")), n.css("cursor", o.cursor)
            },
            stop: function(e, i, s) {
                var n = s.options;
                n._cursor && t("body").css("cursor", n._cursor)
            }
        }), t.ui.plugin.add("draggable", "opacity", {
            start: function(e, i, s) {
                var n = t(i.helper),
                    o = s.options;
                n.css("opacity") && (o._opacity = n.css("opacity")), n.css("opacity", o.opacity)
            },
            stop: function(e, i, s) {
                var n = s.options;
                n._opacity && t(i.helper).css("opacity", n._opacity)
            }
        }), t.ui.plugin.add("draggable", "scroll", {
            start: function(t, e, i) {
                i.scrollParentNotHidden || (i.scrollParentNotHidden = i.helper.scrollParent(!1)), i.scrollParentNotHidden[0] !== i.document[0] && "HTML" !== i.scrollParentNotHidden[0].tagName && (i.overflowOffset = i.scrollParentNotHidden.offset())
            },
            drag: function(e, i, s) {
                var n = s.options,
                    o = !1,
                    a = s.scrollParentNotHidden[0],
                    r = s.document[0];
                a !== r && "HTML" !== a.tagName ? (n.axis && "x" === n.axis || (s.overflowOffset.top + a.offsetHeight - e.pageY < n.scrollSensitivity ? a.scrollTop = o = a.scrollTop + n.scrollSpeed : e.pageY - s.overflowOffset.top < n.scrollSensitivity && (a.scrollTop = o = a.scrollTop - n.scrollSpeed)), n.axis && "y" === n.axis || (s.overflowOffset.left + a.offsetWidth - e.pageX < n.scrollSensitivity ? a.scrollLeft = o = a.scrollLeft + n.scrollSpeed : e.pageX - s.overflowOffset.left < n.scrollSensitivity && (a.scrollLeft = o = a.scrollLeft - n.scrollSpeed))) : (n.axis && "x" === n.axis || (e.pageY - t(r).scrollTop() < n.scrollSensitivity ? o = t(r).scrollTop(t(r).scrollTop() - n.scrollSpeed) : t(window).height() - (e.pageY - t(r).scrollTop()) < n.scrollSensitivity && (o = t(r).scrollTop(t(r).scrollTop() + n.scrollSpeed))), n.axis && "y" === n.axis || (e.pageX - t(r).scrollLeft() < n.scrollSensitivity ? o = t(r).scrollLeft(t(r).scrollLeft() - n.scrollSpeed) : t(window).width() - (e.pageX - t(r).scrollLeft()) < n.scrollSensitivity && (o = t(r).scrollLeft(t(r).scrollLeft() + n.scrollSpeed)))), o !== !1 && t.ui.ddmanager && !n.dropBehaviour && t.ui.ddmanager.prepareOffsets(s, e)
            }
        }), t.ui.plugin.add("draggable", "snap", {
            start: function(e, i, s) {
                var n = s.options;
                s.snapElements = [], t(n.snap.constructor !== String ? n.snap.items || ":data(ui-draggable)" : n.snap).each(function() {
                    var e = t(this),
                        i = e.offset();
                    this !== s.element[0] && s.snapElements.push({
                        item: this,
                        width: e.outerWidth(),
                        height: e.outerHeight(),
                        top: i.top,
                        left: i.left
                    })
                })
            },
            drag: function(e, i, s) {
                var n, o, a, r, h, l, c, d, p, u, f = s.options,
                    g = f.snapTolerance,
                    m = i.offset.left,
                    _ = m + s.helperProportions.width,
                    v = i.offset.top,
                    y = v + s.helperProportions.height;
                for (p = s.snapElements.length - 1; p >= 0; p--) h = s.snapElements[p].left - s.margins.left, l = h + s.snapElements[p].width, c = s.snapElements[p].top - s.margins.top, d = c + s.snapElements[p].height, h - g > _ || m > l + g || c - g > y || v > d + g || !t.contains(s.snapElements[p].item.ownerDocument, s.snapElements[p].item) ? (s.snapElements[p].snapping && s.options.snap.release && s.options.snap.release.call(s.element, e, t.extend(s._uiHash(), {
                    snapItem: s.snapElements[p].item
                })), s.snapElements[p].snapping = !1) : ("inner" !== f.snapMode && (n = g >= Math.abs(c - y), o = g >= Math.abs(d - v), a = g >= Math.abs(h - _), r = g >= Math.abs(l - m), n && (i.position.top = s._convertPositionTo("relative", {
                    top: c - s.helperProportions.height,
                    left: 0
                }).top), o && (i.position.top = s._convertPositionTo("relative", {
                    top: d,
                    left: 0
                }).top), a && (i.position.left = s._convertPositionTo("relative", {
                    top: 0,
                    left: h - s.helperProportions.width
                }).left), r && (i.position.left = s._convertPositionTo("relative", {
                    top: 0,
                    left: l
                }).left)), u = n || o || a || r, "outer" !== f.snapMode && (n = g >= Math.abs(c - v), o = g >= Math.abs(d - y), a = g >= Math.abs(h - m), r = g >= Math.abs(l - _), n && (i.position.top = s._convertPositionTo("relative", {
                    top: c,
                    left: 0
                }).top), o && (i.position.top = s._convertPositionTo("relative", {
                    top: d - s.helperProportions.height,
                    left: 0
                }).top), a && (i.position.left = s._convertPositionTo("relative", {
                    top: 0,
                    left: h
                }).left), r && (i.position.left = s._convertPositionTo("relative", {
                    top: 0,
                    left: l - s.helperProportions.width
                }).left)), !s.snapElements[p].snapping && (n || o || a || r || u) && s.options.snap.snap && s.options.snap.snap.call(s.element, e, t.extend(s._uiHash(), {
                    snapItem: s.snapElements[p].item
                })), s.snapElements[p].snapping = n || o || a || r || u)
            }
        }), t.ui.plugin.add("draggable", "stack", {
            start: function(e, i, s) {
                var n, o = s.options,
                    a = t.makeArray(t(o.stack)).sort(function(e, i) {
                        return (parseInt(t(e).css("zIndex"), 10) || 0) - (parseInt(t(i).css("zIndex"), 10) || 0)
                    });
                a.length && (n = parseInt(t(a[0]).css("zIndex"), 10) || 0, t(a).each(function(e) {
                    t(this).css("zIndex", n + e)
                }), this.css("zIndex", n + a.length))
            }
        }), t.ui.plugin.add("draggable", "zIndex", {
            start: function(e, i, s) {
                var n = t(i.helper),
                    o = s.options;
                n.css("zIndex") && (o._zIndex = n.css("zIndex")), n.css("zIndex", o.zIndex)
            },
            stop: function(e, i, s) {
                var n = s.options;
                n._zIndex && t(i.helper).css("zIndex", n._zIndex)
            }
        }), t.ui.draggable, t.widget("ui.resizable", t.ui.mouse, {
            version: "1.11.4",
            widgetEventPrefix: "resize",
            options: {
                alsoResize: !1,
                animate: !1,
                animateDuration: "slow",
                animateEasing: "swing",
                aspectRatio: !1,
                autoHide: !1,
                containment: !1,
                ghost: !1,
                grid: !1,
                handles: "e,s,se",
                helper: !1,
                maxHeight: null,
                maxWidth: null,
                minHeight: 10,
                minWidth: 10,
                zIndex: 90,
                resize: null,
                start: null,
                stop: null
            },
            _num: function(t) {
                return parseInt(t, 10) || 0
            },
            _isNumber: function(t) {
                return !isNaN(parseInt(t, 10))
            },
            _hasScroll: function(e, i) {
                if ("hidden" === t(e).css("overflow")) return !1;
                var s = i && "left" === i ? "scrollLeft" : "scrollTop",
                    n = !1;
                return e[s] > 0 ? !0 : (e[s] = 1, n = e[s] > 0, e[s] = 0, n)
            },
            _create: function() {
                var e, i, s, n, o, a = this,
                    r = this.options;
                if (this.element.addClass("ui-resizable"), t.extend(this, {
                        _aspectRatio: !!r.aspectRatio,
                        aspectRatio: r.aspectRatio,
                        originalElement: this.element,
                        _proportionallyResizeElements: [],
                        _helper: r.helper || r.ghost || r.animate ? r.helper || "ui-resizable-helper" : null
                    }), this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i) && (this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
                        position: this.element.css("position"),
                        width: this.element.outerWidth(),
                        height: this.element.outerHeight(),
                        top: this.element.css("top"),
                        left: this.element.css("left")
                    })), this.element = this.element.parent().data("ui-resizable", this.element.resizable("instance")), this.elementIsWrapper = !0, this.element.css({
                        marginLeft: this.originalElement.css("marginLeft"),
                        marginTop: this.originalElement.css("marginTop"),
                        marginRight: this.originalElement.css("marginRight"),
                        marginBottom: this.originalElement.css("marginBottom")
                    }), this.originalElement.css({
                        marginLeft: 0,
                        marginTop: 0,
                        marginRight: 0,
                        marginBottom: 0
                    }), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({
                        position: "static",
                        zoom: 1,
                        display: "block"
                    })), this.originalElement.css({
                        margin: this.originalElement.css("margin")
                    }), this._proportionallyResize()), this.handles = r.handles || (t(".ui-resizable-handle", this.element).length ? {
                        n: ".ui-resizable-n",
                        e: ".ui-resizable-e",
                        s: ".ui-resizable-s",
                        w: ".ui-resizable-w",
                        se: ".ui-resizable-se",
                        sw: ".ui-resizable-sw",
                        ne: ".ui-resizable-ne",
                        nw: ".ui-resizable-nw"
                    } : "e,s,se"), this._handles = t(), this.handles.constructor === String)
                    for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"), e = this.handles.split(","), this.handles = {}, i = 0; e.length > i; i++) s = t.trim(e[i]), o = "ui-resizable-" + s, n = t("<div class='ui-resizable-handle " + o + "'></div>"), n.css({
                        zIndex: r.zIndex
                    }), "se" === s && n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[s] = ".ui-resizable-" + s, this.element.append(n);
                this._renderAxis = function(e) {
                    var i, s, n, o;
                    e = e || this.element;
                    for (i in this.handles) this.handles[i].constructor === String ? this.handles[i] = this.element.children(this.handles[i]).first().show() : (this.handles[i].jquery || this.handles[i].nodeType) && (this.handles[i] = t(this.handles[i]), this._on(this.handles[i], {
                        mousedown: a._mouseDown
                    })), this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i) && (s = t(this.handles[i], this.element), o = /sw|ne|nw|se|n|s/.test(i) ? s.outerHeight() : s.outerWidth(), n = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join(""), e.css(n, o), this._proportionallyResize()), this._handles = this._handles.add(this.handles[i])
                }, this._renderAxis(this.element), this._handles = this._handles.add(this.element.find(".ui-resizable-handle")), this._handles.disableSelection(), this._handles.mouseover(function() {
                    a.resizing || (this.className && (n = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), a.axis = n && n[1] ? n[1] : "se")
                }), r.autoHide && (this._handles.hide(), t(this.element).addClass("ui-resizable-autohide").mouseenter(function() {
                    r.disabled || (t(this).removeClass("ui-resizable-autohide"), a._handles.show())
                }).mouseleave(function() {
                    r.disabled || a.resizing || (t(this).addClass("ui-resizable-autohide"), a._handles.hide())
                })), this._mouseInit()
            },
            _destroy: function() {
                this._mouseDestroy();
                var e, i = function(e) {
                    t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()
                };
                return this.elementIsWrapper && (i(this.element), e = this.element, this.originalElement.css({
                    position: e.css("position"),
                    width: e.outerWidth(),
                    height: e.outerHeight(),
                    top: e.css("top"),
                    left: e.css("left")
                }).insertAfter(e), e.remove()), this.originalElement.css("resize", this.originalResizeStyle), i(this.originalElement), this
            },
            _mouseCapture: function(e) {
                var i, s, n = !1;
                for (i in this.handles) s = t(this.handles[i])[0], (s === e.target || t.contains(s, e.target)) && (n = !0);
                return !this.options.disabled && n
            },
            _mouseStart: function(e) {
                var i, s, n, o = this.options,
                    a = this.element;
                return this.resizing = !0, this._renderProxy(), i = this._num(this.helper.css("left")), s = this._num(this.helper.css("top")), o.containment && (i += t(o.containment).scrollLeft() || 0, s += t(o.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = {
                    left: i,
                    top: s
                }, this.size = this._helper ? {
                    width: this.helper.width(),
                    height: this.helper.height()
                } : {
                    width: a.width(),
                    height: a.height()
                }, this.originalSize = this._helper ? {
                    width: a.outerWidth(),
                    height: a.outerHeight()
                } : {
                    width: a.width(),
                    height: a.height()
                }, this.sizeDiff = {
                    width: a.outerWidth() - a.width(),
                    height: a.outerHeight() - a.height()
                }, this.originalPosition = {
                    left: i,
                    top: s
                }, this.originalMousePosition = {
                    left: e.pageX,
                    top: e.pageY
                }, this.aspectRatio = "number" == typeof o.aspectRatio ? o.aspectRatio : this.originalSize.width / this.originalSize.height || 1, n = t(".ui-resizable-" + this.axis).css("cursor"), t("body").css("cursor", "auto" === n ? this.axis + "-resize" : n), a.addClass("ui-resizable-resizing"), this._propagate("start", e), !0
            },
            _mouseDrag: function(e) {
                var i, s, n = this.originalMousePosition,
                    o = this.axis,
                    a = e.pageX - n.left || 0,
                    r = e.pageY - n.top || 0,
                    h = this._change[o];
                return this._updatePrevProperties(), h ? (i = h.apply(this, [e, a, r]), this._updateVirtualBoundaries(e.shiftKey), (this._aspectRatio || e.shiftKey) && (i = this._updateRatio(i, e)), i = this._respectSize(i, e), this._updateCache(i), this._propagate("resize", e), s = this._applyChanges(), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), t.isEmptyObject(s) || (this._updatePrevProperties(), this._trigger("resize", e, this.ui()), this._applyChanges()), !1) : !1
            },
            _mouseStop: function(e) {
                this.resizing = !1;
                var i, s, n, o, a, r, h, l = this.options,
                    c = this;
                return this._helper && (i = this._proportionallyResizeElements, s = i.length && /textarea/i.test(i[0].nodeName), n = s && this._hasScroll(i[0], "left") ? 0 : c.sizeDiff.height, o = s ? 0 : c.sizeDiff.width, a = {
                    width: c.helper.width() - o,
                    height: c.helper.height() - n
                }, r = parseInt(c.element.css("left"), 10) + (c.position.left - c.originalPosition.left) || null, h = parseInt(c.element.css("top"), 10) + (c.position.top - c.originalPosition.top) || null, l.animate || this.element.css(t.extend(a, {
                    top: h,
                    left: r
                })), c.helper.height(c.size.height), c.helper.width(c.size.width), this._helper && !l.animate && this._proportionallyResize()), t("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), this._propagate("stop", e), this._helper && this.helper.remove(), !1
            },
            _updatePrevProperties: function() {
                this.prevPosition = {
                    top: this.position.top,
                    left: this.position.left
                }, this.prevSize = {
                    width: this.size.width,
                    height: this.size.height
                }
            },
            _applyChanges: function() {
                var t = {};
                return this.position.top !== this.prevPosition.top && (t.top = this.position.top + "px"), this.position.left !== this.prevPosition.left && (t.left = this.position.left + "px"), this.size.width !== this.prevSize.width && (t.width = this.size.width + "px"), this.size.height !== this.prevSize.height && (t.height = this.size.height + "px"), this.helper.css(t), t
            },
            _updateVirtualBoundaries: function(t) {
                var e, i, s, n, o, a = this.options;
                o = {
                    minWidth: this._isNumber(a.minWidth) ? a.minWidth : 0,
                    maxWidth: this._isNumber(a.maxWidth) ? a.maxWidth : 1 / 0,
                    minHeight: this._isNumber(a.minHeight) ? a.minHeight : 0,
                    maxHeight: this._isNumber(a.maxHeight) ? a.maxHeight : 1 / 0
                }, (this._aspectRatio || t) && (e = o.minHeight * this.aspectRatio, s = o.minWidth / this.aspectRatio, i = o.maxHeight * this.aspectRatio, n = o.maxWidth / this.aspectRatio, e > o.minWidth && (o.minWidth = e), s > o.minHeight && (o.minHeight = s), o.maxWidth > i && (o.maxWidth = i), o.maxHeight > n && (o.maxHeight = n)), this._vBoundaries = o
            },
            _updateCache: function(t) {
                this.offset = this.helper.offset(), this._isNumber(t.left) && (this.position.left = t.left), this._isNumber(t.top) && (this.position.top = t.top), this._isNumber(t.height) && (this.size.height = t.height), this._isNumber(t.width) && (this.size.width = t.width)
            },
            _updateRatio: function(t) {
                var e = this.position,
                    i = this.size,
                    s = this.axis;
                return this._isNumber(t.height) ? t.width = t.height * this.aspectRatio : this._isNumber(t.width) && (t.height = t.width / this.aspectRatio), "sw" === s && (t.left = e.left + (i.width - t.width), t.top = null), "nw" === s && (t.top = e.top + (i.height - t.height), t.left = e.left + (i.width - t.width)), t
            },
            _respectSize: function(t) {
                var e = this._vBoundaries,
                    i = this.axis,
                    s = this._isNumber(t.width) && e.maxWidth && e.maxWidth < t.width,
                    n = this._isNumber(t.height) && e.maxHeight && e.maxHeight < t.height,
                    o = this._isNumber(t.width) && e.minWidth && e.minWidth > t.width,
                    a = this._isNumber(t.height) && e.minHeight && e.minHeight > t.height,
                    r = this.originalPosition.left + this.originalSize.width,
                    h = this.position.top + this.size.height,
                    l = /sw|nw|w/.test(i),
                    c = /nw|ne|n/.test(i);
                return o && (t.width = e.minWidth), a && (t.height = e.minHeight), s && (t.width = e.maxWidth), n && (t.height = e.maxHeight), o && l && (t.left = r - e.minWidth), s && l && (t.left = r - e.maxWidth), a && c && (t.top = h - e.minHeight), n && c && (t.top = h - e.maxHeight), t.width || t.height || t.left || !t.top ? t.width || t.height || t.top || !t.left || (t.left = null) : t.top = null, t
            },
            _getPaddingPlusBorderDimensions: function(t) {
                for (var e = 0, i = [], s = [t.css("borderTopWidth"), t.css("borderRightWidth"), t.css("borderBottomWidth"), t.css("borderLeftWidth")], n = [t.css("paddingTop"), t.css("paddingRight"), t.css("paddingBottom"), t.css("paddingLeft")]; 4 > e; e++) i[e] = parseInt(s[e], 10) || 0, i[e] += parseInt(n[e], 10) || 0;
                return {
                    height: i[0] + i[2],
                    width: i[1] + i[3]
                }
            },
            _proportionallyResize: function() {
                if (this._proportionallyResizeElements.length)
                    for (var t, e = 0, i = this.helper || this.element; this._proportionallyResizeElements.length > e; e++) t = this._proportionallyResizeElements[e], this.outerDimensions || (this.outerDimensions = this._getPaddingPlusBorderDimensions(t)), t.css({
                        height: i.height() - this.outerDimensions.height || 0,
                        width: i.width() - this.outerDimensions.width || 0
                    })
            },
            _renderProxy: function() {
                var e = this.element,
                    i = this.options;
                this.elementOffset = e.offset(), this._helper ? (this.helper = this.helper || t("<div style='overflow:hidden;'></div>"), this.helper.addClass(this._helper).css({
                    width: this.element.outerWidth() - 1,
                    height: this.element.outerHeight() - 1,
                    position: "absolute",
                    left: this.elementOffset.left + "px",
                    top: this.elementOffset.top + "px",
                    zIndex: ++i.zIndex
                }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element
            },
            _change: {
                e: function(t, e) {
                    return {
                        width: this.originalSize.width + e
                    }
                },
                w: function(t, e) {
                    var i = this.originalSize,
                        s = this.originalPosition;
                    return {
                        left: s.left + e,
                        width: i.width - e
                    }
                },
                n: function(t, e, i) {
                    var s = this.originalSize,
                        n = this.originalPosition;
                    return {
                        top: n.top + i,
                        height: s.height - i
                    }
                },
                s: function(t, e, i) {
                    return {
                        height: this.originalSize.height + i
                    }
                },
                se: function(e, i, s) {
                    return t.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [e, i, s]))
                },
                sw: function(e, i, s) {
                    return t.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [e, i, s]))
                },
                ne: function(e, i, s) {
                    return t.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [e, i, s]))
                },
                nw: function(e, i, s) {
                    return t.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [e, i, s]))
                }
            },
            _propagate: function(e, i) {
                t.ui.plugin.call(this, e, [i, this.ui()]), "resize" !== e && this._trigger(e, i, this.ui())
            },
            plugins: {},
            ui: function() {
                return {
                    originalElement: this.originalElement,
                    element: this.element,
                    helper: this.helper,
                    position: this.position,
                    size: this.size,
                    originalSize: this.originalSize,
                    originalPosition: this.originalPosition
                }
            }
        }), t.ui.plugin.add("resizable", "animate", {
            stop: function(e) {
                var i = t(this).resizable("instance"),
                    s = i.options,
                    n = i._proportionallyResizeElements,
                    o = n.length && /textarea/i.test(n[0].nodeName),
                    a = o && i._hasScroll(n[0], "left") ? 0 : i.sizeDiff.height,
                    r = o ? 0 : i.sizeDiff.width,
                    h = {
                        width: i.size.width - r,
                        height: i.size.height - a
                    },
                    l = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null,
                    c = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null;
                i.element.animate(t.extend(h, c && l ? {
                    top: c,
                    left: l
                } : {}), {
                    duration: s.animateDuration,
                    easing: s.animateEasing,
                    step: function() {
                        var s = {
                            width: parseInt(i.element.css("width"), 10),
                            height: parseInt(i.element.css("height"), 10),
                            top: parseInt(i.element.css("top"), 10),
                            left: parseInt(i.element.css("left"), 10)
                        };
                        n && n.length && t(n[0]).css({
                            width: s.width,
                            height: s.height
                        }), i._updateCache(s), i._propagate("resize", e)
                    }
                })
            }
        }), t.ui.plugin.add("resizable", "containment", {
            start: function() {
                var e, i, s, n, o, a, r, h = t(this).resizable("instance"),
                    l = h.options,
                    c = h.element,
                    d = l.containment,
                    p = d instanceof t ? d.get(0) : /parent/.test(d) ? c.parent().get(0) : d;
                p && (h.containerElement = t(p), /document/.test(d) || d === document ? (h.containerOffset = {
                    left: 0,
                    top: 0
                }, h.containerPosition = {
                    left: 0,
                    top: 0
                }, h.parentData = {
                    element: t(document),
                    left: 0,
                    top: 0,
                    width: t(document).width(),
                    height: t(document).height() || document.body.parentNode.scrollHeight
                }) : (e = t(p), i = [], t(["Top", "Right", "Left", "Bottom"]).each(function(t, s) {
                    i[t] = h._num(e.css("padding" + s))
                }), h.containerOffset = e.offset(), h.containerPosition = e.position(), h.containerSize = {
                    height: e.innerHeight() - i[3],
                    width: e.innerWidth() - i[1]
                }, s = h.containerOffset, n = h.containerSize.height, o = h.containerSize.width, a = h._hasScroll(p, "left") ? p.scrollWidth : o, r = h._hasScroll(p) ? p.scrollHeight : n, h.parentData = {
                    element: p,
                    left: s.left,
                    top: s.top,
                    width: a,
                    height: r
                }))
            },
            resize: function(e) {
                var i, s, n, o, a = t(this).resizable("instance"),
                    r = a.options,
                    h = a.containerOffset,
                    l = a.position,
                    c = a._aspectRatio || e.shiftKey,
                    d = {
                        top: 0,
                        left: 0
                    },
                    p = a.containerElement,
                    u = !0;
                p[0] !== document && /static/.test(p.css("position")) && (d = h), l.left < (a._helper ? h.left : 0) && (a.size.width = a.size.width + (a._helper ? a.position.left - h.left : a.position.left - d.left), c && (a.size.height = a.size.width / a.aspectRatio, u = !1), a.position.left = r.helper ? h.left : 0), l.top < (a._helper ? h.top : 0) && (a.size.height = a.size.height + (a._helper ? a.position.top - h.top : a.position.top), c && (a.size.width = a.size.height * a.aspectRatio, u = !1), a.position.top = a._helper ? h.top : 0), n = a.containerElement.get(0) === a.element.parent().get(0), o = /relative|absolute/.test(a.containerElement.css("position")), n && o ? (a.offset.left = a.parentData.left + a.position.left, a.offset.top = a.parentData.top + a.position.top) : (a.offset.left = a.element.offset().left, a.offset.top = a.element.offset().top), i = Math.abs(a.sizeDiff.width + (a._helper ? a.offset.left - d.left : a.offset.left - h.left)), s = Math.abs(a.sizeDiff.height + (a._helper ? a.offset.top - d.top : a.offset.top - h.top)), i + a.size.width >= a.parentData.width && (a.size.width = a.parentData.width - i, c && (a.size.height = a.size.width / a.aspectRatio, u = !1)), s + a.size.height >= a.parentData.height && (a.size.height = a.parentData.height - s, c && (a.size.width = a.size.height * a.aspectRatio, u = !1)), u || (a.position.left = a.prevPosition.left, a.position.top = a.prevPosition.top, a.size.width = a.prevSize.width, a.size.height = a.prevSize.height)
            },
            stop: function() {
                var e = t(this).resizable("instance"),
                    i = e.options,
                    s = e.containerOffset,
                    n = e.containerPosition,
                    o = e.containerElement,
                    a = t(e.helper),
                    r = a.offset(),
                    h = a.outerWidth() - e.sizeDiff.width,
                    l = a.outerHeight() - e.sizeDiff.height;
                e._helper && !i.animate && /relative/.test(o.css("position")) && t(this).css({
                    left: r.left - n.left - s.left,
                    width: h,
                    height: l
                }), e._helper && !i.animate && /static/.test(o.css("position")) && t(this).css({
                    left: r.left - n.left - s.left,
                    width: h,
                    height: l
                })
            }
        }), t.ui.plugin.add("resizable", "alsoResize", {
            start: function() {
                var e = t(this).resizable("instance"),
                    i = e.options;
                t(i.alsoResize).each(function() {
                    var e = t(this);
                    e.data("ui-resizable-alsoresize", {
                        width: parseInt(e.width(), 10),
                        height: parseInt(e.height(), 10),
                        left: parseInt(e.css("left"), 10),
                        top: parseInt(e.css("top"), 10)
                    })
                })
            },
            resize: function(e, i) {
                var s = t(this).resizable("instance"),
                    n = s.options,
                    o = s.originalSize,
                    a = s.originalPosition,
                    r = {
                        height: s.size.height - o.height || 0,
                        width: s.size.width - o.width || 0,
                        top: s.position.top - a.top || 0,
                        left: s.position.left - a.left || 0
                    };
                t(n.alsoResize).each(function() {
                    var e = t(this),
                        s = t(this).data("ui-resizable-alsoresize"),
                        n = {},
                        o = e.parents(i.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                    t.each(o, function(t, e) {
                        var i = (s[e] || 0) + (r[e] || 0);
                        i && i >= 0 && (n[e] = i || null)
                    }), e.css(n)
                })
            },
            stop: function() {
                t(this).removeData("resizable-alsoresize")
            }
        }), t.ui.plugin.add("resizable", "ghost", {
            start: function() {
                var e = t(this).resizable("instance"),
                    i = e.options,
                    s = e.size;
                e.ghost = e.originalElement.clone(), e.ghost.css({
                    opacity: .25,
                    display: "block",
                    position: "relative",
                    height: s.height,
                    width: s.width,
                    margin: 0,
                    left: 0,
                    top: 0
                }).addClass("ui-resizable-ghost").addClass("string" == typeof i.ghost ? i.ghost : ""), e.ghost.appendTo(e.helper)
            },
            resize: function() {
                var e = t(this).resizable("instance");
                e.ghost && e.ghost.css({
                    position: "relative",
                    height: e.size.height,
                    width: e.size.width
                })
            },
            stop: function() {
                var e = t(this).resizable("instance");
                e.ghost && e.helper && e.helper.get(0).removeChild(e.ghost.get(0))
            }
        }), t.ui.plugin.add("resizable", "grid", {
            resize: function() {
                var e, i = t(this).resizable("instance"),
                    s = i.options,
                    n = i.size,
                    o = i.originalSize,
                    a = i.originalPosition,
                    r = i.axis,
                    h = "number" == typeof s.grid ? [s.grid, s.grid] : s.grid,
                    l = h[0] || 1,
                    c = h[1] || 1,
                    d = Math.round((n.width - o.width) / l) * l,
                    p = Math.round((n.height - o.height) / c) * c,
                    u = o.width + d,
                    f = o.height + p,
                    g = s.maxWidth && u > s.maxWidth,
                    m = s.maxHeight && f > s.maxHeight,
                    _ = s.minWidth && s.minWidth > u,
                    v = s.minHeight && s.minHeight > f;
                s.grid = h, _ && (u += l), v && (f += c), g && (u -= l), m && (f -= c), /^(se|s|e)$/.test(r) ? (i.size.width = u, i.size.height = f) : /^(ne)$/.test(r) ? (i.size.width = u, i.size.height = f, i.position.top = a.top - p) : /^(sw)$/.test(r) ? (i.size.width = u, i.size.height = f, i.position.left = a.left - d) : ((0 >= f - c || 0 >= u - l) && (e = i._getPaddingPlusBorderDimensions(this)), f - c > 0 ? (i.size.height = f, i.position.top = a.top - p) : (f = c - e.height, i.size.height = f, i.position.top = a.top + o.height - f), u - l > 0 ? (i.size.width = u, i.position.left = a.left - d) : (u = l - e.width, i.size.width = u, i.position.left = a.left + o.width - u))
            }
        }), t.ui.resizable, t.widget("ui.sortable", t.ui.mouse, {
            version: "1.11.4",
            widgetEventPrefix: "sort",
            ready: !1,
            options: {
                appendTo: "parent",
                axis: !1,
                connectWith: !1,
                containment: !1,
                cursor: "auto",
                cursorAt: !1,
                dropOnEmpty: !0,
                forcePlaceholderSize: !1,
                forceHelperSize: !1,
                grid: !1,
                handle: !1,
                helper: "original",
                items: "> *",
                opacity: !1,
                placeholder: !1,
                revert: !1,
                scroll: !0,
                scrollSensitivity: 20,
                scrollSpeed: 20,
                scope: "default",
                tolerance: "intersect",
                zIndex: 1e3,
                activate: null,
                beforeStop: null,
                change: null,
                deactivate: null,
                out: null,
                over: null,
                receive: null,
                remove: null,
                sort: null,
                start: null,
                stop: null,
                update: null
            },
            _isOverAxis: function(t, e, i) {
                return t >= e && e + i > t
            },
            _isFloating: function(t) {
                return /left|right/.test(t.css("float")) || /inline|table-cell/.test(t.css("display"))
            },
            _create: function() {
                this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), this.offset = this.element.offset(), this._mouseInit(), this._setHandleClassName(), this.ready = !0
            },
            _setOption: function(t, e) {
                this._super(t, e), "handle" === t && this._setHandleClassName()
            },
            _setHandleClassName: function() {
                this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"), t.each(this.items, function() {
                    (this.instance.options.handle ? this.item.find(this.instance.options.handle) : this.item).addClass("ui-sortable-handle")
                })
            },
            _destroy: function() {
                this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"), this._mouseDestroy();
                for (var t = this.items.length - 1; t >= 0; t--) this.items[t].item.removeData(this.widgetName + "-item");
                return this
            },
            _mouseCapture: function(e, i) {
                var s = null,
                    n = !1,
                    o = this;
                return this.reverting ? !1 : this.options.disabled || "static" === this.options.type ? !1 : (this._refreshItems(e), t(e.target).parents().each(function() {
                    return t.data(this, o.widgetName + "-item") === o ? (s = t(this), !1) : void 0
                }), t.data(e.target, o.widgetName + "-item") === o && (s = t(e.target)), s && (!this.options.handle || i || (t(this.options.handle, s).find("*").addBack().each(function() {
                    this === e.target && (n = !0)
                }), n)) ? (this.currentItem = s, this._removeCurrentsFromItems(), !0) : !1)
            },
            _mouseStart: function(e, i, s) {
                var n, o, a = this.options;
                if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(e), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = {
                        top: this.offset.top - this.margins.top,
                        left: this.offset.left - this.margins.left
                    }, t.extend(this.offset, {
                        click: {
                            left: e.pageX - this.offset.left,
                            top: e.pageY - this.offset.top
                        },
                        parent: this._getParentOffset(),
                        relative: this._getRelativeOffset()
                    }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(e), this.originalPageX = e.pageX, this.originalPageY = e.pageY, a.cursorAt && this._adjustOffsetFromHelper(a.cursorAt), this.domPosition = {
                        prev: this.currentItem.prev()[0],
                        parent: this.currentItem.parent()[0]
                    }, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), a.containment && this._setContainment(), a.cursor && "auto" !== a.cursor && (o = this.document.find("body"), this.storedCursor = o.css("cursor"), o.css("cursor", a.cursor), this.storedStylesheet = t("<style>*{ cursor: " + a.cursor + " !important; }</style>").appendTo(o)), a.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", a.opacity)), a.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", a.zIndex)), this.scrollParent[0] !== this.document[0] && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), this._trigger("start", e, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), !s)
                    for (n = this.containers.length - 1; n >= 0; n--) this.containers[n]._trigger("activate", e, this._uiHash(this));
                return t.ui.ddmanager && (t.ui.ddmanager.current = this), t.ui.ddmanager && !a.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e), this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(e), !0
            },
            _mouseDrag: function(e) {
                var i, s, n, o, a = this.options,
                    r = !1;
                for (this.position = this._generatePosition(e), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== this.document[0] && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - e.pageY < a.scrollSensitivity ? this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop + a.scrollSpeed : e.pageY - this.overflowOffset.top < a.scrollSensitivity && (this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop - a.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - e.pageX < a.scrollSensitivity ? this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft + a.scrollSpeed : e.pageX - this.overflowOffset.left < a.scrollSensitivity && (this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft - a.scrollSpeed)) : (e.pageY - this.document.scrollTop() < a.scrollSensitivity ? r = this.document.scrollTop(this.document.scrollTop() - a.scrollSpeed) : this.window.height() - (e.pageY - this.document.scrollTop()) < a.scrollSensitivity && (r = this.document.scrollTop(this.document.scrollTop() + a.scrollSpeed)),
                        e.pageX - this.document.scrollLeft() < a.scrollSensitivity ? r = this.document.scrollLeft(this.document.scrollLeft() - a.scrollSpeed) : this.window.width() - (e.pageX - this.document.scrollLeft()) < a.scrollSensitivity && (r = this.document.scrollLeft(this.document.scrollLeft() + a.scrollSpeed))), r !== !1 && t.ui.ddmanager && !a.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e)), this.positionAbs = this._convertPositionTo("absolute"), this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), i = this.items.length - 1; i >= 0; i--)
                    if (s = this.items[i], n = s.item[0], o = this._intersectsWithPointer(s), o && s.instance === this.currentContainer && n !== this.currentItem[0] && this.placeholder[1 === o ? "next" : "prev"]()[0] !== n && !t.contains(this.placeholder[0], n) && ("semi-dynamic" === this.options.type ? !t.contains(this.element[0], n) : !0)) {
                        if (this.direction = 1 === o ? "down" : "up", "pointer" !== this.options.tolerance && !this._intersectsWithSides(s)) break;
                        this._rearrange(e, s), this._trigger("change", e, this._uiHash());
                        break
                    }
                return this._contactContainers(e), t.ui.ddmanager && t.ui.ddmanager.drag(this, e), this._trigger("sort", e, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1
            },
            _mouseStop: function(e, i) {
                if (e) {
                    if (t.ui.ddmanager && !this.options.dropBehaviour && t.ui.ddmanager.drop(this, e), this.options.revert) {
                        var s = this,
                            n = this.placeholder.offset(),
                            o = this.options.axis,
                            a = {};
                        o && "x" !== o || (a.left = n.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollLeft)), o && "y" !== o || (a.top = n.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollTop)), this.reverting = !0, t(this.helper).animate(a, parseInt(this.options.revert, 10) || 500, function() {
                            s._clear(e)
                        })
                    } else this._clear(e, i);
                    return !1
                }
            },
            cancel: function() {
                if (this.dragging) {
                    this._mouseUp({
                        target: null
                    }), "original" === this.options.helper ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                    for (var e = this.containers.length - 1; e >= 0; e--) this.containers[e]._trigger("deactivate", null, this._uiHash(this)), this.containers[e].containerCache.over && (this.containers[e]._trigger("out", null, this._uiHash(this)), this.containers[e].containerCache.over = 0)
                }
                return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), t.extend(this, {
                    helper: null,
                    dragging: !1,
                    reverting: !1,
                    _noFinalSort: null
                }), this.domPosition.prev ? t(this.domPosition.prev).after(this.currentItem) : t(this.domPosition.parent).prepend(this.currentItem)), this
            },
            serialize: function(e) {
                var i = this._getItemsAsjQuery(e && e.connected),
                    s = [];
                return e = e || {}, t(i).each(function() {
                    var i = (t(e.item || this).attr(e.attribute || "id") || "").match(e.expression || /(.+)[\-=_](.+)/);
                    i && s.push((e.key || i[1] + "[]") + "=" + (e.key && e.expression ? i[1] : i[2]))
                }), !s.length && e.key && s.push(e.key + "="), s.join("&")
            },
            toArray: function(e) {
                var i = this._getItemsAsjQuery(e && e.connected),
                    s = [];
                return e = e || {}, i.each(function() {
                    s.push(t(e.item || this).attr(e.attribute || "id") || "")
                }), s
            },
            _intersectsWith: function(t) {
                var e = this.positionAbs.left,
                    i = e + this.helperProportions.width,
                    s = this.positionAbs.top,
                    n = s + this.helperProportions.height,
                    o = t.left,
                    a = o + t.width,
                    r = t.top,
                    h = r + t.height,
                    l = this.offset.click.top,
                    c = this.offset.click.left,
                    d = "x" === this.options.axis || s + l > r && h > s + l,
                    p = "y" === this.options.axis || e + c > o && a > e + c,
                    u = d && p;
                return "pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > t[this.floating ? "width" : "height"] ? u : e + this.helperProportions.width / 2 > o && a > i - this.helperProportions.width / 2 && s + this.helperProportions.height / 2 > r && h > n - this.helperProportions.height / 2
            },
            _intersectsWithPointer: function(t) {
                var e = "x" === this.options.axis || this._isOverAxis(this.positionAbs.top + this.offset.click.top, t.top, t.height),
                    i = "y" === this.options.axis || this._isOverAxis(this.positionAbs.left + this.offset.click.left, t.left, t.width),
                    s = e && i,
                    n = this._getDragVerticalDirection(),
                    o = this._getDragHorizontalDirection();
                return s ? this.floating ? o && "right" === o || "down" === n ? 2 : 1 : n && ("down" === n ? 2 : 1) : !1
            },
            _intersectsWithSides: function(t) {
                var e = this._isOverAxis(this.positionAbs.top + this.offset.click.top, t.top + t.height / 2, t.height),
                    i = this._isOverAxis(this.positionAbs.left + this.offset.click.left, t.left + t.width / 2, t.width),
                    s = this._getDragVerticalDirection(),
                    n = this._getDragHorizontalDirection();
                return this.floating && n ? "right" === n && i || "left" === n && !i : s && ("down" === s && e || "up" === s && !e)
            },
            _getDragVerticalDirection: function() {
                var t = this.positionAbs.top - this.lastPositionAbs.top;
                return 0 !== t && (t > 0 ? "down" : "up")
            },
            _getDragHorizontalDirection: function() {
                var t = this.positionAbs.left - this.lastPositionAbs.left;
                return 0 !== t && (t > 0 ? "right" : "left")
            },
            refresh: function(t) {
                return this._refreshItems(t), this._setHandleClassName(), this.refreshPositions(), this
            },
            _connectWith: function() {
                var t = this.options;
                return t.connectWith.constructor === String ? [t.connectWith] : t.connectWith
            },
            _getItemsAsjQuery: function(e) {
                function i() {
                    r.push(this)
                }
                var s, n, o, a, r = [],
                    h = [],
                    l = this._connectWith();
                if (l && e)
                    for (s = l.length - 1; s >= 0; s--)
                        for (o = t(l[s], this.document[0]), n = o.length - 1; n >= 0; n--) a = t.data(o[n], this.widgetFullName), a && a !== this && !a.options.disabled && h.push([t.isFunction(a.options.items) ? a.options.items.call(a.element) : t(a.options.items, a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), a]);
                for (h.push([t.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                        options: this.options,
                        item: this.currentItem
                    }) : t(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]), s = h.length - 1; s >= 0; s--) h[s][0].each(i);
                return t(r)
            },
            _removeCurrentsFromItems: function() {
                var e = this.currentItem.find(":data(" + this.widgetName + "-item)");
                this.items = t.grep(this.items, function(t) {
                    for (var i = 0; e.length > i; i++)
                        if (e[i] === t.item[0]) return !1;
                    return !0
                })
            },
            _refreshItems: function(e) {
                this.items = [], this.containers = [this];
                var i, s, n, o, a, r, h, l, c = this.items,
                    d = [
                        [t.isFunction(this.options.items) ? this.options.items.call(this.element[0], e, {
                            item: this.currentItem
                        }) : t(this.options.items, this.element), this]
                    ],
                    p = this._connectWith();
                if (p && this.ready)
                    for (i = p.length - 1; i >= 0; i--)
                        for (n = t(p[i], this.document[0]), s = n.length - 1; s >= 0; s--) o = t.data(n[s], this.widgetFullName), o && o !== this && !o.options.disabled && (d.push([t.isFunction(o.options.items) ? o.options.items.call(o.element[0], e, {
                            item: this.currentItem
                        }) : t(o.options.items, o.element), o]), this.containers.push(o));
                for (i = d.length - 1; i >= 0; i--)
                    for (a = d[i][1], r = d[i][0], s = 0, l = r.length; l > s; s++) h = t(r[s]), h.data(this.widgetName + "-item", a), c.push({
                        item: h,
                        instance: a,
                        width: 0,
                        height: 0,
                        left: 0,
                        top: 0
                    })
            },
            refreshPositions: function(e) {
                this.floating = this.items.length ? "x" === this.options.axis || this._isFloating(this.items[0].item) : !1, this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
                var i, s, n, o;
                for (i = this.items.length - 1; i >= 0; i--) s = this.items[i], s.instance !== this.currentContainer && this.currentContainer && s.item[0] !== this.currentItem[0] || (n = this.options.toleranceElement ? t(this.options.toleranceElement, s.item) : s.item, e || (s.width = n.outerWidth(), s.height = n.outerHeight()), o = n.offset(), s.left = o.left, s.top = o.top);
                if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this);
                else
                    for (i = this.containers.length - 1; i >= 0; i--) o = this.containers[i].element.offset(), this.containers[i].containerCache.left = o.left, this.containers[i].containerCache.top = o.top, this.containers[i].containerCache.width = this.containers[i].element.outerWidth(), this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
                return this
            },
            _createPlaceholder: function(e) {
                e = e || this;
                var i, s = e.options;
                s.placeholder && s.placeholder.constructor !== String || (i = s.placeholder, s.placeholder = {
                    element: function() {
                        var s = e.currentItem[0].nodeName.toLowerCase(),
                            n = t("<" + s + ">", e.document[0]).addClass(i || e.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper");
                        return "tbody" === s ? e._createTrPlaceholder(e.currentItem.find("tr").eq(0), t("<tr>", e.document[0]).appendTo(n)) : "tr" === s ? e._createTrPlaceholder(e.currentItem, n) : "img" === s && n.attr("src", e.currentItem.attr("src")), i || n.css("visibility", "hidden"), n
                    },
                    update: function(t, n) {
                        (!i || s.forcePlaceholderSize) && (n.height() || n.height(e.currentItem.innerHeight() - parseInt(e.currentItem.css("paddingTop") || 0, 10) - parseInt(e.currentItem.css("paddingBottom") || 0, 10)), n.width() || n.width(e.currentItem.innerWidth() - parseInt(e.currentItem.css("paddingLeft") || 0, 10) - parseInt(e.currentItem.css("paddingRight") || 0, 10)))
                    }
                }), e.placeholder = t(s.placeholder.element.call(e.element, e.currentItem)), e.currentItem.after(e.placeholder), s.placeholder.update(e, e.placeholder)
            },
            _createTrPlaceholder: function(e, i) {
                var s = this;
                e.children().each(function() {
                    t("<td>&#160;</td>", s.document[0]).attr("colspan", t(this).attr("colspan") || 1).appendTo(i)
                })
            },
            _contactContainers: function(e) {
                var i, s, n, o, a, r, h, l, c, d, p = null,
                    u = null;
                for (i = this.containers.length - 1; i >= 0; i--)
                    if (!t.contains(this.currentItem[0], this.containers[i].element[0]))
                        if (this._intersectsWith(this.containers[i].containerCache)) {
                            if (p && t.contains(this.containers[i].element[0], p.element[0])) continue;
                            p = this.containers[i], u = i
                        } else this.containers[i].containerCache.over && (this.containers[i]._trigger("out", e, this._uiHash(this)), this.containers[i].containerCache.over = 0);
                if (p)
                    if (1 === this.containers.length) this.containers[u].containerCache.over || (this.containers[u]._trigger("over", e, this._uiHash(this)), this.containers[u].containerCache.over = 1);
                    else {
                        for (n = 1e4, o = null, c = p.floating || this._isFloating(this.currentItem), a = c ? "left" : "top", r = c ? "width" : "height", d = c ? "clientX" : "clientY", s = this.items.length - 1; s >= 0; s--) t.contains(this.containers[u].element[0], this.items[s].item[0]) && this.items[s].item[0] !== this.currentItem[0] && (h = this.items[s].item.offset()[a], l = !1, e[d] - h > this.items[s][r] / 2 && (l = !0), n > Math.abs(e[d] - h) && (n = Math.abs(e[d] - h), o = this.items[s], this.direction = l ? "up" : "down"));
                        if (!o && !this.options.dropOnEmpty) return;
                        if (this.currentContainer === this.containers[u]) return void(this.currentContainer.containerCache.over || (this.containers[u]._trigger("over", e, this._uiHash()), this.currentContainer.containerCache.over = 1));
                        o ? this._rearrange(e, o, null, !0) : this._rearrange(e, null, this.containers[u].element, !0), this._trigger("change", e, this._uiHash()), this.containers[u]._trigger("change", e, this._uiHash(this)), this.currentContainer = this.containers[u], this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[u]._trigger("over", e, this._uiHash(this)), this.containers[u].containerCache.over = 1
                    }
            },
            _createHelper: function(e) {
                var i = this.options,
                    s = t.isFunction(i.helper) ? t(i.helper.apply(this.element[0], [e, this.currentItem])) : "clone" === i.helper ? this.currentItem.clone() : this.currentItem;
                return s.parents("body").length || t("parent" !== i.appendTo ? i.appendTo : this.currentItem[0].parentNode)[0].appendChild(s[0]), s[0] === this.currentItem[0] && (this._storedCSS = {
                    width: this.currentItem[0].style.width,
                    height: this.currentItem[0].style.height,
                    position: this.currentItem.css("position"),
                    top: this.currentItem.css("top"),
                    left: this.currentItem.css("left")
                }), (!s[0].style.width || i.forceHelperSize) && s.width(this.currentItem.width()), (!s[0].style.height || i.forceHelperSize) && s.height(this.currentItem.height()), s
            },
            _adjustOffsetFromHelper: function(e) {
                "string" == typeof e && (e = e.split(" ")), t.isArray(e) && (e = {
                    left: +e[0],
                    top: +e[1] || 0
                }), "left" in e && (this.offset.click.left = e.left + this.margins.left), "right" in e && (this.offset.click.left = this.helperProportions.width - e.right + this.margins.left), "top" in e && (this.offset.click.top = e.top + this.margins.top), "bottom" in e && (this.offset.click.top = this.helperProportions.height - e.bottom + this.margins.top)
            },
            _getParentOffset: function() {
                this.offsetParent = this.helper.offsetParent();
                var e = this.offsetParent.offset();
                return "absolute" === this.cssPosition && this.scrollParent[0] !== this.document[0] && t.contains(this.scrollParent[0], this.offsetParent[0]) && (e.left += this.scrollParent.scrollLeft(), e.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === this.document[0].body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && t.ui.ie) && (e = {
                    top: 0,
                    left: 0
                }), {
                    top: e.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                    left: e.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
                }
            },
            _getRelativeOffset: function() {
                if ("relative" === this.cssPosition) {
                    var t = this.currentItem.position();
                    return {
                        top: t.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                        left: t.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                    }
                }
                return {
                    top: 0,
                    left: 0
                }
            },
            _cacheMargins: function() {
                this.margins = {
                    left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                    top: parseInt(this.currentItem.css("marginTop"), 10) || 0
                }
            },
            _cacheHelperProportions: function() {
                this.helperProportions = {
                    width: this.helper.outerWidth(),
                    height: this.helper.outerHeight()
                }
            },
            _setContainment: function() {
                var e, i, s, n = this.options;
                "parent" === n.containment && (n.containment = this.helper[0].parentNode), ("document" === n.containment || "window" === n.containment) && (this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, "document" === n.containment ? this.document.width() : this.window.width() - this.helperProportions.width - this.margins.left, ("document" === n.containment ? this.document.width() : this.window.height() || this.document[0].body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]), /^(document|window|parent)$/.test(n.containment) || (e = t(n.containment)[0], i = t(n.containment).offset(), s = "hidden" !== t(e).css("overflow"), this.containment = [i.left + (parseInt(t(e).css("borderLeftWidth"), 10) || 0) + (parseInt(t(e).css("paddingLeft"), 10) || 0) - this.margins.left, i.top + (parseInt(t(e).css("borderTopWidth"), 10) || 0) + (parseInt(t(e).css("paddingTop"), 10) || 0) - this.margins.top, i.left + (s ? Math.max(e.scrollWidth, e.offsetWidth) : e.offsetWidth) - (parseInt(t(e).css("borderLeftWidth"), 10) || 0) - (parseInt(t(e).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, i.top + (s ? Math.max(e.scrollHeight, e.offsetHeight) : e.offsetHeight) - (parseInt(t(e).css("borderTopWidth"), 10) || 0) - (parseInt(t(e).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top])
            },
            _convertPositionTo: function(e, i) {
                i || (i = this.position);
                var s = "absolute" === e ? 1 : -1,
                    n = "absolute" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                    o = /(html|body)/i.test(n[0].tagName);
                return {
                    top: i.top + this.offset.relative.top * s + this.offset.parent.top * s - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : o ? 0 : n.scrollTop()) * s,
                    left: i.left + this.offset.relative.left * s + this.offset.parent.left * s - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : o ? 0 : n.scrollLeft()) * s
                }
            },
            _generatePosition: function(e) {
                var i, s, n = this.options,
                    o = e.pageX,
                    a = e.pageY,
                    r = "absolute" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                    h = /(html|body)/i.test(r[0].tagName);
                return "relative" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()), this.originalPosition && (this.containment && (e.pageX - this.offset.click.left < this.containment[0] && (o = this.containment[0] + this.offset.click.left), e.pageY - this.offset.click.top < this.containment[1] && (a = this.containment[1] + this.offset.click.top), e.pageX - this.offset.click.left > this.containment[2] && (o = this.containment[2] + this.offset.click.left), e.pageY - this.offset.click.top > this.containment[3] && (a = this.containment[3] + this.offset.click.top)), n.grid && (i = this.originalPageY + Math.round((a - this.originalPageY) / n.grid[1]) * n.grid[1], a = this.containment ? i - this.offset.click.top >= this.containment[1] && i - this.offset.click.top <= this.containment[3] ? i : i - this.offset.click.top >= this.containment[1] ? i - n.grid[1] : i + n.grid[1] : i, s = this.originalPageX + Math.round((o - this.originalPageX) / n.grid[0]) * n.grid[0], o = this.containment ? s - this.offset.click.left >= this.containment[0] && s - this.offset.click.left <= this.containment[2] ? s : s - this.offset.click.left >= this.containment[0] ? s - n.grid[0] : s + n.grid[0] : s)), {
                    top: a - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : h ? 0 : r.scrollTop()),
                    left: o - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : h ? 0 : r.scrollLeft())
                }
            },
            _rearrange: function(t, e, i, s) {
                i ? i[0].appendChild(this.placeholder[0]) : e.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? e.item[0] : e.item[0].nextSibling), this.counter = this.counter ? ++this.counter : 1;
                var n = this.counter;
                this._delay(function() {
                    n === this.counter && this.refreshPositions(!s)
                })
            },
            _clear: function(t, e) {
                function i(t, e, i) {
                    return function(s) {
                        i._trigger(t, s, e._uiHash(e))
                    }
                }
                this.reverting = !1;
                var s, n = [];
                if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null, this.helper[0] === this.currentItem[0]) {
                    for (s in this._storedCSS)("auto" === this._storedCSS[s] || "static" === this._storedCSS[s]) && (this._storedCSS[s] = "");
                    this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
                } else this.currentItem.show();
                for (this.fromOutside && !e && n.push(function(t) {
                        this._trigger("receive", t, this._uiHash(this.fromOutside))
                    }), !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] || e || n.push(function(t) {
                        this._trigger("update", t, this._uiHash())
                    }), this !== this.currentContainer && (e || (n.push(function(t) {
                        this._trigger("remove", t, this._uiHash())
                    }), n.push(function(t) {
                        return function(e) {
                            t._trigger("receive", e, this._uiHash(this))
                        }
                    }.call(this, this.currentContainer)), n.push(function(t) {
                        return function(e) {
                            t._trigger("update", e, this._uiHash(this))
                        }
                    }.call(this, this.currentContainer)))), s = this.containers.length - 1; s >= 0; s--) e || n.push(i("deactivate", this, this.containers[s])), this.containers[s].containerCache.over && (n.push(i("out", this, this.containers[s])), this.containers[s].containerCache.over = 0);
                if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), this.storedStylesheet.remove()), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex), this.dragging = !1, e || this._trigger("beforeStop", t, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.cancelHelperRemoval || (this.helper[0] !== this.currentItem[0] && this.helper.remove(), this.helper = null), !e) {
                    for (s = 0; n.length > s; s++) n[s].call(this, t);
                    this._trigger("stop", t, this._uiHash())
                }
                return this.fromOutside = !1, !this.cancelHelperRemoval
            },
            _trigger: function() {
                t.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
            },
            _uiHash: function(e) {
                var i = e || this;
                return {
                    helper: i.helper,
                    placeholder: i.placeholder || t([]),
                    position: i.position,
                    originalPosition: i.originalPosition,
                    offset: i.positionAbs,
                    item: i.currentItem,
                    sender: e ? e.element : null
                }
            }
        }), t.extend(t.ui, {
            datepicker: {
                version: "1.11.4"
            }
        });
    var d;
    t.extend(n.prototype, {
        markerClassName: "hasDatepicker",
        maxRows: 4,
        _widgetDatepicker: function() {
            return this.dpDiv
        },
        setDefaults: function(t) {
            return r(this._defaults, t || {}), this
        },
        _attachDatepicker: function(e, i) {
            var s, n, o;
            s = e.nodeName.toLowerCase(), n = "div" === s || "span" === s, e.id || (this.uuid += 1, e.id = "dp" + this.uuid), o = this._newInst(t(e), n), o.settings = t.extend({}, i || {}), "input" === s ? this._connectDatepicker(e, o) : n && this._inlineDatepicker(e, o)
        },
        _newInst: function(e, i) {
            var s = e[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1");
            return {
                id: s,
                input: e,
                selectedDay: 0,
                selectedMonth: 0,
                selectedYear: 0,
                drawMonth: 0,
                drawYear: 0,
                inline: i,
                dpDiv: i ? o(t("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")) : this.dpDiv
            }
        },
        _connectDatepicker: function(e, i) {
            var s = t(e);
            i.append = t([]), i.trigger = t([]), s.hasClass(this.markerClassName) || (this._attachments(s, i), s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp), this._autoSize(i), t.data(e, "datepicker", i), i.settings.disabled && this._disableDatepicker(e))
        },
        _attachments: function(e, i) {
            var s, n, o, a = this._get(i, "appendText"),
                r = this._get(i, "isRTL");
            i.append && i.append.remove(), a && (i.append = t("<span class='" + this._appendClass + "'>" + a + "</span>"), e[r ? "before" : "after"](i.append)), e.unbind("focus", this._showDatepicker), i.trigger && i.trigger.remove(), s = this._get(i, "showOn"), ("focus" === s || "both" === s) && e.focus(this._showDatepicker), ("button" === s || "both" === s) && (n = this._get(i, "buttonText"), o = this._get(i, "buttonImage"), i.trigger = t(this._get(i, "buttonImageOnly") ? t("<img/>").addClass(this._triggerClass).attr({
                src: o,
                alt: n,
                title: n
            }) : t("<button type='button'></button>").addClass(this._triggerClass).html(o ? t("<img/>").attr({
                src: o,
                alt: n,
                title: n
            }) : n)), e[r ? "before" : "after"](i.trigger), i.trigger.click(function() {
                return t.datepicker._datepickerShowing && t.datepicker._lastInput === e[0] ? t.datepicker._hideDatepicker() : t.datepicker._datepickerShowing && t.datepicker._lastInput !== e[0] ? (t.datepicker._hideDatepicker(), t.datepicker._showDatepicker(e[0])) : t.datepicker._showDatepicker(e[0]), !1
            }))
        },
        _autoSize: function(t) {
            if (this._get(t, "autoSize") && !t.inline) {
                var e, i, s, n, o = new Date(2009, 11, 20),
                    a = this._get(t, "dateFormat");
                a.match(/[DM]/) && (e = function(t) {
                    for (i = 0, s = 0, n = 0; t.length > n; n++) t[n].length > i && (i = t[n].length, s = n);
                    return s
                }, o.setMonth(e(this._get(t, a.match(/MM/) ? "monthNames" : "monthNamesShort"))), o.setDate(e(this._get(t, a.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - o.getDay())), t.input.attr("size", this._formatDate(t, o).length)
            }
        },
        _inlineDatepicker: function(e, i) {
            var s = t(e);
            s.hasClass(this.markerClassName) || (s.addClass(this.markerClassName).append(i.dpDiv), t.data(e, "datepicker", i), this._setDate(i, this._getDefaultDate(i), !0), this._updateDatepicker(i), this._updateAlternate(i), i.settings.disabled && this._disableDatepicker(e), i.dpDiv.css("display", "block"))
        },
        _dialogDatepicker: function(e, i, s, n, o) {
            var a, h, l, c, d, p = this._dialogInst;
            return p || (this.uuid += 1, a = "dp" + this.uuid, this._dialogInput = t("<input type='text' id='" + a + "' style='position: absolute; top: -100px; width: 0px;'/>"), this._dialogInput.keydown(this._doKeyDown), t("body").append(this._dialogInput), p = this._dialogInst = this._newInst(this._dialogInput, !1), p.settings = {}, t.data(this._dialogInput[0], "datepicker", p)), r(p.settings, n || {}), i = i && i.constructor === Date ? this._formatDate(p, i) : i, this._dialogInput.val(i), this._pos = o ? o.length ? o : [o.pageX, o.pageY] : null, this._pos || (h = document.documentElement.clientWidth, l = document.documentElement.clientHeight, c = document.documentElement.scrollLeft || document.body.scrollLeft, d = document.documentElement.scrollTop || document.body.scrollTop, this._pos = [h / 2 - 100 + c, l / 2 - 150 + d]), this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), p.settings.onSelect = s, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), this._showDatepicker(this._dialogInput[0]), t.blockUI && t.blockUI(this.dpDiv), t.data(this._dialogInput[0], "datepicker", p), this
        },
        _destroyDatepicker: function(e) {
            var i, s = t(e),
                n = t.data(e, "datepicker");
            s.hasClass(this.markerClassName) && (i = e.nodeName.toLowerCase(), t.removeData(e, "datepicker"), "input" === i ? (n.append.remove(), n.trigger.remove(), s.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : ("div" === i || "span" === i) && s.removeClass(this.markerClassName).empty(), d === n && (d = null))
        },
        _enableDatepicker: function(e) {
            var i, s, n = t(e),
                o = t.data(e, "datepicker");
            n.hasClass(this.markerClassName) && (i = e.nodeName.toLowerCase(), "input" === i ? (e.disabled = !1, o.trigger.filter("button").each(function() {
                this.disabled = !1
            }).end().filter("img").css({
                opacity: "1.0",
                cursor: ""
            })) : ("div" === i || "span" === i) && (s = n.children("." + this._inlineClass), s.children().removeClass("ui-state-disabled"), s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1)), this._disabledInputs = t.map(this._disabledInputs, function(t) {
                return t === e ? null : t
            }))
        },
        _disableDatepicker: function(e) {
            var i, s, n = t(e),
                o = t.data(e, "datepicker");
            n.hasClass(this.markerClassName) && (i = e.nodeName.toLowerCase(), "input" === i ? (e.disabled = !0, o.trigger.filter("button").each(function() {
                this.disabled = !0
            }).end().filter("img").css({
                opacity: "0.5",
                cursor: "default"
            })) : ("div" === i || "span" === i) && (s = n.children("." + this._inlineClass), s.children().addClass("ui-state-disabled"), s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0)), this._disabledInputs = t.map(this._disabledInputs, function(t) {
                return t === e ? null : t
            }), this._disabledInputs[this._disabledInputs.length] = e)
        },
        _isDisabledDatepicker: function(t) {
            if (!t) return !1;
            for (var e = 0; this._disabledInputs.length > e; e++)
                if (this._disabledInputs[e] === t) return !0;
            return !1
        },
        _getInst: function(e) {
            try {
                return t.data(e, "datepicker")
            } catch (i) {
                throw "Missing instance data for this datepicker"
            }
        },
        _optionDatepicker: function(e, i, s) {
            var n, o, a, h, l = this._getInst(e);
            return 2 === arguments.length && "string" == typeof i ? "defaults" === i ? t.extend({}, t.datepicker._defaults) : l ? "all" === i ? t.extend({}, l.settings) : this._get(l, i) : null : (n = i || {}, "string" == typeof i && (n = {}, n[i] = s), void(l && (this._curInst === l && this._hideDatepicker(), o = this._getDateDatepicker(e, !0), a = this._getMinMaxDate(l, "min"), h = this._getMinMaxDate(l, "max"), r(l.settings, n), null !== a && void 0 !== n.dateFormat && void 0 === n.minDate && (l.settings.minDate = this._formatDate(l, a)), null !== h && void 0 !== n.dateFormat && void 0 === n.maxDate && (l.settings.maxDate = this._formatDate(l, h)), "disabled" in n && (n.disabled ? this._disableDatepicker(e) : this._enableDatepicker(e)), this._attachments(t(e), l), this._autoSize(l), this._setDate(l, o), this._updateAlternate(l), this._updateDatepicker(l))))
        },
        _changeDatepicker: function(t, e, i) {
            this._optionDatepicker(t, e, i)
        },
        _refreshDatepicker: function(t) {
            var e = this._getInst(t);
            e && this._updateDatepicker(e)
        },
        _setDateDatepicker: function(t, e) {
            var i = this._getInst(t);
            i && (this._setDate(i, e), this._updateDatepicker(i), this._updateAlternate(i))
        },
        _getDateDatepicker: function(t, e) {
            var i = this._getInst(t);
            return i && !i.inline && this._setDateFromField(i, e), i ? this._getDate(i) : null
        },
        _doKeyDown: function(e) {
            var i, s, n, o = t.datepicker._getInst(e.target),
                a = !0,
                r = o.dpDiv.is(".ui-datepicker-rtl");
            if (o._keyEvent = !0, t.datepicker._datepickerShowing) switch (e.keyCode) {
                case 9:
                    t.datepicker._hideDatepicker(), a = !1;
                    break;
                case 13:
                    return n = t("td." + t.datepicker._dayOverClass + ":not(." + t.datepicker._currentClass + ")", o.dpDiv), n[0] && t.datepicker._selectDay(e.target, o.selectedMonth, o.selectedYear, n[0]), i = t.datepicker._get(o, "onSelect"), i ? (s = t.datepicker._formatDate(o), i.apply(o.input ? o.input[0] : null, [s, o])) : t.datepicker._hideDatepicker(), !1;
                case 27:
                    t.datepicker._hideDatepicker();
                    break;
                case 33:
                    t.datepicker._adjustDate(e.target, e.ctrlKey ? -t.datepicker._get(o, "stepBigMonths") : -t.datepicker._get(o, "stepMonths"), "M");
                    break;
                case 34:
                    t.datepicker._adjustDate(e.target, e.ctrlKey ? +t.datepicker._get(o, "stepBigMonths") : +t.datepicker._get(o, "stepMonths"), "M");
                    break;
                case 35:
                    (e.ctrlKey || e.metaKey) && t.datepicker._clearDate(e.target), a = e.ctrlKey || e.metaKey;
                    break;
                case 36:
                    (e.ctrlKey || e.metaKey) && t.datepicker._gotoToday(e.target), a = e.ctrlKey || e.metaKey;
                    break;
                case 37:
                    (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, r ? 1 : -1, "D"), a = e.ctrlKey || e.metaKey, e.originalEvent.altKey && t.datepicker._adjustDate(e.target, e.ctrlKey ? -t.datepicker._get(o, "stepBigMonths") : -t.datepicker._get(o, "stepMonths"), "M");
                    break;
                case 38:
                    (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, -7, "D"), a = e.ctrlKey || e.metaKey;
                    break;
                case 39:
                    (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, r ? -1 : 1, "D"), a = e.ctrlKey || e.metaKey, e.originalEvent.altKey && t.datepicker._adjustDate(e.target, e.ctrlKey ? +t.datepicker._get(o, "stepBigMonths") : +t.datepicker._get(o, "stepMonths"), "M");
                    break;
                case 40:
                    (e.ctrlKey || e.metaKey) && t.datepicker._adjustDate(e.target, 7, "D"), a = e.ctrlKey || e.metaKey;
                    break;
                default:
                    a = !1
            } else 36 === e.keyCode && e.ctrlKey ? t.datepicker._showDatepicker(this) : a = !1;
            a && (e.preventDefault(), e.stopPropagation())
        },
        _doKeyPress: function(e) {
            var i, s, n = t.datepicker._getInst(e.target);
            return t.datepicker._get(n, "constrainInput") ? (i = t.datepicker._possibleChars(t.datepicker._get(n, "dateFormat")), s = String.fromCharCode(null == e.charCode ? e.keyCode : e.charCode), e.ctrlKey || e.metaKey || " " > s || !i || i.indexOf(s) > -1) : void 0
        },
        _doKeyUp: function(e) {
            var i, s = t.datepicker._getInst(e.target);
            if (s.input.val() !== s.lastVal) try {
                i = t.datepicker.parseDate(t.datepicker._get(s, "dateFormat"), s.input ? s.input.val() : null, t.datepicker._getFormatConfig(s)), i && (t.datepicker._setDateFromField(s), t.datepicker._updateAlternate(s), t.datepicker._updateDatepicker(s))
            } catch (n) {}
            return !0
        },
        _showDatepicker: function(e) {
            if (e = e.target || e, "input" !== e.nodeName.toLowerCase() && (e = t("input", e.parentNode)[0]), !t.datepicker._isDisabledDatepicker(e) && t.datepicker._lastInput !== e) {
                var i, n, o, a, h, l, c;
                i = t.datepicker._getInst(e), t.datepicker._curInst && t.datepicker._curInst !== i && (t.datepicker._curInst.dpDiv.stop(!0, !0), i && t.datepicker._datepickerShowing && t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])), n = t.datepicker._get(i, "beforeShow"), o = n ? n.apply(e, [e, i]) : {}, o !== !1 && (r(i.settings, o), i.lastVal = null, t.datepicker._lastInput = e, t.datepicker._setDateFromField(i), t.datepicker._inDialog && (e.value = ""), t.datepicker._pos || (t.datepicker._pos = t.datepicker._findPos(e), t.datepicker._pos[1] += e.offsetHeight), a = !1, t(e).parents().each(function() {
                    return a |= "fixed" === t(this).css("position"), !a
                }), h = {
                    left: t.datepicker._pos[0],
                    top: t.datepicker._pos[1]
                }, t.datepicker._pos = null, i.dpDiv.empty(), i.dpDiv.css({
                    position: "absolute",
                    display: "block",
                    top: "-1000px"
                }), t.datepicker._updateDatepicker(i), h = t.datepicker._checkOffset(i, h, a), i.dpDiv.css({
                    position: t.datepicker._inDialog && t.blockUI ? "static" : a ? "fixed" : "absolute",
                    display: "none",
                    left: h.left + "px",
                    top: h.top + "px"
                }), i.inline || (l = t.datepicker._get(i, "showAnim"), c = t.datepicker._get(i, "duration"), i.dpDiv.css("z-index", s(t(e)) + 1), t.datepicker._datepickerShowing = !0, t.effects && t.effects.effect[l] ? i.dpDiv.show(l, t.datepicker._get(i, "showOptions"), c) : i.dpDiv[l || "show"](l ? c : null), t.datepicker._shouldFocusInput(i) && i.input.focus(), t.datepicker._curInst = i))
            }
        },
        _updateDatepicker: function(e) {
            this.maxRows = 4, d = e, e.dpDiv.empty().append(this._generateHTML(e)), this._attachHandlers(e);
            var i, s = this._getNumberOfMonths(e),
                n = s[1],
                o = 17,
                r = e.dpDiv.find("." + this._dayOverClass + " a");
            r.length > 0 && a.apply(r.get(0)), e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), n > 1 && e.dpDiv.addClass("ui-datepicker-multi-" + n).css("width", o * n + "em"), e.dpDiv[(1 !== s[0] || 1 !== s[1] ? "add" : "remove") + "Class"]("ui-datepicker-multi"), e.dpDiv[(this._get(e, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"), e === t.datepicker._curInst && t.datepicker._datepickerShowing && t.datepicker._shouldFocusInput(e) && e.input.focus(), e.yearshtml && (i = e.yearshtml, setTimeout(function() {
                i === e.yearshtml && e.yearshtml && e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml), i = e.yearshtml = null
            }, 0))
        },
        _shouldFocusInput: function(t) {
            return t.input && t.input.is(":visible") && !t.input.is(":disabled") && !t.input.is(":focus")
        },
        _checkOffset: function(e, i, s) {
            var n = e.dpDiv.outerWidth(),
                o = e.dpDiv.outerHeight(),
                a = e.input ? e.input.outerWidth() : 0,
                r = e.input ? e.input.outerHeight() : 0,
                h = document.documentElement.clientWidth + (s ? 0 : t(document).scrollLeft()),
                l = document.documentElement.clientHeight + (s ? 0 : t(document).scrollTop());
            return i.left -= this._get(e, "isRTL") ? n - a : 0, i.left -= s && i.left === e.input.offset().left ? t(document).scrollLeft() : 0, i.top -= s && i.top === e.input.offset().top + r ? t(document).scrollTop() : 0, i.left -= Math.min(i.left, i.left + n > h && h > n ? Math.abs(i.left + n - h) : 0),
                i.top -= Math.min(i.top, i.top + o > l && l > o ? Math.abs(o + r) : 0), i
        },
        _findPos: function(e) {
            for (var i, s = this._getInst(e), n = this._get(s, "isRTL"); e && ("hidden" === e.type || 1 !== e.nodeType || t.expr.filters.hidden(e));) e = e[n ? "previousSibling" : "nextSibling"];
            return i = t(e).offset(), [i.left, i.top]
        },
        _hideDatepicker: function(e) {
            var i, s, n, o, a = this._curInst;
            !a || e && a !== t.data(e, "datepicker") || this._datepickerShowing && (i = this._get(a, "showAnim"), s = this._get(a, "duration"), n = function() {
                t.datepicker._tidyDialog(a)
            }, t.effects && (t.effects.effect[i] || t.effects[i]) ? a.dpDiv.hide(i, t.datepicker._get(a, "showOptions"), s, n) : a.dpDiv["slideDown" === i ? "slideUp" : "fadeIn" === i ? "fadeOut" : "hide"](i ? s : null, n), i || n(), this._datepickerShowing = !1, o = this._get(a, "onClose"), o && o.apply(a.input ? a.input[0] : null, [a.input ? a.input.val() : "", a]), this._lastInput = null, this._inDialog && (this._dialogInput.css({
                position: "absolute",
                left: "0",
                top: "-100px"
            }), t.blockUI && (t.unblockUI(), t("body").append(this.dpDiv))), this._inDialog = !1)
        },
        _tidyDialog: function(t) {
            t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
        },
        _checkExternalClick: function(e) {
            if (t.datepicker._curInst) {
                var i = t(e.target),
                    s = t.datepicker._getInst(i[0]);
                (i[0].id !== t.datepicker._mainDivId && 0 === i.parents("#" + t.datepicker._mainDivId).length && !i.hasClass(t.datepicker.markerClassName) && !i.closest("." + t.datepicker._triggerClass).length && t.datepicker._datepickerShowing && (!t.datepicker._inDialog || !t.blockUI) || i.hasClass(t.datepicker.markerClassName) && t.datepicker._curInst !== s) && t.datepicker._hideDatepicker()
            }
        },
        _adjustDate: function(e, i, s) {
            var n = t(e),
                o = this._getInst(n[0]);
            this._isDisabledDatepicker(n[0]) || (this._adjustInstDate(o, i + ("M" === s ? this._get(o, "showCurrentAtPos") : 0), s), this._updateDatepicker(o))
        },
        _gotoToday: function(e) {
            var i, s = t(e),
                n = this._getInst(s[0]);
            this._get(n, "gotoCurrent") && n.currentDay ? (n.selectedDay = n.currentDay, n.drawMonth = n.selectedMonth = n.currentMonth, n.drawYear = n.selectedYear = n.currentYear) : (i = new Date, n.selectedDay = i.getDate(), n.drawMonth = n.selectedMonth = i.getMonth(), n.drawYear = n.selectedYear = i.getFullYear()), this._notifyChange(n), this._adjustDate(s)
        },
        _selectMonthYear: function(e, i, s) {
            var n = t(e),
                o = this._getInst(n[0]);
            o["selected" + ("M" === s ? "Month" : "Year")] = o["draw" + ("M" === s ? "Month" : "Year")] = parseInt(i.options[i.selectedIndex].value, 10), this._notifyChange(o), this._adjustDate(n)
        },
        _selectDay: function(e, i, s, n) {
            var o, a = t(e);
            t(n).hasClass(this._unselectableClass) || this._isDisabledDatepicker(a[0]) || (o = this._getInst(a[0]), o.selectedDay = o.currentDay = t("a", n).html(), o.selectedMonth = o.currentMonth = i, o.selectedYear = o.currentYear = s, this._selectDate(e, this._formatDate(o, o.currentDay, o.currentMonth, o.currentYear)))
        },
        _clearDate: function(e) {
            var i = t(e);
            this._selectDate(i, "")
        },
        _selectDate: function(e, i) {
            var s, n = t(e),
                o = this._getInst(n[0]);
            i = null != i ? i : this._formatDate(o), o.input && o.input.val(i), this._updateAlternate(o), s = this._get(o, "onSelect"), s ? s.apply(o.input ? o.input[0] : null, [i, o]) : o.input && o.input.trigger("change"), o.inline ? this._updateDatepicker(o) : (this._hideDatepicker(), this._lastInput = o.input[0], "object" != typeof o.input[0] && o.input.focus(), this._lastInput = null)
        },
        _updateAlternate: function(e) {
            var i, s, n, o = this._get(e, "altField");
            o && (i = this._get(e, "altFormat") || this._get(e, "dateFormat"), s = this._getDate(e), n = this.formatDate(i, s, this._getFormatConfig(e)), t(o).each(function() {
                t(this).val(n)
            }))
        },
        noWeekends: function(t) {
            var e = t.getDay();
            return [e > 0 && 6 > e, ""]
        },
        iso8601Week: function(t) {
            var e, i = new Date(t.getTime());
            return i.setDate(i.getDate() + 4 - (i.getDay() || 7)), e = i.getTime(), i.setMonth(0), i.setDate(1), Math.floor(Math.round((e - i) / 864e5) / 7) + 1
        },
        parseDate: function(e, i, s) {
            if (null == e || null == i) throw "Invalid arguments";
            if (i = "object" == typeof i ? "" + i : i + "", "" === i) return null;
            var n, o, a, r, h = 0,
                l = (s ? s.shortYearCutoff : null) || this._defaults.shortYearCutoff,
                c = "string" != typeof l ? l : (new Date).getFullYear() % 100 + parseInt(l, 10),
                d = (s ? s.dayNamesShort : null) || this._defaults.dayNamesShort,
                p = (s ? s.dayNames : null) || this._defaults.dayNames,
                u = (s ? s.monthNamesShort : null) || this._defaults.monthNamesShort,
                f = (s ? s.monthNames : null) || this._defaults.monthNames,
                g = -1,
                m = -1,
                _ = -1,
                v = -1,
                y = !1,
                b = function(t) {
                    var i = e.length > n + 1 && e.charAt(n + 1) === t;
                    return i && n++, i
                },
                w = function(t) {
                    var e = b(t),
                        s = "@" === t ? 14 : "!" === t ? 20 : "y" === t && e ? 4 : "o" === t ? 3 : 2,
                        n = "y" === t ? s : 1,
                        o = RegExp("^\\d{" + n + "," + s + "}"),
                        a = i.substring(h).match(o);
                    if (!a) throw "Missing number at position " + h;
                    return h += a[0].length, parseInt(a[0], 10)
                },
                k = function(e, s, n) {
                    var o = -1,
                        a = t.map(b(e) ? n : s, function(t, e) {
                            return [
                                [e, t]
                            ]
                        }).sort(function(t, e) {
                            return -(t[1].length - e[1].length)
                        });
                    if (t.each(a, function(t, e) {
                            var s = e[1];
                            return i.substr(h, s.length).toLowerCase() === s.toLowerCase() ? (o = e[0], h += s.length, !1) : void 0
                        }), -1 !== o) return o + 1;
                    throw "Unknown name at position " + h
                },
                D = function() {
                    if (i.charAt(h) !== e.charAt(n)) throw "Unexpected literal at position " + h;
                    h++
                };
            for (n = 0; e.length > n; n++)
                if (y) "'" !== e.charAt(n) || b("'") ? D() : y = !1;
                else switch (e.charAt(n)) {
                    case "d":
                        _ = w("d");
                        break;
                    case "D":
                        k("D", d, p);
                        break;
                    case "o":
                        v = w("o");
                        break;
                    case "m":
                        m = w("m");
                        break;
                    case "M":
                        m = k("M", u, f);
                        break;
                    case "y":
                        g = w("y");
                        break;
                    case "@":
                        r = new Date(w("@")), g = r.getFullYear(), m = r.getMonth() + 1, _ = r.getDate();
                        break;
                    case "!":
                        r = new Date((w("!") - this._ticksTo1970) / 1e4), g = r.getFullYear(), m = r.getMonth() + 1, _ = r.getDate();
                        break;
                    case "'":
                        b("'") ? D() : y = !0;
                        break;
                    default:
                        D()
                }
                if (i.length > h && (a = i.substr(h), !/^\s+/.test(a))) throw "Extra/unparsed characters found in date: " + a;
            if (-1 === g ? g = (new Date).getFullYear() : 100 > g && (g += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (c >= g ? 0 : -100)), v > -1)
                for (m = 1, _ = v; o = this._getDaysInMonth(g, m - 1), !(o >= _);) m++, _ -= o;
            if (r = this._daylightSavingAdjust(new Date(g, m - 1, _)), r.getFullYear() !== g || r.getMonth() + 1 !== m || r.getDate() !== _) throw "Invalid date";
            return r
        },
        ATOM: "yy-mm-dd",
        COOKIE: "D, dd M yy",
        ISO_8601: "yy-mm-dd",
        RFC_822: "D, d M y",
        RFC_850: "DD, dd-M-y",
        RFC_1036: "D, d M y",
        RFC_1123: "D, d M yy",
        RFC_2822: "D, d M yy",
        RSS: "D, d M y",
        TICKS: "!",
        TIMESTAMP: "@",
        W3C: "yy-mm-dd",
        _ticksTo1970: 864e9 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)),
        formatDate: function(t, e, i) {
            if (!e) return "";
            var s, n = (i ? i.dayNamesShort : null) || this._defaults.dayNamesShort,
                o = (i ? i.dayNames : null) || this._defaults.dayNames,
                a = (i ? i.monthNamesShort : null) || this._defaults.monthNamesShort,
                r = (i ? i.monthNames : null) || this._defaults.monthNames,
                h = function(e) {
                    var i = t.length > s + 1 && t.charAt(s + 1) === e;
                    return i && s++, i
                },
                l = function(t, e, i) {
                    var s = "" + e;
                    if (h(t))
                        for (; i > s.length;) s = "0" + s;
                    return s
                },
                c = function(t, e, i, s) {
                    return h(t) ? s[e] : i[e]
                },
                d = "",
                p = !1;
            if (e)
                for (s = 0; t.length > s; s++)
                    if (p) "'" !== t.charAt(s) || h("'") ? d += t.charAt(s) : p = !1;
                    else switch (t.charAt(s)) {
                        case "d":
                            d += l("d", e.getDate(), 2);
                            break;
                        case "D":
                            d += c("D", e.getDay(), n, o);
                            break;
                        case "o":
                            d += l("o", Math.round((new Date(e.getFullYear(), e.getMonth(), e.getDate()).getTime() - new Date(e.getFullYear(), 0, 0).getTime()) / 864e5), 3);
                            break;
                        case "m":
                            d += l("m", e.getMonth() + 1, 2);
                            break;
                        case "M":
                            d += c("M", e.getMonth(), a, r);
                            break;
                        case "y":
                            d += h("y") ? e.getFullYear() : (10 > e.getYear() % 100 ? "0" : "") + e.getYear() % 100;
                            break;
                        case "@":
                            d += e.getTime();
                            break;
                        case "!":
                            d += 1e4 * e.getTime() + this._ticksTo1970;
                            break;
                        case "'":
                            h("'") ? d += "'" : p = !0;
                            break;
                        default:
                            d += t.charAt(s)
                    }
                    return d
        },
        _possibleChars: function(t) {
            var e, i = "",
                s = !1,
                n = function(i) {
                    var s = t.length > e + 1 && t.charAt(e + 1) === i;
                    return s && e++, s
                };
            for (e = 0; t.length > e; e++)
                if (s) "'" !== t.charAt(e) || n("'") ? i += t.charAt(e) : s = !1;
                else switch (t.charAt(e)) {
                    case "d":
                    case "m":
                    case "y":
                    case "@":
                        i += "0123456789";
                        break;
                    case "D":
                    case "M":
                        return null;
                    case "'":
                        n("'") ? i += "'" : s = !0;
                        break;
                    default:
                        i += t.charAt(e)
                }
                return i
        },
        _get: function(t, e) {
            return void 0 !== t.settings[e] ? t.settings[e] : this._defaults[e]
        },
        _setDateFromField: function(t, e) {
            if (t.input.val() !== t.lastVal) {
                var i = this._get(t, "dateFormat"),
                    s = t.lastVal = t.input ? t.input.val() : null,
                    n = this._getDefaultDate(t),
                    o = n,
                    a = this._getFormatConfig(t);
                try {
                    o = this.parseDate(i, s, a) || n
                } catch (r) {
                    s = e ? "" : s
                }
                t.selectedDay = o.getDate(), t.drawMonth = t.selectedMonth = o.getMonth(), t.drawYear = t.selectedYear = o.getFullYear(), t.currentDay = s ? o.getDate() : 0, t.currentMonth = s ? o.getMonth() : 0, t.currentYear = s ? o.getFullYear() : 0, this._adjustInstDate(t)
            }
        },
        _getDefaultDate: function(t) {
            return this._restrictMinMax(t, this._determineDate(t, this._get(t, "defaultDate"), new Date))
        },
        _determineDate: function(e, i, s) {
            var n = function(t) {
                    var e = new Date;
                    return e.setDate(e.getDate() + t), e
                },
                o = function(i) {
                    try {
                        return t.datepicker.parseDate(t.datepicker._get(e, "dateFormat"), i, t.datepicker._getFormatConfig(e))
                    } catch (s) {}
                    for (var n = (i.toLowerCase().match(/^c/) ? t.datepicker._getDate(e) : null) || new Date, o = n.getFullYear(), a = n.getMonth(), r = n.getDate(), h = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, l = h.exec(i); l;) {
                        switch (l[2] || "d") {
                            case "d":
                            case "D":
                                r += parseInt(l[1], 10);
                                break;
                            case "w":
                            case "W":
                                r += 7 * parseInt(l[1], 10);
                                break;
                            case "m":
                            case "M":
                                a += parseInt(l[1], 10), r = Math.min(r, t.datepicker._getDaysInMonth(o, a));
                                break;
                            case "y":
                            case "Y":
                                o += parseInt(l[1], 10), r = Math.min(r, t.datepicker._getDaysInMonth(o, a))
                        }
                        l = h.exec(i)
                    }
                    return new Date(o, a, r)
                },
                a = null == i || "" === i ? s : "string" == typeof i ? o(i) : "number" == typeof i ? isNaN(i) ? s : n(i) : new Date(i.getTime());
            return a = a && "Invalid Date" == "" + a ? s : a, a && (a.setHours(0), a.setMinutes(0), a.setSeconds(0), a.setMilliseconds(0)), this._daylightSavingAdjust(a)
        },
        _daylightSavingAdjust: function(t) {
            return t ? (t.setHours(t.getHours() > 12 ? t.getHours() + 2 : 0), t) : null
        },
        _setDate: function(t, e, i) {
            var s = !e,
                n = t.selectedMonth,
                o = t.selectedYear,
                a = this._restrictMinMax(t, this._determineDate(t, e, new Date));
            t.selectedDay = t.currentDay = a.getDate(), t.drawMonth = t.selectedMonth = t.currentMonth = a.getMonth(), t.drawYear = t.selectedYear = t.currentYear = a.getFullYear(), n === t.selectedMonth && o === t.selectedYear || i || this._notifyChange(t), this._adjustInstDate(t), t.input && t.input.val(s ? "" : this._formatDate(t))
        },
        _getDate: function(t) {
            var e = !t.currentYear || t.input && "" === t.input.val() ? null : this._daylightSavingAdjust(new Date(t.currentYear, t.currentMonth, t.currentDay));
            return e
        },
        _attachHandlers: function(e) {
            var i = this._get(e, "stepMonths"),
                s = "#" + e.id.replace(/\\\\/g, "\\");
            e.dpDiv.find("[data-handler]").map(function() {
                var e = {
                    prev: function() {
                        t.datepicker._adjustDate(s, -i, "M")
                    },
                    next: function() {
                        t.datepicker._adjustDate(s, +i, "M")
                    },
                    hide: function() {
                        t.datepicker._hideDatepicker()
                    },
                    today: function() {
                        t.datepicker._gotoToday(s)
                    },
                    selectDay: function() {
                        return t.datepicker._selectDay(s, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this), !1
                    },
                    selectMonth: function() {
                        return t.datepicker._selectMonthYear(s, this, "M"), !1
                    },
                    selectYear: function() {
                        return t.datepicker._selectMonthYear(s, this, "Y"), !1
                    }
                };
                t(this).bind(this.getAttribute("data-event"), e[this.getAttribute("data-handler")])
            })
        },
        _generateHTML: function(t) {
            var e, i, s, n, o, a, r, h, l, c, d, p, u, f, g, m, _, v, y, b, w, k, D, x, C, P, I, M, z, S, N, T, H, W, O, A, E, F, Y, R = new Date,
                L = this._daylightSavingAdjust(new Date(R.getFullYear(), R.getMonth(), R.getDate())),
                j = this._get(t, "isRTL"),
                B = this._get(t, "showButtonPanel"),
                K = this._get(t, "hideIfNoPrevNext"),
                V = this._get(t, "navigationAsDateFormat"),
                X = this._getNumberOfMonths(t),
                U = this._get(t, "showCurrentAtPos"),
                q = this._get(t, "stepMonths"),
                $ = 1 !== X[0] || 1 !== X[1],
                G = this._daylightSavingAdjust(t.currentDay ? new Date(t.currentYear, t.currentMonth, t.currentDay) : new Date(9999, 9, 9)),
                J = this._getMinMaxDate(t, "min"),
                Z = this._getMinMaxDate(t, "max"),
                Q = t.drawMonth - U,
                tt = t.drawYear;
            if (0 > Q && (Q += 12, tt--), Z)
                for (e = this._daylightSavingAdjust(new Date(Z.getFullYear(), Z.getMonth() - X[0] * X[1] + 1, Z.getDate())), e = J && J > e ? J : e; this._daylightSavingAdjust(new Date(tt, Q, 1)) > e;) Q--, 0 > Q && (Q = 11, tt--);
            for (t.drawMonth = Q, t.drawYear = tt, i = this._get(t, "prevText"), i = V ? this.formatDate(i, this._daylightSavingAdjust(new Date(tt, Q - q, 1)), this._getFormatConfig(t)) : i, s = this._canAdjustMonth(t, -1, tt, Q) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (j ? "e" : "w") + "'>" + i + "</span></a>" : K ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (j ? "e" : "w") + "'>" + i + "</span></a>", n = this._get(t, "nextText"), n = V ? this.formatDate(n, this._daylightSavingAdjust(new Date(tt, Q + q, 1)), this._getFormatConfig(t)) : n, o = this._canAdjustMonth(t, 1, tt, Q) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + n + "'><span class='ui-icon ui-icon-circle-triangle-" + (j ? "w" : "e") + "'>" + n + "</span></a>" : K ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + n + "'><span class='ui-icon ui-icon-circle-triangle-" + (j ? "w" : "e") + "'>" + n + "</span></a>", a = this._get(t, "currentText"), r = this._get(t, "gotoCurrent") && t.currentDay ? G : L, a = V ? this.formatDate(a, r, this._getFormatConfig(t)) : a, h = t.inline ? "" : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(t, "closeText") + "</button>", l = B ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (j ? h : "") + (this._isInRange(t, r) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + a + "</button>" : "") + (j ? "" : h) + "</div>" : "", c = parseInt(this._get(t, "firstDay"), 10), c = isNaN(c) ? 0 : c, d = this._get(t, "showWeek"), p = this._get(t, "dayNames"), u = this._get(t, "dayNamesMin"), f = this._get(t, "monthNames"), g = this._get(t, "monthNamesShort"), m = this._get(t, "beforeShowDay"), _ = this._get(t, "showOtherMonths"), v = this._get(t, "selectOtherMonths"), y = this._getDefaultDate(t), b = "", k = 0; X[0] > k; k++) {
                for (D = "", this.maxRows = 4, x = 0; X[1] > x; x++) {
                    if (C = this._daylightSavingAdjust(new Date(tt, Q, t.selectedDay)), P = " ui-corner-all", I = "", $) {
                        if (I += "<div class='ui-datepicker-group", X[1] > 1) switch (x) {
                            case 0:
                                I += " ui-datepicker-group-first", P = " ui-corner-" + (j ? "right" : "left");
                                break;
                            case X[1] - 1:
                                I += " ui-datepicker-group-last", P = " ui-corner-" + (j ? "left" : "right");
                                break;
                            default:
                                I += " ui-datepicker-group-middle", P = ""
                        }
                        I += "'>"
                    }
                    for (I += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + P + "'>" + (/all|left/.test(P) && 0 === k ? j ? o : s : "") + (/all|right/.test(P) && 0 === k ? j ? s : o : "") + this._generateMonthYearHeader(t, Q, tt, J, Z, k > 0 || x > 0, f, g) + "</div><table class='ui-datepicker-calendar'><thead><tr>", M = d ? "<th class='ui-datepicker-week-col'>" + this._get(t, "weekHeader") + "</th>" : "", w = 0; 7 > w; w++) z = (w + c) % 7, M += "<th scope='col'" + ((w + c + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + "><span title='" + p[z] + "'>" + u[z] + "</span></th>";
                    for (I += M + "</tr></thead><tbody>", S = this._getDaysInMonth(tt, Q), tt === t.selectedYear && Q === t.selectedMonth && (t.selectedDay = Math.min(t.selectedDay, S)), N = (this._getFirstDayOfMonth(tt, Q) - c + 7) % 7, T = Math.ceil((N + S) / 7), H = $ && this.maxRows > T ? this.maxRows : T, this.maxRows = H, W = this._daylightSavingAdjust(new Date(tt, Q, 1 - N)), O = 0; H > O; O++) {
                        for (I += "<tr>", A = d ? "<td class='ui-datepicker-week-col'>" + this._get(t, "calculateWeek")(W) + "</td>" : "", w = 0; 7 > w; w++) E = m ? m.apply(t.input ? t.input[0] : null, [W]) : [!0, ""], F = W.getMonth() !== Q, Y = F && !v || !E[0] || J && J > W || Z && W > Z, A += "<td class='" + ((w + c + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (F ? " ui-datepicker-other-month" : "") + (W.getTime() === C.getTime() && Q === t.selectedMonth && t._keyEvent || y.getTime() === W.getTime() && y.getTime() === C.getTime() ? " " + this._dayOverClass : "") + (Y ? " " + this._unselectableClass + " ui-state-disabled" : "") + (F && !_ ? "" : " " + E[1] + (W.getTime() === G.getTime() ? " " + this._currentClass : "") + (W.getTime() === L.getTime() ? " ui-datepicker-today" : "")) + "'" + (F && !_ || !E[2] ? "" : " title='" + E[2].replace(/'/g, "&#39;") + "'") + (Y ? "" : " data-handler='selectDay' data-event='click' data-month='" + W.getMonth() + "' data-year='" + W.getFullYear() + "'") + ">" + (F && !_ ? "&#xa0;" : Y ? "<span class='ui-state-default'>" + W.getDate() + "</span>" : "<a class='ui-state-default" + (W.getTime() === L.getTime() ? " ui-state-highlight" : "") + (W.getTime() === G.getTime() ? " ui-state-active" : "") + (F ? " ui-priority-secondary" : "") + "' href='#'>" + W.getDate() + "</a>") + "</td>", W.setDate(W.getDate() + 1), W = this._daylightSavingAdjust(W);
                        I += A + "</tr>"
                    }
                    Q++, Q > 11 && (Q = 0, tt++), I += "</tbody></table>" + ($ ? "</div>" + (X[0] > 0 && x === X[1] - 1 ? "<div class='ui-datepicker-row-break'></div>" : "") : ""), D += I
                }
                b += D
            }
            return b += l, t._keyEvent = !1, b
        },
        _generateMonthYearHeader: function(t, e, i, s, n, o, a, r) {
            var h, l, c, d, p, u, f, g, m = this._get(t, "changeMonth"),
                _ = this._get(t, "changeYear"),
                v = this._get(t, "showMonthAfterYear"),
                y = "<div class='ui-datepicker-title'>",
                b = "";
            if (o || !m) b += "<span class='ui-datepicker-month'>" + a[e] + "</span>";
            else {
                for (h = s && s.getFullYear() === i, l = n && n.getFullYear() === i, b += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>", c = 0; 12 > c; c++)(!h || c >= s.getMonth()) && (!l || n.getMonth() >= c) && (b += "<option value='" + c + "'" + (c === e ? " selected='selected'" : "") + ">" + r[c] + "</option>");
                b += "</select>"
            }
            if (v || (y += b + (!o && m && _ ? "" : "&#xa0;")), !t.yearshtml)
                if (t.yearshtml = "", o || !_) y += "<span class='ui-datepicker-year'>" + i + "</span>";
                else {
                    for (d = this._get(t, "yearRange").split(":"), p = (new Date).getFullYear(), u = function(t) {
                            var e = t.match(/c[+\-].*/) ? i + parseInt(t.substring(1), 10) : t.match(/[+\-].*/) ? p + parseInt(t, 10) : parseInt(t, 10);
                            return isNaN(e) ? p : e
                        }, f = u(d[0]), g = Math.max(f, u(d[1] || "")), f = s ? Math.max(f, s.getFullYear()) : f, g = n ? Math.min(g, n.getFullYear()) : g, t.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>"; g >= f; f++) t.yearshtml += "<option value='" + f + "'" + (f === i ? " selected='selected'" : "") + ">" + f + "</option>";
                    t.yearshtml += "</select>", y += t.yearshtml, t.yearshtml = null
                }
            return y += this._get(t, "yearSuffix"), v && (y += (!o && m && _ ? "" : "&#xa0;") + b), y += "</div>"
        },
        _adjustInstDate: function(t, e, i) {
            var s = t.drawYear + ("Y" === i ? e : 0),
                n = t.drawMonth + ("M" === i ? e : 0),
                o = Math.min(t.selectedDay, this._getDaysInMonth(s, n)) + ("D" === i ? e : 0),
                a = this._restrictMinMax(t, this._daylightSavingAdjust(new Date(s, n, o)));
            t.selectedDay = a.getDate(), t.drawMonth = t.selectedMonth = a.getMonth(), t.drawYear = t.selectedYear = a.getFullYear(), ("M" === i || "Y" === i) && this._notifyChange(t)
        },
        _restrictMinMax: function(t, e) {
            var i = this._getMinMaxDate(t, "min"),
                s = this._getMinMaxDate(t, "max"),
                n = i && i > e ? i : e;
            return s && n > s ? s : n
        },
        _notifyChange: function(t) {
            var e = this._get(t, "onChangeMonthYear");
            e && e.apply(t.input ? t.input[0] : null, [t.selectedYear, t.selectedMonth + 1, t])
        },
        _getNumberOfMonths: function(t) {
            var e = this._get(t, "numberOfMonths");
            return null == e ? [1, 1] : "number" == typeof e ? [1, e] : e
        },
        _getMinMaxDate: function(t, e) {
            return this._determineDate(t, this._get(t, e + "Date"), null)
        },
        _getDaysInMonth: function(t, e) {
            return 32 - this._daylightSavingAdjust(new Date(t, e, 32)).getDate()
        },
        _getFirstDayOfMonth: function(t, e) {
            return new Date(t, e, 1).getDay()
        },
        _canAdjustMonth: function(t, e, i, s) {
            var n = this._getNumberOfMonths(t),
                o = this._daylightSavingAdjust(new Date(i, s + (0 > e ? e : n[0] * n[1]), 1));
            return 0 > e && o.setDate(this._getDaysInMonth(o.getFullYear(), o.getMonth())), this._isInRange(t, o)
        },
        _isInRange: function(t, e) {
            var i, s, n = this._getMinMaxDate(t, "min"),
                o = this._getMinMaxDate(t, "max"),
                a = null,
                r = null,
                h = this._get(t, "yearRange");
            return h && (i = h.split(":"), s = (new Date).getFullYear(), a = parseInt(i[0], 10), r = parseInt(i[1], 10), i[0].match(/[+\-].*/) && (a += s), i[1].match(/[+\-].*/) && (r += s)), (!n || e.getTime() >= n.getTime()) && (!o || e.getTime() <= o.getTime()) && (!a || e.getFullYear() >= a) && (!r || r >= e.getFullYear())
        },
        _getFormatConfig: function(t) {
            var e = this._get(t, "shortYearCutoff");
            return e = "string" != typeof e ? e : (new Date).getFullYear() % 100 + parseInt(e, 10), {
                shortYearCutoff: e,
                dayNamesShort: this._get(t, "dayNamesShort"),
                dayNames: this._get(t, "dayNames"),
                monthNamesShort: this._get(t, "monthNamesShort"),
                monthNames: this._get(t, "monthNames")
            }
        },
        _formatDate: function(t, e, i, s) {
            e || (t.currentDay = t.selectedDay, t.currentMonth = t.selectedMonth, t.currentYear = t.selectedYear);
            var n = e ? "object" == typeof e ? e : this._daylightSavingAdjust(new Date(s, i, e)) : this._daylightSavingAdjust(new Date(t.currentYear, t.currentMonth, t.currentDay));
            return this.formatDate(this._get(t, "dateFormat"), n, this._getFormatConfig(t))
        }
    }), t.fn.datepicker = function(e) {
        if (!this.length) return this;
        t.datepicker.initialized || (t(document).mousedown(t.datepicker._checkExternalClick), t.datepicker.initialized = !0), 0 === t("#" + t.datepicker._mainDivId).length && t("body").append(t.datepicker.dpDiv);
        var i = Array.prototype.slice.call(arguments, 1);
        return "string" != typeof e || "isDisabled" !== e && "getDate" !== e && "widget" !== e ? "option" === e && 2 === arguments.length && "string" == typeof arguments[1] ? t.datepicker["_" + e + "Datepicker"].apply(t.datepicker, [this[0]].concat(i)) : this.each(function() {
            "string" == typeof e ? t.datepicker["_" + e + "Datepicker"].apply(t.datepicker, [this].concat(i)) : t.datepicker._attachDatepicker(this, e)
        }) : t.datepicker["_" + e + "Datepicker"].apply(t.datepicker, [this[0]].concat(i))
    }, t.datepicker = new n, t.datepicker.initialized = !1, t.datepicker.uuid = (new Date).getTime(), t.datepicker.version = "1.11.4", t.datepicker, t.widget("ui.slider", t.ui.mouse, {
        version: "1.11.4",
        widgetEventPrefix: "slide",
        options: {
            animate: !1,
            distance: 0,
            max: 100,
            min: 0,
            orientation: "horizontal",
            range: !1,
            step: 1,
            value: 0,
            values: null,
            change: null,
            slide: null,
            start: null,
            stop: null
        },
        numPages: 5,
        _create: function() {
            this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, this._detectOrientation(), this._mouseInit(), this._calculateNewMax(), this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget ui-widget-content ui-corner-all"), this._refresh(), this._setOption("disabled", this.options.disabled), this._animateOff = !1
        },
        _refresh: function() {
            this._createRange(), this._createHandles(), this._setupEvents(), this._refreshValue()
        },
        _createHandles: function() {
            var e, i, s = this.options,
                n = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),
                o = "<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",
                a = [];
            for (i = s.values && s.values.length || 1, n.length > i && (n.slice(i).remove(), n = n.slice(0, i)), e = n.length; i > e; e++) a.push(o);
            this.handles = n.add(t(a.join("")).appendTo(this.element)), this.handle = this.handles.eq(0), this.handles.each(function(e) {
                t(this).data("ui-slider-handle-index", e)
            })
        },
        _createRange: function() {
            var e = this.options,
                i = "";
            e.range ? (e.range === !0 && (e.values ? e.values.length && 2 !== e.values.length ? e.values = [e.values[0], e.values[0]] : t.isArray(e.values) && (e.values = e.values.slice(0)) : e.values = [this._valueMin(), this._valueMin()]), this.range && this.range.length ? this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({
                left: "",
                bottom: ""
            }) : (this.range = t("<div></div>").appendTo(this.element), i = "ui-slider-range ui-widget-header ui-corner-all"), this.range.addClass(i + ("min" === e.range || "max" === e.range ? " ui-slider-range-" + e.range : ""))) : (this.range && this.range.remove(), this.range = null)
        },
        _setupEvents: function() {
            this._off(this.handles), this._on(this.handles, this._handleEvents), this._hoverable(this.handles), this._focusable(this.handles)
        },
        _destroy: function() {
            this.handles.remove(), this.range && this.range.remove(), this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"), this._mouseDestroy()
        },
        _mouseCapture: function(e) {
            var i, s, n, o, a, r, h, l, c = this,
                d = this.options;
            return d.disabled ? !1 : (this.elementSize = {
                width: this.element.outerWidth(),
                height: this.element.outerHeight()
            }, this.elementOffset = this.element.offset(), i = {
                x: e.pageX,
                y: e.pageY
            }, s = this._normValueFromMouse(i), n = this._valueMax() - this._valueMin() + 1, this.handles.each(function(e) {
                var i = Math.abs(s - c.values(e));
                (n > i || n === i && (e === c._lastChangedValue || c.values(e) === d.min)) && (n = i, o = t(this), a = e)
            }), r = this._start(e, a), r === !1 ? !1 : (this._mouseSliding = !0, this._handleIndex = a, o.addClass("ui-state-active").focus(), h = o.offset(), l = !t(e.target).parents().addBack().is(".ui-slider-handle"), this._clickOffset = l ? {
                left: 0,
                top: 0
            } : {
                left: e.pageX - h.left - o.width() / 2,
                top: e.pageY - h.top - o.height() / 2 - (parseInt(o.css("borderTopWidth"), 10) || 0) - (parseInt(o.css("borderBottomWidth"), 10) || 0) + (parseInt(o.css("marginTop"), 10) || 0)
            }, this.handles.hasClass("ui-state-hover") || this._slide(e, a, s), this._animateOff = !0, !0))
        },
        _mouseStart: function() {
            return !0
        },
        _mouseDrag: function(t) {
            var e = {
                    x: t.pageX,
                    y: t.pageY
                },
                i = this._normValueFromMouse(e);
            return this._slide(t, this._handleIndex, i), !1
        },
        _mouseStop: function(t) {
            return this.handles.removeClass("ui-state-active"), this._mouseSliding = !1, this._stop(t, this._handleIndex), this._change(t, this._handleIndex), this._handleIndex = null, this._clickOffset = null, this._animateOff = !1, !1
        },
        _detectOrientation: function() {
            this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal"
        },
        _normValueFromMouse: function(t) {
            var e, i, s, n, o;
            return "horizontal" === this.orientation ? (e = this.elementSize.width, i = t.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (e = this.elementSize.height, i = t.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)), s = i / e, s > 1 && (s = 1), 0 > s && (s = 0), "vertical" === this.orientation && (s = 1 - s), n = this._valueMax() - this._valueMin(), o = this._valueMin() + s * n, this._trimAlignValue(o)
        },
        _start: function(t, e) {
            var i = {
                handle: this.handles[e],
                value: this.value()
            };
            return this.options.values && this.options.values.length && (i.value = this.values(e), i.values = this.values()), this._trigger("start", t, i)
        },
        _slide: function(t, e, i) {
            var s, n, o;
            this.options.values && this.options.values.length ? (s = this.values(e ? 0 : 1), 2 === this.options.values.length && this.options.range === !0 && (0 === e && i > s || 1 === e && s > i) && (i = s), i !== this.values(e) && (n = this.values(), n[e] = i, o = this._trigger("slide", t, {
                handle: this.handles[e],
                value: i,
                values: n
            }), s = this.values(e ? 0 : 1), o !== !1 && this.values(e, i))) : i !== this.value() && (o = this._trigger("slide", t, {
                handle: this.handles[e],
                value: i
            }), o !== !1 && this.value(i))
        },
        _stop: function(t, e) {
            var i = {
                handle: this.handles[e],
                value: this.value()
            };
            this.options.values && this.options.values.length && (i.value = this.values(e), i.values = this.values()), this._trigger("stop", t, i)
        },
        _change: function(t, e) {
            if (!this._keySliding && !this._mouseSliding) {
                var i = {
                    handle: this.handles[e],
                    value: this.value()
                };
                this.options.values && this.options.values.length && (i.value = this.values(e), i.values = this.values()), this._lastChangedValue = e, this._trigger("change", t, i)
            }
        },
        value: function(t) {
            return arguments.length ? (this.options.value = this._trimAlignValue(t), this._refreshValue(), void this._change(null, 0)) : this._value()
        },
        values: function(e, i) {
            var s, n, o;
            if (arguments.length > 1) return this.options.values[e] = this._trimAlignValue(i), this._refreshValue(), void this._change(null, e);
            if (!arguments.length) return this._values();
            if (!t.isArray(arguments[0])) return this.options.values && this.options.values.length ? this._values(e) : this.value();
            for (s = this.options.values, n = arguments[0], o = 0; s.length > o; o += 1) s[o] = this._trimAlignValue(n[o]), this._change(null, o);
            this._refreshValue()
        },
        _setOption: function(e, i) {
            var s, n = 0;
            switch ("range" === e && this.options.range === !0 && ("min" === i ? (this.options.value = this._values(0), this.options.values = null) : "max" === i && (this.options.value = this._values(this.options.values.length - 1), this.options.values = null)), t.isArray(this.options.values) && (n = this.options.values.length), "disabled" === e && this.element.toggleClass("ui-state-disabled", !!i), this._super(e, i), e) {
                case "orientation":
                    this._detectOrientation(), this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation), this._refreshValue(), this.handles.css("horizontal" === i ? "bottom" : "left", "");
                    break;
                case "value":
                    this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1;
                    break;
                case "values":
                    for (this._animateOff = !0, this._refreshValue(), s = 0; n > s; s += 1) this._change(null, s);
                    this._animateOff = !1;
                    break;
                case "step":
                case "min":
                case "max":
                    this._animateOff = !0, this._calculateNewMax(), this._refreshValue(), this._animateOff = !1;
                    break;
                case "range":
                    this._animateOff = !0, this._refresh(), this._animateOff = !1
            }
        },
        _value: function() {
            var t = this.options.value;
            return t = this._trimAlignValue(t)
        },
        _values: function(t) {
            var e, i, s;
            if (arguments.length) return e = this.options.values[t], e = this._trimAlignValue(e);
            if (this.options.values && this.options.values.length) {
                for (i = this.options.values.slice(), s = 0; i.length > s; s += 1) i[s] = this._trimAlignValue(i[s]);
                return i
            }
            return []
        },
        _trimAlignValue: function(t) {
            if (this._valueMin() >= t) return this._valueMin();
            if (t >= this._valueMax()) return this._valueMax();
            var e = this.options.step > 0 ? this.options.step : 1,
                i = (t - this._valueMin()) % e,
                s = t - i;
            return 2 * Math.abs(i) >= e && (s += i > 0 ? e : -e), parseFloat(s.toFixed(5))
        },
        _calculateNewMax: function() {
            var t = this.options.max,
                e = this._valueMin(),
                i = this.options.step,
                s = Math.floor(+(t - e).toFixed(this._precision()) / i) * i;
            t = s + e, this.max = parseFloat(t.toFixed(this._precision()))
        },
        _precision: function() {
            var t = this._precisionOf(this.options.step);
            return null !== this.options.min && (t = Math.max(t, this._precisionOf(this.options.min))), t
        },
        _precisionOf: function(t) {
            var e = "" + t,
                i = e.indexOf(".");
            return -1 === i ? 0 : e.length - i - 1
        },
        _valueMin: function() {
            return this.options.min
        },
        _valueMax: function() {
            return this.max
        },
        _refreshValue: function() {
            var e, i, s, n, o, a = this.options.range,
                r = this.options,
                h = this,
                l = this._animateOff ? !1 : r.animate,
                c = {};
            this.options.values && this.options.values.length ? this.handles.each(function(s) {
                i = 100 * ((h.values(s) - h._valueMin()) / (h._valueMax() - h._valueMin())), c["horizontal" === h.orientation ? "left" : "bottom"] = i + "%", t(this).stop(1, 1)[l ? "animate" : "css"](c, r.animate), h.options.range === !0 && ("horizontal" === h.orientation ? (0 === s && h.range.stop(1, 1)[l ? "animate" : "css"]({
                    left: i + "%"
                }, r.animate), 1 === s && h.range[l ? "animate" : "css"]({
                    width: i - e + "%"
                }, {
                    queue: !1,
                    duration: r.animate
                })) : (0 === s && h.range.stop(1, 1)[l ? "animate" : "css"]({
                    bottom: i + "%"
                }, r.animate), 1 === s && h.range[l ? "animate" : "css"]({
                    height: i - e + "%"
                }, {
                    queue: !1,
                    duration: r.animate
                }))), e = i
            }) : (s = this.value(), n = this._valueMin(), o = this._valueMax(), i = o !== n ? 100 * ((s - n) / (o - n)) : 0, c["horizontal" === this.orientation ? "left" : "bottom"] = i + "%", this.handle.stop(1, 1)[l ? "animate" : "css"](c, r.animate), "min" === a && "horizontal" === this.orientation && this.range.stop(1, 1)[l ? "animate" : "css"]({
                width: i + "%"
            }, r.animate), "max" === a && "horizontal" === this.orientation && this.range[l ? "animate" : "css"]({
                width: 100 - i + "%"
            }, {
                queue: !1,
                duration: r.animate
            }), "min" === a && "vertical" === this.orientation && this.range.stop(1, 1)[l ? "animate" : "css"]({
                height: i + "%"
            }, r.animate), "max" === a && "vertical" === this.orientation && this.range[l ? "animate" : "css"]({
                height: 100 - i + "%"
            }, {
                queue: !1,
                duration: r.animate
            }))
        },
        _handleEvents: {
            keydown: function(e) {
                var i, s, n, o, a = t(e.target).data("ui-slider-handle-index");
                switch (e.keyCode) {
                    case t.ui.keyCode.HOME:
                    case t.ui.keyCode.END:
                    case t.ui.keyCode.PAGE_UP:
                    case t.ui.keyCode.PAGE_DOWN:
                    case t.ui.keyCode.UP:
                    case t.ui.keyCode.RIGHT:
                    case t.ui.keyCode.DOWN:
                    case t.ui.keyCode.LEFT:
                        if (e.preventDefault(), !this._keySliding && (this._keySliding = !0, t(e.target).addClass("ui-state-active"), i = this._start(e, a), i === !1)) return
                }
                switch (o = this.options.step, s = n = this.options.values && this.options.values.length ? this.values(a) : this.value(), e.keyCode) {
                    case t.ui.keyCode.HOME:
                        n = this._valueMin();
                        break;
                    case t.ui.keyCode.END:
                        n = this._valueMax();
                        break;
                    case t.ui.keyCode.PAGE_UP:
                        n = this._trimAlignValue(s + (this._valueMax() - this._valueMin()) / this.numPages);
                        break;
                    case t.ui.keyCode.PAGE_DOWN:
                        n = this._trimAlignValue(s - (this._valueMax() - this._valueMin()) / this.numPages);
                        break;
                    case t.ui.keyCode.UP:
                    case t.ui.keyCode.RIGHT:
                        if (s === this._valueMax()) return;
                        n = this._trimAlignValue(s + o);
                        break;
                    case t.ui.keyCode.DOWN:
                    case t.ui.keyCode.LEFT:
                        if (s === this._valueMin()) return;
                        n = this._trimAlignValue(s - o)
                }
                this._slide(e, a, n)
            },
            keyup: function(e) {
                var i = t(e.target).data("ui-slider-handle-index");
                this._keySliding && (this._keySliding = !1, this._stop(e, i), this._change(e, i), t(e.target).removeClass("ui-state-active"))
            }
        }
    })
});
! function(e) {
    "function" == typeof define && define.amd ? define(["jquery", "jquery.ui"], e) : e(jQuery)
}(function($) {
    if ($.ui.timepicker = $.ui.timepicker || {}, !$.ui.timepicker.version) {
        $.extend($.ui, {
            timepicker: {
                version: "1.5.3"
            }
        });
        var Timepicker = function() {
            this.regional = [], this.regional[""] = {
                currentText: "Now",
                closeText: "Done",
                amNames: ["AM", "A"],
                pmNames: ["PM", "P"],
                timeFormat: "HH:mm",
                timeSuffix: "",
                timeOnlyTitle: "Choose Time",
                timeText: "Time",
                hourText: "Hour",
                minuteText: "Minute",
                secondText: "Second",
                millisecText: "Millisecond",
                microsecText: "Microsecond",
                timezoneText: "Time Zone",
                isRTL: !1
            }, this._defaults = {
                showButtonPanel: !0,
                timeOnly: !1,
                timeOnlyShowDate: !1,
                showHour: null,
                showMinute: null,
                showSecond: null,
                showMillisec: null,
                showMicrosec: null,
                showTimezone: null,
                showTime: !0,
                stepHour: 1,
                stepMinute: 1,
                stepSecond: 1,
                stepMillisec: 1,
                stepMicrosec: 1,
                hour: 0,
                minute: 0,
                second: 0,
                millisec: 0,
                microsec: 0,
                timezone: null,
                hourMin: 0,
                minuteMin: 0,
                secondMin: 0,
                millisecMin: 0,
                microsecMin: 0,
                hourMax: 23,
                minuteMax: 59,
                secondMax: 59,
                millisecMax: 999,
                microsecMax: 999,
                minDateTime: null,
                maxDateTime: null,
                maxTime: null,
                minTime: null,
                onSelect: null,
                hourGrid: 0,
                minuteGrid: 0,
                secondGrid: 0,
                millisecGrid: 0,
                microsecGrid: 0,
                alwaysSetTime: !0,
                separator: " ",
                altFieldTimeOnly: !0,
                altTimeFormat: null,
                altSeparator: null,
                altTimeSuffix: null,
                altRedirectFocus: !0,
                pickerTimeFormat: null,
                pickerTimeSuffix: null,
                showTimepicker: !0,
                timezoneList: null,
                addSliderAccess: !1,
                sliderAccessArgs: null,
                controlType: "slider",
                oneLine: !1,
                defaultValue: null,
                parse: "strict",
                afterInject: null
            }, $.extend(this._defaults, this.regional[""])
        };
        $.extend(Timepicker.prototype, {
            $input: null,
            $altInput: null,
            $timeObj: null,
            inst: null,
            hour_slider: null,
            minute_slider: null,
            second_slider: null,
            millisec_slider: null,
            microsec_slider: null,
            timezone_select: null,
            maxTime: null,
            minTime: null,
            hour: 0,
            minute: 0,
            second: 0,
            millisec: 0,
            microsec: 0,
            timezone: null,
            hourMinOriginal: null,
            minuteMinOriginal: null,
            secondMinOriginal: null,
            millisecMinOriginal: null,
            microsecMinOriginal: null,
            hourMaxOriginal: null,
            minuteMaxOriginal: null,
            secondMaxOriginal: null,
            millisecMaxOriginal: null,
            microsecMaxOriginal: null,
            ampm: "",
            formattedDate: "",
            formattedTime: "",
            formattedDateTime: "",
            timezoneList: null,
            units: ["hour", "minute", "second", "millisec", "microsec"],
            support: {},
            control: null,
            setDefaults: function(e) {
                return extendRemove(this._defaults, e || {}), this
            },
            _newInst: function($input, opts) {
                var tp_inst = new Timepicker,
                    inlineSettings = {},
                    fns = {},
                    overrides, i;
                for (var attrName in this._defaults)
                    if (this._defaults.hasOwnProperty(attrName)) {
                        var attrValue = $input.attr("time:" + attrName);
                        if (attrValue) try {
                            inlineSettings[attrName] = eval(attrValue)
                        } catch (err) {
                            inlineSettings[attrName] = attrValue
                        }
                    }
                overrides = {
                    beforeShow: function(e, t) {
                        return $.isFunction(tp_inst._defaults.evnts.beforeShow) ? tp_inst._defaults.evnts.beforeShow.call($input[0], e, t, tp_inst) : void 0
                    },
                    onChangeMonthYear: function(e, t, i) {
                        $.isFunction(tp_inst._defaults.evnts.onChangeMonthYear) && tp_inst._defaults.evnts.onChangeMonthYear.call($input[0], e, t, i, tp_inst)
                    },
                    onClose: function(e, t) {
                        tp_inst.timeDefined === !0 && "" !== $input.val() && tp_inst._updateDateTime(t), $.isFunction(tp_inst._defaults.evnts.onClose) && tp_inst._defaults.evnts.onClose.call($input[0], e, t, tp_inst)
                    }
                };
                for (i in overrides) overrides.hasOwnProperty(i) && (fns[i] = opts[i] || null);
                tp_inst._defaults = $.extend({}, this._defaults, inlineSettings, opts, overrides, {
                    evnts: fns,
                    timepicker: tp_inst
                }), tp_inst.amNames = $.map(tp_inst._defaults.amNames, function(e) {
                    return e.toUpperCase()
                }), tp_inst.pmNames = $.map(tp_inst._defaults.pmNames, function(e) {
                    return e.toUpperCase()
                }), tp_inst.support = detectSupport(tp_inst._defaults.timeFormat + (tp_inst._defaults.pickerTimeFormat ? tp_inst._defaults.pickerTimeFormat : "") + (tp_inst._defaults.altTimeFormat ? tp_inst._defaults.altTimeFormat : "")), "string" == typeof tp_inst._defaults.controlType ? ("slider" === tp_inst._defaults.controlType && "undefined" == typeof $.ui.slider && (tp_inst._defaults.controlType = "select"), tp_inst.control = tp_inst._controls[tp_inst._defaults.controlType]) : tp_inst.control = tp_inst._defaults.controlType;
                var timezoneList = [-720, -660, -600, -570, -540, -480, -420, -360, -300, -270, -240, -210, -180, -120, -60, 0, 60, 120, 180, 210, 240, 270, 300, 330, 345, 360, 390, 420, 480, 525, 540, 570, 600, 630, 660, 690, 720, 765, 780, 840];
                null !== tp_inst._defaults.timezoneList && (timezoneList = tp_inst._defaults.timezoneList);
                var tzl = timezoneList.length,
                    tzi = 0,
                    tzv = null;
                if (tzl > 0 && "object" != typeof timezoneList[0])
                    for (; tzl > tzi; tzi++) tzv = timezoneList[tzi], timezoneList[tzi] = {
                        value: tzv,
                        label: $.timepicker.timezoneOffsetString(tzv, tp_inst.support.iso8601)
                    };
                return tp_inst._defaults.timezoneList = timezoneList, tp_inst.timezone = null !== tp_inst._defaults.timezone ? $.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone) : -1 * (new Date).getTimezoneOffset(), tp_inst.hour = tp_inst._defaults.hour < tp_inst._defaults.hourMin ? tp_inst._defaults.hourMin : tp_inst._defaults.hour > tp_inst._defaults.hourMax ? tp_inst._defaults.hourMax : tp_inst._defaults.hour, tp_inst.minute = tp_inst._defaults.minute < tp_inst._defaults.minuteMin ? tp_inst._defaults.minuteMin : tp_inst._defaults.minute > tp_inst._defaults.minuteMax ? tp_inst._defaults.minuteMax : tp_inst._defaults.minute, tp_inst.second = tp_inst._defaults.second < tp_inst._defaults.secondMin ? tp_inst._defaults.secondMin : tp_inst._defaults.second > tp_inst._defaults.secondMax ? tp_inst._defaults.secondMax : tp_inst._defaults.second, tp_inst.millisec = tp_inst._defaults.millisec < tp_inst._defaults.millisecMin ? tp_inst._defaults.millisecMin : tp_inst._defaults.millisec > tp_inst._defaults.millisecMax ? tp_inst._defaults.millisecMax : tp_inst._defaults.millisec, tp_inst.microsec = tp_inst._defaults.microsec < tp_inst._defaults.microsecMin ? tp_inst._defaults.microsecMin : tp_inst._defaults.microsec > tp_inst._defaults.microsecMax ? tp_inst._defaults.microsecMax : tp_inst._defaults.microsec, tp_inst.ampm = "", tp_inst.$input = $input, tp_inst._defaults.altField && (tp_inst.$altInput = $(tp_inst._defaults.altField), tp_inst._defaults.altRedirectFocus === !0 && tp_inst.$altInput.css({
                    cursor: "pointer"
                }).focus(function() {
                    $input.trigger("focus")
                })), 0 !== tp_inst._defaults.minDate && 0 !== tp_inst._defaults.minDateTime || (tp_inst._defaults.minDate = new Date), 0 !== tp_inst._defaults.maxDate && 0 !== tp_inst._defaults.maxDateTime || (tp_inst._defaults.maxDate = new Date), void 0 !== tp_inst._defaults.minDate && tp_inst._defaults.minDate instanceof Date && (tp_inst._defaults.minDateTime = new Date(tp_inst._defaults.minDate.getTime())), void 0 !== tp_inst._defaults.minDateTime && tp_inst._defaults.minDateTime instanceof Date && (tp_inst._defaults.minDate = new Date(tp_inst._defaults.minDateTime.getTime())), void 0 !== tp_inst._defaults.maxDate && tp_inst._defaults.maxDate instanceof Date && (tp_inst._defaults.maxDateTime = new Date(tp_inst._defaults.maxDate.getTime())), void 0 !== tp_inst._defaults.maxDateTime && tp_inst._defaults.maxDateTime instanceof Date && (tp_inst._defaults.maxDate = new Date(tp_inst._defaults.maxDateTime.getTime())), tp_inst.$input.bind("focus", function() {
                    tp_inst._onFocus()
                }), tp_inst
            },
            _addTimePicker: function(e) {
                var t = $.trim(this.$altInput && this._defaults.altFieldTimeOnly ? this.$input.val() + " " + this.$altInput.val() : this.$input.val());
                this.timeDefined = this._parseTime(t), this._limitMinMaxDateTime(e, !1), this._injectTimePicker(), this._afterInject()
            },
            _parseTime: function(e, t) {
                if (this.inst || (this.inst = $.datepicker._getInst(this.$input[0])), t || !this._defaults.timeOnly) {
                    var i = $.datepicker._get(this.inst, "dateFormat");
                    try {
                        var s = parseDateTimeInternal(i, this._defaults.timeFormat, e, $.datepicker._getFormatConfig(this.inst), this._defaults);
                        if (!s.timeObj) return !1;
                        $.extend(this, s.timeObj)
                    } catch (n) {
                        return $.timepicker.log("Error parsing the date/time string: " + n + "\ndate/time string = " + e + "\ntimeFormat = " + this._defaults.timeFormat + "\ndateFormat = " + i), !1
                    }
                    return !0
                }
                var a = $.datepicker.parseTime(this._defaults.timeFormat, e, this._defaults);
                return a ? ($.extend(this, a), !0) : !1
            },
            _afterInject: function() {
                var e = this.inst.settings;
                $.isFunction(e.afterInject) && e.afterInject.call(this)
            },
            _injectTimePicker: function() {
                var e = this.inst.dpDiv,
                    t = this.inst.settings,
                    i = this,
                    s = "",
                    n = "",
                    a = null,
                    r = {},
                    l = {},
                    o = null,
                    c = 0,
                    u = 0;
                if (0 === e.find("div.ui-timepicker-div").length && t.showTimepicker) {
                    var m = " ui_tpicker_unit_hide",
                        d = '<div class="ui-timepicker-div' + (t.isRTL ? " ui-timepicker-rtl" : "") + (t.oneLine && "select" === t.controlType ? " ui-timepicker-oneLine" : "") + '"><dl><dt class="ui_tpicker_time_label"' + (t.showTime ? "" : m) + ">" + t.timeText + '</dt><dd class="ui_tpicker_time ' + (t.showTime ? "" : m) + '"></dd>';
                    for (c = 0, u = this.units.length; u > c; c++) {
                        if (s = this.units[c], n = s.substr(0, 1).toUpperCase() + s.substr(1), a = null !== t["show" + n] ? t["show" + n] : this.support[s], r[s] = parseInt(t[s + "Max"] - (t[s + "Max"] - t[s + "Min"]) % t["step" + n], 10), l[s] = 0, d += '<dt class="ui_tpicker_' + s + "_label" + (a ? "" : m) + '">' + t[s + "Text"] + '</dt><dd class="ui_tpicker_' + s + (a ? "" : m) + '"><div class="ui_tpicker_' + s + "_slider" + (a ? "" : m) + '"></div>', a && t[s + "Grid"] > 0) {
                            if (d += '<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>', "hour" === s)
                                for (var h = t[s + "Min"]; h <= r[s]; h += parseInt(t[s + "Grid"], 10)) {
                                    l[s]++;
                                    var p = $.datepicker.formatTime(this.support.ampm ? "hht" : "HH", {
                                        hour: h
                                    }, t);
                                    d += '<td data-for="' + s + '">' + p + "</td>"
                                } else
                                    for (var f = t[s + "Min"]; f <= r[s]; f += parseInt(t[s + "Grid"], 10)) l[s]++, d += '<td data-for="' + s + '">' + (10 > f ? "0" : "") + f + "</td>";
                            d += "</tr></table></div>"
                        }
                        d += "</dd>"
                    }
                    var _ = null !== t.showTimezone ? t.showTimezone : this.support.timezone;
                    d += '<dt class="ui_tpicker_timezone_label' + (_ ? "" : m) + '">' + t.timezoneText + "</dt>", d += '<dd class="ui_tpicker_timezone' + (_ ? "" : m) + '"></dd>', d += "</dl></div>";
                    var g = $(d);
                    for (t.timeOnly === !0 && (g.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">' + t.timeOnlyTitle + "</div></div>"), e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()), c = 0, u = i.units.length; u > c; c++) s = i.units[c], n = s.substr(0, 1).toUpperCase() + s.substr(1), a = null !== t["show" + n] ? t["show" + n] : this.support[s], i[s + "_slider"] = i.control.create(i, g.find(".ui_tpicker_" + s + "_slider"), s, i[s], t[s + "Min"], r[s], t["step" + n]), a && t[s + "Grid"] > 0 && (o = 100 * l[s] * t[s + "Grid"] / (r[s] - t[s + "Min"]), g.find(".ui_tpicker_" + s + " table").css({
                        width: o + "%",
                        marginLeft: t.isRTL ? "0" : o / (-2 * l[s]) + "%",
                        marginRight: t.isRTL ? o / (-2 * l[s]) + "%" : "0",
                        borderCollapse: "collapse"
                    }).find("td").click(function(e) {
                        var t = $(this),
                            n = t.html(),
                            a = parseInt(n.replace(/[^0-9]/g), 10),
                            r = n.replace(/[^apm]/gi),
                            l = t.data("for");
                        "hour" === l && (-1 !== r.indexOf("p") && 12 > a ? a += 12 : -1 !== r.indexOf("a") && 12 === a && (a = 0)), i.control.value(i, i[l + "_slider"], s, a), i._onTimeChange(), i._onSelectHandler()
                    }).css({
                        cursor: "pointer",
                        width: 100 / l[s] + "%",
                        textAlign: "center",
                        overflow: "hidden"
                    }));
                    if (this.timezone_select = g.find(".ui_tpicker_timezone").append("<select></select>").find("select"), $.fn.append.apply(this.timezone_select, $.map(t.timezoneList, function(e, t) {
                            return $("<option />").val("object" == typeof e ? e.value : e).text("object" == typeof e ? e.label : e)
                        })), "undefined" != typeof this.timezone && null !== this.timezone && "" !== this.timezone) {
                        var M = -1 * new Date(this.inst.selectedYear, this.inst.selectedMonth, this.inst.selectedDay, 12).getTimezoneOffset();
                        M === this.timezone ? selectLocalTimezone(i) : this.timezone_select.val(this.timezone)
                    } else "undefined" != typeof this.hour && null !== this.hour && "" !== this.hour ? this.timezone_select.val(t.timezone) : selectLocalTimezone(i);
                    this.timezone_select.change(function() {
                        i._onTimeChange(), i._onSelectHandler(), i._afterInject()
                    });
                    var v = e.find(".ui-datepicker-buttonpane");
                    if (v.length ? v.before(g) : e.append(g), this.$timeObj = g.find(".ui_tpicker_time"), null !== this.inst) {
                        var k = this.timeDefined;
                        this._onTimeChange(), this.timeDefined = k
                    }
                    if (this._defaults.addSliderAccess) {
                        var T = this._defaults.sliderAccessArgs,
                            D = this._defaults.isRTL;
                        T.isRTL = D, setTimeout(function() {
                            if (0 === g.find(".ui-slider-access").length) {
                                g.find(".ui-slider:visible").sliderAccess(T);
                                var e = g.find(".ui-slider-access:eq(0)").outerWidth(!0);
                                e && g.find("table:visible").each(function() {
                                    var t = $(this),
                                        i = t.outerWidth(),
                                        s = t.css(D ? "marginRight" : "marginLeft").toString().replace("%", ""),
                                        n = i - e,
                                        a = s * n / i + "%",
                                        r = {
                                            width: n,
                                            marginRight: 0,
                                            marginLeft: 0
                                        };
                                    r[D ? "marginRight" : "marginLeft"] = a, t.css(r)
                                })
                            }
                        }, 10)
                    }
                    i._limitMinMaxDateTime(this.inst, !0)
                }
            },
            _limitMinMaxDateTime: function(e, t) {
                var i = this._defaults,
                    s = new Date(e.selectedYear, e.selectedMonth, e.selectedDay);
                if (this._defaults.showTimepicker) {
                    if (null !== $.datepicker._get(e, "minDateTime") && void 0 !== $.datepicker._get(e, "minDateTime") && s) {
                        var n = $.datepicker._get(e, "minDateTime"),
                            a = new Date(n.getFullYear(), n.getMonth(), n.getDate(), 0, 0, 0, 0);
                        null !== this.hourMinOriginal && null !== this.minuteMinOriginal && null !== this.secondMinOriginal && null !== this.millisecMinOriginal && null !== this.microsecMinOriginal || (this.hourMinOriginal = i.hourMin, this.minuteMinOriginal = i.minuteMin, this.secondMinOriginal = i.secondMin, this.millisecMinOriginal = i.millisecMin, this.microsecMinOriginal = i.microsecMin), e.settings.timeOnly || a.getTime() === s.getTime() ? (this._defaults.hourMin = n.getHours(), this.hour <= this._defaults.hourMin ? (this.hour = this._defaults.hourMin, this._defaults.minuteMin = n.getMinutes(), this.minute <= this._defaults.minuteMin ? (this.minute = this._defaults.minuteMin, this._defaults.secondMin = n.getSeconds(), this.second <= this._defaults.secondMin ? (this.second = this._defaults.secondMin, this._defaults.millisecMin = n.getMilliseconds(), this.millisec <= this._defaults.millisecMin ? (this.millisec = this._defaults.millisecMin, this._defaults.microsecMin = n.getMicroseconds()) : (this.microsec < this._defaults.microsecMin && (this.microsec = this._defaults.microsecMin), this._defaults.microsecMin = this.microsecMinOriginal)) : (this._defaults.millisecMin = this.millisecMinOriginal, this._defaults.microsecMin = this.microsecMinOriginal)) : (this._defaults.secondMin = this.secondMinOriginal, this._defaults.millisecMin = this.millisecMinOriginal, this._defaults.microsecMin = this.microsecMinOriginal)) : (this._defaults.minuteMin = this.minuteMinOriginal, this._defaults.secondMin = this.secondMinOriginal, this._defaults.millisecMin = this.millisecMinOriginal, this._defaults.microsecMin = this.microsecMinOriginal)) : (this._defaults.hourMin = this.hourMinOriginal, this._defaults.minuteMin = this.minuteMinOriginal, this._defaults.secondMin = this.secondMinOriginal, this._defaults.millisecMin = this.millisecMinOriginal, this._defaults.microsecMin = this.microsecMinOriginal)
                    }
                    if (null !== $.datepicker._get(e, "maxDateTime") && void 0 !== $.datepicker._get(e, "maxDateTime") && s) {
                        var r = $.datepicker._get(e, "maxDateTime"),
                            l = new Date(r.getFullYear(), r.getMonth(), r.getDate(), 0, 0, 0, 0);
                        null !== this.hourMaxOriginal && null !== this.minuteMaxOriginal && null !== this.secondMaxOriginal && null !== this.millisecMaxOriginal || (this.hourMaxOriginal = i.hourMax, this.minuteMaxOriginal = i.minuteMax, this.secondMaxOriginal = i.secondMax, this.millisecMaxOriginal = i.millisecMax, this.microsecMaxOriginal = i.microsecMax), e.settings.timeOnly || l.getTime() === s.getTime() ? (this._defaults.hourMax = r.getHours(), this.hour >= this._defaults.hourMax ? (this.hour = this._defaults.hourMax, this._defaults.minuteMax = r.getMinutes(), this.minute >= this._defaults.minuteMax ? (this.minute = this._defaults.minuteMax, this._defaults.secondMax = r.getSeconds(), this.second >= this._defaults.secondMax ? (this.second = this._defaults.secondMax, this._defaults.millisecMax = r.getMilliseconds(), this.millisec >= this._defaults.millisecMax ? (this.millisec = this._defaults.millisecMax, this._defaults.microsecMax = r.getMicroseconds()) : (this.microsec > this._defaults.microsecMax && (this.microsec = this._defaults.microsecMax), this._defaults.microsecMax = this.microsecMaxOriginal)) : (this._defaults.millisecMax = this.millisecMaxOriginal, this._defaults.microsecMax = this.microsecMaxOriginal)) : (this._defaults.secondMax = this.secondMaxOriginal, this._defaults.millisecMax = this.millisecMaxOriginal, this._defaults.microsecMax = this.microsecMaxOriginal)) : (this._defaults.minuteMax = this.minuteMaxOriginal, this._defaults.secondMax = this.secondMaxOriginal, this._defaults.millisecMax = this.millisecMaxOriginal, this._defaults.microsecMax = this.microsecMaxOriginal)) : (this._defaults.hourMax = this.hourMaxOriginal, this._defaults.minuteMax = this.minuteMaxOriginal, this._defaults.secondMax = this.secondMaxOriginal, this._defaults.millisecMax = this.millisecMaxOriginal, this._defaults.microsecMax = this.microsecMaxOriginal)
                    }
                    if (null !== e.settings.minTime) {
                        var o = new Date("01/01/1970 " + e.settings.minTime);
                        this.hour < o.getHours() ? (this.hour = this._defaults.hourMin = o.getHours(), this.minute = this._defaults.minuteMin = o.getMinutes()) : this.hour === o.getHours() && this.minute < o.getMinutes() ? this.minute = this._defaults.minuteMin = o.getMinutes() : this._defaults.hourMin < o.getHours() ? (this._defaults.hourMin = o.getHours(), this._defaults.minuteMin = o.getMinutes()) : this._defaults.hourMin === o.getHours() === this.hour && this._defaults.minuteMin < o.getMinutes() ? this._defaults.minuteMin = o.getMinutes() : this._defaults.minuteMin = 0
                    }
                    if (null !== e.settings.maxTime) {
                        var c = new Date("01/01/1970 " + e.settings.maxTime);
                        this.hour > c.getHours() ? (this.hour = this._defaults.hourMax = c.getHours(), this.minute = this._defaults.minuteMax = c.getMinutes()) : this.hour === c.getHours() && this.minute > c.getMinutes() ? this.minute = this._defaults.minuteMax = c.getMinutes() : this._defaults.hourMax > c.getHours() ? (this._defaults.hourMax = c.getHours(), this._defaults.minuteMax = c.getMinutes()) : this._defaults.hourMax === c.getHours() === this.hour && this._defaults.minuteMax > c.getMinutes() ? this._defaults.minuteMax = c.getMinutes() : this._defaults.minuteMax = 59
                    }
                    if (void 0 !== t && t === !0) {
                        var u = parseInt(this._defaults.hourMax - (this._defaults.hourMax - this._defaults.hourMin) % this._defaults.stepHour, 10),
                            m = parseInt(this._defaults.minuteMax - (this._defaults.minuteMax - this._defaults.minuteMin) % this._defaults.stepMinute, 10),
                            d = parseInt(this._defaults.secondMax - (this._defaults.secondMax - this._defaults.secondMin) % this._defaults.stepSecond, 10),
                            h = parseInt(this._defaults.millisecMax - (this._defaults.millisecMax - this._defaults.millisecMin) % this._defaults.stepMillisec, 10),
                            p = parseInt(this._defaults.microsecMax - (this._defaults.microsecMax - this._defaults.microsecMin) % this._defaults.stepMicrosec, 10);
                        this.hour_slider && (this.control.options(this, this.hour_slider, "hour", {
                            min: this._defaults.hourMin,
                            max: u,
                            step: this._defaults.stepHour
                        }), this.control.value(this, this.hour_slider, "hour", this.hour - this.hour % this._defaults.stepHour)), this.minute_slider && (this.control.options(this, this.minute_slider, "minute", {
                            min: this._defaults.minuteMin,
                            max: m,
                            step: this._defaults.stepMinute
                        }), this.control.value(this, this.minute_slider, "minute", this.minute - this.minute % this._defaults.stepMinute)), this.second_slider && (this.control.options(this, this.second_slider, "second", {
                            min: this._defaults.secondMin,
                            max: d,
                            step: this._defaults.stepSecond
                        }), this.control.value(this, this.second_slider, "second", this.second - this.second % this._defaults.stepSecond)), this.millisec_slider && (this.control.options(this, this.millisec_slider, "millisec", {
                            min: this._defaults.millisecMin,
                            max: h,
                            step: this._defaults.stepMillisec
                        }), this.control.value(this, this.millisec_slider, "millisec", this.millisec - this.millisec % this._defaults.stepMillisec)), this.microsec_slider && (this.control.options(this, this.microsec_slider, "microsec", {
                            min: this._defaults.microsecMin,
                            max: p,
                            step: this._defaults.stepMicrosec
                        }), this.control.value(this, this.microsec_slider, "microsec", this.microsec - this.microsec % this._defaults.stepMicrosec))
                    }
                }
            },
            _onTimeChange: function() {
                if (this._defaults.showTimepicker) {
                    var e = this.hour_slider ? this.control.value(this, this.hour_slider, "hour") : !1,
                        t = this.minute_slider ? this.control.value(this, this.minute_slider, "minute") : !1,
                        i = this.second_slider ? this.control.value(this, this.second_slider, "second") : !1,
                        s = this.millisec_slider ? this.control.value(this, this.millisec_slider, "millisec") : !1,
                        n = this.microsec_slider ? this.control.value(this, this.microsec_slider, "microsec") : !1,
                        a = this.timezone_select ? this.timezone_select.val() : !1,
                        r = this._defaults,
                        l = r.pickerTimeFormat || r.timeFormat,
                        o = r.pickerTimeSuffix || r.timeSuffix;
                    "object" == typeof e && (e = !1), "object" == typeof t && (t = !1), "object" == typeof i && (i = !1), "object" == typeof s && (s = !1), "object" == typeof n && (n = !1), "object" == typeof a && (a = !1), e !== !1 && (e = parseInt(e, 10)), t !== !1 && (t = parseInt(t, 10)), i !== !1 && (i = parseInt(i, 10)), s !== !1 && (s = parseInt(s, 10)), n !== !1 && (n = parseInt(n, 10)), a !== !1 && (a = a.toString());
                    var c = r[12 > e ? "amNames" : "pmNames"][0],
                        u = e !== parseInt(this.hour, 10) || t !== parseInt(this.minute, 10) || i !== parseInt(this.second, 10) || s !== parseInt(this.millisec, 10) || n !== parseInt(this.microsec, 10) || this.ampm.length > 0 && 12 > e != (-1 !== $.inArray(this.ampm.toUpperCase(), this.amNames)) || null !== this.timezone && a !== this.timezone.toString();
                    u && (e !== !1 && (this.hour = e), t !== !1 && (this.minute = t), i !== !1 && (this.second = i), s !== !1 && (this.millisec = s), n !== !1 && (this.microsec = n), a !== !1 && (this.timezone = a), this.inst || (this.inst = $.datepicker._getInst(this.$input[0])), this._limitMinMaxDateTime(this.inst, !0)), this.support.ampm && (this.ampm = c), this.formattedTime = $.datepicker.formatTime(r.timeFormat, this, r), this.$timeObj && (l === r.timeFormat ? this.$timeObj.text(this.formattedTime + o) : this.$timeObj.text($.datepicker.formatTime(l, this, r) + o)), this.timeDefined = !0, u && this._updateDateTime()
                }
            },
            _onSelectHandler: function() {
                var e = this._defaults.onSelect || this.inst.settings.onSelect,
                    t = this.$input ? this.$input[0] : null;
                e && t && e.apply(t, [this.formattedDateTime, this])
            },
            _updateDateTime: function(e) {
                e = this.inst || e;
                var t = e.currentYear > 0 ? new Date(e.currentYear, e.currentMonth, e.currentDay) : new Date(e.selectedYear, e.selectedMonth, e.selectedDay),
                    i = $.datepicker._daylightSavingAdjust(t),
                    s = $.datepicker._get(e, "dateFormat"),
                    n = $.datepicker._getFormatConfig(e),
                    a = null !== i && this.timeDefined;
                this.formattedDate = $.datepicker.formatDate(s, null === i ? new Date : i, n);
                var r = this.formattedDate;
                if ("" === e.lastVal && (e.currentYear = e.selectedYear, e.currentMonth = e.selectedMonth, e.currentDay = e.selectedDay), this._defaults.timeOnly === !0 && this._defaults.timeOnlyShowDate === !1 ? r = this.formattedTime : (this._defaults.timeOnly !== !0 && (this._defaults.alwaysSetTime || a) || this._defaults.timeOnly === !0 && this._defaults.timeOnlyShowDate === !0) && (r += this._defaults.separator + this.formattedTime + this._defaults.timeSuffix), this.formattedDateTime = r, this._defaults.showTimepicker)
                    if (this.$altInput && this._defaults.timeOnly === !1 && this._defaults.altFieldTimeOnly === !0) this.$altInput.val(this.formattedTime), this.$input.val(this.formattedDate);
                    else if (this.$altInput) {
                    this.$input.val(r);
                    var l = "",
                        o = null !== this._defaults.altSeparator ? this._defaults.altSeparator : this._defaults.separator,
                        c = null !== this._defaults.altTimeSuffix ? this._defaults.altTimeSuffix : this._defaults.timeSuffix;
                    this._defaults.timeOnly || (l = this._defaults.altFormat ? $.datepicker.formatDate(this._defaults.altFormat, null === i ? new Date : i, n) : this.formattedDate, l && (l += o)), l += null !== this._defaults.altTimeFormat ? $.datepicker.formatTime(this._defaults.altTimeFormat, this, this._defaults) + c : this.formattedTime + c, this.$altInput.val(l)
                } else this.$input.val(r);
                else this.$input.val(this.formattedDate);
                this.$input.trigger("change")
            },
            _onFocus: function() {
                if (!this.$input.val() && this._defaults.defaultValue) {
                    this.$input.val(this._defaults.defaultValue);
                    var e = $.datepicker._getInst(this.$input.get(0)),
                        t = $.datepicker._get(e, "timepicker");
                    if (t && t._defaults.timeOnly && e.input.val() !== e.lastVal) try {
                        $.datepicker._updateDatepicker(e)
                    } catch (i) {
                        $.timepicker.log(i)
                    }
                }
            },
            _controls: {
                slider: {
                    create: function(e, t, i, s, n, a, r) {
                        var l = e._defaults.isRTL;
                        return t.prop("slide", null).slider({
                            orientation: "horizontal",
                            value: l ? -1 * s : s,
                            min: l ? -1 * a : n,
                            max: l ? -1 * n : a,
                            step: r,
                            slide: function(t, s) {
                                e.control.value(e, $(this), i, l ? -1 * s.value : s.value), e._onTimeChange()
                            },
                            stop: function(t, i) {
                                e._onSelectHandler()
                            }
                        })
                    },
                    options: function(e, t, i, s, n) {
                        if (e._defaults.isRTL) {
                            if ("string" == typeof s) return "min" === s || "max" === s ? void 0 !== n ? t.slider(s, -1 * n) : Math.abs(t.slider(s)) : t.slider(s);
                            var a = s.min,
                                r = s.max;
                            return s.min = s.max = null, void 0 !== a && (s.max = -1 * a), void 0 !== r && (s.min = -1 * r), t.slider(s)
                        }
                        return "string" == typeof s && void 0 !== n ? t.slider(s, n) : t.slider(s)
                    },
                    value: function(e, t, i, s) {
                        return e._defaults.isRTL ? void 0 !== s ? t.slider("value", -1 * s) : Math.abs(t.slider("value")) : void 0 !== s ? t.slider("value", s) : t.slider("value")
                    }
                },
                select: {
                    create: function(e, t, i, s, n, a, r) {
                        for (var l = '<select class="ui-timepicker-select ui-state-default ui-corner-all" data-unit="' + i + '" data-min="' + n + '" data-max="' + a + '" data-step="' + r + '">', o = e._defaults.pickerTimeFormat || e._defaults.timeFormat, c = n; a >= c; c += r) l += '<option value="' + c + '"' + (c === s ? " selected" : "") + ">", l += "hour" === i ? $.datepicker.formatTime($.trim(o.replace(/[^ht ]/gi, "")), {
                            hour: c
                        }, e._defaults) : "millisec" === i || "microsec" === i || c >= 10 ? c : "0" + c.toString(), l += "</option>";
                        return l += "</select>", t.children("select").remove(), $(l).appendTo(t).change(function(t) {
                            e._onTimeChange(), e._onSelectHandler(), e._afterInject()
                        }), t
                    },
                    options: function(e, t, i, s, n) {
                        var a = {},
                            r = t.children("select");
                        if ("string" == typeof s) {
                            if (void 0 === n) return r.data(s);
                            a[s] = n
                        } else a = s;
                        return e.control.create(e, t, r.data("unit"), r.val(), a.min >= 0 ? a.min : r.data("min"), a.max || r.data("max"), a.step || r.data("step"))
                    },
                    value: function(e, t, i, s) {
                        var n = t.children("select");
                        return void 0 !== s ? n.val(s) : n.val()
                    }
                }
            }
        }), $.fn.extend({
            timepicker: function(e) {
                e = e || {};
                var t = Array.prototype.slice.call(arguments);
                return "object" == typeof e && (t[0] = $.extend(e, {
                    timeOnly: !0
                })), $(this).each(function() {
                    $.fn.datetimepicker.apply($(this), t)
                })
            },
            datetimepicker: function(e) {
                e = e || {};
                var t = arguments;
                return "string" == typeof e ? "getDate" === e || "option" === e && 2 === t.length && "string" == typeof t[1] ? $.fn.datepicker.apply($(this[0]), t) : this.each(function() {
                    var e = $(this);
                    e.datepicker.apply(e, t)
                }) : this.each(function() {
                    var t = $(this);
                    t.datepicker($.timepicker._newInst(t, e)._defaults)
                })
            }
        }), $.datepicker.parseDateTime = function(e, t, i, s, n) {
            var a = parseDateTimeInternal(e, t, i, s, n);
            if (a.timeObj) {
                var r = a.timeObj;
                a.date.setHours(r.hour, r.minute, r.second, r.millisec), a.date.setMicroseconds(r.microsec)
            }
            return a.date
        }, $.datepicker.parseTime = function(e, t, i) {
            var s = extendRemove(extendRemove({}, $.timepicker._defaults), i || {}),
                n = (-1 !== e.replace(/\'.*?\'/g, "").indexOf("Z"), function(e, t, i) {
                    var s, n = function(e, t) {
                            var i = [];
                            return e && $.merge(i, e), t && $.merge(i, t), i = $.map(i, function(e) {
                                return e.replace(/[.*+?|()\[\]{}\\]/g, "\\$&")
                            }), "(" + i.join("|") + ")?"
                        },
                        a = function(e) {
                            var t = e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),
                                i = {
                                    h: -1,
                                    m: -1,
                                    s: -1,
                                    l: -1,
                                    c: -1,
                                    t: -1,
                                    z: -1
                                };
                            if (t)
                                for (var s = 0; s < t.length; s++) - 1 === i[t[s].toString().charAt(0)] && (i[t[s].toString().charAt(0)] = s + 1);
                            return i
                        },
                        r = "^" + e.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g, function(e) {
                            var t = e.length;
                            switch (e.charAt(0).toLowerCase()) {
                                case "h":
                                    return 1 === t ? "(\\d?\\d)" : "(\\d{" + t + "})";
                                case "m":
                                    return 1 === t ? "(\\d?\\d)" : "(\\d{" + t + "})";
                                case "s":
                                    return 1 === t ? "(\\d?\\d)" : "(\\d{" + t + "})";
                                case "l":
                                    return "(\\d?\\d?\\d)";
                                case "c":
                                    return "(\\d?\\d?\\d)";
                                case "z":
                                    return "(z|[-+]\\d\\d:?\\d\\d|\\S+)?";
                                case "t":
                                    return n(i.amNames, i.pmNames);
                                default:
                                    return "(" + e.replace(/\'/g, "").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g, function(e) {
                                        return "\\" + e
                                    }) + ")?"
                            }
                        }).replace(/\s/g, "\\s?") + i.timeSuffix + "$",
                        l = a(e),
                        o = "";
                    s = t.match(new RegExp(r, "i"));
                    var c = {
                        hour: 0,
                        minute: 0,
                        second: 0,
                        millisec: 0,
                        microsec: 0
                    };
                    return s ? (-1 !== l.t && (void 0 === s[l.t] || 0 === s[l.t].length ? (o = "", c.ampm = "") : (o = -1 !== $.inArray(s[l.t].toUpperCase(), $.map(i.amNames, function(e, t) {
                        return e.toUpperCase()
                    })) ? "AM" : "PM", c.ampm = i["AM" === o ? "amNames" : "pmNames"][0])), -1 !== l.h && ("AM" === o && "12" === s[l.h] ? c.hour = 0 : "PM" === o && "12" !== s[l.h] ? c.hour = parseInt(s[l.h], 10) + 12 : c.hour = Number(s[l.h])), -1 !== l.m && (c.minute = Number(s[l.m])), -1 !== l.s && (c.second = Number(s[l.s])), -1 !== l.l && (c.millisec = Number(s[l.l])), -1 !== l.c && (c.microsec = Number(s[l.c])), -1 !== l.z && void 0 !== s[l.z] && (c.timezone = $.timepicker.timezoneOffsetNumber(s[l.z])), c) : !1
                }),
                a = function(e, t, i) {
                    try {
                        var s = new Date("2012-01-01 " + t);
                        if (isNaN(s.getTime()) && (s = new Date("2012-01-01T" + t), isNaN(s.getTime()) && (s = new Date("01/01/2012 " + t), isNaN(s.getTime())))) throw "Unable to parse time with native Date: " + t;
                        return {
                            hour: s.getHours(),
                            minute: s.getMinutes(),
                            second: s.getSeconds(),
                            millisec: s.getMilliseconds(),
                            microsec: s.getMicroseconds(),
                            timezone: -1 * s.getTimezoneOffset()
                        }
                    } catch (a) {
                        try {
                            return n(e, t, i)
                        } catch (r) {
                            $.timepicker.log("Unable to parse \ntimeString: " + t + "\ntimeFormat: " + e)
                        }
                    }
                    return !1
                };
            return "function" == typeof s.parse ? s.parse(e, t, s) : "loose" === s.parse ? a(e, t, s) : n(e, t, s)
        }, $.datepicker.formatTime = function(e, t, i) {
            i = i || {}, i = $.extend({}, $.timepicker._defaults, i), t = $.extend({
                hour: 0,
                minute: 0,
                second: 0,
                millisec: 0,
                microsec: 0,
                timezone: null
            }, t);
            var s = e,
                n = i.amNames[0],
                a = parseInt(t.hour, 10);
            return a > 11 && (n = i.pmNames[0]), s = s.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g, function(e) {
                switch (e) {
                    case "HH":
                        return ("0" + a).slice(-2);
                    case "H":
                        return a;
                    case "hh":
                        return ("0" + convert24to12(a)).slice(-2);
                    case "h":
                        return convert24to12(a);
                    case "mm":
                        return ("0" + t.minute).slice(-2);
                    case "m":
                        return t.minute;
                    case "ss":
                        return ("0" + t.second).slice(-2);
                    case "s":
                        return t.second;
                    case "l":
                        return ("00" + t.millisec).slice(-3);
                    case "c":
                        return ("00" + t.microsec).slice(-3);
                    case "z":
                        return $.timepicker.timezoneOffsetString(null === t.timezone ? i.timezone : t.timezone, !1);
                    case "Z":
                        return $.timepicker.timezoneOffsetString(null === t.timezone ? i.timezone : t.timezone, !0);
                    case "T":
                        return n.charAt(0).toUpperCase();
                    case "TT":
                        return n.toUpperCase();
                    case "t":
                        return n.charAt(0).toLowerCase();
                    case "tt":
                        return n.toLowerCase();
                    default:
                        return e.replace(/'/g, "")
                }
            })
        }, $.datepicker._base_selectDate = $.datepicker._selectDate, $.datepicker._selectDate = function(e, t) {
            var i, s = this._getInst($(e)[0]),
                n = this._get(s, "timepicker");
            n && s.settings.showTimepicker ? (n._limitMinMaxDateTime(s, !0), i = s.inline, s.inline = s.stay_open = !0, this._base_selectDate(e, t), s.inline = i, s.stay_open = !1, this._notifyChange(s), this._updateDatepicker(s)) : this._base_selectDate(e, t)
        }, $.datepicker._base_updateDatepicker = $.datepicker._updateDatepicker, $.datepicker._updateDatepicker = function(e) {
            var t = e.input[0];
            if (!($.datepicker._curInst && $.datepicker._curInst !== e && $.datepicker._datepickerShowing && $.datepicker._lastInput !== t || "boolean" == typeof e.stay_open && e.stay_open !== !1)) {
                this._base_updateDatepicker(e);
                var i = this._get(e, "timepicker");
                i && i._addTimePicker(e)
            }
        }, $.datepicker._base_doKeyPress = $.datepicker._doKeyPress, $.datepicker._doKeyPress = function(e) {
            var t = $.datepicker._getInst(e.target),
                i = $.datepicker._get(t, "timepicker");
            if (i && $.datepicker._get(t, "constrainInput")) {
                var s = i.support.ampm,
                    n = null !== i._defaults.showTimezone ? i._defaults.showTimezone : i.support.timezone,
                    a = $.datepicker._possibleChars($.datepicker._get(t, "dateFormat")),
                    r = i._defaults.timeFormat.toString().replace(/[hms]/g, "").replace(/TT/g, s ? "APM" : "").replace(/Tt/g, s ? "AaPpMm" : "").replace(/tT/g, s ? "AaPpMm" : "").replace(/T/g, s ? "AP" : "").replace(/tt/g, s ? "apm" : "").replace(/t/g, s ? "ap" : "") + " " + i._defaults.separator + i._defaults.timeSuffix + (n ? i._defaults.timezoneList.join("") : "") + i._defaults.amNames.join("") + i._defaults.pmNames.join("") + a,
                    l = String.fromCharCode(void 0 === e.charCode ? e.keyCode : e.charCode);
                return e.ctrlKey || " " > l || !a || r.indexOf(l) > -1
            }
            return $.datepicker._base_doKeyPress(e)
        }, $.datepicker._base_updateAlternate = $.datepicker._updateAlternate, $.datepicker._updateAlternate = function(e) {
            var t = this._get(e, "timepicker");
            if (t) {
                var i = t._defaults.altField;
                if (i) {
                    var s = (t._defaults.altFormat || t._defaults.dateFormat, this._getDate(e)),
                        n = $.datepicker._getFormatConfig(e),
                        a = "",
                        r = t._defaults.altSeparator ? t._defaults.altSeparator : t._defaults.separator,
                        l = t._defaults.altTimeSuffix ? t._defaults.altTimeSuffix : t._defaults.timeSuffix,
                        o = null !== t._defaults.altTimeFormat ? t._defaults.altTimeFormat : t._defaults.timeFormat;
                    a += $.datepicker.formatTime(o, t, t._defaults) + l, t._defaults.timeOnly || t._defaults.altFieldTimeOnly || null === s || (a = t._defaults.altFormat ? $.datepicker.formatDate(t._defaults.altFormat, s, n) + r + a : t.formattedDate + r + a), $(i).val(e.input.val() ? a : "")
                }
            } else $.datepicker._base_updateAlternate(e)
        }, $.datepicker._base_doKeyUp = $.datepicker._doKeyUp, $.datepicker._doKeyUp = function(e) {
            var t = $.datepicker._getInst(e.target),
                i = $.datepicker._get(t, "timepicker");
            if (i && i._defaults.timeOnly && t.input.val() !== t.lastVal) try {
                $.datepicker._updateDatepicker(t)
            } catch (s) {
                $.timepicker.log(s)
            }
            return $.datepicker._base_doKeyUp(e)
        }, $.datepicker._base_gotoToday = $.datepicker._gotoToday, $.datepicker._gotoToday = function(e) {
            var t = this._getInst($(e)[0]),
                i = (t.dpDiv, this._get(t, "timepicker"));
            selectLocalTimezone(i);
            var s = new Date;
            this._setTime(t, s), this._setDate(t, s), this._base_gotoToday(e)
        }, $.datepicker._disableTimepickerDatepicker = function(e) {
            var t = this._getInst(e);
            if (t) {
                var i = this._get(t, "timepicker");
                $(e).datepicker("getDate"), i && (t.settings.showTimepicker = !1, i._defaults.showTimepicker = !1, i._updateDateTime(t))
            }
        }, $.datepicker._enableTimepickerDatepicker = function(e) {
            var t = this._getInst(e);
            if (t) {
                var i = this._get(t, "timepicker");
                $(e).datepicker("getDate"), i && (t.settings.showTimepicker = !0, i._defaults.showTimepicker = !0, i._addTimePicker(t), i._updateDateTime(t))
            }
        }, $.datepicker._setTime = function(e, t) {
            var i = this._get(e, "timepicker");
            if (i) {
                var s = i._defaults;
                i.hour = t ? t.getHours() : s.hour, i.minute = t ? t.getMinutes() : s.minute, i.second = t ? t.getSeconds() : s.second, i.millisec = t ? t.getMilliseconds() : s.millisec, i.microsec = t ? t.getMicroseconds() : s.microsec, i._limitMinMaxDateTime(e, !0), i._onTimeChange(), i._updateDateTime(e)
            }
        }, $.datepicker._setTimeDatepicker = function(e, t, i) {
            var s = this._getInst(e);
            if (s) {
                var n = this._get(s, "timepicker");
                if (n) {
                    this._setDateFromField(s);
                    var a;
                    t && ("string" == typeof t ? (n._parseTime(t, i), a = new Date, a.setHours(n.hour, n.minute, n.second, n.millisec), a.setMicroseconds(n.microsec)) : (a = new Date(t.getTime()), a.setMicroseconds(t.getMicroseconds())), "Invalid Date" === a.toString() && (a = void 0), this._setTime(s, a))
                }
            }
        }, $.datepicker._base_setDateDatepicker = $.datepicker._setDateDatepicker, $.datepicker._setDateDatepicker = function(e, t) {
            var i = this._getInst(e),
                s = t;
            if (i) {
                "string" == typeof t && (s = new Date(t), s.getTime() || (this._base_setDateDatepicker.apply(this, arguments), s = $(e).datepicker("getDate")));
                var n, a = this._get(i, "timepicker");
                s instanceof Date ? (n = new Date(s.getTime()), n.setMicroseconds(s.getMicroseconds())) : n = s, a && n && (a.support.timezone || null !== a._defaults.timezone || (a.timezone = -1 * n.getTimezoneOffset()), s = $.timepicker.timezoneAdjust(s, a.timezone), n = $.timepicker.timezoneAdjust(n, a.timezone)), this._updateDatepicker(i), this._base_setDateDatepicker.apply(this, arguments), this._setTimeDatepicker(e, n, !0)
            }
        }, $.datepicker._base_getDateDatepicker = $.datepicker._getDateDatepicker, $.datepicker._getDateDatepicker = function(e, t) {
            var i = this._getInst(e);
            if (i) {
                var s = this._get(i, "timepicker");
                if (s) {
                    void 0 === i.lastVal && this._setDateFromField(i, t);
                    var n = this._getDate(i),
                        a = $.trim(s.$altInput && s._defaults.altFieldTimeOnly ? s.$input.val() + " " + s.$altInput.val() : s.$input.val());
                    return n && s._parseTime(a, !i.settings.timeOnly) && (n.setHours(s.hour, s.minute, s.second, s.millisec), n.setMicroseconds(s.microsec), null != s.timezone && (s.support.timezone || null !== s._defaults.timezone || (s.timezone = -1 * n.getTimezoneOffset()), n = $.timepicker.timezoneAdjust(n, s.timezone))), n
                }
                return this._base_getDateDatepicker(e, t)
            }
        }, $.datepicker._base_parseDate = $.datepicker.parseDate, $.datepicker.parseDate = function(e, t, i) {
            var s;
            try {
                s = this._base_parseDate(e, t, i)
            } catch (n) {
                if (!(n.indexOf(":") >= 0)) throw n;
                s = this._base_parseDate(e, t.substring(0, t.length - (n.length - n.indexOf(":") - 2)), i), $.timepicker.log("Error parsing the date string: " + n + "\ndate string = " + t + "\ndate format = " + e)
            }
            return s
        }, $.datepicker._base_formatDate = $.datepicker._formatDate, $.datepicker._formatDate = function(e, t, i, s) {
            var n = this._get(e, "timepicker");
            return n ? (n._updateDateTime(e), n.$input.val()) : this._base_formatDate(e)
        }, $.datepicker._base_optionDatepicker = $.datepicker._optionDatepicker, $.datepicker._optionDatepicker = function(e, t, i) {
            var s, n = this._getInst(e);
            if (!n) return null;
            var a = this._get(n, "timepicker");
            if (a) {
                var r, l, o, c, u = null,
                    m = null,
                    d = null,
                    h = a._defaults.evnts,
                    p = {};
                if ("string" == typeof t) {
                    if ("minDate" === t || "minDateTime" === t) u = i;
                    else if ("maxDate" === t || "maxDateTime" === t) m = i;
                    else if ("onSelect" === t) d = i;
                    else if (h.hasOwnProperty(t)) {
                        if ("undefined" == typeof i) return h[t];
                        p[t] = i, s = {}
                    }
                } else if ("object" == typeof t) {
                    t.minDate ? u = t.minDate : t.minDateTime ? u = t.minDateTime : t.maxDate ? m = t.maxDate : t.maxDateTime && (m = t.maxDateTime);
                    for (r in h) h.hasOwnProperty(r) && t[r] && (p[r] = t[r])
                }
                for (r in p) p.hasOwnProperty(r) && (h[r] = p[r], s || (s = $.extend({}, t)), delete s[r]);
                if (s && isEmptyObject(s)) return;
                if (u ? (u = 0 === u ? new Date : new Date(u), a._defaults.minDate = u, a._defaults.minDateTime = u) : m ? (m = 0 === m ? new Date : new Date(m), a._defaults.maxDate = m, a._defaults.maxDateTime = m) : d && (a._defaults.onSelect = d), u || m) return c = $(e), o = c.datetimepicker("getDate"), l = this._base_optionDatepicker.call($.datepicker, e, s || t, i), c.datetimepicker("setDate", o), l
            }
            return void 0 === i ? this._base_optionDatepicker.call($.datepicker, e, t) : this._base_optionDatepicker.call($.datepicker, e, s || t, i)
        };
        var isEmptyObject = function(e) {
                var t;
                for (t in e)
                    if (e.hasOwnProperty(t)) return !1;
                return !0
            },
            extendRemove = function(e, t) {
                $.extend(e, t);
                for (var i in t) null !== t[i] && void 0 !== t[i] || (e[i] = t[i]);
                return e
            },
            detectSupport = function(e) {
                var t = e.replace(/'.*?'/g, "").toLowerCase(),
                    i = function(e, t) {
                        return -1 !== e.indexOf(t)
                    };
                return {
                    hour: i(t, "h"),
                    minute: i(t, "m"),
                    second: i(t, "s"),
                    millisec: i(t, "l"),
                    microsec: i(t, "c"),
                    timezone: i(t, "z"),
                    ampm: i(t, "t") && i(e, "h"),
                    iso8601: i(e, "Z")
                }
            },
            convert24to12 = function(e) {
                return e %= 12, 0 === e && (e = 12), String(e)
            },
            computeEffectiveSetting = function(e, t) {
                return e && e[t] ? e[t] : $.timepicker._defaults[t]
            },
            splitDateTime = function(e, t) {
                var i = computeEffectiveSetting(t, "separator"),
                    s = computeEffectiveSetting(t, "timeFormat"),
                    n = s.split(i),
                    a = n.length,
                    r = e.split(i),
                    l = r.length;
                return l > 1 ? {
                    dateString: r.splice(0, l - a).join(i),
                    timeString: r.splice(0, a).join(i)
                } : {
                    dateString: e,
                    timeString: ""
                }
            },
            parseDateTimeInternal = function(e, t, i, s, n) {
                var a, r, l;
                if (r = splitDateTime(i, n), a = $.datepicker._base_parseDate(e, r.dateString, s), "" === r.timeString) return {
                    date: a
                };
                if (l = $.datepicker.parseTime(t, r.timeString, n), !l) throw "Wrong time format";
                return {
                    date: a,
                    timeObj: l
                }
            },
            selectLocalTimezone = function(e, t) {
                if (e && e.timezone_select) {
                    var i = t || new Date;
                    e.timezone_select.val(-i.getTimezoneOffset())
                }
            };
        $.timepicker = new Timepicker, $.timepicker.timezoneOffsetString = function(e, t) {
            if (isNaN(e) || e > 840 || -720 > e) return e;
            var i = e,
                s = i % 60,
                n = (i - s) / 60,
                a = t ? ":" : "",
                r = (i >= 0 ? "+" : "-") + ("0" + Math.abs(n)).slice(-2) + a + ("0" + Math.abs(s)).slice(-2);
            return "+00:00" === r ? "Z" : r
        }, $.timepicker.timezoneOffsetNumber = function(e) {
            var t = e.toString().replace(":", "");
            return "Z" === t.toUpperCase() ? 0 : /^(\-|\+)\d{4}$/.test(t) ? ("-" === t.substr(0, 1) ? -1 : 1) * (60 * parseInt(t.substr(1, 2), 10) + parseInt(t.substr(3, 2), 10)) : e
        }, $.timepicker.timezoneAdjust = function(e, t) {
            var i = $.timepicker.timezoneOffsetNumber(t);
            return isNaN(i) || e.setMinutes(e.getMinutes() + -e.getTimezoneOffset() - i), e
        }, $.timepicker.timeRange = function(e, t, i) {
            return $.timepicker.handleRange("timepicker", e, t, i)
        }, $.timepicker.datetimeRange = function(e, t, i) {
            $.timepicker.handleRange("datetimepicker", e, t, i)
        }, $.timepicker.dateRange = function(e, t, i) {
            $.timepicker.handleRange("datepicker", e, t, i)
        }, $.timepicker.handleRange = function(e, t, i, s) {
            function n(n, a) {
                var r = t[e]("getDate"),
                    l = i[e]("getDate"),
                    o = n[e]("getDate");
                if (null !== r) {
                    var c = new Date(r.getTime()),
                        u = new Date(r.getTime());
                    c.setMilliseconds(c.getMilliseconds() + s.minInterval), u.setMilliseconds(u.getMilliseconds() + s.maxInterval), s.minInterval > 0 && c > l ? i[e]("setDate", c) : s.maxInterval > 0 && l > u ? i[e]("setDate", u) : r > l && a[e]("setDate", o)
                }
            }

            function a(t, i, n) {
                if (t.val()) {
                    var a = t[e].call(t, "getDate");
                    null !== a && s.minInterval > 0 && ("minDate" === n && a.setMilliseconds(a.getMilliseconds() + s.minInterval), "maxDate" === n && a.setMilliseconds(a.getMilliseconds() - s.minInterval)), a.getTime && i[e].call(i, "option", n, a)
                }
            }
            s = $.extend({}, {
                minInterval: 0,
                maxInterval: 0,
                start: {},
                end: {}
            }, s);
            var r = !1;
            return "timepicker" === e && (r = !0, e = "datetimepicker"), $.fn[e].call(t, $.extend({
                timeOnly: r,
                onClose: function(e, t) {
                    n($(this), i)
                },
                onSelect: function(e) {
                    a($(this), i, "minDate")
                }
            }, s, s.start)), $.fn[e].call(i, $.extend({
                timeOnly: r,
                onClose: function(e, i) {
                    n($(this), t)
                },
                onSelect: function(e) {
                    a($(this), t, "maxDate")
                }
            }, s, s.end)), n(t, i), a(t, i, "minDate"), a(i, t, "maxDate"), $([t.get(0), i.get(0)])
        }, $.timepicker.log = function() {
            window.console && window.console.log.apply(window.console, Array.prototype.slice.call(arguments))
        }, $.timepicker._util = {
            _extendRemove: extendRemove,
            _isEmptyObject: isEmptyObject,
            _convert24to12: convert24to12,
            _detectSupport: detectSupport,
            _selectLocalTimezone: selectLocalTimezone,
            _computeEffectiveSetting: computeEffectiveSetting,
            _splitDateTime: splitDateTime,
            _parseDateTimeInternal: parseDateTimeInternal
        }, Date.prototype.getMicroseconds || (Date.prototype.microseconds = 0, Date.prototype.getMicroseconds = function() {
            return this.microseconds
        }, Date.prototype.setMicroseconds = function(e) {
            return this.setMilliseconds(this.getMilliseconds() + Math.floor(e / 1e3)), this.microseconds = e % 1e3, this
        }), $.timepicker.version = "1.5.3"
    }
});
var ProfanityList = ["4r5e", "5h1t", "5hit", "a55", "anal", "anilingus", "anus", "ar5e", "arrse", "arse", "arsehole", "ass", "ass", "asses", "assfucker", "assfukka", "asshole", "assholes", "assmucus", "assmunch", "asswhole", "b00bs", "b17ch", "b1tch", "ballbag", "ballsack", "bangbros", "bareback", "bastard", "beastial", "beastiality", "bellend", "bestial", "bestiality", "biatch", "bimbos", "birdlock", "bitch", "bitcher", "bitchers", "bitches", "bitchin", "bitching", "blowjob", "blowjobs", "blumpkin", "boiola", "boiolas", "bollock", "bollok", "boner", "boob", "boobs", "booobs", "boooobs", "booooobs", "booooooobs", "breasts", "buceta", "bugger", "bum", "busty", "butt", "butthole", "buttmuch", "buttplug", "c0ck", "c0cksucker", "carpetmuncher", "cawk", "chink", "choade", "cipa", "cl1t", "clit", "clitoris", "clits", "clusterfuck", "cnut", "cock", "cockface", "cockhead", "cockmunch", "cockmuncher", "cocks", "cocksuck", "cocksucked", "cocksucker", "cock-sucker", "cocksucking", "cocksucks", "cocksuka", "cocksukka", "coon", "cornhole", "cox", "cum", "cumdump", "cummer", "cumming", "cums", "cumshot", "cunilingus", "cunillingus", "cunnilingus", "cunt", "cuntbag", "cuntlick", "cuntlicker", "cuntlicking", "cunts", "cuntsicle", "cyberfuc", "cyberfuck", "cyberfucked", "cyberfucker", "cyberfuckers", "cyberfucking", "d1ck", "dick", "dickhead", "dildo", "dildos", "dlck", "doggiestyle", "doggin", "dogging", "donkeyribber", "doosh", "duche", "dyke", "ejaculate", "ejaculated", "ejaculates", "ejaculating", "ejaculatings", "ejaculation", "ejakulate", "erotic", "f4nny", "facial", "fag", "fagging", "faggitt", "faggot", "faggs", "fagot", "fagots", "fags", "fanny", "fannyflaps", "fannyfucker", "fanyy", "fatass", "fcuk", "fcuker", "fcuking", "feck", "fecker", "felch", "felcher", "felching", "fellate", "fellatio", "fingerfuck", "fingerfucked", "fingerfucker", "fingerfuckers", "fingerfucking", "fingerfucks", "fistfuck", "fistfucked", "fistfucker", "fistfuckers", "fistfucking", "fistfuckings", "fistfucks", "fook", "fooker", "fuck", "fucka", "fucked", "fucker", "fuckers", "fuckhead", "fuckheads", "fuckin", "fucking", "fuckings", "fuckme", "fuckmeat", "fucks", "fucktoy", "fuckwhit", "fuckwit", "fudgepacker", "fuk", "fuker", "fukker", "fukkin", "fuks", "fukwhit", "fukwit", "fux", "fux0r", "gangbang", "gang-bang", "gangbanged", "gangbangs", "gaylord", "gaysex", "goatse", "hardcoresex", "hoar", "hoare", "hoer", "homo", "homoerotic", "hore", "horniest", "horny", "hotsex", "jackoff", "jap", "jerk", "jism", "jiz", "jizm", "jizz", "kawk", "knob", "knobead", "knobed", "knobend", "knobhead", "knobjocky", "knobjokey", "kock", "kondum", "kondums", "kum", "kummer", "kumming", "kums", "kunilingus", "kwif", "l3itch", "labia", "lmao", "lmfao", "lmfao", "lust", "lusting", "m0f0", "m0fo", "m45terbate", "ma5terb8", "ma5terbate", "mafugly", "masochist", "masterb8", "masterbat3", "masterbate", "masterbation", "masterbations", "masturbate", "mof0", "mofo", "mothafuck", "mothafucka", "mothafuckas", "mothafuckaz", "mothafucked", "mothafucker", "mothafuckers", "mothafuckin", "mothafucking", "mothafuckings", "mothafucks", "motherfuck", "motherfucked", "motherfucker", "motherfuckers", "motherfuckin", "motherfucking", "motherfuckings", "motherfuckka", "motherfucks", "muff", "mutha", "muthafecker", "muthafuckker", "mutherfucker", "n1gga", "n1gger", "nazi", "nigg3r", "nigg4h", "nigga", "niggah", "niggas", "niggaz", "nigger", "niggers", "nob", "nobhead", "nobjocky", "nobjokey", "numbnuts", "nutsack", "orgasim", "orgasims", "orgasm", "orgasms", "p0rn", "pawn", "pecker", "penis", "penisfucker", "phonesex", "phuck", "phuk", "phuked", "phuking", "phukked", "phukking", "phuks", "phuq", "pigfucker", "pimpis", "piss", "pissed", "pisser", "pissers", "pisses", "pissflaps", "pissin", "pissing", "pissoff", "poop", "porn", "porno", "pornography", "pornos", "prick", "pricks", "pron", "pube", "pusse", "pussi", "pussies", "pussy", "pussys", "queaf", "queer", "rectum", "retard", "rimjaw", "rimming", "schlong", "screwing", "scroat", "scrote", "scrotum", "semen", "sex", "sh1t", "shag", "shagger", "shaggin", "shagging", "shemale", "shit", "shitdick", "shite", "shited", "shitey", "shitfuck", "shitfull", "shithead", "shiting", "shitings", "shits", "shitted", "shitter", "shitters", "shitting", "shittings", "shitty", "skank", "slut", "sluts", "smegma", "smut", "spac", "spunk", "t1tt1e5", "t1tties", "teets", "teez", "testical", "testicle", "tit", "titfuck", "tits", "titt", "tittie5", "tittiefucker", "titties", "tittyfuck", "tittywank", "titwank", "tosser", "turd", "tw4t", "twat", "twathead", "twatty", "twunt", "twunter", "v14gra", "v1gra", "vagina", "viagra", "vulva", "wang", "wank", "wanker", "wanky", "whoar", "whore", "willies", "willy", "wtf", "xrated", "xxx"];
var PositiveList = ["abound", "abounds", "abundance", "abundant", "accessable", "accessible", "acclaim", "acclaimed", "acclamation", "accolade", "accolades", "accommodative", "accomodative", "accomplish", "accomplished", "accomplishment", "accomplishments", "accurate", "accurately", "achievable", "achievement", "achievements", "achievible", "acumen", "adaptable", "adaptive", "adequate", "adjustable", "admirable", "admirably", "admiration", "admire", "admirer", "admiring", "admiringly", "adorable", "adore", "adored", "adorer", "adoring", "adoringly", "adroit", "adroitly", "adulate", "adulation", "adulatory", "advanced", "advantage", "advantageous", "advantageously", "advantages", "adventuresome", "adventurous", "advocate", "advocated", "advocates", "affability", "affable", "affably", "affectation", "affection", "affectionate", "affinity", "affirm", "affirmation", "affirmative", "affluence", "affluent", "afford", "affordable", "affordably", "afordable", "agile", "agilely", "agility", "agreeable", "agreeableness", "agreeably", "all-around", "alluring", "alluringly", "altruistic", "altruistically", "amaze", "amazed", "amazement", "amazes", "amazing", "amazingly", "ambitious", "ambitiously", "ameliorate", "amenable", "amenity", "amiability", "amiabily", "amiable", "amicability", "amicable", "amicably", "amity", "ample", "amply", "amuse", "amusing", "amusingly", "angel", "angelic", "apotheosis", "appeal", "appealing", "applaud", "appreciable", "appreciate", "appreciated", "appreciates", "appreciative", "appreciatively", "appropriate", "approval", "approve", "ardent", "ardently", "ardor", "articulate", "aspiration", "aspirations", "aspire", "assurance", "assurances", "assure", "assuredly", "assuring", "astonish", "astonished", "astonishing", "astonishingly", "astonishment", "astound", "astounded", "astounding", "astoundingly", "astutely", "attentive", "attraction", "attractive", "attractively", "attune", "audible", "audibly", "auspicious", "authentic", "authoritative", "autonomous", "available", "aver", "avid", "avidly", "award", "awarded", "awards", "awe", "awed", "awesome", "awesomely", "awesomeness", "awestruck", "awsome", "backbone", "balanced", "bargain", "beauteous", "beautiful", "beautifullly", "beautifully", "beautify", "beauty", "beckon", "beckoned", "beckoning", "beckons", "believable", "believeable", "beloved", "benefactor", "beneficent", "beneficial", "beneficially", "beneficiary", "benefit", "benefits", "benevolence", "benevolent", "benifits", "best", "best-known", "best-performing", "best-selling", "better", "better-known", "better-than-expected", "beutifully", "blameless", "bless", "blessing", "bliss", "blissful", "blissfully", "blithe", "blockbuster", "bloom", "blossom", "bolster", "bonny", "bonus", "bonuses", "boom", "booming", "boost", "boundless", "bountiful", "brainiest", "brainy", "brand-new", "brave", "bravery", "bravo", "breakthrough", "breakthroughs", "breathlessness", "breathtaking", "breathtakingly", "breeze", "bright", "brighten", "brighter", "brightest", "brilliance", "brilliances", "brilliant", "brilliantly", "brisk", "brotherly", "bullish", "buoyant", "cajole", "calm", "calming", "calmness", "capability", "capable", "capably", "captivate", "captivating", "carefree", "cashback", "cashbacks", "catchy", "celebrate", "celebrated", "celebration", "celebratory", "champ", "champion", "charisma", "charismatic", "charitable", "charm", "charming", "charmingly", "chaste", "cheaper", "cheapest", "cheer", "cheerful", "cheery", "cherish", "cherished", "cherub", "chic", "chivalrous", "chivalry", "civility", "civilize", "clarity", "classic", "classy", "clean", "cleaner", "cleanest", "cleanliness", "cleanly", "clear", "clear-cut", "cleared", "clearer", "clearly", "clears", "clever", "cleverly", "cohere", "coherence", "coherent", "cohesive", "colorful", "comely", "comfort", "comfortable", "comfortably", "comforting", "comfy", "commend", "commendable", "commendably", "commitment", "commodious", "compact", "compactly", "compassion", "compassionate", "compatible", "competitive", "complement", "complementary", "complemented", "complements", "compliant", "compliment", "complimentary", "comprehensive", "conciliate", "conciliatory", "concise", "confidence", "confident", "congenial", "congratulate", "congratulation", "congratulations", "congratulatory", "conscientious", "considerate", "consistent", "consistently", "constructive", "consummate", "contentment", "continuity", "contrasty", "contribution", "convenience", "convenient", "conveniently", "convience", "convienient", "convient", "convincing", "convincingly", "cool", "coolest", "cooperative", "cooperatively", "cornerstone", "correct", "correctly", "cost-effective", "cost-saving", "counter-attack", "counter-attacks", "courage", "courageous", "courageously", "courageousness", "courteous", "courtly", "covenant", "cozy", "creative", "credence", "credible", "crisp", "crisper", "cure", "cure-all", "cushy", "cute", "cuteness", "danke", "danken", "daring", "daringly", "darling", "dashing", "dauntless", "dawn", "dazzle", "dazzled", "dazzling", "dead-cheap", "dead-on", "decency", "decent", "decisive", "decisiveness", "dedicated", "defeat", "defeated", "defeating", "defeats", "defender", "deference", "deft", "deginified", "delectable", "delicacy", "delicate", "delicious", "delight", "delighted", "delightful", "delightfully", "delightfulness", "dependable", "dependably", "deservedly", "deserving", "desirable", "desiring", "desirous", "destiny", "detachable", "devout", "dexterous", "dexterously", "dextrous", "dignified", "dignify", "dignity", "diligence", "diligent", "diligently", "diplomatic", "dirt-cheap", "distinction", "distinctive", "distinguished", "diversified", "divine", "divinely", "dominate", "dominated", "dominates", "dote", "dotingly", "doubtless", "dreamland", "dumbfounded", "dumbfounding", "dummy-proof", "durable", "dynamic", "eager", "eagerly", "eagerness", "earnest", "earnestly", "earnestness", "ease", "eased", "eases", "easier", "easiest", "easiness", "easing", "easy", "easy-to-use", "easygoing", "ebullience", "ebullient", "ebulliently", "ecenomical", "economical", "ecstasies", "ecstasy", "ecstatic", "ecstatically", "edify", "educated", "effective", "effectively", "effectiveness", "effectual", "efficacious", "efficient", "efficiently", "effortless", "effortlessly", "effusion", "effusive", "effusively", "effusiveness", "elan", "elate", "elated", "elatedly", "elation", "electrify", "elegance", "elegant", "elegantly", "elevate", "elite", "eloquence", "eloquent", "eloquently", "embolden", "eminence", "eminent", "empathize", "empathy", "empower", "empowerment", "enchant", "enchanted", "enchanting", "enchantingly", "encourage", "encouragement", "encouraging", "encouragingly", "endear", "endearing", "endorse", "endorsed", "endorsement", "endorses", "endorsing", "energetic", "energize", "energy-efficient", "energy-saving", "engaging", "engrossing", "enhance", "enhanced", "enhancement", "enhances", "enjoy", "enjoyable", "enjoyably", "enjoyed", "enjoying", "enjoyment", "enjoys", "enlighten", "enlightenment", "enliven", "ennoble", "enough", "enrapt", "enrapture", "enraptured", "enrich", "enrichment", "enterprising", "entertain", "entertaining", "entertains", "enthral", "enthrall", "enthralled", "enthuse", "enthusiasm", "enthusiast", "enthusiastic", "enthusiastically", "entice", "enticed", "enticing", "enticingly", "entranced", "entrancing", "entrust", "enviable", "enviably", "envious", "enviously", "enviousness", "envy", "equitable", "ergonomical", "err-free", "erudite", "ethical", "eulogize", "euphoria", "euphoric", "euphorically", "evaluative", "evenly", "eventful", "everlasting", "evocative", "exalt", "exaltation", "exalted", "exaltedly", "exalting", "exaltingly", "examplar", "examplary", "excallent", "exceed", "exceeded", "exceeding", "exceedingly", "exceeds", "excel", "exceled", "excelent", "excellant", "excelled", "excellence", "excellency", "excellent", "excellently", "excels", "exceptional", "exceptionally", "excite", "excited", "excitedly", "excitedness", "excitement", "excites", "exciting", "excitingly", "exellent", "exemplar", "exemplary", "exhilarate", "exhilarating", "exhilaratingly", "exhilaration", "exonerate", "expansive", "expeditiously", "expertly", "exquisite", "exquisitely", "extol", "extoll", "extraordinarily", "extraordinary", "exuberance", "exuberant", "exuberantly", "exult", "exultant", "exultation", "exultingly", "eye-catch", "eye-catching", "eyecatch", "eyecatching", "fabulous", "fabulously", "facilitate", "fair", "fairly", "fairness", "faith", "faithful", "faithfully", "faithfulness", "fame", "famed", "famous", "famously", "fancier", "fancinating", "fancy", "fanfare", "fans", "fantastic", "fantastically", "fascinate", "fascinating", "fascinatingly", "fascination", "fashionable", "fashionably", "fast", "fast-growing", "fast-paced", "faster", "fastest", "fastest-growing", "faultless", "fav", "fave", "favor", "favorable", "favored", "favorite", "favorited", "favour", "fearless", "fearlessly", "feasible", "feasibly", "feat", "feature-rich", "fecilitous", "feisty", "felicitate", "felicitous", "felicity", "fertile", "fervent", "fervently", "fervid", "fervidly", "fervor", "festive", "fidelity", "fiery", "fine", "fine-looking", "finely", "finer", "finest", "firmer", "first-class", "first-in-class", "first-rate", "flashy", "flatter", "flattering", "flatteringly", "flawless", "flawlessly", "flexibility", "flexible", "flourish", "flourishing", "fluent", "flutter", "fond", "fondly", "fondness", "foolproof", "foremost", "foresight", "formidable", "fortitude", "fortuitous", "fortuitously", "fortunate", "fortunately", "fortune", "fragrant", "free", "freed", "freedom", "freedoms", "fresh", "fresher", "freshest", "friendliness", "friendly", "frolic", "frugal", "fruitful", "ftw", "fulfillment", "fun", "futurestic", "futuristic", "gaiety", "gaily", "gain", "gained", "gainful", "gainfully", "gaining", "gains", "gallant", "gallantly", "galore", "geekier", "geeky", "gem", "gems", "generosity", "generous", "generously", "genial", "genius", "gentle", "gentlest", "genuine", "gifted", "glad", "gladden", "gladly", "gladness", "glamorous", "glee", "gleeful", "gleefully", "glimmer", "glimmering", "glisten", "glistening", "glitter", "glitz", "glorify", "glorious", "gloriously", "glory", "glow", "glowing", "glowingly", "god-given", "god-send", "godlike", "godsend", "gold", "golden", "good", "goodly", "goodness", "goodwill", "goood", "gooood", "gorgeous", "gorgeously", "grace", "graceful", "gracefully", "gracious", "graciously", "graciousness", "grand", "grandeur", "grateful", "gratefully", "gratification", "gratified", "gratifies", "gratify", "gratifying", "gratifyingly", "gratitude", "great", "greatest", "greatness", "grin", "groundbreaking", "guarantee", "guidance", "guiltless", "gumption", "gush", "gusto", "gutsy", "hail", "halcyon", "hale", "hallmark", "hallmarks", "hallowed", "handier", "handily", "hands-down", "handsome", "handsomely", "handy", "happier", "happily", "happiness", "happy", "hard-working", "hardier", "hardy", "harmless", "harmonious", "harmoniously", "harmonize", "harmony", "headway", "heal", "healthful", "healthy", "hearten", "heartening", "heartfelt", "heartily", "heartwarming", "heaven", "heavenly", "helped", "helpful", "helping", "hero", "heroic", "heroically", "heroine", "heroize", "heros", "high-quality", "high-spirited", "hilarious", "holy", "homage", "honest", "honesty", "honor", "honorable", "honored", "honoring", "hooray", "hopeful", "hospitable", "hot", "hotcake", "hotcakes", "hottest", "hug", "humane", "humble", "humility", "humor", "humorous", "humorously", "humour", "humourous", "ideal", "idealize", "ideally", "idol", "idolize", "idolized", "idyllic", "illuminate", "illuminati", "illuminating", "illumine", "illustrious", "ilu", "imaculate", "imaginative", "immaculate", "immaculately", "immense", "impartial", "impartiality", "impartially", "impassioned", "impeccable", "impeccably", "important", "impress", "impressed", "impresses", "impressive", "impressively", "impressiveness", "improve", "improved", "improvement", "improvements", "improves", "improving", "incredible", "incredibly", "indebted", "individualized", "indulgence", "indulgent", "industrious", "inestimable", "inestimably", "inexpensive", "infallibility", "infallible", "infallibly", "influential", "ingenious", "ingeniously", "ingenuity", "ingenuous", "ingenuously", "innocuous", "innovation", "innovative", "inpressed", "insightful", "insightfully", "inspiration", "inspirational", "inspire", "inspiring", "instantly", "instructive", "instrumental", "integral", "integrated", "intelligence", "intelligent", "intelligible", "interesting", "interests", "intimacy", "intimate", "intricate", "intrigue", "intriguing", "intriguingly", "intuitive", "invaluable", "invaluablely", "inventive", "invigorate", "invigorating", "invincibility", "invincible", "inviolable", "inviolate", "invulnerable", "irreplaceable", "irreproachable", "irresistible", "irresistibly", "issue-free", "jaw-droping", "jaw-dropping", "jollify", "jolly", "jovial", "joy", "joyful", "joyfully", "joyous", "joyously", "jubilant", "jubilantly", "jubilate", "jubilation", "jubiliant", "judicious", "justly", "keen", "keenly", "keenness", "kid-friendly", "kindliness", "kindly", "kindness", "knowledgeable", "kudos", "large-capacity", "laud", "laudable", "laudably", "lavish", "lavishly", "law-abiding", "lawful", "lawfully", "lead", "leading", "leads", "lean", "led", "legendary", "leverage", "levity", "liberate", "liberation", "liberty", "lifesaver", "light-hearted", "lighter", "likable", "like", "liked", "likes", "liking", "lionhearted", "lively", "logical", "long-lasting", "lovable", "lovably", "love", "loved", "loveliness", "lovely", "lover", "loves", "loving", "low-cost", "low-price", "low-priced", "low-risk", "lower-priced", "loyal", "loyalty", "lucid", "lucidly", "luck", "luckier", "luckiest", "luckiness", "lucky", "lucrative", "luminous", "lush", "luster", "lustrous", "luxuriant", "luxuriate", "luxurious", "luxuriously", "luxury", "lyrical", "magic", "magical", "magnanimous", "magnanimously", "magnificence", "magnificent", "magnificently", "majestic", "majesty", "manageable", "maneuverable", "marvel", "marveled", "marvelled", "marvellous", "marvelous", "marvelously", "marvelousness", "marvels", "master", "masterful", "masterfully", "masterpiece", "masterpieces", "masters", "mastery", "matchless", "mature", "maturely", "maturity", "meaningful", "memorable", "merciful", "mercifully", "mercy", "merit", "meritorious", "merrily", "merriment", "merriness", "merry", "mesmerize", "mesmerized", "mesmerizes", "mesmerizing", "mesmerizingly", "meticulous", "meticulously", "mightily", "mighty", "mind-blowing", "miracle", "miracles", "miraculous", "miraculously", "miraculousness", "modern", "modest", "modesty", "momentous", "monumental", "monumentally", "morality", "motivated", "multi-purpose", "navigable", "neat", "neatest", "neatly", "nice", "nicely", "nicer", "nicest", "nifty", "nimble", "noble", "nobly", "noiseless", "non-violence", "non-violent", "notably", "noteworthy", "nourish", "nourishing", "nourishment", "novelty", "nurturing", "oasis", "obsession", "obsessions", "obtainable", "openly", "openness", "optimal", "optimism", "optimistic", "opulent", "orderly", "originality", "outdo", "outdone", "outperform", "outperformed", "outperforming", "outperforms", "outshine", "outshone", "outsmart", "outstanding", "outstandingly", "outstrip", "outwit", "ovation", "overjoyed", "overtake", "overtaken", "overtakes", "overtaking", "overtook", "overture", "pain-free", "painless", "painlessly", "palatial", "pamper", "pampered", "pamperedly", "pamperedness", "pampers", "panoramic", "paradise", "paramount", "pardon", "passion", "passionate", "passionately", "patience", "patient", "patiently", "patriot", "patriotic", "peace", "peaceable", "peaceful", "peacefully", "peacekeepers", "peach", "peerless", "pep", "pepped", "pepping", "peppy", "peps", "perfect", "perfection", "perfectly", "permissible", "perseverance", "persevere", "personages", "personalized", "phenomenal", "phenomenally", "picturesque", "piety", "pinnacle", "playful", "playfully", "pleasant", "pleasantly", "pleased", "pleases", "pleasing", "pleasingly", "pleasurable", "pleasurably", "pleasure", "plentiful", "pluses", "plush", "plusses", "poetic", "poeticize", "poignant", "poise", "poised", "polished", "polite", "politeness", "popular", "portable", "posh", "positive", "positively", "positives", "powerful", "powerfully", "praise", "praiseworthy", "praising", "pre-eminent", "precious", "precise", "precisely", "preeminent", "prefer", "preferable", "preferably", "prefered", "preferes", "preferring", "prefers", "premier", "prestige", "prestigious", "prettily", "pretty", "priceless", "pride", "principled", "privilege", "privileged", "prize", "proactive", "problem-free", "problem-solver", "prodigious", "prodigiously", "prodigy", "productive", "productively", "proficient", "proficiently", "profound", "profoundly", "profuse", "profusion", "progress", "progressive", "prolific", "prominence", "prominent", "promise", "promised", "promises", "promising", "promoter", "prompt", "promptly", "proper", "properly", "propitious", "propitiously", "pros", "prosper", "prosperity", "prosperous", "prospros", "protect", "protection", "protective", "proud", "proven", "proves", "providence", "proving", "prowess", "prudence", "prudent", "prudently", "punctual", "pure", "purify", "purposeful", "quaint", "qualified", "qualify", "quicker", "quiet", "quieter", "radiance", "radiant", "rapid", "rapport", "rapt", "rapture", "raptureous", "raptureously", "rapturous", "rapturously", "rational", "razor-sharp", "reachable", "readable", "readily", "ready", "reaffirm", "reaffirmation", "realistic", "realizable", "reasonable", "reasonably", "reasoned", "reassurance", "reassure", "receptive", "reclaim", "recomend", "recommend", "recommendation", "recommendations", "recommended", "reconcile", "reconciliation", "record-setting", "recover", "recovery", "rectification", "rectify", "rectifying", "redeem", "redeeming", "redemption", "refine", "refined", "refinement", "reform", "reformed", "reforming", "reforms", "refresh", "refreshed", "refreshing", "refund", "refunded", "regal", "regally", "regard", "rejoice", "rejoicing", "rejoicingly", "rejuvenate", "rejuvenated", "rejuvenating", "relaxed", "relent", "reliable", "reliably", "relief", "relish", "remarkable", "remarkably", "remedy", "remission", "remunerate", "renaissance", "renewed", "renown", "renowned", "replaceable", "reputable", "reputation", "resilient", "resolute", "resound", "resounding", "resourceful", "resourcefulness", "respect", "respectable", "respectful", "respectfully", "respite", "resplendent", "responsibly", "responsive", "restful", "restored", "restructure", "restructured", "restructuring", "retractable", "revel", "revelation", "revere", "reverence", "reverent", "reverently", "revitalize", "revival", "revive", "revives", "revolutionary", "revolutionize", "revolutionized", "revolutionizes", "reward", "rewarding", "rewardingly", "rich", "richer", "richly", "richness", "right", "righten", "righteous", "righteously", "righteousness", "rightful", "rightfully", "rightly", "rightness", "risk-free", "robust", "rock-star", "rock-stars", "rockstar", "rockstars", "romantic", "romantically", "romanticize", "roomier", "roomy", "rosy", "safe", "safely", "sagacity", "sagely", "saint", "saintliness", "saintly", "salutary", "salute", "sane", "satisfactorily", "satisfactory", "satisfied", "satisfies", "satisfy", "satisfying", "satisified", "saver", "savings", "savior", "savvy", "scenic", "seamless", "seasoned", "secure", "securely", "selective", "self-determination", "self-respect", "self-satisfaction", "self-sufficiency", "self-sufficient", "sensation", "sensational", "sensationally", "sensations", "sensible", "sensibly", "sensitive", "serene", "serenity", "sexy", "sharp", "sharper", "sharpest", "shimmering", "shimmeringly", "shine", "shiny", "significant", "silent", "simpler", "simplest", "simplified", "simplifies", "simplify", "simplifying", "sincere", "sincerely", "sincerity", "skill", "skilled", "skillful", "skillfully", "slammin", "sleek", "slick", "smart", "smarter", "smartest", "smartly", "smile", "smiles", "smiling", "smilingly", "smitten", "smooth", "smoother", "smoothes", "smoothest", "smoothly", "snappy", "snazzy", "sociable", "soft", "softer", "solace", "solicitous", "solicitously", "solid", "solidarity", "soothe", "soothingly", "sophisticated", "soulful", "soundly", "soundness", "spacious", "sparkle", "sparkling", "spectacular", "spectacularly", "speedily", "speedy", "spellbind", "spellbinding", "spellbindingly", "spellbound", "spirited", "spiritual", "splendid", "splendidly", "splendor", "spontaneous", "sporty", "spotless", "sprightly", "stability", "stabilize", "stable", "stainless", "standout", "state-of-the-art", "stately", "statuesque", "staunch", "staunchly", "staunchness", "steadfast", "steadfastly", "steadfastness", "steadiest", "steadiness", "steady", "stellar", "stellarly", "stimulate", "stimulates", "stimulating", "stimulative", "stirringly", "straighten", "straightforward", "streamlined", "striking", "strikingly", "striving", "strong", "stronger", "strongest", "stunned", "stunning", "stunningly", "stupendous", "stupendously", "sturdier", "sturdy", "stylish", "stylishly", "stylized", "suave", "suavely", "sublime", "subsidize", "subsidized", "subsidizes", "subsidizing", "substantive", "succeed", "succeeded", "succeeding", "succeeds", "succes", "success", "successes", "successful", "successfully", "suffice", "sufficed", "suffices", "sufficient", "sufficiently", "suitable", "sumptuous", "sumptuously", "sumptuousness", "super", "superb", "superbly", "superior", "superiority", "supple", "support", "supported", "supporter", "supporting", "supportive", "supports", "supremacy", "supreme", "supremely", "supurb", "supurbly", "surmount", "surpass", "surreal", "survival", "survivor", "sustainability", "sustainable", "swank", "swankier", "swankiest", "swanky", "sweeping", "sweet", "sweeten", "sweetheart", "sweetly", "sweetness", "swift", "swiftness", "talent", "talented", "talents", "tantalize", "tantalizing", "tantalizingly", "tempt", "tempting", "temptingly", "tenacious", "tenaciously", "tenacity", "tender", "tenderly", "terrific", "terrifically", "thank", "thankful", "thinner", "thoughtful", "thoughtfully", "thoughtfulness", "thrift", "thrifty", "thrill", "thrilled", "thrilling", "thrillingly", "thrills", "thrive", "thriving", "thumb-up", "thumbs-up", "tickle", "tidy", "time-honored", "timely", "tingle", "titillate", "titillating", "titillatingly", "togetherness", "tolerable", "toll-free", "top", "top-notch", "top-quality", "topnotch", "tops", "tough", "tougher", "toughest", "traction", "tranquil", "tranquility", "transparent", "treasure", "tremendously", "trendy", "triumph", "triumphal", "triumphant", "triumphantly", "trivially", "trophy", "trouble-free", "trump", "trumpet", "trust", "trusted", "trusting", "trustingly", "trustworthiness", "trustworthy", "trusty", "truthful", "truthfully", "truthfulness", "twinkly", "ultra-crisp", "unabashed", "unabashedly", "unaffected", "unassailable", "unbeatable", "unbiased", "unbound", "uncomplicated", "unconditional", "undamaged", "undaunted", "understandable", "undisputable", "undisputably", "undisputed", "unencumbered", "unequivocal", "unequivocally", "unfazed", "unfettered", "unforgettable", "unity", "unlimited", "unmatched", "unparalleled", "unquestionable", "unquestionably", "unreal", "unrestricted", "unrivaled", "unselfish", "unwavering", "upbeat", "upgradable", "upgradeable", "upgraded", "upheld", "uphold", "uplift", "uplifting", "upliftingly", "upliftment", "upscale", "usable", "useable", "useful", "user-friendly", "user-replaceable", "valiant", "valiantly", "valor", "valuable", "variety", "venerate", "verifiable", "veritable", "versatile", "versatility", "vibrant", "vibrantly", "victorious", "victory", "viewable", "vigilance", "vigilant", "virtue", "virtuous", "virtuously", "visionary", "vivacious", "vivid", "vouch", "vouchsafe", "warm", "warmer", "warmhearted", "warmly", "warmth", "wealthy", "welcome", "well", "well-backlit", "well-balanced", "well-behaved", "well-being", "well-bred", "well-connected", "well-educated", "well-established", "well-informed", "well-intentioned", "well-known", "well-made", "well-managed", "well-mannered", "well-positioned", "well-received", "well-regarded", "well-rounded", "well-run", "well-wishers", "wellbeing", "whoa", "wholeheartedly", "wholesome", "whooa", "whoooa", "wieldy", "willing", "willingly", "willingness", "win", "windfall", "winnable", "winner", "winners", "winning", "wins", "wisdom", "wise", "wisely", "witty", "won", "wonder", "wonderful", "wonderfully", "wonderous", "wonderously", "wonders", "wondrous", "woo", "work", "workable", "worked", "works", "world-famous", "worth", "worth-while", "worthiness", "worthwhile", "worthy", "wow", "wowed", "wowing", "wows", "yay", "youthful", "zeal", "zenith", "zest", "zippy"];
var NegativeList = ["2-faced", "2-faces", "abnormal", "abolish", "abominable", "abominably", "abominate", "abomination", "abort", "aborted", "aborts", "abrade", "abrasive", "abrupt", "abruptly", "abscond", "absence", "absent-minded", "absentee", "absurd", "absurdity", "absurdly", "absurdness", "abuse", "abused", "abuses", "abusive", "abysmal", "abysmally", "abyss", "accidental", "accost", "accursed", "accusation", "accusations", "accuse", "accuses", "accusing", "accusingly", "acerbate", "acerbic", "acerbically", "ache", "ached", "aches", "achey", "aching", "acrid", "acridly", "acridness", "acrimonious", "acrimoniously", "acrimony", "adamant", "adamantly", "addict", "addicted", "addicting", "addicts", "admonish", "admonisher", "admonishingly", "admonishment", "admonition", "adulterate", "adulterated", "adulteration", "adulterier", "adversarial", "adversary", "adverse", "adversity", "afflict", "affliction", "afflictive", "affront", "afraid", "aggravate", "aggravating", "aggravation", "aggression", "aggressive", "aggressiveness", "aggressor", "aggrieve", "aggrieved", "aggrivation", "aghast", "agonies", "agonize", "agonizing", "agonizingly", "agony", "aground", "ail", "ailing", "ailment", "aimless", "alarm", "alarmed", "alarming", "alarmingly", "alienate", "alienated", "alienation", "allegation", "allegations", "allege", "allergic", "allergies", "allergy", "aloof", "altercation", "ambiguity", "ambiguous", "ambivalence", "ambivalent", "ambush", "amiss", "amputate", "anarchism", "anarchist", "anarchistic", "anarchy", "anemic", "anger", "angrily", "angriness", "angry", "anguish", "animosity", "annihilate", "annihilation", "annoy", "annoyance", "annoyances", "annoyed", "annoying", "annoyingly", "annoys", "anomalous", "anomaly", "antagonism", "antagonist", "antagonistic", "antagonize", "anti-", "anti-american", "anti-israeli", "anti-occupation", "anti-proliferation", "anti-semites", "anti-social", "anti-us", "anti-white", "antipathy", "antiquated", "antithetical", "anxieties", "anxiety", "anxious", "anxiously", "anxiousness", "apathetic", "apathetically", "apathy", "apocalypse", "apocalyptic", "apologist", "apologists", "appal", "appall", "appalled", "appalling", "appallingly", "apprehension", "apprehensions", "apprehensive", "apprehensively", "arbitrary", "arcane", "archaic", "arduous", "arduously", "argumentative", "arrogance", "arrogant", "arrogantly", "ashamed", "asinine", "asininely", "asinininity", "askance", "asperse", "aspersion", "aspersions", "assail", "assassin", "assassinate", "assault", "assult", "astray", "asunder", "atrocious", "atrocities", "atrocity", "atrophy", "attack", "attacks", "audacious", "audaciously", "audaciousness", "audacity", "audiciously", "austere", "authoritarian", "autocrat", "autocratic", "avalanche", "avarice", "avaricious", "avariciously", "avenge", "averse", "aversion", "aweful", "awful", "awfully", "awfulness", "awkward", "awkwardness", "ax", "babble", "back-logged", "back-wood", "back-woods", "backache", "backaches", "backaching", "backbite", "backbiting", "backward", "backwardness", "backwood", "backwoods", "bad", "badly", "baffle", "baffled", "bafflement", "baffling", "bait", "balk", "banal", "banalize", "bane", "banish", "banishment", "bankrupt", "barbarian", "barbaric", "barbarically", "barbarity", "barbarous", "barbarously", "barren", "baseless", "bash", "bashed", "bashful", "bashing", "bastard", "bastards", "battered", "battering", "batty", "bearish", "beastly", "bedlam", "bedlamite", "befoul", "beg", "beggar", "beggarly", "begging", "beguile", "belabor", "belated", "beleaguer", "belie", "belittle", "belittled", "belittling", "bellicose", "belligerence", "belligerent", "belligerently", "bemoan", "bemoaning", "bemused", "bent", "berate", "bereave", "bereavement", "bereft", "berserk", "beseech", "beset", "besiege", "besmirch", "bestial", "betray", "betrayal", "betrayals", "betrayer", "betraying", "betrays", "bewail", "beware", "bewilder", "bewildered", "bewildering", "bewilderingly", "bewilderment", "bewitch", "bias", "biased", "biases", "bicker", "bickering", "bid-rigging", "bigotries", "bigotry", "bitch", "bitchy", "biting", "bitingly", "bitter", "bitterly", "bitterness", "bizarre", "blab", "blabber", "blackmail", "blah", "blame", "blameworthy", "bland", "blandish", "blaspheme", "blasphemous", "blasphemy", "blasted", "blatant", "blatantly", "blather", "bleak", "bleakly", "bleakness", "bleed", "bleeding", "bleeds", "blemish", "blind", "blinding", "blindingly", "blindside", "blister", "blistering", "bloated", "blockage", "blockhead", "bloodshed", "bloodthirsty", "bloody", "blotchy", "blow", "blunder", "blundering", "blunders", "blunt", "blur", "bluring", "blurred", "blurring", "blurry", "blurs", "blurt", "boastful", "boggle", "bogus", "boil", "boiling", "boisterous", "bomb", "bombard", "bombardment", "bombastic", "bondage", "bonkers", "bore", "bored", "boredom", "bores", "boring", "botch", "bother", "bothered", "bothering", "bothers", "bothersome", "bowdlerize", "boycott", "braggart", "bragger", "brainless", "brainwash", "brash", "brashly", "brashness", "brat", "bravado", "brazen", "brazenly", "brazenness", "breach", "break", "break-up", "break-ups", "breakdown", "breaking", "breaks", "breakup", "breakups", "bribery", "brimstone", "bristle", "brittle", "broke", "broken", "broken-hearted", "brood", "browbeat", "bruise", "bruised", "bruises", "bruising", "brusque", "brutal", "brutalising", "brutalities", "brutality", "brutalize", "brutalizing", "brutally", "brute", "brutish", "bs", "buckle", "bug", "bugging", "buggy", "bugs", "bulkier", "bulkiness", "bulky", "bulkyness", "bull----", "bullies", "bullshit", "bullshyt", "bully", "bullying", "bullyingly", "bum", "bump", "bumped", "bumping", "bumpping", "bumps", "bumpy", "bungle", "bungler", "bungling", "bunk", "burden", "burdensome", "burdensomely", "burn", "burned", "burning", "burns", "bust", "busts", "busybody", "butcher", "butchery", "buzzing", "byzantine", "cackle", "calamities", "calamitous", "calamitously", "calamity", "callous", "calumniate", "calumniation", "calumnies", "calumnious", "calumniously", "calumny", "cancer", "cancerous", "cannibal", "cannibalize", "capitulate", "capricious", "capriciously", "capriciousness", "capsize", "careless", "carelessness", "caricature", "carnage", "carp", "cartoonish", "cash-strapped", "castigate", "castrated", "casualty", "cataclysm", "cataclysmal", "cataclysmic", "cataclysmically", "catastrophe", "catastrophes", "catastrophic", "catastrophically", "catastrophies", "caustic", "caustically", "cautionary", "cave", "censure", "chafe", "chaff", "chagrin", "challenging", "chaos", "chaotic", "chasten", "chastise", "chastisement", "chatter", "chatterbox", "cheap", "cheapen", "cheaply", "cheat", "cheated", "cheater", "cheating", "cheats", "checkered", "cheerless", "cheesy", "chide", "childish", "chill", "chilly", "chintzy", "choke", "choleric", "choppy", "chore", "chronic", "chunky", "clamor", "clamorous", "clash", "cliche", "cliched", "clique", "clog", "clogged", "clogs", "cloud", "clouding", "cloudy", "clueless", "clumsy", "clunky", "coarse", "cocky", "coerce", "coercion", "coercive", "cold", "coldly", "collapse", "collude", "collusion", "combative", "combust", "comical", "commiserate", "commonplace", "commotion", "commotions", "complacent", "complain", "complained", "complaining", "complains", "complaint", "complaints", "complex", "complicated", "complication", "complicit", "compulsion", "compulsive", "concede", "conceded", "conceit", "conceited", "concen", "concens", "concern", "concerned", "concerns", "concession", "concessions", "condemn", "condemnable", "condemnation", "condemned", "condemns", "condescend", "condescending", "condescendingly", "condescension", "confess", "confession", "confessions", "confined", "conflict", "conflicted", "conflicting", "conflicts", "confound", "confounded", "confounding", "confront", "confrontation", "confrontational", "confuse", "confused", "confuses", "confusing", "confusion", "confusions", "congested", "congestion", "cons", "conscons", "conservative", "conspicuous", "conspicuously", "conspiracies", "conspiracy", "conspirator", "conspiratorial", "conspire", "consternation", "contagious", "contaminate", "contaminated", "contaminates", "contaminating", "contamination", "contempt", "contemptible", "contemptuous", "contemptuously", "contend", "contention", "contentious", "contort", "contortions", "contradict", "contradiction", "contradictory", "contrariness", "contravene", "contrive", "contrived", "controversial", "controversy", "convoluted", "corrode", "corrosion", "corrosions", "corrosive", "corrupt", "corrupted", "corrupting", "corruption", "corrupts", "corruptted", "costlier", "costly", "counter-productive", "counterproductive", "coupists", "covetous", "coward", "cowardly", "crabby", "crack", "cracked", "cracks", "craftily", "craftly", "crafty", "cramp", "cramped", "cramping", "cranky", "crap", "crappy", "craps", "crash", "crashed", "crashes", "crashing", "crass", "craven", "cravenly", "craze", "crazily", "craziness", "crazy", "creak", "creaking", "creaks", "credulous", "creep", "creeping", "creeps", "creepy", "crept", "crime", "criminal", "cringe", "cringed", "cringes", "cripple", "crippled", "cripples", "crippling", "crisis", "critic", "critical", "criticism", "criticisms", "criticize", "criticized", "criticizing", "critics", "cronyism", "crook", "crooked", "crooks", "crowded", "crowdedness", "crude", "cruel", "crueler", "cruelest", "cruelly", "cruelness", "cruelties", "cruelty", "crumble", "crumbling", "crummy", "crumple", "crumpled", "crumples", "crush", "crushed", "crushing", "cry", "culpable", "culprit", "cumbersome", "cunt", "cunts", "cuplrit", "curse", "cursed", "curses", "curt", "cuss", "cussed", "cutthroat", "cynical", "cynicism", "damage", "damaged", "damages", "damaging", "damn", "damnable", "damnably", "damnation", "damned", "damning", "damper", "danger", "dangerous", "dangerousness", "dark", "darken", "darkened", "darker", "darkness", "dastard", "dastardly", "daunt", "daunting", "dauntingly", "dawdle", "daze", "dazed", "dead", "deadbeat", "deadlock", "deadly", "deadweight", "deaf", "dearth", "death", "debacle", "debase", "debasement", "debaser", "debatable", "debauch", "debaucher", "debauchery", "debilitate", "debilitating", "debility", "debt", "debts", "decadence", "decadent", "decay", "decayed", "deceit", "deceitful", "deceitfully", "deceitfulness", "deceive", "deceiver", "deceivers", "deceiving", "deception", "deceptive", "deceptively", "declaim", "decline", "declines", "declining", "decrement", "decrepit", "decrepitude", "decry", "defamation", "defamations", "defamatory", "defame", "defect", "defective", "defects", "defensive", "defiance", "defiant", "defiantly", "deficiencies", "deficiency", "deficient", "defile", "defiler", "deform", "deformed", "defrauding", "defunct", "defy", "degenerate", "degenerately", "degeneration", "degradation", "degrade", "degrading", "degradingly", "dehumanization", "dehumanize", "deign", "deject", "dejected", "dejectedly", "dejection", "delay", "delayed", "delaying", "delays", "delinquency", "delinquent", "delirious", "delirium", "delude", "deluded", "deluge", "delusion", "delusional", "delusions", "demean", "demeaning", "demise", "demolish", "demolisher", "demon", "demonic", "demonize", "demonized", "demonizes", "demonizing", "demoralize", "demoralizing", "demoralizingly", "denial", "denied", "denies", "denigrate", "denounce", "dense", "dent", "dented", "dents", "denunciate", "denunciation", "denunciations", "deny", "denying", "deplete", "deplorable", "deplorably", "deplore", "deploring", "deploringly", "deprave", "depraved", "depravedly", "deprecate", "depress", "depressed", "depressing", "depressingly", "depression", "depressions", "deprive", "deprived", "deride", "derision", "derisive", "derisively", "derisiveness", "derogatory", "desecrate", "desert", "desertion", "desiccate", "desiccated", "desititute", "desolate", "desolately", "desolation", "despair", "despairing", "despairingly", "desperate", "desperately", "desperation", "despicable", "despicably", "despise", "despised", "despoil", "despoiler", "despondence", "despondency", "despondent", "despondently", "despot", "despotic", "despotism", "destabilisation", "destains", "destitute", "destitution", "destroy", "destroyer", "destruction", "destructive", "desultory", "deter", "deteriorate", "deteriorating", "deterioration", "deterrent", "detest", "detestable", "detestably", "detested", "detesting", "detests", "detract", "detracted", "detracting", "detraction", "detracts", "detriment", "detrimental", "devastate", "devastated", "devastates", "devastating", "devastatingly", "devastation", "deviate", "deviation", "devil", "devilish", "devilishly", "devilment", "devilry", "devious", "deviously", "deviousness", "devoid", "diabolic", "diabolical", "diabolically", "diametrically", "diappointed", "diatribe", "diatribes", "dick", "dictator", "dictatorial", "die", "die-hard", "died", "dies", "difficult", "difficulties", "difficulty", "diffidence", "dilapidated", "dilemma", "dilly-dally", "dim", "dimmer", "din", "ding", "dings", "dinky", "dire", "direly", "direness", "dirt", "dirtbag", "dirtbags", "dirts", "dirty", "disable", "disabled", "disaccord", "disadvantage", "disadvantaged", "disadvantageous", "disadvantages", "disaffect", "disaffected", "disaffirm", "disagree", "disagreeable", "disagreeably", "disagreed", "disagreeing", "disagreement", "disagrees", "disallow", "disapointed", "disapointing", "disapointment", "disappoint", "disappointed", "disappointing", "disappointingly", "disappointment", "disappointments", "disappoints", "disapprobation", "disapproval", "disapprove", "disapproving", "disarm", "disarray", "disaster", "disasterous", "disastrous", "disastrously", "disavow", "disavowal", "disbelief", "disbelieve", "disbeliever", "disclaim", "discombobulate", "discomfit", "discomfititure", "discomfort", "discompose", "disconcert", "disconcerted", "disconcerting", "disconcertingly", "disconsolate", "disconsolately", "disconsolation", "discontent", "discontented", "discontentedly", "discontinued", "discontinuity", "discontinuous", "discord", "discordance", "discordant", "discountenance", "discourage", "discouragement", "discouraging", "discouragingly", "discourteous", "discourteously", "discoutinous", "discredit", "discrepant", "discriminate", "discrimination", "discriminatory", "disdain", "disdained", "disdainful", "disdainfully", "disfavor", "disgrace", "disgraced", "disgraceful", "disgracefully", "disgruntle", "disgruntled", "disgust", "disgusted", "disgustedly", "disgustful", "disgustfully", "disgusting", "disgustingly", "dishearten", "disheartening", "dishearteningly", "dishonest", "dishonestly", "dishonesty", "dishonor", "dishonorable", "dishonorablely", "disillusion", "disillusioned", "disillusionment", "disillusions", "disinclination", "disinclined", "disingenuous", "disingenuously", "disintegrate", "disintegrated", "disintegrates", "disintegration", "disinterest", "disinterested", "dislike", "disliked", "dislikes", "disliking", "dislocated", "disloyal", "disloyalty", "dismal", "dismally", "dismalness", "dismay", "dismayed", "dismaying", "dismayingly", "dismissive", "dismissively", "disobedience", "disobedient", "disobey", "disoobedient", "disorder", "disordered", "disorderly", "disorganized", "disorient", "disoriented", "disown", "disparage", "disparaging", "disparagingly", "dispensable", "dispirit", "dispirited", "dispiritedly", "dispiriting", "displace", "displaced", "displease", "displeased", "displeasing", "displeasure", "disproportionate", "disprove", "disputable", "dispute", "disputed", "disquiet", "disquieting", "disquietingly", "disquietude", "disregard", "disregardful", "disreputable", "disrepute", "disrespect", "disrespectable", "disrespectablity", "disrespectful", "disrespectfully", "disrespectfulness", "disrespecting", "disrupt", "disruption", "disruptive", "diss", "dissapointed", "dissappointed", "dissappointing", "dissatisfaction", "dissatisfactory", "dissatisfied", "dissatisfies", "dissatisfy", "dissatisfying", "dissed", "dissemble", "dissembler", "dissension", "dissent", "dissenter", "dissention", "disservice", "disses", "dissidence", "dissident", "dissidents", "dissing", "dissocial", "dissolute", "dissolution", "dissonance", "dissonant", "dissonantly", "dissuade", "dissuasive", "distains", "distaste", "distasteful", "distastefully", "distort", "distorted", "distortion", "distorts", "distract", "distracting", "distraction", "distraught", "distraughtly", "distraughtness", "distress", "distressed", "distressing", "distressingly", "distrust", "distrustful", "distrusting", "disturb", "disturbance", "disturbed", "disturbing", "disturbingly", "disunity", "disvalue", "divergent", "divisive", "divisively", "divisiveness", "dizzing", "dizzingly", "dizzy", "doddering", "dodgey", "dogged", "doggedly", "dogmatic", "doldrums", "domineer", "domineering", "donside", "doom", "doomed", "doomsday", "dope", "doubt", "doubtful", "doubtfully", "doubts", "douchbag", "douchebag", "douchebags", "downbeat", "downcast", "downer", "downfall", "downfallen", "downgrade", "downhearted", "downheartedly", "downhill", "downside", "downsides", "downturn", "downturns", "drab", "draconian", "draconic", "drag", "dragged", "dragging", "dragoon", "drags", "drain", "drained", "draining", "drains", "drastic", "drastically", "drawback", "drawbacks", "dread", "dreadful", "dreadfully", "dreadfulness", "dreary", "dripped", "dripping", "drippy", "drips", "drones", "droop", "droops", "drop-out", "drop-outs", "dropout", "dropouts", "drought", "drowning", "drunk", "drunkard", "drunken", "dubious", "dubiously", "dubitable", "dud", "dull", "dullard", "dumb", "dumbfound", "dump", "dumped", "dumping", "dumps", "dunce", "dungeon", "dungeons", "dupe", "dust", "dusty", "dwindling", "dying", "earsplitting", "eccentric", "eccentricity", "effigy", "effrontery", "egocentric", "egomania", "egotism", "egotistical", "egotistically", "egregious", "egregiously", "election-rigger", "elimination", "emaciated", "emasculate", "embarrass", "embarrassing", "embarrassingly", "embarrassment", "embattled", "embroil", "embroiled", "embroilment", "emergency", "emphatic", "emphatically", "emptiness", "encroach", "encroachment", "endanger", "enemies", "enemy", "enervate", "enfeeble", "enflame", "engulf", "enjoin", "enmity", "enrage", "enraged", "enraging", "enslave", "entangle", "entanglement", "entrap", "entrapment", "envious", "enviously", "enviousness", "epidemic", "equivocal", "erase", "erode", "erodes", "erosion", "err", "errant", "erratic", "erratically", "erroneous", "erroneously", "error", "errors", "eruptions", "escapade", "eschew", "estranged", "evade", "evasion", "evasive", "evil", "evildoer", "evils", "eviscerate", "exacerbate", "exagerate", "exagerated", "exagerates", "exaggerate", "exaggeration", "exasperate", "exasperated", "exasperating", "exasperatingly", "exasperation", "excessive", "excessively", "exclusion", "excoriate", "excruciating", "excruciatingly", "excuse", "excuses", "execrate", "exhaust", "exhausted", "exhaustion", "exhausts", "exhorbitant", "exhort", "exile", "exorbitant", "exorbitantance", "exorbitantly", "expel", "expensive", "expire", "expired", "explode", "exploit", "exploitation", "explosive", "expropriate", "expropriation", "expulse", "expunge", "exterminate", "extermination", "extinguish", "extort", "extortion", "extraneous", "extravagance", "extravagant", "extravagantly", "extremism", "extremist", "extremists", "eyesore", "fabricate", "fabrication", "facetious", "facetiously", "fail", "failed", "failing", "fails", "failure", "failures", "faint", "fainthearted", "faithless", "fake", "fall", "fallacies", "fallacious", "fallaciously", "fallaciousness", "fallacy", "fallen", "falling", "fallout", "falls", "false", "falsehood", "falsely", "falsify", "falter", "faltered", "famine", "famished", "fanatic", "fanatical", "fanatically", "fanaticism", "fanatics", "fanciful", "far-fetched", "farce", "farcical", "farcical-yet-provocative", "farcically", "farfetched", "fascism", "fascist", "fastidious", "fastidiously", "fastuous", "fat", "fat-cat", "fat-cats", "fatal", "fatalistic", "fatalistically", "fatally", "fatcat", "fatcats", "fateful", "fatefully", "fathomless", "fatigue", "fatigued", "fatique", "fatty", "fatuity", "fatuous", "fatuously", "fault", "faults", "faulty", "fawningly", "faze", "fear", "fearful", "fearfully", "fears", "fearsome", "feckless", "feeble", "feeblely", "feebleminded", "feign", "feint", "fell", "felon", "felonious", "ferociously", "ferocity", "fetid", "fever", "feverish", "fevers", "fiasco", "fib", "fibber", "fickle", "fiction", "fictional", "fictitious", "fidget", "fidgety", "fiend", "fiendish", "fierce", "figurehead", "filth", "filthy", "finagle", "finicky", "fissures", "fist", "flabbergast", "flabbergasted", "flagging", "flagrant", "flagrantly", "flair", "flairs", "flak", "flake", "flakey", "flakieness", "flaking", "flaky", "flare", "flares", "flareup", "flareups", "flat-out", "flaunt", "flaw", "flawed", "flaws", "flee", "fleed", "fleeing", "fleer", "flees", "fleeting", "flicering", "flicker", "flickering", "flickers", "flighty", "flimflam", "flimsy", "flirt", "flirty", "floored", "flounder", "floundering", "flout", "fluster", "foe", "fool", "fooled", "foolhardy", "foolish", "foolishly", "foolishness", "forbid", "forbidden", "forbidding", "forceful", "foreboding", "forebodingly", "forfeit", "forged", "forgetful", "forgetfully", "forgetfulness", "forlorn", "forlornly", "forsake", "forsaken", "forswear", "foul", "foully", "foulness", "fractious", "fractiously", "fracture", "fragile", "fragmented", "frail", "frantic", "frantically", "franticly", "fraud", "fraudulent", "fraught", "frazzle", "frazzled", "freak", "freaking", "freakish", "freakishly", "freaks", "freeze", "freezes", "freezing", "frenetic", "frenetically", "frenzied", "frenzy", "fret", "fretful", "frets", "friction", "frictions", "fried", "friggin", "frigging", "fright", "frighten", "frightening", "frighteningly", "frightful", "frightfully", "frigid", "frost", "frown", "froze", "frozen", "fruitless", "fruitlessly", "frustrate", "frustrated", "frustrates", "frustrating", "frustratingly", "frustration", "frustrations", "fuck", "fucking", "fudge", "fugitive", "full-blown", "fulminate", "fumble", "fume", "fumes", "fundamentalism", "funky", "furious", "furiously", "furor", "fury", "fuss", "fussy", "fustigate", "fusty", "futile", "futilely", "futility", "fuzzy", "gabble", "gaff", "gaffe", "gainsay", "gainsayer", "gall", "galling", "gallingly", "galls", "gangster", "gape", "garbage", "garish", "gasp", "gauche", "gaudy", "gawk", "gawky", "geezer", "genocide", "get-rich", "ghastly", "ghetto", "ghosting", "gibber", "gibberish", "gibe", "giddy", "gimmick", "gimmicked", "gimmicking", "gimmicks", "gimmicky", "glare", "glaringly", "glib", "glibly", "glitch", "glitches", "gloatingly", "gloom", "gloomy", "glower", "glum", "glut", "gnawing", "goad", "goading", "god-awful", "goof", "goofy", "goon", "gossip", "graceless", "gracelessly", "graft", "grainy", "grapple", "grate", "grating", "gravely", "greasy", "greed", "greedy", "grief", "grievance", "grievances", "grieve", "grieving", "grievous", "grievously", "grim", "grimace", "grind", "gripe", "gripes", "grisly", "gritty", "gross", "grossly", "grotesque", "grouch", "grouchy", "groundless", "grouse", "growl", "grudge", "grudges", "grudging", "grudgingly", "gruesome", "gruesomely", "gruff", "grumble", "grumpier", "grumpiest", "grumpily", "grumpish", "grumpy", "guile", "guilt", "guiltily", "guilty", "gullible", "gutless", "gutter", "hack", "hacks", "haggard", "haggle", "hairloss", "halfhearted", "halfheartedly", "hallucinate", "hallucination", "hamper", "hampered", "handicapped", "hang", "hangs", "haphazard", "hapless", "harangue", "harass", "harassed", "harasses", "harassment", "harboring", "harbors", "hard", "hard-hit", "hard-line", "hard-liner", "hardball", "harden", "hardened", "hardheaded", "hardhearted", "hardliner", "hardliners", "hardship", "hardships", "harm", "harmed", "harmful", "harms", "harpy", "harridan", "harried", "harrow", "harsh", "harshly", "hasseling", "hassle", "hassled", "hassles", "haste", "hastily", "hasty", "hate", "hated", "hateful", "hatefully", "hatefulness", "hater", "haters", "hates", "hating", "hatred", "haughtily", "haughty", "haunt", "haunting", "havoc", "hawkish", "haywire", "hazard", "hazardous", "haze", "hazy", "head-aches", "headache", "headaches", "heartbreaker", "heartbreaking", "heartbreakingly", "heartless", "heathen", "heavy-handed", "heavyhearted", "heck", "heckle", "heckled", "heckles", "hectic", "hedge", "hedonistic", "heedless", "hefty", "hegemonism", "hegemonistic", "hegemony", "heinous", "hell", "hell-bent", "hellion", "hells", "helpless", "helplessly", "helplessness", "heresy", "heretic", "heretical", "hesitant", "hestitant", "hideous", "hideously", "hideousness", "high-priced", "hiliarious", "hinder", "hindrance", "hiss", "hissed", "hissing", "ho-hum", "hoard", "hoax", "hobble", "hogs", "hollow", "hoodium", "hoodwink", "hooligan", "hopeless", "hopelessly", "hopelessness", "horde", "horrendous", "horrendously", "horrible", "horrid", "horrific", "horrified", "horrifies", "horrify", "horrifying", "horrifys", "hostage", "hostile", "hostilities", "hostility", "hotbeds", "hothead", "hotheaded", "hothouse", "hubris", "huckster", "hum", "humid", "humiliate", "humiliating", "humiliation", "humming", "hung", "hurt", "hurted", "hurtful", "hurting", "hurts", "hustler", "hype", "hypocricy", "hypocrisy", "hypocrite", "hypocrites", "hypocritical", "hypocritically", "hysteria", "hysteric", "hysterical", "hysterically", "hysterics", "idiocies", "idiocy", "idiot", "idiotic", "idiotically", "idiots", "idle", "ignoble", "ignominious", "ignominiously", "ignominy", "ignorance", "ignorant", "ignore", "ill-advised", "ill-conceived", "ill-defined", "ill-designed", "ill-fated", "ill-favored", "ill-formed", "ill-mannered", "ill-natured", "ill-sorted", "ill-tempered", "ill-treated", "ill-treatment", "ill-usage", "ill-used", "illegal", "illegally", "illegitimate", "illicit", "illiterate", "illness", "illogic", "illogical", "illogically", "illusion", "illusions", "illusory", "imaginary", "imbalance", "imbecile", "imbroglio", "immaterial", "immature", "imminence", "imminently", "immobilized", "immoderate", "immoderately", "immodest", "immoral", "immorality", "immorally", "immovable", "impair", "impaired", "impasse", "impatience", "impatient", "impatiently", "impeach", "impedance", "impede", "impediment", "impending", "impenitent", "imperfect", "imperfection", "imperfections", "imperfectly", "imperialist", "imperil", "imperious", "imperiously", "impermissible", "impersonal", "impertinent", "impetuous", "impetuously", "impiety", "impinge", "impious", "implacable", "implausible", "implausibly", "implicate", "implication", "implode", "impolite", "impolitely", "impolitic", "importunate", "importune", "impose", "imposers", "imposing", "imposition", "impossible", "impossiblity", "impossibly", "impotent", "impoverish", "impoverished", "impractical", "imprecate", "imprecise", "imprecisely", "imprecision", "imprison", "imprisonment", "improbability", "improbable", "improbably", "improper", "improperly", "impropriety", "imprudence", "imprudent", "impudence", "impudent", "impudently", "impugn", "impulsive", "impulsively", "impunity", "impure", "impurity", "inability", "inaccuracies", "inaccuracy", "inaccurate", "inaccurately", "inaction", "inactive", "inadequacy", "inadequate", "inadequately", "inadverent", "inadverently", "inadvisable", "inadvisably", "inane", "inanely", "inappropriate", "inappropriately", "inapt", "inaptitude", "inarticulate", "inattentive", "inaudible", "incapable", "incapably", "incautious", "incendiary", "incense", "incessant", "incessantly", "incite", "incitement", "incivility", "inclement", "incognizant", "incoherence", "incoherent", "incoherently", "incommensurate", "incomparable", "incomparably", "incompatability", "incompatibility", "incompatible", "incompetence", "incompetent", "incompetently", "incomplete", "incompliant", "incomprehensible", "incomprehension", "inconceivable", "inconceivably", "incongruous", "incongruously", "inconsequent", "inconsequential", "inconsequentially", "inconsequently", "inconsiderate", "inconsiderately", "inconsistence", "inconsistencies", "inconsistency", "inconsistent", "inconsolable", "inconsolably", "inconstant", "inconvenience", "inconveniently", "incorrect", "incorrectly", "incorrigible", "incorrigibly", "incredulous", "incredulously", "inculcate", "indecency", "indecent", "indecently", "indecision", "indecisive", "indecisively", "indecorum", "indefensible", "indelicate", "indeterminable", "indeterminably", "indeterminate", "indifference", "indifferent", "indigent", "indignant", "indignantly", "indignation", "indignity", "indiscernible", "indiscreet", "indiscreetly", "indiscretion", "indiscriminate", "indiscriminately", "indiscriminating", "indistinguishable", "indoctrinate", "indoctrination", "indolent", "indulge", "ineffective", "ineffectively", "ineffectiveness", "ineffectual", "ineffectually", "ineffectualness", "inefficacious", "inefficacy", "inefficiency", "inefficient", "inefficiently", "inelegance", "inelegant", "ineligible", "ineloquent", "ineloquently", "inept", "ineptitude", "ineptly", "inequalities", "inequality", "inequitable", "inequitably", "inequities", "inescapable", "inescapably", "inessential", "inevitable", "inevitably", "inexcusable", "inexcusably", "inexorable", "inexorably", "inexperience", "inexperienced", "inexpert", "inexpertly", "inexpiable", "inexplainable", "inextricable", "inextricably", "infamous", "infamously", "infamy", "infected", "infection", "infections", "inferior", "inferiority", "infernal", "infest", "infested", "infidel", "infidels", "infiltrator", "infiltrators", "infirm", "inflame", "inflammation", "inflammatory", "inflammed", "inflated", "inflationary", "inflexible", "inflict", "infraction", "infringe", "infringement", "infringements", "infuriate", "infuriated", "infuriating", "infuriatingly", "inglorious", "ingrate", "ingratitude", "inhibit", "inhibition", "inhospitable", "inhospitality", "inhuman", "inhumane", "inhumanity", "inimical", "inimically", "iniquitous", "iniquity", "injudicious", "injure", "injurious", "injury", "injustice", "injustices", "innuendo", "inoperable", "inopportune", "inordinate", "inordinately", "insane", "insanely", "insanity", "insatiable", "insecure", "insecurity", "insensible", "insensitive", "insensitively", "insensitivity", "insidious", "insidiously", "insignificance", "insignificant", "insignificantly", "insincere", "insincerely", "insincerity", "insinuate", "insinuating", "insinuation", "insociable", "insolence", "insolent", "insolently", "insolvent", "insouciance", "instability", "instable", "instigate", "instigator", "instigators", "insubordinate", "insubstantial", "insubstantially", "insufferable", "insufferably", "insufficiency", "insufficient", "insufficiently", "insular", "insult", "insulted", "insulting", "insultingly", "insults", "insupportable", "insupportably", "insurmountable", "insurmountably", "insurrection", "intefere", "inteferes", "intense", "interfere", "interference", "interferes", "intermittent", "interrupt", "interruption", "interruptions", "intimidate", "intimidating", "intimidatingly", "intimidation", "intolerable", "intolerablely", "intolerance", "intoxicate", "intractable", "intransigence", "intransigent", "intrude", "intrusion", "intrusive", "inundate", "inundated", "invader", "invalid", "invalidate", "invalidity", "invasive", "invective", "inveigle", "invidious", "invidiously", "invidiousness", "invisible", "involuntarily", "involuntary", "irascible", "irate", "irately", "ire", "irk", "irked", "irking", "irks", "irksome", "irksomely", "irksomeness", "irksomenesses", "ironic", "ironical", "ironically", "ironies", "irony", "irragularity", "irrational", "irrationalities", "irrationality", "irrationally", "irrationals", "irreconcilable", "irrecoverable", "irrecoverableness", "irrecoverablenesses", "irrecoverably", "irredeemable", "irredeemably", "irreformable", "irregular", "irregularity", "irrelevance", "irrelevant", "irreparable", "irreplacible", "irrepressible", "irresolute", "irresolvable", "irresponsible", "irresponsibly", "irretating", "irretrievable", "irreversible", "irritable", "irritably", "irritant", "irritate", "irritated", "irritating", "irritation", "irritations", "isolate", "isolated", "isolation", "issue", "issues", "itch", "itching", "itchy", "jabber", "jaded", "jagged", "jam", "jarring", "jaundiced", "jealous", "jealously", "jealousness", "jealousy", "jeer", "jeering", "jeeringly", "jeers", "jeopardize", "jeopardy", "jerk", "jerky", "jitter", "jitters", "jittery", "job-killing", "jobless", "joke", "joker", "jolt", "judder", "juddering", "judders", "jumpy", "junk", "junky", "junkyard", "jutter", "jutters", "kaput", "kill", "killed", "killer", "killing", "killjoy", "kills", "knave", "knife", "knock", "knotted", "kook", "kooky", "lack", "lackadaisical", "lacked", "lackey", "lackeys", "lacking", "lackluster", "lacks", "laconic", "lag", "lagged", "lagging", "laggy", "lags", "laid-off", "lambast", "lambaste", "lame", "lame-duck", "lament", "lamentable", "lamentably", "languid", "languish", "languor", "languorous", "languorously", "lanky", "lapse", "lapsed", "lapses", "lascivious", "last-ditch", "latency", "laughable", "laughably", "laughingstock", "lawbreaker", "lawbreaking", "lawless", "lawlessness", "layoff", "layoff-happy", "lazy", "leak", "leakage", "leakages", "leaking", "leaks", "leaky", "lech", "lecher", "lecherous", "lechery", "leech", "leer", "leery", "left-leaning", "lemon", "lengthy", "less-developed", "lesser-known", "letch", "lethal", "lethargic", "lethargy", "lewd", "lewdly", "lewdness", "liability", "liable", "liar", "liars", "licentious", "licentiously", "licentiousness", "lie", "lied", "lier", "lies", "life-threatening", "lifeless", "limit", "limitation", "limitations", "limited", "limits", "limp", "listless", "litigious", "little-known", "livid", "lividly", "loath", "loathe", "loathing", "loathly", "loathsome", "loathsomely", "lone", "loneliness", "lonely", "loner", "lonesome", "long-time", "long-winded", "longing", "longingly", "loophole", "loopholes", "loose", "loot", "lorn", "lose", "loser", "losers", "loses", "losing", "loss", "losses", "lost", "loud", "louder", "lousy", "loveless", "lovelorn", "low-rated", "lowly", "ludicrous", "ludicrously", "lugubrious", "lukewarm", "lull", "lumpy", "lunatic", "lunaticism", "lurch", "lure", "lurid", "lurk", "lurking", "lying", "macabre", "mad", "madden", "maddening", "maddeningly", "madder", "madly", "madman", "madness", "maladjusted", "maladjustment", "malady", "malaise", "malcontent", "malcontented", "maledict", "malevolence", "malevolent", "malevolently", "malice", "malicious", "maliciously", "maliciousness", "malign", "malignant", "malodorous", "maltreatment", "mangle", "mangled", "mangles", "mangling", "mania", "maniac", "maniacal", "manic", "manipulate", "manipulation", "manipulative", "manipulators", "mar", "marginal", "marginally", "martyrdom", "martyrdom-seeking", "mashed", "massacre", "massacres", "matte", "mawkish", "mawkishly", "mawkishness", "meager", "meaningless", "meanness", "measly", "meddle", "meddlesome", "mediocre", "mediocrity", "melancholy", "melodramatic", "melodramatically", "meltdown", "menace", "menacing", "menacingly", "mendacious", "mendacity", "menial", "merciless", "mercilessly", "mess", "messed", "messes", "messing", "messy", "midget", "miff", "militancy", "mindless", "mindlessly", "mirage", "mire", "misalign", "misaligned", "misaligns", "misapprehend", "misbecome", "misbecoming", "misbegotten", "misbehave", "misbehavior", "miscalculate", "miscalculation", "miscellaneous", "mischief", "mischievous", "mischievously", "misconception", "misconceptions", "miscreant", "miscreants", "misdirection", "miser", "miserable", "miserableness", "miserably", "miseries", "miserly", "misery", "misfit", "misfortune", "misgiving", "misgivings", "misguidance", "misguide", "misguided", "mishandle", "mishap", "misinform", "misinformed", "misinterpret", "misjudge", "misjudgment", "mislead", "misleading", "misleadingly", "mislike", "mismanage", "mispronounce", "mispronounced", "mispronounces", "misread", "misreading", "misrepresent", "misrepresentation", "miss", "missed", "misses", "misstatement", "mist", "mistake", "mistaken", "mistakenly", "mistakes", "mistified", "mistress", "mistrust", "mistrustful", "mistrustfully", "mists", "misunderstand", "misunderstanding", "misunderstandings", "misunderstood", "misuse", "moan", "mobster", "mock", "mocked", "mockeries", "mockery", "mocking", "mockingly", "mocks", "molest", "molestation", "monotonous", "monotony", "monster", "monstrosities", "monstrosity", "monstrous", "monstrously", "moody", "moot", "mope", "morbid", "morbidly", "mordant", "mordantly", "moribund", "moron", "moronic", "morons", "mortification", "mortified", "mortify", "mortifying", "motionless", "motley", "mourn", "mourner", "mournful", "mournfully", "muddle", "muddy", "mudslinger", "mudslinging", "mulish", "multi-polarization", "mundane", "murder", "murderer", "murderous", "murderously", "murky", "muscle-flexing", "mushy", "musty", "mysterious", "mysteriously", "mystery", "mystify", "myth", "nag", "nagging", "naive", "naively", "narrower", "nastily", "nastiness", "nasty", "naughty", "nauseate", "nauseates", "nauseating", "nauseatingly", "nave", "nebulous", "nebulously", "needless", "needlessly", "needy", "nefarious", "nefariously", "negate", "negation", "negative", "negatives", "negativity", "neglect", "neglected", "negligence", "negligent", "nemesis", "nepotism", "nervous", "nervously", "nervousness", "nettle", "nettlesome", "neurotic", "neurotically", "niggle", "niggles", "nightmare", "nightmarish", "nightmarishly", "nitpick", "nitpicking", "noise", "noises", "noisier", "noisy", "non-confidence", "nonexistent", "nonresponsive", "nonsense", "nosey", "notoriety", "notorious", "notoriously", "noxious", "nuisance", "numb", "obese", "object", "objection", "objectionable", "objections", "oblique", "obliterate", "obliterated", "oblivious", "obnoxious", "obnoxiously", "obscene", "obscenely", "obscenity", "obscure", "obscured", "obscures", "obscurity", "obsess", "obsessive", "obsessively", "obsessiveness", "obsolete", "obstacle", "obstinate", "obstinately", "obstruct", "obstructed", "obstructing", "obstruction", "obstructs", "obtrusive", "obtuse", "occlude", "occluded", "occludes", "occluding", "odd", "odder", "oddest", "oddities", "oddity", "oddly", "odor", "offence", "offend", "offender", "offending", "offenses", "offensive", "offensively", "offensiveness", "officious", "ominous", "ominously", "omission", "omit", "one-sided", "onerous", "onerously", "onslaught", "opinionated", "opponent", "opportunistic", "oppose", "opposition", "oppositions", "oppress", "oppression", "oppressive", "oppressively", "oppressiveness", "oppressors", "ordeal", "orphan", "ostracize", "outbreak", "outburst", "outbursts", "outcast", "outcry", "outlaw", "outmoded", "outrage", "outraged", "outrageous", "outrageously", "outrageousness", "outrages", "outsider", "over-acted", "over-awe", "over-balanced", "over-hyped", "over-priced", "over-valuation", "overact", "overacted", "overawe", "overbalance", "overbalanced", "overbearing", "overbearingly", "overblown", "overdo", "overdone", "overdue", "overemphasize", "overheat", "overkill", "overloaded", "overlook", "overpaid", "overpayed", "overplay", "overpower", "overpriced", "overrated", "overreach", "overrun", "overshadow", "oversight", "oversights", "oversimplification", "oversimplified", "oversimplify", "oversize", "overstate", "overstated", "overstatement", "overstatements", "overstates", "overtaxed", "overthrow", "overthrows", "overturn", "overweight", "overwhelm", "overwhelmed", "overwhelming", "overwhelmingly", "overwhelms", "overzealous", "overzealously", "overzelous", "pain", "painful", "painfull", "painfully", "pains", "pale", "pales", "paltry", "pan", "pandemonium", "pander", "pandering", "panders", "panic", "panick", "panicked", "panicking", "panicky", "paradoxical", "paradoxically", "paralize", "paralyzed", "paranoia", "paranoid", "parasite", "pariah", "parody", "partiality", "partisan", "partisans", "passe", "passive", "passiveness", "pathetic", "pathetically", "patronize", "paucity", "pauper", "paupers", "payback", "peculiar", "peculiarly", "pedantic", "peeled", "peeve", "peeved", "peevish", "peevishly", "penalize", "penalty", "perfidious", "perfidity", "perfunctory", "peril", "perilous", "perilously", "perish", "pernicious", "perplex", "perplexed", "perplexing", "perplexity", "persecute", "persecution", "pertinacious", "pertinaciously", "pertinacity", "perturb", "perturbed", "pervasive", "perverse", "perversely", "perversion", "perversity", "pervert", "perverted", "perverts", "pessimism", "pessimistic", "pessimistically", "pest", "pestilent", "petrified", "petrify", "pettifog", "petty", "phobia", "phobic", "phony", "picket", "picketed", "picketing", "pickets", "picky", "pig", "pigs", "pillage", "pillory", "pimple", "pinch", "pique", "pitiable", "pitiful", "pitifully", "pitiless", "pitilessly", "pittance", "pity", "plagiarize", "plague", "plasticky", "plaything", "plea", "pleas", "plebeian", "plight", "plot", "plotters", "ploy", "plunder", "plunderer", "pointless", "pointlessly", "poison", "poisonous", "poisonously", "pokey", "poky", "polarisation", "polemize", "pollute", "polluter", "polluters", "polution", "pompous", "poor", "poorer", "poorest", "poorly", "posturing", "pout", "poverty", "powerless", "prate", "pratfall", "prattle", "precarious", "precariously", "precipitate", "precipitous", "predatory", "predicament", "prejudge", "prejudice", "prejudices", "prejudicial", "premeditated", "preoccupy", "preposterous", "preposterously", "presumptuous", "presumptuously", "pretence", "pretend", "pretense", "pretentious", "pretentiously", "prevaricate", "pricey", "pricier", "prick", "prickle", "prickles", "prideful", "prik", "primitive", "prison", "prisoner", "problem", "problematic", "problems", "procrastinate", "procrastinates", "procrastination", "profane", "profanity", "prohibit", "prohibitive", "prohibitively", "propaganda", "propagandize", "proprietary", "prosecute", "protest", "protested", "protesting", "protests", "protracted", "provocation", "provocative", "provoke", "pry", "pugnacious", "pugnaciously", "pugnacity", "punch", "punish", "punishable", "punitive", "punk", "puny", "puppet", "puppets", "puzzled", "puzzlement", "puzzling", "quack", "qualm", "qualms", "quandary", "quarrel", "quarrellous", "quarrellously", "quarrels", "quarrelsome", "quash", "queer", "questionable", "quibble", "quibbles", "quitter", "rabid", "racism", "racist", "racists", "racy", "radical", "radicalization", "radically", "radicals", "rage", "ragged", "raging", "rail", "raked", "rampage", "rampant", "ramshackle", "rancor", "randomly", "rankle", "rant", "ranted", "ranting", "rantingly", "rants", "rape", "raped", "raping", "rascal", "rascals", "rash", "rattle", "rattled", "rattles", "ravage", "raving", "reactionary", "rebellious", "rebuff", "rebuke", "recalcitrant", "recant", "recession", "recessionary", "reckless", "recklessly", "recklessness", "recoil", "recourses", "redundancy", "redundant", "refusal", "refuse", "refused", "refuses", "refusing", "refutation", "refute", "refuted", "refutes", "refuting", "regress", "regression", "regressive", "regret", "regreted", "regretful", "regretfully", "regrets", "regrettable", "regrettably", "regretted", "reject", "rejected", "rejecting", "rejection", "rejects", "relapse", "relentless", "relentlessly", "relentlessness", "reluctance", "reluctant", "reluctantly", "remorse", "remorseful", "remorsefully", "remorseless", "remorselessly", "remorselessness", "renounce", "renunciation", "repel", "repetitive", "reprehensible", "reprehensibly", "reprehension", "reprehensive", "repress", "repression", "repressive", "reprimand", "reproach", "reproachful", "reprove", "reprovingly", "repudiate", "repudiation", "repugn", "repugnance", "repugnant", "repugnantly", "repulse", "repulsed", "repulsing", "repulsive", "repulsively", "repulsiveness", "resent", "resentful", "resentment", "resignation", "resigned", "resistance", "restless", "restlessness", "restrict", "restricted", "restriction", "restrictive", "resurgent", "retaliate", "retaliatory", "retard", "retarded", "retardedness", "retards", "reticent", "retract", "retreat", "retreated", "revenge", "revengeful", "revengefully", "revert", "revile", "reviled", "revoke", "revolt", "revolting", "revoltingly", "revulsion", "revulsive", "rhapsodize", "rhetoric", "rhetorical", "ricer", "ridicule", "ridicules", "ridiculous", "ridiculously", "rife", "rift", "rifts", "rigid", "rigidity", "rigidness", "rile", "riled", "rip", "rip-off", "ripoff", "ripped", "risk", "risks", "risky", "rival", "rivalry", "roadblocks", "rocky", "rogue", "rollercoaster", "rot", "rotten", "rough", "rremediable", "rubbish", "rude", "rue", "ruffian", "ruffle", "ruin", "ruined", "ruining", "ruinous", "ruins", "rumbling", "rumor", "rumors", "rumours", "rumple", "run-down", "runaway", "rupture", "rust", "rusts", "rusty", "rut", "ruthless", "ruthlessly", "ruthlessness", "ruts", "sabotage", "sack", "sacrificed", "sad", "sadden", "sadly", "sadness", "sag", "sagged", "sagging", "saggy", "sags", "salacious", "sanctimonious", "sap", "sarcasm", "sarcastic", "sarcastically", "sardonic", "sardonically", "sass", "satirical", "satirize", "savage", "savaged", "savagery", "savages", "scaly", "scam", "scams", "scandal", "scandalize", "scandalized", "scandalous", "scandalously", "scandals", "scandel", "scandels", "scant", "scapegoat", "scar", "scarce", "scarcely", "scarcity", "scare", "scared", "scarier", "scariest", "scarily", "scarred", "scars", "scary", "scathing", "scathingly", "sceptical", "scoff", "scoffingly", "scold", "scolded", "scolding", "scoldingly", "scorching", "scorchingly", "scorn", "scornful", "scornfully", "scoundrel", "scourge", "scowl", "scramble", "scrambled", "scrambles", "scrambling", "scrap", "scratch", "scratched", "scratches", "scratchy", "scream", "screech", "screw-up", "screwed", "screwed-up", "screwy", "scuff", "scuffs", "scum", "scummy", "second-class", "second-tier", "secretive", "sedentary", "seedy", "seethe", "seething", "self-coup", "self-criticism", "self-defeating", "self-destructive", "self-humiliation", "self-interest", "self-interested", "self-serving", "selfinterested", "selfish", "selfishly", "selfishness", "semi-retarded", "senile", "sensationalize", "senseless", "senselessly", "seriousness", "sermonize", "servitude", "set-up", "setback", "setbacks", "sever", "severe", "severity", "shabby", "shadowy", "shady", "shake", "shaky", "shallow", "sham", "shambles", "shame", "shameful", "shamefully", "shamefulness", "shameless", "shamelessly", "shamelessness", "shark", "sharply", "shatter", "shemale", "shimmer", "shimmy", "shipwreck", "shirk", "shirker", "shit", "shiver", "shock", "shocked", "shocking", "shockingly", "shoddy", "short-lived", "shortage", "shortchange", "shortcoming", "shortcomings", "shortness", "shortsighted", "shortsightedness", "showdown", "shrew", "shriek", "shrill", "shrilly", "shrivel", "shroud", "shrouded", "shrug", "shun", "shunned", "sick", "sicken", "sickening", "sickeningly", "sickly", "sickness", "sidetrack", "sidetracked", "siege", "sillily", "silly", "simplistic", "simplistically", "sin", "sinful", "sinfully", "sinister", "sinisterly", "sink", "sinking", "skeletons", "skeptic", "skeptical", "skeptically", "skepticism", "sketchy", "skimpy", "skinny", "skittish", "skittishly", "skulk", "slack", "slander", "slanderer", "slanderous", "slanderously", "slanders", "slap", "slashing", "slaughter", "slaughtered", "slave", "slaves", "sleazy", "slime", "slog", "slogged", "slogging", "slogs", "sloooooooooooooow", "sloooow", "slooow", "sloow", "sloppily", "sloppy", "sloth", "slothful", "slow", "slow-moving", "slowed", "slower", "slowest", "slowly", "sloww", "slowww", "slowwww", "slug", "sluggish", "slump", "slumping", "slumpping", "slur", "slut", "sluts", "sly", "smack", "smallish", "smash", "smear", "smell", "smelled", "smelling", "smells", "smelly", "smelt", "smoke", "smokescreen", "smolder", "smoldering", "smother", "smoulder", "smouldering", "smudge", "smudged", "smudges", "smudging", "smug", "smugly", "smut", "smuttier", "smuttiest", "smutty", "snag", "snagged", "snagging", "snags", "snappish", "snappishly", "snare", "snarky", "snarl", "sneak", "sneakily", "sneaky", "sneer", "sneering", "sneeringly", "snob", "snobbish", "snobby", "snobish", "snobs", "snub", "so-cal", "soapy", "sob", "sober", "sobering", "solemn", "solicitude", "somber", "sore", "sorely", "soreness", "sorrow", "sorrowful", "sorrowfully", "sorry", "sour", "sourly", "spade", "spank", "spendy", "spew", "spewed", "spewing", "spews", "spilling", "spinster", "spiritless", "spite", "spiteful", "spitefully", "spitefulness", "splatter", "split", "splitting", "spoil", "spoilage", "spoilages", "spoiled", "spoilled", "spoils", "spook", "spookier", "spookiest", "spookily", "spooky", "spoon-fed", "spoon-feed", "spoonfed", "sporadic", "spotty", "spurious", "spurn", "sputter", "squabble", "squabbling", "squander", "squash", "squeak", "squeaks", "squeaky", "squeal", "squealing", "squeals", "squirm", "stab", "stagnant", "stagnate", "stagnation", "staid", "stain", "stains", "stale", "stalemate", "stall", "stalls", "stammer", "stampede", "standstill", "stark", "starkly", "startle", "startling", "startlingly", "starvation", "starve", "static", "steal", "stealing", "steals", "steep", "steeply", "stench", "stereotype", "stereotypical", "stereotypically", "stern", "stew", "sticky", "stiff", "stiffness", "stifle", "stifling", "stiflingly", "stigma", "stigmatize", "sting", "stinging", "stingingly", "stingy", "stink", "stinks", "stodgy", "stole", "stolen", "stooge", "stooges", "stormy", "straggle", "straggler", "strain", "strained", "straining", "strange", "strangely", "stranger", "strangest", "strangle", "streaky", "strenuous", "stress", "stresses", "stressful", "stressfully", "stricken", "strict", "strictly", "strident", "stridently", "strife", "strike", "stringent", "stringently", "struck", "struggle", "struggled", "struggles", "struggling", "strut", "stubborn", "stubbornly", "stubbornness", "stuck", "stuffy", "stumble", "stumbled", "stumbles", "stump", "stumped", "stumps", "stun", "stunt", "stunted", "stupid", "stupidest", "stupidity", "stupidly", "stupified", "stupify", "stupor", "stutter", "stuttered", "stuttering", "stutters", "sty", "stymied", "sub-par", "subdued", "subjected", "subjection", "subjugate", "subjugation", "submissive", "subordinate", "subpoena", "subpoenas", "subservience", "subservient", "substandard", "subtract", "subversion", "subversive", "subversively", "subvert", "succumb", "suck", "sucked", "sucker", "sucks", "sucky", "sue", "sued", "sueing", "sues", "suffer", "suffered", "sufferer", "sufferers", "suffering", "suffers", "suffocate", "sugar-coat", "sugar-coated", "sugarcoated", "suicidal", "suicide", "sulk", "sullen", "sully", "sunder", "sunk", "sunken", "superficial", "superficiality", "superficially", "superfluous", "superstition", "superstitious", "suppress", "suppression", "surrender", "susceptible", "suspect", "suspicion", "suspicions", "suspicious", "suspiciously", "swagger", "swamped", "sweaty", "swelled", "swelling", "swindle", "swipe", "swollen", "symptom", "symptoms", "syndrome", "taboo", "tacky", "taint", "tainted", "tamper", "tangle", "tangled", "tangles", "tank", "tanked", "tanks", "tantrum", "tardy", "tarnish", "tarnished", "tarnishes", "tarnishing", "tattered", "taunt", "taunting", "tauntingly", "taunts", "taut", "tawdry", "taxing", "tease", "teasingly", "tedious", "tediously", "temerity", "temper", "tempest", "temptation", "tenderness", "tense", "tension", "tentative", "tentatively", "tenuous", "tenuously", "tepid", "terrible", "terribleness", "terribly", "terror", "terror-genic", "terrorism", "terrorize", "testily", "testy", "tetchily", "tetchy", "thankless", "thicker", "thirst", "thorny", "thoughtless", "thoughtlessly", "thoughtlessness", "thrash", "threat", "threaten", "threatening", "threats", "threesome", "throb", "throbbed", "throbbing", "throbs", "throttle", "thug", "thumb-down", "thumbs-down", "thwart", "time-consuming", "timid", "timidity", "timidly", "timidness", "tin-y", "tingled", "tingling", "tired", "tiresome", "tiring", "tiringly", "toil", "toll", "top-heavy", "topple", "torment", "tormented", "torrent", "tortuous", "torture", "tortured", "tortures", "torturing", "torturous", "torturously", "totalitarian", "touchy", "toughness", "tout", "touted", "touts", "toxic", "traduce", "tragedy", "tragic", "tragically", "traitor", "traitorous", "traitorously", "tramp", "trample", "transgress", "transgression", "trap", "traped", "trapped", "trash", "trashed", "trashy", "trauma", "traumatic", "traumatically", "traumatize", "traumatized", "travesties", "travesty", "treacherous", "treacherously", "treachery", "treason", "treasonous", "trick", "tricked", "trickery", "tricky", "trivial", "trivialize", "trouble", "troubled", "troublemaker", "troubles", "troublesome", "troublesomely", "troubling", "troublingly", "truant", "tumble", "tumbled", "tumbles", "tumultuous", "turbulent", "turmoil", "twist", "twisted", "twists", "two-faced", "two-faces", "tyrannical", "tyrannically", "tyranny", "tyrant", "ugh", "uglier", "ugliest", "ugliness", "ugly", "ulterior", "ultimatum", "ultimatums", "ultra-hardline", "un-viewable", "unable", "unacceptable", "unacceptablely", "unacceptably", "unaccessible", "unaccustomed", "unachievable", "unaffordable", "unappealing", "unattractive", "unauthentic", "unavailable", "unavoidably", "unbearable", "unbearablely", "unbelievable", "unbelievably", "uncaring", "uncertain", "uncivil", "uncivilized", "unclean", "unclear", "uncollectible", "uncomfortable", "uncomfortably", "uncomfy", "uncompetitive", "uncompromising", "uncompromisingly", "unconfirmed", "unconstitutional", "uncontrolled", "unconvincing", "unconvincingly", "uncooperative", "uncouth", "uncreative", "undecided", "undefined", "undependability", "undependable", "undercut", "undercuts", "undercutting", "underdog", "underestimate", "underlings", "undermine", "undermined", "undermines", "undermining", "underpaid", "underpowered", "undersized", "undesirable", "undetermined", "undid", "undignified", "undissolved", "undocumented", "undone", "undue", "unease", "uneasily", "uneasiness", "uneasy", "uneconomical", "unemployed", "unequal", "unethical", "uneven", "uneventful", "unexpected", "unexpectedly", "unexplained", "unfairly", "unfaithful", "unfaithfully", "unfamiliar", "unfavorable", "unfeeling", "unfinished", "unfit", "unforeseen", "unforgiving", "unfortunate", "unfortunately", "unfounded", "unfriendly", "unfulfilled", "unfunded", "ungovernable", "ungrateful", "unhappily", "unhappiness", "unhappy", "unhealthy", "unhelpful", "unilateralism", "unimaginable", "unimaginably", "unimportant", "uninformed", "uninsured", "unintelligible", "unintelligile", "unipolar", "unjust", "unjustifiable", "unjustifiably", "unjustified", "unjustly", "unkind", "unkindly", "unknown", "unlamentable", "unlamentably", "unlawful", "unlawfully", "unlawfulness", "unleash", "unlicensed", "unlikely", "unlucky", "unmoved", "unnatural", "unnaturally", "unnecessary", "unneeded", "unnerve", "unnerved", "unnerving", "unnervingly", "unnoticed", "unobserved", "unorthodox", "unorthodoxy", "unpleasant", "unpleasantries", "unpopular", "unpredictable", "unprepared", "unproductive", "unprofitable", "unprove", "unproved", "unproven", "unproves", "unproving", "unqualified", "unravel", "unraveled", "unreachable", "unreadable", "unrealistic", "unreasonable", "unreasonably", "unrelenting", "unrelentingly", "unreliability", "unreliable", "unresolved", "unresponsive", "unrest", "unruly", "unsafe", "unsatisfactory", "unsavory", "unscrupulous", "unscrupulously", "unsecure", "unseemly", "unsettle", "unsettled", "unsettling", "unsettlingly", "unskilled", "unsophisticated", "unsound", "unspeakable", "unspeakablely", "unspecified", "unstable", "unsteadily", "unsteadiness", "unsteady", "unsuccessful", "unsuccessfully", "unsupported", "unsupportive", "unsure", "unsuspecting", "unsustainable", "untenable", "untested", "unthinkable", "unthinkably", "untimely", "untouched", "untrue", "untrustworthy", "untruthful", "unusable", "unusably", "unuseable", "unuseably", "unusual", "unusually", "unviewable", "unwanted", "unwarranted", "unwatchable", "unwelcome", "unwell", "unwieldy", "unwilling", "unwillingly", "unwillingness", "unwise", "unwisely", "unworkable", "unworthy", "unyielding", "upbraid", "upheaval", "uprising", "uproar", "uproarious", "uproariously", "uproarous", "uproarously", "uproot", "upset", "upseting", "upsets", "upsetting", "upsettingly", "urgent", "useless", "usurp", "usurper", "utterly", "vagrant", "vague", "vagueness", "vain", "vainly", "vanity", "vehement", "vehemently", "vengeance", "vengeful", "vengefully", "vengefulness", "venom", "venomous", "venomously", "vent", "vestiges", "vex", "vexation", "vexing", "vexingly", "vibrate", "vibrated", "vibrates", "vibrating", "vibration", "vice", "vicious", "viciously", "viciousness", "victimize", "vile", "vileness", "vilify", "villainous", "villainously", "villains", "villian", "villianous", "villianously", "villify", "vindictive", "vindictively", "vindictiveness", "violate", "violation", "violator", "violators", "violent", "violently", "viper", "virulence", "virulent", "virulently", "virus", "vociferous", "vociferously", "volatile", "volatility", "vomit", "vomited", "vomiting", "vomits", "vulgar", "vulnerable", "wack", "wail", "wallow", "wane", "waning", "wanton", "war-like", "warily", "wariness", "warlike", "warned", "warning", "warp", "warped", "wary", "washed-out", "waste", "wasted", "wasteful", "wastefulness", "wasting", "water-down", "watered-down", "wayward", "weak", "weaken", "weakening", "weaker", "weakness", "weaknesses", "weariness", "wearisome", "weary", "wedge", "weed", "weep", "weird", "weirdly", "wheedle", "whimper", "whine", "whining", "whiny", "whips", "whore", "whores", "wicked", "wickedly", "wickedness", "wild", "wildly", "wiles", "wilt", "wily", "wimpy", "wince", "wobble", "wobbled", "wobbles", "woe", "woebegone", "woeful", "woefully", "womanizer", "womanizing", "worn", "worried", "worriedly", "worrier", "worries", "worrisome", "worry", "worrying", "worryingly", "worse", "worsen", "worsening", "worst", "worthless", "worthlessly", "worthlessness", "wound", "wounds", "wrangle", "wrath", "wreak", "wreaked", "wreaks", "wreck", "wrest", "wrestle", "wretch", "wretched", "wretchedly", "wretchedness", "wrinkle", "wrinkled", "wrinkles", "wrip", "wripped", "wripping", "writhe", "wrong", "wrongful", "wrongly", "wrought", "yawn", "zap", "zapped", "zaps", "zealot", "zealous", "zealously", "zombie"];
var AppDispatcher = new Flux.Dispatcher;

function Store(t, e) {
    this.CHANGE_EVENT = t + "_CHANGE.vidiq", this.data = $.extend(!0, {}, e._data), _.extend(this, e)
}
Store.prototype = {
    _data: {},
    listeners: [],
    adapters: [],
    removed: [],
    emitChange: function(t) {
        var e = this.CHANGE_EVENT,
            i = t || this.data;
        setTimeout(function() {
            $(window).trigger(e, i)
        })
    },
    addChangeListener: function(t) {
        var e = function(e, i) {
            var n = this.listeners.indexOf(t);
            this.removed.indexOf(n) >= 0 || t(i)
        }.bind(this);
        this.listeners.push(t), this.adapters.push(e), $(window).on(this.CHANGE_EVENT, e)
    },
    removeChangeListener: function(t) {
        var e = this.listeners.indexOf(t);
        if (!(0 > e)) {
            this.removed.push(e);
            var i = this.adapters[e];
            i && $(window).off(this.CHANGE_EVENT, i)
        }
    },
    onNextChange: function(t) {
        $(window).one(this.CHANGE_EVENT, function(e, i) {
            t(i)
        })
    },
    getData: function() {
        return this.data
    },
    setData: function(t) {
        _.extend(this.data, t), this.emitChange()
    },
    reset: function() {
        this.data = $.extend(!0, {}, this._data), this.emitChange()
    }
};
var FacebookIntegrationStore = new Store("FacebookIntegrationStore", {
    _data: {
        integration: null,
        targetPage: null,
        loading: !1,
        loaded: !1,
        error: !1
    },
    fetchIntegration: function() {
        log("FacebookIntegrationStore#fetchIntegration > START"), this.setData({
            loading: !0,
            error: !1
        }), api().getIntegration("facebook").done(function(t) {
            api().getCurrentChannel(!0).done(function(e) {
                log("FacebookIntegrationStore#fetchIntegration SUCCESS >", t);
                var o = t ? _.findWhere(t.pages, {
                    id: e.facebook_page_id
                }) : null;
                this.setData({
                    integration: t,
                    targetPage: o,
                    loading: !1,
                    loaded: !0,
                    error: !1
                })
            }.bind(this))
        }.bind(this)).fail(function(t) {
            log("FacebookIntegrationStore#getIntegration FAIL >", t), this.setData({
                loading: !1,
                error: !0
            })
        }.bind(this))
    },
    ensureFetched: function() {
        return log("FacebookIntegrationStore#ensureFetched > START"), this.data.loaded || this.data.loading ? !0 : (this.fetchIntegration(), !1)
    }
});
$(window).on("fbauth", FacebookIntegrationStore.fetchIntegration.bind(FacebookIntegrationStore));
var MassLikeStore = new Store("MassLikeStore", {
    _data: {
        loading: !0,
        finished: !1,
        successful: !1,
        message: null,
        channels: [],
        selected: []
    },
    fetchChannels: function() {
        api().channels(function(e) {
            this.setData({
                loading: !1,
                channels: e.channels
            })
        }.bind(this))
    },
    selectChannel: function(e) {
        var s = this.data.selected.concat(e);
        this.setData({
            selected: s
        })
    },
    deselectChannel: function(e) {
        var s = _.without(this.data.selected, e);
        this.setData({
            selected: s
        })
    },
    selectAll: function() {
        var e = _.pluck(this.data.channels, "id");
        this.setData({
            selected: e
        })
    },
    deselectAll: function() {
        this.setData({
            selected: []
        })
    },
    massLike: function(e) {
        Modal.lock(), MassLike.massLikeVideo(e, this.data.selected).done(function() {
            this.setData({
                successful: !0,
                message: "Successfully added " + this.data.selected.length + " new likes to your video!"
            })
        }.bind(this)).fail(function(e) {
            this.setData({
                message: "Failed to mass like your video: " + e
            })
        }.bind(this)).always(function() {
            this.setData({
                finished: !0
            }), Modal.unlock()
        }.bind(this))
    }
});
MassLikeStore.dispatchToken = AppDispatcher.register(function(e) {
    var s = MassLikeStore,
        t = MassLikeConstants;
    switch (e.action) {
        case t.FETCH_CHANNELS:
            s.fetchChannels();
            break;
        case t.SELECT_CHANNEL:
            s.selectChannel(e.channelId);
            break;
        case t.DESELECT_CHANNEL:
            s.deselectChannel(e.channelId);
            break;
        case t.SELECT_ALL:
            s.selectAll();
            break;
        case t.DESELECT_ALL:
            s.deselectAll();
            break;
        case t.MASS_LIKE:
            s.massLike(e.videoId);
            break;
        default:
            return !0
    }
});
var MasterVideosStore = new Store("MasterVideosStore", {
    _data: {
        videos: [],
        loading: !1,
        loaded: !1,
        error: !1
    },
    _video: {
        id: null,
        tempId: null,
        youtubeId: null,
        upload: null,
        uploadRecord: null,
        youtubeVideo: null,
        facebookVideo: null,
        syncing: !1,
        syncingFacebook: !1,
        youtubeStatus: null,
        downloadUrl: null
    },
    _facebookVideo: {
        facebook_page_id: null,
        category: null,
        title: null,
        description: null,
        embeddable: !1,
        scheduled_publish_time: null,
        syndication_status: null,
        published: null,
        unpublished_type: null,
        call_to_action: null,
        call_to_action_url: null,
        no_story: !1
    },
    getFacebookVideo: function(e) {
        var o = this.findByTempId(e);
        return o ? o.facebookVideo || {} : {}
    },
    onSelfChange: function(e) {
        var o = e.upload && e.upload.id,
            t = e.youtubeVideo && e.youtubeVideo.id;
        o && e.youtubeId && !t && (log("MasterVideosStore.onSelfChange > Declaring YouTube video"), this.declareYoutubeVideo(e)), t && o && !e.id && (log("MasterVideosStore.onSelfChange > Declaring Master video"), this.declareMasterVideo(e))
    },
    declareYoutubeVideo: function(e) {
        api().getCurrentChannel(!0).done(function(o) {
            var t = {
                youtube_id: e.youtubeId,
                youtube_channel_id: o.id
            };
            return e.syncing = !0, this.makeRequest({
                url: api().baseV1 + "youtube/videos",
                payload: t,
                source: "MasterVideosStore.declareYoutubeVideo",
                type: "post"
            }).always(function() {
                e.syncing = !1
            }).done(function(o) {
                e.youtubeVideo = o, this.emitChange(e)
            }.bind(this))
        }.bind(this))
    },
    declareMasterVideo: function(e) {
        var o = {
            youtube_video_id: e.youtubeVideo.id,
            upload_id: e.upload.id
        };
        return e.syncing = !0, this.makeRequest({
            url: api().baseV1 + "videos",
            payload: o,
            source: "MasterVideosStore.declareMasterVideo",
            type: "post"
        }).always(function() {
            e.syncing = !1
        }).done(function(o) {
            e.id = o.id, this.emitChange(e)
        }.bind(this))
    },
    makeRequest: function(e) {
        return e.type && e.url ? (e.type = e.type.toUpperCase(), log("%s > %s %s", e.source, e.type, e.url), u.retry(function() {
            var o = e.type.toLowerCase();
            switch (o) {
                case "post":
                    return $.jsonPost(e.url, e.payload);
                case "put":
                    return $.jsonPut(e.url, e.payload);
                case "get":
                    return $.get(e.url)
            }
        }).done(function(o) {
            log("%s > %s SUCCESS %s", e.source, e.type, e.url, o)
        }).fail(function(o) {
            log("%s > %s FAIL %s", e.source, e.type, e.url, o)
        })) : void 0
    },
    syndicateFacebook: function(e) {
        var o = e.facebookVideo;
        return e.syncingFacebook ? void this.onNextChange(function() {
            this.syndicateFacebook(e)
        }.bind(this)) : (e.syncing = !0, e.syncingFacebook = !0, _.extend(e.facebookVideo, {
            syndication_status: "pending"
        }), this.emitChange(e), u.track("Started syndicating to Facebook", {
            youtubeId: e.youtubeId
        }), api().audit("facebook_syndication.start", {
            youtube_id: e.youtubeId
        }), o.id ? void this.makeRequest({
            url: api().baseV1 + "facebook/videos/" + o.id + "/start_syndication",
            type: "post",
            source: "MasterVideosStore.syndicateFacebook > Resyndicate"
        }).always(function() {
            e.syncing = !1, e.syncingFacebook = !1, this.emitChange(e), this.pollFacebookVideo(e)
        }.bind(this)) : void this.makeRequest({
            url: api().baseV1 + "facebook/videos",
            payload: o,
            source: "MasterVideosStore.syndicateFacebook",
            type: "post"
        }).done(function(o) {
            _.extend(e.facebookVideo, o), this.pollFacebookVideo(e), this.updateMasterVideo(e, {
                facebook_video_id: o.id
            }).always(function() {
                e.syncing = !1, e.syncingFacebook = !1, this.emitChange(e)
            }.bind(this)).fail(function() {})
        }.bind(this)).fail(function() {
            e.syncing = !1, e.syncingFacebook = !1, _.extend(e.facebookVideo, {
                syndication_status: "error"
            }), this.emitChange(e)
        }.bind(this)))
    },
    pollFacebookVideo: function(e, o) {
        o || (o = 0);
        var t = 2e3,
            i = 1e3,
            a = !1;
        return this.makeRequest({
            url: api().baseV1 + "facebook/videos/" + e.facebookVideo.id,
            type: "get",
            source: "MasterVideosStore.pollFacebookVideo"
        }).done(function(o) {
            var t = e.facebookVideo.syndication_status,
                i = o.syndication_status;
            if (i !== t) switch (i) {
                case "complete":
                    u.track("Finished syndicating to Facebook", {
                        youtubeId: e.youtubeId
                    }), api().audit("facebook_syndication.finish", {
                        youtube_id: e.youtubeId
                    });
                    break;
                case "error":
                    var d = FACEBOOK_ERROR_CODES[o.syndication_error_code];
                    u.track("Error syndicating to Facebook", {
                        youtubeId: e.youtubeId,
                        error: d
                    }), api().audit("facebook_syndication.error", {
                        youtube_id: e.youtubeId,
                        error: d
                    })
            }
            "complete" !== i && "error" !== i || (a = !0), _.extend(e.facebookVideo, o), this.emitChange(e)
        }.bind(this)).always(function() {
            a || o > i || setTimeout(function() {
                this.pollFacebookVideo(e, o + 1)
            }.bind(this), t)
        }.bind(this))
    },
    updateMasterVideo: function(e, o) {
        var t = api().baseV1 + "videos/" + e.id,
            i = e.youtubeVideo || {},
            a = e.facebookVideo || {},
            d = e.upload || {},
            n = e.masterVideo || {};
        return o = _.extend({
            youtube_video_id: i.id || n.youtube_video_id || null,
            facebook_video_id: a.id || n.facebook_video_id || null,
            upload_id: d.id || n.upload_id || null
        }, o), this.makeRequest({
            url: t,
            payload: o,
            type: "put",
            source: "MasterVideosStore.updateMasterVideo"
        }).done(function(o) {
            _.extend(e, o), this.emitChange(o)
        }.bind(this))
    },
    createVideo: function(e) {
        var o = _.extend({}, this._video, {
            tempId: e,
            facebookVideo: _.extend({}, this._facebookVideo)
        });
        return log("MasterVideosStore.createVideo >", o), this.data.videos.push(o), this.emitChange(o), o
    },
    constructVideo: function(e, o) {
        var t = _.extend({}, this._video, {
                tempId: e,
                id: o.id,
                youtubeId: e,
                masterVideo: o,
                facebookVideo: _.extend({}, this._facebookVideo)
            }),
            i = [];
        if (o.facebook_video_id) {
            var a = this.makeRequest({
                type: "get",
                url: api().baseV1 + "facebook/videos/" + o.facebook_video_id,
                source: "MasterVideosStore.constructVideo"
            }).done(function(e) {
                t.facebookVideo = e, this.emitChange()
            }.bind(this));
            i.push(a)
        }
        return o.upload_id && (this.assignDownloadUrl(t, o.upload_id), i.push(this.loadUploadRecord(t, o.upload_id))), i.length > 0 && (t.syncing = !0, $.when.apply($, i).always(function() {
            t.syncing = !1, this.emitChange()
        }.bind(this))), this.data.videos.push(t), this.emitChange(), t
    },
    assignDownloadUrl: function(e, o) {
        e.downloadUrl = api().baseV1 + "uploads/" + o + "/download"
    },
    loadUploadRecord: function(e, o) {
        var t = this.makeRequest({
            type: "get",
            url: api().baseV1 + "uploads/" + o,
            source: "MasterVideoStore.constructVideo"
        }).done(function(o) {
            e.uploadRecord = o
        });
        return t
    },
    updateFacebookVideo: function(e, o) {
        var t = this.findByTempId(e);
        t && t.facebookVideo && (log("MasterVideosStore.updateFacebookVideo >", o), _.extend(t.facebookVideo, o), this.emitChange(t), t.facebookVideo.id && (t.syncing = !0, t.syncingFacebook = !0, this.emitChange(t), this.makeRequest({
            url: api().baseV1 + "facebook/videos/" + t.facebookVideo.id,
            type: "put",
            payload: o,
            source: "MasterVideosStore.updateFacebookVideo"
        }).done(function() {
            t.syncing = !1, t.syncingFacebook = !1, this.emitChange(t)
        }.bind(this))))
    },
    findByTempId: function(e) {
        return _.findWhere(this.data.videos, {
            tempId: e
        })
    },
    setFile: function(e, o) {
        var t = this.findByTempId(e);
        t && (log("MasterVideosStore.setFile > %s", e, o), t.upload = new Upload({
            tempId: e,
            file: o,
            onFinish: function() {
                this.emitChange(t), u.track("Finished archiving a video", {
                    youtubeId: t.youtubeId
                }), api().audit("archive.finish", {
                    youtube_id: t.youtubeId
                }), t.syncing = !0, this.emitChange(t), this.assignDownloadUrl(t, t.upload.id), this.loadUploadRecord(t, t.upload.id).done(function() {
                    t.syncing = !1, this.emitChange(t)
                }.bind(this))
            }.bind(this)
        }), this.emitChange(t))
    },
    setYoutubeId: function(e, o) {
        var t = this.findByTempId(e);
        t && (log("MasterVideosStore.setYoutubeId > %s", e, o), t.youtubeId = o, this.emitChange(t))
    },
    startUpload: function(e) {
        var o = this.findByTempId(e);
        if (o && o.upload) return log("MasterVideosStore.startUpload > Starting upload", o.upload), u.track("Started archiving a video", {
            youtubeId: o.youtubeId
        }), api().audit("archive.start", {
            youtube_id: o.youtubeId
        }), o.upload.start().done(function() {
            this.emitChange(o)
        }.bind(this))
    },
    cancelUpload: function(e, o) {
        var t = this.findByTempId(e);
        t && t.upload && (log("MasterVideosStore.cancelUpload > %s", e, t.upload), u.track("Cancelled archiving a video", {
            youtubeId: t.youtubeId
        }), api().audit("archive.cancel", {
            youtube_id: t.youtubeId
        }), t.upload.cancel(), t.upload = null, o && (t.youtubeStatus = "duplicate"), this.emitChange(t))
    },
    canSyndicate: function(e) {
        _.isString(e) && (e = this.findByTempId(e));
        var o = e && e.id,
            t = e.upload || e.uploadRecord,
            i = t && (t.done || t.complete);
        return o && i
    }
});
MasterVideosStore.addChangeListener(MasterVideosStore.onSelfChange.bind(MasterVideosStore)), MasterVideosStore.dispatchToken = AppDispatcher.register(function(e) {
    var o = e.tempId,
        t = MasterVideosStore,
        i = MasterVideosConstants;
    switch (e.action) {
        case i.CREATE_VIDEO:
            t.createVideo(o);
            break;
        case i.SET_FILE:
            t.setFile(o, e.file);
            break;
        case i.START_UPLOAD:
            t.startUpload(o);
            break;
        case i.CANCEL_UPLOAD:
            t.cancelUpload(o, e.status);
            break;
        case i.SET_YOUTUBE_ID:
            t.setYoutubeId(o, e.youtubeId);
            break;
        case i.UPDATE_FACEBOOK_VIDEO:
            t.updateFacebookVideo(o, e.data);
            break;
        case i.SYNDICATE:
            var a = t.findByTempId(o);
            if (!a || !t.canSyndicate(a)) return;
            "facebook" === e.service && t.syndicateFacebook(a);
            break;
        case i.LOAD_FROM_YOUTUBE_ID:
            var d = {
                youtube_video_youtube_id: e.youtubeId
            };
            log("MasterVideosStore > Loading from YoutubeId %s", e.youtubeId), $.get(api().baseV1 + "videos", d).done(function(o) {
                log("MasterVideosStore > Found a video associated with %s", e.youtubeId, o), t.constructVideo(e.youtubeId, o)
            }).error(function(o, i) {
                return 404 !== o.status ? void log("MasterVideosStore > Error loading from YoutubeId %s %s", e.youtubeId, i) : (log("MasterVideosStore > No existing video found"), void t.createVideo(e.youtubeId))
            });
            break;
        default:
            return !0
    }
});
var MassExportStore = new Store("MassExportStore", {
    BATCH_SIZE: 10,
    _data: {
        startedAt: null,
        finishedAt: null,
        cancelled: !1,
        exports: [],
        batches: [],
        csvUrl: null,
        payload: null,
        total: 0,
        channel: null
    },
    emitChange: function() {
        this._tec || (this._tec = _.throttle(function() {
            this.onSelfChange(), $(window).trigger(this.CHANGE_EVENT)
        }.bind(this), 200)), this._tec()
    },
    start: function(t) {
        this.reset(), this.setData({
            startedAt: new Date,
            channel: t
        }), this.loadVideos()
    },
    cancel: function() {
        this.setData({
            cancelled: !0
        })
    },
    onSelfChange: function() {
        var t = this.data;
        !t.startedAt || t.finishedAt || t.cancelled || (this.ensureLoadBatch(), this.ensureFinish())
    },
    ensureLoadBatch: function() {
        var t = this.getBatchProgress(),
            s = this.data.batches[0],
            a = this.data.exports,
            e = !_.isEmpty(s ? a.slice(s[1]) : a);
        e && (!s || s && t > .8) && this.loadBatch()
    },
    ensureFinish: function() {
        if (1 === this.getTotalProgress() && !this.data.finishedAt) {
            var t = _.pluck(this.data.exports, "data");
            this.setData({
                finishedAt: new Date,
                payload: t,
                csvUrl: Export.csv2url(Export.csv(t))
            })
        }
    },
    getExportProgress: function(t) {
        var s = this.data.exports,
            a = t ? s.slice(t[0], t[1]) : s,
            e = _.reduce(a, function(t, s) {
                return t + s.progress
            }, 0),
            i = e / a.length;
        return isFinite(i) ? i : 0
    },
    getBatchProgress: function() {
        var t = this.getExportProgress(this.data.batches[0]);
        return this._lastBatchProgress = t, t
    },
    getTotalProgress: function() {
        var t = this.data,
            s = this.getExportProgress() * t.exports.length / t.total;
        return this._lastTotalProgress = s, s
    },
    loadBatch: function() {
        var t = this.data.batches || [],
            s = this.data.batches[0] || [0, 0],
            a = Math.min(s[1] + this.BATCH_SIZE, this.data.exports.length),
            e = [s[1], a],
            i = this.data.exports.slice(e[0], e[1]);
        _.each(i, function(t) {
            t.onProgress = function() {
                this.emitChange()
            }.bind(this), t.build()
        }, this), t.unshift(e), this.setData({
            batches: t
        })
    },
    loadVideos: function() {
        var t = api().getFeatureLimit("export"),
            s = MyVideos;
        this.data.channel && (s = new TheirVideos(this.data.channel));
        var a = s.all(function(s) {
            if (this.data.cancelled) return a.cancel();
            var e;
            if (!(t && (e = t - this.data.exports.length, e < s.videos.length && a.cancel(), 0 >= e))) {
                var i = t ? s.videos.slice(0, e) : s.videos,
                    r = this.data.exports.concat(_.map(i, function(t) {
                        return Export.fromVideo(t)
                    })),
                    n = Math.min(s.totalVideos, t || s.totalVideos);
                !isFinite(n) && t && (n = t), this.setData({
                    exports: r,
                    total: n
                })
            }
        }.bind(this)).done(function() {
            this.setData({
                total: this.data.exports.length
            })
        }.bind(this))
    },
    getBatch: function() {
        if (this.data.batches.length) {
            var t = this.data.batches[0];
            return _.compact(_.map(this.data.exports.slice(0, t[1]), function(t) {
                return 1 !== t.progress ? {
                    progress: t.progress,
                    video: t._video
                } : void 0
            })).slice(0, this.BATCH_SIZE)
        }
    },
    getData: function() {
        var t = this.getTotalProgress(),
            s = this.data;
        return {
            started: !!s.startedAt,
            finished: !!s.finishedAt,
            startedAt: s.startedAt,
            finishedAt: s.finishedAt,
            csvUrl: s.csvUrl,
            progress: this._lastTotalProgress || 0,
            pageProgress: this._lastBatchProgress || 0,
            currentPage: Math.max(s.batches.length, 1),
            batch: this.getBatch(),
            payload: s.payload,
            eta: u.eta(s.startedAt, t)
        }
    }
});
MassExportStore.dispatchToken = AppDispatcher.register(function(t) {
    var s = MassExportStore,
        a = MassExportConstants;
    switch (t.action) {
        case a.START:
            s.start(t.channel);
            break;
        case a.CANCEL:
            s.cancel();
            break;
        default:
            return !0
    }
});
var TrendingVideosStore = new Store("TrendingVideosStore", {
    _data: {
        query: null,
        country: null,
        language: null,
        error: null,
        loading: null,
        videos: null,
        sortValue: null
    },
    fetch: function(t, e, a) {
        t || (t = this.data.query), e || (e = this.data.country || HS.getDefaultCountry()), a || (a = this.data.language || HS.getDefaultLanguage()), _.isArray(t) || (t = [t.toString()]);
        var n = _.values(_.pick(this.data, "query", "country", "language"));
        return _.isEqual(n, [t, e, a]) ? void 0 : (this.setData({
            loading: !0,
            query: t,
            country: e,
            language: a
        }), api().trendy({
            query: t,
            country: e,
            language: a,
            videoId: ytApi().currentVideoID()
        }).done(function(t) {
            var e = (t || {}).videos;
            this.data.sortValue && (e = this.sort(this.data.sortValue, e)), this.setData({
                loading: !1,
                videos: e || []
            })
        }.bind(this)).fail(function() {
            this.setData({
                loading: !1
            })
        }.bind(this)))
    },
    sort: function(t, e) {
        return e || (e = this.data.videos), _.sortBy(e, function(e) {
            switch (t) {
                case "matches":
                    return -e.related_to.length;
                case "overall":
                    return -e.vph * e.related_to.length;
                default:
                    return -e[t]
            }
        })
    }
});
TrendingVideosStore.dispatchToken = AppDispatcher.register(function(t) {
    var e = TrendingVideosStore,
        a = TrendingVideosConstants;
    switch (t.action) {
        case a.SORT:
            var n = e.sort(t.sortValue);
            _.extend(e.data, {
                videos: n,
                sortValue: t.sortValue
            }), e.emitChange();
            break;
        case a.FETCH:
            e.fetch(t.query, t.country, t.language);
            break;
        default:
            return !0
    }
});
var MyVideosStore = new Store("MyVideosStore", {
    _data: {
        pages: [],
        totalVideos: null,
        totalPages: null,
        finished: null,
        loading: !1,
        error: !1,
        cancelled: !1
    },
    getData: function() {
        var e = this.getVideos() || [],
            a = this.data.totalVideos;
        return !a && this.data.finished && (a = e.length), _.extend({}, this.data, {
            videos: e,
            currentPage: this.getCurrentPage(),
            bounded: isFinite(this.data.totalPages),
            arrested: this.data.error || this.data.cancelled,
            totalVideos: a
        })
    },
    getCurrentPage: function() {
        var e = _.max(_.pluck(this.data.pages, "currentPage"));
        return isFinite(e) && e || (e = 0), e
    },
    getVideos: function() {
        return _.flatten(_.pluck(this.data.pages, "videos"))
    },
    pageCallback: function(e) {
        var a = this.data.pages.slice(0);
        a[e.currentPage] = e;
        var t = e.totalPages,
            i = this.data.totalVideos;
        isFinite(t) || (t = this.data.totalPages), isFinite(e.totalVideos) && (i = e.totalVideos), MyVideosActions.updateSelf({
            pages: a,
            totalVideos: i,
            totalPages: t,
            finished: this.data.finished || !e.morePages
        }, {
            newVideos: e.videos
        })
    }
});
MyVideosStore.pageCallback = MyVideosStore.pageCallback.bind(MyVideosStore), MyVideosStore.dispatchToken = AppDispatcher.register(function(e) {
    var a = MyVideosStore,
        t = MyVideosConstants;
    switch (e.action) {
        case VideosConstants.UPDATE_VIDEO:
            AppDispatcher.waitFor([VideosStore.dispatchToken]), _.each(a.data.pages, function(a) {
                _.each(a.videos, function(a) {
                    a.videoId === e.videoId && _.extend(a, e.fragment)
                })
            }), a.emitChange();
            break;
        case t.UPDATE_SELF:
            _.extend(a.data, e.data), a.emitChange();
            break;
        case t.FETCH_ALL:
            a.fetcher && a.fetcher.cancel();
            var i = e.start || 1,
                d = i > 1 ? a.data.pages.slice(0, i) : [];
            a.data.cancelled = !1, a.data.error = !1, a.data.finished = !1, a.data.loading = !0, a.data.pages = d, a.emitChange(), a.fetcher = MyVideos.all(i, a.pageCallback).fail(function() {
                MyVideosActions.updateSelf({
                    error: !0
                })
            }).always(function() {
                MyVideosActions.updateSelf({
                    loading: !1
                }), a.fetcher = null
            });
            break;
        case t.FETCH_PAGE:
            if (a.getCurrentPage() >= e.page) return;
            a.fetcher && a.fetcher.cancel(), a.data.cancelled = !1, a.data.error = !1, a.data.finished = !1, a.data.loading = !0, a.emitChange(), MyVideos.page(e.page).done(function(e) {
                a.pageCallback(e), MyVideosActions.updateSelf({
                    loading: !1
                })
            });
            break;
        case t.CANCEL:
            a.fetcher && a.fetcher.cancel(), a.data.cancelled = !0, a.data.loading = !1, a.emitChange();
            break;
        default:
            return !0
    }
});
var AnnotationsStore = new Store("AnnotationsStore", {
    _data: {
        resources: {},
        flat: [],
        total: 0,
        loading: !1
    }
});
AnnotationsStore.dispatchToken = AppDispatcher.register(function(t) {
    var a, n, o, e = AnnotationsStore,
        i = AnnotationsConstants,
        r = t.videoId;
    switch (t.action) {
        case i.UPDATE_SELF:
            _.extend(e.data, t.data), e.emitChange();
            break;
        case i.DELETE:
            n = _.pluck(e.data.flat, "_id"), o = n.indexOf(t.annotation._id), e.data.flat.splice(o, 1), a = _.filter(e.data.resources[r], function(a) {
                return a._id !== t.annotation._id
            }), e.data.resources[r] = a, e.data.total -= 1, e.emitChange();
            break;
        case i.UPDATE:
            n = _.pluck(e.data.flat, "_id"), o = n.indexOf(t.annotation._id), e.data.flat.splice(o, 1, t.annotation), a = _.map(e.data.resources[r], function(a) {
                return a._id === t.annotation._id ? t.annotation : a
            }), e.data.resources[r] = a, e.emitChange();
            break;
        case i.FETCH:
            var d = _.map(t.videoIds, function(t) {
                var a = function() {
                    return Annotations.get(t)
                };
                return GrandCentral.push(a, "annotations").done(function(a) {
                    var n = e.data.resources;
                    n[t] = a, AnnotationsActions.updateSelf({
                        resources: n,
                        flat: e.data.flat.concat(a),
                        total: e.data.total + a.length
                    })
                })
            });
            $.when.apply($, d).done(function() {
                GrandCentral.isPending("annotations") || AnnotationsActions.updateSelf({
                    loading: !1
                })
            }), e.data.loading = !0, e.emitChange()
    }
});
var CardsStore = new Store("CardsStore", {
    _data: {
        resources: {},
        flat: [],
        total: 0,
        loading: !1
    }
});
CardsStore.dispatchToken = AppDispatcher.register(function(a) {
    var t, e, r, d = CardsStore,
        n = CardsConstants,
        s = a.videoId;
    switch (a.action) {
        case n.UPDATE_SELF:
            _.extend(d.data, a.data), d.emitChange();
            break;
        case n.DELETE:
            r = _.pluck(d.data.flat, "_id"), e = r.indexOf(a.card._id), d.data.flat.splice(e, 1), t = _.filter(d.data.resources[s], function(t) {
                return t._id !== a.card._id
            }), d.data.resources[s] = t, d.data.total -= 1, d.emitChange();
            break;
        case n.UPDATE:
            r = _.pluck(d.data.flat, "_id"), e = r.indexOf(a.card._id), d.data.flat.splice(e, 1, a.card), t = _.map(d.data.resources[s], function(t) {
                return t._id === a.card._id ? a.card : t
            }), d.data.resources[s] = t, d.emitChange();
            break;
        case n.FETCH:
            var c = _.map(a.videoIds, function(a) {
                var t = function() {
                    return Cards.get(a)
                };
                return GrandCentral.push(t, "cards").done(function(t) {
                    var e = d.data.resources;
                    e[a] = t, CardsActions.updateSelf({
                        resources: e,
                        flat: d.data.flat.concat(t),
                        total: d.data.total + t.length
                    })
                })
            });
            $.when.apply($, c).done(function() {
                GrandCentral.isPending("cards") || CardsActions.updateSelf({
                    loading: !1
                })
            }), d.data.loading = !0, d.emitChange()
    }
});
var FilterStore = new Store("FilterStore", {
    _data: {
        filter: {},
        items: [],
        matches: [],
        indices: [],
        searching: !1,
        getFilterable: null
    },
    filter: function(t, i, e) {
        var a = 10;
        if (t || (t = {
                matches: [],
                indices: []
            }), _.isNumber(i) || (i = 0), e) {
            if ("pending" !== e.state()) return
        } else this._filterDfd && this._filterDfd.reject(), this._filterDfd = new $.Deferred, e = this._filterDfd;
        for (var s = i * a, r = Math.min(s + a, this.data.items.length), n = !1, h = s; r > h; h += 1) {
            var d = this.data.items[h];
            this.itemMatchesFilter(d, h) && (t.matches.push(d), t.indices.push(h)), h + 1 === this.data.items.length && (n = !0)
        }
        return n ? this._filterDfd.resolve(t) : setTimeout(function() {
            "pending" === e.state() && (FilterActions.updateSelf({
                matches: t.matches,
                indices: t.indices
            }), this.filter(t, i + 1, e))
        }.bind(this), 1), this._filterDfd.promise()
    },
    itemMatchesFilter: function(t, i) {
        var e = _.keys(this.data.filter),
            a = t,
            s = !1;
        this.data.getFilterable && (a = this.data.getFilterable(t, i));
        for (var r = 0; r < e.length; r += 1) {
            var n = e[r],
                h = a[n],
                d = this.data.filter[n];
            if (void 0 !== d) {
                var f = d === !0 || d === !1 || _.isString(d) || _.isNumber(d);
                if (f && h === d ? s = !0 : d instanceof RegExp ? s = _.isString(h) && h.match(d) : d.memberOf ? s = d.memberOf.indexOf(h) >= 0 : "function" == typeof d && (s = d(a, i)), !s) break
            }
        }
        return s
    },
    startFiltering: function() {
        _.isEmpty(this.data.filter) ? (this.data.matches = this.data.items, this.data.indices = _.range(this.data.items.length), this.data.searching = !1) : (this.data.matches = [], this.data.indices = [], this.data.searching = !0, this.filter().done(function(t) {
            setTimeout(function() {
                FilterActions.updateSelf({
                    matches: t.matches,
                    indices: t.indices,
                    searching: !1
                })
            })
        }))
    },
    set: function(t, i, e) {
        this.data.items = t, this.data.getFilterable = i, e && (this.data.filter = {}), this.startFiltering(), setTimeout(function() {
            this.emitChange()
        }.bind(this))
    },
    isFiltering: function() {
        return !_.isEmpty(this.data.filter)
    }
});
FilterStore.dispatchToken = AppDispatcher.register(function(t) {
    var i = FilterStore,
        e = FilterConstants;
    switch (i.data.filterChanged = !1, t.action) {
        case e.UPDATE_SELF:
            _.extend(i.data, t.data), i.emitChange();
            break;
        case e.FILTER:
            var a = i.data.filter;
            _.each(t.fragment, function(t, e) {
                if (void 0 === t) i.data.filter = _.omit(i.data.filter, e);
                else {
                    var a = _.object([
                        [e, t]
                    ]);
                    i.data.filter = _.extend({}, i.data.filter, a)
                }
            }, this), i.startFiltering(), i.data.filterChanged = !_.isEqual(a, i.data.filter), i.emitChange()
    }
});
var PlaylistsStore = new Store("PlaylistsStore", {
    _data: {
        resources: [],
        byId: {},
        loading: !1
    },
    getVideos: function(t) {
        return (this.getData().byId[t] || {}).videos || []
    },
    getAllVideos: function(t) {
        t = t || this.data.resources;
        var e = {};
        return _.each(t, function(t) {
            _.each(t.videos, function(a) {
                e[a.id] ? e[a.id].playlistIds.push(t.id) : e[a.id] = _.extend(a, {
                    playlistIds: [t.id]
                })
            })
        }), _.values(e)
    }
});
PlaylistsStore.dispatchToken = AppDispatcher.register(function(t) {
    var e = PlaylistsStore,
        a = PlaylistsConstants;
    switch (t.action) {
        case a.UPDATE_SELF:
            _.extend(e.data, t.data), e.emitChange();
            break;
        case a.FETCH:
            e.data.resources = [], e.data.loading = !0, Playlists.all().done(function(t) {
                var a = _.object(_.map(t, function(t) {
                    return [t.id, t]
                }));
                PlaylistsActions.updateSelf({
                    resources: t,
                    byId: a,
                    loading: !1
                }, {
                    newVideos: e.getAllVideos(t)
                })
            }), e.emitChange()
    }
});
var UploadCompanionStore = {
    stores: {},
    id: function(t) {
        return this.stores[t] ? this.stores[t] : this.create(t)
    },
    create: function(t) {
        t || (t = u.prettyRandomId());
        var e = new Store("UploadCompanionStore[" + t + "]", {
                _data: {
                    videoId: null,
                    permitted: api().featurePermitted("uploadAndEdit"),
                    optimized: api().userTypeIs("enterprise"),
                    keywords: [],
                    desc: UploadDOM.getUserDesc(t),
                    title: UploadDOM.getUserTitle(t),
                    query: [],
                    country: HS.getDefaultCountry(),
                    language: HS.getDefaultLanguage(),
                    hotSearch: {},
                    topKeywords: [],
                    recTitle: [],
                    recDesc: [],
                    loading: !1,
                    origLang: UploadDOM.getOriginalLang(t),
                    transLang: UploadDOM.getTranslationLang(t),
                    settings: dataStore.getItem("upload_settings") || {}
                },
                getTopKeywords: function(t) {
                    return t.hotSearch ? _.chain(t.hotSearch.search_stats.compvol).each(function(t, e) {
                        _.extend(t, {
                            keyword: e
                        })
                    }).sortBy(function(t) {
                        return -t.overall
                    }).slice(0, 5).value() : []
                },
                getSuggested: function(t, e) {
                    return _.filter(t, function(t) {
                        var a = t.keyword.split(" ");
                        return _.some(a, function(t) {
                            return e.toLowerCase().indexOf(t.toLowerCase()) < 0
                        })
                    })
                }
            }),
            a = {
                titleDesc: !!api().featurePermitted("uploadAndEdit"),
                charCount: !0,
                kwIns: !0,
                clearKws: !0,
                copyKws: !0,
                dragDrop: !0,
                translate: !0,
                companion: !0
            },
            n = _.keys(a),
            o = _.keys(e.data.settings),
            s = _.difference(n, o);
        if (_.isEmpty(e.data.settings)) dataStore.setItem("upload_settings", a), e.data.settings = a;
        else if (s.length) {
            var r = _.extend({}, e.data.settings);
            _.each(s, function(t) {
                r[t] = a[t]
            }), dataStore.setItem("upload_settings", r), e.data.settings = r
        }
        return this.stores[t] = e, this.stores[t]
    }
};
UploadCompanionStore.dispatchToken = AppDispatcher.register(function(t) {
    if (t.id) {
        var e = UploadCompanionStore.stores[t.id],
            a = UploadCompanionConstants;
        if (e) switch (t.action) {
            case a.UPDATE_SETTING:
                e.data.settings[t.key] = t.value, dataStore.setItem("upload_settings", e.data.settings), e.emitChange();
                break;
            case a.UPDATE:
                _.extend(e.data, t.payload), e.emitChange()
        }
    }
});
var VideoBufferStore = new Store("VideoBufferStore", {
    _data: {
        mode: "limit",
        limit: 30,
        list: [],
        playlist: null,
        willScrape: !1
    },
    ok: function() {
        switch (this.data.mode) {
            case "list":
                return this.data.list && !_.isEmpty(this.data.list);
            case "playlist":
                return !!this.data.playlist;
            default:
                return !0
        }
    },
    getVideos: function() {
        var t = VideosStore.getData(),
            i = _.values(t);
        switch (this.data.mode) {
            case "playlist":
                var e = this.data.playlist;
                i = _.filter(i, function(t) {
                    return t.playlistIds && t.playlistIds.indexOf(e) >= 0
                });
                break;
            case "list":
                return _.values(_.pick.apply(_, [t].concat(this.data.list)));
            case "limit":
                this.data.limit && (i = i.slice(0, this.data.limit))
        }
        return this._lastVideos = i, i
    },
    getCachedVideos: function() {
        return this._lastVideos || this.getVideos()
    },
    isLoading: function() {
        var t = this.getCachedVideos().length;
        switch (this.data.mode) {
            case "playlist":
                return !1;
            default:
                return t === this.getTotal() ? !1 : MyVideosStore.data.loading || VideosStore.isLoading()
        }
    },
    getData: function() {
        var t = this.getTotal(),
            i = this.getVideos();
        return _.extend({
            videos: i,
            total: t,
            loading: this.isLoading(),
            progress: i.length / t,
            scraping: this.isScraping(),
            scrapingP: this.scrapingProgress(),
            ok: this.ok()
        }, this.data)
    },
    getTotal: function() {
        switch (this.data.mode) {
            case "playlist":
                return this.getCachedVideos().length;
            case "list":
                return VideosStore.isLoading() ? this.data.list.length : this.getCachedVideos().length;
            case "limit":
                var t = MyVideosStore.getData();
                return t.loading && !this.data.limit ? null : t.loading || !t.finished ? this.data.limit : this.getCachedVideos().length
        }
    },
    isScraping: function() {
        var t = this.scrapingProgress();
        return this.data.willScrape || t > 0 && 1 > t
    },
    scrapingProgress: function() {
        var t = this._lastVideos || this.getVideos(),
            i = _.filter(t, function(t) {
                return t._scrapedStats
            });
        return i.length / t.length
    }
});
VideoBufferStore.dispatchToken = AppDispatcher.register(function(t) {
    var i = VideoBufferStore,
        e = VideoBufferConstants;
    switch (t.action) {
        case e.UPDATE_SELF:
            _.extend(i.data, t.data);
            break;
        default:
            var a = t.meta && t.meta.newVideos,
                s = 0 === t.action.indexOf("VIDEOS_"),
                r = 0 === t.action.indexOf("MY_VIDEOS_"),
                n = [];
            if ((s || a) && n.push(VideosStore.dispatchToken), r && n.push(MyVideosStore.dispatchToken), 0 === n.length) return;
            i._lastVideos = null, AppDispatcher.waitFor(n)
    }
    i.scrapingProgress() > 0 && (i.data.willScrape = !1), i.emitChange()
});
var VideosStore = new Store("VideosStore", {
    _data: {},
    _pending: {},
    isLoading: function() {
        return !_.isEmpty(this._pending)
    }
});
VideosStore.dispatchToken = AppDispatcher.register(function(e) {
    var a = VideosStore,
        d = VideosConstants;
    switch (e.action) {
        case d.REGISTER_UPDATE:
            a._pending[e.videoId] = !0, a.emitChange();
            break;
        case d.UNREGISTER_UPDATE:
            delete a._pending[e.videoId], a.emitChange();
            break;
        case d.UPDATE_SELF:
            _.extend(a.data, e.data), a.emitChange();
            break;
        case d.UPDATE_VIDEO:
            var t = a.data[e.videoId] || {
                id: e.videoId
            };
            a.data[e.videoId] = _.extend({}, t, e.fragment), delete a._pending[e.videoId], a.emitChange();
            break;
        default:
            if (!e.meta || !e.meta.newVideos) break;
            _.each(e.meta.newVideos, function(e) {
                e.sameChannel !== !1 && (a.data[e.id] = _.extend({}, a.data[e.id] || {}, e))
            }), a.emitChange()
    }
});
var TemporaryStore = new Store("TemporaryStore", {
    _data: {},
    get: function(t) {
        return this.data[t]
    },
    ensure: function(t, a) {
        var e = this.get(t, a);
        if (e) return e;
        var r = _.extend({}, a);
        return this.data[t] = r, r
    }
});
TemporaryStore.dispatchToken = AppDispatcher.register(function(t) {
    var a = TemporaryStore,
        e = TemporaryConstants;
    switch (t.action) {
        case e.UPDATE_SELF:
            t.extend ? _.each(t.data, function(t, e) {
                a.data[e] = _.extend({}, a.data[e] || {}, t)
            }) : a.data = t.data, a.emitChange()
    }
});
var TranslationStore = {
    stores: {},
    id: function(a) {
        return this.stores[a] ? this.stores[a] : this.create(a)
    },
    create: function(a) {
        var t = new Store("TranslationStore[" + a + "]", {
            _data: {
                source: dataStore.getItem("default_source_language") || Translations.defaults.source,
                target: dataStore.getItem("default_target_language") || Translations.defaults.target,
                keywords: [],
                translated: [],
                loading: !1,
                error: !1
            }
        });
        return this.stores[a] = t, this.stores[a]
    }
};
TranslationStore.dispatchToken = AppDispatcher.register(function(a) {
    var t = TranslationStore.stores[a.id],
        e = TranslationConstants;
    if (a.id && t) {
        var r = UploadCompanionStore.id(a.id);
        switch (a.action) {
            case UploadCompanionConstants.UPDATE:
                AppDispatcher.waitFor([UploadCompanionStore.dispatchToken]);
                var o = r.getData();
                t.data.keywords = o.keywords, t.emitChange();
                break;
            case e.TRANSLATE:
                t.data.translated = a.translated, t.data.error = !1, t.data.loading = !1, t.emitChange();
                break;
            case e.UPDATE_LANGUAGE:
                t.data[a.key] = a.language, dataStore.setItem("default_" + a.key + "_language", a.language), t.emitChange();
                break;
            case e.UPDATE:
                _.extend(t.data, a.payload), t.emitChange()
        }
    }
});
var ChoicesConstants = u.keyMirror(["CLEAR", "TOGGLE", "SELECT", "DESELECT"], "CHOICES"),
    ChoicesStore = {
        stores: {},
        id: function(t) {
            return this.stores[t] ? this.stores[t] : this.create(t)
        },
        create: function(t) {
            var e = {
                    clear: function() {
                        AppDispatcher.dispatch({
                            id: t,
                            action: ChoicesConstants.CLEAR
                        })
                    },
                    toggle: function(e) {
                        AppDispatcher.dispatch({
                            id: t,
                            action: ChoicesConstants.TOGGLE,
                            index: e
                        })
                    },
                    select: function() {
                        var e = _.toArray(arguments);
                        AppDispatcher.dispatch({
                            id: t,
                            action: ChoicesConstants.SELECT,
                            indices: e
                        })
                    },
                    deselect: function() {
                        var e = _.toArray(arguments);
                        AppDispatcher.dispatch({
                            id: t,
                            action: ChoicesConstants.DESELECT,
                            indices: e
                        })
                    }
                },
                i = new Store("SelectionStore[" + t + "]", {
                    reset: function() {
                        this.data = []
                    },
                    isSelected: function(t) {
                        return this.data.indexOf(t) >= 0
                    },
                    hasSelections: function() {
                        return this.data.length > 0
                    }
                });
            return i.reset(), i.actions = e, this.stores[t] = i, this.stores[t]
        }
    };
ChoicesStore.dispatchToken = AppDispatcher.register(function(t) {
    if (t.id) {
        var e = ChoicesStore.stores[t.id],
            i = ChoicesConstants;
        if (e) switch (t.action) {
            case i.CLEAR:
                e.data = [], e.emitChange();
                break;
            case i.TOGGLE:
                e.data.indexOf(t.index) >= 0 ? e.data = _.without(e.data, t.index) : e.data.push(t.index), e.emitChange();
                break;
            case i.SELECT:
                e.data = _.uniq(e.data.concat(t.indices)), e.emitChange();
                break;
            case i.DESELECT:
                e.data = _.difference(e.data, t.indices), e.emitCHange()
        }
    }
});
var CommentsStore = new Store("CommentsStore", {
    _data: {
        allThreads: [],
        filter: "all",
        multiFilters: [],
        searchTerms: [],
        blacklist: [],
        videoIds: [],
        subCounts: {},
        username: null,
        minSubscribers: null,
        showCount: null,
        filtering: !1,
        pending: !1,
        pendingThreads: 0
    },
    getData: function() {
        return _.extend({}, this.data, {
            loading: this.data.filtering || this.data.pending
        })
    }
});
CommentsStore.dispatchToken = AppDispatcher.register(function(e) {
    var a = CommentsStore,
        t = CommentsConstants;
    switch (e.action) {
        case t.UPDATE:
            _.extend(a.data, e.payload), a.emitChange();
            break;
        case t.REGISTER_THREAD:
            a.data.pending = !0, a.data.pendingThreads += 1, 1 === a.data.pending && a.emitChange();
            break;
        case t.ADD_THREAD:
            a.data.pendingThreads > 0 && (a.data.pendingThreads -= 1, 0 === a.data.pendingThreads && (a.data.pending = !1));
            var n = _.findWhere(a.data.allThreads, {
                id: e.thread.id
            });
            if (n) return void(n.element = e.thread.element);
            a.data.allThreads.push(e.thread), a.emitChange()
    }
});
var CommentTemplatesStore = new Store("CommentTemplatesStore", {
    _data: {
        templates: {},
        channelName: null,
        selectedName: null
    }
});
CommentTemplatesStore.dispatchToken = AppDispatcher.register(function(e) {
    var t = CommentTemplatesStore,
        a = CommentTemplatesConstants;
    switch (e.action) {
        case a.UPDATE:
            _.extend(t.data, e.data), t.emitChange()
    }
});
var SubscribersStore = new Store("SubscribersStore", {
    _data: {
        subscribers: []
    },
    isSubscriber: function(r) {
        return this.getData().subscribers.indexOf(r) > -1
    },
    isEmpty: function() {
        return 0 === this.data.subscribers.length
    }
});
SubscribersStore.dispatchToken = AppDispatcher.register(function(r) {
    var s = SubscribersStore,
        e = SubscribersConstants;
    switch (r.action) {
        case e.UPDATE:
            _.extend(s.data, r.payload), s.emitChange()
    }
});
var KeywordDataStore = new Store("KeywordDataStore", {
    _data: {}
});
KeywordDataStore.dispatchToken = AppDispatcher.register(function(a) {
    var t = KeywordDataStore,
        e = KeywordDataConstants;
    if (t) switch (a.action) {
        case e.UPDATE:
            _.extend(t.data, a.payload), t.emitChange()
    }
});
var ThumbnailTemplatesStore = new Store("ThumbnailTemplatesStore", {
    _data: {
        thumbnail_templates: {},
        replace: !1,
        saveName: null,
        loadName: null,
        loading: !1,
        message: {},
        msgOpacity: 0,
        imageCodes: {}
    }
});
ThumbnailTemplatesStore.dispatchToken = AppDispatcher.register(function(e) {
    var a = ThumbnailTemplatesStore,
        t = ThumbnailTemplatesConstants;
    switch (e.action) {
        case t.UPDATE:
            _.extend(a.data, e.data), a.emitChange()
    }
});
var AnnotationCardTemplatesStore = new Store("AnnotationCardTemplatesStore", {
    _data: {
        templates: {},
        message: null,
        loading: !1,
        hasResources: {
            annotate: !1,
            card: !1
        }
    }
});
AnnotationCardTemplatesStore.dispatchToken = AppDispatcher.register(function(t) {
    var a = AnnotationCardTemplatesStore,
        e = AnnotationCardTemplatesConstants;
    switch (t.action) {
        case e.UPDATE:
            _.extend(a.data, t.data), a.emitChange()
    }
});
var ThumbnailEditorStore = new Store("ThumbnailEditorStore", {
    _data: {
        videoId: null,
        color: "#549dd2",
        defaultColor: "#fff",
        defaultBorderColor: "#000",
        defaultBorderWidth: 0,
        defaultOpacity: 1,
        defaultTextAttributes: {
            font: "Helvetica",
            weight: "normal",
            decoration: "none",
            size: "48"
        },
        uploadedImage: null,
        backgroundImageUri: null,
        thumbnailUri: null,
        currentThumbnail: null,
        fabricJson: null,
        activeTabs: {},
        canvases: {},
        saved: !1,
        error: null,
        loading: !1,
        buffered: !1
    }
});
ThumbnailEditorStore.dispatchToken = AppDispatcher.register(function(a) {
    var e = ThumbnailEditorStore,
        t = ThumbnailEditorConstants;
    switch (a.action) {
        case t.UPDATE:
            _.extend(e.data, a.data), e.emitChange()
    }
});
var VideoInfoStore = {
    stores: {},
    id: function(e) {
        return this.stores[e] ? this.stores[e] : this.create(e)
    },
    create: function(e) {
        e || (e = u.prettyRandomId());
        var t = new Store("VideoInfoStore[" + e + "]", {
            _data: {
                videoId: e,
                socialStats: null,
                keywords: null,
                searchedForKeywords: !1,
                title: null,
                scraped: null
            }
        });
        return this.stores[e] = t, this.stores[e]
    }
};
VideoInfoStore.dispatchToken = AppDispatcher.register(function(e) {
    if (e.id) {
        var t = VideoInfoStore.stores[e.id],
            o = VideoInfoConstants;
        if (t) switch (e.action) {
            case o.UPDATE:
                _.extend(t.data, e.payload), t.emitChange()
        }
    }
});
var MainStore = new Store("MainStore", {
    _data: {
        authed: null,
        error: null,
        loading: null
    }
});
MainStore.dispatchToken = AppDispatcher.register(function(a) {
    var t = MainStore,
        n = MainConstants;
    switch (a.action) {
        case n.UPDATE:
            _.extend(t.data, a.data), t.emitChange()
    }
});
var VideoCompanionStore = new Store("VideoCompanionStore", {
    _data: {
        activeTab: dataStore.getItem("vc_active_tab") || "stats",
        collapsed: dataStore.getItem("vc_collapsed") || !1,
        videoId: null,
        data: {}
    },
    createVsm: function() {
        log("VideoCompanionStore -- creating new VSM");
        var a = {
            video_id: this.data.videoId
        };
        this.vsm = createVideoStatsManager({
            getData: function() {
                return a
            },
            mergeData: function(t) {
                if (a.video_id === this.data.videoId) {
                    _.extend(a, this.data.data, t);
                    var e = this.data.videoId;
                    setTimeout(function() {
                        VideoCompanionActions.update({
                            data: a
                        }, e)
                    }, 0)
                }
            }.bind(this)
        })
    }
});
VideoCompanionStore.dispatchToken = AppDispatcher.register(function(a) {
    var t = VideoCompanionStore,
        e = VideoCompanionConstants;
    switch (a.action) {
        case e.UPDATE:
            if (a.forVideo && a.forVideo !== t.data.videoId) return void log('VideoCompanionStore -- rejecting old video id "' + a.forVideo + '; current id is "' + t.data.videoId + '"');
            var o = !1;
            a.payload.videoId && t.data.videoId !== a.payload.videoId && (o = !0, t.data.data = {}), _.extend(t.data, a.payload), o && (t.vsm && (log("VideoCompanionStore -- stopping old VSM"), t.vsm.stop()), t.createVsm()), dataStore.setItem("vc_active_tab", t.data.activeTab), dataStore.setItem("vc_collapsed", t.data.collapsed), t.emitChange();
            break;
        case e.REQUEST_DATA:
            if (!t.vsm) break;
            t.vsm.requestMany(_.pluck(VC_DECLARED_STATS, "key").concat(VC_OTHER_REQUESTED_DATA));
            break;
        case e.ADD_KEYWORD:
            var d = a.payload,
                i = (t.data.data.keyword_data || []).concat([d]),
                n = (t.data.data.keyword || []).concat([d.keyword]);
            t.data.data.keyword_data = i, t.data.data.keywords = n, t.emitChange()
    }
});

function createStoreMixin(t, n) {
    return n || (n = function(t) {
        return t
    }), {
        getState: function() {
            return n.bind(this)(t.getData())
        },
        getInitialState: function() {
            return this.getState()
        },
        componentWillMount: function() {
            t.addChangeListener(this.onStoreChange), this._componentWillMount && this._componentWillMount()
        },
        componentWillUnmount: function() {
            t.removeChangeListener(this.onStoreChange), this._componentWillUnmount && this._componentWillUnmount()
        },
        onStoreChange: function() {
            this.setState(this.getState())
        }
    }
}

function wrapComponent(t, n, e) {
    return React.createClass({
        mixins: [createStoreMixin(n, e)],
        render: function() {
            var n = _.extend({}, this.state, this.props);
            return React.createElement(t, n)
        }
    })
}
"use strict";
var AdvancedEmbedBase = React.createClass({
        displayName: "AdvancedEmbedBase",
        propTypes: {
            video: React.PropTypes.object.isRequired
        },
        getInitialState: function() {
            var e = this.props.video.duration;
            return {
                size: "1920x1080",
                width: 1920,
                height: 1080,
                vq: "default",
                start: "0:00",
                end: e,
                autoplay: !1,
                cc_load_policy: !1,
                controls: !0,
                disablekb: !1,
                fs: !0,
                iv_load_policy: !0,
                loop: !1,
                modestbranding: !1,
                rel: !0,
                showinfo: !0,
                enhancedPrivacy: !1,
                embedCode: null
            }
        },
        componentDidMount: function() {
            u.track("Opened advanced video embed", {
                video: {
                    url: u.getVideoUrl(this.props.video.id),
                    value: this.props.video.title
                }
            }), Modal.setButtons(["close"]), this.clipboard = new Clipboard("#embedCode");
            var e = AdvancedEmbed.getEmbedCode(this.props.video.id, this.props.video.duration, this.state);
            this.setState({
                embedCode: e
            })
        },
        componentWillUnmount: function() {
            this.clipboard.destroy()
        },
        onChange: function(e) {
            var t = {},
                a = e.target.id,
                s = "checkbox" === e.target.type ? e.target.checked : e.target.value;
            if ("size" === a && "custom" !== s && (t = _.extend(t, this.getUpdatedPlayerSize(s))), "vq" === a && "default" !== s) {
                var n = _.findWhere(e.target.options, {
                    selected: !0
                });
                t = _.extend(t, this.getUpdatedPlayerSize(n.dataset.playerSize))
            }
            t[a] = s, t.embedCode = AdvancedEmbed.getEmbedCode(this.props.video.id, this.props.video.duration, _.extend(this.state, t)), this.setState(t)
        },
        getUpdatedPlayerSize: function(e) {
            var t = e.split("x");
            return {
                size: e,
                width: t[0],
                height: t[1]
            }
        },
        render: function() {
            var e = "https://developers.google.com/youtube/player_parameters#Parameters",
                t = "custom" === this.state.size ? "inline" : "none";
            return React.createElement("div", {
                className: "vidiq-advanced-embed"
            }, React.createElement("p", null, "This dialog helps you take advantage of the available embedding options YouTube provides. To read more about these options, see ", React.createElement("a", {
                href: e,
                target: "_blank"
            }, "YouTube's embedded player documentation"), "."), React.createElement("div", {
                className: "embed-options-container"
            }, React.createElement("div", {
                className: "embed-column"
            }, React.createElement("div", {
                className: "embed-option"
            }, "Player size:", React.createElement("select", {
                id: "size",
                value: this.state.size,
                onChange: this.onChange
            }, React.createElement("option", {
                value: "320x240"
            }, "320x240"), React.createElement("option", {
                value: "640x360"
            }, "640x360"), React.createElement("option", {
                value: "853x480"
            }, "853x480"), React.createElement("option", {
                value: "1280x720"
            }, "1280x720"), React.createElement("option", {
                value: "1920x1080"
            }, "1920x1080"), React.createElement("option", {
                value: "custom"
            }, "Custom")), React.createElement("span", {
                className: "embed-option-custom-size",
                style: {
                    display: t
                }
            }, React.createElement("input", {
                id: "width",
                type: "text",
                value: this.state.width,
                onChange: this.onChange
            }), "by", React.createElement("input", {
                id: "height",
                type: "text",
                value: this.state.height,
                onChange: this.onChange
            }))), React.createElement("div", {
                className: "embed-option"
            }, "Quality:", React.createElement("select", {
                id: "vq",
                value: this.state.vq,
                onChange: this.onChange
            }, React.createElement("option", {
                value: "default"
            }, "Default"), React.createElement("option", {
                value: "small",
                "data-player-size": "320x240"
            }, "240p"), React.createElement("option", {
                value: "medium",
                "data-player-size": "640x360"
            }, "360p"), React.createElement("option", {
                value: "large",
                "data-player-size": "853x480"
            }, "480p"), React.createElement("option", {
                value: "hd720",
                "data-player-size": "1280x720"
            }, "720p"), React.createElement("option", {
                value: "hd1080",
                "data-player-size": "1920x1080"
            }, "1080p"))), React.createElement("div", {
                className: "embed-option"
            }, React.createElement("input", {
                type: "checkbox",
                id: "autoplay",
                checked: this.state.autoplay,
                onChange: this.onChange
            }), React.createElement("label", {
                htmlFor: "autoplay"
            }, "Autoplay video")), React.createElement("div", {
                className: "embed-option"
            }, React.createElement("input", {
                type: "checkbox",
                id: "cc_load_policy",
                checked: this.state.cc_load_policy,
                onChange: this.onChange
            }), React.createElement("label", {
                htmlFor: "cc_load_policy"
            }, "Show captions")), React.createElement("div", {
                className: "embed-option"
            }, React.createElement("input", {
                type: "checkbox",
                id: "controls",
                checked: this.state.controls,
                onChange: this.onChange
            }), React.createElement("label", {
                htmlFor: "controls"
            }, "Show player controls")), React.createElement("div", {
                className: "embed-option"
            }, React.createElement("input", {
                type: "checkbox",
                id: "disablekb",
                checked: this.state.disablekb,
                onChange: this.onChange
            }), React.createElement("label", {
                htmlFor: "disablekb"
            }, "Disable keyboard controls")), React.createElement("div", {
                className: "embed-option"
            }, React.createElement("input", {
                type: "checkbox",
                id: "fs",
                checked: this.state.fs,
                onChange: this.onChange
            }), React.createElement("label", {
                htmlFor: "fs"
            }, "Allow fullscreen"))), React.createElement("div", {
                className: "embed-column"
            }, React.createElement("div", {
                className: "embed-option"
            }, "Play video from", React.createElement("input", {
                id: "start",
                type: "text",
                value: this.state.start,
                maxLength: "8",
                onChange: this.onChange
            }), "to", React.createElement("input", {
                id: "end",
                type: "text",
                value: this.state.end,
                maxLength: "8",
                onChange: this.onChange
            })), React.createElement("div", {
                className: "embed-option"
            }, React.createElement("input", {
                type: "checkbox",
                id: "iv_load_policy",
                checked: this.state.iv_load_policy,
                onChange: this.onChange
            }), React.createElement("label", {
                htmlFor: "iv_load_policy"
            }, "Show annotations")), React.createElement("div", {
                className: "embed-option"
            }, React.createElement("input", {
                type: "checkbox",
                id: "loop",
                checked: this.state.loop,
                onChange: this.onChange
            }), React.createElement("label", {
                htmlFor: "loop"
            }, "Loop video")), React.createElement("div", {
                className: "embed-option"
            }, React.createElement("input", {
                type: "checkbox",
                id: "modestbranding",
                checked: this.state.modestbranding,
                onChange: this.onChange
            }), React.createElement("label", {
                htmlFor: "modestbranding"
            }, "Hide YouTube logo")), React.createElement("div", {
                className: "embed-option"
            }, React.createElement("input", {
                type: "checkbox",
                id: "rel",
                checked: this.state.rel,
                onChange: this.onChange
            }), React.createElement("label", {
                htmlFor: "rel"
            }, "Show related videos")), React.createElement("div", {
                className: "embed-option"
            }, React.createElement("input", {
                type: "checkbox",
                id: "showinfo",
                checked: this.state.showinfo,
                onChange: this.onChange
            }), React.createElement("label", {
                htmlFor: "showinfo"
            }, "Show video info (title, owner, etc.)")), React.createElement("div", {
                className: "embed-option"
            }, React.createElement("input", {
                type: "checkbox",
                id: "enhancedPrivacy",
                checked: this.state.enhancedPrivacy,
                onChange: this.onChange
            }), React.createElement("label", {
                htmlFor: "enhancedPrivacy"
            }, "Enable enhanced privacy (ie. no cookies)")))), React.createElement("div", {
                className: "embed-code-and-preview-container"
            }, React.createElement("div", {
                className: "embed-column"
            }, React.createElement("p", {
                className: "embed-hint"
            }, "Embed code (click to copy)"), React.createElement("textarea", {
                id: "embedCode",
                className: "embed-code",
                value: this.state.embedCode,
                readOnly: !0,
                "data-clipboard-target": "#embedCode"
            })), React.createElement("div", {
                className: "embed-column"
            }, React.createElement("p", {
                className: "embed-hint"
            }, "Live preview"), React.createElement("div", {
                className: "embed-preview",
                dangerouslySetInnerHTML: {
                    __html: this.state.embedCode
                }
            }))))
        }
    }),
    AnnotationCardTemplates = React.createClass({
        displayName: "AnnotationCardTemplates",
        propTypes: {
            videoId: React.PropTypes.string.isRequired,
            mode: React.PropTypes.string.isRequired
        },
        getInitialState: function() {
            return {
                store: AnnotationCardTemplatesStore.getData(),
                templateName: Annotations.getVideoTitle(),
                tab: dataStore.getItem("annotation_cards_menu_tab") || 0,
                loadId: null,
                expanded: dataStore.getItem("annotation_cards_menu_expanded") || !1
            }
        },
        componentWillMount: function() {
            AnnotationCardTemplatesStore.addChangeListener(this.onStoreChange), AnnotationCardTemplatesActions.fetch()
        },
        componentDidMount: function() {
            AnnotationCardTemplatesActions.checkResources(this.props.mode)
        },
        componentWillUnmount: function() {
            AnnotationCardTemplatesStore.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: AnnotationCardTemplatesStore.getData()
            }, function() {
                this.state.store.message && setTimeout(function() {
                    AnnotationCardTemplatesActions.update({
                        message: null
                    })
                }, 5e3)
            }.bind(this))
        },
        save: function() {
            var e = this.state.templateName;
            e && e.length && (e = e.trim(), e && e.length && AnnotationCardTemplatesActions.save(this.props.videoId, e))
        },
        load: function() {
            this.state.loadId && AnnotationCardTemplatesActions.load(this.props.mode, this.state.loadId, this.props.videoId)
        },
        getLoadName: function() {
            return $('option[value="' + this.state.loadId + '"]').text()
        },
        "delete": function() {
            var e = this.getLoadName();
            e && AnnotationCardTemplatesActions["delete"](this.getLoadName())
        },
        showDialogue: function() {
            if (this.state.loadId) {
                var e = function() {
                        Modal.destroy()
                    },
                    t = function() {
                        e(), this["delete"]()
                    }.bind(this),
                    a = this.getLoadName();
                a && Modal.create({
                    title: 'Delete the "' + a + '" template?',
                    innerComponent: Dialogue,
                    innerProps: {
                        onYes: t,
                        onNo: e
                    },
                    size: "small"
                })
            }
        },
        onLoadNameChange: function(e) {
            this.setState({
                loadId: $(e.target).val()
            })
        },
        setTemplateName: function(e) {
            var t = $(e.target).val();
            t && (t = t.slice(0, 50)), this.setState({
                templateName: t
            })
        },
        render: function() {
            return React.createElement("div", {
                className: "vidiq-annotation-templates-wrapper"
            }, this.header(), this.innerContent())
        },
        toggleMenu: function() {
            var e = !this.state.expanded;
            dataStore.setItem("annotation_cards_menu_expanded", e), this.setState({
                expanded: e
            })
        },
        onTabChange: function(e) {
            dataStore.setItem("annotation_cards_menu_tab", e), this.setState({
                tab: e
            })
        },
        header: function() {
            var e = classNames("vidiq-annotation-templates-header", {
                    expanded: this.state.expanded
                }),
                t = chrome.extension.getURL("images/vidiq_playplus.png"),
                a = "Save this video as a template, then load its cards & annotations to other videos!";
            return React.createElement("div", {
                className: e,
                onClick: this.toggleMenu
            }, React.createElement("div", {
                className: "vidiq-header-container"
            }, React.createElement("img", {
                src: t,
                className: "vidiq-button-logo vidiq-button-logo-small"
            }), React.createElement("h3", null, " ", "card" === this.props.mode ? "Card" : "Annotation", " Templates"), this.spinner(), React.createElement("i", {
                className: "material-icons",
                "data-tip-message": a
            }, "info_outline")))
        },
        spinner: function() {
            return this.state.store.loading ? React.createElement(Spinner, {
                size: "small"
            }) : null
        },
        innerContent: function() {
            if (!this.state.expanded) return null;
            var e = [{
                name: "Save",
                content: this.savePart()
            }, {
                name: "Load",
                content: this.loadPart()
            }];
            return React.createElement("div", {
                className: "vidiq-annotation-templates"
            }, React.createElement(Tabs, {
                tabs: e,
                activeTab: this.state.tab,
                onChange: this.onTabChange
            }), this.message())
        },
        savePart: function() {
            return this.state.store.hasResources[this.props.mode] || this.state.store.loading ? React.createElement("div", {
                className: "vidiq-annotation-templates-save"
            }, React.createElement("input", {
                className: "vidiq-save-input",
                type: "text",
                value: this.state.templateName,
                onChange: this.setTemplateName
            }), React.createElement("div", {
                className: "icon-container"
            }, React.createElement("i", {
                className: "vidiq-save-icon material-icons",
                onClick: this.save,
                title: "Save Template",
                disabled: !this.state.templateName || this.state.store.loading
            }, "save"))) : React.createElement("div", {
                className: "no-resources-save-message"
            }, "Add ", "annotate" === this.props.mode ? "annotations" : "cards", " to save!")
        },
        getLoadMenuOptions: function() {
            var e = this.state.store.templates,
                t = _.map(e, function(e, t) {
                    return React.createElement("option", {
                        key: e.videoId,
                        value: e.videoId
                    }, t)
                });
            return t.unshift(React.createElement("option", {
                key: "default",
                value: "",
                disabled: !0
            }, "Choose a template")), t
        },
        loadPart: function() {
            var e = this.state.store.templates,
                t = "annotate" === this.props.mode ? "annotations" : "cards";
            return e && !_.isEmpty(e) || this.state.store.loading ? React.createElement("div", {
                className: "vidiq-annotation-templates-load"
            }, React.createElement("select", {
                className: "vidiq-load-menu",
                onChange: this.onLoadNameChange,
                defaultValue: "",
                value: this.state.loadId,
                disabled: this.state.store.loading
            }, this.getLoadMenuOptions()), this.loadButtons()) : React.createElement("div", {
                className: "no-resources-load-message"
            }, "No templates to load!", React.createElement("br", null), "Save a video as a template to load its ", t, " to other videos.")
        },
        loadButtons: function() {
            return this.state.loadId ? React.createElement("div", {
                className: "icon-container"
            }, React.createElement("i", {
                className: "material-icons vidiq-load-icon",
                onClick: this.load,
                title: "Load Template",
                disabled: this.state.store.loading
            }, "file_download"), React.createElement("i", {
                className: "material-icons vidiq-delete-icon",
                onClick: this.showDialogue,
                title: "Delete Template",
                disabled: this.state.store.loading
            }, "delete_forever")) : null
        },
        message: function() {
            return this.state.store.message ? React.createElement("div", {
                className: "vidiq-message"
            }, this.state.store.message) : null
        }
    }),
    BulkProcessor = React.createClass({
        displayName: "BulkProcessor",
        propTypes: {
            task: React.PropTypes.string,
            videos: React.PropTypes.array.isRequired,
            execute: React.PropTypes.func.isRequired,
            onComplete: React.PropTypes.func,
            urlFn: React.PropTypes.func.isRequired,
            preposition: React.PropTypes.string,
            successMsg: React.PropTypes.element.isRequired,
            failMsgFn: React.PropTypes.func.isRequired
        },
        componentWillMount: function() {
            BulkProcessor.instance = this, this._id = u.prettyRandomId()
        },
        componentWillUnmount: function() {
            BulkProcessor.instance = null
        },
        getInitialState: function() {
            return {
                started: !1,
                finished: !1,
                pending: [],
                failed: [],
                succeeded: [],
                errorMessages: []
            }
        },
        shouldComponentUpdate: function(e, t) {
            var a = this.props;
            if (!this.state.started) return !0;
            var s = !_.isEqual(t, this.state),
                n = 0 === a.videos.length && e.videos.length > 0;
            return s || n
        },
        isBusy: function() {
            return this.state.started && !this.state.finished
        },
        startProcessing: function() {
            this.setState({
                started: !0
            }, function() {
                $(window).trigger("bulk-processor:update")
            });
            for (var e = 0; e < this.props.videos.length; e += 1) {
                var t = ["bulk-processor", this._id, e].join("-");
                GrandCentral.push(_.partial(this.execute, e), "bulk-processor", t)
            }
        },
        getProgress: function() {
            var e = this.state.failed.length + this.state.succeeded.length;
            return e / this.props.videos.length
        },
        execute: function(e) {
            return e || (e = 0), log("BulkProcessor#execute > starting %s", e), this.setState({
                pending: this.state.pending.concat(e)
            }), this.props.execute(e).done(function() {
                this.setState({
                    succeeded: this.state.succeeded.concat(e)
                })
            }.bind(this)).fail(function(t) {
                t || (t = ["Unknown error"]), _.isArray(t) || (t = [t]);
                var a = {
                    step: e,
                    errors: t
                };
                this.setState({
                    failed: this.state.failed.concat(e),
                    errorMessages: this.state.errorMessages.concat([a])
                })
            }.bind(this)).always(function() {
                this.getProgress() < 1 || (this.setState({
                    finished: !0
                }), this.props.onComplete && this.props.onComplete(), $(window).trigger("bulk-processor:update"))
            }.bind(this))
        },
        progressBarPart: function() {
            return this.state.started && !this.state.finished ? React.createElement(ProgressBar, {
                percent: this.getProgress()
            }) : void 0
        },
        headingPart: function() {
            var e = 1 === this.props.videos.length ? "video" : "videos",
                t = this.props.preposition || "to",
                a = [this.props.task, t, this.props.videos.length, e].join(" ");
            return this.state.finished ? React.createElement("h2", null, "Done!") : this.state.started ? React.createElement("h2", null, "Processing...") : React.createElement("div", null, React.createElement("h2", null, "You're about to ", React.createElement("strong", null, a)), React.createElement("p", null, "Click ", React.createElement("b", null, '"I\'m ready"'), " to get started!"))
        },
        resultMessagePart: function() {
            if (this.state.finished) {
                var e = this.state.failed.length;
                if (0 === e) return React.createElement("p", {
                    className: "vidiq-alert-success"
                }, this.props.successMsg);
                var t = 1 === e ? "video" : "videos",
                    a = [e, t].join(" ");
                return React.createElement("p", {
                    className: "vidiq-alert-failure"
                }, this.props.failMsgFn(a))
            }
        },
        videoGenerator: function(e, t) {
            var a = {
                    failed: this.state.failed.indexOf(t) >= 0,
                    finished: this.state.succeeded.indexOf(t) >= 0,
                    started: this.state.pending.indexOf(t) >= 0
                },
                s = _.flatten(_.pluck(_.where(this.state.errorMessages, {
                    step: t
                }), "errors"));
            return React.createElement(ProcessItem, {
                key: t,
                ref: "video-" + t,
                videoId: e.id,
                title: e.title,
                thumb: e.thumb,
                duration: e.duration,
                urlFn: this.props.urlFn,
                started: a.started,
                failed: a.failed,
                finished: a.finished,
                errors: s
            })
        },
        getPayload: function() {
            var e = this.props.videos.slice(),
                t = _.range(e.length);
            if (!this.state.finished) {
                var a = this.state.succeeded.concat(this.state.failed);
                _.each(_.uniq(a).sort().reverse(), function(a) {
                    e.splice(a, 1), t.splice(a, 1)
                })
            }
            return {
                videos: e,
                indices: t
            }
        },
        render: function() {
            var e = this.footer(),
                t = classNames("vidiq-bulk-processor", {
                    "with-footer": !!e
                }),
                a = this.getPayload();
            return React.createElement("div", {
                className: t
            }, React.createElement("div", {
                className: "bulk-processor-instructions"
            }, this.headingPart()), React.createElement(Paginator, {
                items: a.videos,
                indices: a.indices,
                generator: this.videoGenerator
            }), e)
        },
        footer: function() {
            var e = this.progressBarPart(),
                t = this.resultMessagePart();
            return e || t ? React.createElement("div", {
                className: "bulk-processor-result"
            }, e, t) : void 0
        }
    }),
    CopyVideoResources = React.createClass({
        displayName: "CopyVideoResources",
        propTypes: {
            video: React.PropTypes.object.isRequired,
            type: React.PropTypes.string.isRequired
        },
        steps: ["VideoResourceChooser", "VideoBufferController", "VideoResourceVideoChooser", "BulkProcessor"],
        getInitialState: function() {
            return {
                vbs: VideoBufferStore.getData(),
                resources: [],
                selectedVideos: [],
                selectedResources: [],
                payload: [],
                loading: !1,
                running: !1,
                done: !1
            }
        },
        componentWillMount: function() {
            VideoBufferStore.addChangeListener(this.onStoreChange), $(window).on("chooser:resource:selection", this.onSelectionChange).on("chooser:resource:edit", this.onEditChange).on("chooser:videos:selection", this.onVideoSelectionChange).on("chooser:videos:edit", this.onVideoEditChange)
        },
        componentWillUnmount: function() {
            VideoBufferActions.cancel(), VideoBufferStore.removeChangeListener(this.onStoreChange), $(window).off("chooser:resource:selection", this.onSelectionChange).off("chooser:resource:edit", this.onEditChange).off("chooser:videos:selection", this.onVideoSelectionChange).off("chooser:videos:edit", this.onVideoEditChange)
        },
        componentDidMount: function() {
            u.track("Started copying " + this.props.type + "s", {
                source_video: {
                    url: u.getVideoUrl(this.props.video.id),
                    value: this.props.video.title
                }
            })
        },
        childProps: function(e) {
            switch (e) {
                case "VideoResourceChooser":
                    return {
                        items: this.state.resources,
                        video: this.props.video,
                        selected: this.state.selectedResources,
                        type: this.props.type
                    };
                case "VideoResourceVideoChooser":
                    return {
                        items: this.state.payload,
                        selected: this.state.selectedVideos,
                        type: this.props.type
                    };
                case "BulkProcessor":
                    var t = u.indices2literals(this.state.selectedVideos, this.filteredVideos(this.state.vbs.videos)),
                        a = this.state.selectedResources.length,
                        s = this.props.type,
                        n = 1 === a ? s : s + "s";
                    return {
                        videos: t,
                        execute: this.execute,
                        task: ["copy", a, n].join(" "),
                        onComplete: this.onBulkProcessorComplete,
                        successMsg: React.createElement("span", null, React.createElement("strong", null, "Success, your selected ", n, " have been copied!"), " If you'd like to see the ", n, ", simply click on any video in the above list."),
                        failMsgFn: function(e) {
                            return React.createElement("span", null, React.createElement("strong", null, "We copied your ", n, ", but ", e, " failed to save."), " Please check the videos in the above list to see which ones were not updated. To view the ", n, ", simply click on any video.")
                        },
                        urlFn: function(e) {
                            var t;
                            return t = "annotation" === s ? "/my_videos_annotate?v=" + e : "/cards?v=" + e
                        }
                    }
            }
        },
        customButtons: function(e, t) {
            return this.state.running ? [] : this.state.done ? ["close"] : "BulkProcessor" === e ? [t, {
                text: "I'm ready, copy my " + this.props.type + "s!",
                onClick: this.onStart,
                position: "right"
            }] : void 0
        },
        canChangeStep: function(e) {
            var t = this.state,
                a = "VideoResourceVideoChooser" === e,
                s = "VideoBufferController" === e;
            return t.resources.length && t.selectedResources.length && !t.vbs.loading ? a && !t.selectedVideos.length ? "back" : s && !VideoBufferStore.ok() ? "back" : "all" : void 0
        },
        enterStep: function(e) {
            switch ("VideoResourceVideoChooser" !== e && this.state.vbs.loading && VideoBufferActions.cancel(), e) {
                case "VideoResourceChooser":
                    _.isEmpty(this.state.resources) && this.fetchResources();
                    break;
                case "VideoResourceVideoChooser":
                    this.fetchVideos()
            }
        },
        isLoading: function(e) {
            if (!this.state.loading) return !1;
            var t = !this.state.resources.length;
            return "VideoResourceChooser" === e && t
        },
        fetchResources: function() {
            this.startLoading();
            var e = "card" === this.props.type ? Cards : Annotations;
            e.get(this.props.video.id).done(function(e) {
                this.setState({
                    loading: !1,
                    resources: e
                })
            }.bind(this))
        },
        fetchVideos: function() {
            VideoBufferActions.fetch(), this.startLoading()
        },
        startLoading: function() {
            this.state.loading || this.setState({
                loading: !0
            })
        },
        stopLoading: function() {
            this.state.loading && this.setState({
                loading: !1
            })
        },
        execute: function(e) {
            var t = this.state.selectedVideos[e],
                a = this.state.payload[t],
                s = new $.Deferred;
            switch (this.props.type) {
                case "card":
                    Cards.createMany(a.video.id, a.children).done(s.resolve).fail(s.reject);
                    break;
                case "annotation":
                    Annotations.set(a.video.id, a.children).done(s.resolve).fail(s.reject)
            }
            return s.promise()
        },
        makePayload: function(e, t, a) {
            if (0 === e.length) return [];
            var s = u.time2sec(this.props.video.duration),
                n = u.indices2literals(t || this.state.selectedResources, a || this.state.resources),
                i = this.filteredVideos(e, function(e) {
                    var t = u.time2sec(e.duration),
                        a = _.map(n, function(e) {
                            switch (this.props.type) {
                                case "annotation":
                                    return e.clone().adjustTimes(s, t, {
                                        active: e.percentageOption,
                                        range: e.percentRange
                                    });
                                case "card":
                                    return e.clone().adjustStart(s, t);
                                default:
                                    warn("Resource type must be `annotation` or `card`")
                            }
                        }, this);
                    return {
                        video: e,
                        children: a
                    }
                }.bind(this));
            return i
        },
        filteredVideos: function(e, t) {
            return _.compact(_.map(e, function(e, a) {
                return e.id !== this.props.video.id ? "function" == typeof t ? t(e, a) : e : void 0
            }, this))
        },
        getUpdatedPayload: function() {
            return this.makePayload(this.state.vbs.videos, this.state.selectedResources, this.state.resources)
        },
        onStoreChange: function() {
            var e = VideoBufferStore.getData(),
                t = {
                    vbs: e,
                    loading: e.loading
                },
                a = _.isEmpty(this.state.payload);
            e.loading && !a || (t.payload = this.makePayload(e.videos)), this.setState(t)
        },
        onSelectionChange: function(e, t) {
            this.state.selectedResources = t, this.setState({
                selectedResources: t,
                payload: this.getUpdatedPayload()
            })
        },
        onEditChange: function(e, t, a) {
            this.state.resources = a, this.setState({
                resources: a,
                payload: this.getUpdatedPayload()
            })
        },
        onVideoSelectionChange: function(e, t) {
            this.setState({
                selectedVideos: t
            })
        },
        onVideoEditChange: function(e, t, a) {
            this.setState({
                payload: a
            })
        },
        onBulkProcessorComplete: function() {
            u.track("Finished copying " + this.props.type + "s", {
                source_video: {
                    url: u.getVideoUrl(this.props.video.id),
                    value: this.props.video.title
                },
                num_copied: this.state.selectedResources.length,
                num_videos_copied_to: this.state.selectedVideos.length
            }), this.setState({
                done: !0,
                running: !1
            }), Modal.unlock()
        },
        onStart: function() {
            Modal.lock(), this.setState({
                running: !0
            }), this.refs.wizard.refs.child.startProcessing()
        },
        render: function() {
            var e = classNames("copy-resources-base", "copy-" + this.props.type + "s-base");
            return React.createElement(Wizard, {
                classes: e,
                ref: "wizard",
                steps: this.steps,
                childProps: this.childProps,
                canChangeStep: this.canChangeStep,
                customButtons: this.customButtons,
                enterStep: this.enterStep,
                isLoading: this.isLoading
            })
        }
    }),
    EditableAnnotation = React.createClass({
        displayName: "EditableAnnotation",
        propTypes: {
            data: React.PropTypes.object.isRequired,
            selected: React.PropTypes.bool,
            onEdit: React.PropTypes.func,
            onToggleSelection: React.PropTypes.func,
            forVideoId: React.PropTypes.string,
            videoDuration: React.PropTypes.string,
            editRequiresSelection: React.PropTypes.bool,
            massEdit: React.PropTypes.bool
        },
        _annotation: null,
        getInitialState: function() {
            var e = _.extend({}, this.props.data.getAll());
            return e._originalUrl = e.url, e.sliderValues = this.props.data.percentRange, e.percentageOption = this.props.data.percentageOption, e.randomId = u.prettyRandomId(), e
        },
        componentDidUpdate: function(e, t) {
            _.isEqual(this.state, t) || this.emitEdit()
        },
        componentWillMount: function() {
            this._annotation = this.props.data, this.props.forVideoId || (this._annotation.originalTimes || (this._annotation.originalTimes = this._annotation.getTimes()), this.state.sliderValues || this.setState({
                sliderValues: this.getPercentRange()
            })), $(window).on(this.state.randomId + "-slider-update", this.onSliderChange)
        },
        componentWillUnmount: function() {
            $(window).off(this.state.randomId + "-slider-update", this.onSliderChange)
        },
        componentDidMount: function() {
            var e = this.props.forVideoId || this.props.massEdit ? this.props.videoDuration : null;
            Annotations.ensureSliders(this.state.randomId, this.state.sliderValues, e)
        },
        componentWillReceiveProps: function(e) {
            e.editRequiresSelection && (this._annotation = e.data, this.setState(e.data.getAll()))
        },
        getPercentRange: function() {
            return this.props.videoDuration && this._annotation.originalTimes ? this._annotation.setPercentagesFromTimes(this.props.videoDuration, this._annotation.originalTimes, !(this.props.forVideoId || this.props.massEdit)) : [0, 100]
        },
        onSliderChange: function(e, t, a) {
            var s = [t, a];
            if (this.setState({
                    sliderValues: s
                }), this._annotation.setPercentRange(s, this.props.forVideoId || this.props.massEdit, this.props.videoDuration), this.props.forVideoId || this.props.massEdit) {
                var n = this._annotation.getTimes();
                this.setState({
                    start: n[0],
                    stop: n[1]
                })
            }
        },
        onChangePercentageOption: function() {
            this.props.selected = !1, this.onFocus();
            var e = !this.state.percentageOption;
            this._annotation.togglePercentageOption(e), this.setState({
                percentageOption: e
            });
            var t = e ? this._annotation.getTimes() : this._annotation.originalTimes;
            this._annotation.setTimes(t[0], t[1]), this.setState({
                start: t[0],
                stop: t[1]
            })
        },
        onChangeText: function(e) {
            var t = e.target.value;
            this.setState({
                text: t
            }), this._annotation.setText(t.trim())
        },
        onChangeUrl: function(e) {
            var t = e.target.value.trim(),
                a = {
                    url: t
                };
            this.state._originalUrl || (a._originalUrl = this.state.url), this.setState(a), this._annotation.setUrl(t)
        },
        noPropagate: function(e) {
            e.stopPropagation()
        },
        emitEdit: _.debounce(function() {
            return this.props.onEdit ? this.props.onEdit(this._annotation) : void 0
        }, 300),
        getItemName: function(e) {
            var t = {
                anchored: "Speech bubble",
                popup: "Note",
                title: "Title",
                highlight: "Spotlight",
                label: "Label"
            };
            return t[e]
        },
        onFocus: function() {
            this.props.editRequiresSelection && !this.props.selected && this.props.onToggleSelection()
        },
        titlePart: function() {
            var e = "annotation-name annotation-type-" + this.state.type,
                t = this.props.data.getDisplayName();
            return React.createElement("div", {
                className: "annotation-title"
            }, React.createElement("h3", {
                className: e
            }, t))
        },
        timePart: function() {
            var e = this.state.start.replace(/\..*/, ""),
                t = this.state.stop.replace(/\..*/, ""),
                a = this.state.sliderValues,
                s = !this.state.percentageOption || this.props.forVideoId || this.props.massEdit ? e + " to " + t : a[0] + "% to " + a[1] + "%",
                n = "percentage-checkbox-" + this.state.randomId;
            return React.createElement("div", {
                className: "annotation-prop"
            }, React.createElement("label", {
                htmlFor: "annotation-time"
            }, "Time"), React.createElement("span", {
                className: "annotation-time"
            }, s), React.createElement("div", {
                className: "percentage-option"
            }, React.createElement("input", {
                onChange: this.onChangePercentageOption,
                className: "percentage-checkbox",
                id: n,
                type: "checkbox",
                checked: this.state.percentageOption
            }), React.createElement("label", {
                htmlFor: n
            }, "Set custom range")), this.timeSlider())
        },
        timeSlider: function() {
            var e = classNames("vidiq-jquery-ui", "range-slider-container", {
                hidden: !this.state.percentageOption
            });
            return React.createElement("div", {
                className: e
            }, React.createElement("div", {
                id: this.state.randomId,
                className: "range-slider"
            }))
        },
        textPart: function() {
            var e = _.compact(["vidiq-annotation-text", this.state.id, this.props.forVideoId]).join("-");
            return React.createElement("div", {
                className: "annotation-prop"
            }, React.createElement("label", {
                htmlFor: e
            }, "Text"), React.createElement("textarea", {
                id: e,
                value: this.state.text,
                onChange: this.onChangeText,
                onClick: this.noPropagate,
                onFocus: this.onFocus
            }))
        },
        urlPart: function() {
            if ("title" !== this.state.type) {
                var e = _.compact(["vidiq-annotation-link", this.state.id, this.props.forVideoId]).join("-"),
                    t = this.state.url && this.state.url !== this.state._originalUrl,
                    a = React.createElement("span", {
                        className: "annotation-warning"
                    }, React.createElement("i", {
                        className: "material-icons"
                    }, "report_problem"), "Custom URLs may result in a failure to save");
                return React.createElement("div", {
                    className: "annotation-prop"
                }, React.createElement("label", {
                    htmlFor: e
                }, "Link"), React.createElement("input", {
                    type: "text",
                    id: e,
                    value: this.state.url,
                    onChange: this.onChangeUrl,
                    onClick: this.noPropagate,
                    onFocus: this.onFocus
                }), t ? a : null)
            }
        },
        render: function() {
            var e = this.props.forVideoId ? null : this.props.onToggleSelection;
            return React.createElement("div", {
                className: "editable-annotation-item",
                onClick: e
            }, this.titlePart(), React.createElement("div", {
                className: "annotation-props"
            }, this.timePart(), this.textPart(), this.urlPart()))
        }
    }),
    EditableCard = React.createClass({
        displayName: "EditableCard",
        propTypes: {
            data: React.PropTypes.object.isRequired,
            selected: React.PropTypes.bool,
            onEdit: React.PropTypes.func,
            onToggleSelection: React.PropTypes.func,
            forVideoId: React.PropTypes.string,
            editRequiresSelection: React.PropTypes.bool
        },
        _card: null,
        getInitialState: function() {
            return this.props.data.getAll()
        },
        componentDidUpdate: function(e, t) {
            _.isEqual(this.state, t) || this.emitEdit()
        },
        componentDidMount: function() {
            this._card = this.props.data
        },
        componentWillReceiveProps: function(e) {
            e.editRequiresSelection && (this._card = e.data, this.setState(e.data.getAll()))
        },
        onChangeCta: function(e) {
            var t = e.target.value,
                a = this.state.data;
            a.custom_message = t, this.setState({
                data: a
            }), this._card.set("custom_message", t.trim()), this.emitEdit()
        },
        onChangeTeaser: function(e) {
            var t = e.target.value,
                a = this.state.data;
            a.teaser_text = t, this.setState({
                data: a
            }), this._card.set("teaser_text", t.trim()), this.emitEdit()
        },
        noPropagate: function(e) {
            e.stopPropagation()
        },
        emitEdit: _.debounce(function() {
            return this.props.onEdit ? this.props.onEdit(this._card) : void 0
        }, 300),
        imagePart: function() {
            return this.state.hasImage ? React.createElement("div", {
                className: "card-image",
                style: {
                    backgroundImage: "url(" + this.state.data.image_url + ")"
                }
            }) : void 0
        },
        fieldPart: function(e, t, a, s) {
            var n = this.state.kind,
                i = _.contains(["video", "playlist"], n);
            if (!(i && _.contains(["title", "cta", "teaser"], e) || "poll" === n)) {
                i && "url" === e && (t = u.capitalize(n) + " URL"), "collaborator" === n && "url" === e && (t = "Channel URL"), "collaborator" === n && "cta" === e && (t = "Message");
                var o = _.compact(["vidiq-card-" + e, this.state.id, this.props.forVideoId]).join("-"),
                    r = function() {
                        this.props.editRequiresSelection && !this.props.selected && this.props.onToggleSelection()
                    }.bind(this);
                return React.createElement("div", {
                    className: "card-prop"
                }, React.createElement("label", {
                    htmlFor: o
                }, t), React.createElement("input", {
                    type: "text",
                    id: o,
                    value: a,
                    onChange: s,
                    onClick: this.noPropagate,
                    onFocus: r
                }))
            }
        },
        render: function() {
            var e = this.props.forVideoId ? null : this.props.onToggleSelection,
                t = classNames("editable-card-item", {
                    "has-image": this.state.hasImage
                }),
                a = this.props.data.getDisplayName(),
                s = moment(this.state.data.start_ms).format("mm:ss");
            return React.createElement("div", {
                className: t,
                onClick: e
            }, React.createElement("div", {
                className: "card-title"
            }, this.imagePart(), React.createElement("h3", {
                className: "card-name"
            }, a), React.createElement("span", {
                className: "card-time"
            }, "Start time: ", s)), React.createElement("div", {
                className: "card-props"
            }, React.createElement("span", {
                className: "card-inner-title"
            }, this.state.data.title), this.fieldPart("cta", "Call to action", this.state.data.custom_message, this.onChangeCta), this.fieldPart("teaser", "Teaser text", this.state.data.teaser_text, this.onChangeTeaser)))
        }
    }),
    EditableVideo = React.createClass({
        displayName: "EditableVideo",
        propTypes: {
            video: React.PropTypes.object.isRequired,
            selected: React.PropTypes.bool,
            toggleSelected: React.PropTypes.func
        },
        getInitialState: function() {
            return this.getState()
        },
        getState: function() {
            return {
                video: TemporaryStore.ensure(this.props.video.id, this.props.video)
            }
        },
        componentWillMount: function() {
            TemporaryStore.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            TemporaryStore.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState(this.getState())
        },
        onChange: function(e) {
            if (this.props.selected) {
                var t = e.target.dataset,
                    a = _.object([
                        [t.field, e.target.value]
                    ]);
                TemporaryActions.set(this.props.video.id, a)
            }
        },
        onClick: function(e) {
            this.props.selected || this.props.toggleSelected(), e.target.focus()
        },
        getVideo: function() {
            return this.props.selected ? this.state.video : this.props.video
        },
        render: function() {
            return React.createElement("div", {
                className: "editable-video"
            }, this.field("title", "Title"), this.field("description", "Description", "textarea"))
        },
        field: function(e, t, a) {
            var s = this.getVideo(),
                n = s.id + "-" + e,
                i = React.createElement(a || "input", {
                    "data-field": e,
                    defaultValue: s[e],
                    id: n,
                    onChange: this.onChange,
                    onClick: this.onClick,
                    disabled: !this.props.selected
                });
            return React.createElement("div", {
                className: "vidiq-field"
            }, React.createElement("label", {
                htmlFor: n
            }, t), i)
        }
    }),
    GeneralChooser = React.createClass({
        displayName: "GeneralChooser",
        propTypes: {
            items: React.PropTypes.array.isRequired,
            video: React.PropTypes.object,
            initialSelected: React.PropTypes.array,
            namespace: React.PropTypes.string.isRequired,
            itemComponent: React.PropTypes.string.isRequired,
            childComponent: React.PropTypes.string,
            filters: React.PropTypes.object,
            getFilterable: React.PropTypes.func,
            perPage: React.PropTypes.number
        },
        getDefaultProps: function() {
            return {
                initialSelected: []
            }
        },
        getInitialState: function() {
            return {
                selected: this.props.initialSelected.slice(),
                edited: {},
                filter: FilterStore.getData()
            }
        },
        componentWillMount: function() {
            this.props.filters && FilterStore.addChangeListener(this.onFilterChange)
        },
        componentWillUnmount: function() {
            FilterStore.removeChangeListener(this.onFilterChange)
        },
        onFilterChange: function() {
            this.setState({
                filter: FilterStore.getData()
            }), FilterStore.getData().filterChanged && this.selectNone()
        },
        onToggleSelection: function(e, t) {
            var a = this.state.selected;
            this.isItemSelected(e) ? a = _.without(a, e) : a.push(e), this.setState({
                selected: a
            }), this.emitSelected(a)
        },
        onEdit: function(e, t) {
            var a = this.state.edited;
            a[e] = t, this.setState({
                edited: a
            }), this.emitEdited(a)
        },
        emit: function(e, t) {
            var a = ["chooser", this.props.namespace, e].join(":");
            $(window).trigger(a, t)
        },
        emitSelected: function(e) {
            this.emit("selection", [e])
        },
        emitEdited: function(e) {
            var t = _.map(this.props.items, function(t, a) {
                return e[a] ? e[a] : t
            });
            this.emit("edit", [e, t])
        },
        isItemSelected: function(e) {
            return _.indexOf(this.state.selected, e) >= 0
        },
        selectAll: function() {
            if (!this.state.filter.searching) {
                var e = _.range(this.props.items.length);
                this.props.filters && (e = this.state.filter.indices), this.setState({
                    selected: e
                }), this.emitSelected(e)
            }
        },
        selectNone: function() {
            var e = [];
            this.setState({
                selected: e
            }), this.emitSelected(e)
        },
        generateItem: function(e, t) {
            var a = this.isItemSelected(t),
                s = classNames("item", "item-" + this.props.itemComponent, {
                    "item-selected": a
                }),
                n = {
                    data: e,
                    selected: a,
                    videoDuration: this.props.video ? this.props.video.duration : null,
                    onToggleSelection: this.onToggleSelection.bind(this, t),
                    onEdit: this.onEdit.bind(this, t),
                    childComponent: this.props.childComponent
                },
                i = React.createElement(window[this.props.itemComponent], n);
            return React.createElement("div", {
                className: s,
                key: t
            }, i)
        },
        render: function() {
            var e = "general-chooser-items";
            return this.props.filters ? React.createElement("div", {
                className: e
            }, React.createElement(Filter, {
                items: this.props.items,
                perPage: this.props.perPage,
                getFilterable: this.props.getFilterable,
                generator: this.generateItem,
                filters: this.props.filters
            })) : React.createElement("div", {
                className: e
            }, React.createElement(Paginator, {
                items: this.props.items,
                perPage: this.props.perPage,
                generator: this.generateItem
            }))
        }
    }),
    ProcessItem = React.createClass({
        displayName: "ProcessItem",
        propTypes: {
            videoId: React.PropTypes.string.isRequired,
            title: React.PropTypes.string.isRequired,
            thumb: React.PropTypes.string.isRequired,
            duration: React.PropTypes.string.isRequired,
            urlFn: React.PropTypes.func.isRequired,
            started: React.PropTypes.bool,
            finished: React.PropTypes.bool,
            failed: React.PropTypes.bool,
            errors: React.PropTypes.array
        },
        hasErrors: function() {
            return this.props.errors && this.props.errors.length > 0
        },
        statusPart: function() {
            return this.props.failed ? "" : this.props.finished ? "" : this.props.started ? React.createElement(Spinner, {
                size: "small"
            }) : void 0
        },
        errorsPart: function() {
            var e = this.props.errors || [],
                t = _.map(e, function(e, t) {
                    return React.createElement("li", {
                        key: t
                    }, e)
                }),
                a = React.createElement("ul", null, t);
            return React.createElement("span", {
                className: "process-item-errors"
            }, React.createElement("span", {
                className: "num-errors"
            }, e.length + " " + u.plural(e.length, "error")), a)
        },
        render: function() {
            var e = this.props.urlFn(this.props.videoId),
                t = classNames("process-item", {
                    "process-item-failed": this.props.failed
                }),
                a = [React.createElement("img", {
                    src: this.props.thumb,
                    className: "process-item-thumbnail"
                }), React.createElement("span", {
                    className: "process-item-title"
                }, this.props.title), React.createElement("span", {
                    className: "process-item-duration"
                }, this.props.duration), React.createElement("span", {
                    className: "process-item-status"
                }, this.statusPart())];
            return this.props.finished || this.props.failed ? React.createElement("div", {
                className: t
            }, React.createElement("a", {
                href: e,
                className: "process-item-link",
                target: "_blank"
            }, a, this.hasErrors() ? this.errorsPart() : null)) : React.createElement("div", {
                className: t
            }, a)
        }
    }),
    SelectableVideo = React.createClass({
        displayName: "SelectableVideo",
        propTypes: {
            data: React.PropTypes.object.isRequired,
            selected: React.PropTypes.bool,
            onEdit: React.PropTypes.func,
            onToggleSelection: React.PropTypes.func,
            childComponent: React.PropTypes.string
        },
        getInitialState: function() {
            return {
                expanded: !1
            }
        },
        componentWillMount: function() {
            $(window).on("selectable-video:expand", this.onExpand).on("selectable-video:collapse", this.onCollapse)
        },
        componentWillUnmount: function() {
            $(window).off("selectable-video:expand", this.onExpand).off("selectable-video:collapse", this.onCollapse)
        },
        onEditChild: function(e, t) {
            var a = _.extend({}, this.props.data);
            a.children[e] = t, this.props.onEdit && this.props.onEdit(a)
        },
        onExpand: function() {
            this.setState({
                expanded: !0
            })
        },
        onCollapse: function() {
            this.setState({
                expanded: !1
            })
        },
        onToggle: function() {
            this.setState({
                expanded: !this.state.expanded
            })
        },
        getChildren: function() {
            if (this._cachedChildren) return this._cachedChildren;
            if (this.state.expanded) return this._cachedChildren = _.map(this.props.data.children, function(e, t) {
                return React.createElement(window[this.props.childComponent], {
                    key: t,
                    data: e,
                    onEdit: this.onEditChild.bind(this, t),
                    forVideoId: this.props.data.video.id,
                    videoDuration: this.props.data.video.duration
                })
            }, this), this._cachedChildren
        },
        getChildrenHeight: function() {
            var e = "EditableCard" === this.props.childComponent ? 179 : 181;
            return Math.ceil(this.props.data.children.length / 2) * e
        },
        render: function() {
            var e = this.props.data.video,
                t = Math.random().toString().replace(/0\./, ""),
                a = "vidiq-video-item-checkbox-" + e.id + t,
                s = this.state.expanded ? "Close " : "Edit ",
                n = this.state.expanded ? {
                    maxHeight: this.getChildrenHeight()
                } : {};
            return React.createElement("div", null, React.createElement("div", {
                className: "video-info"
            }, React.createElement("input", {
                type: "checkbox",
                id: a,
                className: "video-checkbox",
                checked: this.props.selected,
                onChange: this.props.onToggleSelection
            }), React.createElement("label", {
                className: "video-checkbox-label",
                htmlFor: a
            }, React.createElement("img", {
                className: "video-thumbnail",
                src: e.thumb
            }), React.createElement("span", {
                className: "video-title"
            }, e.title), React.createElement("span", {
                className: "video-duration"
            }, e.duration)), React.createElement("button", {
                className: "video-toggle-button",
                onClick: this.onToggle
            }, s)), React.createElement("div", {
                className: "video-children",
                style: n
            }, this.getChildren()))
        }
    }),
    VideoResourceChooser = React.createClass({
        displayName: "VideoResourceChooser",
        propTypes: {
            items: React.PropTypes.array.isRequired,
            video: React.PropTypes.object,
            type: React.PropTypes.string.isRequired,
            selected: React.PropTypes.array
        },
        onClickSelectAll: function() {
            this.refs.chooser.selectAll()
        },
        onClickSelectNone: function() {
            this.refs.chooser.selectNone()
        },
        nonePart: function() {
            return this.props.items.length > 0 ? void 0 : React.createElement("h2", {
                className: "no-items"
            }, "No ", this.props.type, "s found for this video")
        },
        chooserPart: function() {
            var e = this.props.type[0].toUpperCase() + this.props.type.slice(1),
                t = "Editable" + e;
            return React.createElement(GeneralChooser, {
                ref: "chooser",
                items: this.props.items,
                video: this.props.video,
                initialSelected: this.props.selected,
                namespace: "resource",
                itemComponent: t
            })
        },
        selectPart: function(e) {
            var t = this["onClickSelect" + e];
            return React.createElement("button", {
                onClick: t
            }, "Select ", e)
        },
        render: function() {
            var e = "vidiq-general-chooser",
                t = this.props.items.length,
                a = this.props.selected.length,
                s = this.nonePart();
            return s ? React.createElement("div", {
                className: e
            }, s) : React.createElement("div", {
                className: e
            }, React.createElement("div", {
                className: "general-chooser-instructions-container"
            }, React.createElement("p", {
                className: "general-chooser-instructions"
            }, "Choose the ", this.props.type, "s you want to copy."), React.createElement("p", {
                className: "general-chooser-selected"
            }, "Selected: ", a, "/", t)), React.createElement("p", {
                className: "general-chooser-hint"
            }, "You may update the default ", React.createElement("strong", null, "Text"), " and ", React.createElement("strong", null, "Link"), " values for each ", this.props.type, " below."), React.createElement("div", {
                className: "general-chooser-toggle-buttons"
            }, React.createElement("div", {
                className: "left"
            }, this.selectPart("All"), React.createElement("span", {
                className: "divider"
            }, "|"), this.selectPart("None"))), this.chooserPart())
        }
    }),
    VideoResourceVideoChooser = React.createClass({
        displayName: "VideoResourceVideoChooser",
        propTypes: {
            items: React.PropTypes.array.isRequired,
            type: React.PropTypes.string.isRequired,
            selected: React.PropTypes.array
        },
        componentWillMount: function() {
            VideoBufferStore.addChangeListener(this.onVbsChange)
        },
        componentWillUnmount: function() {
            VideoBufferStore.removeChangeListener(this.onVbsChange)
        },
        onVbsChange: function() {
            this.forceUpdate()
        },
        onClickSelectAll: function() {
            this.refs.chooser.selectAll()
        },
        onClickSelectNone: function() {
            this.refs.chooser.selectNone()
        },
        onClickExpandAll: function() {
            $(window).trigger("selectable-video:expand")
        },
        onClickExpandNone: function() {
            $(window).trigger("selectable-video:collapse")
        },
        chooserPart: function() {
            if (0 === this.props.items.length) {
                var e = "No other videos were found";
                return React.createElement("p", {
                    className: "no-items"
                }, e)
            }
            var t = "Editable" + u.capitalize(this.props.type),
                a = {
                    SearchFilter: {
                        field: "title"
                    }
                };
            return React.createElement(GeneralChooser, {
                ref: "chooser",
                items: this.props.items,
                initialSelected: this.props.selected,
                namespace: "videos",
                itemComponent: "SelectableVideo",
                filters: a,
                getFilterable: this.getFilterable,
                childComponent: t
            })
        },
        getFilterable: function(e, t) {
            return e.video
        },
        buttonPart: function(e, t) {
            var a = [e, t].join(" "),
                s = this["onClick" + e + t];
            return React.createElement("button", {
                onClick: s
            }, a)
        },
        render: function() {
            var e = VideoBufferStore.getData(),
                t = this.props.items.length,
                a = this.props.selected.length;
            if (e.loading) {
                var s = e.videos.length;
                0 === s && (s = "");
                var n = "Loading videos... " + s;
                return React.createElement(GeneralLoader, {
                    text: n,
                    progress: e.progress
                })
            }
            return React.createElement("div", {
                className: "vidiq-general-chooser"
            }, React.createElement("div", {
                className: "general-chooser-instructions-container"
            }, React.createElement("p", {
                className: "general-chooser-instructions"
            }, "Choose the videos you want to copy these ", this.props.type, "s to."), React.createElement("p", {
                className: "general-chooser-selected"
            }, "Selected: ", a, "/", t)), React.createElement("p", {
                className: "general-chooser-hint"
            }, "You may update the ", React.createElement("strong", null, "Text"), " and ", React.createElement("strong", null, "Link"), " values for each video's ", this.props.type, "s below."), React.createElement("div", {
                className: "general-chooser-toggle-buttons"
            }, React.createElement("div", {
                className: "left"
            }, this.buttonPart("Select", "All"), React.createElement("span", {
                className: "divider"
            }, "|"), this.buttonPart("Select", "None")), React.createElement("div", {
                className: "right"
            }, this.buttonPart("Expand", "All"), React.createElement("span", {
                className: "divider"
            }, "|"), this.buttonPart("Expand", "None"))), this.chooserPart())
        }
    }),
    Wizard = React.createClass({
        displayName: "Wizard",
        propTypes: {
            steps: React.PropTypes.array.isRequired,
            childProps: React.PropTypes.func,
            enterStep: React.PropTypes.func,
            canChangeStep: React.PropTypes.func,
            customButtons: React.PropTypes.func,
            isLoading: React.PropTypes.func,
            beforePart: React.PropTypes.func,
            classes: React.PropTypes.string,
            locked: React.PropTypes.bool,
            legacy: React.PropTypes.bool
        },
        getInitialState: function() {
            return {
                step: 0
            }
        },
        componentDidMount: function() {
            this.props.legacy !== !1 && Modal.setButtons(this.getButtons()), this.callback("enterStep")
        },
        componentDidUpdate: function() {
            this.props.legacy !== !1 && Modal.setButtons(this.getButtons())
        },
        getCurrentStep: function() {
            return this.getStep(this.state.step)
        },
        getStep: function(e) {
            return this.props.steps[_.isNumber(e) ? e : this.state.step]
        },
        meta: function() {
            var e = this.callback("canChangeStep");
            return void 0 === e && (e = "all"), {
                isFirstStep: 0 === this.state.step,
                isLastStep: this.state.step === this.props.steps.length - 1,
                canGoBack: ["all", "back"].indexOf(e) >= 0,
                canGoForward: ["all", "forward"].indexOf(e) >= 0
            }
        },
        callback: function(e, t, a) {
            var s = this.getStep(),
                n = window[s][e];
            if (n && "function" == typeof n || (n = this.props[e]), "function" == typeof n) {
                var i = n(s, t, a);
                return void 0 === i ? !1 : i
            }
        },
        goBack: function() {
            this.changeStep(-1)
        },
        goForward: function() {
            this.changeStep(1)
        },
        changeStep: function(e) {
            var t = this.props.steps.length - 1,
                a = Math.min(Math.max(this.state.step + e, 0), t),
                s = this.state.step;
            this.state.step = a, this.callback("enterStep", a, s), this.setState({
                step: a
            })
        },
        getButtons: function() {
            var e = this.meta(),
                t = {
                    text: "Back",
                    onClick: this.goBack,
                    classes: "secondary",
                    disabled: !e.canGoBack
                },
                a = {
                    text: "Next",
                    onClick: this.goForward,
                    position: "right",
                    disabled: !e.canGoForward
                },
                s = this.callback("customButtons", t, a);
            return s ? s : e.isFirstStep ? ["cancel", a] : e.isLastStep ? [t, "close"] : [t, a]
        },
        getFooter: function() {
            return React.createElement(ModalFooter, {
                buttons: this.getButtons(),
                locked: this.props.locked
            })
        },
        render: function() {
            var e, t = this.getStep(),
                a = this.props.childProps,
                s = (a ? a(t) : null) || {},
                n = _.compact(["wizard", this.props.classes]).join(" "),
                i = _.extend(s, {
                    ref: "child",
                    footer: this.getFooter
                }),
                o = React.createElement(window[t], i);
            return this.callback("isLoading") && (o = null, e = React.createElement(Spinner, {
                classes: "modal-spinner",
                size: "big"
            })), React.createElement("div", {
                className: n
            }, e, this.callback("beforePart"), o)
        }
    }),
    Button = React.createClass({
        displayName: "Button",
        propTypes: {
            text: React.PropTypes.node,
            type: React.PropTypes.string,
            href: React.PropTypes.string,
            target: React.PropTypes.string,
            onClick: React.PropTypes.func,
            classes: React.PropTypes.string,
            secondary: React.PropTypes.bool,
            disabled: React.PropTypes.bool,
            setInnerHTML: React.PropTypes.bool,
            icon: React.PropTypes.bool,
            title: React.PropTypes.string,
            submit: React.PropTypes.bool
        },
        onClick: function() {
            if (this.props.onClick) return this.props.onClick();
            if (this.props.href) return "_blank" === this.props.target ? window.open(this.props.href) : void(window.location.href = this.props.href)
        },
        render: function() {
            var e = classNames("vidiq-button", this.props.classes, {
                    secondary: this.props.secondary,
                    icon: this.props.icon
                }),
                t = {
                    className: e,
                    type: this.props.type || "button",
                    onClick: this.onClick,
                    disabled: this.props.disabled,
                    title: this.props.title
                };
            this.props.submit && (t.type = "submit");
            var a = this.props.children || this.props.text;
            return this.props.setInnerHTML && (t.dangerouslySetInnerHTML = {
                __html: a
            }, a = null), React.createElement("button", t, a)
        }
    }),
    ButtonLogo = React.createClass({
        displayName: "ButtonLogo",
        propTypes: {
            size: React.PropTypes.oneOf(["small"])
        },
        render: function() {
            var e = chrome.extension.getURL("images/vidiq_playplus.png"),
                t = classNames("vidiq-button-logo", {
                    "vidiq-button-logo-small": "small" === this.props.size
                });
            return React.createElement("img", {
                src: e,
                className: t
            })
        }
    }),
    ButtonSection = React.createClass({
        displayName: "ButtonSection",
        propTypes: {
            buttons: React.PropTypes.array.isRequired,
            onClose: React.PropTypes.func,
            disabled: React.PropTypes.bool
        },
        render: function() {
            var e = _.map(this.props.buttons, function(e, t) {
                "cancel" === e ? e = {
                    text: "Cancel",
                    classes: "secondary",
                    onClick: this.props.onClose
                } : "close" === e && (e = {
                    text: "Close",
                    position: "right",
                    onClick: this.props.onClose
                });
                var a = e.position || "left",
                    s = classNames("btn", "btn-small", a, e.classes),
                    n = e.disabled || this.props.disabled,
                    i = n ? null : e.onClick;
                return React.createElement(Button, {
                    classes: s,
                    key: t,
                    onClick: i,
                    disabled: n
                }, e.text)
            }, this);
            return React.createElement("div", {
                className: "button-section"
            }, e)
        }
    }),
    CharacterCounter = React.createClass({
        displayName: "CharacterCounter",
        propTypes: {
            id: React.PropTypes.string.isRequired,
            watchSelector: React.PropTypes.string.isRequired,
            maxChars: React.PropTypes.number.isRequired
        },
        getInitialState: function() {
            return this.store = UploadCompanionStore.id(this.props.id), {
                chars: 0,
                store: this.store.getData()
            }
        },
        componentDidMount: function() {
            this.$watched = UploadDOM.getElement(this.props.id, this.props.watchSelector), this.interval = setInterval(this.checkTagsLength, 500)
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange), clearInterval(this.interval)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        checkTagsLength: function() {
            this.setState({
                chars: this.$watched.val().length
            })
        },
        render: function() {
            if (!this.state.store.settings.charCount) return null;
            var e = classNames("counter", {
                "counter--warning": this.state.chars > this.props.maxChars
            });
            return React.createElement("div", {
                className: "vidiq-character-counter"
            }, React.createElement("p", {
                className: e
            }, this.state.chars, " / ", this.props.maxChars))
        }
    }),
    CommentTemplates = React.createClass({
        displayName: "CommentTemplates",
        propTypes: {
            expanded: React.PropTypes.bool.isRequired,
            channelName: React.PropTypes.string.isRequired,
            id: React.PropTypes.string.isRequired,
            toggleDropdown: React.PropTypes.func.isRequired
        },
        getInitialState: function() {
            return {
                store: CommentTemplatesStore.getData(),
                selectedText: null,
                editing: null,
                newName: null
            }
        },
        componentDidUpdate: function(e) {
            var t = this.state.store.selectedName;
            this.props.expanded ? e.expanded || (this.setState({
                selectedText: this.state.store.templates[t]
            }), $(window).on("click.Bst", this.detectClicks)) : $(window).off("click.Bst", this.detectClicks), t ? this.state.selectedText || this.setState({
                selectedText: this.state.store.templates[t]
            }) : this.setSelected()
        },
        componentWillMount: function() {
            CommentTemplatesStore.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            CommentTemplatesStore.removeChangeListener(this.onStoreChange)
        },
        detectClicks: function(e) {
            var t = $("." + this.props.id.replace(".", "\\.")),
                a = $(".modal-window");
            0 !== t.has(e.target).length || t.is(e.target) || 0 !== a.has(e.target).length || a.is(e.target) || this.props.toggleDropdown()
        },
        getAdjustedText: function(e) {
            return e ? e.replace(/<user-name>/g, this.props.channelName) : void 0
        },
        onStoreChange: function() {
            this.setState({
                store: CommentTemplatesStore.getData()
            })
        },
        setSelected: function(e) {
            _.isEmpty(this.state.store.templates) || (e || (e = _.keys(this.state.store.templates)[0]), CommentTemplatesActions.update({
                selectedName: e
            }))
        },
        changeSelected: function(e) {
            var t = $(e.target).attr("value");
            this.setSelected(t), this.setState({
                selectedText: this.state.store.templates[t]
            })
        },
        changeText: function(e) {
            var t = new RegExp(this.props.channelName, "g"),
                a = $(e.target).val().replace(t, "<user-name>");
            this.setState({
                selectedText: a
            })
        },
        insertReply: function(e) {
            var t = this.getAdjustedText(e || this.state.selectedText);
            $(window).trigger("comment-templates:insert-reply:<" + this.props.id + ">", t), this.props.toggleDropdown()
        },
        insertReplyQuick: function(e) {
            var t = $(e.target).attr("value"),
                a = this.state.store.templates[t];
            this.insertReply(a)
        },
        editName: function(e) {
            var t = $(e.target).attr("value");
            this.setState({
                editing: t,
                newName: t
            })
        },
        setNewName: function(e) {
            this.setState({
                newName: $(e.target).val()
            })
        },
        saveName: function(e) {
            var t = $(e.target).attr("value");
            t !== this.state.newName && CommentTemplatesActions.rename(t, this.state.newName), this.setState({
                editing: null,
                newName: null
            })
        },
        mountCreateModal: function() {
            Modal.mount(CommentTemplatesCreate, {
                channelName: this.props.channelName
            })
        },
        saveButtonDisabled: function() {
            var e = this.state.store,
                t = e.templates[e.selectedName];
            return this.state.selectedText && e.selectedName && this.state.selectedText === t
        },
        saveTemplate: function() {
            var e = this.state.store,
                t = this.state.selectedText.trim().replace(this.props.channelName, "<user-name>");
            CommentTemplatesActions.saveTemplate(e.selectedName, t)
        },
        deleteTemplate: function() {
            CommentTemplatesActions.deleteTemplate(this.state.store.selectedName), CommentTemplatesActions.update({
                selectedName: null
            }), this.setState({
                selectedText: null
            })
        },
        render: function() {
            return this.props.expanded ? React.createElement("div", {
                className: "comment-templates-container"
            }, React.createElement("h2", null, "Comment Templates"), this.message(), this.templatesList(), this.textBox(), this.actionButtons()) : null
        },
        message: function() {
            return _.isEmpty(this.state.store.templates) ? React.createElement("h1", {
                className: "no-templates-message"
            }, "No comment templates saved. Click ", React.createElement("b", null, "New +"), " to get started!") : null
        },
        templatesList: function() {
            var e = this.state.store.templates;
            if (_.isEmpty(e)) return null;
            var t = _.map(e, function(e, t) {
                var a = classNames("template-name", {
                    selected: this.state.store.selectedName === t
                });
                return React.createElement("li", {
                    className: a,
                    key: t,
                    value: t,
                    onClick: this.changeSelected
                }, this.getName(t), this.getEditButton(t), React.createElement("div", {
                    className: "quick-add",
                    value: t,
                    onClick: this.insertReplyQuick,
                    title: "Insert Reply"
                }, "+"))
            }.bind(this));
            return React.createElement("ul", {
                className: "comment-templates-list"
            }, t)
        },
        textBox: function() {
            return _.isEmpty(this.state.store.templates) ? null : React.createElement("textarea", {
                className: "template-text",
                onChange: this.changeText,
                value: this.getAdjustedText(this.state.selectedText)
            })
        },
        actionButtons: function() {
            return _.isEmpty(this.state.store.templates) ? React.createElement("div", {
                className: "centered-button-container"
            }, React.createElement(Button, {
                classes: "create-new-centered",
                text: "New +",
                onClick: this.mountCreateModal
            })) : React.createElement("div", {
                className: "template-action-buttons"
            }, React.createElement(Button, {
                classes: "create-new",
                text: "New +",
                onClick: this.mountCreateModal
            }), React.createElement(Button, {
                classes: "save",
                text: "Save",
                disabled: this.saveButtonDisabled(),
                onClick: this.saveTemplate
            }), React.createElement(Button, {
                classes: "delete",
                text: "Delete",
                secondary: !0,
                onClick: this.deleteTemplate
            }), React.createElement(Button, {
                classes: "insert-reply",
                text: "Insert Reply",
                onClick: this.insertReply
            }))
        },
        getName: function(e) {
            return this.state.editing === e ? React.createElement("input", {
                type: "text",
                defaultValue: e,
                onChange: this.setNewName
            }) : React.createElement("span", {
                value: e
            }, e)
        },
        getEditButton: function(e) {
            return this.state.editing === e ? React.createElement("div", {
                className: "save-name",
                value: e,
                onClick: this.saveName,
                title: "Save name"
            }, React.createElement("i", {
                className: "material-icons",
                value: e
            }, "save")) : React.createElement("div", {
                className: "edit-name",
                value: e,
                onClick: this.editName,
                title: "Edit name"
            }, React.createElement("i", {
                className: "material-icons",
                value: e
            }, "edit"))
        }
    }),
    CommentTemplatesCreate = React.createClass({
        displayName: "CommentTemplatesCreate",
        propTypes: {
            channelName: React.PropTypes.string.isRequired
        },
        getInitialState: function() {
            return {
                name: null,
                text: null
            }
        },
        createTemplate: function() {
            CommentTemplatesActions.saveTemplate(this.state.name, this.state.text), Modal.destroy()
        },
        updateName: function(e) {
            this.setState({
                name: $(e.target).val()
            })
        },
        updateText: function(e) {
            this.setState({
                text: $(e.target).val()
            })
        },
        getButtons: function() {
            return ["cancel", {
                text: "Create",
                onClick: this.createTemplate,
                position: "right",
                disabled: !this.state.name || !this.state.text
            }]
        },
        render: function() {
            return React.createElement(Modal, {
                title: "Create New Comment Template",
                buttons: this.getButtons()
            }, React.createElement("div", {
                className: "create-container"
            }, React.createElement("div", {
                className: "name-container"
            }, React.createElement("h4", null, "Template name"), React.createElement("input", {
                type: "text",
                placeholder: "e.g. Thanks",
                value: this.state.name,
                onChange: this.updateName
            })), React.createElement("div", {
                className: "text-container"
            }, React.createElement("h4", null, "Template text"), React.createElement("textarea", {
                placeholder: "e.g. Thanks for subscribing!",
                value: this.state.text,
                onChange: this.updateText
            }), React.createElement("h5", null, "Hint: ", React.createElement("i", null, "<user-name>"), " will be replaced with the name of the channel you're replying to."))))
        }
    }),
    CommentTemplatesDropdown = React.createClass({
        displayName: "CommentTemplatesDropdown",
        propTypes: {
            channelName: React.PropTypes.string.isRequired,
            id: React.PropTypes.string.isRequired
        },
        getInitialState: function() {
            return {
                expanded: !1
            }
        },
        toggleDropdown: function() {
            this.setState({
                expanded: !this.state.expanded
            })
        },
        render: function() {
            var e = classNames("comment-templates-dropdown-button", {
                    expanded: this.state.expanded
                }),
                t = classNames("comment-templates-dropdown", this.props.id);
            return React.createElement("div", {
                className: t
            }, React.createElement("button", {
                className: e,
                onClick: this.toggleDropdown
            }, React.createElement(ButtonLogo, {
                size: "small"
            }), React.createElement("span", {
                className: "dropdown-button-caret yt-uix-button-arrow yt-sprite vidiq-arrow"
            })), React.createElement(CommentTemplates, {
                expanded: this.state.expanded,
                channelName: this.props.channelName,
                id: this.props.id,
                toggleDropdown: this.toggleDropdown
            }))
        }
    }),
    CommentsFilter = React.createClass({
        displayName: "CommentsFilter",
        filters: {
            all: "All comment threads (choose filter)",
            hasReplies: "Has replies",
            noReplies: "Doesn't have replies",
            hasOwnerReplies: "I've replied to",
            noOwnerReplies: "I haven't yet replied to",
            question: "Contain question(s)",
            profanity: "Contain profanity",
            positive: "Contain positive word(s)",
            negative: "Contain negative word(s)",
            commentsBy: "Comments made by...",
            search: "Search by phrases...",
            blacklist: "Filter out phrases...",
            videoIds: "Filter out videos...",
            minSubscribers: "Minimum number of subscribers",
            multiple: "Apply multiple filters"
        },
        getInitialState: function() {
            return this.store = CommentsStore, {
                store: this.store.getData()
            }
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        filterEnabled: function(e) {
            var t = this.state.store;
            return t.filter === e || "multiple" === t.filter && t.multiFilters.indexOf(e) > -1
        },
        render: function() {
            return React.createElement("div", {
                className: "vidiq-comment-filter"
            }, React.createElement(CommentsFilterChoose, {
                filters: this.filters,
                loading: this.state.store.loading
            }), React.createElement(CommentsFilterCount, {
                loading: this.state.store.loading,
                count: this.state.store.showCount,
                total: this.state.store.allThreads.length
            }), React.createElement(CommentsFilterInput, {
                wordSearchEnabled: this.filterEnabled("search"),
                blacklistEnabled: this.filterEnabled("blacklist"),
                ignoreVidsEnabled: this.filterEnabled("videoIds"),
                userSearchEnabled: this.filterEnabled("commentsBy"),
                minSubsEnabled: this.filterEnabled("minSubscribers"),
                searchTerms: this.state.store.searchTerms,
                blacklist: this.state.store.blacklist,
                videoIds: this.state.store.videoIds,
                username: this.state.store.username,
                minSubscribers: this.state.store.minSubscribers
            }), React.createElement(CommentsMultiFilter, {
                enabled: this.filterEnabled("multiple"),
                filters: this.filters,
                multiFilters: this.state.store.multiFilters
            }))
        }
    }),
    CommentsFilterChoose = React.createClass({
        displayName: "CommentsFilterChoose",
        propTypes: {
            filters: React.PropTypes.object.isRequired,
            loading: React.PropTypes.bool.isRequired
        },
        filterChange: function(e) {
            CommentsActions.update({
                filter: e,
                filtering: !0,
                showCount: null
            }), setTimeout(CommentsDOM.applyFilters.bind(CommentsDOM))
        },
        render: function() {
            var e = chrome.extension.getURL("images/vidiq_playplus.png");
            return React.createElement("div", {
                className: "vidiq-comment-filter-select"
            }, React.createElement("img", {
                src: e,
                className: "vidiq-button-logo vidiq-button-logo-small"
            }), React.createElement(GeneralSelector, {
                onChange: this.filterChange,
                disabled: this.props.loading,
                defaultValue: "choose",
                values: this.props.filters
            }))
        }
    }),
    CommentsFilterCount = React.createClass({
        displayName: "CommentsFilterCount",
        propTypes: {
            loading: React.PropTypes.bool.isRequired,
            count: React.PropTypes.number,
            total: React.PropTypes.number
        },
        render: function() {
            return this.props.loading ? React.createElement("span", {
                className: "vidiq-spinner"
            }, React.createElement(Spinner, {
                size: "small"
            })) : null === this.props.count || void 0 === this.props.count ? null : React.createElement("span", {
                className: "vidiq-comment-thread-count"
            }, "Showing ", this.props.count, " of ", this.props.total, " comment threads.")
        }
    }),
    CommentsFilterInput = React.createClass({
        displayName: "CommentsFilterInput",
        propTypes: {
            wordSearchEnabled: React.PropTypes.bool.isRequired,
            blacklistEnabled: React.PropTypes.bool.isRequired,
            ignoreVidsEnabled: React.PropTypes.bool.isRequired,
            userSearchEnabled: React.PropTypes.bool.isRequired,
            minSubsEnabled: React.PropTypes.bool.isRequired,
            searchTerms: React.PropTypes.array,
            blacklist: React.PropTypes.array,
            videoIds: React.PropTypes.array,
            username: React.PropTypes.string,
            minSubscribers: React.PropTypes.string
        },
        inputDebounced: _.debounce(function(e, t) {
            switch (e) {
                case "search":
                    CommentsActions.update({
                        searchTerms: t,
                        loading: !0
                    });
                    break;
                case "blacklist":
                    CommentsActions.update({
                        blacklist: t,
                        loading: !0
                    });
                    break;
                case "videoIds":
                    CommentsActions.update({
                        videoIds: t,
                        loading: !0
                    });
                    break;
                case "commentsBy":
                    CommentsActions.update({
                        username: t,
                        loading: !0
                    });
                    break;
                case "minSubscribers":
                    CommentsActions.update({
                        minSubscribers: t,
                        loading: !0
                    })
            }
            setTimeout(CommentsDOM.applyFilters.bind(CommentsDOM))
        }, 500),
        wordSearchChange: function(e) {
            var t = _.map($(e.target).val().split(","), function(e) {
                return e.trim()
            });
            this.inputDebounced("search", t)
        },
        blacklistChange: function(e) {
            var t = _.map($(e.target).val().split(","), function(e) {
                return e.trim()
            });
            t = _.filter(t, function(e) {
                return "" !== e
            }), this.inputDebounced("blacklist", t)
        },
        videoIdsChange: function(e) {
            var t = _.map($(e.target).val().split(","), function(e) {
                return e.trim()
            });
            this.inputDebounced("videoIds", t)
        },
        userSearchChange: function(e) {
            var t = $(e.target).val();
            this.inputDebounced("commentsBy", t)
        },
        minSubsChange: function(e) {
            var t = $(e.target).val();
            this.inputDebounced("minSubscribers", t)
        },
        render: function() {
            return this.props.wordSearchEnabled || this.props.userSearchEnabled || this.props.blacklistEnabled || this.props.ignoreVidsEnabled || this.props.minSubsEnabled ? React.createElement("div", {
                className: "vidiq-comment-filter-input"
            }, this.wordSearch(), this.blacklistSearch(), this.videoIdList(), this.userSearch(), this.minSubs()) : null
        },
        wordSearch: function() {
            return this.props.wordSearchEnabled ? React.createElement("input", {
                className: "vidiq-input vidiq-comment-search",
                onChange: this.wordSearchChange,
                defaultValue: this.props.searchTerms.join(", "),
                placeholder: "Search by a comma separated list"
            }) : null
        },
        blacklistSearch: function() {
            return this.props.blacklistEnabled ? React.createElement("input", {
                className: "vidiq-input vidiq-comment-blacklist",
                onChange: this.blacklistChange,
                defaultValue: this.props.blacklist.join(", "),
                placeholder: "Filter by a comma separated list"
            }) : null
        },
        videoIdList: function() {
            return this.props.ignoreVidsEnabled ? React.createElement("input", {
                className: "vidiq-input vidiq-comment-ignore-videos",
                onChange: this.videoIdsChange,
                defaultValue: this.props.videoIds.join(", "),
                placeholder: "Ignore by list of video IDs"
            }) : null
        },
        userSearch: function() {
            return this.props.userSearchEnabled ? React.createElement("input", {
                className: "vidiq-input vidiq-comment-made-by",
                onChange: this.userSearchChange,
                defaultValue: this.props.username,
                placeholder: "Search comments by username"
            }) : null
        },
        minSubs: function() {
            return this.props.minSubsEnabled ? React.createElement("input", {
                className: "vidiq-input vidiq-comment-min-subs",
                onChange: this.minSubsChange,
                defaultValue: this.props.minSubscribers,
                placeholder: "Filter comments by subscriber count"
            }) : null
        }
    }),
    CommentsMultiFilter = React.createClass({
        displayName: "CommentsMultiFilter",
        propTypes: {
            enabled: React.PropTypes.bool.isRequired,
            filters: React.PropTypes.object.isRequired,
            multiFilters: React.PropTypes.array.isRequired
        },
        multiFilterChange: function(e) {
            var t = e.target.name,
                a = this.props.multiFilters;
            a.indexOf(t) < 0 ? a.push(t) : a = _.without(a, t), CommentsActions.update({
                multiFilters: a,
                loading: !0
            }), setTimeout(CommentsDOM.applyFilters.bind(CommentsDOM))
        },
        render: function() {
            var e = {
                    maxHeight: this.props.enabled ? "75px" : "0px",
                    margin: this.props.enabled ? "5px 0px 0px 0px" : "0"
                },
                t = _.omit(this.props.filters, ["all", "multiple"]),
                a = _.chain(t).keys().toArray().groupBy(function(e, t) {
                    return Math.floor(t / 4)
                }).value(),
                s = _.map(a, function(e, t) {
                    return React.createElement("ul", {
                        key: t
                    }, this.multiFilterGroup(e))
                }.bind(this));
            return React.createElement("div", {
                style: e,
                className: "vidiq-multiple-filter"
            }, s)
        },
        multiFilterGroup: function(e) {
            return _.map(e, function(e) {
                var t = this.props.filters[e];
                return React.createElement("li", {
                    key: e
                }, React.createElement("input", {
                    type: "checkbox",
                    name: e,
                    id: e,
                    onChange: this.multiFilterChange,
                    checked: this.props.multiFilters.indexOf(e) >= 0
                }), React.createElement("label", {
                    htmlFor: e
                }, t))
            }.bind(this))
        }
    }),
    SubscriberCount = React.createClass({
        displayName: "SubscriberCount",
        propTypes: {
            channelPath: React.PropTypes.string.isRequired
        },
        getInitialState: function() {
            return this.store = CommentsStore, {
                store: this.store.getData()
            }
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange)
        },
        componentDidMount: function() {
            var e = new Tooltips({
                parent: $("body"),
                position: "fixed"
            });
            $("body").data("tooltips", e)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        render: function() {
            var e = this.state.store.subCounts[this.props.channelPath];
            return !e || 0 > e ? null : React.createElement("div", {
                className: "vidiq-subscriber-count",
                "data-tip-message": "Powered by vidIQ"
            }, React.createElement("span", {
                className: "count"
            }, e), React.createElement("span", {
                className: "label"
            }, " subscribers"))
        }
    }),
    Confirmation = React.createClass({
        displayName: "Confirmation",
        propTypes: {
            show: React.PropTypes.bool.isRequired,
            message: React.PropTypes.string,
            onConfirm: React.PropTypes.func.isRequired,
            onCancel: React.PropTypes.func.isRequired
        },
        render: function() {
            var e = {
                maxHeight: this.props.show ? "100px" : "0px"
            };
            return React.createElement("div", {
                style: e,
                className: "vidiq-confirmation"
            }, React.createElement("div", {
                className: "confirmation-message"
            }, this.props.message), React.createElement(Button, {
                classes: "confirm",
                text: "Yes",
                onClick: this.props.onConfirm,
                secondary: !0
            }), React.createElement(Button, {
                classes: "cancel",
                text: "Cancel",
                onClick: this.props.onCancel
            }))
        }
    }),
    CountrySelector = React.createClass({
        displayName: "CountrySelector",
        propTypes: {
            classes: React.PropTypes.string,
            onChange: React.PropTypes.func,
            defaultValue: React.PropTypes.any,
            disabled: React.PropTypes.bool
        },
        onChange: function(e) {
            this.props.onChange && this.props.onChange(e, "country")
        },
        render: function() {
            var e = HotSearch.defaults.countries,
                t = this.props.disabled ? _.pick(e, this.props.defaultValue) : e;
            return React.createElement(GeneralSelector, {
                onChange: this.onChange,
                disabled: this.props.disabled,
                classes: this.props.classes,
                defaultValue: this.props.defaultValue,
                values: t
            })
        }
    }),
    CustomSelector = React.createClass({
        displayName: "CustomSelector",
        propTypes: {
            defaultValue: React.PropTypes.string,
            options: React.PropTypes.array,
            optionGroups: React.PropTypes.object,
            fontStyle: React.PropTypes.bool,
            onChange: React.PropTypes.func
        },
        getInitialState: function() {
            return {
                selected: this.props.defaultValue,
                expanded: !1
            }
        },
        toggleExpanded: function() {
            var e = !this.state.expanded;
            this.setState({
                expanded: e
            })
        },
        changeSelected: function(e) {
            var t = $(e.target).attr("value");
            this.props.onChange && this.props.onChange(t), this.setState({
                selected: t,
                expanded: !1
            })
        },
        render: function() {
            var e = this.props.options ? this.options() : this.optionGroups();
            return React.createElement("div", {
                className: "custom-selector-container"
            }, this.select(), e)
        },
        select: function() {
            var e = this.state.expanded ? "arrow_drop_up" : "arrow_drop_down",
                t = this.props.fontStyle ? {
                    fontFamily: this.state.selected
                } : null;
            return React.createElement("div", {
                onClick: this.toggleExpanded,
                className: "custom-selector-select"
            }, React.createElement("span", {
                style: t
            }, this.state.selected), React.createElement("i", {
                className: "material-icons"
            }, e))
        },
        options: function(e) {
            e || (e = this.props.options);
            var t = _.map(e, function(e) {
                    var t = this.state.selected === e,
                        a = classNames("option", {
                            selected: t
                        }),
                        s = this.props.fontStyle ? {
                            fontFamily: e
                        } : null,
                        n = t ? React.createElement("div", {
                            className: "checkmark",
                            value: e
                        }, "") : null;
                    return React.createElement("li", {
                        key: e,
                        className: a,
                        value: e,
                        onClick: this.changeSelected
                    }, React.createElement("div", {
                        style: s,
                        value: e
                    }, e), n)
                }, this),
                a = classNames("options-container", {
                    hidden: !this.state.expanded
                });
            return React.createElement("ul", {
                className: a
            }, t)
        },
        optionGroups: function() {
            if (!this.props.optionGroups) return null;
            var e = classNames("option-group-container", {
                    hidden: !this.state.expanded
                }),
                t = _.map(this.props.optionGroups, function(e, t) {
                    return this.optionGroup(e, t)
                }, this);
            return React.createElement("ul", {
                className: e
            }, t)
        },
        optionGroup: function(e, t) {
            return React.createElement("li", {
                key: t,
                className: "option-group"
            }, t, this.options(e))
        }
    }),
    D3Chart = React.createClass({
        displayName: "D3Chart",
        propTypes: {
            data: React.PropTypes.array.isRequired,
            create: React.PropTypes.func.isRequired,
            style: React.PropTypes.object,
            height: React.PropTypes.number
        },
        getInitialState: function() {
            return {
                id: u.prettyRandomId()
            }
        },
        shouldComponentUpdate: function(e) {
            return !_.isEqual(e.data, this.props.data)
        },
        componentDidUpdate: function() {
            this.renderChart()
        },
        componentDidMount: function() {
            this.renderChart()
        },
        renderChart: function() {
            var e = this.props,
                t = ".d3-chart-" + this.state.id;
            nv.addGraph(function() {
                var a = e.create(nv);
                return d3.select(t).datum(e.data).call(a), a
            })
        },
        render: function() {
            var e = classNames("d3-chart", "d3-chart-" + this.state.id),
                t = this.props.style || {
                    width: "100%"
                };
            return this.props.height && (t.height = this.props.height + "px"), React.createElement("div", {
                className: "d3-chart-container"
            }, React.createElement("svg", {
                className: e,
                style: t
            }))
        }
    }),
    Dialogue = React.createClass({
        displayName: "Dialogue",
        propTypes: {
            onYes: React.PropTypes.func.isRequired,
            onNo: React.PropTypes.func.isRequired
        },
        render: function() {
            return React.createElement("div", {
                className: "vidiq-dialogue"
            }, React.createElement(Button, {
                classes: "vidiq-dialogue-no",
                onClick: this.props.onNo,
                secondary: !0,
                text: "No"
            }), React.createElement(Button, {
                classes: "vidiq-dialogue-yes",
                onClick: this.props.onYes,
                text: "Yes"
            }))
        }
    }),
    DropdownMenu = React.createClass({
        displayName: "DropdownMenu",
        propTypes: {
            size: React.PropTypes.oneOf(["small"])
        },
        render: function() {
            var e = classNames("dropdown-button", "yt-uix-button", "yt-uix-button-default", "yt-uix-button-size-small", "yt-uix-button-empty", "start", "end", {
                    "dropdown-button-small": "small" === this.props.size
                }),
                t = "vidiq-dropdown-menu yt-uix-button-menu yt-uix-button-menu-default";
            return React.createElement("span", {
                className: "vidiq-dropdown-menu yt-uix-button-group"
            }, React.createElement("button", {
                type: "button",
                "aria-haspopup": "true",
                "aria-expanded": "false",
                className: e
            }, React.createElement(ButtonLogo, {
                size: "small" === this.props.size ? "small" : null
            }), React.createElement("span", {
                className: "dropdown-button-caret yt-uix-button-arrow yt-sprite"
            }), React.createElement("ul", {
                role: "menu",
                "aria-haspopup": "true",
                className: t,
                style: {
                    display: "none"
                }
            }, this.props.children)))
        }
    }),
    DropdownMenuItemHandlers = {},
    DropdownMenuItem = React.createClass({
        displayName: "DropdownMenuItem",
        propTypes: {
            size: React.PropTypes.oneOf(["small"]),
            disabled: React.PropTypes.bool,
            classes: React.PropTypes.string,
            data: React.PropTypes.object,
            onClick: React.PropTypes.func.isRequired
        },
        getInitialState: function() {
            return {
                key: "vidiq-" + u.prettyRandomId()
            }
        },
        componentWillMount: function() {
            DropdownMenuItemHandlers[this.state.key] = this.onClick
        },
        onClick: function(e) {
            this.props.onClick(e.target.textContent, e.target.dataset)
        },
        getDataProps: function() {
            return _.object(_.map(this.props.data, function(e, t) {
                return ["data-" + t, e]
            }))
        },
        render: function() {
            var e = classNames("yt-uix-button-menu-item", this.props.classes),
                t = _.extend({
                    className: e
                }, this.getDataProps());
            return React.createElement("li", {
                role: "menuitem",
                className: this.state.key
            }, React.createElement("span", t, this.props.children))
        }
    });
$(window).one("vidiq:ready", function() {
    document.body.addEventListener("click", function(e) {
        var t = $(e.target),
            a = t.parents(".vidiq-dropdown-menu").length > 0,
            s = t.parents("li[class^='vidiq-']").length > 0;
        if (a && s) {
            var n = t.parent().attr("class");
            DropdownMenuItemHandlers[n](e)
        }
    })
});
var MyVideosDropdownMenu = React.createClass({
        displayName: "MyVideosDropdownMenu",
        onClick: function(e, t) {
            var a = t.component,
                s = e,
                n = {
                    MassExport: "Mass CSV Export",
                    MassEditVideoResources: "Mass Edit/Delete Cards & Annotations"
                };
            n[a] && (s = n[a]), u.track("Clicked " + s), t.legacy ? Modal.create({
                title: e,
                innerComponent: window[a]
            }) : Modal.mount(window[a])
        },
        render: function() {
            return React.createElement(DropdownMenu, null, React.createElement(DropdownMenuItem, {
                onClick: this.onClick,
                data: {
                    legacy: !0,
                    component: "MassExport"
                }
            }, "CSV Export"), React.createElement(DropdownMenuItem, {
                onClick: this.onClick,
                data: {
                    component: "MassEditVideos"
                }
            }, "Mass Edit Videos"), React.createElement(DropdownMenuItem, {
                onClick: this.onClick,
                data: {
                    legacy: !0,
                    component: "MassEditVideoResources"
                }
            }, "Mass Edit Cards & Annotations"))
        }
    }),
    VideoActionsDropdownMenu = React.createClass({
        displayName: "VideoActionsDropdownMenu",
        propTypes: {
            video: React.PropTypes.object,
            size: React.PropTypes.string,
            features: React.PropTypes.array
        },
        features: [{
            component: "FeaturedVideoBase",
            title: "Feature this video",
            size: "small"
        }, {
            component: "CopyVideoResources",
            title: "Copy annotations",
            arg: "annotation"
        }, {
            component: "CopyVideoResources",
            title: "Copy cards",
            arg: "card"
        }, {
            component: "AdvancedEmbedBase",
            title: "Advanced embed"
        }, {
            component: "MassLikeBase",
            title: "Mass like",
            featurePermitted: "massLike"
        }, {
            component: "ArchiveAndSyndicate",
            title: "Archive and syndicate"
        }, {
            component: "ThumbnailEditor",
            title: "Thumbnail editor",
            size: "large"
        }],
        getDefaultProps: function() {
            return {
                features: ["all"]
            }
        },
        getInitialState: function() {
            return {
                video: {}
            }
        },
        componentDidMount: function() {
            this.setState({
                video: this.getVideoData()
            })
        },
        getVideoData: function() {
            if (!_.isEmpty(this.props.video)) return this.props.video;
            var e = $(this.getDOMNode()).closest(".vm-video-item");
            return {
                id: e.data("video-id"),
                title: e.find(".vm-video-title-content").text(),
                thumbnail: e.find(".yt-thumb-clip img").attr("src"),
                duration: e.find(".video-time").text()
            }
        },
        getFilteredFeatures: function() {
            var e = this.props.features,
                t = "all" === e[0],
                a = _.compact(_.map(this.features, function(a, s) {
                    var n = a.component;
                    if (t || _.contains(e, n)) {
                        var i = !a.featurePermitted || api().featurePermitted(a.featurePermitted);
                        if (i) return React.createElement(DropdownMenuItem, {
                            key: s,
                            onClick: this.openModal,
                            classes: this.state.triggerClass,
                            data: {
                                arg: a.arg,
                                "component-name": n,
                                size: a.size
                            }
                        }, a.title)
                    }
                }.bind(this)));
            return a
        },
        openModal: function(e, t) {
            Modal.create({
                title: e,
                size: t.size || null,
                innerComponent: window[t.componentName],
                innerProps: this.getInnerPropsFor(t.componentName, t.arg)
            })
        },
        getInnerPropsFor: function(e, t) {
            var a = {
                video: this.state.video
            };
            switch (e) {
                case "CopyVideoResources":
                    return _.extend({
                        type: t
                    }, a);
                default:
                    return a
            }
        },
        render: function() {
            return React.createElement(DropdownMenu, {
                size: this.props.size
            }, this.getFilteredFeatures())
        }
    }),
    EmojiPicker = React.createClass({
        displayName: "EmojiPicker",
        propTypes: {
            add: React.PropTypes.func
        },
        base: "https://s3.amazonaws.com/vidio-app/emoji/160x160/",
        indices: {
            people: [705, 704, 701, 711, 50, 710, 714, 725, 727, 724, 726, 729, 730, 728, 752, 702, 721, 713, 719, 731, 736, 735, 703, 746, 743, 738, 749, 706, 720, 742, 744, 741, 750, 733, 734, 737, 723, 707, 712, 756, 715, 753, 754, 751, 732, 739, 740, 709, 485, 747, 745, 717, 722, 748, 755, 708, 716, 718, 472, 473, 468, 477, 488, 476, 460, 461, 462, 463, 474, 475, 471, 482, 478, 759, 757, 760, 762, 761, 765, 764, 758, 763, 479, 480, 769, 770, 771, 486, 483, 527, 647, 98, 203, 529, 523, 520, 524, 525, 522, 526, 424, 423, 425, 427, 426, 435, 436, 434, 432, 91, 93, 433, 92, 438, 428, 429, 431, 430, 773, 776, 49, 437, 528, 831, 336, 489, 465, 464, 466, 467, 501, 503, 469, 767, 766, 487, 772, 492, 493, 491, 470, 775, 774, 768, 310, 439, 440, 453, 452, 455, 454, 456, 443, 442, 448, 445, 330, 444, 446, 447, 546, 450, 451, 449, 441, 281, 174, 490, 513, 511, 514, 512, 109, 506, 509, 505, 507, 508, 516, 510, 498, 497, 499, 500, 458, 459, 530, 457, 531],
            nature: [414, 418, 409, 405, 417, 408, 416, 407, 400, 419, 415, 421, 406, 383, 413, 378, 412, 377, 384, 420, 399, 398, 396, 397, 395, 380, 373, 394, 387, 389, 388, 390, 372, 385, 386, 392, 391, 404, 411, 371, 364, 375, 360, 363, 365, 367, 369, 374, 376, 379, 381, 382, 361, 362, 410, 393, 370, 403, 402, 366, 368, 401, 422, 502, 212, 211, 220, 213, 215, 214, 221, 223, 222, 219, 218, 224, 210, 209, 207, 208, 205, 206, 216, 188, 202, 201, 198, 189, 190, 191, 192, 193, 194, 195, 196, 200, 199, 197, 185, 186, 187, 183, 184, 204, 123, 43, 78, 44, 72, 47, 101, 77, 172, 173, 180, 182, 294],
            things: [515, 295, 299, 300, 296, 287, 288, 297, 298, 284, 481, 286, 285, 282, 292, 290, 291, 289, 293, 656, 306, 605, 606, 609, 549, 550, 547, 548, 545, 599, 45, 580, 581, 582, 583, 607, 608, 620, 619, 618, 617, 630, 631, 584, 585, 33, 27, 32, 26, 629, 628, 625, 626, 627, 624, 519, 648, 616, 615, 622, 621, 623, 842, 841, 840, 838, 649, 651, 650, 819, 821, 521, 653, 652, 496, 495, 534, 538, 539, 541, 540, 537, 542, 600, 589, 587, 586, 90, 591, 590, 597, 593, 592, 594, 595, 596, 588, 579, 554, 553, 567, 560, 558, 559, 578, 561, 555, 556, 557, 551, 552, 87, 562, 564, 95, 94, 565, 566, 571, 573, 574, 575, 569, 570, 568, 576, 572, 632, 577, 654, 655, 598, 309, 313, 305, 308, 329, 322, 323, 326, 328, 327, 324, 325, 484, 315, 131, 321, 130, 319, 316, 340, 333, 75, 76, 331, 318, 341, 320, 83, 830, 829, 334, 339, 338, 332, 335, 342, 337, 304, 48, 273, 274, 280, 278, 279, 276, 277, 275, 272, 241, 240, 251, 243, 242, 249, 247, 256, 269, 255, 257, 245, 244, 246, 248, 270, 254, 253, 271, 250, 261, 266, 258, 260, 259, 283, 268, 262, 263, 264, 265, 267, 234, 235, 230, 231, 238, 227, 229, 239, 237, 228, 232, 236, 233, 252, 226, 225, 217, 343, 344, 354, 345, 346, 348, 349, 353, 352, 351, 504, 81, 355, 347, 179, 178, 358, 359, 85, 356, 697, 699, 696, 176, 177, 175, 698, 181, 301, 302, 82, 303, 811, 84, 813, 812, 70, 777, 89, 544, 778, 779, 787, 786, 807, 783, 781, 782, 785, 784, 806, 788, 780, 791, 789, 790, 802, 801, 800, 798, 799, 804, 803, 817, 796, 797, 795, 794, 793, 827, 810, 808, 809, 805, 494, 792, 312, 815, 814, 71, 816, 658, 86, 357, 317, 67, 700, 311, 314, 563, 818],
            symbols: [153, 154, 148, 147, 156, 150, 149, 152, 155, 151, 3, 4, 5, 6, 7, 8, 9, 10, 11, 2, 641, 644, 1, 645, 119, 120, 118, 113, 642, 643, 646, 21, 20, 22, 23, 18, 19, 614, 38, 37, 670, 671, 24, 25, 17, 29, 28, 30, 31, 117, 116, 143, 610, 611, 612, 141, 145, 138, 139, 142, 604, 307, 157, 160, 162, 164, 163, 161, 170, 168, 169, 165, 159, 836, 834, 835, 837, 839, 825, 823, 135, 69, 822, 166, 167, 158, 34, 843, 845, 846, 844, 171, 128, 127, 137, 144, 140, 820, 640, 603, 824, 826, 832, 828, 833, 80, 99, 102, 104, 88, 100, 517, 146, 601, 602, 132, 133, 136, 134, 518, 115, 68, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 79, 657, 350, 543, 536, 535, 12, 13, 16, 103, 14, 15, 108, 105, 107, 106, 124, 639, 636, 635, 637, 638, 613, 683, 677, 672, 684, 673, 685, 674, 686, 675, 687, 676, 688, 695, 678, 679, 680, 681, 682, 689, 690, 691, 692, 693, 694, 97, 110, 111, 112, 63, 65, 64, 66, 532, 533, 96, 46, 634, 633, 114, 125, 126, 659, 40, 39, 42, 41, 35, 36, 668, 660, 661, 74, 73, 662, 663, 669, 122, 121, 664, 665, 666, 667]
        },
        getInitialState: function() {
            return {
                expanded: dataStore.getItem("emojis_expanded") || !0,
                submenu: dataStore.getItem("emojis_submenu") || "people",
                indices: _.extend(this.indices, {
                    recent: dataStore.getItem("emojis_recent") || []
                })
            }
        },
        toggleExpanded: function() {
            dataStore.setItem("emojis_expanded", !this.state.expanded), this.setState({
                expanded: !this.state.expanded
            })
        },
        toggleSubmenu: function(e) {
            var t = $(e.target).attr("value");
            dataStore.setItem("emojis_submenu", t), this.setState({
                submenu: t
            })
        },
        updateRecent: function(e) {
            var t = e.lastIndexOf("."),
                a = e.lastIndexOf("/") + 1,
                s = e.substr(a, t - a),
                n = this.state.indices;
            n.recent.indexOf(s) > -1 && n.recent.splice(n.recent.indexOf(s), 1), n.recent.unshift(s), n.recent.length > 160 && n.recent.pop(), dataStore.setItem("emojis_recent", n.recent), this.setState({
                indices: n
            })
        },
        addEmoji: function(e) {
            var t = $(e.target).attr("src");
            this.createBlob(t).done(function(e) {
                this.props.add(e), this.updateRecent(t)
            }.bind(this))
        },
        createBlob: function(e) {
            var t = new $.Deferred,
                a = new XMLHttpRequest;
            return a.open("GET", e, !0), a.responseType = "arraybuffer", a.onload = function() {
                var e = new Uint8Array(this.response),
                    a = new Blob([e], {
                        type: "image/png"
                    }),
                    s = window.URL || window.webkitURL,
                    n = s.createObjectURL(a);
                t.resolve(n)
            }, a.send(), t.promise()
        },
        render: function() {
            return React.createElement("div", {
                className: "vidiq-emoji-picker"
            }, this.emojiHeader(), this.emojiMenu())
        },
        getEmojiElement: function(e) {
            return React.createElement("img", {
                key: e,
                src: e,
                className: "emoji",
                onClick: this.addEmoji
            })
        },
        getEmojis: function() {
            if ("recent" === this.state.submenu && _.isEmpty(this.state.indices.recent)) return React.createElement("div", {
                className: "emojis"
            }, "No recent emojis");
            var e = _.map(this.state.indices[this.state.submenu], function(e) {
                var t = this.base + e + ".png";
                return this.getEmojiElement(t)
            }, this);
            return React.createElement("div", {
                className: "emojis"
            }, e)
        },
        emojiHeader: function() {
            var e = classNames("emoji-picker-header", {
                expanded: this.state.expanded
            });
            return React.createElement("div", {
                className: e,
                onClick: this.toggleExpanded
            }, "Emojis")
        },
        emojiSubMenu: function(e, t) {
            var a = classNames("submenu", {
                selected: this.state.submenu === e
            });
            t || (t = this.state.indices[e][0]);
            var s = this.base + t + ".png";
            return React.createElement("div", {
                onClick: this.toggleSubmenu,
                className: a,
                value: e,
                title: e.toUpperCase()
            }, React.createElement("img", {
                src: s,
                className: "submenu-image",
                value: e
            }))
        },
        emojiSubMenus: function() {
            return React.createElement("div", {
                className: "emoji-submenus"
            }, this.emojiSubMenu("recent", 674), this.emojiSubMenu("people"), this.emojiSubMenu("nature"), this.emojiSubMenu("things", 519), this.emojiSubMenu("symbols", 68))
        },
        emojiMenu: function() {
            if (!this.state.expanded) return null;
            var e = this.getEmojis();
            return React.createElement("div", {
                className: "emoji-picker-inner"
            }, this.emojiSubMenus(), e)
        }
    }),
    Expandable = React.createClass({
        displayName: "Expandable",
        propTypes: {
            limit: React.PropTypes.number.isRequired,
            children: React.PropTypes.array.isRequired
        },
        getInitialState: function() {
            return {
                expanded: !1
            }
        },
        toggle: function() {
            this.setState({
                expanded: !this.state.expanded
            })
        },
        render: function() {
            var e = "Show All (" + this.props.children.length + ")",
                t = this.props.children;
            this.state.expanded ? e = "Show Fewer" : t.length > this.props.limit && (t = t.slice(0, this.props.limit));
            var a = React.createElement("button", {
                className: "toggle-expand",
                onClick: this.toggle
            }, e);
            return this.props.children.length <= this.props.limit && (a = null), React.createElement("div", {
                className: "expandable"
            }, React.createElement("div", {
                className: "expandable-inner"
            }, t), a)
        }
    }),
    ExpandableVideoList = React.createClass({
        displayName: "ExpandableVideoList",
        propTypes: {
            videos: React.PropTypes.array.isRequired,
            limit: React.PropTypes.number,
            mayAddKeywords: React.PropTypes.bool,
            namespace: React.PropTypes.string,
            indices: React.PropTypes.bool
        },
        render: function() {
            var e = _.map(this.props.videos, function(e, t) {
                return React.createElement(VideoListItem, {
                    data: e,
                    key: t,
                    index: this.props.indices ? t + 1 : null,
                    mayAddKeywords: this.props.mayAddKeywords,
                    namespace: this.props.namespace
                })
            }, this);
            return React.createElement(Expandable, {
                limit: this.props.limit || 5,
                children: e
            })
        }
    }),
    FeaturedVideoBase = React.createClass({
        displayName: "FeaturedVideoBase",
        propTypes: {
            video: React.PropTypes.object.isRequired
        },
        getInitialState: function() {
            return {
                idle: !0,
                finished: !1,
                successful: !1,
                featureMessage: "Check out my latest video!"
            }
        },
        componentDidMount: function() {
            u.track("Started featuring a video", {
                video: {
                    url: u.getVideoUrl(this.props.video.id),
                    value: this.props.video.title
                },
                message: this.state.featureMessage
            }), Modal.setButtons(["cancel", {
                text: "Feature this video",
                position: "right",
                onClick: this.onSubmit
            }])
        },
        onMessageChange: function(e) {
            this.setState({
                featureMessage: e.target.value
            })
        },
        onSubmit: function() {
            var e = new $.Deferred;
            return this.setState({
                idle: !1
            }), Modal.lock(), FeaturedContentApi.setFeaturedVideo(this.props.video.id, this.state.featureMessage).done(function() {
                u.track("Finished featuring a video", {
                    video: {
                        url: u.getVideoUrl(this.props.video.id),
                        value: this.props.video.title
                    },
                    message: this.state.featureMessage
                }), this.setState({
                    successful: !0
                })
            }.bind(this)).fail(function() {
                u.track("Failed featuring a video", {
                    video: {
                        url: u.getVideoUrl(this.props.video.id),
                        value: this.props.video.title
                    },
                    message: this.state.featureMessage
                })
            }.bind(this)).always(function() {
                return this.setState({
                    idle: !0,
                    finished: !0
                }), Modal.unlock(), Modal.setButtons(["close"]), e.resolve()
            }.bind(this)), e.promise()
        },
        render: function() {
            var e = "https://www.youtube.com/featured_content";
            return React.createElement("div", {
                className: "vidiq-featured-video"
            }, React.createElement("p", null, "Featured content is a free YouTube promotional unit that is displayed near the end of your video. It helps point your viewers to another one of your videos."), React.createElement("p", null, "Enter a message below to see how your featured badge will look."), React.createElement(FeaturedVideoPreview, {
                featureMessage: this.state.featureMessage,
                onMessageChange: this.onMessageChange,
                video: this.props.video,
                idle: this.state.idle,
                finished: this.state.finished
            }), this.state.finished && this.state.successful ? React.createElement("p", {
                className: "vidiq-alert-success"
            }, React.createElement("strong", null, "Success, your video is now featured!"), " To update or remove this featured video, please visit ", React.createElement("a", {
                href: e,
                target: "_blank"
            }, e), ".") : null, this.state.finished && !this.state.successful ? React.createElement("p", {
                className: "vidiq-alert-failure"
            }, React.createElement("strong", null, "Uh oh, your video could not be featured!"), " Note that you may only feature videos if they are public or unlisted. To try manually featuring this video, please visit ", React.createElement("a", {
                href: e,
                target: "_blank"
            }, e), ".") : null)
        }
    }),
    FeaturedVideoPreview = React.createClass({
        displayName: "FeaturedVideoPreview",
        propTypes: {
            featureMessage: React.PropTypes.string.isRequired,
            onMessageChange: React.PropTypes.func.isRequired,
            video: React.PropTypes.object.isRequired,
            idle: React.PropTypes.bool,
            finished: React.PropTypes.bool
        },
        render: function() {
            return React.createElement("div", null, React.createElement("div", {
                className: "featured-video-preview"
            }, React.createElement("div", {
                className: "featured-video-badge"
            }, React.createElement("img", {
                src: this.props.video.thumbnail
            }), React.createElement("p", {
                className: "badge-message"
            }, this.props.featureMessage), React.createElement("p", {
                className: "badge-video-title"
            }, this.props.video.title), React.createElement("span", null, ""))), this.props.finished ? null : React.createElement("div", {
                className: "featured-video-settings"
            }, React.createElement("label", {
                htmlFor: "vidiq-featured-video-message"
            }, "Enter your message:"), React.createElement("input", {
                type: "text",
                id: "vidiq-featured-video-message",
                value: this.props.featureMessage,
                onChange: this.props.onMessageChange,
                disabled: !this.props.idle,
                maxLength: "40",
                autoFocus: !0
            })))
        }
    }),
    FileUploader = React.createClass({
        displayName: "FileUploader",
        propTypes: {
            onUpload: React.PropTypes.func.isRequired,
            accept: React.PropTypes.string
        },
        onDrop: function(e) {
            var t = e[0];
            !t.type && this.props.accept || this.props.onUpload(t)
        },
        render: function() {
            return React.createElement("div", {
                className: "file-uploader"
            }, React.createElement(Dropzone, {
                onDrop: this.onDrop,
                accept: this.props.accept,
                className: "dropzone",
                activeClassName: "dropzone-active",
                rejectClassName: "dropzone-reject"
            }, "Drop file here, or click to browse for files"))
        }
    }),
    Filter = React.createClass({
        displayName: "Filter",
        propTypes: {
            items: React.PropTypes.array.isRequired,
            perPage: React.PropTypes.number,
            generator: React.PropTypes.func,
            getFilterable: React.PropTypes.func,
            filters: React.PropTypes.object.isRequired
        },
        getInitialState: function() {
            return this.getStateFromStores()
        },
        getStateFromStores: function() {
            return FilterStore.getData()
        },
        componentWillReceiveProps: function(e) {
            _.isEqual(e.items, this.props.items) || FilterActions.set(e.items, e.getFilterable)
        },
        componentWillMount: function() {
            FilterActions.set(this.props.items, this.props.getFilterable, !0), FilterStore.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            FilterStore.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState(this.getStateFromStores())
        },
        render: function() {
            return React.createElement("div", {
                className: "filter"
            }, React.createElement(FilterControls, {
                filters: this.props.filters
            }), this.pages(), this.noResults(), this.searching())
        },
        pages: function() {
            return React.createElement(Paginator, {
                items: this.state.matches,
                perPage: this.props.perPage,
                generator: this.props.generator,
                indices: this.state.indices
            })
        },
        noResults: function() {
            return this.state.searching || this.state.matches.length > 0 ? void 0 : React.createElement("div", {
                className: "no-results-found"
            }, "No results found")
        },
        searching: function() {
            return this.state.searching ? React.createElement(Spinner, {
                container: !0
            }) : void 0
        }
    }),
    FilterControls = React.createClass({
        displayName: "FilterControls",
        propTypes: {
            filters: React.PropTypes.object.isRequired
        },
        getInitialState: function() {
            return this.getStateFromStores()
        },
        getStateFromStores: function() {
            var e = FilterStore.getData();
            return {
                searching: e.searching,
                isFiltered: !_.isEmpty(e.filter),
                numMatches: e.matches.length,
                numItems: e.items.length
            }
        },
        componentWillMount: function() {
            FilterStore.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            FilterStore.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState(this.getStateFromStores())
        },
        text: function() {
            if (this.state.isFiltered && !this.state.searching) {
                var e = this.state.numItems,
                    t = this.state.numMatches,
                    a = u.plural(t, "result", "results"),
                    s = u.plural(e, "item", "items"),
                    n = " (" + t + " " + a + ")";
                return React.createElement("span", {
                    className: "text"
                }, "Filter ", e, " ", s, n)
            }
        },
        filters: function() {
            var e = 0,
                t = this.state.searching;
            return _.map(this.props.filters, function(a, s) {
                var n = _.extend({
                    key: e += 1,
                    searching: t
                }, a || {});
                return React.createElement(window[s], n)
            }, this)
        },
        render: function() {
            return React.createElement("div", {
                className: "filter-controls"
            }, this.filters(), this.text())
        }
    }),
    PlaylistFilter = React.createClass({
        displayName: "PlaylistFilter",
        onFilter: function(e) {
            if (!e) return FilterActions.filter({
                id: void 0
            });
            var t = _.pluck(PlaylistsStore.getData().byId[e].videos, "id");
            FilterActions.filter({
                id: {
                    memberOf: t
                }
            })
        },
        render: function() {
            return React.createElement(LoadablePlaylistSelect, {
                onChange: this.onFilter,
                blankText: "Filter by playlist...",
                classes: "playlist-filter filter-block"
            })
        }
    }),
    SearchAndReplaceFilter = React.createClass({
        displayName: "SearchAndReplaceFilter",
        propTypes: {
            doReplace: React.PropTypes.func.isRequired,
            doFilter: React.PropTypes.func.isRequired,
            searching: React.PropTypes.bool
        },
        getInitialState: function() {
            return {
                regex: null,
                replace: null,
                working: !1
            }
        },
        onChange: function(e) {
            this.setState({
                regex: e
            })
        },
        onReplaceChange: function(e) {
            this.setState({
                replace: e.target.value
            })
        },
        doReplace: function() {
            this.setState({
                working: !0
            });
            var e = FilterStore.getData(),
                t = e.matches.length,
                a = 0;
            _.each(e.matches, function(s, n) {
                GrandCentral.push(function() {
                    var i = new $.Deferred;
                    return setTimeout(function() {
                        this.props.doReplace({
                            regex: this.state.regex,
                            replace: this.state.replace || "",
                            item: s,
                            index: e.indices[n]
                        }), i.resolve(), a += 1, a === t && this.setState({
                            working: !1
                        })
                    }.bind(this)), i.promise()
                }.bind(this), "search-and-replace")
            }, this)
        },
        render: function() {
            return React.createElement("div", {
                className: "search-and-replace-filter filter-block"
            }, React.createElement(SearchFilter, {
                placeholder: "Search and replace",
                onChange: this.onChange,
                custom: this.props.doFilter
            }), this.replace())
        },
        replace: function() {
            var e = FilterStore.getData().matches,
                t = e.length > 0,
                a = this.state.working,
                s = a ? "..." : "Replace",
                n = a ? React.createElement(Spinner, {
                    size: "small"
                }) : null;
            return this.state.regex && t && !this.props.searching ? React.createElement("div", {
                className: "replace-matches filter-block"
            }, React.createElement("input", {
                type: "text",
                placeholder: "Replace with...",
                value: this.state.replace,
                onChange: this.onReplaceChange
            }), React.createElement(Button, {
                text: s,
                onClick: this.doReplace,
                disabled: a
            }), n) : void 0
        }
    }),
    SearchFilter = React.createClass({
        displayName: "SearchFilter",
        propTypes: {
            field: React.PropTypes.string,
            placeholder: React.PropTypes.string,
            custom: React.PropTypes.func,
            onChange: React.PropTypes.func
        },
        getInitialState: function() {
            return {
                caseSens: !1
            }
        },
        getRegex: function() {
            var e = this.refs.search.getDOMNode().value;
            return u.string2regex(e, this.state.caseSens ? "" : "i")
        },
        onToggleCaseSens: function() {
            this.setState({
                caseSens: !this.state.caseSens
            }, function() {
                this.onFilter()
            }.bind(this))
        },
        onFilter: _.debounce(function() {
            var e = this.getRegex(),
                t = {};
            this.props.custom ? t._search_custom = e ? function(t, a) {
                return this.props.custom(e, t, a)
            }.bind(this) : void 0 : t = _.object([
                [this.props.field, e]
            ]), this.props.onChange && this.props.onChange(e), FilterActions.filter(t)
        }, 400),
        render: function() {
            var e = "Search " + this.props.field;
            return this.props.placeholder && (e = this.props.placeholder), React.createElement("div", {
                className: "search-filter filter-block"
            }, React.createElement("span", {
                className: "search-icon"
            }, ""), React.createElement("input", {
                ref: "search",
                type: "search",
                placeholder: e,
                onChange: this.onFilter
            }), React.createElement("span", {
                className: "case-sensitive-option"
            }, React.createElement("input", {
                type: "checkbox",
                id: "search-filter-case",
                checked: this.state.caseSens,
                onChange: this.onToggleCaseSens
            }), React.createElement("label", {
                htmlFor: "search-filter-case"
            }, "Case-sensitive?")))
        }
    }),
    GeneralLoader = React.createClass({
        displayName: "GeneralLoader",
        propTypes: {
            text: React.PropTypes.string.isRequired,
            progress: React.PropTypes.number,
            progressKey: React.PropTypes.string,
            loading: React.PropTypes.bool
        },
        render: function() {
            return this.props.loading === !1 ? null : React.createElement("div", {
                className: "react-general-loader"
            }, React.createElement("h2", null, this.props.text), this.progressBar())
        },
        progressBar: function() {
            return isFinite(this.props.progress) ? React.createElement(ProgressBar, {
                key: this.props.progressKey,
                percent: this.props.progress
            }) : void 0
        }
    }),
    GeneralSelector = React.createClass({
        displayName: "GeneralSelector",
        propTypes: {
            classes: React.PropTypes.string,
            values: React.PropTypes.object,
            groups: React.PropTypes.object,
            onChange: React.PropTypes.func,
            defaultValue: React.PropTypes.any,
            disabled: React.PropTypes.bool
        },
        onChange: function(e) {
            this.props.onChange && this.props.onChange(e.target.value)
        },
        getOptions: function(e) {
            var t = 0;
            return _.map(e, function(e, a) {
                return React.createElement("option", {
                    value: a,
                    key: ++t
                }, e)
            })
        },
        content: function() {
            return this.props.values && !this.props.groups ? this.getOptions(this.props.values) : _.map(this.props.groups, function(e, t) {
                return React.createElement("optgroup", {
                    key: t,
                    label: t
                }, this.getOptions(e))
            }.bind(this))
        },
        render: function() {
            return React.createElement("select", {
                className: this.props.classes,
                disabled: this.props.disabled,
                defaultValue: this.props.defaultValue,
                onChange: this.onChange
            }, this.content())
        }
    }),
    Keyword = React.createClass({
        displayName: "Keyword",
        propTypes: {
            onKeywordAdded: React.PropTypes.func,
            kwObject: React.PropTypes.object,
            keyword: React.PropTypes.string,
            rank: React.PropTypes.number,
            li: React.PropTypes.bool,
            addable: React.PropTypes.bool,
            initialAdded: React.PropTypes.bool,
            namespace: React.PropTypes.string,
            tag: React.PropTypes.bool,
            kwins: React.PropTypes.bool,
            customTooltip: React.PropTypes.string
        },
        getInitialState: function() {
            return {
                added: !!this.props.initialAdded || !1
            }
        },
        render: function() {
            var e = this.content();
            return this.props.li ? React.createElement("li", {
                className: "keyword-item"
            }, e) : e
        },
        keywordObject: function() {
            var e = this.props.kwObject;
            return e ? e : {
                keyword: this.props.keyword
            }
        },
        getRankValue: function() {
            var e = this.kwObject || {};
            return this.props.rank || e.rank || e.search_rank
        },
        content: function() {
            var e = this.keywordObject(),
                t = classNames("keyword react-keyword", {
                    "with-search-rank": !!this.getRankValue(),
                    tag: this.props.tag
                }),
                a = void 0 === this.props.kwins || this.props.kwins === !0 ? e.keyword : null;
            return React.createElement("span", {
                className: t,
                "data-keyword": e.keyword,
                "data-tip-message": this.props.customTooltip ? this.props.customTooltip : this.keywordToolTip(e),
                "data-adjust-y": "30",
                "data-follow": "true"
            }, this.getAddButton(), React.createElement("span", {
                className: "keyword-text",
                "data-keyword-addable": this.props.addable,
                "data-keyword-inspector": a,
                "data-keyword-namespace": this.props.namespace,
                "data-keyword-sources": e.sources
            }, React.createElement("span", {
                className: "keyword-inner"
            }, e.keyword), this.getScore()), this.getRank())
        },
        getAddButton: function() {
            var e = this.keywordObject();
            if (this.props.addable) {
                var t = function(t) {
                        this.state.added || (t.preventDefault(), t.stopPropagation(), this.setState({
                            added: !0
                        }), this.props.onKeywordAdded(e.keyword, this.props.namespace, e))
                    }.bind(this),
                    a = classNames("plus-button", {
                        "react-keyword": this.props.tag,
                        added: this.state.added
                    });
                return React.createElement("button", {
                    className: a,
                    title: "Add this keyword",
                    "data-event-value": e.keyword,
                    onClick: t
                }, this.state.added ? "" : "+")
            }
        },
        getScore: function() {
            var e = this.keywordObject();
            if (e.score || e.overall) {
                var t = e.score || e.overall;
                return React.createElement("b", {
                    className: "score"
                }, numbro(t).format("0.0"))
            }
            return null
        },
        getRank: function() {
            var e = this.keywordObject(),
                t = this.getRankValue();
            return t ? React.createElement("span", {
                className: "search-rank",
                "data-tip-message": "What this video ranks for in YouTube Search when searching for this keyword",
                "data-follow": "true",
                "data-keyword-addable": this.props.addable,
                "data-keyword-inspector": e.keyword,
                "data-keyword-namespace": this.props.namespace,
                "data-keyword-sources": e.sources
            }, React.createElement("span", {
                className: "number-symbol"
            }, "#"), t) : null
        },
        keywordToolTip: function(e) {
            var t = ["Overall", "Monthly Searches", "Volume", "Competition"];
            t = _.compact(_.map(t, function(t) {
                var a = t.toLowerCase();
                "Monthly Searches" === t && (a = "estimated_monthly_search");
                var s = e[a];
                if (_.isNumber(s) && isFinite(s)) return s = numbro(s).format("0,0"), "Monthly Searches" === t && ("0" === s ? s = "< 1,500" : "15,000,000" === s ? s += "+" : s = " " + s), "Overall" === t && (s = "<span class='score'>" + s + "</span>"), [t, s].join(": ")
            }));
            var a = _.chain(e.query_shares).map(function(e, t) {
                    return {
                        value: e,
                        input: t,
                        text: t
                    }
                }).sortBy(function(e) {
                    return -e.value
                }).pluck("text").value(),
                s = "<div>Related to:<br />" + a.join("<br>") + "</div>",
                n = t.join("<br>");
            return a.length > 1 && n.length && (n += "<br><br>"), a.length > 1 && (n += s), n.length ? n : void 0
        }
    }),
    KeywordList = React.createClass({
        displayName: "KeywordList",
        propTypes: {
            keywords: React.PropTypes.array.isRequired,
            channel: React.PropTypes.bool,
            getData: React.PropTypes.bool,
            classes: React.PropTypes.string,
            addable: React.PropTypes.bool,
            namespace: React.PropTypes.string,
            kwins: React.PropTypes.bool,
            onKeywordAdded: React.PropTypes.func
        },
        getInitialState: function() {
            return this.store = KeywordDataStore, {
                store: this.store.getData()
            }
        },
        componentWillReceiveProps: function(e) {
            this.props.getData && KeywordDataActions.fetchKeywordData(e.keywords)
        },
        componentWillMount: function() {
            this.props.getData && KeywordDataActions.fetchKeywordData(this.props.keywords), this.store.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        getKeywords: function() {
            return _.map(this.props.keywords, function(e, t) {
                var a;
                return _.isObject(e) ? (a = e, e = a.keyword || a.text, a = _.extend({}, a, {
                    keyword: e
                })) : a = this.state.store[e] || {
                    keyword: e
                }, React.createElement("li", {
                    key: e + "-" + t
                }, React.createElement(Keyword, {
                    kwObject: a,
                    rank: a.search_rank,
                    addable: this.props.addable,
                    namespace: this.props.namespace,
                    kwins: this.props.kwins,
                    onKeywordAdded: this.props.onKeywordAdded
                }))
            }.bind(this))
        },
        render: function() {
            if (this.props.channel) {
                var e = _.map(this.props.keywords, function(e, t) {
                    return React.createElement(Keyword, {
                        keyword: e,
                        key: t
                    })
                });
                return React.createElement("div", {
                    className: "keyword-list"
                }, e)
            }
            return React.createElement("ul", {
                className: this.props.classes
            }, this.getKeywords())
        }
    }),
    KeywordRank = React.createClass({
        displayName: "KeywordRank",
        propTypes: {
            rank: React.PropTypes.number.isRequired
        },
        render: function() {
            var e = "What this video ranks for in YouTube Search when searching for this keyword";
            return React.createElement("span", {
                className: "search-rank",
                "data-tip-message": e,
                "data-follow": !0
            }, React.createElement("span", {
                className: "number-symbol"
            }, "#"), this.props.rank)
        }
    }),
    KeywordScore = React.createClass({
        displayName: "KeywordScore",
        propTypes: {
            compvol: React.PropTypes.object.isRequired
        },
        compvolTooltip: function() {
            var e = this.props.compvol,
                t = "Overall Volume Competition".split(" ");
            t = _.compact(_.map(t, function(t) {
                var a = e[t.toLowerCase()];
                if (_.isNumber(a) && isFinite(a)) return a = u.precision(a, 1), "Overall" === t && (a = "<span class='score'>" + a + "</span>"), [t, a].join(": ")
            }));
            var a = t.join("<br>");
            return a.length ? a : void 0
        },
        render: function() {
            var e = this.props.compvol,
                t = u.precision(e.overall, 1);
            if (!t) return null;
            var a = this.compvolTooltip();
            return React.createElement("span", {
                className: "keyword-text",
                "data-tip-message": a
            }, React.createElement("b", {
                className: "score",
                "data-value": e.overall
            }, t))
        }
    }),
    LanguageSelector = React.createClass({
        displayName: "LanguageSelector",
        propTypes: {
            classes: React.PropTypes.string,
            onChange: React.PropTypes.func,
            defaultValue: React.PropTypes.any,
            disabled: React.PropTypes.bool
        },
        onChange: function(e) {
            this.props.onChange && this.props.onChange(e, "language")
        },
        render: function() {
            var e = HotSearch.defaults.languages,
                t = this.props.disabled ? _.pick(e, this.props.defaultValue) : e;
            return React.createElement(GeneralSelector, {
                onChange: this.onChange,
                disabled: this.props.disabled,
                classes: this.props.classes,
                defaultValue: this.props.defaultValue,
                values: t
            })
        }
    }),
    LoadablePlaylistSelect = React.createClass({
        displayName: "LoadablePlaylistSelect",
        propTypes: {
            onChange: React.PropTypes.func.isRequired,
            defaultValue: React.PropTypes.string,
            blankText: React.PropTypes.string,
            classes: React.PropTypes.string,
            loadOnInit: React.PropTypes.bool
        },
        getDefaultProps: function() {
            return {
                blankText: "Choose a playlist"
            }
        },
        getInitialState: function() {
            return this.getStateFromStores()
        },
        getStateFromStores: function() {
            var e = PlaylistsStore.getData();
            return {
                time: this.state ? this.state.time : 0,
                playlists: e,
                playlistOptions: this.getPlaylistOptions(e.resources)
            }
        },
        componentDidUpdate: function() {
            setTimeout(this.updateTime)
        },
        componentWillMount: function() {
            var e = this.state.playlists.resources,
                t = !this.state.playlists.loading && _.isEmpty(e);
            t && this.props.loadOnInit && PlaylistsActions.fetch(), PlaylistsStore.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            this._unmounted = !0, PlaylistsStore.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            var e = this.getStateFromStores();
            this.setState(e)
        },
        updateTime: function(e) {
            var t = this._ut && !e,
                a = this.state.playlists.loading;
            return !a || this._unmounted || t ? void(a || (this._ut = !1)) : (this._ut = !0, this.setState({
                time: this.state.time + 1
            }), void setTimeout(function() {
                this.updateTime(!0)
            }.bind(this), 400))
        },
        getPlaylistOptions: function(e) {
            var t = !this.state || _.isEmpty(this.state.playlistOptions);
            if (!t || 0 === e.length) return (this.state || {}).playlistOptions || {};
            var a = {
                "": this.props.blankText
            };
            return _.extend(a, _.object(_.compact(_.map(e, function(e) {
                var t = e.videos.length;
                if (0 !== t) return [e.id, e.title + " (" + t + ")"]
            })))), a
        },
        ellipsis: function() {
            var e = "&#x2008",
                t = _.range(this.state.time % 4),
                a = _.range(3 - t.length),
                s = _.map(t, function() {
                    return "."
                }).join(""),
                n = _.map(a, function() {
                    return e
                }).join("");
            return s + n
        },
        render: function() {
            var e = this.state.playlistOptions;
            if (_.isEmpty(e)) return this.loadPlaylists();
            var t = "loadable-playlist-select",
                a = _.compact([t, this.props.classes]).join(" ");
            return React.createElement("div", {
                className: a
            }, React.createElement(GeneralSelector, {
                defaultValue: this.props.defaultValue,
                values: e,
                onChange: this.props.onChange
            }))
        },
        loadPlaylists: function() {
            var e = this.state.playlists.loading,
                t = e ? "Loading" + this.ellipsis() : "Load Playlists";
            return React.createElement(Button, {
                onClick: PlaylistsActions.fetch,
                text: t,
                disabled: e,
                setInnerHTML: !0,
                secondary: !0
            })
        }
    }),
    LoadingPane = React.createClass({
        displayName: "LoadingPane",
        statics: {
            show: function(e, t) {
                return e ? React.createElement(LoadingPane, {
                    spinner: t
                }) : null
            }
        },
        propTypes: {
            spinner: React.PropTypes.bool
        },
        render: function() {
            var e = this.props.spinner ? React.createElement(Spinner, null) : null;
            return React.createElement("div", {
                className: "react-loading-pane"
            }, React.createElement("div", {
                className: "pane-container"
            }, e))
        }
    }),
    EditableVideoThumbnail = React.createClass({
        displayName: "EditableVideoThumbnail",
        propTypes: {
            video: React.PropTypes.object.isRequired,
            selected: React.PropTypes.bool,
            toggleSelected: React.PropTypes.func
        },
        getInitialState: function() {
            return this.getState()
        },
        getState: function() {
            return {
                video: TemporaryStore.ensure(this.props.video.id, this.props.video)
            }
        },
        componentWillMount: function() {
            TemporaryStore.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            TemporaryStore.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState(this.getState())
        },
        getVideo: function() {
            return this.props.selected ? this.state.video : this.props.video
        },
        onMakeCanvas: function(e, t) {
            var a = this.props.video.id;
            e === a && TemporaryActions.set(this.props.video.id, t)
        },
        render: function() {
            return React.createElement("div", {
                className: "vidiq-thumbnail-editor mass-edit-thumbnails"
            }, React.createElement(EditThumbnail, {
                width: 650,
                height: 365,
                videoId: this.props.video.id,
                onMakeCanvas: this.onMakeCanvas
            }))
        }
    }),
    MassEditThumbnails = React.createClass({
        displayName: "MassEditThumbnails",
        steps: ["MassEditThumbnailsInit", "MassEditThumbnailsChoose", "MassEditThumbnailsProcess"],
        render: function() {
            return React.createElement(Modal, {
                title: "Mass Edit Thumbnails",
                footer: !1,
                size: "large"
            }, React.createElement(Wizard, {
                ref: "wizard",
                classes: "mass-edit-thumbnails",
                steps: this.steps,
                legacy: !1
            }))
        }
    }),
    MassEditThumbnailsChoose = React.createClass({
        displayName: "MassEditThumbnailsChoose",
        namespace: "mass-edit-thumbnails",
        statics: {
            enterStep: function() {
                VideoBufferActions.fetch(), VideoBufferActions.registerScraping(), VideoBufferActions.ensureScrapedData()
            },
            canChangeStep: function() {
                var e = VideoBufferStore;
                if (!e.isLoading() && !e.isScraping()) return ChoicesStore.id("mass-edit-thumbnails").hasSelections() ? "all" : "back"
            }
        },
        getInitialState: function() {
            return this.choicesStore = ChoicesStore.id(this.namespace), this.getState()
        },
        getState: function() {
            return {
                vbStore: VideoBufferStore.getData(),
                choices: this.choicesStore.getData()
            }
        },
        componentWillMount: function() {
            VideoBufferStore.addChangeListener(this.onVideosChange), this.choicesStore.addChangeListener(this.onChoicesChange)
        },
        componentWillUnmount: function() {
            VideoBufferStore.removeChangeListener(this.onVideosChange), this.choicesStore.removeChangeListener(this.onChoicesChange)
        },
        onVideosChange: function() {
            var e = VideoBufferStore.getData();
            this.setState({
                vbStore: e
            }), 1 !== e.progress || this._startingScraping || (VideoBufferActions.ensureScrapedData(), this._startingScraping = !0)
        },
        onChoicesChange: function() {
            this.setState({
                choices: this.choicesStore.getData()
            })
        },
        getLoading: function() {
            return this.state.vbStore.loading || this.state.vbStore.scraping
        },
        getProgress: function() {
            var e = this.state.vbStore;
            return e.loading ? e.progress : e.scrapingP
        },
        getLoadingText: function() {
            var e = this.state.vbStore.videos.length;
            return 0 === e && (e = ""), this.state.vbStore.loading ? "Loading videos... " + e : "Loading video data..."
        },
        getFilters: function() {
            var e = ["description", "title"];
            return {
                SearchAndReplaceFilter: {
                    doFilter: function(t, a) {
                        var s = !1;
                        return _.each(e, function(e) {
                            a[e].match(t) && (s = !0)
                        }), s
                    },
                    doReplace: function(t) {
                        var a = t.item,
                            s = TemporaryStore.get(a.id),
                            n = _.extend({}, a, s);
                        _.each(e, function(e) {
                            a[e].match(t.regex) && (n[e] = a[e].replace(t.regex, t.replace))
                        }), TemporaryActions.set(a.id, n), this.choicesStore.actions.select(t.index)
                    }.bind(this)
                }
            }
        },
        clearPendingEdits: function() {
            this.choicesStore.actions.clear(), TemporaryActions.clear()
        },
        getStatus: function() {
            var e = this.state.choices.length;
            if (0 !== e) return React.createElement("div", {
                className: "modal-status"
            }, e, " ", u.plural(e, "item"), " selected")
        },
        render: function() {
            var e = this.getLoading(),
                t = VideoBufferStore.isLoading() ? "loading" : "scraping";
            return React.createElement("div", null, React.createElement(GeneralLoader, {
                text: this.getLoadingText(),
                loading: e,
                progressKey: t,
                progress: this.getProgress()
            }), e ? null : this.content(), this.props.footer())
        },
        content: function() {
            return React.createElement("div", null, React.createElement("div", {
                className: "react-general-actions"
            }, React.createElement(Button, {
                text: "Clear Pending Edits",
                secondary: !0,
                disabled: this.state.choices.length <= 0,
                onClick: this.clearPendingEdits
            })), React.createElement(StoreChooser, {
                items: this.state.vbStore.videos,
                perPage: 10,
                generator: this.generator,
                namespace: this.namespace,
                filters: this.getFilters()
            }), this.getStatus())
        },
        generator: function(e, t) {
            return React.createElement(VideoFrame, {
                key: t.index,
                video: e,
                selected: t.selected,
                toggleSelected: t.toggleSelected
            }, React.createElement(EditableVideoThumbnail, {
                video: e,
                selected: t.selected,
                toggleSelected: t.toggleSelected
            }))
        }
    }),
    MassEditThumbnailsInit = React.createClass({
        displayName: "MassEditThumbnailsInit",
        statics: {
            canChangeStep: function() {
                return VideoBufferStore.ok() && !VideoBufferStore.isLoading() ? "all" : void 0
            }
        },
        componentWillMount: function() {
            VideoBufferStore.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            VideoBufferStore.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.forceUpdate()
        },
        render: function() {
            return React.createElement("div", null, React.createElement(VideoBufferController, null), this.props.footer())
        }
    }),
    MassEditThumbnailsProcess = React.createClass({
        displayName: "MassEditThumbnailsProcess",
        statics: {
            customButtons: function(e, t) {
                var a = BulkProcessor.instance;
                if (a) {
                    if (a.state.finished) return [t, "close"];
                    if (a.isBusy()) return [t]
                }
                return [t, {
                    text: "I'm ready, make my changes!",
                    onClick: function() {
                        BulkProcessor.instance.startProcessing()
                    },
                    position: "right"
                }]
            }
        },
        getInitialState: function() {
            return {
                payload: this.buildPayload()
            }
        },
        buildPayload: function() {
            var e = VideoBufferStore.getData(),
                t = TemporaryStore.getData(),
                a = ChoicesStore.id("mass-edit-thumbnails").getData(),
                s = _.map(a, function(a) {
                    var s = e.videos[a];
                    return t[s.id]
                });
            return log("canvases", t), log("meme central:", s), s
        },
        onComplete: function() {
            u.track("Finished mass edit thumbnails")
        },
        execute: function(e) {
            var t = this.state.payload[e];
            log(e, t);
            var a = t.toDataUrl(),
                s = dataUrlToBlob(a);
            return u.getAuthToken().done(function(e) {
                return MyVideos.thumbnail(t.videoId, s, e)
            })
        },
        render: function() {
            var e = u.plural(this.state.payload.length, "thumbnail", "thumbnails"),
                t = React.createElement("b", null, "Success, your selected ", e, " have been modified!");
            return React.createElement("div", null, React.createElement(BulkProcessor, {
                videos: this.state.payload,
                execute: this.execute,
                task: "edit thumbnails",
                preposition: "for",
                successMsg: t,
                failMsgFn: this.failMsgFn,
                urlFn: this.urlFn,
                onComplete: this.onComplete
            }), this.props.footer())
        },
        failMsgFn: function(e) {
            var t = u.plural(e, "video", "videos");
            return React.createElement("span", null, React.createElement("strong", null, e, " ", t, " failed to be modified."), "Please check the videos in the above list to see which ones were not updated.")
        },
        urlFn: function(e) {
            return "/watch?v=" + e
        }
    }),
    MEVR_CheckboxField = React.createClass({
        displayName: "MEVR_CheckboxField",
        propTypes: {
            id: React.PropTypes.string.isRequired,
            deleted: React.PropTypes.bool,
            onChange: React.PropTypes.func.isRequired
        },
        render: function() {
            return React.createElement("span", {
                className: "delete-checkbox"
            }, React.createElement("input", {
                id: this.props.id,
                type: "checkbox",
                checked: this.props.checked,
                onChange: this.props.onChange
            }), React.createElement("label", {
                htmlFor: this.props.id
            }, "Delete"))
        }
    }),
    MEVR_Resource = React.createClass({
        displayName: "MEVR_Resource",
        propTypes: {
            resource: React.PropTypes.object.isRequired,
            video: React.PropTypes.object,
            editableResource: React.PropTypes.object.isRequired,
            deleted: React.PropTypes.bool,
            selected: React.PropTypes.bool,
            onToggleSelection: React.PropTypes.func.isRequired,
            onToggleDeletion: React.PropTypes.func.isRequired
        },
        render: function() {
            var e = this.props.resource,
                t = e instanceof CardItem ? "card" : "annotation",
                a = this.props.selected && !this.props.deleted,
                s = this.props.onToggleSelection;
            this.props.deleted && (s = function() {});
            var n = {
                    data: a ? this.props.editableResource : e,
                    selected: this.props.selected,
                    editRequiresSelection: !0,
                    onToggleSelection: s,
                    videoDuration: this.props.video ? this.props.video.duration : null,
                    massEdit: !0
                },
                i = "Editable" + u.capitalize(t),
                o = React.createElement(window[i], n),
                r = classNames("item", "item-" + i, {
                    "item-selected": a,
                    "item-deleted": this.props.deleted
                });
            return React.createElement("div", {
                className: r
            }, React.createElement(MEVR_CheckboxField, {
                id: e._uid,
                checked: this.props.deleted,
                onChange: this.props.onToggleDeletion
            }), o)
        }
    }),
    MEVR_Video = React.createClass({
        displayName: "MEVR_Video",
        propTypes: {
            video: React.PropTypes.object.isRequired,
            resources: React.PropTypes.object.isRequired,
            isDeleted: React.PropTypes.func.isRequired,
            isSelected: React.PropTypes.func.isRequired,
            getEditable: React.PropTypes.func.isRequired,
            getOnToggleSelection: React.PropTypes.func.isRequired,
            getOnToggleDeletion: React.PropTypes.func.isRequired
        },
        render: function() {
            var e = this.getResources("card"),
                t = this.getResources("annotation"),
                a = e[1] || t[1];
            return React.createElement(VideoFrame, {
                video: this.props.video,
                content: [e[0], t[0]],
                indicator: a
            })
        },
        getResources: function(e) {
            var t = this.props.resources[e],
                a = !1,
                s = _.map(t, function(e, t) {
                    var s = this.props.isDeleted(e._uid, e),
                        n = this.props.isSelected(e._uid, e);
                    return (s || n) && (a = !0), React.createElement(MEVR_Resource, {
                        key: t,
                        resource: e,
                        video: this.props.video,
                        editableResource: this.props.getEditable(e._uid),
                        deleted: s,
                        selected: n,
                        onToggleSelection: this.props.getOnToggleSelection(e._uid, e),
                        onToggleDeletion: this.props.getOnToggleDeletion(e._uid, e)
                    })
                }, this);
            return [s, a]
        }
    }),
    MassEditVideoResources = React.createClass({
        displayName: "MassEditVideoResources",
        steps: ["MassEditVideoResourcesInit", "MassEditVideoResourcesChoose", "BulkProcessor"],
        getInitialState: function() {
            var e = AnnotationsStore.getData(),
                t = CardsStore.getData();
            return {
                videos: VideoBufferStore.getVideos(),
                relevantVideos: [],
                annotations: e,
                cards: t,
                selected: {
                    card: [],
                    annotation: []
                },
                deleted: {
                    card: [],
                    annotation: []
                },
                editedResources: {},
                payload: [],
                needsPayload: !0,
                mode: "all",
                running: !1,
                done: !1
            }
        },
        componentWillMount: function() {
            VideoBufferStore.addChangeListener(this.onStoreChange), CardsStore.addChangeListener(this.onStoreChange), CardsStore.addChangeListener(this.prepareResources), AnnotationsStore.addChangeListener(this.onStoreChange), AnnotationsStore.addChangeListener(this.prepareResources), this.prepareResources()
        },
        componentWillUnmount: function() {
            VideoBufferStore.removeChangeListener(this.onStoreChange), CardsStore.removeChangeListener(this.onStoreChange), CardsStore.removeChangeListener(this.prepareResources), AnnotationsStore.removeChangeListener(this.onStoreChange), AnnotationsStore.removeChangeListener(this.prepareResources), AnnotationsActions.cancel(), CardsActions.cancel(), VideoBufferActions.cancel()
        },
        meta: function e() {
            var t = this.state,
                a = _.values(t.cards.resources),
                s = _.values(t.annotations.resources),
                n = t.cards.flat,
                i = t.annotations.flat,
                e = {
                    videoCount: VideoBufferStore.getTotal(),
                    loadingVideos: VideoBufferStore.isLoading(),
                    loadingResources: t.annotations.loading || t.cards.loading,
                    hasResources: n.length > 0 || i.length > 0,
                    numVideos: t.videos.length,
                    numCardGroups: a.length,
                    numCards: n.length,
                    numAnnGroups: s.length,
                    numAnnotations: i.length,
                    mode: t.mode,
                    cards: t.cards.resources,
                    annotations: t.annotations.resources
                };
            switch (e.numEditedCards = this.state.selected.card.length, e.numEditedAnns = this.state.selected.annotation.length, e.numDeletedCards = this.state.deleted.card.length, e.numDeletedAnns = this.state.deleted.annotation.length, e.numSelectedCards = e.numEditedCards + e.numDeletedCards, e.numSelectedAnns = e.numEditedAnns + e.numDeletedAnns, e.numDeleted = e.numDeletedAnns + e.numDeletedCards, e.numReqSelected = e.numSelectedCards + e.numSelectedAnns, e.numReqEdited = e.numEditedCards + e.numEditedAnns, e.hasReqSelection = e.numSelectedCards > 0 || e.numSelectedAnns > 0, t.mode) {
                case "card":
                    e.hasReqResources = n.length > 0, e.hasReqSelection = e.numSelectedCards > 0, e.numReqSelected = e.numSelectedCards, e.numReqEdited = e.numEditedCards;
                    break;
                case "annotation":
                    e.hasReqResources = i.length > 0, e.hasReqSelection = e.numSelectedAnns > 0, e.numReqSelected = e.numSelectedAnns, e.numReqEdited = e.numEditedAnns;
                    break;
                case "all":
            }
            return "all" === t.mode && (e.hasReqResources = e.hasResources), "card" === t.mode && (e.hasReqResources = a.length > 0), "annotation" === t.mode && (e.hasReqResources = s.length > 0), e.loading = e.loadingVideos || e.loadingResources || this._willFetchResources, e.progress = this.getProgress(e), e.taskString = this.getTaskString(e), e
        },
        getCurrentStep: function() {
            var e = this.refs.wizard;
            return e ? e.getCurrentStep() : null
        },
        getRelevantVideos: function() {
            var e = this.meta(),
                t = e.mode,
                a = e.cards,
                s = e.annotations,
                n = [];
            return _.each(this.state.relevantVideos, function(e) {
                var i = this.state.videos[e];
                i && ("card" === t && 0 === a[i.id].length || "annotation" === t && 0 === s[i.id].length || n.push(i))
            }, this), n
        },
        getTaskString: function(e) {
            var t = [];
            if (e.numEditedAnns > 0 && t.push("edit " + e.numEditedAnns + " " + u.plural(e.numEditedAnns, "annotation", "annotations")), e.numDeletedAnns > 0 && t.push("delete " + e.numDeletedAnns + " " + u.plural(e.numDeletedAnns, "annotation", "annotations")), e.numEditedCards > 0 && t.push("edit " + e.numEditedCards + " " + u.plural(e.numEditedCards, "card", "cards")), e.numDeletedCards > 0 && t.push("delete " + e.numDeletedCards + " " + u.plural(e.numDeletedCards, "card", "cards")), t.length > 0) {
                var a = t.length > 2 ? "," : "",
                    s = t.pop();
                return _.compact([t.join(", "), s]).join(a + " and ")
            }
        },
        getPayload: function() {
            var e = [];
            return _.each(this.state.videos, function(t) {
                var a = this.getResourcesForVideo(t.id, !0);
                a.length && e.push({
                    video: t,
                    resources: a
                })
            }, this), e
        },
        getProgress: function(e) {
            if (e.loadingVideos) return isFinite(e.videoCount) && e.videoCount ? Math.min(e.numVideos / e.videoCount, 1) : NaN;
            var t = {
                    annotation: Math.min(e.numAnnGroups / e.videoCount, 1),
                    card: Math.min(e.numCardGroups / e.videoCount, 1)
                },
                a = (t.annotation + t.card) / 2;
            return t[this.state.mode] || a
        },
        getResourcesForVideo: function(e, t) {
            var a = this.state,
                s = [],
                n = ["card", "annotation"];
            if ("all" !== a.mode && (n = [a.mode]), _.each(n, function(t) {
                    var n = a[t + "s"].resources;
                    s = s.concat(n[e] || [])
                }), !t) return s;
            var i = [];
            return _.each(s, function(e) {
                var t = e instanceof CardItem ? "card" : "annotation",
                    s = a.selected[t].indexOf(e._uid) >= 0,
                    n = a.deleted[t].indexOf(e._uid) >= 0;
                (s || n) && i.push(e)
            }), i
        },
        getResourceFlag: function(e, t, a) {
            return this.state[e][t].indexOf(a) >= 0
        },
        getAllResources: function() {
            var e = [];
            return _.each(["annotations", "cards"], function(t) {
                _.each(this.state[t].resources, function(t, a) {
                    e = e.concat(t)
                })
            }, this), e
        },
        toggleResourceFlag: function(e, t, a) {
            var s = this.state[e][t],
                n = s.indexOf(a);
            0 > n ? s.push(a) : s.splice(n, 1), "deleted" === e && this.getResourceFlag("selected", t, a) && this.toggleResourceFlag("selected", t, a), this.setState(_.extend(_.object([
                [e, this.state[e]]
            ]), {
                needsPayload: !0
            }))
        },
        execute: function(e) {
            var t = new $.Deferred,
                a = this.state.payload,
                s = a[e].resources,
                n = [],
                i = 0;
            return _.each(s, function(e) {
                var a = this.state.editedResources[e._uid];
                this.processItem(a).fail(function(e) {
                    n.push(e)
                }).always(function() {
                    i += 1, i === s.length && setTimeout(function() {
                        n.length > 0 ? t.reject(n) : t.resolve()
                    }, 100)
                })
            }, this), t.promise()
        },
        processItem: function(e) {
            var t = e instanceof CardItem ? "card" : "annotation",
                a = "card" === t ? CardsActions : AnnotationsActions,
                s = this.getResourceFlag("deleted", t, e._uid);
            return s ? a["delete"](e) : a.update(e)
        },
        prepareResources: function(e) {
            if ("BulkProcessor" !== this.getCurrentStep()) {
                var t = AnnotationsStore.getData(),
                    a = CardsStore.getData(),
                    s = this.state.relevantVideos,
                    n = this.state.editedResources,
                    i = t.flat,
                    o = a.flat,
                    r = [];
                switch (this.state.mode) {
                    case "all":
                        r = i.concat(o);
                        break;
                    case "card":
                        r = o;
                        break;
                    case "annotation":
                        r = i
                }
                var c = _.pluck(this.state.videos, "id");
                _.each(r, function(t) {
                    if (!n[t._uid] || e) {
                        n[t._uid] = t.clone();
                        var a = c.indexOf(t._videoId);
                        s.indexOf(a) < 0 && s.push(a)
                    }
                }), this.setState({
                    relevantVideos: s,
                    editedResources: n
                })
            }
        },
        toggleDeleteAll: function(e) {
            var t = this.state.mode,
                a = "all" === t ? ["card", "annotation"] : [t],
                s = 0,
                n = FilterStore.getData(),
                i = !_.isEmpty(n.filter),
                o = {};
            _.each(a, function(e) {
                s += this.state.deleted[e].length
            }, this), i && _.each(n.matches, function(e) {
                _.each(a, function(t) {
                    var a = _.pluck(this.state[t + "s"].resources[e.id], "_uid");
                    o[t] || (o[t] = []), o[t] = o[t].concat(a)
                }, this)
            }, this), _.each(a, function(t) {
                if (0 === s) {
                    var a;
                    a = i ? o[t] : _.pluck(this.state[t + "s"].flat, "_uid"), "function" == typeof e && (a = e(a) || []), this.state.deleted[t] = a, this.state.selected[t] = []
                } else this.state.deleted[t] = []
            }, this), this.setState({
                deleted: this.state.deleted,
                selected: this.state.selected
            })
        },
        clearPendingDels: function() {
            this.state.deleted.card = [], this.state.deleted.annotation = [], this.setState({
                deleted: this.state.deleted
            })
        },
        clearPendingEdits: function() {
            var e = _.object(_.map(this.state.selected, function(e, t) {
                return [t, []]
            }));
            this.setState({
                selected: e
            }), this.prepareResources(!0)
        },
        onStart: function() {
            Modal.lock(), this.setState({
                running: !0
            }), this.refs.wizard.refs.child.startProcessing()
        },
        onStoreChange: function() {
            var e = VideoBufferStore.getVideos(),
                t = AnnotationsStore.getData(),
                a = CardsStore.getData(),
                s = _.pluck(this.state.videos, "id");
            _.difference(s, _.pluck(e, "id")).length > 0 && (this._willFetchResources = !0), this.setState({
                videos: e,
                annotations: t,
                cards: a
            }, function() {
                _.defer(function() {
                    this.fetchNeededResources()
                }.bind(this))
            })
        },
        onBulkProcessorComplete: function() {
            this.setState({
                running: !1,
                done: !0
            }), Modal.unlock()
        },
        fetchVideos: function() {
            VideoBufferActions.fetch()
        },
        fetchNeededResources: function() {
            var e = this.meta(),
                t = "MassEditVideoResourcesChoose" === this.getCurrentStep();
            if (this._willFetchResources = !1, t && e.mode && !e.loadingVideos) {
                var a = _.pluck(this.state.videos, "id"),
                    s = ["card", "annotation"];
                "all" !== e.mode && (s = [e.mode]), _.each(s, function(e) {
                    if (!this.state[e + "s"].loading) {
                        var t = this.state[e + "s"].resources,
                            s = _.difference(a, _.keys(t)),
                            n = "card" === e ? CardsActions : AnnotationsActions;
                        s.length && n.fetch(s)
                    }
                }, this)
            }
        },
        childProps: function(e) {
            switch (e) {
                case "MassEditVideoResourcesInit":
                    return {
                        annotations: this.state.annotations,
                        cards: this.state.cards,
                        mode: this.state.mode,
                        changeMode: function(e) {
                            this.setState({
                                mode: e,
                                selected: {
                                    card: [],
                                    annotation: []
                                },
                                deleted: {
                                    card: [],
                                    annotation: []
                                },
                                editedResources: [],
                                needsPayload: !0
                            }), this.state.relevantVideos = [], this.state.editedResources = [], this.state.mode = e, this.prepareResources()
                        }.bind(this)
                    };
                case "MassEditVideoResourcesChoose":
                    return {
                        parent: this,
                        meta: this.meta(),
                        toggleDeleteAll: this.toggleDeleteAll,
                        clearPendingDels: this.clearPendingDels,
                        clearPendingEdits: this.clearPendingEdits
                    };
                case "BulkProcessor":
                    var t = _.flatten(_.pluck(this.state.payload, "video")),
                        a = this.meta(),
                        s = a.numReqSelected,
                        n = u.plural(s, "resource", "resources");
                    return {
                        videos: t,
                        execute: this.execute,
                        task: a.taskString,
                        preposition: "for",
                        onComplete: this.onBulkProcessorComplete,
                        successMsg: React.createElement("strong", null, "Success, your selected ", n, " have been modified!"),
                        failMsgFn: function(e) {
                            return React.createElement("span", null, React.createElement("strong", null, e, " ", n, " failed to be modified."), "Please check the videos in the above list to see which ones were not updated.")
                        },
                        urlFn: function(e) {
                            return "/watch?v=" + e
                        }
                    }
            }
        },
        canChangeStep: function(e) {
            var t = this.meta(),
                a = t.loading && "MassEditVideoResourcesInit" !== e;
            if (this.state.mode && !a && VideoBufferStore.ok()) {
                switch (e) {
                    case "MassEditVideoResourcesChoose":
                        if (!t.hasReqSelection) return "back"
                }
                return "all"
            }
        },
        enterStep: function(e) {
            switch (e) {
                case "MassEditVideoResourcesChoose":
                    this.fetchVideos(), this.fetchNeededResources();
                    break;
                case "BulkProcessor":
                    this.state.needsPayload && this.setState({
                        payload: this.getPayload(),
                        needsPayload: !1
                    })
            }
        },
        customButtons: function(e, t) {
            return this.state.running ? [] : this.state.done ? ["close"] : "BulkProcessor" === e ? [t, {
                text: "I'm ready, make my changes!",
                onClick: this.onStart,
                position: "right"
            }] : void 0
        },
        render: function() {
            return React.createElement(Wizard, {
                ref: "wizard",
                classes: "mass-edit-video-resources",
                steps: this.steps,
                childProps: this.childProps,
                canChangeStep: this.canChangeStep,
                customButtons: this.customButtons,
                enterStep: this.enterStep
            })
        }
    }),
    MassEditVideoResourcesChoose = React.createClass({
        displayName: "MassEditVideoResourcesChoose",
        propTypes: {
            meta: React.PropTypes.object,
            parent: React.PropTypes.object,
            toggleDeleteAll: React.PropTypes.func,
            clearPendingDels: React.PropTypes.func,
            clearPendingEdits: React.PropTypes.func
        },
        componentWillMount: function() {
            FilterStore.addChangeListener(this.onFilterChange)
        },
        componentWillUnmount: function() {
            FilterStore.removeChangeListener(this.onFilterChange)
        },
        onFilterChange: function() {
            FilterStore.getData().filterChanged && (this.props.clearPendingDels(), this.props.clearPendingEdits())
        },
        hasContent: function() {
            return this.props.meta.hasReqResources && !this.props.meta.loading
        },
        loader: function() {
            if (this.props.meta.loading) {
                var e = this.props.meta.loadingVideos ? "videos" : "resources",
                    t = "videos" === e ? " " + this.props.meta.numVideos : "",
                    a = "videos" === e ? "Loading" : "Searching for";
                return React.createElement(GeneralLoader, {
                    text: a + " " + e + "..." + t,
                    progressKey: e,
                    progress: this.props.meta.progress
                })
            }
        },
        status: function() {
            var e = u.capitalize(this.props.meta.taskString);
            this.props.meta.loading && (e = null);
            var t = _.compact([e, this.resFoundPhrase()]),
                a = _.map(t, function(e, t) {
                    return React.createElement("p", {
                        key: t
                    }, e)
                });
            return React.createElement("div", {
                className: "modal-status"
            }, a)
        },
        resFoundPhrase: function() {
            if (!this.props.meta.loadingVideos) {
                var e, t = {
                    annotation: this.annsFoundPhrase(),
                    card: this.cardsFoundPhrase()
                };
                return e = "all" === this.props.meta.mode ? _.compact(_.values(t)).join(" and ") : t[this.props.meta.mode], e && (e = "Found " + e), e
            }
        },
        annsFoundPhrase: function() {
            var e = this.props.meta.numAnnotations;
            if (0 !== e) {
                var t = 1 === e ? "annotation" : "annotations";
                return [e, t].join(" ")
            }
        },
        cardsFoundPhrase: function() {
            var e = this.props.meta.numCards;
            if (0 !== e) {
                var t = 1 === e ? "card" : "cards";
                return [e, t].join(" ")
            }
        },
        getFilters: function() {
            var e = this.props.parent;
            return {
                SearchAndReplaceFilter: {
                    doFilter: function(t, a, s) {
                        var n = !1;
                        return 0 === s && (this._filtered = {}, this._filteredUids = []), _.each(e.getResourcesForVideo(a.id), function(e) {
                            var s = (e.searchableValues || e.editableValues).bind(e);
                            _.each(s(), function(s, i) {
                                if (s) {
                                    var o = s.match(t);
                                    o && (this._filtered[a.id] || (this._filtered[a.id] = []), this._filtered[a.id].push(e), this._filteredUids.push(e._uid), n = !0)
                                }
                            }, this)
                        }, this), n
                    }.bind(this),
                    doReplace: function(t) {
                        _.each(this._filtered[t.item.id], function(a) {
                            var s = e.state.editedResources[a._uid],
                                n = a instanceof CardItem ? "card" : "annotation";
                            _.each(a.editableValues(), function(i, o) {
                                if (i && i.match(t.regex)) {
                                    s.set(o, i.replace(t.regex, t.replace));
                                    var r = e.getResourceFlag("selected", n, a._uid);
                                    r || e.toggleResourceFlag("selected", n, a._uid)
                                }
                            })
                        }), this.forceUpdate()
                    }.bind(this)
                }
            }
        },
        content: function() {
            if (this.hasContent()) {
                var e = this.props.parent.getRelevantVideos();
                return React.createElement("div", {
                    className: "content"
                }, this.actions(), React.createElement(Filter, {
                    items: e,
                    generator: this.videoGenerator,
                    filters: this.getFilters()
                }))
            }
        },
        videoGenerator: function(e) {
            var t = this.props.parent.state,
                a = (t.cards.resources[e.id] || []).slice(),
                s = (t.annotations.resources[e.id] || []).slice(),
                n = t.mode;
            "card" === n && (s = []), "annotation" === n && (a = []);
            var i = {
                card: a,
                annotation: s
            };
            FilterStore.isFiltering() && _.each(i, function(e, t) {
                i[t] = _.filter(e, function(e) {
                    return this._filteredUids.indexOf(e._uid) >= 0
                }, this)
            }, this);
            var o = function(e, t) {
                    var a = t instanceof CardItem ? "card" : "annotation";
                    return this.props.parent.getResourceFlag("deleted", a, e)
                }.bind(this),
                r = function(e, t) {
                    var a = t instanceof CardItem ? "card" : "annotation";
                    return this.props.parent.getResourceFlag("selected", a, e)
                }.bind(this),
                c = function(e) {
                    return this.props.parent.state.editedResources[e]
                }.bind(this),
                l = function(e, t) {
                    var a = t instanceof CardItem ? "card" : "annotation",
                        s = !("card" === a && "video" === t.getKind()),
                        n = s ? "selected" : "deleted";
                    return function() {
                        this.props.parent.toggleResourceFlag(n, a, e)
                    }.bind(this)
                }.bind(this),
                d = function(e, t) {
                    var a = t instanceof CardItem ? "card" : "annotation";
                    return function() {
                        this.props.parent.toggleResourceFlag("deleted", a, e)
                    }.bind(this)
                }.bind(this);
            return React.createElement(MEVR_Video, {
                key: e.id,
                video: e,
                resources: i,
                isDeleted: o,
                isSelected: r,
                getEditable: c,
                getOnToggleSelection: l,
                getOnToggleDeletion: d
            })
        },
        noResourcesFound: function() {
            return this.hasContent() || this.props.meta.loading ? void 0 : React.createElement("div", {
                className: "no-resources-found"
            }, React.createElement("h2", null, "No resources found"), React.createElement("p", null, "Try going back and choosing ", React.createElement("strong", null, "All"), " resource types or", " ", "increasing the amount of videos to search through."))
        },
        removeExcluded: function(e) {
            return FilterStore.isFiltering() ? _.intersection(e, this._filteredUids) : e
        },
        actions: function() {
            var e = this.props.meta,
                t = "Mark All For Deletion";
            e.numDeleted > 0 && (t = "Clear Pending Deletions");
            var a = _.partial(this.props.toggleDeleteAll, this.removeExcluded);
            return React.createElement("div", {
                className: "react-general-actions"
            }, React.createElement(Button, {
                text: t,
                secondary: !0,
                onClick: a
            }), React.createElement(Button, {
                text: "Clear Pending Edits",
                secondary: !0,
                disabled: e.numReqEdited <= 0,
                onClick: this.props.clearPendingEdits
            }))
        },
        render: function() {
            var e = classNames("mass-edit-video-resources-choose", {
                "has-content": this.hasContent()
            });
            return React.createElement("div", {
                className: e
            }, this.loader(), this.status(), this.content(), this.noResourcesFound())
        }
    }),
    MassEditVideoResourcesInit = React.createClass({
        displayName: "MassEditVideoResourcesInit",
        propTypes: {
            annotations: React.PropTypes.object.isRequired,
            cards: React.PropTypes.object.isRequired,
            changeMode: React.PropTypes.func.isRequired,
            mode: React.PropTypes.string
        },
        render: function() {
            return React.createElement("div", {
                className: "mass-edit-video-resources-init"
            }, React.createElement("h2", null, "Choose source videos"), React.createElement(VideoBufferController, null), React.createElement("h2", null, "Choose resources to edit or delete"), this.resourceChooser())
        },
        resourceChooser: function() {
            var e = function(e) {
                this.props.changeMode(e.target.value)
            }.bind(this);
            return React.createElement("div", {
                className: "resource-chooser"
            }, React.createElement("input", {
                type: "radio",
                id: "mdm-all",
                name: "mass-delete-mode",
                onChange: e,
                defaultChecked: "all" === this.props.mode,
                value: "all"
            }), React.createElement("label", {
                htmlFor: "mdm-all"
            }, "All"), React.createElement("input", {
                type: "radio",
                id: "mdm-card",
                name: "mass-delete-mode",
                onChange: e,
                defaultChecked: "card" === this.props.mode,
                value: "card"
            }), React.createElement("label", {
                htmlFor: "mdm-card"
            }, "Cards"), React.createElement("input", {
                type: "radio",
                id: "mdm-annotation",
                name: "mass-delete-mode",
                onChange: e,
                defaultChecked: "annotation" === this.props.mode,
                value: "annotation"
            }), React.createElement("label", {
                htmlFor: "mdm-annotation"
            }, "Annotations"))
        }
    }),
    MassEditVideos = React.createClass({
        displayName: "MassEditVideos",
        steps: ["MassEditVideosInit", "MassEditVideosChoose", "MassEditVideosProcess"],
        componentWillMount: function() {
            TemporaryStore.reset(), ChoicesStore.id("mass-edit-videos").reset(), $(window).on("bulk-processor:update", this.onBulkProcessorUpdate)
        },
        componentWillUnmount: function() {
            VideoBufferActions.cancel(), $(window).off("bulk-processor:update", this.onBulkProcessorUpdate)
        },
        onBulkProcessorUpdate: function() {
            this.forceUpdate()
        },
        render: function() {
            var e = BulkProcessor.instance,
                t = e ? e.isBusy() : !1;
            return React.createElement(Modal, {
                title: "Mass Edit Videos",
                locked: t,
                footer: !1
            }, React.createElement(Wizard, {
                ref: "wizard",
                classes: "mass-edit-videos",
                steps: this.steps,
                locked: t,
                legacy: !1
            }))
        }
    }),
    MassEditVideosChoose = React.createClass({
        displayName: "MassEditVideosChoose",
        namespace: "mass-edit-videos",
        statics: {
            enterStep: function() {
                VideoBufferActions.fetch(), VideoBufferActions.registerScraping(), VideoBufferActions.ensureScrapedData()
            },
            canChangeStep: function() {
                var e = VideoBufferStore;
                if (!e.isLoading() && !e.isScraping()) return ChoicesStore.id("mass-edit-videos").hasSelections() ? "all" : "back"
            }
        },
        getInitialState: function() {
            return this.choicesStore = ChoicesStore.id(this.namespace), this.getState()
        },
        getState: function() {
            return {
                vbs: VideoBufferStore.getData(),
                choices: this.choicesStore.getData()
            }
        },
        componentWillMount: function() {
            VideoBufferStore.addChangeListener(this.onVideosChange), this.choicesStore.addChangeListener(this.onChoicesChange)
        },
        componentWillUnmount: function() {
            VideoBufferStore.removeChangeListener(this.onVideosChange), this.choicesStore.removeChangeListener(this.onChoicesChange)
        },
        onVideosChange: function() {
            var e = VideoBufferStore.getData();
            this.setState({
                vbs: e
            }), 1 !== e.progress || this._startingScraping || (VideoBufferActions.ensureScrapedData(), this._startingScraping = !0)
        },
        onChoicesChange: function() {
            this.setState({
                choices: this.choicesStore.getData()
            })
        },
        getLoadingText: function() {
            var e = this.state.vbs.videos.length;
            return 0 === e && (e = ""), this.state.vbs.loading ? "Loading videos... " + e : "Loading video data..."
        },
        getLoading: function() {
            return this.state.vbs.loading || this.state.vbs.scraping
        },
        getProgress: function() {
            var e = this.state.vbs;
            return e.loading ? e.progress : e.scrapingP
        },
        getFilters: function() {
            var e = ["description", "title"];
            return {
                SearchAndReplaceFilter: {
                    doFilter: function(t, a) {
                        var s = !1;
                        return _.each(e, function(e) {
                            a[e].match(t) && (s = !0)
                        }), s
                    },
                    doReplace: function(t) {
                        var a = t.item,
                            s = TemporaryStore.get(a.id),
                            n = _.extend({}, a, s);
                        _.each(e, function(e) {
                            a[e].match(t.regex) && (n[e] = a[e].replace(t.regex, t.replace))
                        }), TemporaryActions.set(a.id, n), this.choicesStore.actions.select(t.index)
                    }.bind(this)
                }
            }
        },
        clearPendingEdits: function() {
            this.choicesStore.actions.clear(), TemporaryActions.clear()
        },
        getStatus: function() {
            var e = this.state.choices.length;
            if (0 !== e) return React.createElement("div", {
                className: "modal-status"
            }, e, " ", u.plural(e, "item"), " selected")
        },
        render: function() {
            var e = this.getLoading(),
                t = VideoBufferStore.isLoading() ? "loading" : "scraping";
            return React.createElement("div", null, React.createElement(GeneralLoader, {
                text: this.getLoadingText(),
                loading: e,
                progressKey: t,
                progress: this.getProgress()
            }), e ? null : this.content(), this.props.footer())
        },
        content: function() {
            return React.createElement("div", null, React.createElement("div", {
                className: "react-general-actions"
            }, React.createElement(Button, {
                text: "Clear Pending Edits",
                secondary: !0,
                disabled: this.state.choices.length <= 0,
                onClick: this.clearPendingEdits
            })), React.createElement(StoreChooser, {
                items: this.state.vbs.videos,
                perPage: 10,
                generator: this.generator,
                namespace: this.namespace,
                filters: this.getFilters()
            }), this.getStatus())
        },
        generator: function(e, t) {
            return React.createElement(VideoFrame, {
                key: t.index,
                video: e,
                selected: t.selected,
                toggleSelected: t.toggleSelected
            }, React.createElement(EditableVideo, {
                video: e,
                selected: t.selected,
                toggleSelected: t.toggleSelected
            }))
        }
    }),
    MassEditVideosInit = React.createClass({
        displayName: "MassEditVideosInit",
        statics: {
            canChangeStep: function() {
                return VideoBufferStore.ok() && !VideoBufferStore.isLoading() ? "all" : void 0
            }
        },
        componentWillMount: function() {
            VideoBufferStore.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            VideoBufferStore.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.forceUpdate()
        },
        render: function() {
            return React.createElement("div", null, React.createElement(VideoBufferController, null), this.props.footer())
        }
    }),
    MassEditVideosProcess = React.createClass({
        displayName: "MassEditVideosProcess",
        statics: {
            customButtons: function(e, t) {
                var a = BulkProcessor.instance;
                if (a) {
                    if (a.state.finished) return [t, "close"];
                    if (a.isBusy()) return [t]
                }
                return [t, {
                    text: "I'm ready, make my changes!",
                    onClick: function() {
                        BulkProcessor.instance.startProcessing()
                    },
                    position: "right"
                }]
            }
        },
        getInitialState: function() {
            return {
                payload: this.buildPayload()
            }
        },
        buildPayload: function() {
            var e = VideoBufferStore.getData(),
                t = TemporaryStore.getData(),
                a = ChoicesStore.id("mass-edit-videos").getData();
            return _.map(a, function(a) {
                var s = e.videos[a];
                return t[s.id] || s
            })
        },
        onComplete: function() {
            u.track("Finished mass edit videos")
        },
        execute: function(e) {
            var t = this.state.payload[e];
            return MyVideos.update(t.id, t)
        },
        render: function() {
            var e = u.plural(this.state.payload.length, "video", "videos"),
                t = React.createElement("b", null, "Success, your selected ", e, " have been modified!"),
                a = "edit details";
            return React.createElement("div", null, React.createElement(BulkProcessor, {
                videos: this.state.payload,
                execute: this.execute,
                task: a,
                preposition: "for",
                successMsg: t,
                failMsgFn: this.failMsgFn,
                urlFn: this.urlFn,
                onComplete: this.onComplete
            }), this.props.footer())
        },
        failMsgFn: function(e) {
            var t = u.plural(e, "video", "videos");
            return React.createElement("span", null, React.createElement("strong", null, e, " ", t, " failed to be modified."), "Please check the videos in the above list to see which ones were not updated.")
        },
        urlFn: function(e) {
            return "/watch?v=" + e
        }
    }),
    MassExport = React.createClass({
        displayName: "MassExport",
        propTypes: {
            channel: React.PropTypes.object
        },
        getDefaultProps: function() {
            return {
                channel: {}
            }
        },
        getInitialState: function() {
            return this.getStateFromStores()
        },
        getStateFromStores: function() {
            var e = MassExportStore.getData();
            return e
        },
        componentDidMount: function() {
            MassExportStore.addChangeListener(this.onStoreChange), this.props.channel || api().getCurrentChannel()
        },
        componentDidUpdate: function(e, t) {
            !(t || {}).finished && this.state.finished && u.track("Completed Mass CSV Export")
        },
        componentWillUnmount: function() {
            MassExportStore.removeChangeListener(this.onStoreChange), MassExportStore.reset(), this.isRunning() && MassExportActions.cancel()
        },
        isRunning: function() {
            return !this.state.finished && this.state.started
        },
        onStoreChange: function() {
            this.setState(this.getStateFromStores(), function() {
                this.setModalButtons()
            })
        },
        onClickDownload: function() {
            u.track("Clicked Download CSV")
        },
        setModalButtons: function() {
            var e = [];
            this.isRunning() ? (Modal.tighten(), e = ["cancel"]) : Modal.relax(), Modal.setButtons(e)
        },
        csvName: function() {
            var e = moment(this.state.finishedAt).format("YYYY-MM-DD"),
                t = (this.props.channel || api()._cachedChannel || {}).name;
            return _.compact(["vidIQ-export", t, e]).join("-") + ".csv"
        },
        render: function() {
            var e;
            return e = this.state.finished ? this.finishedPart() : this.state.started ? React.createElement(MassExportProgress, {
                data: this.state
            }) : React.createElement(MassExportStart, {
                channel: this.props.channel
            }), React.createElement("div", {
                className: "mass-export-container"
            }, e)
        },
        finishedPart: function() {
            var e = Math.round((this.state.finishedAt - this.state.startedAt) / 1e3),
                t = u.sec2fancy(e),
                a = this.state.payload.length,
                s = 1 === a.length ? "" : "s";
            return React.createElement("div", {
                className: "mass-export-finished"
            }, React.createElement("p", {
                className: "summary"
            }, "Exported ", React.createElement("b", null, a, " video", s), " in ", React.createElement("b", null, t)), React.createElement("div", {
                className: "download-csv"
            }, React.createElement("a", {
                className: "vidiq-button",
                href: this.state.csvUrl,
                target: "new",
                download: this.csvName(),
                onClick: this.onClickDownload
            }, "Download CSV")), React.createElement(MassExportPreview, {
                rows: this.state.payload
            }), React.createElement("p", {
                className: "preview-label"
            }, "CSV preview"))
        }
    }),
    MassExportPreview = React.createClass({
        displayName: "MassExportPreview",
        propTypes: {
            rows: React.PropTypes.array.isRequired
        },
        render: function() {
            return React.createElement("div", {
                className: "mass-export-preview"
            }, React.createElement("table", null, React.createElement("thead", null, React.createElement("tr", null, this.headings())), React.createElement("tbody", null, this.rows())))
        },
        headings: function() {
            return _.map(Export.STATS, function(e, t) {
                return React.createElement("th", {
                    key: t
                }, e.toUpperCase())
            }, this)
        },
        rows: function() {
            return _.map(this.props.rows.slice(0, 10), function(e, t) {
                return React.createElement("tr", {
                    key: t
                }, this.columns(e))
            }, this)
        },
        columns: function(e) {
            return _.map(Export.STATS, function(t, a) {
                return React.createElement("td", {
                    key: a
                }, e[t])
            }, this)
        }
    }),
    MassExportProgress = React.createClass({
        displayName: "MassExportProgress",
        propTypes: {
            data: React.PropTypes.object.isRequired
        },
        getKey: function(e) {
            return e.video.id + "-" + this.props.data.currentPage
        },
        render: function() {
            var e = classNames("batch", {
                "batch-loading": _.isEmpty(this.props.data.batch)
            });
            return React.createElement("div", {
                className: "mass-export-progress"
            }, React.createElement(ProgressBar, {
                percentComplete: 100 * this.props.data.progress
            }), React.createElement("h1", null, "Loading batch ", this.props.data.currentPage, "...", React.createElement("span", {
                className: "all-eta"
            }, u.etaString(this.props.data.eta))), React.createElement("div", {
                className: e
            }, this.batchPart()))
        },
        batchPart: function() {
            var e = this.props.data.batch;
            return _.isEmpty(e) ? React.createElement(Spinner, {
                classes: "batch-spinner"
            }) : _.map(e, function(e) {
                return React.createElement("div", {
                    className: "batch-item",
                    key: this.getKey(e)
                }, React.createElement("h2", null, e.video.title), React.createElement(ProgressBar, {
                    percentComplete: 100 * e.progress
                }))
            }, this)
        }
    }),
    MassExportStart = React.createClass({
        displayName: "MassExportStart",
        propTypes: {
            channel: React.PropTypes.object
        },
        getDefaultProps: function() {
            return {
                channel: {}
            }
        },
        start: function() {
            MassExportActions.start(this.props.channel.id)
        },
        getLimit: function() {
            return api().getFeatureLimit("export")
        },
        getStartButtonText: function() {
            var e = this.getLimit(),
                t = e ? "Export up to " + e + " videos" : "Export all my videos";
            return this.props.channel && (t = t.replace("my", "their")), t
        },
        getChannelName: function() {
            return (this.props.channel || {}).name
        },
        render: function() {
            var e = "your public, private, and unlisted",
                t = React.createElement("span", null, React.createElement("b", null, this.getChannelName()), "'s public"),
                a = _.isEmpty(this.props.channel) ? e : t,
                s = (_.isNumber(this.getLimit()) ? "some" : "all") + " of";
            return React.createElement("div", {
                className: "mass-export-start"
            }, React.createElement("p", null, "Use this feature to download ", s, " ", a, " video data as a CSV file"), React.createElement(Button, {
                text: this.getStartButtonText(),
                onClick: this.start
            }), this.upgradePart())
        },
        upgradePart: function() {
            if (this.getLimit()) {
                var e = "basic" === api().getUserType() ? React.createElement("span", null, React.createElement("b", null, "Pro"), " to get ", React.createElement("b", null, api().getFeatureLimit("export", "pro")), " ", "videos, or upgrade to", " ") : null;
                return React.createElement("div", {
                    className: "mass-export-upgrade"
                }, React.createElement("p", null, "Upgrade to ", e, React.createElement("b", null, "Boost"), " to get ", React.createElement("b", null, "unlimited"), " videos!"), React.createElement(UpgradeButton, {
                    source: "Mass CSV Export"
                }))
            }
        }
    }),
    MassLikeBase = React.createClass({
        displayName: "MassLikeBase",
        propTypes: {
            video: React.PropTypes.object.isRequired
        },
        getInitialState: function() {
            return MassLikeStore.getData()
        },
        componentDidMount: function() {
            u.track("Opened mass like", {
                video: {
                    url: u.getVideoUrl(this.props.video.id),
                    value: this.props.video.title
                }
            }), MassLikeStore.addChangeListener(this.onStoreChange), MassLikeActions.fetchChannels()
        },
        componentWillUnmount: function() {
            MassLikeStore.removeChangeListener(this.onStoreChange), MassLikeStore.reset()
        },
        componentDidUpdate: function(e, t) {
            Modal.setButtons(this.getButtons())
        },
        onStoreChange: function() {
            this.setState(MassLikeStore.getData())
        },
        getButtons: function() {
            var e = {
                    text: "Mass like this video",
                    position: "right",
                    onClick: this.onMassLike
                },
                t = this.state.loading,
                a = 0 === this.state.channels.length,
                s = 0 === this.state.selected.length,
                n = this.state.finished,
                i = ["cancel", e];
            return t ? i = [] : a || n ? i = ["close"] : s && (i[1].disabled = !0), i
        },
        onToggleChannel: function(e) {
            var t = e.target.checked ? "selectChannel" : "deselectChannel";
            MassLikeActions[t](e.target.id)
        },
        onToggleAll: function(e) {
            var t = e.target.checked ? "selectAll" : "deselectAll";
            MassLikeActions[t](e.target.id)
        },
        onMassLike: function() {
            u.track("Mass like submitted", {
                video: {
                    url: u.getVideoUrl(this.props.video.id),
                    value: this.props.video.title
                }
            }), MassLikeActions.massLike(this.props.video.id)
        },
        messagePart: function() {
            if (this.state.message) {
                var e = this.state.successful ? "vidiq-alert-success" : "vidiq-alert-failure";
                return React.createElement("div", {
                    className: "mass-like-message"
                }, React.createElement("hr", {
                    className: "mass-like-separator"
                }), React.createElement("p", {
                    className: e
                }, this.state.message))
            }
        },
        render: function() {
            if (this.state.loading) return React.createElement(Spinner, {
                classes: "modal-spinner",
                size: "big"
            });
            if (0 === this.state.channels.length) return React.createElement("h2", {
                className: "vidiq-no-items"
            }, "Could not find any channels you own");
            var e = this.state.selected.length === this.state.channels.length,
                t = this.state.channels.map(function(e, t) {
                    return React.createElement(MassLikeChannel, {
                        key: t,
                        channel: e,
                        selected: _.contains(this.state.selected, e.id),
                        onToggleChannel: this.onToggleChannel
                    })
                }.bind(this));
            return React.createElement("div", {
                className: "vidiq-mass-like"
            }, React.createElement("p", null, "Select the channels that should like your video, then click the ", " ", React.createElement("strong", null, "Mass like this video"), " button."), React.createElement("div", {
                className: "mass-like-video"
            }, React.createElement("strong", null, "Video to be mass liked:"), React.createElement("img", {
                className: "mass-like-video-thumbnail",
                src: this.props.video.thumbnail
            }), React.createElement("span", {
                className: "mass-like-video-title"
            }, this.props.video.title)), React.createElement("div", {
                className: "mass-like-channels"
            }, t), React.createElement("div", {
                className: "mass-like-checkbox"
            }, React.createElement("hr", {
                className: "mass-like-separator"
            }), React.createElement("input", {
                type: "checkbox",
                id: "mass-like-select-all",
                checked: e,
                onChange: this.onToggleAll
            }), React.createElement("label", {
                htmlFor: "mass-like-select-all"
            }, "Select all")), this.messagePart())
        }
    }),
    MassLikeChannel = React.createClass({
        displayName: "MassLikeChannel",
        propTypes: {
            channel: React.PropTypes.object.isRequired,
            selected: React.PropTypes.bool.isRequired,
            onToggleChannel: React.PropTypes.func.isRequired
        },
        render: function() {
            return React.createElement("span", {
                className: "mass-like-channel mass-like-checkbox"
            }, React.createElement("input", {
                type: "checkbox",
                id: this.props.channel.id,
                checked: this.props.selected,
                onChange: this.props.onToggleChannel
            }), React.createElement("label", {
                htmlFor: this.props.channel.id
            }, React.createElement("img", {
                className: "mass-like-channel-avatar",
                src: this.props.channel.avatar
            }), React.createElement("span", {
                className: "mass-like-channel-name"
            }, this.props.channel.name)))
        }
    }),
    Modal = React.createClass({
        displayName: "Modal",
        statics: {
            create: function(e) {
                e.innerComponent && (Modal.destroy(), u.mountComponent({
                    component: Modal,
                    selector: "body",
                    rootClass: "vidiq-modal",
                    props: e
                }), $("body").css("overflow", "hidden"))
            },
            mount: function(e, t) {
                u.mountComponent({
                    component: e,
                    selector: "body",
                    rootClass: "vidiq-modal",
                    props: t
                }), $("body").css("overflow", "hidden")
            },
            destroy: function() {
                var e = document.querySelector(".vidiq-modal");
                e && (React.unmountComponentAtNode(e), e.parentNode.removeChild(e), $("body").css("overflow", "visible"), this.buttons = null)
            },
            isOpen: function() {
                return !!document.querySelector(".vidiq-modal")
            },
            emit: function() {
                var e = _.toArray(arguments);
                1 === e.length && (e = e[0]), $(window).trigger("vidiq-react-modal", e)
            },
            setButtons: function(e) {
                $(window).trigger("vidiq-react-modal-footer", {
                    buttons: e
                })
            },
            tighten: function() {
                this.emit("tighten")
            },
            relax: function() {
                this.emit("relax")
            },
            lock: function() {
                this.emit("lock"), $(window).trigger("vidiq-react-modal-footer", {
                    locked: !0
                })
            },
            unlock: function() {
                this.emit("unlock"), $(window).trigger("vidiq-react-modal-footer", {
                    locked: !1
                })
            }
        },
        propTypes: {
            innerComponent: React.PropTypes.func,
            innerProps: React.PropTypes.object,
            size: React.PropTypes.oneOf(["small", "large"]),
            title: React.PropTypes.string.isRequired,
            buttons: React.PropTypes.array,
            locked: React.PropTypes.bool,
            tightened: React.PropTypes.bool,
            footer: React.PropTypes.bool
        },
        getDefaultProps: function() {
            return {
                footer: !0
            }
        },
        getInitialState: function() {
            return {
                locked: !1,
                buttons: []
            }
        },
        componentWillMount: function() {
            $(window).on("vidiq-react-modal", this.onExternalEvent)
        },
        componentWillUnmount: function() {
            $(window).off("vidiq-react-modal", this.onExternalEvent)
        },
        onExternalEvent: function(e, t) {
            switch (t) {
                case "close":
                    this.onClose();
                    break;
                case "lock":
                    this.state.locked || this.setState({
                        locked: !0
                    });
                    break;
                case "unlock":
                    this.state.locked && this.setState({
                        locked: !1
                    });
                    break;
                case "tighten":
                    this.state.tightened || this.setState({
                        tightened: !0
                    });
                    break;
                case "relax":
                    this.state.tightened && this.setState({
                        tightened: !1
                    })
            }
        },
        onClose: function() {
            this.props.locked || this.state.locked || Modal.destroy()
        },
        onOverlayClick: function() {
            this.props.tightened || this.state.tightened || this.onClose()
        },
        render: function() {
            var e = this.props.children;
            if (this.props.innerComponent) {
                var t = this.props.innerProps || {};
                e = React.createElement(this.props.innerComponent, t)
            }
            var a = React.createElement("button", {
                className: "modal-close",
                onClick: this.onClose
            }, "");
            (this.state.locked || this.state.tightened || this.props.locked || this.props.tightened) && (a = null);
            var s = _.compact(["modal-window", this.props.size]).join(" ");
            return React.createElement("div", {
                className: "vidiq-modal vidiq-react"
            }, React.createElement("div", {
                className: "modal-overlay",
                onClick: this.onOverlayClick
            }), React.createElement("div", {
                className: s
            }, React.createElement("div", {
                className: "modal-header"
            }, React.createElement("h1", {
                className: "modal-title"
            }, a, React.createElement("img", {
                draggable: "false",
                src: chrome.extension.getURL("images/vidiq_playplus.png")
            }), React.createElement("span", null, this.props.title))), React.createElement("div", {
                className: "modal-content"
            }, e), this.footerPart()))
        },
        footerPart: function() {
            return this.props.footer ? React.createElement(ModalFooter, {
                buttons: this.props.buttons,
                locked: this.props.locked
            }) : void 0
        }
    }),
    ModalFooter = React.createClass({
        displayName: "ModalFooter",
        propTypes: {
            onClose: React.PropTypes.func,
            buttons: React.PropTypes.array,
            locked: React.PropTypes.bool
        },
        componentWillMount: function() {
            $(window).on("vidiq-react-modal-footer", this.onSetSelf)
        },
        componentWillUnmount: function() {
            $(window).off("vidiq-react-modal-footer", this.onSetSelf)
        },
        getInitialState: function() {
            return {
                locked: !1,
                buttons: []
            }
        },
        onSetSelf: function(e, t) {
            var a = _.isEqual(_.extend({}, this.state, t), this.state);
            a || this.setState(t)
        },
        onClose: function() {
            $(window).trigger("vidiq-react-modal", "close")
        },
        getButtons: function() {
            return _.map(this.props.buttons || this.state.buttons, function(e) {
                return _.isString(e) ? e : _.extend({}, e, {
                    onClick: e.onClick
                })
            }, this)
        },
        spinnerPart: function() {
            return this.props.locked || this.state.locked ? React.createElement(Spinner, {
                classes: "modal-spinner"
            }) : void 0
        },
        render: function() {
            var e = this.props.locked || this.state.locked,
                t = this.props.buttons || this.state.buttons;
            return e || 0 !== t.length ? React.createElement("div", {
                className: "modal-footer"
            }, React.createElement(ButtonSection, {
                buttons: this.getButtons(),
                onClose: this.onClose,
                disabled: e
            }), this.spinnerPart()) : null
        }
    }),
    MyVideosLoadControl = React.createClass({
        displayName: "MyVideosLoadControl",
        getInitialState: function() {
            return this.getStateFromStores()
        },
        getStateFromStores: function() {
            return MyVideosStore.getData()
        },
        componentDidMount: function() {
            MyVideosStore.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            MyVideosStore.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState(this.getStateFromStores)
        },
        render: function() {
            var e, t = this.state.totalPages,
                a = this.state.currentPage,
                s = t - a,
                n = 1 === s ? "page" : "pages",
                i = React.createElement("span", null, "  ", React.createElement("b", null, s), " ", n, " left"),
                o = React.createElement("span", null, " of ", React.createElement("b", null, t)),
                r = Math.max(a, 1);
            return isFinite(t) && null !== t || (i = null, o = null), (this.state.finished || 0 >= s) && (e = React.createElement("span", null, "All videos have been loaded!")), e = this.state.arrested || !this.state.loading ? React.createElement("div", {
                className: "resume-loading"
            }, React.createElement("strong", null, this.state.videos.length, " videos"), React.createElement("button", {
                className: "btn btn-small",
                onClick: MyVideosActions["continue"]
            }, "Load more", i)) : React.createElement("div", {
                className: "loading-videos"
            }, React.createElement(Spinner, null), React.createElement("span", null, "Loading videos  Page ", React.createElement("b", null, r), o), React.createElement("button", {
                className: "btn btn-small",
                onClick: MyVideosActions.cancel
            }, "That's enough")), React.createElement("div", {
                className: "video-loader"
            }, e)
        }
    }),
    Paginator = React.createClass({
        displayName: "Paginator",
        propTypes: {
            items: React.PropTypes.array.isRequired,
            indices: React.PropTypes.array,
            generator: React.PropTypes.func,
            perPage: React.PropTypes.number
        },
        getDefaultProps: function() {
            return {
                perPage: 100
            }
        },
        getInitialState: function() {
            return {
                page: 0
            }
        },
        componentWillUpdate: function(e) {
            _.isEqual(e.items, this.props.items) || this.setState({
                page: 0
            })
        },
        getItems: function() {
            if (0 !== this.props.items.length) {
                var e = this.props.perPage,
                    t = e * this.state.page,
                    a = Math.min(t + e, this.props.items.length);
                return this.props.generator ? _.map(_.range(t, a, 1), function(e) {
                    var t = this.props.indices ? this.props.indices[e] || e : e;
                    return this.props.generator(this.props.items[e], t)
                }, this) : this.props.items.slice(t, a)
            }
        },
        getMaxPage: function() {
            return Math.ceil(this.props.items.length / this.props.perPage) - 1
        },
        render: function() {
            return React.createElement("div", {
                className: "paginator"
            }, this.pagesPart(), React.createElement("div", {
                className: "paginator-content"
            }, this.getItems()), this.pagesPart())
        },
        pagesPart: function() {
            return this.props.items.length <= this.props.perPage ? void 0 : React.createElement("div", {
                className: "paginator-pages"
            }, this.nudgeButton("prev"), this.pageButtons(), this.nudgeButton("next"))
        },
        pageButtons: function() {
            for (var e = 4, t = Math.max(this.state.page - e, 0), a = Math.min(this.state.page + e, this.getMaxPage()), s = [], n = this, i = function() {
                    n.setState({
                        page: this
                    })
                }, o = t; a >= o; o += 1) {
                var r, c = o + 1;
                r = o === this.state.page ? React.createElement("span", {
                    key: o,
                    className: "current"
                }, c) : React.createElement("a", {
                    className: "page",
                    key: o,
                    onClick: i.bind(o)
                }, c), s.push(r)
            }
            return s
        },
        nudgeButton: function(e) {
            var t = "prev" === e ? "Prev" : "Next",
                a = "prev" === e ? -1 : 1,
                s = this.getMaxPage(),
                n = Math.min(Math.max(0, this.state.page + a), s);
            if (n !== this.state.page) {
                var i = function() {
                    this.setState({
                        page: n
                    })
                }.bind(this);
                return React.createElement("a", {
                    className: "nudge",
                    onClick: i
                }, t)
            }
        }
    }),
    ExtensionPopup = React.createClass({
        displayName: "ExtensionPopup",
        propTypes: {
            expanded: React.PropTypes.object
        },
        getInitialState: function() {
            var e = dataStore.getItem("userData"),
                t = dataStore.getItem("channel");
            return {
                loggedIn: e && !_.isEmpty(e),
                currentUser: e ? e.current_user : {},
                session: e ? e.session : {},
                expanded: this.props.expanded || {
                    youtube: !0,
                    vidiq: !0
                },
                channelToken: t,
                message: "Log in to use shortcuts!",
                loading: !1,
                login: !0
            }
        },
        componentWillMount: function() {
            this.getData()
        },
        getData: function() {
            Popup.getData().done(function(e) {
                if (this.setState({
                        loggedIn: !_.isEmpty(e),
                        currentUser: e.current_user,
                        session: e.session,
                        loading: !1
                    }), !this.state.channelToken && e.session && !_.isEmpty(e.session.channels)) {
                    var t = e.session.channels[0].token;
                    dataStore.setItem("channel", t), this.setState({
                        channelToken: t
                    })
                }
                this.state.loggedIn || setTimeout(function() {
                    var e = {
                        youtube: !1,
                        vidiq: !1
                    };
                    dataStore.setItem("expanded", e), this.setState({
                        expanded: e
                    })
                }.bind(this), 500)
            }.bind(this))
        },
        onClickLogout: function() {
            Popup.logout();
            var e = {
                youtube: !1,
                vidiq: !1
            };
            dataStore.setItem("expanded", e), dataStore.setItem("channel", void 0), dataStore.setItem("userData", void 0), this.setState({
                loggedIn: !1,
                currentUser: {},
                session: {},
                channelToken: null,
                expanded: e,
                message: "Log in to use shortcuts!"
            })
        },
        onClickLogin: function() {
            return this.setState({
                loading: !0
            }, function() {
                Popup.login().done(function(e) {
                    e.status ? this.getData() : this.setState({
                        loading: !1,
                        message: e.message
                    })
                }.bind(this))
            }.bind(this)), !1
        },
        onClickSignup: function() {
            return this.setState({
                loading: !0
            }, function() {
                Popup.signup().done(function(e) {
                    e.status ? this.getData() : this.setState({
                        loading: !1,
                        message: e.message
                    })
                }.bind(this))
            }.bind(this)), !1
        },
        isExpanded: function(e) {
            return this.state.expanded[e]
        },
        toggleLoginSignup: function() {
            var e = !this.state.login,
                t = e ? "Log in to use shortcuts!" : "Sign up for vidIQ!";
            this.setState({
                login: e,
                message: t
            })
        },
        userType: function t() {
            if (!this.state.session) return null;
            var e = ["boost_lite", "boost_plus", "premium", "pro", "pro_plus"],
                t = "basic";
            switch (_.each(e, function(e) {
                t = this.state.session[e] ? e : t
            }, this), t) {
                case "basic":
                    return t;
                case "pro":
                    return "pro";
                case "pro_plus":
                case "boost_lite":
                case "boost_plus":
                    return "boost";
                case "premium":
                    return "ent"
            }
        },
        toggleSection: function(e) {
            var t = $(e.target).attr("name"),
                a = this.state.expanded;
            a[t] = !a[t], dataStore.setItem("expanded", a), this.setState({
                expanded: a
            })
        },
        channelChange: function(e) {
            var t = e.target.value;
            dataStore.setItem("channel", t), this.setState({
                channelToken: t
            })
        },
        render: function() {
            return React.createElement("div", {
                className: "vidiq-popup-container"
            }, this.header(), React.createElement(ExtensionPopupYoutube, {
                loggedIn: this.state.loggedIn,
                toggleSection: this.toggleSection,
                isExpanded: this.isExpanded
            }), React.createElement(ExtensionPopupVidiq, {
                loading: this.state.loading,
                loggedIn: this.state.loggedIn,
                channelToken: this.state.channelToken,
                session: this.state.session,
                getUserType: this.userType,
                toggleSection: this.toggleSection,
                isExpanded: this.isExpanded,
                channelChange: this.channelChange
            }), React.createElement(ExtensionPopupUser, {
                loading: this.state.loading,
                loggedIn: this.state.loggedIn,
                channelToken: this.state.channelToken,
                currentUser: this.state.currentUser,
                message: this.state.message,
                clickLogin: this.onClickLogin,
                clickSignup: this.onClickSignup,
                clickLogout: this.onClickLogout,
                toggle: this.toggleLoginSignup,
                login: this.state.login
            }), this.footer())
        },
        spinner: function() {
            return this.state.loading ? React.createElement(Spinner, {
                classes: "vidiq-popup-spinner",
                size: "small"
            }) : null
        },
        header: function() {
            var e = this.userType(),
                t = e ? React.createElement("img", {
                    id: "vidiq-badge",
                    src: "images/badge-" + e + ".png",
                    alt: e
                }) : null,
                a = null;
            return t && (a = "ent" === e ? t : React.createElement("a", {
                href: "https://app.vidiq.com/plans",
                name: "vidiq/plans"
            }, t)), React.createElement("div", {
                className: "vidiq-popup-header"
            }, React.createElement("a", {
                href: "https://app.vidiq.com",
                name: "vidiq/home"
            }, React.createElement("img", {
                src: "images/vidiq_dark.svg",
                alt: "vidIQ"
            })), this.spinner(), a)
        },
        footer: function() {
            return React.createElement("div", {
                className: "vidiq-popup-footer"
            }, React.createElement("a", {
                href: "options.html",
                target: "_blank",
                name: "vidiq/options"
            }, "Settings"), React.createElement("span", null, " | "), React.createElement("a", {
                href: "mailto:support@vidiq.com",
                target: "_top",
                name: "vidiq/contact"
            }, "Contact"), React.createElement("span", null, " | "), React.createElement("a", {
                href: "http://blog.vidiq.com/",
                name: "vidiq/blog"
            }, "Blog"))
        }
    }),
    ExtensionPopupGroup = React.createClass({
        displayName: "ExtensionPopupGroup",
        propTypes: {
            disabled: React.PropTypes.bool.isRequired,
            loading: React.PropTypes.bool.isRequired,
            headerName: React.PropTypes.string.isRequired,
            name: React.PropTypes.string.isRequired,
            toggle: React.PropTypes.func.isRequired,
            expanded: React.PropTypes.bool.isRequired,
            classes: React.PropTypes.string.isRequired
        },
        spinner: function() {
            return this.props.loading ? React.createElement(Spinner, {
                classes: "vidiq-popup-spinner",
                size: "small"
            }) : null
        },
        sectionHeader: function() {
            var e = classNames("vidiq-popup-section-header", {
                expanded: this.props.expanded,
                disabled: this.props.disabled
            });
            return React.createElement("div", {
                name: this.props.name,
                className: e,
                onClick: this.props.toggle
            }, React.createElement("h4", {
                name: this.props.name,
                className: "header-name"
            }, this.props.headerName), React.createElement("h4", {
                name: this.props.name,
                className: "header-arrow"
            }, ""))
        },
        sectionInner: function() {
            var e = classNames("vidiq-popup-section-inner", {
                expanded: this.props.expanded
            });
            return React.createElement("div", {
                className: e
            }, this.props.children)
        },
        render: function() {
            return React.createElement("div", {
                className: "vidiq-popup-section " + this.props.classes
            }, this.sectionHeader(), this.sectionInner())
        }
    }),
    ExtensionPopupUser = React.createClass({
        displayName: "ExtensionPopupUser",
        propTypes: {
            loading: React.PropTypes.bool.isRequired,
            loggedIn: React.PropTypes.bool.isRequired,
            channelToken: React.PropTypes.string,
            currentUser: React.PropTypes.object,
            message: React.PropTypes.string,
            clickLogin: React.PropTypes.func.isRequired,
            clickSignup: React.PropTypes.func.isRequired,
            clickLogout: React.PropTypes.func.isRequired,
            toggle: React.PropTypes.func.isRequired,
            login: React.PropTypes.bool.isRequired
        },
        getInitialState: function() {
            return {
                terms: !1
            }
        },
        termsChange: function() {
            var e = this.state.terms;
            this.setState({
                terms: !e
            })
        },
        userAuthState: function() {
            return this.props.channelToken ? React.createElement("i", {
                className: "material-icons"
            }, "check_circle") : React.createElement("a", {
                href: "https://app.vidiq.com/welcome"
            }, "Authenticate to use vidIQ shortcuts")
        },
        render: function() {
            var e = this.props.login ? this.props.clickLogin : this.props.clickSignup,
                t = classNames("vidiq-popup-user-login", {
                    hidden: this.props.loading
                }),
                a = classNames("vidiq-popup-login-form", {
                    login: this.props.login
                });
            return this.props.loggedIn ? React.createElement("div", {
                className: "vidiq-popup-user"
            }, React.createElement("h5", {
                className: "vidiq-popup-user-info"
            }, this.userAuthState(), " ", this.props.currentUser.email), React.createElement("span", {
                onClick: this.props.clickLogout,
                className: "vidiq-link vidiq-popup-log-out"
            }, "Log out")) : React.createElement("div", {
                className: t
            }, React.createElement("h5", {
                className: "vidiq-popup-login-message"
            }, this.props.message), React.createElement("form", {
                onSubmit: e,
                className: a
            }, React.createElement("input", {
                type: "email",
                placeholder: "Email",
                name: "email"
            }), React.createElement("input", {
                className: "sign-up",
                type: "email",
                placeholder: "Confirm Email",
                name: "confirm-email"
            }), React.createElement("input", {
                className: "sign-up",
                type: "input",
                placeholder: "Full Name",
                name: "fullname"
            }), React.createElement("input", {
                type: "password",
                placeholder: "Password",
                name: "password"
            }), React.createElement("input", {
                className: "sign-up",
                type: "password",
                placeholder: "Confirm Password",
                name: "confirm-password"
            }), React.createElement("input", {
                className: "sign-up",
                type: "checkbox",
                value: this.state.terms,
                name: "agree-to-tos",
                onChange: this.termsChange
            }), React.createElement("label", {
                className: "sign-up",
                htmlFor: "agree-to-tos"
            }, "Agree to our ", React.createElement("a", {
                href: "https://vidiq.com/terms/"
            }, "Terms of Service")), React.createElement(Button, {
                text: this.props.login ? "Log in" : "Sign up",
                type: "submit",
                onClick: e
            }), React.createElement("span", {
                onClick: this.props.toggle,
                className: "vidiq-link vidiq-popup-form-link"
            }, this.props.login ? "Create an account" : "Log in")))
        }
    }),
    ExtensionPopupVidiq = React.createClass({
        displayName: "ExtensionPopupVidiq",
        propTypes: {
            loading: React.PropTypes.bool.isRequired,
            loggedIn: React.PropTypes.bool.isRequired,
            channelToken: React.PropTypes.string,
            session: React.PropTypes.object,
            getUserType: React.PropTypes.func.isRequired,
            toggleSection: React.PropTypes.func.isRequired,
            isExpanded: React.PropTypes.func.isRequired,
            channelChange: React.PropTypes.func
        },
        render: function() {
            return React.createElement(ExtensionPopupGroup, {
                disabled: this.props.loading || !this.props.loggedIn || !this.props.channelToken,
                loading: this.props.loading,
                headerName: "vidIQ Shortcuts",
                name: "vidiq",
                toggle: this.props.toggleSection,
                expanded: this.props.isExpanded("vidiq"),
                classes: "vidiq-client-shortcuts"
            }, this.channels(), this.vidiqLinks())
        },
        getListItem: function(e, t, a) {
            return this.props.loggedIn && this.props.channelToken ? React.createElement("a", {
                className: "vidiq-list-item-name",
                href: e,
                name: t
            }, a) : React.createElement("span", {
                className: "vidiq-list-item-name",
                name: t
            }, a)
        },
        upsellListItem: function(e) {
            var t = this.props.getUserType(),
                a = ["basic", "pro", "boost", "ent"];
            return !t || a.indexOf(t) >= a.indexOf(e) ? null : React.createElement("a", {
                className: "vidiq-popup-link-upsell",
                href: "https://app.vidiq.com/plans"
            }, e)
        },
        vidiqLinks: function() {
            var e = this.props.channelToken,
                t = "https://app.vidiq.com/channels/" + e,
                a = classNames("vidiq-shortcuts-list", {
                    disabled: !e || !this.props.loggedIn || this.props.loading,
                    enabled: e && this.props.loggedIn && !this.props.loading
                });
            return React.createElement("ul", {
                className: a
            }, React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "pie_chart"), " ", this.getListItem(t + "/analytics", "vidiq/analytics", "Analytics")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "videocam"), " ", this.getListItem(t + "/videos", "vidiq/videos", "Videos")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "visibility"), " ", this.getListItem(t + "/competition", "vidiq/competition", "Competition")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "description"), " ", this.getListItem(t + "/desc-campaigns", "vidiq/desc-campaigns", "Descriptions"), " ", this.upsellListItem("pro")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "thumb_up"), " ", this.getListItem(t + "/facebook", "vidiq/facebook", "Facebook"), " ", this.upsellListItem("pro")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "search"), " ", this.getListItem(t + "/seo/tags-added", "vidiq/seo/tags-added", "SEO | Tags"), " ", this.upsellListItem("boost")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "group"), " ", this.getListItem(t + "/subscribers", "vidiq/subscribers", "Subscriber Insights"), " ", this.upsellListItem("boost")))
        },
        channelSelect: function() {
            if (1 === this.props.session.channels.length) return React.createElement("span", {
                className: "vidiq-popup-single-channel"
            }, this.props.session.channels[0].name);
            var e = _.chain(this.props.session.channels).sortBy(function(e) {
                return e.name
            }).map(function(e) {
                return React.createElement("option", {
                    key: e.token,
                    value: e.token
                }, e.name)
            }).value();
            return React.createElement("select", {
                className: "vidiq-popup-channel-select-menu",
                onChange: this.props.channelChange,
                defaultValue: this.props.channelToken
            }, e)
        },
        channels: function() {
            return this.props.loggedIn && this.props.channelToken ? React.createElement("div", {
                className: "vidiq-popup-channel-select"
            }, React.createElement("span", {
                className: "vidiq-popup-channel-select-text"
            }, "Channel: "), this.channelSelect()) : null
        }
    }),
    ExtensionPopupYoutube = React.createClass({
        displayName: "ExtensionPopupYoutube",
        propTypes: {
            loggedIn: React.PropTypes.bool.isRequired,
            toggleSection: React.PropTypes.func.isRequired,
            isExpanded: React.PropTypes.func.isRequired
        },
        render: function() {
            return React.createElement(ExtensionPopupGroup, {
                disabled: !this.props.loggedIn,
                headerName: "YouTube Shortcuts",
                name: "youtube",
                toggle: this.props.toggleSection,
                expanded: this.props.isExpanded("youtube"),
                classes: "vidiq-youtube-shortcuts"
            }, this.youtubeLinks())
        },
        getListItem: function(e, t, a) {
            return this.props.loggedIn ? React.createElement("a", {
                className: "vidiq-list-item-name",
                href: e,
                name: t
            }, a) : React.createElement("span", {
                className: "vidiq-list-item-name",
                name: t
            }, a)
        },
        youtubeLinks: function() {
            var e = "https://youtube.com/",
                t = classNames("vidiq-shortcuts-list", {
                    disabled: !this.props.loggedIn,
                    enabled: this.props.loggedIn
                });
            return React.createElement("ul", {
                className: t
            }, React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "home"), " ", this.getListItem(e, "youtube/home", "Home")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "dashboard"), " ", this.getListItem(e + "/dashboard", "youtube/dashboard", "Dashboard")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "file_upload"), " ", this.getListItem(e + "/upload", "youtube/upload", "Upload")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "video_library"), " ", this.getListItem(e + "/my_videos", "youtube/my_videos", "My Videos")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "playlist_play"), " ", this.getListItem(e + "/view_all_playlists", "youtube/view_all_playlists", "Playlists")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "comment"), " ", this.getListItem(e + "/comments", "youtube/comments", "Comments")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "message"), " ", this.getListItem(e + "/messages", "youtube/messages", "Messages")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "subscriptions"), " ", this.getListItem(e + "/subscribers", "youtube/subscribers", "Subscribers")), React.createElement("li", null, React.createElement("i", {
                className: "material-icons"
            }, "assessment"), " ", this.getListItem(e + "/analytics", "youtube/analytics", "Analytics")))
        }
    }),
    PreviewPopup = React.createClass({
        displayName: "PreviewPopup",
        propTypes: {
            videoId: React.PropTypes.string.isRequired,
            showTags: React.PropTypes.bool
        },
        getInitialState: function() {
            return this.store = VideoInfoStore.id(this.props.videoId), {
                store: this.store.getData()
            }
        },
        componentWillReceiveProps: function(e) {
            this.store = VideoInfoStore.id(e.videoId), this.store.addChangeListener(this.onStoreChange), this.setState({
                store: this.store.getData()
            }, function() {
                this.getKeywords()
            }.bind(this))
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange), this.getKeywords()
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        displayKeywords: function() {
            return this.props.showTags && JSON.parse(this.props.showTags)
        },
        getKeywords: function() {
            this.state.store.keywords || this.state.store.searchedForKeywords || !this.displayKeywords() || VideoInfoActions.scrapeVideoPage(this.props.videoId)
        },
        render: function() {
            var e = chrome.extension.getURL("options.html");
            return React.createElement("div", {
                className: "vidiq-preview-popup"
            }, React.createElement("div", {
                className: "content"
            }, this.likeDislikeRatio(), React.createElement(SearchInlineSocialStats, {
                videoId: this.props.videoId,
                tooltipsOnly: !0
            }), React.createElement("a", {
                className: "settings",
                href: e,
                target: "_blank",
                title: "Settings"
            }, React.createElement("i", {
                className: "material-icons"
            }, "settings")), this.keywords()))
        },
        likeDislikeRatio: function() {
            var e = this.state.store.socialStats.socialMedia.youtube,
                t = (e.likes / (e.likes + e.dislikes) * 100).toFixed(2),
                a = React.createElement("i", {
                    className: "material-icons"
                }, "thumb_up");
            return isNaN(t) ? null : React.createElement("div", {
                className: "like-ratio",
                "data-tip-message": "Ratio of likes to total likes and dislikes"
            }, React.createElement("div", {
                className: "percentage"
            }, t), "% ", React.createElement("span", {
                className: "likes"
            }, a))
        },
        onTagsScroll: function(e) {
            e.stopPropagation()
        },
        keywords: function a() {
            if (!this.displayKeywords()) return null;
            if (!this.state.store.searchedForKeywords) return React.createElement(Spinner, {
                size: "big"
            });
            var e = this.state.store.keywords && !_.isEmpty(this.state.store.keywords),
                a = e ? this.state.store.keywords.map(function(e, t) {
                    return React.createElement(Keyword, {
                        key: t,
                        keyword: e,
                        li: !0
                    })
                }) : null,
                t = a ? React.createElement("ul", {
                    className: "keywords",
                    onWheel: this.onTagsScroll
                }, a) : null,
                s = React.createElement("span", {
                    className: "header"
                }, e ? "Tags" : "No tags found");
            return React.createElement("div", {
                className: "vidiq-popup-tags"
            }, s, t)
        }
    });
PreviewPopup.width = 290;
var ProgressBar = React.createClass({
        displayName: "ProgressBar",
        propTypes: {
            percentComplete: React.PropTypes.number,
            percent: React.PropTypes.number
        },
        getInitialState: function() {
            return {
                mounted: !1
            }
        },
        componentDidMount: function() {
            setTimeout(function() {
                this.unmounted || this.setState({
                    mounted: !0
                })
            }.bind(this), 100)
        },
        componentWillUnmount: function() {
            this.unmounted = !0
        },
        getPercent: function() {
            if (!this.state.mounted) return 0;
            var e = this.props;
            return e.percent ? 100 * e.percent : e.percentComplete
        },
        render: function() {
            var e = this.getPercent();
            e > 100 && (warn("Percent exceeds 100! You are having a bad time", e), e = 100);
            var t = {
                width: e + "%"
            };
            return React.createElement("div", {
                className: "vidiq-progress-bar"
            }, React.createElement("div", {
                className: "progress-bar",
                style: t
            }))
        }
    }),
    RatingBar = React.createClass({
        displayName: "RatingBar",
        propTypes: {
            videoId: React.PropTypes.string.isRequired
        },
        getInitialState: function() {
            return this.store = VideoInfoStore.id(this.props.videoId), {
                store: this.store.getData()
            }
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange), VideoInfoActions.getLikesDislikes(this.props.videoId)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        getRating: function() {
            var e = this.state.store.scraped;
            return (e.likes / (e.likes + e.dislikes) * 100).toFixed(2)
        },
        getTitle: function(e) {
            var t = this.state.store.scraped;
            return numbro(t.likes).format("0,0") + " likes\n" + numbro(t.dislikes).format("0,0") + " dislikes\n" + (isNaN(e) ? "N/A" : e + "%") + " like ratio\n\nConfigure in vidIQ settings"
        },
        render: function() {
            if (!this.state.store.scraped) return null;
            var e = this.getRating(),
                t = {
                    width: e + "%"
                };
            return React.createElement("div", {
                className: "vidiq-rating-bar",
                title: this.getTitle(e)
            }, React.createElement("div", {
                className: "vidiq-rating-likes",
                style: t
            }))
        }
    }),
    ReactForm = React.createClass({
        displayName: "ReactForm",
        propTypes: {
            fields: React.PropTypes.array.isRequired,
            showValid: React.PropTypes.bool,
            submitText: React.PropTypes.string,
            submit: React.PropTypes.func.isRequired
        },
        emailRegExp: /\S+@\S+\.\S+/,
        validateEmail: function(e) {
            return this.emailRegExp.test(e) ? void 0 : "Email address must be valid"
        },
        getInitialState: function() {
            return {
                errors: {},
                checked: [],
                loading: !1,
                submitted: !1,
                submissionError: null,
                submissionMessage: null
            }
        },
        componentWillUnmount: function() {
            this._unmounted = !0
        },
        onSubmit: function(e) {
            e.preventDefault();
            var t = this.getFormData(),
                a = this.checkErrors(t),
                s = _.pluck(this.props.fields, "name");
            this.setState({
                errors: a,
                checked: s
            }), 0 === _.values(a).length && this.submit(t)
        },
        submit: function(e) {
            var t = this.props.submit(e);
            "function" == typeof t.done ? (this.setState({
                loading: !0
            }), t.done(function(e) {
                this.setState({
                    loading: !1,
                    submissionMessage: e
                })
            }.bind(this)).fail(function(e) {
                this.setState({
                    loading: !1,
                    submissionError: e
                })
            }.bind(this))) : this.setState({
                submitted: !0
            })
        },
        getFormData: function() {
            var e = this.refs.form.getDOMNode().querySelectorAll("[name]");
            return _.object(_.compact(_.map(e, function(e) {
                var t = e.value,
                    a = e.getAttribute("type"),
                    s = ["checkbox", "radio"].indexOf(a) >= 0;
                return !s || e.checked ? [e.getAttribute("name"), t] : void 0
            })))
        },
        checkErrors: function(e) {
            return _.object(_.compact(_.map(this.props.fields, function(t) {
                var a, s = e[t.name],
                    n = t.required;
                if (n && !s) {
                    var i = _.isString(n) ? n : "Field is required";
                    return [t.name, i]
                }
                return "email" === t.type && (a = this.validateEmail(s)), !a && t.validate && (a = t.validate(s, e)), a ? [t.name, a] : void 0
            }, this)))
        },
        liveCheckErrors: function(e) {
            if (!this._unmounted) {
                var t = _.extend({}, this.state.errors),
                    a = _.pick(this.checkErrors(this.getFormData()), e);
                a[e] || (t = _.omit(t, e)), this.setState({
                    errors: _.extend(t, a),
                    checked: _.uniq(this.state.checked.concat([e]))
                })
            }
        },
        getDebouncedLiveCheckErrors: function(e) {
            var t = "_debounced_" + e;
            return this[t] ? this[t] : (this[t] = _.debounce(_.partial(this.liveCheckErrors, e), 500), this[t])
        },
        fields: function() {
            return _.map(this.props.fields, function(e) {
                return this.field(e)
            }, this)
        },
        field: function(e) {
            var t = {
                id: "form-field-" + e.name,
                name: e.name,
                placeholder: e.placeholder,
                type: e.type || "text",
                onChange: this.getDebouncedLiveCheckErrors(e.name),
                initialValue: e.value || ""
            };
            this.state.loading && (t.disabled = !0);
            var a = e.tag || "input";
            "input" !== a && delete t.type;
            var s = React.createElement(a, t),
                n = this.state.errors[e.name],
                i = this.state.checked.indexOf(e.name) >= 0 && !n;
            this.props.showValid || (i = !1);
            var o = classNames("form-field", {
                    "form-field-error": n,
                    "form-field-valid": i,
                    "form-field-non-text": "checkbox" === t.type
                }),
                r = React.createElement("i", {
                    className: "material-icons valid"
                }, "check_circle");
            return React.createElement("div", {
                className: o,
                key: e.name
            }, s, e.makeChildren ? e.makeChildren(t, e) : null, n ? this.error(n) : null, i ? r : null)
        },
        error: function(e) {
            return React.createElement("span", {
                className: "error"
            }, e, React.createElement("i", {
                className: "material-icons"
            }, "error"))
        },
        submissionError: function() {
            var e = this.state.submissionError;
            return e ? this.error(e) : null
        },
        submissionMessage: function() {
            var e = this.state.submissionMessage;
            return e ? React.createElement("span", {
                className: "submission-message"
            }, e, React.createElement("i", {
                className: "material-icons valid"
            }, "check_circle")) : null
        },
        render: function() {
            return React.createElement("form", {
                ref: "form",
                onSubmit: this.onSubmit,
                className: "react-form"
            }, this.fields(), this.submissionError(), this.submissionMessage(), React.createElement("div", {
                className: "submit-form form-field"
            }, React.createElement(Button, {
                onClick: this.onSubmit,
                disabled: this.state.loading,
                submit: !0
            }, this.props.submitText || "Submit"), this.state.loading ? React.createElement(Spinner, null) : null), this.props.children)
        }
    }),
    REACT_POPOVER_DATA = {},
    ReactPopover = React.createClass({
        displayName: "ReactPopover",
        statics: {
            setData: function(e, t) {
                REACT_POPOVER_DATA[e] = _.extend({}, this.getData(e), t)
            },
            getData: function(e) {
                return REACT_POPOVER_DATA[e] || {}
            },
            clearData: function(e) {
                REACT_POPOVER_DATA[e] = {}
            },
            setup: function() {
                var e = "mouseenter mouseleave";
                $(document).on(e, "[data-react-popover]", function(e) {
                    var t = $(this).attr("data-react-popover"),
                        a = $(this).attr("data-react-popover-props");
                    t && ("mouseenter" === e.type ? ReactPopover.mount(t, this, a) : ReactPopover.unmount(t))
                })
            },
            unmountIfTargetGone: function(e) {
                0 === $('[data-react-popover="' + e + '"').length && this.unmountImmediate(e)
            },
            mount: function(e, t, a) {
                var s = this.getData(e);
                s.timeout && clearTimeout(s.timeout), this.unmountAllImmediate(e);
                var n = s.node ? $(s.node) : null;
                n || (n = $('<div class="react-popover-node"></div>').hide(), $("body").append(n), n.on("mouseenter mouseleave", ".react-popover", function(t) {
                    "mouseenter" === t.type ? clearTimeout(this.getData(e).timeout) : this.unmount(e)
                }.bind(this)));
                var i = React.createElement(window[e]),
                    o = {
                        target: t
                    };
                a && _.extend(o, {
                    childProps: JSON.parse(a)
                }), _.isNumber(window[e].width) && (o.width = window[e].width);
                var r = React.createElement(ReactPopover, o, i);
                React.render(r, n[0]), $(t).addClass("popover-shown"), n.fadeIn("fast");
                var c = setInterval(_.partial(this.unmountIfTargetGone, e).bind(this), 1e3);
                this.setData(e, {
                    node: n[0],
                    interval: c,
                    timeout: null,
                    target: t
                })
            },
            unmount: function(e) {
                var t = _.partial(this.unmountImmediate, e).bind(this);
                this.setData(e, {
                    timeout: setTimeout(t, 300)
                })
            },
            unmountImmediate: function(e, t) {
                var a = this.getData(e);
                a && a.node && ($(a.target).removeClass("popover-shown"), t === !1 ? ($(a.node).hide(), React.unmountComponentAtNode(a.node), a.node.remove()) : $(a.node).fadeOut("fast", function() {
                    React.unmountComponentAtNode(a.node), a.node.remove()
                }), clearInterval(a.interval), clearInterval(a.timeout), this.clearData(e))
            },
            unmountAllImmediate: function(e) {
                _.map(_.keys(REACT_POPOVER_DATA), function(t) {
                    e && e === t || this.unmountImmediate(t, !1)
                }, this)
            }
        },
        propTypes: {
            target: React.PropTypes.object,
            width: React.PropTypes.number
        },
        getInitialState: function() {
            return this.getState()
        },
        getState: function() {
            return {
                scrollY: window.scrollY
            }
        },
        componentWillMount: function() {
            window.addEventListener("scroll", this.onScroll)
        },
        componentWillUnmount: function() {
            window.removeEventListener("scroll", this.onScroll)
        },
        onScroll: function() {
            this.setState(this.getState())
        },
        onWheel: function(e) {
            var t = e.currentTarget,
                a = t.scrollHeight - t.offsetHeight,
                s = t.scrollTop,
                n = s + e.deltaY;
            (n > a || 0 > n) && (e.preventDefault(), e.stopPropagation()), n > a && (t.scrollTop = a), 0 > n && (t.scrollTop = 0)
        },
        getStyle: function() {
            var e = this.props.target.getBoundingClientRect(),
                t = this.props.width || 350,
                a = 5,
                s = e.top + this.state.scrollY + e.height + a,
                n = e.left - (t - e.width) / 2;
            return {
                position: "absolute",
                width: t + "px",
                top: s + "px",
                left: n + "px"
            }
        },
        render: function() {
            var e = React.Children.map(this.props.children, function(e) {
                return React.cloneElement(e, this.props.childProps)
            }.bind(this));
            return React.createElement("div", {
                className: "react-popover vidiq-react",
                style: this.getStyle()
            }, React.createElement("div", {
                className: "triangle"
            }), React.createElement("div", {
                className: "popover-content",
                onWheel: this.onWheel
            }, e))
        }
    }),
    SC_Header = React.createClass({
        displayName: "SC_Header",
        statics: {
            mouseUpColor: "#ced1d1",
            mouseDownColor: "#9ea3a6"
        },
        propTypes: {
            collapse: React.PropTypes.func.isRequired
        },
        componentDidMount: function() {
            this.drawCollapseCircle(SC_Header.mouseUpColor)
        },
        componentDidUpdate: function() {
            this.drawCollapseCircle(SC_Header.mouseUpColor)
        },
        mouseDown: function() {
            this.drawCollapseCircle(SC_Header.mouseDownColor)
        },
        mouseUp: function() {
            this.drawCollapseCircle(SC_Header.mouseUpColor)
        },
        drawCollapseCircle: function(e) {
            var t = this.refs.canvas.getDOMNode(),
                a = t.getContext("2d"),
                s = t.width / 2,
                n = t.height / 2,
                i = 22;
            a.clearRect(0, 0, t.width, t.height), a.beginPath(), a.arc(s, n, i, 0, 2 * Math.PI, !1), a.lineWidth = 4, a.strokeStyle = e, a.stroke()
        },
        render: function() {
            var e = chrome.extension.getURL("images/vidiq_dark.svg"),
                t = api().getLogoBadge(),
                a = api().getUserType();
            return React.createElement("header", {
                className: "vision-header"
            }, React.createElement("div", {
                className: "loginCollapse"
            }, React.createElement("canvas", {
                ref: "canvas",
                onClick: this.props.collapse,
                onMouseDown: this.mouseDown,
                onMouseUp: this.mouseUp,
                id: "collapse-circle",
                width: "48px",
                height: "48px"
            })), React.createElement("a", {
                href: "http://vidiq.com",
                title: "Visit vidIQ"
            }, React.createElement("img", {
                id: "vidiq-logo",
                src: e,
                alt: "vidIQ"
            })), React.createElement("img", {
                id: "vidiq-badge",
                src: t,
                alt: a
            }))
        }
    }),
    SC_InlineKeywordsOption = React.createClass({
        displayName: "SC_InlineKeywordsOption",
        propTypes: {
            show: React.PropTypes.bool.isRequired,
            toggle: React.PropTypes.func.isRequired
        },
        render: function() {
            return React.createElement("div", {
                className: "inline-keywords-option"
            }, React.createElement("div", {
                className: "dark stat-title"
            }, "INLINE KEYWORDS"), this.inlineKeywordsButton())
        },
        inlineKeywordsButton: function() {
            var e = this.props.show ? "Disable" : "Enable";
            return React.createElement("button", {
                className: "toggle-inline-keywords btn-small btn",
                onClick: this.props.toggle
            }, e, " Inline Keywords")
        }
    }),
    SC_KeywordScore = React.createClass({
        displayName: "SC_KeywordScore",
        propTypes: {
            searchStats: React.PropTypes.object
        },
        render: function() {
            if (!this.props.searchStats) return null;
            var e = "Keyword score is determined to help gauge how effective this keyword would be in your video optimization efforts. If you have a 1M+ subscriber channel, you might be able to break into highly competitive search terms. If you are a smaller channel its better to stay focused on the mid-range search terms with low competition",
                t = this.props.searchStats;
            return React.createElement("div", {
                className: "score-section"
            }, React.createElement("div", {
                className: "header",
                "data-tip-message": e
            }, "Keyword Score"), React.createElement("div", {
                id: "keyword-score-mount",
                className: "kwins-container"
            }, React.createElement(KeywordInspector.Components.KeywordScores, t)))
        }
    }),
    SC_QueriesReport = React.createClass({
        displayName: "SC_QueriesReport",
        getInitialState: function() {
            return {
                queriesReady: !1,
                topQueriesHtml: null,
                risingQueriesHtml: null
            }
        },
        componentDidMount: function() {
            this.loadQueriesReports()
        },
        ensureData: function(e, t, a) {
            var s = !!a;
            return a || (a = new $.Deferred), KeywordInspector.getQueriesHtml(u.searchTerm(), t, e).done(function(t) {
                t || s ? a.resolve(t) : this.ensureData(e, null, a)
            }.bind(this)), a.promise()
        },
        loadQueriesReports: function() {
            var e = "today+12-m",
                t = this.ensureData(KeywordInspector.Trends.TopQueries, e).done(function(e) {
                    this.setState({
                        topQueriesHtml: e
                    })
                }.bind(this)),
                a = this.ensureData(KeywordInspector.Trends.RisingQueries, e).done(function(e) {
                    this.setState({
                        risingQueriesHtml: e
                    })
                }.bind(this));
            $.when(t, a).done(function() {
                this.setState({
                    queriesReady: !0
                })
            }.bind(this))
        },
        render: function() {
            if (!this.state.queriesReady) return null;
            var e = React.createElement(KeywordInspector.Components.QueriesReport, {
                topHtml: this.state.topQueriesHtml,
                risingHtml: this.state.risingQueriesHtml,
                header: "Related Queries"
            });
            return React.createElement("div", {
                id: "queries-report-mount",
                className: "kwins-container"
            }, e)
        }
    }),
    SC_Statistics = React.createClass({
        displayName: "SC_Statistics",
        statics: {
            getStats: function() {
                return {
                    highest_views: ytApi().countViews("max"),
                    avg_views: ytApi().countViews("average"),
                    added_last_7_days: ytApi().newVideos(),
                    cc: ytApi().cc(),
                    avg_age: ytApi().averageAge(),
                    times_in_title: ytApi().timesInTitles(u.searchTerm()),
                    times_in_desc: ytApi().timesInSearch(u.searchTerm()),
                    top_creator: ytApi().topCreator()
                }
            },
            nobreakStats: ["added_last_7_days", "cc"]
        },
        getInitialState: function() {
            return {
                statistics: SC_Statistics.getStats()
            }
        },
        componentDidMount: function() {
            setTimeout(function() {
                this.setState({
                    statistics: SC_Statistics.getStats()
                })
            }.bind(this), 1e3)
        },
        onCreatorClick: function() {
            window.open(this.getTopCreatorUrl())
        },
        getTopCreatorUrl: function() {
            var e = this.state.statistics.top_creator;
            return $('.yt-lockup-byline a:contains("' + e + '")').attr("href")
        },
        styleKey: function(e) {
            return e.replace(/_/g, " ").toUpperCase() + ":"
        },
        render: function() {
            var e = _.map(this.state.statistics, function(e, t) {
                var a = classNames("stat", {
                        nobreak: SC_Statistics.nobreakStats.indexOf(t) >= 0,
                        titleStat: "times_in_title".indexOf(t) >= 0,
                        descStats: "times_in_desc".indexOf(t) >= 0,
                        topCreator: "top_creator".indexOf(t) >= 0
                    }),
                    s = "top_creator".indexOf(t) >= 0 ? this.onCreatorClick : null,
                    n = _.isNumber(e) ? numbro(e).format("0,0") : e;
                return React.createElement("div", {
                    key: t,
                    className: a
                }, React.createElement("span", {
                    className: "title"
                }, this.styleKey(t)), React.createElement("span", {
                    className: "value",
                    onClick: s
                }, n))
            }.bind(this));
            return React.createElement("div", {
                className: "stats"
            }, e)
        }
    }),
    SC_TrendingVideos = React.createClass({
        displayName: "SC_TrendingVideos",
        componentWillMount: function() {
            TrendingVideosActions.fetch(u.searchTerm())
        },
        render: function() {
            return api().featurePermitted("search") ? React.createElement("div", {
                className: "trending-videos"
            }, React.createElement("div", {
                className: "header"
            }, "Trending Videos"), React.createElement("div", {
                className: "content trending-videos-mount vidiq-react"
            }, React.createElement(TrendingVideos, null))) : null
        }
    }),
    SearchCompanion = React.createClass({
        displayName: "SearchCompanion",
        statics: {
            inlineKeywordsFlag: function(e) {
                var t = "search_inline_keywords_enabled",
                    a = dataStore.getItem(t);
                return void 0 === a && void 0 === e ? (dataStore.setItem(t, !0), a = !0) : void 0 !== e && (dataStore.setItem(t, e), a = e, $(window).trigger("inline-keywords:visibility", e)), a
            },
            toggleCollapseFlag: function(e) {
                var t = "loginCollapse",
                    a = dataStore.getItem(t);
                return void 0 === a && void 0 === e ? (dataStore.setItem(t, !1), a = !1) : void 0 !== e && (dataStore.setItem(t, e), a = e), a
            }
        },
        getInitialState: function() {
            return {
                collapsed: SearchCompanion.toggleCollapseFlag(),
                inlineKeywords: SearchCompanion.inlineKeywordsFlag(),
                searchTerm: u.searchTerm(),
                hotSearchData: {},
                loading: !0,
                justUpgraded: u.pruneUpgraded()
            }
        },
        componentDidMount: function() {
            u.track("User Loaded Search"), HS.get({
                query: this.state.searchTerm,
                kwscore: !0
            }).done(function(e) {
                this.setState({
                    hotSearchData: e
                })
            }.bind(this)).always(function() {
                this.setState({
                    loading: !1
                })
            }.bind(this))
        },
        toggleCollapse: function() {
            var e = !this.state.collapsed;
            this.setState({
                collapsed: e
            }), SearchCompanion.toggleCollapseFlag(e)
        },
        toggleInlineKeywords: function() {
            var e = !this.state.inlineKeywords;
            u.track(e ? "Enable" : "Disable Search Inline Keywords"), this.setState({
                inlineKeywords: e
            }), SearchCompanion.inlineKeywordsFlag(e)
        },
        render: function() {
            var e = classNames("yt-search-stats-container", {
                collapsed: this.state.collapsed
            });
            return React.createElement("div", {
                className: e
            }, React.createElement("div", {
                className: "yt-search-stats"
            }, React.createElement(SC_Header, {
                collapse: this.toggleCollapse
            }), this.content()))
        },
        content: function() {
            return React.createElement("div", {
                className: "content"
            }, this.thanksMessage(), this.searchTermStats(), React.createElement(SC_InlineKeywordsOption, {
                show: this.state.inlineKeywords,
                toggle: this.toggleInlineKeywords
            }), React.createElement(SC_Statistics, null), React.createElement(SC_KeywordScore, {
                searchStats: this.state.hotSearchData.search_stats
            }), React.createElement(SC_QueriesReport, null), React.createElement(TopSearchKeywords, {
                hotSearchData: this.state.hotSearchData
            }), React.createElement(UpsellKeywords, {
                omittedCount: this.state.hotSearchData.omitted
            }), React.createElement(SC_TrendingVideos, null), React.createElement(UpsellSearch, {
                hotSearchData: this.state.hotSearchData
            }))
        },
        thanksMessage: function() {
            return this.state.justUpgraded ? React.createElement("div", {
                className: "prompt"
            }, "Thanks for signing up!") : void 0
        },
        searchTermStats: function() {
            return React.createElement("div", {
                className: "search-term-stats"
            }, React.createElement("div", {
                className: "dark stat-title"
            }, "SEARCH TERM"), React.createElement("span", {
                className: "search-term"
            }, this.state.searchTerm))
        }
    }),
    TopSearchKeywords = React.createClass({
        displayName: "TopSearchKeywords",
        propTypes: {
            hotSearchData: React.PropTypes.object
        },
        getKeywords: function() {
            return this.props.hotSearchData.keywords.map(function(e, t) {
                return React.createElement(Keyword, {
                    key: t,
                    li: !0,
                    kwObject: e
                })
            })
        },
        copyTags: function() {
            var e = _.pluck(this.props.hotSearchData.keywords, "keyword");
            copyTagsGeneral(e)
        },
        render: function() {
            if (_.isEmpty(this.props.hotSearchData)) return null;
            if (this.props.hotSearchData.keywords.length < 1) return React.createElement("p", {
                className: "missing-data"
            }, "No related keywords found");
            var e = "These tags are focused for improving search views";
            return React.createElement("div", {
                className: "tag-section"
            }, React.createElement("div", {
                className: "header",
                "data-tip-message": e
            }, "Top Search Keywords"), React.createElement("button", {
                onClick: this.copyTags,
                className: "copy-tags",
                title: "Copy tags to clipboard"
            }), React.createElement("ul", {
                className: "tags"
            }, this.getKeywords()))
        }
    }),
    UpsellKeywords = React.createClass({
        displayName: "UpsellKeywords",
        propTypes: {
            omittedCount: React.PropTypes.number
        },
        getInitialState: function() {
            return {
                clickedUpsell: !1
            }
        },
        onClickUpgrade: function() {
            u.track("User clicked upgrade button on search page"), this.setState({
                clickedUpsell: !0
            })
        },
        getMessage: function() {
            return this.state.clickedUpsell ? "Don't forget to refresh after you upgrade!" : "Want " + this.props.omittedCount + " more recommendations for this search term?"
        },
        render: function() {
            return api().featurePermitted("search") || !_.isNumber(this.props.omittedCount) ? null : React.createElement("div", {
                className: "upsell"
            }, React.createElement("h2", {
                className: "top-search-kw-upsell-pitch"
            }, this.getMessage()), React.createElement("a", {
                className: "top-search-kw-upsell-link btn upgradeButton",
                href: "https://app.vidiq.com/plans",
                target: "_blank",
                onClick: this.onClickUpgrade
            }, "Upgrade Now!"))
        }
    }),
    UpsellSearch = React.createClass({
        displayName: "UpsellSearch",
        propTypes: {
            hotSearchData: React.PropTypes.object.isRequired
        },
        shouldShow: function() {
            var e = this.props.hotSearchData,
                t = _.isEmpty(e) || _.isEmpty(e.keywords);
            return !api().featurePermitted("search") && t
        },
        componentDidMount: function() {
            this.shouldShow() && u.track("Search Free Upsell")
        },
        render: function() {
            return this.shouldShow() ? React.createElement("div", {
                className: "upsell"
            }, React.createElement("img", {
                src: this.getUpsellImg(),
                alt: "vidIQ"
            }), React.createElement("div", {
                className: "overlay"
            }, React.createElement("h2", null, "Improve your videos' search traffic"), React.createElement("p", null, "Get access to top related keywords and trending videos you can use", " ", "to improve your search ranking"), React.createElement("a", {
                href: "https://app.vidiq.com/plans",
                target: "_blank",
                className: "btn upgradeButton"
            }, "Upgrade Now!"))) : null
        },
        getUpsellImg: function() {
            return chrome.extension.getURL("images/upsell-search.jpg")
        }
    }),
    SearchInlineER = React.createClass({
        displayName: "SearchInlineER",
        propTypes: {
            engagementRate: React.PropTypes.string.isRequired,
            videoId: React.PropTypes.string.isRequired
        },
        render: function() {
            if (!this.props.engagementRate) return null;
            var e = "engagement-rate-" + this.props.videoId,
                t = "Engagement Rate (ER) is a measure of all discovered engagements as a percentage of total views.";
            return React.createElement("span", {
                id: e,
                className: "engagement-rate",
                "data-tip-message": t
            }, React.createElement("span", {
                className: "value"
            }, this.props.engagementRate), React.createElement("span", {
                className: "percent"
            }, "%"), React.createElement("span", {
                className: "label"
            }, "ER"))
        }
    }),
    SearchInlineKeywords = React.createClass({
        displayName: "SearchInlineKeywords",
        propTypes: {
            videoId: React.PropTypes.string.isRequired
        },
        getInitialState: function() {
            return this.store = VideoInfoStore.id(this.props.videoId), {
                store: this.store.getData(),
                visible: SearchCompanion.inlineKeywordsFlag()
            }
        },
        componentWillMount: function() {
            $(window).on("inline-keywords:visibility", this.onChangeVisibility), this.store.addChangeListener(this.onStoreChange), VideoInfoActions.scrapeVideoPage(this.props.videoId)
        },
        componentWillUnmount: function() {
            $(window).off("inline-keywords:visibility", this.onChangeVisibility), this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        onChangeVisibility: function(e, t) {
            this.setState({
                visible: t
            }, this.ensureKeywords)
        },
        copyTags: function() {
            copyTagsGeneral(this.state.store.keywords)
        },
        render: function() {
            if (!this.state.store.keywords || _.isEmpty(this.state.store.keywords)) return null;
            var e = chrome.extension.getURL("images/vidiq_dark.svg"),
                t = api().getLogoBadge(),
                a = api().getUserType(),
                s = 0,
                n = this.state.store.keywords.map(function(e, t) {
                    return s += e.length, React.createElement(Keyword, {
                        key: t,
                        keyword: e
                    })
                }),
                i = 50 * Math.ceil(s / 50),
                o = {
                    maxHeight: this.state.visible ? i + "px" : "0px"
                };
            return React.createElement("div", {
                className: "inline-keywords",
                style: o
            }, React.createElement("div", {
                className: "logo-group"
            }, React.createElement("img", {
                className: "vidiq-logo",
                src: e,
                alt: "vidIQ"
            }), React.createElement("img", {
                className: "vidiq-badge",
                src: t,
                alt: a
            })), React.createElement("button", {
                onClick: this.copyTags,
                className: "copy-tags",
                title: "Copy tags to clipboard"
            }), n)
        }
    }),
    SearchInlinePopover = React.createClass({
        displayName: "SearchInlinePopover",
        propTypes: {
            type: React.PropTypes.string.isRequired,
            videoId: React.PropTypes.string.isRequired,
            stats: React.PropTypes.object.isRequired
        },
        getInitialState: function() {
            return {
                show: !1,
                left: 0
            }
        },
        componentWillMount: function() {
            $(window).on("vidiq:popover:" + this.getTriggerName() + ":toggle", this.togglePopover)
        },
        componentWillUnmount: function() {
            $(window).off("vidiq:popover:" + this.getTriggerName() + ":toggle", this.togglePopover)
        },
        getTriggerName: function() {
            return this.props.type + "-" + this.props.videoId
        },
        togglePopover: function(e, t) {
            this.setState({
                show: !this.state.show,
                left: t.left
            })
        },
        getIndividualStats: function() {
            return _.keys(this.props.stats).map(function(e, t) {
                return "total" === e ? null : React.createElement("p", {
                    key: t,
                    className: "individual-stat"
                }, React.createElement("span", {
                    className: "number"
                }, u.numbro(this.props.stats[e])), " ", e)
            }.bind(this))
        },
        render: function() {
            var e = this.props.type + "-stats-" + this.props.videoId,
                t = chrome.extension.getURL("images/vidiq_dark.svg"),
                a = {
                    left: this.state.left,
                    opacity: this.state.show ? 1 : 0,
                    visibility: this.state.show ? "visible" : "hidden"
                };
            return React.createElement("div", {
                id: e,
                className: "popover",
                style: a
            }, this.getIndividualStats(), React.createElement("p", {
                className: "powered-by"
            }, "Powered by ", React.createElement("img", {
                src: t
            })))
        }
    }),
    SearchInlineSocialStats = React.createClass({
        displayName: "SearchInlineSocialStats",
        propTypes: {
            videoId: React.PropTypes.string.isRequired,
            tooltipsOnly: React.PropTypes.bool
        },
        getInitialState: function() {
            return this.store = VideoInfoStore.id(this.props.videoId), {
                store: this.store.getData()
            }
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange), VideoInfoActions.getSocialStats(this.props.videoId)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        componentWillReceiveProps: function(e) {
            this.store = VideoInfoStore.id(e.videoId), this.store.addChangeListener(this.onStoreChange), this.setState({
                store: this.store.getData()
            })
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        getTooltip: function(e) {
            if (!this.props.tooltipsOnly) return null;
            var t = this.state.store.socialStats.socialMedia[e];
            switch (e) {
                case "youtube":
                    return "<div>" + t.likes + " likes<br />" + t.dislikes + " dislikes<br />" + t.comments + " comments</div>";
                case "facebook":
                    return "<div>" + t.likes + " likes<br />" + t.comments + " comments<br />" + t.shares + " shares</div>"
            }
        },
        render: function() {
            if (!this.state.store.socialStats) return null;
            var e = ["youtube", "facebook"],
                t = e.map(function(e, t) {
                    return React.createElement(SearchInlineStat, {
                        key: t,
                        type: e,
                        videoId: this.props.videoId,
                        total: this.state.store.socialStats.socialMedia[e].total,
                        tooltip: this.getTooltip(e)
                    })
                }.bind(this)),
                a = this.props.tooltipsOnly ? null : e.map(function(e, t) {
                    return React.createElement(SearchInlinePopover, {
                        key: t,
                        type: e,
                        videoId: this.props.videoId,
                        stats: this.state.store.socialStats.socialMedia[e]
                    })
                }.bind(this));
            return React.createElement("div", {
                className: "vidiq-social-stats"
            }, t, a, React.createElement(SearchInlineER, {
                engagementRate: this.state.store.socialStats.engagementRate,
                videoId: this.props.videoId
            }))
        }
    }),
    SearchInlineStat = React.createClass({
        displayName: "SearchInlineStat",
        propTypes: {
            type: React.PropTypes.string.isRequired,
            videoId: React.PropTypes.string.isRequired,
            total: React.PropTypes.number.isRequired,
            tooltip: React.PropTypes.string
        },
        togglePopover: function(e) {
            if (!this.props.tooltip) {
                var t = e.target.offsetLeft,
                    a = this.props.type + "-" + this.props.videoId;
                $(window).trigger("vidiq:popover:" + a + ":toggle", {
                    left: t
                })
            }
        },
        render: function() {
            var e = "stat " + this.props.type + "-stats",
                t = "#" + this.props.type + "-stats-" + this.props.videoId;
            return React.createElement("span", {
                className: e,
                "data-tip-message": this.props.tooltip,
                "data-popover": t,
                onMouseEnter: this.togglePopover,
                onMouseLeave: this.togglePopover
            }, u.numbro(this.props.total))
        }
    }),
    SearchInlineUpsell = React.createClass({
        displayName: "SearchInlineUpsell",
        statics: {
            hiddenFlag: function(e) {
                var t = "hide-search-social-stats-upsell",
                    a = dataStore.getItem(t);
                return void 0 === a && void 0 === e ? (dataStore.setItem(t, !1), a = !1) : void 0 !== e && (dataStore.setItem(t, e), a = e), a
            }
        },
        getInitialState: function() {
            return {
                clicked: !1,
                hidden: SearchInlineUpsell.hiddenFlag()
            }
        },
        hide: function(e) {
            e.preventDefault(), this.setState({
                hidden: !0
            }), SearchInlineUpsell.hiddenFlag(!0)
        },
        onClickUpgrade: function() {
            u.track("User clicked upgrade button on social stats upsell"), this.setState({
                clicked: !0
            })
        },
        render: function() {
            var e = chrome.extension.getURL("images/upsell-social-stats.png"),
                t = {
                    display: this.state.hidden ? "none" : "block"
                },
                a = "Remember to refresh after you upgrade!",
                s = "Upgrade to view insights on all videos",
                n = this.state.clicked ? a : s;
            return React.createElement("div", {
                className: "vidiq-social-stats-upsell",
                style: t
            }, React.createElement("a", {
                href: "#",
                className: "upsell-close-link",
                onClick: this.hide
            }, ""), React.createElement("img", {
                src: e,
                className: "upsell-image"
            }), React.createElement("p", {
                className: "upsell-pitch"
            }, n), React.createElement("a", {
                href: "https://app.vidiq.com/plans",
                target: "_blank",
                className: "btn upsell-upgrade-button",
                onClick: this.onClickUpgrade
            }, "Upgrade Now!"))
        }
    }),
    SimpleVideoItem = React.createClass({
        displayName: "SimpleVideoItem",
        propTypes: {
            data: React.PropTypes.shape({
                id: React.PropTypes.string.isRequired,
                thumbnail: React.PropTypes.string.isRequired,
                title: React.PropTypes.string.isRequired,
                description: React.PropTypes.string,
                duration: React.PropTypes.string
            }).isRequired
        },
        render: function() {
            var e = "/watch?v=" + this.props.data.id;
            return React.createElement("div", {
                className: "vidiq-video-list-item simple-video-item"
            }, React.createElement("div", {
                className: "thumb-container"
            }, React.createElement("img", {
                src: this.props.data.thumbnail,
                className: "thumb"
            })), React.createElement("div", {
                className: "video-right"
            }, React.createElement("h4", null, React.createElement("a", {
                href: e,
                target: "new"
            }, this.props.data.title)), this.descriptionPart()))
        },
        descriptionPart: function() {
            var e = this.props.data.description;
            if (e) return React.createElement("p", {
                className: "vidiq-item-description"
            }, u.truncate(this.props.data.description, 80))
        }
    }),
    Speedometer = React.createClass({
        displayName: "Speedometer",
        propTypes: {
            percent: React.PropTypes.number,
            vph: React.PropTypes.number
        },
        getInitialState: function() {
            var e = Math.log(10),
                t = Math.pow(10, 6),
                a = Math.log(this.props.vph) / e / (Math.log(t) / e);
            return window.location.href.match(/VIDIQ_LINEAR/) && (a = this.props.vph / t), {
                _percent: Math.min(this.props.percent || a, 1),
                percent: 0
            }
        },
        componentDidMount: function() {
            this._timeout = setTimeout(function() {
                this.setState({
                    percent: this.state._percent
                });
                var e = -1;
                this._interval = setInterval(function() {
                    if (!(0 > e)) {
                        var t = .03;
                        ++e % 2 === 0 && (t = -t), this.setState({
                            percent: this.state.percent + t
                        })
                    }
                }.bind(this), 600), setTimeout(function() {
                    e = 0
                }, 500 * Math.random())
            }.bind(this), 500)
        },
        componentWillUnmount: function() {
            clearTimeout(this._timeout), clearInterval(this._interval)
        },
        render: function() {
            var e = {
                transform: "rotate(" + 180 * this.state.percent + "deg)"
            };
            return React.createElement("div", {
                className: "speedometer"
            }, React.createElement("div", {
                className: "bar",
                style: e
            }))
        }
    }),
    Spinner = React.createClass({
        displayName: "Spinner",
        propTypes: {
            classes: React.PropTypes.string,
            size: React.PropTypes.string,
            container: React.PropTypes.bool
        },
        shouldComponentUpdate: function() {
            return !1
        },
        render: function() {
            var e = chrome.extension.getURL("images/big_loader.gif"),
                t = {
                    small: 15,
                    medium: 25,
                    big: 35
                },
                a = t[this.props.size || "medium"],
                s = ["react-spinner", this.props.classes].join(" "),
                n = React.createElement("img", {
                    src: e,
                    width: a,
                    height: a,
                    className: s
                });
            return this.props.container ? React.createElement("div", {
                className: "react-spinner-container"
            }, n) : n
        }
    }),
    StoreChooser = React.createClass({
        displayName: "StoreChooser",
        propTypes: {
            items: React.PropTypes.array.isRequired,
            namespace: React.PropTypes.string.isRequired,
            filters: React.PropTypes.object,
            getFilterable: React.PropTypes.func,
            generator: React.PropTypes.func.isRequired,
            perPage: React.PropTypes.number
        },
        getInitialState: function() {
            return this.store = ChoicesStore.id(this.props.namespace), this.getState()
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState(this.getState())
        },
        getState: function() {
            return {
                selected: this.store.getData()
            }
        },
        generateItem: function(e, t) {
            var a = this.store.isSelected(t);
            return this.props.generator(e, {
                index: t,
                selected: a,
                toggleSelected: _.partial(this.store.actions.toggle, t)
            })
        },
        render: function() {
            var e = "general-chooser-items";
            return this.props.filters ? React.createElement("div", {
                className: e
            }, React.createElement(Filter, {
                items: this.props.items,
                perPage: this.props.perPage,
                getFilterable: this.props.getFilterable,
                generator: this.generateItem,
                filters: this.props.filters
            })) : React.createElement("div", {
                className: e
            }, React.createElement(Paginator, {
                items: this.props.items,
                perPage: this.props.perPage,
                generator: this.generateItem
            }))
        }
    }),
    ArchiveAndSyndicate = React.createClass({
        displayName: "ArchiveAndSyndicate",
        propTypes: {
            video: React.PropTypes.object.isRequired
        },
        getInitialState: function() {
            return this.getStateFromStores()
        },
        getStateFromStores: function() {
            var e = MasterVideosStore.findByTempId(this.props.video.id),
                t = {
                    masterVideo: e,
                    archived: e && e.uploadRecord && e.uploadRecord.complete,
                    upload: e ? e.upload : null,
                    progress: e && e.upload ? e.upload.getProgress() : 0
                };
            return !(this.state || {}).file && e && e.upload && (t.file = e.upload.file), t.uploading = e && e.upload && t.progress < 1, t
        },
        meta: function s() {
            var e = this.state,
                t = e.masterVideo || {},
                s = {
                    needsFile: !e.file && !e.archived,
                    confirmed: e.archived || t.upload
                };
            return s.loading = _.isEmpty(t) || t.syncing, s.loading && t && s.confirmed && (s.loading = !1), s
        },
        componentDidMount: function() {
            u.track("Opened Archive and Syndicate"), MasterVideosActions.loadFromYoutubeId(this.props.video.id), MasterVideosStore.addChangeListener(this.onStoreChange), $(window).on("upload-progress:" + this.props.video.id, this.onStoreChange), this.updateModal()
        },
        componentWillUnmount: function() {
            MasterVideosStore.removeChangeListener(this.onStoreChange), $(window).off("upload-progress:" + this.props.video.id, this.onStoreChange)
        },
        updateModal: function() {
            var e = ["close"];
            this.state.uploading ? (Modal.tighten(), e = [{
                text: "Cancel",
                classes: "secondary",
                onClick: this.onCancel
            }]) : Modal.relax(), Modal.setButtons(e)
        },
        startUpload: function() {
            var e = this.props.video.id;
            MasterVideosStore.setFile(e, this.state.file), MasterVideosStore.startUpload(e), MasterVideosStore.setYoutubeId(e, e)
        },
        resetFile: function() {
            this.setState({
                file: null
            })
        },
        onStoreChange: function() {
            this.setState(this.getStateFromStores(), this.updateModal)
        },
        onChooseFile: function(e) {
            var t = e.target.files[0];
            this.setState({
                file: t
            })
        },
        onCancel: function() {
            MasterVideosActions.cancelUpload(this.props.video.id), this.resetFile()
        },
        onDownload: function() {
            u.track("Downloaded archived video")
        },
        render: function() {
            var e, t, a = this.meta();
            return api().featurePermitted("syndication") ? a.loading ? t = React.createElement(LoadingPane, {
                spinner: !0
            }) : e = a.needsFile ? this.chooseFilePart() : a.confirmed ? this.mainPart() : this.confirmPart() : e = this.upsellPart(), React.createElement("div", {
                className: "archive-and-syndicate"
            }, t, this.videoInfoPart(), e)
        },
        videoInfoPart: function() {
            return React.createElement(SimpleVideoItem, {
                data: this.props.video
            })
        },
        chooseFilePart: function() {
            return React.createElement("div", {
                className: "choose-file-part"
            }, React.createElement("p", null, "This video hasn't been archived yet. Choose the ", React.createElement("b", null, "original", " ", "source file"), " of this video to archive it."), React.createElement("input", {
                type: "file",
                onChange: this.onChooseFile
            }), React.createElement("p", null, "When archiving is complete, you'll be able to syndicate the video", " ", "to ", React.createElement("b", null, "Facebook"), "."))
        },
        confirmPart: function() {
            return React.createElement("div", {
                className: "confirm-part"
            }, React.createElement("p", {
                className: "file-chosen"
            }, "File chosen: ", React.createElement("b", {
                className: "file-name"
            }, this.state.file.name)), React.createElement("p", null, "Please confirm that this matches the associated video."), React.createElement("div", {
                className: "button-section"
            }, React.createElement(Button, {
                onClick: this.startUpload,
                text: "Confirm File"
            }), React.createElement(Button, {
                secondary: !0,
                onClick: this.resetFile,
                text: "Choose Another File"
            })))
        },
        mainPart: function() {
            var e = [{
                name: "Download",
                content: this.archivePart()
            }, {
                name: "Facebook Syndication",
                content: this.syndicationSettingsPart()
            }];
            return React.createElement("div", {
                className: "main-part"
            }, this.progressPart(), React.createElement(Tabs, {
                tabs: e
            }))
        },
        progressPart: function() {
            if (!this.state.archived) {
                var e = 100 * this.state.progress;
                if (100 !== e) return React.createElement("div", {
                    className: "progress-part"
                }, React.createElement("h2", null, "Uploading... ", u.precision(e, 2), "%"), React.createElement(ProgressBar, {
                    percentComplete: e
                }))
            }
        },
        archivePart: function() {
            if (!this.state.archived) return React.createElement("div", {
                className: "archive-part archive-part-waiting"
            }, React.createElement("p", null, "Waiting for upload to finish..."));
            var e = this.state.masterVideo.downloadUrl,
                t = this.state.masterVideo.uploadRecord,
                a = moment(t.created_at, moment.ISO_8601).format("YYYY-MM-DD h:mm A");
            return React.createElement("div", {
                className: "archive-part"
            }, React.createElement("div", {
                className: "archive-columns"
            }, React.createElement("div", {
                className: "column-a"
            }, React.createElement("a", {
                className: "vidiq-button",
                href: e,
                onClick: this.onDownload,
                download: t.name
            }, "Download File")), React.createElement("div", {
                className: "column-b"
            }, React.createElement("ul", null, React.createElement("li", null, React.createElement("span", {
                className: "label"
            }, "Name"), React.createElement("span", {
                className: "value"
            }, t.name)), React.createElement("li", null, React.createElement("span", {
                className: "label"
            }, "Type"), React.createElement("span", {
                className: "value"
            }, t.mime_type)), React.createElement("li", null, React.createElement("span", {
                className: "label"
            }, "Uploaded"), React.createElement("span", {
                className: "value"
            }, a))))))
        },
        syndicationSettingsPart: function() {
            return React.createElement("div", {
                className: "syn-part"
            }, React.createElement(FacebookSyndicationSettings, {
                id: this.props.video.id,
                standalone: !0,
                onClose: this.hideFacebookSyn
            }))
        },
        upsellPart: function() {
            return React.createElement(SyndicationPrompt, {
                always: !0,
                plain: !0
            })
        }
    }),
    FacebookAuthButton = React.createClass({
        displayName: "FacebookAuthButton",
        propTypes: {
            text: React.PropTypes.string,
            classes: React.PropTypes.string
        },
        onClick: function() {
            var e = chrome.extension.getURL("fbauth.html"),
                t = 600,
                a = window.screenY + Math.round((window.outerHeight - t) / 2),
                s = window.screenX + Math.round((window.outerWidth - t) / 2);
            window.open(e, "", "width=" + t + ", height=" + t + ", top=" + a + ", left=" + s)
        },
        render: function() {
            var e = classNames("button", "facebook-auth-button", this.props.classes);
            return React.createElement("button", {
                className: e,
                onClick: this.onClick
            }, this.props.text || "Authenticate with Facebook")
        }
    }),
    FacebookSyndicationSettings = React.createClass({
        displayName: "FacebookSyndicationSettings",
        propTypes: {
            id: React.PropTypes.string.isRequired,
            standalone: React.PropTypes.bool,
            onClose: React.PropTypes.func
        },
        timeFormat: "YYYY-MM-DD hh:mm a",
        getInitialState: function() {
            return this.getStateFromStores()
        },
        componentDidMount: function() {
            MasterVideosStore.addChangeListener(this.onStoreChange), FacebookIntegrationStore.addChangeListener(this.onStoreChange), FacebookIntegrationStore.ensureFetched(), this.updateModal(), this.setupDatetimePicker(), log("FacebookSyndicationSettings#componentDidMount >", this.state, this.errors())
        },
        componentWillUnmount: function() {
            MasterVideosStore.removeChangeListener(this.onStoreChange), FacebookIntegrationStore.removeChangeListener(this.onStoreChange)
        },
        setupDatetimePicker: function() {
            $("#ui-datepicker-div.vidiq-jquery-ui").remove();
            var e = $("#fb-syn-publish-date");
            if (e.length > 0) {
                e.datetimepicker({
                    showTime: !0,
                    oneLine: !0,
                    dateFormat: "yy-mm-dd",
                    timeFormat: "hh:mm tt",
                    minDateTime: this.getMinDateTime(),
                    maxDateTime: moment().add(6, "months").toDate(),
                    showButtonPanel: !1,
                    onSelect: this.setPublishTime
                });
                var t = e.datepicker("widget");
                t.addClass("vidiq-jquery-ui")
            }
        },
        updateModal: function() {
            this.props.standalone || (this.state.syncing ? Modal.lock() : Modal.unlock(), Modal.setButtons(this.getButtons()))
        },
        getStateFromStores: function() {
            var e, t = MasterVideosStore.findByTempId(this.props.id),
                a = t.facebookVideo || {},
                s = FacebookIntegrationStore.getData().integration,
                n = FacebookIntegrationStore.getData().targetPage,
                i = (s || {}).pages || [];
            if (this.state) {
                e = _.extend({}, this.state.fields, {
                    id: a.id,
                    facebook_id: a.facebook_id,
                    syndication_status: a.syndication_status,
                    syndication_error_code: a.syndication_error_code
                });
                var o = !this.state.fbInt,
                    r = !this.state.fields.facebook_page_id,
                    c = o && r && n;
                c && (e.facebook_page_id = n.id)
            } else e = _.extend({}, a), !e.facebook_page_id && n && (e.facebook_page_id = n.id), null === e.published && (e.published = !0), null === e.unpublished_type && (e.unpublished_type = "PUBLISHED"), null === e.scheduled_publish_time && (e.scheduled_publish_time = this.getValidPublishTime()), null === e.call_to_action && (e.call_to_action = "NO_BUTTON");
            var l = u.safely(function() {
                return t.upload.file.name
            });
            return l || (l = u.safely(function() {
                return t.uploadRecord.name
            })), {
                fbInt: s,
                fbPages: i,
                syncing: t.syncingFacebook,
                ytStatus: t.youtubeStatus,
                fileName: l,
                fields: e
            }
        },
        onStoreChange: function() {
            this.setState(this.getStateFromStores(), this.updateModal)
        },
        getButtons: function() {
            var e = "error" === this.state.fields.syndication_status,
                t = "duplicate" === this.state.ytStatus,
                a = this.errors().length > 0 || this.state.syncing;
            return t || this.state.fields.id || e ? ["close"] : MasterVideosStore.canSyndicate(this.props.id) ? ["cancel", {
                text: "Syndicate to Facebook",
                position: "right",
                onClick: this.syndicate,
                disabled: a
            }] : ["cancel", {
                text: "Save Draft",
                position: "right",
                onClick: this.onSaveClick,
                disabled: a
            }]
        },
        syndicate: function() {
            this.saveData() && MasterVideosActions.syndicate(this.props.id, "facebook")
        },
        getMinDateTime: function() {
            return moment().add(15, "minutes").toDate()
        },
        getValidPublishTime: function(e) {
            var t = moment(e, moment.ISO_8601);
            t.isValid() || (t = moment(e, this.timeFormat));
            var a, s = this.getMinDateTime();
            return a = !e || t.isBefore(s) ? s : t, a.toISOString()
        },
        saveData: function() {
            if (this.errors().length) return void this.updateModal();
            var e = this.state.fields;
            return e.scheduled_publish_time = this.getValidPublishTime(e.scheduled_publish_time), e.published = "PUBLISHED" === e.unpublished_type, "PUBLISHED" === e.unpublished_type && (e.unpublished_type = null), "SCHEDULED" !== e.unpublished_type && (e.scheduled_publish_time = null), "NO_BUTTON" === e.call_to_action && (e.call_to_action_url = null), MasterVideosActions.updateFacebookVideo(this.props.id, e), !0
        },
        onSaveClick: function() {
            this.saveData() && (this.props.standalone || Modal.destroy())
        },
        onChange: function(e) {
            var t = this.state.fields,
                a = e.target.dataset,
                s = "checkbox" === e.target.getAttribute("type") ? e.target.checked : e.target.value;
            if ("" === s && (s = null), "show-in-timeline" === a.custom) t.no_story = !s;
            else if (a.field) {
                if ("facebook_page_id" === a.field && (s = parseInt(s, 10), isFinite(s) || (s = null)), "unpublished_type" === a.field) {
                    var n = $("#fb-syn-publish-date");
                    n.length > 0 && $("#fb-syn-publish-date").datetimepicker("option", "minDateTime", this.getMinDateTime())
                }
                t[a.field] = s
            }
            this.setState({
                fields: t
            }), this.updateModal()
        },
        onChangeScheduledTime: function(e) {
            this._timeout && clearTimeout(this._timeout);
            var t = $("#fb-syn-publish-date"),
                a = t.datepicker("getDate"),
                s = e.target.value,
                n = moment(s, this.timeFormat).isValid();
            n && (s = moment(s, this.timeFormat).format(this.timeFormat)), this._timeout = setTimeout(function() {
                var e = t[0].selectionStart;
                t.datepicker("setDate", n ? s : a), t[0].setSelectionRange(e, e), n && this.setPublishTime(s)
            }.bind(this), 500)
        },
        setPublishTime: function(e) {
            if (!e) return null;
            var t = this.state.fields;
            t.scheduled_publish_time = this.getValidPublishTime(e), log("FacebookSyndicationSettings#setPublishTime > %s", e, t.scheduled_publish_time), this.setState({
                fields: t
            })
        },
        getOptions: function(e) {
            return _.map(e, function(e, t) {
                var a = _.isObject(e) ? e : null;
                return a || (a = {
                    id: e,
                    name: this.getOptionName(e)
                }), React.createElement("option", {
                    value: a.id,
                    key: t
                }, a.name)
            }, this)
        },
        getOptionName: function(e) {
            if ("BEAUTY_FASHION" === e) return "Beauty/Fashion";
            if ("FOOD_HEALTH" === e) return "Food/Health";
            if ("NO_BUTTON" === e) return "None";
            var t = e.replace(/_/g, " ").toLowerCase();
            return t[0].toUpperCase() + t.slice(1)
        },
        isRequired: function(e) {
            var t = this.state.fields;
            switch (e) {
                case "category":
                    return !0;
                case "no_story":
                    return !0;
                case "facebook_page_id":
                    return !0;
                case "scheduled_publish_time":
                    return "SCHEDULED" === t.unpublished_type;
                case "call_to_action_url":
                    return "NO_BUTTON" !== t.call_to_action
            }
        },
        getError: function(e) {
            var t = this.state.fields[e],
                a = void 0 === t || null === t,
                s = this.isRequired(e);
            if (s && a) return "This field is required";
            if (s)
                if (void 0 !== t && null !== t) switch (e) {
                    case "call_to_action_url":
                        if (!u.validateUrl(t)) return "Must be a valid URL"
                } else {
                    if (s) return "This field is required";
                    if (this.isRequired(e)) return "This field is required"
                }
        },
        errors: function() {
            return _.compact(_.map(this.state.fields, function(e, t) {
                return this.getError(t)
            }, this))
        },
        disabled: function() {
            var e = "duplicate" === this.state.ytStatus,
                t = _.contains(["pending", "syndicating", "complete"], this.state.fields.syndication_status);
            return e || t
        },
        statusMessage: function() {
            var e = MasterVideosStore.canSyndicate(this.props.id, "facebook"),
                t = this.state.fields.syndication_status,
                a = "complete" === t ? "https://facebook.com/" + this.state.fields.facebook_id : null;
            switch (t || (t = e ? "primed" : "waiting"), "duplicate" === this.state.ytStatus && (t = "duplicate"), t) {
                case "duplicate":
                    return "This video is a duplicate";
                case "waiting":
                    return "Waiting. You can edit details";
                case "primed":
                    return "Ready to syndicate on your command!";
                case "pending":
                    return "Pending. Video submitted for syndication";
                case "syndicating":
                    return "Syndicating. We are sending your video to Facebook!";
                case "complete":
                    return React.createElement("span", null, React.createElement("span", null, "Syndication complete!"), React.createElement("a", {
                        href: a,
                        className: "status-btn btn btn-small",
                        target: "_blank"
                    }, "View on Facebook"));
                case "error":
                    return React.createElement("span", null, React.createElement("span", null, "Oops, syndication failed. Please try again."), React.createElement("button", {
                        className: "status-btn btn btn-small",
                        onClick: this.syndicate
                    }, "Retry Syndication"))
            }
            return t
        },
        statusType: function() {
            var e = this.state.ytStatus,
                t = this.state.fields.syndication_status,
                a = "duplicate" === e || "error" === t,
                s = "complete" === t;
            return a ? "bad" : s ? "good" : "neutral"
        },
        spinnerPart: function() {
            var e = this.state.fields.syndication_status;
            return "pending" === e || "syndicating" === e ? React.createElement(Spinner, {
                size: "medium"
            }) : void 0
        },
        fbPagePart: function() {
            var e = this.state.fields.facebook_page_id;
            if (e) {
                var t = _.findWhere(this.state.fbPages, {
                    id: e
                });
                return React.createElement("img", {
                    className: "fb-page-image",
                    src: t.picture_url
                })
            }
        },
        errorPart: function(e) {
            var t = this.getError(e);
            if (t) return React.createElement("div", {
                className: "error-message"
            }, t)
        },
        syndicationErrorMessagePart: function() {
            if ("error" === this.state.fields.syndication_status) {
                var e = FACEBOOK_ERROR_CODES[this.state.fields.syndication_error_code];
                if (e) {
                    var t = e.suggestion ? React.createElement("p", {
                        className: "error-suggestion"
                    }, React.createElement("b", null, "Suggestion:"), " ", e.suggestion) : null;
                    return React.createElement("div", {
                        className: "error-details"
                    }, React.createElement("p", {
                        className: "error-message"
                    }, React.createElement("b", null, e.error_code), "  ", e.message), t)
                }
            }
        },
        noFbPagesPart: function() {
            return _.isEmpty(this.state.fbPages) ? this.state.fbInt ? React.createElement("div", {
                className: "field info"
            }, React.createElement("h2", null, "Your Facebook account does not have access to a Page"), React.createElement("p", null, React.createElement("b", null, "vidIQ"), " can only syndicate videos to ", React.createElement("b", null, "Facebook Pages"), ".", React.createElement("br", null), "To proceed, create your own Facebook Page,", " ", "then click the button below."), React.createElement(FacebookAuthButton, {
                text: "Refresh Facebook Pages",
                classes: "btn btn-small"
            })) : this.noFbIntPart() : void 0
        },
        noFbIntPart: function() {
            return React.createElement("div", {
                className: "field info"
            }, React.createElement("h2", null, "Connect with Facebook to continue"), React.createElement(FacebookAuthButton, {
                classes: "btn btn-small"
            }))
        },
        loadingPart: function() {
            return React.createElement("div", {
                className: "field info"
            }, React.createElement(Spinner, {
                classes: "react-absolute-middle"
            }))
        },
        buttonSectionPart: function() {
            if (this.props.standalone) {
                var e = _.filter(this.getButtons(), function(e) {
                    return ["cancel", "close"].indexOf(e) < 0
                });
                if (0 !== e.length) return React.createElement(ButtonSection, {
                    buttons: e,
                    onClose: this.props.onClose
                })
            }
        },
        copyFromYouTube: function(e) {
            var t = this.props.id,
                a = $(".upload-item").filter(function() {
                    return $(this).data("vidiq-temp-id") === t
                });
            if (a) {
                var s = a.find(".video-settings-" + e).val();
                if (s) {
                    var n = this.state.fields;
                    n[e] = s.trim(), this.setState({
                        fields: n
                    })
                }
            }
        },
        render: function() {
            var e = FacebookSyndicationSettingsConstants,
                t = this.getOptions(e.FACEBOOK_CATEGORIES),
                a = this.getOptions(e.FACEBOOK_UNPUBLISHED_TYPES),
                s = this.getOptions(e.FACEBOOK_CALLS_TO_ACTION),
                n = this.state.fields.category,
                i = this.state.fields.unpublished_type,
                o = this.state.fields.call_to_action,
                r = React.createElement("option", {
                    value: ""
                }, "Choose..."),
                c = "vidiq-syn-settings-component";
            return this.state.fbInt ? React.createElement("div", {
                className: c
            }, React.createElement("header", null, React.createElement("div", {
                className: "status " + this.statusType()
            }, React.createElement("span", {
                className: "status-label"
            }, "Status:"), React.createElement("span", {
                className: "status-message"
            }, this.statusMessage(), this.spinnerPart()), this.syndicationErrorMessagePart())), React.createElement("div", {
                className: "field"
            }, React.createElement("label", {
                className: "inline"
            }, "File"), React.createElement("span", {
                className: "file-name"
            }, this.state.fileName)), this.noFbPagesPart(), this.fbPageField(r), React.createElement("div", {
                className: "field"
            }, React.createElement("label", {
                className: "inline",
                htmlFor: "fb-syn-title"
            }, "Title"), React.createElement("input", {
                type: "text",
                id: "fb-syn-title",
                "data-field": "title",
                value: this.state.fields.title,
                placeholder: "My title",
                disabled: this.disabled(),
                onChange: this.onChange
            }), this.copyFromYouTubeButton("title"), this.errorPart("title")), React.createElement("div", {
                className: "field"
            }, React.createElement("label", {
                className: "inline",
                htmlFor: "fb-syn-description"
            }, "Description"), React.createElement("textarea", {
                id: "fb-syn-description",
                "data-field": "description",
                value: this.state.fields.description,
                placeholder: "My description",
                disabled: this.disabled(),
                onChange: this.onChange
            }), this.copyFromYouTubeButton("description"), this.errorPart("description")), React.createElement("div", {
                className: "field"
            }, React.createElement("label", {
                className: "inline",
                htmlFor: "fb-syn-category"
            }, "Category"), React.createElement("select", {
                id: "fb-syn-category",
                "data-field": "category",
                defaultValue: n,
                disabled: this.disabled(),
                onChange: this.onChange
            }, r, t), this.errorPart("category")), React.createElement("div", {
                className: "field"
            }, React.createElement("label", {
                className: "inline",
                htmlFor: "fb-syn-embeddable"
            }, "Embeddable"), React.createElement("input", {
                type: "checkbox",
                id: "fb-syn-embeddable",
                "data-field": "embeddable",
                onChange: this.onChange,
                disabled: this.disabled(),
                checked: this.state.fields.embeddable
            }), this.errorPart("embeddable")), React.createElement("div", {
                className: "field"
            }, React.createElement("label", {
                className: "inline",
                htmlFor: "fb-syn-publishing-status"
            }, "Publishing Status"), React.createElement("select", {
                id: "fb-syn-publishing-status",
                "data-field": "unpublished_type",
                defaultValue: i,
                disabled: this.disabled(),
                onChange: this.onChange
            }, a), this.errorPart("published")), this.scheduledPublishTimeField(), React.createElement("div", {
                className: "field"
            }, React.createElement("label", {
                className: "inline",
                htmlFor: "fb-syn-call-to-action"
            }, "Call to Action"), React.createElement("select", {
                id: "fb-syn-call-to-action",
                "data-field": "call_to_action",
                disabled: this.disabled(),
                defaultValue: o,
                onChange: this.onChange
            }, s), this.errorPart("call_to_action")), this.callToActionUrlField(), React.createElement("div", {
                className: "field"
            }, React.createElement("label", {
                className: "inline",
                htmlFor: "fb-syn-show-in-timeline"
            }, "Show in Timeline"), React.createElement("input", {
                type: "checkbox",
                id: "fb-syn-show-in-timeline",
                "data-custom": "show-in-timeline",
                onChange: this.onChange,
                disabled: this.disabled(),
                checked: !this.state.fields.no_story
            }), this.errorPart("no_story")), this.buttonSectionPart()) : React.createElement("div", {
                className: c
            }, this.loadingPart())
        },
        fbPageField: function(e) {
            var t = this.getOptions(this.state.fbPages),
                a = this.state.fields.facebook_page_id,
                s = this.disabled() || this.state.fields.id,
                n = "https://app.vidiq.com/account-settings/facebook-syndication";
            return _.isEmpty(t) ? void 0 : React.createElement("div", {
                className: "field"
            }, React.createElement("label", {
                className: "inline",
                htmlFor: "fb-syn-page"
            }, "Facebook Page"), React.createElement("select", {
                id: "fb-syn-page",
                "data-field": "facebook_page_id",
                defaultValue: a,
                disabled: s,
                onChange: this.onChange
            }, e, t), this.fbPagePart(), React.createElement("a", {
                href: n,
                target: "_blank",
                className: "fb-manage-account-link"
            }, "Manage your account"), this.errorPart("facebook_page_id"))
        },
        scheduledPublishTimeField: function() {
            var e = {};
            "SCHEDULED" !== this.state.fields.unpublished_type && (e.display = "none");
            var t = this.state.fields.scheduled_publish_time,
                a = t ? moment(t).format(this.timeFormat) : null;
            return React.createElement("div", {
                className: "field",
                style: e
            }, React.createElement("label", {
                className: "inline",
                htmlFor: "fb-syn-publish-date"
            }, "Scheduled Publish Time"), React.createElement("input", {
                type: "text",
                id: "fb-syn-publish-date",
                disabled: this.disabled(),
                onChange: this.onChangeScheduledTime,
                defaultValue: a
            }), this.errorPart("scheduled_publish_time"))
        },
        callToActionUrlField: function() {
            var e = this.state.fields.call_to_action;
            if (e && "NO_BUTTON" !== e) return React.createElement("div", {
                className: "field"
            }, React.createElement("label", {
                className: "inline",
                htmlFor: "fb-syn-call-to-action-url"
            }, "Call to Action URL"), React.createElement("input", {
                type: "text",
                id: "fb-syn-call-to-action-url",
                onChange: this.onChange,
                "data-field": "call_to_action_url",
                disabled: this.disabled(),
                value: this.state.fields.call_to_action_url
            }), this.errorPart("call_to_action_url"))
        },
        copyFromYouTubeButton: function(e) {
            return window.location.href.match(/upload/) ? React.createElement("button", {
                className: "copy-youtube-btn btn btn-small btn-grey",
                onClick: this.copyFromYouTube.bind(this, e),
                disabled: this.disabled()
            }, "Copy from YouTube") : void 0
        }
    }),
    InlineUpload = React.createClass({
        displayName: "InlineUpload",
        propTypes: {
            id: React.PropTypes.string.isRequired,
            youtubeId: React.PropTypes.string
        },
        getInitialState: function() {
            return this.getStateFromStores()
        },
        getStateFromStores: function() {
            var e = FacebookIntegrationStore.getData(),
                t = MasterVideosActions.ensureVideo(this.props.id),
                a = {
                    fbAuth: !!e.integration,
                    fbLoading: e.loading
                };
            return this.state ? _.extend({}, a, {
                masterVideo: t
            }) : _.extend({
                needsFile: !(t && t.upload && t.upload.file),
                archiving: Syndication.getDefault("archiving"),
                facebook: !1,
                progress: 0,
                complete: !1,
                error: !1,
                masterVideo: t
            }, a)
        },
        componentDidMount: function() {
            return MasterVideosStore.addChangeListener(this.onStoreChange), FacebookIntegrationStore.addChangeListener(this.onStoreChange), FacebookIntegrationStore.ensureFetched(), $(window).on("upload-progress:" + this.props.id, this.onUploadProgress), $(window).on("upload-error:" + this.props.id, this.onUploadError), $(window).on("upload-done:" + this.props.id, this.onUploadDone), window.location.href.match(/VIDIQ_SKIP_UPLOAD/) ? (this.setState({
                needsFile: !1,
                complete: !0
            }), void(this.video = MasterVideosActions.createVideo(this.props.id))) : (this.video = MasterVideosStore.findByTempId(this.props.id), void(this.video && this.video.upload && this.video.upload.file && this.setState({
                needsFile: !1
            })))
        },
        componentWillUnmount: function() {
            FacebookIntegrationStore.removeChangeListener(this.onStoreChange), MasterVideosStore.removeChangeListener(this.onStoreChange), $(window).off("upload-progress:" + this.props.id, this.onUploadProgress), $(window).off("upload-error:" + this.props.id, this.onUploadError), $(window).off("upload-done:" + this.props.id, this.onUploadDone)
        },
        onStoreChange: function() {
            this.setState(this.getStateFromStores())
        },
        onUploadProgress: function(e, t) {
            this.setState({
                progress: t
            })
        },
        onUploadError: function() {
            this.setState({
                error: !0,
                progress: 0
            })
        },
        onUploadDone: function() {
            this.setState({
                complete: !0,
                progress: 1
            }), this.state.facebook && this.showFacebookSettings()
        },
        onArchiveClick: function() {
            this.setState({
                archiving: !0
            }), MasterVideosActions.startUpload(this.props.id)
        },
        onSynClick: function() {
            this.setState({
                facebook: !0
            }), this.showFacebookSettings()
        },
        showFacebookSettings: function() {
            Modal.isOpen() || Modal.create({
                title: "Facebook Video Settings",
                innerComponent: FacebookSyndicationSettings,
                innerProps: {
                    id: this.props.id
                }
            })
        },
        onRetryClick: function() {
            MasterVideosActions.startUpload(this.props.id), this.setState({
                error: !1
            })
        },
        onChooseFile: function(e) {
            var t = e.target.files[0];
            Upload.isValid(t) && (MasterVideosStore.setFile(this.props.id, t), MasterVideosStore.startUpload(this.props.id), this.props.youtubeId && MasterVideosStore.setYoutubeId(this.props.id, this.props.youtubeId), this.setState({
                needsFile: !1,
                error: !1
            }))
        },
        isSyndicating: function() {
            return this.state.facebook && this.state.masterVideo.facebookVideo.id
        },
        getMode: function() {
            var e = this.state.masterVideo,
                t = e && e.upload && e.upload.done,
                a = "complete" === e.facebookVideo.syndication_status,
                s = "error" === e.facebookVideo.syndication_status;
            return t ? this.isSyndicating() ? a ? "afterSyndicate" : s ? "syndicationError" : "syndicating" : "afterArchive" : this.state.archiving ? "archiving" : "idle"
        },
        authPart: function() {
            var e = "Connect to enable syndication",
                t = React.createElement(FacebookAuthButton, null);
            return this.state.fbLoading && (e = "Loading Facebook info...", t = null), React.createElement("div", {
                className: "fbauth-part inner-box"
            }, React.createElement("span", null, e), t)
        },
        fbonPart: function() {
            var e = "View Facebook Details",
                t = u.safely(function() {
                    return this.state.masterVideo.facebookVideo.id
                }.bind(this));
            return this.state.complete && this.state.facebook && !t && (e = "Complete Syndication"), React.createElement("div", {
                className: "fbon-part inner-box"
            }, React.createElement("button", {
                className: "button",
                onClick: this.showFacebookSettings
            }, e))
        },
        fboffPart: function() {
            return React.createElement("div", {
                className: "fboff-part inner-box"
            }, React.createElement("button", {
                className: "button",
                onClick: this.onSynClick
            }, "Send to Facebook"))
        },
        enablePart: function() {
            return React.createElement("div", {
                className: "enable-part"
            }, React.createElement(Logo, null), React.createElement("button", {
                className: "button",
                onClick: this.onArchiveClick
            }, "Archive & Syndicate"), React.createElement("p", null, "Archive your video source file for downloading later or to syndicate this video to Facebook"));
        },
        messagePart: function() {
            var e = this.getMode(),
                t = "afterSyndicate" === e ? "https://facebook.com/" + this.state.masterVideo.facebookVideo.facebook_id : null;
            switch (e) {
                case "afterArchive":
                    return this.state.facebook ? React.createElement("span", null, "Ready to syndicate!") : React.createElement("span", null, "Archive successful!");
                case "syndicating":
                    return React.createElement("span", null, "Sending video to ", React.createElement("strong", null, "Facebook"), "...");
                case "syndicationError":
                    return React.createElement("span", null, "Unable to syndicate your video to Facebook.");
                case "afterSyndicate":
                    return React.createElement("span", null, React.createElement("span", null, "Syndication complete!"), " ", React.createElement("a", {
                        href: t,
                        target: "_blank"
                    }, "View on Facebook"));
                default:
                    return React.createElement("span", null, "Archiving video source file to ", React.createElement("strong", null, "vidIQ"))
            }
        },
        chooseFilePart: function() {
            var e = "file-" + this.props.id;
            return React.createElement("div", {
                className: "choose-file-part"
            }, React.createElement("label", {
                htmlFor: e
            }, "Upload"), React.createElement("input", {
                type: "file",
                id: e,
                onChange: this.onChooseFile
            }))
        },
        errorPart: function() {
            return React.createElement("div", {
                className: "error-part"
            }, React.createElement("button", {
                className: "button",
                onClick: this.onRetryClick
            }, "Retry Upload"), React.createElement("span", null, "An error occurred. Please retry."))
        },
        mainPart: function n() {
            var e = this.messagePart(),
                n = this.isSyndicating() ? React.createElement("span", {
                    className: "progress-message"
                }, e) : React.createElement(SyndicationProgressBar, {
                    progress: this.state.progress,
                    message: e
                }),
                t = this.state.facebook ? this.fbonPart() : this.fboffPart();
            return this.state.fbAuth || (t = this.authPart()), React.createElement("div", {
                className: "main-part"
            }, React.createElement("div", {
                className: "col-a"
            }, n), React.createElement("div", {
                className: "col-b"
            }, t))
        },
        render: function() {
            var e;
            return e = this.state.archiving ? this.state.needsFile ? this.chooseFilePart() : this.state.error ? this.errorPart() : this.mainPart() : this.enablePart(), React.createElement("div", {
                className: "vidiq-box inline-upload-component"
            }, e)
        }
    }),
    Logo = React.createClass({
        displayName: "Logo",
        propTypes: {
            badge: React.PropTypes.bool,
            size: React.PropTypes.string
        },
        render: function() {
            var e = {
                src: chrome.extension.getURL("images/vidiq_dark.svg"),
                width: 149,
                height: 56,
                alt: "vidIQ",
                className: "vidiq-logo",
                draggable: !1
            };
            "small" === this.props.size && (e.width = 59, e.height = 22);
            var t = React.createElement("img", e);
            if (!this.props.badge) return t;
            var a = api().getUserType().replace(/_.*/g, "").replace(/erprise$/, "");
            return React.createElement("div", {
                className: "vidiq-logo-container"
            }, t, React.createElement("span", {
                className: "badge"
            }, a))
        }
    }),
    SyndicationProgressBar = React.createClass({
        displayName: "SyndicationProgressBar",
        propTypes: {
            progress: React.PropTypes.number.isRequired,
            message: React.PropTypes.object.isRequired
        },
        render: function() {
            var e = (100 * this.props.progress).toFixed(1).replace(/\.0$/, ""),
                t = {
                    width: e + "%"
                };
            return React.createElement("div", {
                className: "vidiq-progress-bar-container"
            }, React.createElement("div", {
                className: "progress-bar-wrapper"
            }, React.createElement("div", {
                className: "progress-bar-inner",
                style: t
            }), React.createElement("span", {
                className: "progress-percent"
            }, e, "%")), React.createElement("span", {
                className: "progress-message"
            }, this.props.message))
        }
    }),
    SyndicationPrompt = React.createClass({
        displayName: "SyndicationPrompt",
        propTypes: {
            always: React.PropTypes.bool,
            plain: React.PropTypes.bool
        },
        getInitialState: function() {
            return {
                permitted: api().featurePermitted("syndication"),
                hidden: !this.props.always && dataStore.getItem("syn-prompt-hidden")
            }
        },
        componentDidMount: function() {
            this.state.permitted || u.track("Saw syndication upsell")
        },
        onClick: function() {
            var e = "https://app.vidiq.com";
            this.state.permitted || (e += "/plans", u.track("Clicked syndication upsell"));
            var t = window.open(e, "_blank");
            t.focus()
        },
        changeVisibility: function(e) {
            dataStore.setItem("syn-prompt-hidden", !e), this.setState({
                hidden: !e
            })
        },
        hide: function() {
            this.changeVisibility(!1)
        },
        show: function() {
            this.changeVisibility(!0)
        },
        hiddenPart: function() {
            return React.createElement("div", {
                className: "vidiq-box-with-logo syn-prompt-component"
            }, React.createElement("a", {
                onClick: this.show
            }, "Show message from ", React.createElement("b", null, "vidIQ")))
        },
        messagePart: function() {
            return this.state.permitted ? React.createElement("span", null, "Authenticate your Channel with ", React.createElement("strong", null, "vidIQ")) : React.createElement("span", null, "Upgrade to Boost")
        },
        render: function() {
            if (this.state.hidden) return this.hiddenPart();
            var e = React.createElement("button", {
                onClick: this.hide,
                className: "hide-link"
            }, "");
            this.props.always && (e = null);
            var t = classNames("syn-prompt-component", {
                "vidiq-box vidiq-box-with-logo": !this.props.plain
            });
            return React.createElement("div", {
                className: t
            }, React.createElement(Logo, null), React.createElement("p", {
                className: "syn-prompt-message"
            }, "Archive your video source files", React.createElement("br", null), "and syndicate them to ", React.createElement("strong", null, "Facebook!")), React.createElement(Button, {
                onClick: this.onClick,
                text: this.messagePart()
            }), e)
        }
    }),
    SyndicationSettings = React.createClass({
        displayName: "SyndicationSettings",
        propTypes: {},
        getInitialState: function() {
            return {
                archiving: Syndication.getDefault("archiving")
            }
        },
        onArchivingChange: function(e) {
            var t = e.target.checked;
            Syndication.setDefault("archiving", t), this.setState({
                archiving: t
            });
            var a = t ? "enabled" : "disabled";
            u.track("Default archive/syndication " + a)
        },
        render: function() {
            return React.createElement("div", {
                className: "vidiq-box vidiq-box-with-logo syn-settings-component"
            }, React.createElement(Logo, null), React.createElement("div", {
                className: "field"
            }, React.createElement("input", {
                type: "checkbox",
                id: "vidiq-archive",
                name: "vidiq-archive",
                onChange: this.onArchivingChange,
                checked: this.state.archiving
            }), React.createElement("label", {
                htmlFor: "vidiq-archive"
            }, "Syndicate and archive my videos"), React.createElement("p", {
                className: "indented"
            }, "Check this to archive your video source files for downloading later or to automatically syndicate your videos to other services, like Facebook (optional)")))
        }
    }),
    Tabs = React.createClass({
        displayName: "Tabs",
        propTypes: {
            tabs: React.PropTypes.array.isRequired,
            size: React.PropTypes.oneOf(["small"]),
            activeTab: React.PropTypes.number,
            onChange: React.PropTypes.func
        },
        getInitialState: function() {
            return {
                active: 0,
                last: 0
            }
        },
        componentWillReceiveProps: function(e) {
            this.forceActiveTab(e.activeTab)
        },
        forceActiveTab: function(e) {
            var t = {};
            if (this.state.active >= 0) {
                if (!_.isNumber(e)) return;
                if (e >= this.props.tabs.length) return
            } else e || (e = this.state.last);
            t.active = e, 0 > e && this.state.active >= 0 && (t.last = this.state.active), this.setState(t)
        },
        onClick: function(e) {
            this.setState({
                active: e,
                last: this.state.active >= 0 ? this.state.active : e
            }, function() {
                this.props.onChange && this.props.onChange(e)
            })
        },
        render: function() {
            var e = _.compact(_.map(this.props.tabs, function(e) {
                    return void 0 === e.hasContent || e.hasContent ? e : void 0
                })),
                t = _.map(e, function(e, t) {
                    var a = classNames("tab-button", {
                        "tab-button-small": "small" === this.props.size,
                        "tab-button-active": this.state.active === t
                    });
                    return React.createElement("li", {
                        key: t
                    }, React.createElement("button", {
                        className: a,
                        onClick: this.onClick.bind(null, t)
                    }, e.name))
                }, this),
                a = React.createElement("ul", {
                    className: "tabs-buttons"
                }, t),
                s = React.createElement("div", {
                    className: "tabs-body"
                }, (this.props.tabs[this.state.active] || {}).content);
            return 1 === e.length && (a = null, s = e[0].content), this.state.active < 0 && (s = null), React.createElement("div", {
                className: "tabs-container"
            }, a, s)
        }
    }),
    ChooseBackground = React.createClass({
        displayName: "ChooseBackground",
        statics: {
            enterStep: function() {
                ThumbnailEditorActions.update({
                    fabricJson: null
                })
            },
            canChangeStep: function() {
                var e = ThumbnailEditorStore.getData(),
                    t = e.activeTabs.ChooseBackground;
                return (0 !== t || e.buffered) && (2 !== t || e.uploadedImage) ? "all" : "back"
            }
        },
        getInitialState: function() {
            return ThumbnailEditorStore.getData()
        },
        componentWillMount: function() {
            ThumbnailEditorStore.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            ThumbnailEditorStore.removeChangeListener(this.onStoreChange), this.saveBackgroundImage()
        },
        onStoreChange: function() {
            this.setState(ThumbnailEditorStore.getData())
        },
        onBufferUpdate: function(e) {
            ThumbnailEditorActions.update({
                buffered: e
            })
        },
        onUploaded: function(e) {
            ThumbnailEditorActions.update({
                uploadedImage: e
            })
        },
        saveBackgroundImage: function() {
            var e, t, a = 1280,
                s = 720,
                n = this.state.canvases.ChooseBackground;
            e = document.createElement("canvas"), e.width = a, e.height = s, t = e.getContext("2d"), t.drawImage(n, 0, 0, a, s), ThumbnailEditorActions.update({
                backgroundImageUri: e.toDataURL()
            })
        },
        getTabs: function() {
            return [{
                name: "Video still",
                content: React.createElement(ChooseVideoStill, {
                    videoId: this.state.videoId,
                    onBufferUpdate: this.onBufferUpdate,
                    setCanvas: this.setCanvas
                })
            }, {
                name: "Solid color",
                content: React.createElement(ChooseSolidColor, {
                    color: this.state.color,
                    setCanvas: this.setCanvas,
                    setColor: this.setColor
                })
            }, {
                name: "Other image",
                content: React.createElement(ChooseImage, {
                    setCanvas: this.setCanvas,
                    onUploaded: this.onUploaded,
                    initialImage: this.state.uploadedImage
                })
            }, {
                name: "Current Thumbnail",
                content: React.createElement(ChooseCurrentThumb, {
                    videoId: this.state.videoId,
                    setCanvas: this.setCanvas
                })
            }]
        },
        setCanvas: function(e) {
            ThumbnailEditorActions.setCanvas("ChooseBackground", e)
        },
        setColor: function(e) {
            ThumbnailEditorActions.update({
                color: e
            })
        },
        render: function() {
            return React.createElement("div", {
                className: "vidiq-thumbnail-editor-choose-background"
            }, React.createElement(Tabs, {
                tabs: this.getTabs(),
                activeTab: this.state.activeTabs.ChooseBackground,
                onChange: _.partial(ThumbnailEditorActions.changeTab, "ChooseBackground")
            }))
        }
    }),
    ChooseCurrentThumb = React.createClass({
        displayName: "ChooseCurrentThumb",
        propTypes: {
            videoId: React.PropTypes.string.isRequired,
            setCanvas: React.PropTypes.func.isRequired
        },
        canvas: null,
        getInitialState: function() {
            return {
                store: ThumbnailEditorStore.getData()
            }
        },
        drawBackground: function() {
            if (this.state.store.currentThumbnail.url) {
                var e = this.canvas.getContext("2d"),
                    t = new Image;
                t.onload = function() {
                    e.drawImage(t, 0, 0, this.canvas.width, this.canvas.height)
                }.bind(this), t.src = this.state.store.currentThumbnail.url
            }
        },
        componentDidUpdate: function() {
            this.state.store.currentThumbnail && this.drawBackground()
        },
        componentDidMount: function() {
            ThumbnailEditorStore.addChangeListener(this.onStoreChange), this.canvas = document.getElementById("thumbnail-current-canvas"), this.props.setCanvas(this.canvas), this.canvas.width = 1280, this.canvas.height = 720, this.state.store.currentThumbnail ? this.drawBackground() : ThumbnailEditorActions.setCurrentThumbnail()
        },
        componentWillUnmount: function() {
            ThumbnailEditorStore.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: ThumbnailEditorStore.getData()
            })
        },
        resolution: function() {
            var e = this.state.store.currentThumbnail;
            return e && e.resolution ? React.createElement("div", null, React.createElement("span", {
                className: "current-thumbnail-resolution"
            }, e.resolution), React.createElement("span", {
                className: "max-res-available"
            }, "Maximum resolution available")) : null
        },
        error: function() {
            var e = this.state.store.currentThumbnail;
            return e && e.error ? React.createElement("span", {
                className: "current-thumbnail-error"
            }, React.createElement("i", {
                className: "material-icons"
            }, "error"), " ", e.error) : null
        },
        render: function() {
            return React.createElement("div", null, React.createElement("p", {
                className: "thumbnail-instructions"
            }, "Choose the current thumbnail."), React.createElement("div", {
                className: "clearfix"
            }, React.createElement("canvas", {
                id: "thumbnail-current-canvas",
                className: "thumbnail-left"
            }), React.createElement("div", {
                className: "thumbnail-right"
            }, this.resolution(), this.error())))
        }
    }),
    ChooseImage = React.createClass({
        displayName: "ChooseImage",
        propTypes: {
            initialImage: React.PropTypes.object,
            setCanvas: React.PropTypes.func.isRequired,
            onUploaded: React.PropTypes.func
        },
        canvas: null,
        onUpload: function(e) {
            var t = this.canvas.getContext("2d"),
                a = new Image;
            a.onload = function() {
                t.drawImage(a, 0, 0, this.canvas.width, this.canvas.height), this.props.onUploaded && this.props.onUploaded(a)
            }.bind(this), a.src = e.preview
        },
        componentDidMount: function() {
            if (this.canvas = document.getElementById("thumbnail-upload-canvas"), this.props.setCanvas(this.canvas), this.canvas.width = 1280, this.canvas.height = 720, this.props.initialImage) {
                var e = this.canvas.getContext("2d");
                e.drawImage(this.props.initialImage, 0, 0, this.canvas.width, this.canvas.height)
            }
        },
        render: function() {
            var e = this.props.initialImage;
            return React.createElement("div", null, React.createElement("p", {
                className: "thumbnail-instructions"
            }, "To use an image for your thumbnail background, choose one to upload, or drop one into the box."), React.createElement("div", {
                className: "clearfix"
            }, React.createElement("canvas", {
                id: "thumbnail-upload-canvas",
                className: "thumbnail-left",
                style: e ? {} : {
                    display: "none"
                }
            }), React.createElement("div", {
                className: e ? "thumbnail-right" : "thumbnail-center"
            }, React.createElement(FileUploader, {
                onUpload: this.onUpload,
                accept: "image/*"
            }))))
        }
    }),
    ChooseSolidColor = React.createClass({
        displayName: "ChooseSolidColor",
        propTypes: {
            color: React.PropTypes.string.isRequired,
            setCanvas: React.PropTypes.func.isRequired,
            setColor: React.PropTypes.func.isRequired
        },
        canvas: null,
        componentDidMount: function() {
            this.canvas = document.getElementById("thumbnail-color-canvas"), this.initSpectrum(), this.drawCanvas(this.props.color), this.props.setCanvas(this.canvas)
        },
        componentWillReceiveProps: function(e) {
            e.color !== this.props.color && this.drawCanvas(e.color)
        },
        initSpectrum: function() {
            $("#spectrum-color-picker").spectrum({
                color: this.props.color,
                containerClassName: "thumbnail-right",
                flat: !0,
                showButtons: !1,
                move: function(e) {
                    return this.props.setColor(e.toHexString())
                }.bind(this)
            })
        },
        drawCanvas: function(e) {
            var t = this.canvas.getContext("2d");
            t.fillStyle = e, t.fillRect(0, 0, 462, 260)
        },
        render: function() {
            return React.createElement("div", null, React.createElement("p", {
                className: "thumbnail-instructions"
            }, "Choose the desired background color for your thumbnail."), React.createElement("div", {
                className: "clearfix"
            }, React.createElement("canvas", {
                id: "thumbnail-color-canvas",
                className: "thumbnail-left"
            }), React.createElement("input", {
                id: "spectrum-color-picker",
                type: "text"
            })))
        }
    }),
    ChooseVideoStill = React.createClass({
        displayName: "ChooseVideoStill",
        propTypes: {
            videoId: React.PropTypes.string.isRequired,
            setCanvas: React.PropTypes.func.isRequired,
            onBufferUpdate: React.PropTypes.func
        },
        player: null,
        componentWillMount: function() {
            this.props.onBufferUpdate && this.props.onBufferUpdate(!1)
        },
        componentDidMount: function() {
            this.player = new YT.Player("thumbnail-video-iframe", {
                events: {
                    onReady: this.setCanvas
                }
            })
        },
        getEmbedUrl: function() {
            var e = {
                autoplay: !0,
                fs: !1,
                enablejsapi: !0,
                iv_load_policy: 3,
                loop: !0,
                playlist: this.props.videoId,
                rel: !1,
                showinfo: !1
            };
            return "https://www.youtube.com/embed/" + this.props.videoId + "?" + $.param(e)
        },
        setCanvas: function(e) {
            this.props.onBufferUpdate && this.props.onBufferUpdate(!0);
            var t = this.player.getIframe().contentDocument.getElementsByTagName("video")[0];
            this.props.setCanvas(t)
        },
        onSeek: function(e) {
            var t;
            this.player.pauseVideo(), t = this.player.getCurrentTime() + 1 / 30 * e, this.player.seekTo(t, !0)
        },
        render: function() {
            return React.createElement("div", {
                className: "choose-video-still"
            }, React.createElement("p", {
                className: "thumbnail-instructions"
            }, "To use a video still for your thumbnail, pause the video at the desired frame."), React.createElement("div", {
                className: "clearfix"
            }, React.createElement("iframe", {
                type: "text/html",
                id: "thumbnail-video-iframe",
                frameBorder: "0",
                className: "thumbnail-left",
                src: this.getEmbedUrl()
            }), React.createElement("div", {
                className: "thumbnail-right"
            }, React.createElement("p", null, "Step through", React.createElement("br", null), "each video frame"), React.createElement("div", {
                className: "frame-nudge-buttons"
            }, React.createElement(Button, {
                classes: "space-between",
                icon: !0,
                onClick: this.onSeek.bind(null, -1)
            }, React.createElement("i", {
                className: "material-icons"
            }, "chevron_left")), React.createElement(Button, {
                classes: "space-between",
                icon: !0,
                onClick: this.onSeek.bind(null, 1)
            }, React.createElement("i", {
                className: "material-icons"
            }, "chevron_right"))))))
        }
    }),
    EditThumbnail = React.createClass({
        displayName: "EditThumbnail",
        canvas: null,
        propTypes: {
            width: React.PropTypes.number,
            height: React.PropTypes.number,
            videoId: React.PropTypes.string,
            onMakeCanvas: React.PropTypes.func
        },
        getInitialState: function() {
            return this.getState()
        },
        getState: function() {
            return _.extend({
                selected: null,
                selectionId: null,
                objects: []
            }, this.state || {}, {
                store: ThumbnailEditorStore.getData()
            })
        },
        getCanvasId: function() {
            var e = "edit-thumbnail-canvas",
                t = this.props.videoId ? e + "-" + this.props.videoId : e;
            return t
        },
        getThumbnailTemplates: function() {
            ThumbnailTemplatesActions.fetchTemplates()
        },
        componentDidMount: function() {
            this.initFabric(), this.setFabricBackgroundImage(), this.getThumbnailTemplates(), this.canvas.on("object:selected", this.onObjectSelected), this.canvas.on("selection:cleared", this.onSelectionCleared), document.body.addEventListener("keydown", this.onKeydown), ThumbnailEditorStore.addChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState(this.getState())
        },
        componentWillUnmount: function() {
            this.canvas.off("object:selected", this.onObjectSelected), this.canvas.off("selection:cleared", this.onSelectionCleared), this.canvas.deactivateAll(), ThumbnailEditorActions.update({
                fabricJson: this.canvas.toJSON(),
                thumbnailUri: this.canvas.toDataURL({
                    quality: 1
                })
            }), ThumbnailEditorStore.removeChangeListener(this.onStoreChange), document.body.removeEventListener("keydown", this.onKeydown)
        },
        getCanvasObjects: function(e) {
            return _.omit(e, "background", "backgroundImage")
        },
        initFabric: function() {
            if (this.canvas = new fabric.Canvas(this.getCanvasId(), {
                    containerClass: "thumbnail-left",
                    width: this.props.width || 1280,
                    height: this.props.height || 720,
                    selection: !1
                }), this.props.videoId && this.props.onMakeCanvas(this.props.videoId, this.canvas), this.state.store.fabricJson) {
                var e = this.getCanvasObjects(this.state.store.fabricJson);
                this.canvas.loadFromJSON(e), this.setState({
                    objects: e.objects
                })
            }
        },
        setFabricBackgroundImage: function() {
            var e = this.props.videoId ? "https://cors-anywhere.herokuapp.com/https://img.youtube.com/vi/" + this.props.videoId + "/mqdefault.jpg" : this.state.store.backgroundImageUri,
                t = this.canvas;
            fabric.Image.fromURL(e, function(e) {
                t.setBackgroundImage(e, t.renderAll.bind(t), {
                    width: t.getWidth(),
                    height: t.getHeight()
                }), _.defer(function() {
                    this.forceUpdate(), t.renderAll()
                }.bind(this), 300)
            }.bind(this), {
                crossOrigin: "Anonymous"
            })
        },
        updateObjects: function() {
            var e = this.canvas.toJSON(),
                t = this.getCanvasObjects(e).objects;
            this.setState({
                objects: t
            })
        },
        saveTemplate: function(e) {
            var t = this.canvas.toJSON(),
                a = this.getCanvasObjects(t).objects;
            ThumbnailTemplatesActions.save(e, a)
        },
        loadTemplate: function(e, t) {
            var a = this.canvas.toJSON();
            t ? a.objects = e : a.objects = a.objects.concat(e), this.canvas.loadFromJSON(a, function() {
                this.updateObjects()
            }.bind(this)), this.setFabricBackgroundImage(), this.canvas.on("object:selected", this.onObjectSelected), this.canvas.on("selection:cleared", this.onSelectionCleared)
        },
        onObjectSelected: function(e) {
            e.target.borderScaleFactor = .3, e.target.cornerSize = 20, this.setState({
                selected: e.target,
                selectionId: u.prettyRandomId()
            })
        },
        onSelectionCleared: function() {
            this.setState({
                selected: null,
                selectionId: null
            })
        },
        onChangeTab: function() {
            this.canvas.deactivateAll(), this.canvas.renderAll(), this.onSelectionCleared()
        },
        forSelected: function(e) {
            this.state.selected && (this.state.selected[e](), "remove" === e && this.updateObjects())
        },
        onKeydown: function(e) {
            var t = e.target.tagName;
            return "INPUT" === t || "TEXTAREA" === t ? !0 : this.state.selected && 8 === e.keyCode ? (this.forSelected("remove"), void e.preventDefault()) : !0
        },
        changeDefaultColor: _.debounce(function(e) {
            ThumbnailEditorActions.update({
                defaultColor: e
            })
        }, 200),
        changeDefaultBorderColor: _.debounce(function(e) {
            ThumbnailEditorActions.update({
                defaultBorderColor: e
            })
        }, 200),
        changeDefaultBorderWidth: _.debounce(function(e) {
            ThumbnailEditorActions.update({
                defaultBorderWidth: e
            })
        }, 200),
        changeDefaultOpacity: _.debounce(function(e) {
            ThumbnailEditorActions.update({
                defaultOpacity: e
            })
        }, 200),
        changeDefaultTextAttributes: _.debounce(function(e, t) {
            var a = ThumbnailEditorStore.getData(),
                s = a.defaultTextAttributes;
            s[e] = t, ThumbnailEditorActions.update({
                defaultTextAttributes: s
            })
        }, 200),
        getTabs: function() {
            if (!this.canvas) return [];
            var e = {
                    canvas: this.canvas,
                    updateObjects: this.updateObjects,
                    initialFill: this.state.store.defaultColor,
                    initialBorderFill: this.state.store.defaultBorderColor,
                    initialBorderWidth: this.state.store.defaultBorderWidth,
                    initialOpacity: this.state.store.defaultOpacity,
                    initialTextAttributes: this.state.store.defaultTextAttributes,
                    onChangeFill: this.changeDefaultColor,
                    onChangeBorderFill: this.changeDefaultBorderColor,
                    onChangeBorderWidth: this.changeDefaultBorderWidth,
                    onChangeOpacity: this.changeDefaultOpacity,
                    onChangeTextAttribute: this.changeDefaultTextAttributes
                },
                t = {
                    saveTemplate: this.saveTemplate,
                    loadTemplate: this.loadTemplate,
                    objects: this.state.objects
                };
            return [{
                name: "Text",
                content: React.createElement(TextObject, e)
            }, {
                name: "Shape",
                content: React.createElement(ShapeObject, e)
            }, {
                name: "Image",
                content: React.createElement(ImageObject, e)
            }, {
                name: "Templates",
                content: React.createElement(ThumbnailTemplates, t)
            }]
        },
        render: function() {
            return React.createElement("div", {
                className: "vidiq-thumbnail-editor-edit-thumbnail"
            }, React.createElement("p", {
                className: "thumbnail-instructions"
            }, "Add text, image, and shape overlays to your thumbnail."), React.createElement("div", {
                className: "clearfix"
            }, React.createElement("canvas", {
                id: this.getCanvasId()
            }), React.createElement("div", {
                className: "thumbnail-right"
            }, React.createElement(Tabs, {
                tabs: this.getTabs(),
                size: "small",
                onChange: this.onChangeTab,
                activeTab: this.state.selected ? -1 : null
            }), this.editObjectPart())))
        },
        cloneSelected: function() {
            var e = this.state.selected;
            if ("image" === e.type) e.clone(function(e) {
                e.set("top", 10), e.set("left", 10), this.canvas.add(e)
            }.bind(this));
            else {
                var t = this.state.selected.clone();
                t.set("top", 10), t.set("left", 10), this.canvas.add(t)
            }
            this.updateObjects()
        },
        editObjectPart: function() {
            if (this.state.selected) {
                var e, t = this.forSelected,
                    a = this.state.selected.type;
                e = "text" === a ? "TextObject" : "image" === a ? "ImageObject" : "ShapeObject";
                var s;
                return window[e] && (s = React.createElement(window[e], {
                    bindTo: this.state.selected,
                    canvas: this.canvas,
                    key: this.state.selectionId
                })), React.createElement("div", {
                    className: "edit-object"
                }, React.createElement("h2", null, "Edit selected object"), s, React.createElement("div", {
                    className: "edit-buttons"
                }, React.createElement(Button, {
                    classes: "space-between",
                    icon: !0,
                    title: "Duplicate",
                    onClick: this.cloneSelected
                }, React.createElement("i", {
                    className: "material-icons"
                }, "content_copy")), React.createElement(Button, {
                    classes: "space-between",
                    icon: !0,
                    title: "Move back",
                    onClick: _.partial(t, "sendBackwards")
                }, React.createElement("i", {
                    className: "material-icons"
                }, "flip_to_back")), React.createElement(Button, {
                    classes: "space-between",
                    icon: !0,
                    title: "Move forward",
                    onClick: _.partial(t, "bringForward")
                }, React.createElement("i", {
                    className: "material-icons"
                }, "flip_to_front")), React.createElement(Button, {
                    classes: "space-between",
                    icon: !0,
                    title: "Delete",
                    onClick: _.partial(t, "remove")
                }, React.createElement("i", {
                    className: "material-icons"
                }, "cancel"))))
            }
        }
    }),
    ImageObject = React.createClass({
        displayName: "ImageObject",
        propTypes: {
            bindTo: React.PropTypes.object,
            canvas: React.PropTypes.object.isRequired,
            updateObjects: React.PropTypes.func.isRequired,
            initialBorderFill: React.PropTypes.string,
            initialBorderWidth: React.PropTypes.number,
            initialOpacity: React.PropTypes.number,
            onChangeBorderFill: React.PropTypes.func,
            onChangeBorderWidth: React.PropTypes.func,
            onChangeOpacity: React.PropTypes.func
        },
        getInitialState: function() {
            var e = {
                opacity: this.props.initialOpacity || 1,
                stroke: this.props.initialBorderFill || "#000",
                strokeWidth: this.props.initialBorderWidth || 0
            };
            return this.props.bindTo && (e = this.getObjState(this.props.bindTo, e)), e
        },
        getObjState: function(e, t) {
            return _.object(_.map(t || this.state, function(t, a) {
                return [a, e.get(a)]
            }, this))
        },
        componentDidMount: function() {
            this.initSpectrum()
        },
        componentDidUpdate: function() {
            this.enforceBinding()
        },
        initSpectrum: function() {
            ColorSpectrum.init({
                id: "#spectrum-border-color-picker",
                replacer: "thumbnail-border-color-picker-replacer",
                color: this.state.stroke,
                onChange: this.onChangeBorderColor,
                appendTo: React.findDOMNode(this)
            })
        },
        enforceBinding: function() {
            this.props.bindTo && (_.each(this.state, function(e, t) {
                this.props.bindTo.set(t, e)
            }, this), this.props.canvas.renderAll())
        },
        onUpload: function(e) {
            this.addToCanvas(e.preview)
        },
        onChangeOpacity: function(e) {
            this.props.onChangeOpacity && this.props.onChangeOpacity(event.target.value), this.setState({
                opacity: e.target.value
            })
        },
        onChangeBorderColor: function(e) {
            this.props.onChangeBorderFill && this.props.onChangeBorderFill(e.toHexString()), this.setState({
                stroke: e.toHexString()
            })
        },
        onChangeBorderWidth: function(e) {
            var t = Number(e.target.value);
            t > 10 ? t = 10 : 0 > t && (t = 0), this.props.onChangeBorderWidth && this.props.onChangeBorderWidth(t), this.setState({
                strokeWidth: t
            })
        },
        addToCanvas: function(e) {
            var t = function(e) {
                    this.props.canvas.add(e), this.props.updateObjects()
                }.bind(this),
                a = new Image;
            a.onload = function() {
                var e = Math.min(a.height, 240),
                    s = a.height / a.width,
                    n = e / s,
                    i = this.state;
                fabric.Image.fromURL(a.src, t, {
                    top: 10,
                    left: 10,
                    width: n,
                    height: e,
                    opacity: i.opacity,
                    stroke: i.stroke,
                    strokeWidth: i.strokeWidth
                }, {
                    crossOrigin: "Anonymous"
                })
            }.bind(this), a.crossOrigin = "anonymous", a.src = e
        },
        render: function() {
            return React.createElement("div", {
                className: "fabric-object"
            }, this.props.bindTo ? null : React.createElement(FileUploader, {
                onUpload: this.onUpload,
                accept: "image/*"
            }), this.emojiPicker(), React.createElement("div", {
                className: "flex-container"
            }, React.createElement(ObjectOpacity, {
                onChange: this.onChangeOpacity,
                value: this.state.opacity
            }), React.createElement(ObjectBorder, {
                colorId: "spectrum-border-color-picker",
                onChange: this.onChangeBorderWidth,
                value: this.state.strokeWidth.toString()
            })))
        },
        emojiPicker: function() {
            return this.props.bindTo ? null : React.createElement("div", {
                className: "flex-container emoji-picker"
            }, React.createElement(EmojiPicker, {
                add: this.addToCanvas
            }))
        }
    }),
    ObjectBorder = React.createClass({
        displayName: "ObjectBorder",
        propTypes: {
            min: React.PropTypes.string,
            max: React.PropTypes.string,
            step: React.PropTypes.string,
            colorId: React.PropTypes.string.isRequired,
            onChange: React.PropTypes.func.isRequired,
            value: React.PropTypes.string.isRequired
        },
        render: function() {
            return React.createElement("div", {
                className: "flex-child border-options"
            }, React.createElement("label", {
                htmlFor: this.props.colorId
            }, "Border"), React.createElement("input", {
                id: this.props.colorId,
                type: "text"
            }), React.createElement("label", {
                htmlFor: "strokeWidth"
            }, "Width"), React.createElement("input", {
                id: "strokeWidth",
                type: "number",
                title: "Border width",
                min: this.props.min || "0",
                max: this.props.min || "10",
                step: this.props.step || "0.5",
                onChange: this.props.onChange,
                value: this.props.value
            }))
        }
    }),
    ObjectOpacity = React.createClass({
        displayName: "ObjectOpacity",
        propTypes: {
            min: React.PropTypes.string,
            max: React.PropTypes.string,
            step: React.PropTypes.string,
            onChange: React.PropTypes.func.isRequired,
            value: React.PropTypes.string.isRequired
        },
        render: function() {
            return React.createElement("div", {
                className: "flex-child opacity-slider"
            }, React.createElement("label", {
                htmlFor: "opacity"
            }, "Opacity"), React.createElement("input", {
                type: "range",
                id: "opacity",
                min: this.props.min || 0,
                max: this.props.max || 1,
                step: this.props.step || .01,
                value: this.props.value,
                onChange: this.props.onChange
            }))
        }
    }),
    ShapeObject = React.createClass({
        displayName: "ShapeObject",
        propTypes: {
            bindTo: React.PropTypes.object,
            updateObjects: React.PropTypes.func.isRequired,
            canvas: React.PropTypes.object.isRequired,
            initialFill: React.PropTypes.string,
            initialBorderFill: React.PropTypes.string,
            initialBorderWidth: React.PropTypes.number,
            initialOpacity: React.PropTypes.number,
            onChangeFill: React.PropTypes.func,
            onChangeBorderFill: React.PropTypes.func,
            onChangeBorderWidth: React.PropTypes.func,
            onChangeOpacity: React.PropTypes.func
        },
        shapeOptions: {
            rect: {
                width: 100,
                height: 50
            },
            triangle: {
                width: 100,
                height: 100
            },
            circle: {
                radius: 50
            },
            ellipse: {
                rx: 100,
                ry: 50
            },
            line: {
                strokeWidth: 3
            }
        },
        getInitialState: function() {
            var e = {
                shape: "rect",
                fill: this.props.initialFill || "#fff",
                opacity: this.props.initialOpacity || 1,
                stroke: this.props.initialBorderFill || "#000",
                strokeWidth: this.props.initialBorderWidth || 0
            };
            return this.props.bindTo && (e = this.getObjState(this.props.bindTo, e)), e
        },
        getObjState: function(e, t) {
            return _.object(_.map(t || this.state, function(t, a) {
                return [a, e.get(a)]
            }, this))
        },
        componentDidMount: function() {
            this.initSpectrum()
        },
        componentDidUpdate: function() {
            this.enforceBinding()
        },
        enforceBinding: function() {
            this.props.bindTo && (_.each(this.state, function(e, t) {
                this.props.bindTo.set(t, e)
            }, this), this.props.canvas.renderAll())
        },
        initSpectrum: function() {
            ColorSpectrum.init({
                id: "#spectrum-color-picker",
                replacer: "thumbnail-color-picker-replacer",
                color: this.state.fill,
                onChange: this.onChangeColor,
                appendTo: React.findDOMNode(this)
            }), ColorSpectrum.init({
                id: "#spectrum-border-color-picker",
                replacer: "thumbnail-border-color-picker-replacer",
                color: this.state.stroke,
                onChange: this.onChangeBorderColor,
                appendTo: React.findDOMNode(this)
            })
        },
        onChangeShape: function(e) {
            this.setState({
                shape: e.target.value
            })
        },
        onChangeColor: function(e) {
            this.props.onChangeFill && this.props.onChangeFill(e.toHexString()), this.setState({
                fill: e.toHexString()
            })
        },
        onChangeBorderColor: function(e) {
            this.props.onChangeBorderFill && this.props.onChangeBorderFill(e.toHexString()), this.setState({
                stroke: e.toHexString()
            })
        },
        onChangeOpacity: function(e) {
            this.props.onChangeOpacity && this.props.onChangeOpacity(e.target.value), this.setState({
                opacity: e.target.value
            })
        },
        onChangeBorderWidth: function(e) {
            var t = Number(e.target.value);
            t > 10 ? t = 10 : 0 > t && (t = 0), this.props.onChangeBorderWidth && this.props.onChangeBorderWidth(t), this.setState({
                strokeWidth: t
            })
        },
        addToCanvas: function() {
            var e, t = u.capitalize(this.state.shape),
                a = this.shapeOptions[this.state.shape];
            "line" === this.state.shape ? (a.stroke = this.state.fill, e = new fabric[t]([10, 10, 100, 100], a)) : (a.fill = this.state.fill, a.opacity = this.state.opacity, a.stroke = this.state.stroke, a.strokeWidth = this.state.strokeWidth, a.top = 10, a.left = 10, e = new fabric[t](a)), this.props.canvas.add(e), this.props.updateObjects()
        },
        render: function() {
            return React.createElement("div", {
                className: "fabric-object"
            }, React.createElement("div", {
                className: "flex-container"
            }, this.shapeChoosers(), React.createElement("div", {
                className: "flex-child"
            }, React.createElement("input", {
                id: "spectrum-color-picker",
                type: "text"
            })), React.createElement(ObjectOpacity, {
                onChange: this.onChangeOpacity,
                value: this.state.opacity
            }), React.createElement(ObjectBorder, {
                colorId: "spectrum-border-color-picker",
                onChange: this.onChangeBorderWidth,
                value: this.state.strokeWidth.toString()
            })), this.props.bindTo ? null : React.createElement(Button, {
                secondary: !0,
                onClick: this.addToCanvas,
                text: "+ Add Shape"
            }))
        },
        shapeChoosers: function() {
            if (!this.props.bindTo) {
                var e = "rect triangle circle ellipse".split(" ");
                return _.map(e, function(e) {
                    var t = "rect" === e ? "Rectangle" : u.capitalize(e);
                    return React.createElement("div", {
                        className: "flex-child",
                        key: e
                    }, React.createElement("input", {
                        type: "radio",
                        id: "shape-" + e,
                        name: "shape",
                        value: e,
                        checked: this.state.shape === e,
                        onChange: this.onChangeShape
                    }), React.createElement("label", {
                        htmlFor: "shape-" + e
                    }, t))
                }, this)
            }
        }
    }),
    TextObject = React.createClass({
        displayName: "TextObject",
        propTypes: {
            bindTo: React.PropTypes.object,
            canvas: React.PropTypes.object.isRequired,
            updateObjects: React.PropTypes.func.isRequired,
            initialFill: React.PropTypes.string,
            initialBorderFill: React.PropTypes.string,
            initialBorderWidth: React.PropTypes.number,
            initialOpacity: React.PropTypes.string,
            initialTextAttributes: React.PropTypes.object,
            onChangeFill: React.PropTypes.func,
            onChangeBorderFill: React.PropTypes.func,
            onChangeBorderWidth: React.PropTypes.func,
            onChangeOpacity: React.PropTypes.func,
            onChangeTextAttribute: React.PropTypes.func
        },
        webfonts: ["Open Sans", "Play", "Comfortaa", "Raleway", "Oswald", "Ubuntu", "Roboto", "Roboto Condensed", "Pacifico", "Tangerine", "Lobster", "Lily Script One", "Grand Hotel", "Mr Dafoe", "Mrs Sheppards", "Dr Sugiyama", "Dynalight", "Playball", "Freckle Face", "VT323", "Bangers", "Permanent Marker", "Chewy", "Audiowide", "Plaster", "Rye", "Mystery Quest", "Finger Paint", "Just Another Hand", "Creepster", "Monofett", "Smokum"],
        fonts: {
            Serif: ["Times New Roman", "Georgia", "Palatino"],
            "Sans-serif": ["Helvetica", "Arial", "Verdana", "Impact", "Tahoma", "Lucida Grande", "Trebuchet MS", "Open Sans", "Play", "Comfortaa", "Raleway", "Oswald", "Ubuntu", "Roboto", "Roboto Condensed"],
            Monospace: ["Courier", "Monaco"],
            Script: ["Pacifico", "Tangerine", "Lobster", "Lily Script One", "Grand Hotel", "Dynalight", "Playball", "Mr Dafoe", "Mrs Sheppards", "Dr Sugiyama"],
            Decorative: ["VT323", "Bangers", "Permanent Marker", "Chewy", "Audiowide", "Just Another Hand", "Creepster", "Monofett", "Smokum", "Rye", "Freckle Face", "Plaster", "Mystery Quest", "Finger Paint"]
        },
        getInitialState: function() {
            var e = this.props.initialTextAttributes,
                t = {
                    text: "Enter text",
                    fontFamily: e ? e.font : "Helvetica",
                    fontSize: e ? e.size : 48,
                    fontWeight: e ? e.weight : "normal",
                    textDecoration: e ? e.decoration : "none",
                    fill: this.props.initialFill || "#fff",
                    opacity: this.props.initialOpacity || 1,
                    stroke: this.props.initialBorderFill || "#000",
                    strokeWidth: this.props.initialBorderWidth || 0
                };
            return this.props.bindTo && (t = this.getObjState(this.props.bindTo, t)), t
        },
        getObjState: function(e, t) {
            return _.object(_.map(t || this.state, function(t, a) {
                return [a, e.get(a)]
            }, this))
        },
        componentWillMount: function() {
            var e = "https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",
                t = this.webfonts;
            $.get(e, function() {
                window.WebFont.load({
                    google: {
                        families: t
                    }
                })
            })
        },
        componentDidMount: function() {
            this.initSpectrum()
        },
        componentDidUpdate: function() {
            this.enforceBinding()
        },
        enforceBinding: function() {
            this.props.bindTo && (_.each(this.state, function(e, t) {
                this.props.bindTo.set(t, e)
            }, this), this.props.canvas.renderAll())
        },
        initSpectrum: function() {
            ColorSpectrum.init({
                id: "#spectrum-color-picker",
                replacer: "thumbnail-color-picker-replacer",
                color: this.state.fill,
                onChange: this.onChangeColor,
                appendTo: React.findDOMNode(this)
            }), ColorSpectrum.init({
                id: "#spectrum-border-color-picker",
                replacer: "thumbnail-border-color-picker-replacer",
                color: this.state.stroke,
                onChange: this.onChangeBorderColor,
                appendTo: React.findDOMNode(this)
            })
        },
        onChange: function(e) {
            var t = {},
                a = e.target.id,
                s = e.target.value;
            "fontWeight" === a && (s = e.target.checked ? "bold" : "", this.props.onChangeTextAttribute && this.props.onChangeTextAttribute("weight", s)), "textDecoration" === a && (s = e.target.checked ? "underline" : "", this.props.onChangeTextAttribute && this.props.onChangeTextAttribute("decoration", s)), "strokeWidth" === a && (s = Number(s), s > 5 ? s = 5 : 0 > s && (s = 0), this.props.onChangeBorderWidth && this.props.onChangeBorderWidth(s)), "opacity" === a && this.props.onChangeOpacity && this.props.onChangeOpacity(s), "fontSize" === a && this.props.onChangeTextAttribute && this.props.onChangeTextAttribute("size", s), t[a] = s, this.setState(t)
        },
        onChangeColor: function(e) {
            this.props.onChangeFill && this.props.onChangeFill(e.toHexString()), this.setState({
                fill: e.toHexString()
            })
        },
        onChangeBorderColor: function(e) {
            this.props.onChangeBorderFill && this.props.onChangeBorderFill(e.toHexString()), this.setState({
                stroke: e.toHexString()
            })
        },
        onChangeFont: function(e) {
            this.props.onChangeTextAttribute && this.props.onChangeTextAttribute("font", e), this.setState({
                fontFamily: e
            })
        },
        addToCanvas: function() {
            var e = _.extend(_.omit(this.state, "text"), {
                    top: 10,
                    left: 10
                }),
                t = new fabric.Text(this.state.text, e);
            this.props.canvas.add(t), this.props.updateObjects()
        },
        getFonts: function() {
            return _.object(_.map(this.fonts, function(e, t) {
                return [t, _.object(_.map(e, function(e) {
                    return [e, e]
                }))]
            }))
        },
        render: function() {
            return React.createElement("div", {
                className: "fabric-object"
            }, React.createElement("div", {
                className: "flex-container"
            }, React.createElement("div", {
                className: "flex-child flex-child-wide"
            }, React.createElement("textarea", {
                id: "text",
                value: this.state.text,
                onChange: this.onChange
            })), React.createElement("div", {
                className: "flex-child"
            }, React.createElement(CustomSelector, {
                defaultValue: this.state.fontFamily,
                onChange: this.onChangeFont,
                optionGroups: this.getFonts(),
                fontStyle: !0
            })), React.createElement("div", {
                className: "flex-child"
            }, React.createElement("select", {
                id: "fontSize",
                value: this.state.fontSize,
                onChange: this.onChange
            }, React.createElement("option", {
                value: "24"
            }, "12px"), React.createElement("option", {
                value: "28"
            }, "14px"), React.createElement("option", {
                value: "36"
            }, "18px"), React.createElement("option", {
                value: "48"
            }, "24px"), React.createElement("option", {
                value: "60"
            }, "30px"), React.createElement("option", {
                value: "72"
            }, "36px"), React.createElement("option", {
                value: "96"
            }, "48px"), React.createElement("option", {
                value: "120"
            }, "60px"), React.createElement("option", {
                value: "144"
            }, "72px"), React.createElement("option", {
                value: "168"
            }, "84px"))), React.createElement("div", {
                className: "flex-child"
            }, React.createElement("input", {
                id: "spectrum-color-picker",
                type: "text"
            })), React.createElement("div", {
                className: "flex-child"
            }, React.createElement("input", {
                type: "checkbox",
                id: "fontWeight",
                checked: "bold" === this.state.fontWeight,
                onChange: this.onChange
            }), React.createElement("label", {
                htmlFor: "fontWeight",
                style: {
                    fontWeight: "bold"
                }
            }, "Aa")), React.createElement("div", {
                className: "flex-child"
            }, React.createElement("input", {
                type: "checkbox",
                id: "textDecoration",
                checked: "underline" === this.state.textDecoration,
                onChange: this.onChange
            }), React.createElement("label", {
                htmlFor: "textDecoration",
                style: {
                    textDecoration: "underline"
                }
            }, "Aa")), React.createElement(ObjectOpacity, {
                onChange: this.onChange,
                value: this.state.opacity
            }), React.createElement(ObjectBorder, {
                max: "5",
                colorId: "spectrum-border-color-picker",
                onChange: this.onChange,
                value: this.state.strokeWidth.toString()
            })), this.props.bindTo ? null : React.createElement(Button, {
                secondary: !0,
                onClick: this.addToCanvas,
                text: "+ Add Text"
            }))
        }
    }),
    ThumbnailTemplates = React.createClass({
        displayName: "ThumbnailTemplates",
        propTypes: {
            saveTemplate: React.PropTypes.func.isRequired,
            loadTemplate: React.PropTypes.func.isRequired,
            objects: React.PropTypes.array.isRequired
        },
        getInitialState: function() {
            return {
                store: ThumbnailTemplatesStore.getData(),
                showConfirmation: !1
            }
        },
        componentDidMount: function() {
            ThumbnailTemplatesStore.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            ThumbnailTemplatesStore.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: ThumbnailTemplatesStore.getData()
            })
        },
        onChangeReplaceTemplate: function() {
            var e = !this.state.store.replace;
            ThumbnailTemplatesActions.update({
                replace: e
            })
        },
        onChangeSaveName: function(e) {
            var t = e.target.value;
            t.length > 50 && (t = t.slice(0, 50)), ThumbnailTemplatesActions.update({
                saveName: t
            })
        },
        trimmedSaveName: function() {
            return this.state.store.saveName ? this.state.store.saveName.trim() : null
        },
        objectsEmpty: function() {
            return _.isEmpty(this.props.objects)
        },
        templatesEmpty: function() {
            return _.isEmpty(this.state.store.thumbnail_templates)
        },
        onChangeLoadName: function(e) {
            var t = e.target.value;
            ThumbnailTemplatesActions.update({
                loadName: t
            })
        },
        onSaveTemplate: function() {
            var e = this.trimmedSaveName();
            e && (this.props.saveTemplate(e), u.track("Saved thumbnail editor template"))
        },
        onLoadTemplate: function() {
            var e = this.state.store.loadName,
                t = this.state.store.thumbnail_templates[e],
                a = this.state.store.replace;
            t && (this.props.loadTemplate(t, a), u.track("Loaded thumbnail editor template")), ThumbnailTemplatesActions.update({
                saveName: e
            })
        },
        onClickDelete: function() {
            this.setState({
                showConfirmation: !0
            })
        },
        onConfirmDelete: function() {
            ThumbnailTemplatesActions["delete"](this.state.store.loadName), u.track("Deleted thumbnail editor template"), this.setState({
                showConfirmation: !1
            })
        },
        onCancelDelete: function() {
            this.setState({
                showConfirmation: !1
            })
        },
        spinner: function() {
            return this.state.store.loading ? React.createElement(Spinner, {
                size: "medium"
            }) : null
        },
        getMessage: function() {
            var e = this.state.store,
                t = {
                    opacity: e.msgOpacity
                },
                a = classNames("message", {
                    error: "error" === e.message.type,
                    success: "success" === e.message.type
                }),
                s = "error" === e.message.type ? "error" : "check_circle";
            return React.createElement("span", {
                style: t,
                className: a
            }, React.createElement("i", {
                className: "material-icons"
            }, s), " ", e.message.text)
        },
        render: function() {
            var e = {
                    maxHeight: this.state.showConfirmation ? "0px" : "100px"
                },
                t = classNames("thumbnail-templates", {
                    confirmation: this.state.showConfirmation
                });
            return React.createElement("div", {
                className: t
            }, this.saveSection(e), this.loadSection(e), React.createElement(Confirmation, {
                show: this.state.showConfirmation,
                message: "Delete template " + this.state.store.loadName + "?",
                onConfirm: this.onConfirmDelete,
                onCancel: this.onCancelDelete
            }), this.spinner(), this.getMessage())
        },
        nameExists: function() {
            var e = this.trimmedSaveName(),
                t = this.state.store.thumbnail_templates;
            return _.keys(t).indexOf(e) > -1
        },
        saveSection: function(e) {
            if (this.objectsEmpty()) {
                if (this.state.store.loading) return null;
                var t = this.templatesEmpty() ? "No templates saved, add objects to create a new template" : "Add objects to create or overwrite templates";
                return React.createElement("span", {
                    className: "no-objects-message"
                }, t)
            }
            var a = this.nameExists() ? "Overwrite" : "Create New";
            return React.createElement("div", {
                style: e,
                className: "thumbnail-templates-save",
                title: "Save template"
            }, React.createElement("input", {
                type: "text",
                className: "thumbnail-template-name",
                placeholder: "Name (e.g. my-template-1)",
                onChange: this.onChangeSaveName,
                value: this.state.store.saveName
            }), React.createElement(Button, {
                onClick: this.onSaveTemplate,
                text: a,
                classes: "save-button",
                disabled: !this.trimmedSaveName() || this.state.store.loading
            }))
        },
        loadSection: function(e) {
            return this.templatesEmpty() ? this.objectsEmpty() || this.state.store.loading ? null : React.createElement("span", {
                className: "no-templates-message"
            }, "No templates saved yet, create one above") : React.createElement("div", {
                style: e,
                className: "thumbnail-templates-load",
                title: "Load template"
            }, this.templateSelect(), this.loadSectionActions())
        },
        loadSectionActions: function() {
            return this.state.store.loadName ? React.createElement("div", {
                className: "load-actions"
            }, React.createElement(Button, {
                onClick: this.onLoadTemplate,
                text: "Load",
                classes: "load-button",
                disabled: this.templatesEmpty() || this.state.store.loading || !this.state.store.loadName
            }), React.createElement(Button, {
                onClick: this.onClickDelete,
                text: "Delete",
                classes: "delete-button",
                disabled: this.templatesEmpty() || this.state.store.loading || !this.state.store.loadName,
                secondary: !0
            }), React.createElement("div", {
                className: "thumbnail-template-replace"
            }, React.createElement("input", {
                type: "checkbox",
                id: "template-checkbox",
                checked: this.state.store.replace,
                value: this.state.store.replace,
                onChange: this.onChangeReplaceTemplate
            }), React.createElement("label", {
                htmlFor: "template-checkbox"
            }, "Replace current objects"))) : null
        },
        templateSelect: function() {
            var e = this.state.store.thumbnail_templates,
                t = this.templatesEmpty(),
                a = t ? [] : _.map(_.keys(e), function(e) {
                    return React.createElement("option", {
                        key: e,
                        value: e
                    }, e)
                });
            return a.unshift(React.createElement("option", {
                key: "default",
                value: "",
                disabled: !0
            }, t ? "No templates to load" : "Choose template")), React.createElement("select", {
                className: "thumbnail-template-select",
                disabled: t,
                onChange: this.onChangeLoadName,
                value: this.state.store.loadName ? this.state.store.loadName : ""
            }, a)
        }
    }),
    PreviewThumbnail = React.createClass({
        displayName: "PreviewThumbnail",
        statics: {
            customButtons: function(e, t, a) {
                var s = ThumbnailEditorStore.getData();
                if (s.saved) return [t, "close"];
                var n = {
                    text: "Save Thumbnail",
                    position: "right",
                    onClick: ThumbnailEditorActions.save
                };
                return s.loading ? (n.text = "Saving...", n.disabled = !0, [n]) : [t, n]
            }
        },
        getInitialState: function() {
            return ThumbnailEditorStore.getData()
        },
        componentWillMount: function() {
            ThumbnailEditorStore.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            ThumbnailEditorStore.removeChangeListener(this.onStoreChange), ThumbnailEditorActions.update({
                saved: !1
            })
        },
        onStoreChange: function() {
            this.setState(ThumbnailEditorStore.getData())
        },
        getStatus: function() {
            var e = 'This is what your thumbnail will look like around the web. Click the "Save Thumbnail" button when you\'re ready.';
            return this.state.loading ? e = "Saving thumbnail..." : this.state.saved ? e = React.createElement("span", null, "Your thumbnail has been saved! It may take a few minutes for YouTube to reflect the change.", React.createElement("i", {
                className: "material-icons"
            }, "check_circle")) : this.state.error && (e = this.state.error), e
        },
        render: function() {
            return React.createElement("div", {
                className: "vidiq-thumbnail-editor-preview-thumbnail"
            }, React.createElement("p", {
                className: "thumbnail-instructions"
            }, this.getStatus()), React.createElement("div", {
                className: "flex-container"
            }, React.createElement("div", {
                className: "flex-child youtube-preview"
            }, React.createElement("h2", null, "YouTube (Search)"), React.createElement("div", {
                className: "crop"
            }, React.createElement("img", {
                src: this.state.thumbnailUri
            }))), React.createElement("div", {
                className: "flex-child facebook-preview"
            }, React.createElement("h2", null, "Facebook"), React.createElement("div", {
                className: "crop"
            }, React.createElement("img", {
                src: this.state.thumbnailUri
            }))), React.createElement("div", {
                className: "flex-child twitter-preview"
            }, React.createElement("h2", null, "Twitter"), React.createElement("div", {
                className: "crop"
            }, React.createElement("img", {
                src: this.state.thumbnailUri
            })))))
        }
    }),
    ThumbnailEditor = React.createClass({
        displayName: "ThumbnailEditor",
        propTypes: {
            video: React.PropTypes.object.isRequired
        },
        steps: ["ChooseBackground", "EditThumbnail", "PreviewThumbnail", "SaveThumbnail"],
        componentWillMount: function() {
            u.track("Opened thumbnail editor"), ThumbnailEditorActions.update({
                videoId: this.props.video.id,
                saved: !1
            }), ThumbnailEditorStore.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            ThumbnailEditorStore.removeChangeListener(this.onStoreChange), ThumbnailEditorStore.reset()
        },
        onStoreChange: function() {
            var e = this.state;
            this.setState(ThumbnailEditorStore.getData(), function() {
                e && this.state.loading !== e.loading && Modal[this.state.loading ? "lock" : "unlock"]()
            })
        },
        render: function() {
            return React.createElement(Wizard, {
                steps: this.steps,
                classes: "vidiq-thumbnail-editor"
            })
        }
    }),
    ToggleLimit = React.createClass({
        displayName: "ToggleLimit",
        propTypes: {
            limit: React.PropTypes.number.isRequired,
            container: React.PropTypes.func
        },
        getInitialState: function() {
            return {
                expanded: !1
            }
        },
        onClick: function() {
            this.setState({
                expanded: !this.state.expanded
            })
        },
        exceedsLimit: function() {
            return this.props.children.length > this.props.limit
        },
        render: function() {
            var e = this.props.children;
            if (!e || _.isEmpty(e)) return null;
            if (!_.isArray(e)) return e;
            var t = this.exceedsLimit();
            return !this.state.expanded && t && (e = e.slice(0, this.props.limit)), React.createElement("div", null, this.props.container ? this.props.container(e) : e, t ? this.button() : null)
        },
        button: function() {
            var e = classNames("toggle-extra", {
                    "show-more": !this.state.expanded
                }),
                t = this.state.expanded ? null : React.createElement("div", {
                    className: "text"
                }, "Show More (", this.props.children.length - this.props.limit, ")");
            return React.createElement("button", {
                className: e,
                onClick: this.onClick
            }, t, React.createElement("div", {
                className: "background-image"
            }))
        }
    }),
    TrendingVideos = React.createClass({
        displayName: "TrendingVideos",
        propTypes: {
            mayAddKeywords: React.PropTypes.bool,
            hidKeywords: React.PropTypes.array,
            namespace: React.PropTypes.string,
            onKeywordAdded: React.PropTypes.func,
            selectors: React.PropTypes.bool,
            limit: React.PropTypes.number
        },
        getDefaultProps: function() {
            return {
                selectors: !0
            }
        },
        getInitialState: function() {
            return this.getStateFromStores()
        },
        componentDidMount: function() {
            this._id || (this._id = u.prettyRandomId()), TrendingVideosStore.addChangeListener(this.onStoreChange), $(window).on("kwins:add", this.onKeywordAdded)
        },
        componentWillUnmount: function() {
            TrendingVideosStore.removeChangeListener(this.onStoreChange), $(window).off("kwins:add", this.onKeywordAdded)
        },
        onKeywordAdded: function(e, t, a) {
            a === this.getNamespace() && this.props.onKeywordAdded && this.props.onKeywordAdded(t)
        },
        getNamespace: function() {
            return this.props.namespace || "trending-videos-" + this._id
        },
        getStateFromStores: function() {
            var e = TrendingVideosStore.getData();
            return {
                country: e.country,
                language: e.language,
                videos: e.videos || [],
                loading: e.loading
            }
        },
        onStoreChange: function() {
            this.setState(this.getStateFromStores)
        },
        onChangeSelect: function(e, t) {
            var a = {};
            a[t] = e, TrendingVideosActions.fetch(a)
        },
        render: function() {
            var e, t = this.props.selectors ? React.createElement("div", {
                className: "country-language-selectors"
            }, React.createElement(CountrySelector, {
                defaultValue: this.state.country,
                onChange: this.onChangeSelect
            }), React.createElement(LanguageSelector, {
                defaultValue: this.state.language,
                onChange: this.onChangeSelect
            })) : null;
            if (this.state.videos.length) {
                var a = this.props.limit ? _.first(this.state.videos, this.props.limit) : this.state.videos;
                e = React.createElement(ExpandableVideoList, {
                    videos: a,
                    mayAddKeywords: this.props.mayAddKeywords,
                    hidKeywords: this.props.hidKeywords,
                    namespace: this.getNamespace(),
                    indices: !0
                })
            } else e = this.state.loading ? React.createElement(Spinner, {
                container: !0
            }) : React.createElement("p", {
                className: "vidiq-absolute-middle"
            }, React.createElement("b", null, "No trending videos found"));
            return this.state.videos.length && !this.state.loading || (t = null), React.createElement("div", {
                className: "vidiq-trending-videos"
            }, t, e, LoadingPane.show(this.state.loading, this.state.videos.length > 0))
        }
    }),
    TrendingVideosUpsell = React.createClass({
        displayName: "TrendingVideosUpsell",
        render: function() {
            var e = chrome.extension.getURL("images/upgrade-trends.jpg");
            return React.createElement("div", {
                className: "trending-videos-upsell free-container"
            }, React.createElement("div", {
                className: "suggestion"
            }, "Want to see trending videos?"), React.createElement("img", {
                id: "trending-example",
                src: e,
                alt: "vidIQ",
                height: "506"
            }), React.createElement(Button, {
                text: "Upgrade now!",
                target: "_blank",
                href: "https://app.vidiq.com/plans"
            }))
        }
    }),
    Tweet = React.createClass({
        displayName: "Tweet",
        propTypes: {
            avatar: React.PropTypes.string.isRequired,
            name: React.PropTypes.string.isRequired,
            username: React.PropTypes.string.isRequired,
            time: React.PropTypes.string.isRequired,
            text: React.PropTypes.string.isRequired
        },
        render: function() {
            return React.createElement("div", {
                className: "tweet"
            }, React.createElement("img", {
                className: "t-avatar",
                src: this.props.avatar,
                width: "48",
                height: "48"
            }), React.createElement("span", {
                className: "t-heading"
            }, React.createElement("span", {
                className: "t-name"
            }, this.props.name)), React.createElement("a", {
                className: "t-username",
                href: "https://twitter.com/" + this.props.username,
                target: "blank"
            }, "@", this.props.username), React.createElement("a", {
                target: "blank",
                href: "{this.props.href}",
                className: "t-time"
            }, this.props.time), React.createElement("p", {
                className: "t-body"
            }, this.props.text))
        }
    }),
    TwitterLogo = React.createClass({
        displayName: "TwitterLogo",
        render: function() {
            var e = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 182.7 150.7"><defs><clipPath id="a"><path d="M0 10h1367v1111H0z"/></clipPath></defs><g clip-path="url(#a)" transform="matrix(.1333 0 0 -.1333 0 150.67)"><path fill="#55ACEE" d="M1367 989.4c-50.4-22.3-104.4-37.4-161-44.2 57.7 34.7 102.2 89.7 123 155.2-54-32.2-114-55.5-178-68-51 54.4-124 88.5-204.6 88.5-155 0-280.4-126-280.4-281 0-22 2.3-44 7-64C440 787 233.4 899 95 1069c-24-41-38-89.8-38-141 0-97 49.5-183 124.7-233-46 1.3-89.3 14-127 35v-3c0-136 96.5-249.5 224.8-275-23.5-6.7-48.3-10-73.8-10-18 0-35.7 1.5-52.8 5 35-111.6 139-192.7 262-195-96-75-217-120-349-120-22.8 0-45 1.3-67 4C124 56.3 271 10 429.5 10c516 0 798 427.3 798 798 0 12-.5 24.2-1 36.2 55 39.6 102.3 89 140 145.2"/></g></svg>';
            return React.createElement("span", {
                dangerouslySetInnerHTML: {
                    __html: e
                }
            })
        }
    }),
    UpgradeButton = React.createClass({
        displayName: "UpgradeButton",
        propTypes: {
            text: React.PropTypes.string,
            source: React.PropTypes.string
        },
        onClick: function() {
            this.props.source && u.track("Clicked upgrade from " + this.props.source);
            var e = window.open("https://app.vidiq.com/plans", "_blank");
            e.focus()
        },
        render: function() {
            return React.createElement(Button, {
                onClick: this.onClick,
                text: this.props.text || "Upgrade"
            })
        }
    }),
    TitleDescSuggestions = React.createClass({
        displayName: "TitleDescSuggestions",
        propTypes: {
            addKeyword: React.PropTypes.func.isRequired,
            mode: React.PropTypes.string.isRequired,
            id: React.PropTypes.string,
            permitted: React.PropTypes.bool.isRequired
        },
        getInitialState: function() {
            return this.store = UploadCompanionStore.id(this.props.id), {
                store: this.store.getData()
            }
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        render: function() {
            if (!this.props.permitted || !this.state.store.settings.titleDesc) return null;
            var e = classNames("rec", {
                title: "title" === this.props.mode,
                desc: "description" === this.props.mode,
                enableVidSuggestions: !this.state.store.settings.titleDesc
            });
            return React.createElement("div", {
                className: e
            }, this.headerMessage(), this.getSuggestedTags())
        },
        headerMessage: function() {
            if (!this.state.store.settings.titleDesc) return null;
            var e, t = "title" === this.props.mode ? this.state.store.recTitle : this.state.store.recDesc;
            return e = this.state.store.optimized ? t && t.length ? "Consider including these highly searched keywords in your " + this.props.mode + ":" : "Add more tags to get recommendations for your " + this.props.mode + "!" : "Boost this video to get " + this.props.mode + " recommendations!", React.createElement("h5", null, e)
        },
        getSuggestedTags: function() {
            var e = "title" === this.props.mode ? this.state.store.recTitle : this.state.store.recDesc;
            return this.state.store.settings.titleDesc && e && e.length ? _.map(e, function(e) {
                return React.createElement(Keyword, {
                    onKeywordAdded: this.props.addKeyword,
                    tag: !0,
                    key: e.keyword,
                    kwObject: e,
                    addable: !0,
                    namespace: "suggest-" + this.props.mode
                })
            }, this) : null
        }
    }),
    TitleDescTranslation = React.createClass({
        displayName: "TitleDescTranslation",
        propTypes: {
            id: React.PropTypes.string.isRequired
        },
        getInitialState: function() {
            return this.store = UploadCompanionStore.id(this.props.id), {
                store: this.store.getData()
            }
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        translate: function() {
            Translations.titleDescTranslate(this.props.id, this.state.store.origLang, this.state.store.transLang)
        },
        render: function() {
            if (!this.state.store.settings.translate) return null;
            var e = !this.state.store.origLang || !this.state.store.transLang;
            return React.createElement("div", {
                className: "vidiq-translation-tab"
            }, React.createElement(Button, {
                classes: "vidiq-translate-button",
                disabled: e,
                text: " Translate",
                onClick: this.translate
            }))
        }
    }),
    TranslationModal = React.createClass({
        displayName: "TranslationModal",
        propTypes: {
            id: React.PropTypes.string.isRequired,
            addKeyword: React.PropTypes.func.isRequired,
            addAll: React.PropTypes.func.isRequired
        },
        limit: 30,
        getInitialState: function() {
            return this.store = TranslationStore.id(this.props.id), {
                store: this.store.getData(),
                originalKeywords: this.store.getData().keywords,
                locked: !1
            }
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange)
        },
        componentDidMount: function() {
            this.translate()
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        sourceChange: function(e) {
            TranslationActions.updateLanguage(this.props.id, "source", e), this.translate()
        },
        targetChange: function(e) {
            TranslationActions.updateLanguage(this.props.id, "target", e), this.translate()
        },
        addAllKeywords: function() {
            this.setState({
                locked: !0
            }), this.props.addAll(this.props.id, this.state.store.translated).done(function() {
                Modal.destroy()
            })
        },
        translate: function() {
            "choose" !== this.state.store.target && (TranslationActions.update(this.props.id, {
                loading: !0
            }), TranslationActions.translate(this.props.id, this.state.originalKeywords))
        },
        getButtons: function() {
            return ["cancel", {
                text: "Add All",
                onClick: this.addAllKeywords,
                position: "right"
            }]
        },
        getMessage: function() {
            var e = this.state.store;
            return "choose" === e.target ? React.createElement("h3", {
                className: "alert"
            }, "Choose a language to translate to!") : e.source === e.target ? React.createElement("h3", {
                className: "alert"
            }, "Choose two different languages to translate!") : e.loading ? React.createElement(Spinner, {
                size: "medium"
            }) : !e.loading && e.error ? React.createElement("h3", {
                className: "alert"
            }, "There was a problem getting your translations.") : null
        },
        render: function() {
            return React.createElement(Modal, {
                title: "Translate Keywords",
                buttons: this.getButtons(),
                locked: this.state.locked
            }, React.createElement("div", {
                className: "translate-modal"
            }, this.getMessage(), this.upsell(), this.languageSelect(), this.keywordLists(), this.applying()))
        },
        languageSelect: function() {
            if (this.state.locked) return null;
            var e = _.extend({
                    auto: "Auto-detect"
                }, Translations.languages),
                t = _.extend({
                    choose: "Choose a language..."
                }, Translations.languages);
            return React.createElement("div", {
                className: "language-select"
            }, React.createElement(GeneralSelector, {
                onChange: this.sourceChange,
                classes: "language-select-source",
                defaultValue: this.state.store.source,
                values: e
            }), React.createElement("div", {
                className: "language-select-arrow"
            }, ""), React.createElement(GeneralSelector, {
                onChange: this.targetChange,
                classes: "language-select-target",
                defaultValue: this.state.store.target,
                values: t
            }))
        },
        keywordLists: function() {
            if (this.state.locked || !this.state.store.translated.length) return null;
            var e = this.getMessage() ? [] : this.state.store.translated,
                t = api().featurePermitted("translate") ? this.state.store.keywords : _.first(this.state.store.keywords, 3);
            return React.createElement("div", {
                className: "keyword-lists"
            }, React.createElement(KeywordList, {
                keywords: t,
                classes: "original-keywords",
                kwins: !1,
                getData: !1
            }), React.createElement(KeywordList, {
                keywords: e,
                classes: "translated-keywords",
                addable: !0,
                namespace: this.props.id,
                kwins: !1,
                onKeywordAdded: this.props.addKeyword,
                getData: !0
            }))
        },
        applying: function() {
            if (!this.state.locked || this.state.store.error) return null;
            var e = _.filter(this.state.store.keywords, function(e) {
                return this.state.originalKeywords.indexOf(e) < 0
            }.bind(this));
            return React.createElement("div", {
                className: "middle-applying"
            }, React.createElement("div", {
                className: "header"
            }, React.createElement("h2", null, "Adding translated keywords..."), React.createElement(Spinner, {
                size: "small"
            })), React.createElement("div", {
                className: "keyword-lists"
            }, React.createElement(KeywordList, {
                keywords: e,
                kwins: !1,
                classes: "adding-keywords"
            })))
        },
        upsell: function() {
            if (api().featurePermitted("translate") || this.getMessage() || this.state.store.error) return null;
            var e = React.createElement("a", {
                href: "https://app.vidiq.com/plans",
                target: "_blank"
            }, "vidIQ Pro");
            return React.createElement("h3", null, "Upgrade to ", e, " to see all translations!")
        }
    }),
    UploadClearKeywords = React.createClass({
        displayName: "UploadClearKeywords",
        propTypes: {
            id: React.PropTypes.string,
            clear: React.PropTypes.func.isRequired
        },
        getInitialState: function() {
            return this.store = UploadCompanionStore.id(this.props.id), {
                store: this.store.getData()
            }
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        showDialogue: function() {
            if (this.state.store.keywords.length) {
                var e = function() {
                        Modal.destroy()
                    },
                    t = function() {
                        e(), this.props.clear(this.props.id)
                    }.bind(this);
                Modal.create({
                    title: "Delete all keywords?",
                    innerComponent: Dialogue,
                    innerProps: {
                        onYes: t,
                        onNo: e
                    },
                    size: "small"
                })
            }
        },
        render: function() {
            return this.state.store.settings.clearKws ? React.createElement(Button, {
                classes: "input-clear-button",
                text: " Clear",
                onClick: this.showDialogue,
                secondary: !0
            }) : null
        }
    }),
    UploadCompanion = React.createClass({
        displayName: "UploadCompanion",
        propTypes: {
            mode: React.PropTypes.string.isRequired,
            addKeyword: React.PropTypes.func.isRequired,
            id: React.PropTypes.string.isRequired
        },
        statics: {
            trendingVideosLimit: 1,
            recommendedTagsLimit: 3
        },
        getInitialState: function() {
            return this.store = UploadCompanionStore.id(this.props.id), {
                store: this.store.getData(),
                optimizeObj: api().getOptim()
            }
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange), $(window).on("kwins:add", this.kwinsAdd)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange), $(window).off("kwins:add", this.kwinsAdd)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        kwinsAdd: function(e, t, a) {
            this.props.addKeyword(t, a)
        },
        enableVideoOptim: function() {
            UploadCompanionActions.enableOptim(this.props.id)
        },
        render: function() {
            var e = classNames("vidiq-upload", {
                "yt-card branded-page-box-padding": "upload" === this.props.mode,
                "accordion-expanded upload-item-finished": "upload" === this.props.mode,
                "is-visible": this.state.store.settings.companion,
                "is-hidden": !this.state.store.settings.companion
            });
            return React.createElement("div", {
                className: e
            }, React.createElement("div", {
                className: "container"
            }, React.createElement(UploadHeader, null), React.createElement("div", {
                className: "content"
            }, React.createElement(UploadKeywords, {
                id: this.props.id,
                permitted: this.state.store.permitted,
                loading: this.state.store.loading,
                hotSearch: this.state.store.hotSearch,
                demoLimit: UploadCompanion.recommendedTagsLimit,
                keywords: this.state.store.keywords,
                country: this.state.store.country,
                language: this.state.store.language,
                onKeywordAdded: this.props.addKeyword,
                optimEnabled: this.state.store.optimized
            }), React.createElement(UploadTrendingVideos, {
                id: this.props.id,
                permitted: this.state.store.permitted,
                optimEnabled: this.state.store.optimized,
                demoLimit: UploadCompanion.trendingVideosLimit,
                query: this.state.store.query,
                country: this.state.store.country,
                language: this.state.store.language
            }), React.createElement(UploadOptimizeButton, {
                permitted: this.state.store.permitted,
                quota: this.state.optimizeObj.quota_left,
                totalQuota: this.state.optimizeObj.quota_left + this.state.optimizeObj.quota_used,
                periodEnd: this.state.optimizeObj.period_end,
                onOptimEnable: this.enableVideoOptim,
                optimEnabled: this.state.store.optimized,
                loadingOptim: this.state.store.loading
            })), this.upsell()))
        },
        upsell: function() {
            if (this.state.store.permitted) return null;
            var e = _.isEmpty(this.state.store.hotSearch) ? null : this.state.store.hotSearch.omitted || this.state.store.hotSearch.keywords.length - UploadCompanion.recommendedTagsLimit,
                t = React.createElement("a", {
                    href: "https://app.vidiq.com/plans",
                    target: "_blank"
                }, "vidIQ Boost"),
                a = React.createElement("a", {
                    href: "https://www.youtube.com/watch?v=kapUc1vcBUM",
                    target: "_blank"
                }, "video tutorial");
            return React.createElement("div", {
                className: "boost-upsell-container"
            }, React.createElement("div", {
                className: "boost-upsell-msg"
            }, React.createElement("div", null, "Upgrade to ", t, " to see ", e, " more recommended tags and 9 more trending videos!"), React.createElement("div", {
                className: "boost-upsell-video"
            }, " You can learn more about boosting new videos in this ", a, "!")))
        }
    }),
    UploadCopyKeywords = React.createClass({
        displayName: "UploadCopyKeywords",
        propTypes: {
            id: React.PropTypes.string.isRequired
        },
        getInitialState: function() {
            return this.store = UploadCompanionStore.id(this.props.id), {
                store: this.store.getData()
            }
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        copyKeywords: function() {
            copyTagsGeneral(this.state.store.keywords)
        },
        render: function() {
            return this.state.store.settings.copyKws ? React.createElement("button", {
                onClick: this.copyKeywords,
                className: "copy-tags upload-copy-tags",
                title: "Copy tags to clipboard",
                type: "button"
            }) : null
        }
    }),
    UploadHeader = React.createClass({
        displayName: "UploadHeader",
        render: function() {
            var e = chrome.extension.getURL("images/vidiq_dark.svg"),
                t = api().getLogoBadge(),
                a = api().getUserType();
            return React.createElement("header", {
                className: "vision-header"
            }, React.createElement("a", {
                href: "http://vidiq.com",
                title: "Visit vidIQ"
            }, React.createElement("img", {
                id: "vidiq-logo",
                src: e,
                alt: "vidIQ"
            })), React.createElement("img", {
                id: "vidiq-badge",
                src: t,
                alt: a
            }))
        }
    }),
    UploadKeywords = React.createClass({
        displayName: "UploadKeywords",
        propTypes: {
            id: React.PropTypes.string.isRequired,
            permitted: React.PropTypes.bool.isRequired,
            loading: React.PropTypes.bool.isRequired,
            demoLimit: React.PropTypes.number,
            keywords: React.PropTypes.array,
            country: React.PropTypes.string,
            language: React.PropTypes.string,
            hotSearch: React.PropTypes.object,
            onKeywordAdded: React.PropTypes.func.isRequired,
            optimEnabled: React.PropTypes.bool.isRequired
        },
        getInitialState: function() {
            return {
                sort: "related_score",
                sortedKeywords: []
            }
        },
        componentWillReceiveProps: function(e) {
            var t = e.hotSearch.keywords,
                a = "related_score" === this.state.sort;
            _.isEqual(this.state.sortedKeywords, t) || this.setState({
                sortedKeywords: a ? t : this.sortKeywords(t)
            })
        },
        onSelectorChange: function(e, t) {
            "country" === t ? UploadCompanionActions.update(this.props.id, {
                country: e
            }) : "language" === t && UploadCompanionActions.update(this.props.id, {
                language: e
            })
        },
        onSortChange: function(e) {
            this.setState({
                sort: e,
                sortedKeywords: this.sortKeywords(this.props.hotSearch.keywords, e)
            })
        },
        sortKeywords: function(e, t) {
            return t || (t = this.state.sort), _.sortBy(e, function(e) {
                return -e[t]
            })
        },
        render: function() {
            if (this.props.permitted && !this.props.optimEnabled) return null;
            var e = function(e) {
                    return React.createElement("ul", {
                        className: "reltags"
                    }, e)
                },
                t = this.getHsKeywords();
            return React.createElement("div", {
                className: "left"
            }, React.createElement("div", {
                className: "rec-tags"
            }, React.createElement("div", {
                className: "title rec-tags-title"
            }, "RECOMMENDED TAGS", this.loadingIcon()), React.createElement("div", {
                className: "tab-group",
                "data-tab-group": "tagrecs"
            }, React.createElement("div", {
                className: "vidiq-select-menus"
            }, this.selectors(), this.lockOverlay(), this.sortMenu()), React.createElement("div", {
                className: "tab-container",
                "data-tab": "legacy"
            }, React.createElement(ToggleLimit, {
                limit: 40,
                name: "upload-companion",
                container: e,
                children: t
            })))))
        },
        lockOverlay: function() {
            return this.props.permitted ? null : React.createElement("div", {
                className: "selectors-lock-icon",
                "data-tip-message": "Unlock country, language, and sorting options when you upgrade to Boost!"
            }, React.createElement("span", null, ""))
        },
        selectors: function() {
            return React.createElement("div", {
                className: "country-and-language-selectors"
            }, React.createElement("div", {
                className: "form-field"
            }, React.createElement(CountrySelector, {
                classes: "country-selector",
                disabled: !this.props.permitted,
                onChange: this.onSelectorChange,
                defaultValue: this.props.country
            })), React.createElement("div", {
                className: "form-field"
            }, React.createElement(LanguageSelector, {
                classes: "language-selector",
                disabled: !this.props.permitted,
                onChange: this.onSelectorChange,
                defaultValue: this.props.language
            })))
        },
        sortMenu: function() {
            var e = {
                related_score: "Relevancy"
            };
            this.props.permitted && _.extend(e, {
                overall: "Overall",
                volume: "Volume",
                competition: "Competition",
                estimated_monthly_search: "Monthly Searches"
            });
            var t = classNames("vidiq-sort-text", {
                "vidiq-sort-not-permitted": !this.props.permitted
            });
            return React.createElement("div", {
                className: "rec-tags-sort"
            }, React.createElement("span", {
                className: t
            }, "Sort by "), React.createElement(GeneralSelector, {
                classes: "rec-tags-sort-menu",
                disabled: !this.props.permitted,
                onChange: this.onSortChange,
                defaultValue: "related_score",
                values: e
            }))
        },
        loadingIcon: function() {
            return this.props.loading ? React.createElement("div", {
                className: "rec-tags-spinner"
            }, React.createElement(Spinner, {
                size: "medium"
            })) : null
        },
        getHsKeywords: function() {
            var e = this.props.permitted ? this.state.sortedKeywords : _.first(this.state.sortedKeywords, this.props.demoLimit);
            return _.isEmpty(e) ? this.props.loading ? null : React.createElement("div", {
                className: "rec-tags-msg"
            }, "Add some tags to get recommendations!") : _.map(e, function(e) {
                return React.createElement(Keyword, {
                    key: e.keyword,
                    kwObject: e,
                    li: !0,
                    addable: !0,
                    onKeywordAdded: this.props.onKeywordAdded,
                    namespace: this.props.id
                })
            }, this)
        }
    }),
    UploadKwinsButton = React.createClass({
        displayName: "UploadKwinsButton",
        propTypes: {
            id: React.PropTypes.string.isRequired
        },
        getInitialState: function() {
            return this.store = UploadCompanionStore.id(this.props.id), {
                store: this.store.getData()
            }
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        render: function() {
            return this.state.store.settings.kwIns ? React.createElement("button", {
                className: "open-kwins",
                "data-keyword-namespace": this.props.id,
                "data-keyword-addable": !0,
                type: "button"
            }, "Keyword Inspector") : null
        }
    }),
    UploadOptimizeButton = React.createClass({
        displayName: "UploadOptimizeButton",
        propTypes: {
            permitted: React.PropTypes.bool.isRequired,
            quota: React.PropTypes.number,
            totalQuota: React.PropTypes.number,
            periodEnd: React.PropTypes.number,
            onOptimEnable: React.PropTypes.func.isRequired,
            optimEnabled: React.PropTypes.bool.isRequired,
            loadingOptim: React.PropTypes.bool.isRequired
        },
        getNumDaysLeft: function() {
            var e = 30;
            if (_.isNumber(this.props.periodEnd)) {
                var t = this.props.periodEnd,
                    a = new Date / 1e3;
                if (t >= a) {
                    var s = t - a;
                    e = Math.ceil(s / 60 / 60 / 24)
                }
            }
            return 1 === e ? "tomorrow" : "in " + e + " days"
        },
        optimizationMessage: function(e) {
            if (e) {
                var t = 1 === this.props.quota ? "video" : "videos";
                return React.createElement("h2", null, "You can optimize ", this.props.quota, " more ", t, ". New period starts ", this.getNumDaysLeft(), ".")
            }
            var a = "Your account is limited to " + this.props.totalQuota + " videos a month. If you're interested in more, please contact us.",
                s = React.createElement("a", {
                    className: "optimization-upsell",
                    href: "https://app.vidiq.com/plans",
                    target: "_blank"
                }, "Upgrade");
            return React.createElement("h2", null, "You're out of optimizations for this period. ", s, " or check back ", this.getNumDaysLeft(), ".", React.createElement("i", {
                className: "icon icon-help",
                "data-fixed": "true",
                "data-tip-message": a
            }))
        },
        optimizationButton: function(e) {
            return e ? React.createElement("button", {
                className: "btn enable-optim",
                onClick: this.props.onOptimEnable
            }, "Boost This Video") : null
        },
        render: function() {
            if (!this.props.permitted || this.props.optimEnabled) return null;
            if (this.props.loadingOptim) return React.createElement(Spinner, {
                size: "big"
            });
            var e = api().featurePermitted("optimize");
            return React.createElement("div", {
                className: "optim-prompt"
            }, this.optimizationMessage(e), this.optimizationButton(e))
        }
    }),
    UploadSettingsMenu = React.createClass({
        displayName: "UploadSettingsMenu",
        propTypes: {
            permitted: React.PropTypes.bool.isRequired,
            id: React.PropTypes.string.isRequired,
            mode: React.PropTypes.string.isRequired
        },
        getInitialState: function() {
            return this.store = UploadCompanionStore.id(this.props.id), {
                store: this.store.getData()
            }
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        setPreferences: function(e) {
            var t = e.target.name,
                a = !this.state.store.settings[t];
            UploadCompanionActions.updateSetting(this.props.id, t, a), $(window).trigger("vidiq:settings:" + t, [this.props.id, a])
        },
        boostUpsell: function(e) {
            if (this.props.permitted || "titleDesc" !== e) return null;
            var t = chrome.extension.getURL("images/badge-boost.png");
            return React.createElement("a", {
                href: "https://app.vidiq.com/plans",
                target: "_blank"
            }, React.createElement("img", {
                src: t,
                className: "vidiq-settings-boost"
            }))
        },
        settingsOptions: function() {
            var e = this.state.store.settings,
                t = {
                    color: this.props.permitted ? "#000" : "#888"
                },
                a = {
                    titleDesc: "Title & Description Suggestions",
                    charCount: "Character Counters",
                    kwIns: "Keyword Inspector",
                    clearKws: "Clear Keywords",
                    copyKws: "Copy Keywords",
                    dragDrop: "Drag & Drop Keywords",
                    translate: "Translate",
                    companion: "Recommended Keywords"
                };
            return _.map(a, function(a, s) {
                return React.createElement("li", {
                    key: this.props.id + "-" + s,
                    style: "titleDesc" === s ? t : null
                }, React.createElement("input", {
                    id: s,
                    name: s,
                    type: "checkbox",
                    onChange: this.setPreferences,
                    checked: !!e[s],
                    disabled: "titleDesc" === s && !this.props.permitted
                }), React.createElement("label", {
                    htmlFor: s
                }, a), this.boostUpsell(s))
            }.bind(this))
        },
        render: function() {
            var e = chrome.extension.getURL("images/vidiq_playplus.png");
            return React.createElement("div", {
                className: "vidiq-upload-settings"
            }, React.createElement("div", {
                className: "vidiq-settings-header"
            }, React.createElement("img", {
                src: e,
                className: "vidiq-button-logo vidiq-button-logo-small"
            }), React.createElement("h2", null, " Preferences")), React.createElement("ul", {
                className: "vidiq-upload-checkboxes"
            }, this.settingsOptions()))
        }
    }),
    UploadThumbnailButton = React.createClass({
        displayName: "UploadThumbnailButton",
        propTypes: {
            videoId: React.PropTypes.string.isRequired
        },
        onClick: function() {
            var e = {
                video: {
                    id: this.props.videoId
                }
            };
            Modal.create({
                title: "Thumbnail editor",
                size: "large",
                innerComponent: ThumbnailEditor,
                innerProps: e
            })
        },
        render: function() {
            return React.createElement(Button, {
                classes: "vidiq-thumbnail-button",
                text: "Create Thumbnail",
                onClick: this.onClick
            })
        }
    }),
    UploadTooltip = React.createClass({
        displayName: "UploadTooltip",
        propTypes: {
            id: React.PropTypes.string.isRequired
        },
        getInitialState: function() {
            return {
                mouseOver: !1,
                isEditing: !1,
                shouldShow: !1
            }
        },
        componentDidMount: function() {
            $(window).on("desc:edit", this.onDescEdit), this.store = UploadCompanionStore.id(this.props.id), this.store.addChangeListener(this.onStoreChange), this.checkDescription()
        },
        componentWillUnmount: function() {
            $(window).off("desc:edit", this.onDescEdit), this.store.removeChangeListener(this.onStoreChange)
        },
        onDescEdit: function(e, t) {
            this.setState({
                isEditing: t
            })
        },
        onStoreChange: function() {
            this.checkDescription()
        },
        mouseOver: function() {
            this.setState({
                mouseOver: !0
            })
        },
        mouseLeave: function() {
            this.setState({
                mouseOver: !1
            })
        },
        checkDescription: function() {
            var e = this.store.getData(),
                t = e.keywords,
                a = e.desc,
                s = _.filter(t, function(e) {
                    return a.indexOf(e) >= 0
                }),
                n = e.settings.titleDesc && t.length && !s.length;
            this.setState({
                shouldShow: n
            })
        },
        render: function() {
            if (!this.state.shouldShow) return null;
            var e = this.state.isEditing || this.state.mouseOver ? React.createElement("div", {
                className: "description-hint"
            }, "We did not detect any of your tags in the video description. Make sure your strongest keywords appear across your description, title, and tags.") : null;
            return React.createElement("div", {
                className: "desc-tooltip",
                onMouseEnter: this.mouseOver,
                onMouseLeave: this.mouseLeave
            }, React.createElement("span", {
                className: "description-alert-icon"
            }), e)
        }
    }),
    UploadTranslations = React.createClass({
        displayName: "UploadTranslations",
        propTypes: {
            id: React.PropTypes.string.isRequired,
            addKeyword: React.PropTypes.func.isRequired,
            addAll: React.PropTypes.func.isRequired
        },
        getInitialState: function() {
            return this.store = UploadCompanionStore.id(this.props.id), {
                store: this.store.getData()
            }
        },
        componentWillMount: function() {
            this.store.addChangeListener(this.onStoreChange)
        },
        componentWillUnmount: function() {
            this.store.removeChangeListener(this.onStoreChange)
        },
        onStoreChange: function() {
            this.setState({
                store: this.store.getData()
            })
        },
        showTranslationModal: function() {
            if (this.state.store.keywords.length) {
                var e = {
                    id: this.props.id,
                    addKeyword: this.props.addKeyword,
                    addAll: this.props.addAll
                };
                Modal.mount(TranslationModal, e)
            }
        },
        render: function() {
            return this.state.store.settings.translate ? React.createElement(Button, {
                classes: "vidiq-translate-button",
                text: " Translate",
                onClick: this.showTranslationModal
            }) : null
        }
    }),
    UploadTrendingVideos = React.createClass({
        displayName: "UploadTrendingVideos",
        propTypes: {
            id: React.PropTypes.string.isRequired,
            permitted: React.PropTypes.bool.isRequired,
            optimEnabled: React.PropTypes.bool.isRequired,
            demoLimit: React.PropTypes.number,
            query: React.PropTypes.array,
            country: React.PropTypes.string,
            language: React.PropTypes.string
        },
        getInitialState: function() {
            return {
                searchKeyword: null
            }
        },
        componentWillMount: function() {
            TrendingVideosActions.sort("matches")
        },
        componentDidUpdate: function() {
            this.fetchTrendingVideos()
        },
        hasSearchKeyword: function() {
            return this.state.searchKeyword && this.state.searchKeyword.length
        },
        fetchTrendingVideos: function() {
            (this.hasSearchKeyword() || this.props.query.length) && TrendingVideosActions.fetch({
                query: this.state.searchKeyword || this.props.query,
                country: this.props.country,
                language: this.props.language
            })
        },
        getSortValues: function() {
            return {
                matches: "Matches",
                overall: "Overall",
                vph: "Views per Hour",
                views_count: "Number of Views"
            }
        },
        inputDebounced: _.debounce(function(e) {
            this.setState({
                searchKeyword: e.trim()
            })
        }, 500),
        setSearchKeyword: function(e) {
            var t = e.target.value;
            this.inputDebounced(t)
        },
        onSortChange: function(e) {
            TrendingVideosActions.sort(e)
        },
        render: function() {
            if (this.props.permitted && !this.props.optimEnabled) return null;
            var e = this.props.permitted ? null : this.props.demoLimit;
            return React.createElement("div", {
                className: "right"
            }, React.createElement("div", {
                className: "title trending-vids-title"
            }, "VIDEOS TO GAIN VIEWS FROM"), React.createElement("div", {
                className: "trending-vids-options"
            }, React.createElement("div", {
                className: "trending-vids-search"
            }, React.createElement("input", {
                type: "search",
                placeholder: "Search by keyword",
                onChange: this.setSearchKeyword,
                defaultValue: this.state.searchKeyword
            })), React.createElement("div", {
                className: "trending-vids-sort"
            }, React.createElement("span", null, "Sort by "), React.createElement(GeneralSelector, {
                classes: "trending-vids-sort-menu",
                disabled: !this.props.permitted,
                onChange: this.onSortChange,
                defaultValue: "matches",
                values: this.getSortValues()
            }))), React.createElement("div", {
                className: "vidiq-react"
            }, React.createElement(TrendingVideos, {
                hideKeywords: this.props.query,
                mayAddKeywords: !0,
                namespace: this.props.id,
                selectors: !1,
                limit: e
            })))
        }
    }),
    UploadUpsell = React.createClass({
        displayName: "UploadUpsell",
        propTypes: {
            showUpsell: React.PropTypes.bool.isRequired,
            toggleUpsell: React.PropTypes.func.isRequired
        },
        getInitialState: function() {
            return {
                clicked: !1
            }
        },
        onClickUpgrade: function() {
            u.track("User clicked upgrade button on upload/edit page"), this.setState({
                clicked: !0
            })
        },
        render: function() {
            var e = chrome.extension.getURL("images/rocket.svg"),
                t = {
                    maxHeight: this.props.showUpsell ? "400px" : "0px"
                },
                a = classNames("toggle-upsell", {
                    "hide-upsell": this.props.showUpsell,
                    "show-upsell": !this.props.showUpsell
                }),
                s = this.state.clicked ? "Don't forget to refresh after you upgrade!" : "Get More Views on This Video";
            return React.createElement("div", null, React.createElement("div", {
                style: t,
                className: "upsell-container"
            }, React.createElement("div", {
                style: t,
                className: "boost-upsell-bg"
            }), React.createElement("div", {
                className: "optim-prompt boost-upsell"
            }, React.createElement("h2", null, s), React.createElement("a", {
                href: "https://app.vidiq.com/plans",
                target: "new",
                className: "btn boost-upgrade",
                onClick: this.onClickUpgrade
            }, "Upgrade to ", React.createElement("b", null, "vidIQ Boost")), React.createElement("img", {
                src: e,
                className: "rocket-img"
            }))), React.createElement("a", {
                onClick: this.props.toggleUpsell,
                className: a
            }, this.getLinkMessage()))
        },
        getLinkMessage: function() {
            return this.props.showUpsell ? "Hide" : "Upgrade to vidIQ Boost to get more views!"
        }
    }),
    VideoBufferController = React.createClass({
        displayName: "VideoBufferController",
        limitSteps: [30, 150, 300, 600],
        getInitialState: function() {
            var e = VideoBufferStore.getData();
            return {
                mode: e.mode,
                limitField: this.getLimitFieldValue(e.limit),
                limit: e.limit,
                playlist: e.playlist,
                list: e.list
            }
        },
        componentWillUpdate: function(e, t) {
            var a = t.mode,
                s = t[a],
                n = a === this.state.mode;
            s === this.state[a] && n || VideoBufferActions.set(_.object([
                [a, s],
                ["mode", a]
            ]))
        },
        getLimitFieldValue: function(e) {
            return e ? this.limitSteps.indexOf(e) >= 0 ? e : "custom" : "all"
        },
        getLimitValueFromField: function(e) {
            var t = parseInt(e, 10);
            return "all" === e ? null : "custom" !== e && isFinite(t) ? t : this.state.limit
        },
        onChangeLimitSelect: function(e) {
            this.setState({
                limitField: e.target.value,
                limit: this.getLimitValueFromField(e.target.value)
            })
        },
        onChangeLimitInput: function(e) {
            var t = e.target.value,
                a = parseInt(t, 10);
            !isFinite(a) || 0 >= a || this.setState({
                limit: a,
                limitField: "custom"
            })
        },
        onChangeMode: function(e) {
            var t = e.target.id.split("-").pop();
            this.setState({
                mode: t
            })
        },
        onChangePlaylist: function(e) {
            this.setState({
                playlist: e
            })
        },
        onChangeList: function() {
            var e = this.refs.list.getDOMNode().value,
                t = _.uniq(_.compact(e.replace(/[,\s]/g, " ").replace(/.+?watch\?v=([^\s]+\s?)/g, "$1").split(" ")));
            this.setState({
                list: t
            })
        },
        render: function() {
            return React.createElement("div", {
                className: "video-buffer-controller"
            }, React.createElement("div", {
                className: "vbc-choices"
            }, React.createElement("span", {
                className: "radio-field"
            }, React.createElement("input", {
                type: "radio",
                name: "vbc-choice",
                id: "vbc-choice-limit",
                checked: "limit" === this.state.mode,
                onChange: this.onChangeMode
            }), React.createElement("label", {
                htmlFor: "vbc-choice-limit"
            }, "Load by number of videos")), React.createElement("span", {
                className: "radio-field"
            }, React.createElement("input", {
                type: "radio",
                name: "vbc-choice",
                id: "vbc-choice-list",
                checked: "list" === this.state.mode,
                onChange: this.onChangeMode
            }), React.createElement("label", {
                htmlFor: "vbc-choice-list"
            }, "Load by list of video IDs")), React.createElement("span", {
                className: "radio-field"
            }, React.createElement("input", {
                type: "radio",
                name: "vbc-choice",
                id: "vbc-choice-playlist",
                checked: "playlist" === this.state.mode,
                onChange: this.onChangeMode
            }), React.createElement("label", {
                htmlFor: "vbc-choice-playlist"
            }, "Load by playlist"))), this.content())
        },
        content: function() {
            return this["by" + u.capitalize(this.state.mode)]()
        },
        byLimit: function() {
            return React.createElement("div", {
                className: "vbc-by-number"
            }, React.createElement("select", {
                defaultValue: this.state.limitField,
                onChange: this.onChangeLimitSelect
            }, this.stepOptions(), React.createElement("option", {
                value: "all"
            }, "All videos (up to 3000)"), React.createElement("option", {
                value: "custom"
            }, "Custom")), this.customField())
        },
        byPlaylist: function() {
            return React.createElement("div", {
                className: "vbc-by-playlist"
            }, React.createElement(LoadablePlaylistSelect, {
                onChange: this.onChangePlaylist,
                defaultValue: this.state.playlist,
                loadOnInit: !0
            }))
        },
        byList: function() {
            return React.createElement("div", {
                className: "vbc-by-list"
            }, React.createElement("p", null, "Enter video URLs or video IDs. Separate by commas, spaces, or line breaks."), React.createElement("textarea", {
                onChange: this.onChangeList,
                ref: "list",
                rows: "4",
                cols: "60",
                defaultValue: this.state.list.join("\n")
            }))
        },
        stepOptions: function() {
            return _.map(this.limitSteps, function(e, t) {
                var a = e + " videos";
                return 30 === e && (a = "First page (" + e + ")"), React.createElement("option", {
                    key: t,
                    value: e
                }, a)
            })
        },
        customField: function() {
            return "custom" === this.state.limitField ? React.createElement("input", {
                type: "number",
                defaultValue: this.state.limit,
                className: "custom-amount-field",
                onChange: this.onChangeLimitInput,
                placeholder: "# of vids"
            }) : void 0
        }
    }),
    VC_EngagementsChart = React.createClass({
        displayName: "VC_EngagementsChart",
        propTypes: {
            data: React.PropTypes.array
        },
        create: function(e) {
            var t = e.models.stackedAreaChart().x(function(e) {
                return e[0]
            }).y(function(e) {
                return e[1]
            }).useInteractiveGuideline(!0).duration(350).showControls(!0).showLegend(!1);
            return t.xAxis.tickFormat(function(e) {
                return d3.time.format("%b %e, %Y")(new Date(e))
            }), t.yAxis.tickFormat(function(e) {
                return numbro(e).format("0,0.0a").replace(/\.0(.?)$/, "$1")
            }), t.interactiveLayer.tooltip.headerFormatter(function(e) {
                return moment(e).format("MMMM Do YYYY, h:mm:ss a")
            }), e.utils.windowResize(t.update), t
        },
        render: function() {
            var e = this.props.data;
            return !e || _.isEmpty(e) ? React.createElement(Spinner, {
                container: !0
            }) : React.createElement(D3Chart, {
                create: this.create,
                data: e,
                height: 250
            })
        }
    }),
    VC_PieChart = React.createClass({
        displayName: "VC_PieChart",
        propTypes: {
            data: React.PropTypes.array
        },
        create: function(e) {
            return e.models.pieChart().x(function(e) {
                return e.label
            }).y(function(e) {
                return e.value
            }).color(_.pluck(HISTORICAL_SOCIAL_STATS_MAP, "color")).labelThreshold(.01).showLegend(!1).showLabels(!0).labelsOutside(!0)
        },
        render: function() {
            var e = this.props.data;
            return !e || _.isEmpty(e) ? React.createElement(Spinner, {
                container: !0
            }) : React.createElement(D3Chart, {
                create: this.create,
                data: e,
                height: 250
            })
        }
    }),
    VC_TimeLineChart = React.createClass({
        displayName: "VC_TimeLineChart",
        propTypes: {
            data: React.PropTypes.array
        },
        create: function(e) {
            var t = e.models.lineChart().margin({
                left: 50,
                right: 40
            }).options({
                duration: 350,
                useInteractiveGuideline: !0
            }).clipEdge(!1).showYAxis(!0).showXAxis(!0).showLegend(!1);
            return t.xAxis.tickFormat(function(e) {
                return d3.time.format("%b %e, %Y")(new Date(e))
            }), t.yAxis.tickFormat(function(e) {
                return numbro(e).format("0,0.0a").replace(/\.0(.?)$/, "$1")
            }), t.interactiveLayer.tooltip.headerFormatter(function(e) {
                return moment(e).format("MMMM Do YYYY, h:mm:ss a")
            }), t.interactiveLayer.tooltip.valueFormatter(function(e) {
                var t = "0,0";
                return 1 > e && e > 0 && (t = "0,0.0"), numbro(e).format(t)
            }), t
        },
        render: function() {
            var e = this.props.data;
            return !e || _.isEmpty(e) ? React.createElement(Spinner, {
                container: !0
            }) : React.createElement(D3Chart, {
                create: this.create,
                data: e,
                height: 170
            })
        }
    }),
    VC_Authed_Inner = React.createClass({
        displayName: "VC_Authed_Inner",
        propTypes: {
            videoId: React.PropTypes.string.isRequired,
            activeTab: React.PropTypes.string.isRequired
        },
        componentWillMount: function() {
            VideoCompanionActions.requestData()
        },
        getTabNode: function() {
            var e = this.props.activeTab || "stats",
                t = window["VC_" + u.capitalize(e) + "Tab"];
            return t ? React.createElement(t, this.props) : React.createElement("p", null, 'No component found for tab "', e, '"')
        },
        render: function() {
            var e = ytApi().currentVideoID();
            return this.props.videoId && this.props.videoId === e ? React.createElement(VC_Container, null, this.getTabNode()) : null
        }
    }),
    VC_Authed = wrapComponent(VC_Authed_Inner, VideoCompanionStore, function(e) {
        return _.extend({}, e, {
            addKeyword: VideoCompanionActions.addKeyword
        })
    }),
    VC_Container_Inner = React.createClass({
        displayName: "VC_Container_Inner",
        propTypes: {
            collapsed: React.PropTypes.bool,
            header: React.PropTypes.node,
            className: React.PropTypes.string
        },
        componentWillReceiveProps: function(e) {
            if (this.refs.body && (this._timeout && clearTimeout(this._timeout), this.props.collapsed !== e.collapsed)) {
                var t = this.refs.body.getDOMNode();
                this._collapsing = e.collapsed, e.collapsed ? (t.style.maxHeight = t.offsetHeight + "px", this._lastMaxHeight = t.style.maxHeight) : t.style.maxHeight = this._lastMaxHeight || "5000px"
            }
        },
        componentDidUpdate: function() {
            this.refs.body && (this._timeout = setTimeout(function() {
                this.refs.body.getDOMNode().style.maxHeight = ""
            }.bind(this), this._collapsing ? 10 : 500))
        },
        render: function() {
            var e = classNames("video-companion-container", this.props.className, {
                collapsed: this.props.collapsed
            });
            return React.createElement("div", {
                className: e
            }, this.props.header ? this.props.header : React.createElement(VC_Header, null), React.createElement("div", {
                className: "video-companion-body",
                ref: "body"
            }, this.props.children))
        }
    }),
    VC_Container = wrapComponent(VC_Container_Inner, VideoCompanionStore, function(e) {
        return _.pick(e, "collapsed")
    }),
    VC_DataTable = React.createClass({
        displayName: "VC_DataTable",
        propTypes: {
            data: React.PropTypes.array.isRequired,
            headings: React.PropTypes.array,
            hook: React.PropTypes.func
        },
        render: function() {
            var e = _.chain(this.props.data).map(function(e) {
                    return _.keys(e)
                }).flatten().uniq().value(),
                t = _.map(e, function(e, t) {
                    var a = this.props.headings ? this.props.headings[t] : e;
                    return React.createElement("th", {
                        key: e
                    }, a)
                }, this),
                a = _.map(this.props.data, function(t, a) {
                    var s = _.map(e, function(e, a) {
                        var s = t[e];
                        return this.props.hook && (s = this.props.hook(s, a)), React.createElement("td", {
                            key: a
                        }, s)
                    }, this);
                    return React.createElement("tr", {
                        key: a
                    }, React.createElement("td", {
                        key: 0,
                        className: "index"
                    }, a + 1), s)
                }, this);
            return React.createElement("table", {
                className: "data-table"
            }, React.createElement("thead", null, React.createElement("tr", null, React.createElement("th", null, ""), t)), React.createElement("tbody", null, a))
        }
    }),
    VC_EmbedPopover_Inner = React.createClass({
        displayName: "VC_EmbedPopover_Inner",
        propTypes: {
            topEmbeds: React.PropTypes.array.isRequired,
            embedSources: React.PropTypes.array.isRequired
        },
        headings: ["Domain name", "Views", "Minutes watched"],
        render: function() {
            var e = [{
                name: "Top Embeds",
                content: React.createElement(VC_DataTable, {
                    data: this.props.topEmbeds,
                    headings: this.headings
                }),
                hasContent: !_.isEmpty(this.props.topEmbeds)
            }, {
                name: "Embed Sources",
                content: React.createElement(VC_GoogleResults, {
                    data: this.props.embedSources
                }),
                hasContent: !_.isEmpty(this.props.embedSources)
            }];
            return React.createElement(Tabs, {
                tabs: e
            })
        }
    }),
    VC_EmbedPopover = wrapComponent(VC_EmbedPopover_Inner, VideoCompanionStore, function(e) {
        return {
            topEmbeds: (e.data.insight_top_embeds || {}).response,
            embedSources: (e.data.google_embed_sources || {}).results
        }
    });
VC_EmbedPopover.canDisplay = function(e) {
    var t = (e.insight_top_embeds || {}).response,
        a = (e.google_embed_sources || {}).results;
    return !_.isEmpty(t) || !_.isEmpty(a)
};
var VC_EngagementDistribution = React.createClass({
        displayName: "VC_EngagementDistribution",
        propTypes: {
            data: React.PropTypes.object
        },
        getLabel: function(e) {
            var t = {
                yt: "YT",
                fb: "FB",
                google: "G+",
                reddit: "R",
                tweets: "T",
                stumbleupon: "SU",
                linkedin: "L"
            };
            return t[e]
        },
        getName: function(e) {
            var t = {
                yt: "YouTube",
                fb: "Facebook",
                google: "Google+",
                tweets: "Twitter",
                reddit: "Reddit",
                stumbleupon: "StumbleUpon",
                linkedin: "LinkedIn"
            };
            return t[e]
        },
        getBars: function() {
            return _.chain(this.props.data).map(function(e, t) {
                return .01 > e ? null : {
                    percent: e,
                    key: t
                }
            }).compact().sortBy(function(e) {
                return -e.percent
            }).map(function(e, t) {
                var a = numbro(e.percent).format("0.0%"),
                    s = a.replace(/\../, ""),
                    n = e.percent < .1 ? s : a;
                e.percent < .06 && (n = null);
                var i = {
                        flexBasis: s
                    },
                    o = classNames("bar", "bar-" + e.key),
                    r = this.getName(e.key),
                    c = r + ": " + a + " of engagements",
                    l = 0 === t ? r : this.getLabel(e.key);
                return React.createElement("div", {
                    className: o,
                    style: i,
                    key: e.key,
                    "data-tip-message": c,
                    "data-follow": !0,
                    "data-adjust-y": -20
                }, React.createElement("div", {
                    className: "bar-inner"
                }, React.createElement("span", null, n)), n ? React.createElement("label", null, l) : null)
            }, this).value()
        },
        render: function() {
            if (!this.props.data) return null;
            var e = this.getBars();
            return 0 === e.length ? null : React.createElement("div", {
                className: "vc-engagement-dist"
            }, e)
        }
    }),
    VC_Error = React.createClass({
        displayName: "VC_Error",
        render: function() {
            var e = {
                textAlign: "center",
                lineHeight: "3em"
            };
            return React.createElement("div", null, React.createElement("p", {
                id: "vidiq-error",
                style: e
            }, React.createElement("b", null, "vidIQ"), " is having trouble loading. Please refresh."))
        }
    }),
    VC_GoogleResults = React.createClass({
        displayName: "VC_GoogleResults",
        propTypes: {
            data: React.PropTypes.array.isRequired
        },
        getLis: function() {
            return _.map(this.props.data, function(e, t) {
                return React.createElement("li", {
                    key: t
                }, React.createElement("span", {
                    className: "index"
                }, t + 1), React.createElement("a", {
                    href: e.url
                }, e.title), React.createElement("span", {
                    className: "url"
                }, e.url))
            })
        },
        render: function() {
            return React.createElement("ul", {
                className: "vc-google-results"
            }, this.getLis())
        }
    }),
    VC_Header_Inner = React.createClass({
        displayName: "VC_Header_Inner",
        propTypes: {
            collapsed: React.PropTypes.bool.isRequired,
            activeTab: React.PropTypes.string.isRequired,
            toggleCollapsed: React.PropTypes.func.isRequired,
            data: React.PropTypes.object.isRequired
        },
        tabs: [{
            name: "stats",
            icon: "view_module"
        }, {
            name: "historical",
            icon: "insert_chart"
        }, {
            name: "tweets",
            icon: React.createElement(TwitterLogo, null)
        }, {
            name: "trending",
            icon: "trending_up"
        }],
        getNavButtons: function() {
            return _.map(this.tabs, function(e) {
                var t = _.partial(VideoCompanionActions.update, {
                    activeTab: e.name
                }, null);
                this.props.collapsed && (t = function() {});
                var a, s = classNames("tab-" + e.name, {
                    active: this.props.activeTab === e.name
                });
                return a = _.isString(e.icon) ? React.createElement("i", {
                    className: "material-icons"
                }, e.icon) : e.icon, React.createElement("button", {
                    className: s,
                    onClick: t,
                    key: e.name,
                    "data-tip-message": e.name,
                    "data-center": !0,
                    "data-adjust-y": -5,
                    "data-delay": 100,
                    "data-class": "vc-nav-tooltip"
                }, a, "tweets" === e.name ? this.getTweetsBadge() : null)
            }, this)
        },
        getTweetsBadge: function() {
            var e = this.props.data.tweets;
            if (_.isNumber(e)) return React.createElement("span", {
                className: "tweets-badge"
            }, e)
        },
        render: function() {
            return React.createElement("header", {
                className: "video-companion-header"
            }, React.createElement("nav", null, this.getNavButtons()), React.createElement("a", {
                href: "http://app.vidiq.com",
                target: "_blank"
            }, React.createElement(Logo, {
                badge: !0,
                size: "small"
            })), React.createElement(ToggleCollapsed, {
                collapsed: this.props.collapsed,
                toggle: this.props.toggleCollapsed
            }))
        }
    }),
    VC_Header = wrapComponent(VC_Header_Inner, VideoCompanionStore, function(e) {
        return _.extend({}, e, {
            toggleCollapsed: VideoCompanionActions.toggleCollapsed
        })
    }),
    VC_HistoricalTab = React.createClass({
        displayName: "VC_HistoricalTab",
        propTypes: {
            data: React.PropTypes.object.isRequired
        },
        getChartOrEmptyMessage: function(e, t) {
            return _.isEmpty(e) ? void 0 : t()
        },
        getViewsChart: function() {
            var e = this.props.data.charts.views_chart;
            return this.getChartOrEmptyMessage(e, function() {
                return React.createElement("div", {
                    className: "chart-container"
                }, React.createElement("h1", null, "Views"), React.createElement(VC_TimeLineChart, {
                    data: e
                }))
            })
        },
        getEngagementRateChart: function() {
            var e = this.props.data.charts.engagement_rate_chart;
            return this.getChartOrEmptyMessage(e, function() {
                return React.createElement("div", {
                    className: "chart-container"
                }, React.createElement("h1", null, "Engagement Rate"), React.createElement(VC_TimeLineChart, {
                    data: e
                }))
            })
        },
        getVphChart: function() {
            var e = this.props.data.charts.vph_chart;
            return this.getChartOrEmptyMessage(e, function() {
                return React.createElement("div", {
                    className: "chart-container"
                }, React.createElement("h1", null, "Views Per Hour"), React.createElement(VC_TimeLineChart, {
                    data: e
                }))
            })
        },
        getEngagementsChart: function() {
            var e = this.props.data.charts.engagements_chart;
            return this.getChartOrEmptyMessage(e, function() {
                return React.createElement("div", {
                    className: "chart-container"
                }, React.createElement("h1", null, "Engagements"), React.createElement(VC_EngagementsChart, {
                    data: e
                }))
            })
        },
        getEngagementsBreakdownChart: function() {
            var e = this.props.data.charts.pie_chart;
            return this.getChartOrEmptyMessage(e, function() {
                return React.createElement("div", {
                    className: "chart-container"
                }, React.createElement("h1", null, "Engagement Breakdown"), React.createElement(VC_PieChart, {
                    data: e
                }))
            })
        },
        getEmptyCharts: function() {
            var e = {
                pie_chart: "engagements breakdown",
                engagements_chart: "engagements",
                vph_chart: "views per hour",
                engagmeent_rate_chart: "engagement rate",
                views_chart: "views"
            };
            return _.map(this.props.data.charts, function(t, a) {
                return _.isEmpty(t) ? React.createElement("h1", {
                    key: a,
                    className: "no-data"
                }, "No data for ", e[a], " chart") : void 0
            })
        },
        getCsv: function() {
            var e = this.props.data,
                t = "vidIQ CSV export for " + e.video_id;
            return React.createElement("div", {
                className: "download-csv"
            }, React.createElement("a", {
                href: e.historical_csv,
                download: t,
                className: "vidiq-button"
            }, "Download CSV"))
        },
        render: function() {
            if (!api().featurePermitted("historical")) return React.createElement(VC_HistoricalTabUpsell, null);
            var e = this.props.data.charts;
            return e ? _.isEmpty(e) || _.isEmpty(_.values(e)) ? React.createElement("div", {
                className: "vc-historical"
            }, React.createElement("p", {
                className: "vidiq-absolute-middle"
            }, React.createElement("b", null, "Could not get historical data"))) : React.createElement("div", {
                className: "vc-historical"
            }, this.getViewsChart(), this.getEngagementRateChart(), this.getVphChart(), this.getEngagementsChart(), this.getEngagementsBreakdownChart(), this.getEmptyCharts(), this.getCsv()) : React.createElement(Spinner, {
                container: !0
            })
        }
    }),
    VC_HistoricalTabUpsell = React.createClass({
        displayName: "VC_HistoricalTabUpsell",
        render: function() {
            var e = chrome.extension.getURL("images/graph-blurred.png");
            return React.createElement("div", {
                className: "historical-upsell free-container"
            }, React.createElement("div", {
                className: "suggestion"
            }, "Want historical social and view stats?"), React.createElement("img", {
                id: "graph-example",
                src: e,
                alt: "vidIQ",
                height: "303"
            }), React.createElement(Button, {
                text: "Upgrade now!",
                target: "_blank",
                href: "https://app.vidiq.com/plans"
            }))
        }
    }),
    VC_Loading = React.createClass({
        displayName: "VC_Loading",
        render: function() {
            var e = chrome.extension.getURL("images/loader.gif"),
                t = {
                    background: "url(" + e + ") no-repeat top center",
                    height: "36px"
                };
            return React.createElement("div", {
                id: "vidiq-loader",
                style: t
            })
        }
    }),
    VC_Login = React.createClass({
        displayName: "VC_Login",
        propTypes: {
            submit: React.PropTypes.func.isRequired
        },
        render: function() {
            var e = [{
                name: "email",
                type: "email",
                placeholder: "Email",
                required: !0
            }, {
                name: "password",
                type: "password",
                placeholder: "Password",
                required: !0
            }];
            return React.createElement(ReactForm, {
                id: "loginForm",
                fields: e,
                submit: this.props.submit,
                submitText: "Login"
            }, this.props.children)
        }
    }),
    VC_PasswordReset = React.createClass({
        displayName: "VC_PasswordReset",
        propTypes: {
            submit: React.PropTypes.func.isRequired
        },
        render: function() {
            var e = [{
                name: "email",
                type: "email",
                placeholder: "Email",
                required: !0
            }, {
                name: "confirmEmail",
                type: "email",
                placeholder: "Confirm Email",
                required: !0,
                validate: function(e, t) {
                    return e !== t.email ? "Emails must match" : void 0
                }
            }];
            return React.createElement(ReactForm, {
                id: "loginForm",
                fields: e,
                submit: this.props.submit,
                submitText: "Recover Password"
            }, this.props.children)
        }
    }),
    VC_PrivateIcon = React.createClass({
        displayName: "VC_PrivateIcon",
        render: function() {
            return React.createElement("i", {
                className: "material-icons private-icon"
            }, "lock_open")
        }
    }),
    VC_ReferrerPopover_Inner = React.createClass({
        displayName: "VC_ReferrerPopover_Inner",
        propTypes: {
            topReferrers: React.PropTypes.array.isRequired,
            referredSources: React.PropTypes.array.isRequired
        },
        headings: ["Domain name", "Views", "Minutes watched"],
        render: function() {
            var e = [{
                name: "Top Referrers",
                content: React.createElement(VC_DataTable, {
                    data: this.props.topReferrers,
                    headings: this.headings
                }),
                hasContent: !_.isEmpty(this.props.topReferrers)
            }, {
                name: "Referred Sources",
                content: React.createElement(VC_GoogleResults, {
                    data: this.props.referredSources
                }),
                hasContent: !_.isEmpty(this.props.referredSources)
            }];
            return React.createElement(Tabs, {
                tabs: e
            })
        }
    }),
    VC_ReferrerPopover = wrapComponent(VC_ReferrerPopover_Inner, VideoCompanionStore, function(e) {
        return {
            topReferrers: (e.data.insight_traffic_ext || {}).response,
            referredSources: (e.data.google_traffic_sources || {}).results
        }
    });
VC_ReferrerPopover.canDisplay = function(e) {
    var t = (e.insight_traffic_ext || {}).response,
        a = (e.google_traffic_sources || {}).results;
    return !_.isEmpty(t) || !_.isEmpty(a)
};
var VC_Section = React.createClass({
        displayName: "VC_Section",
        propTypes: {
            heading: React.PropTypes.string.isRequired,
            defaultCollapsed: React.PropTypes.bool
        },
        getInitialState: function() {
            var e = this.props.defaultCollapsed || !1,
                t = dataStore.getItem(this.getCollapsedKey());
            return {
                collapsed: "undefined" == typeof t ? e : t
            }
        },
        getCollapsedKey: function() {
            return "stats_section_heading_collapsed_" + this.props.heading
        },
        toggleCollapsed: function() {
            var e = !this.state.collapsed;
            this.setState({
                collapsed: e
            }), dataStore.setItem(this.getCollapsedKey(), e)
        },
        render: function() {
            var e = this.props.heading.toLowerCase().replace(/ /g, "-"),
                t = classNames("vc-section", "vc-section-" + e, {
                    collapsed: this.state.collapsed
                });
            return React.createElement("section", {
                className: t
            }, React.createElement("header", {
                onClick: this.toggleCollapsed
            }, React.createElement("h1", {
                className: "section-heading"
            }, this.props.heading), React.createElement("button", {
                className: "toggle-collapsed"
            }, this.state.collapsed ? "" : "")), React.createElement("div", {
                className: "section-contents"
            }, this.state.collapsed ? null : this.props.children))
        }
    }),
    VC_SeoScorePopover_Inner = React.createClass({
        displayName: "VC_SeoScorePopover_Inner",
        propTypes: {
            seoScoreData: React.PropTypes.object.isRequired,
            owned: React.PropTypes.bool
        },
        getValues: function(e) {
            return _.compact(_.map(this.props.seoScoreData[e], function(e, t) {
                return "overall" !== t ? {
                    key: t,
                    outOf: 5
                } : void 0
            }))
        },
        getBoxes: function(e) {
            return _.map(this.getValues(e), function(e) {
                return {
                    keys: [e.key]
                }
            })
        },
        getScore: function(e) {
            return React.createElement(VC_StatValue, {
                value: this.props.seoScoreData[e].overall,
                label: "score" + e,
                outOf: 50,
                score: !0
            })
        },
        getUpgrade: function() {
            if (!(["basic", "pro"].indexOf(api().getUserType()) < 0) && this.props.owned) {
                var e = "https://www.youtube.com/watch?v=kapUc1vcBUM&list=PLTYbelo0OEJ5kafmU_1lpsVsoz8thBZRO";
                return React.createElement("div", {
                    className: "seo-score-popover-upgrade"
                }, React.createElement("p", null, "With ", React.createElement("b", null, "vidIQ Boost"), " we can help you improve your video's performance!"), React.createElement("p", null, React.createElement("icon", {
                    className: "material-icons"
                }, "video_library"), React.createElement("a", {
                    target: "new",
                    href: e
                }, "Learn more about ", React.createElement("b", null, "vidIQ Boost"))), React.createElement(UpgradeButton, {
                    source: "SEO Score Popover",
                    text: "Upgrade to Boost"
                }))
            }
        },
        render: function() {
            return React.createElement("div", {
                className: "seo-score-popover"
            }, React.createElement("h1", null, "Actionable ", this.getScore("actionable")), React.createElement(VC_StatSection, {
                boxes: this.getBoxes("actionable"),
                values: this.getValues("actionable"),
                layout: "third",
                data: this.props.seoScoreData.actionable
            }), React.createElement("h1", null, "Performance ", this.getScore("nonactionable")), React.createElement(VC_StatSection, {
                boxes: this.getBoxes("nonactionable"),
                values: this.getValues("nonactionable"),
                layout: "third",
                data: this.props.seoScoreData.nonactionable
            }), this.getUpgrade())
        }
    }),
    VC_SeoScorePopover = wrapComponent(VC_SeoScorePopover_Inner, VideoCompanionStore, function(e) {
        return {
            seoScoreData: e.data.seo_score_data || {},
            owned: e.data.owned
        }
    });
VC_SeoScorePopover.canDisplay = function(e) {
    return !_.isEmpty(e.seo_score_data)
}, VC_SeoScorePopover.width = 280;
var VC_SettingsTab = React.createClass({
        displayName: "VC_SettingsTab",
        render: function() {
            return React.createElement("h1", null, "Settings!")
        }
    }),
    VC_Signup = React.createClass({
        displayName: "VC_Signup",
        propTypes: {
            submit: React.PropTypes.func.isRequired
        },
        render: function() {
            var e = [{
                name: "email",
                type: "email",
                placeholder: "Email",
                required: !0
            }, {
                name: "name",
                placeholder: "Full Name",
                required: !0
            }, {
                name: "password",
                type: "password",
                placeholder: "Password",
                required: !0,
                validate: function(e) {
                    return e.length < 6 ? "Password must be at least 6 characters long" : void 0
                }
            }, {
                name: "confirm-password",
                type: "password",
                placeholder: "Confirm Password",
                required: !0,
                validate: function(e, t) {
                    return e !== t.password ? "Passwords must match" : void 0
                }
            }, {
                name: "tos",
                type: "checkbox",
                value: "true",
                required: "You must agree to the Terms of Service",
                makeChildren: function(e) {
                    return React.createElement("label", {
                        htmlFor: e.id
                    }, "Agree to our", React.createElement("a", {
                        href: "http://vidiq.com/terms/",
                        target: "new"
                    }, "Terms of Service"))
                }
            }];
            return React.createElement(ReactForm, {
                id: "loginForm",
                fields: e,
                submit: this.props.submit,
                showValid: !0,
                submitText: "Create Account"
            }, this.props.children)
        }
    }),
    VC_SpeedometerWrapper = React.createClass({
        displayName: "VC_SpeedometerWrapper",
        propTypes: {
            value: React.PropTypes.number.isRequired
        },
        render: function() {
            return React.createElement(Speedometer, {
                vph: this.props.value
            })
        }
    }),
    VC_StatBox = React.createClass({
        displayName: "VC_StatBox",
        propTypes: {
            values: React.PropTypes.array.isRequired,
            popover: React.PropTypes.string,
            width: React.PropTypes.oneOf(["quarter", "third", "half"]),
            allData: React.PropTypes.object,
            alt: React.PropTypes.bool
        },
        getSlug: function(e) {
            return e.replace(/ /g, "-").toLowerCase()
        },
        getMulti: function() {
            var e = _.map(this.props.values, function(e, t) {
                var a = e.url ? this.props.allData[e.url] : null,
                    s = function() {
                        a && window.open(a)
                    },
                    n = this.getSlug(e.label),
                    i = classNames("stat-pair-" + n, {
                        clickable: e.url
                    });
                return React.createElement("tr", {
                    key: t,
                    onClick: s,
                    className: i
                }, React.createElement("td", null, React.createElement(VC_StatValue, e)), React.createElement("td", null, React.createElement("label", {
                    title: e.label
                }, e.label)))
            }, this);
            return React.createElement("table", null, React.createElement("tbody", null, e))
        },
        getSingle: function() {
            var e = this.props.values[0];
            return [React.createElement(VC_StatValue, _.extend({}, e, {
                key: 0
            })), React.createElement("label", {
                key: 1,
                title: e.label
            }, e.label)]
        },
        getPopover: function() {
            if (this.props.popover) {
                var e = window[this.props.popover];
                if (e && (!e.canDisplay || !this.props.allData || e.canDisplay(this.props.allData))) return React.createElement("i", {
                    className: "material-icons popover-icon"
                }, "remove_red_eye")
            }
        },
        getClassName: function() {
            return "stat-box-" + _.pluck(this.props.values, "label").join("-").toLowerCase().replace(/ /g, "-")
        },
        render: function() {
            var e = classNames("stat-box", this.props.width, this.getClassName(), {
                    alt: this.props.alt,
                    multi: this.props.values.length > 1
                }),
                t = this.getPopover(),
                a = {
                    className: e
                };
            return t && (a["data-react-popover"] = this.props.popover), React.createElement("div", a, React.createElement("div", {
                className: "stat-box-inner"
            }, t, this.props.values.length > 1 ? this.getMulti() : this.getSingle()))
        }
    }),
    VC_StatSection = React.createClass({
        displayName: "VC_StatSection",
        propTypes: {
            boxes: React.PropTypes.array.isRequired,
            values: React.PropTypes.array.isRequired,
            data: React.PropTypes.object.isRequired,
            layout: React.PropTypes.oneOf(["quarter", "third", "half"])
        },
        getStatBoxesProps: function() {
            return _.compact(_.map(this.props.boxes, function(e) {
                var t = !0,
                    a = _.compact(_.map(e.keys, function(e) {
                        var a = _.findWhere(this.props.values, {
                            key: e
                        });
                        if (a) {
                            var s = a.label;
                            s || (s = e.replace(/_/g, " "));
                            var n = this.props.data[e];
                            if (_.isObject(n) && void 0 !== n.value) {
                                var i = n;
                                n = i.value, _.extend(a, _.omit(i, "value"))
                            }
                            var o = _.isNumber(n) && !isFinite(n);
                            if (!(void 0 === n || null === n || o || 0 === n && a.hideZero)) {
                                t = !1;
                                var r;
                                return r = "function" == typeof a.tooltip ? a.tooltip(n, this.props.data) : a.tooltip, _.extend({}, a, {
                                    value: n,
                                    label: s,
                                    tooltip: r
                                })
                            }
                        }
                    }, this));
                return t ? void 0 : _.extend({}, _.omit(e, "keys"), {
                    values: a,
                    allData: this.props.data
                })
            }, this))
        },
        getStatBoxes: function() {
            var e = this.getStatBoxesProps(),
                t = e.length,
                a = t % 4 === 0,
                s = (t - 1) % 3 === 0;
            return _.map(e, function(e, n) {
                var i = !1,
                    o = this.props.layout,
                    r = n >= t - 5,
                    c = a || s && r;
                if (!o && c && (o = "quarter"), "half" === o) i = (n + 1) % 3 === 0 || (n + 2) % 3 === 0;
                else if ("quarter" === o && a) {
                    var l = Math.floor(n / 4) % 2 === 0,
                        d = l ? n - 1 : n;
                    i = d % 2 === 0
                } else i = (n + 1) % 2 === 0;
                var p = _.extend({}, e, {
                    width: o,
                    key: n,
                    alt: i
                });
                return React.createElement(VC_StatBox, p)
            }, this)
        },
        render: function() {
            var e = classNames("vc-stat-section", {
                "half-layout": "half" === this.props.layout,
                "third-layout": !this.props.layout
            });
            return React.createElement("section", {
                className: e
            }, this.getStatBoxes(), this.props.children)
        }
    }),
    VC_StatValue = React.createClass({
        displayName: "VC_StatValue",
        propTypes: {
            value: React.PropTypes.any.isRequired,
            label: React.PropTypes.string,
            score: React.PropTypes.bool,
            currency: React.PropTypes.bool,
            "private": React.PropTypes.bool,
            percent: React.PropTypes.bool,
            outOf: React.PropTypes.number,
            change: React.PropTypes.number,
            include: React.PropTypes.string,
            size: React.PropTypes.string,
            tooltip: React.PropTypes.string
        },
        getValue: function() {
            var e = this.props.value;
            if (_.isNumber(e)) {
                var t = {
                    separate: !0,
                    thousands: !0
                };
                return this.props.percent && (e *= 100), this.props.currency && _.extend(t, {
                    format: "0.00a",
                    thousands: "0,0.00",
                    trim: !1
                }), u.numbro(e, t)
            }
            return [e, null]
        },
        getValueInner: function(e) {
            var t = e.split(".");
            return 1 === t.length ? e : React.createElement("span", null, React.createElement("span", {
                className: "main-part"
            }, t[0], "."), React.createElement("span", {
                className: "decimal-part"
            }, t[1]))
        },
        getUnit: function(e) {
            return (e = e || (this.props.percent ? "%" : null)) ? React.createElement("span", {
                className: "unit"
            }, e) : void 0
        },
        getOutOf: function() {
            return this.props.outOf ? React.createElement("span", {
                className: "out-of"
            }, "/", this.props.outOf) : void 0
        },
        getCurrency: function() {
            return this.props.currency ? React.createElement("span", {
                className: "currency"
            }, "$") : void 0
        },
        getPrivate: function() {
            return this.props["private"] ? React.createElement(VC_PrivateIcon, null) : void 0
        },
        getChange: function() {
            if (_.isNumber(this.props.change) && isFinite(this.props.change)) {
                var e = numbro(this.props.change).format("0%"),
                    t = this.props.change > 0,
                    a = 0 === this.props.change,
                    s = t ? "" : "";
                a && (s = null);
                var n = classNames("change", {
                    positive: t,
                    negative: !t && !a,
                    zero: a
                });
                return React.createElement("span", {
                    className: n
                }, s, e)
            }
        },
        getScoreClass: function(e) {
            if (this.props.score) {
                var t = e / this.props.outOf;
                if (isFinite(t)) return .33 > t ? "score-poor" : .66 > t ? "score-average" : "score-good"
            }
        },
        getChild: function() {
            return this.props.include ? React.createElement(window[this.props.include], this.props) : void 0
        },
        render: function() {
            var e = this.getValue(),
                t = e[0],
                a = e[1],
                s = classNames("stat-value", "stat-value-" + this.props.label.toLowerCase().replace(/ /g, "-"), this.props.size, this.getScoreClass(t), {
                    score: this.props.score,
                    "private": this.props["private"],
                    extended: t.toString().length > 11
                });
            return React.createElement("span", {
                className: s,
                "data-tip-message": this.props.tooltip
            }, this.getPrivate(), this.getCurrency(), React.createElement("span", {
                className: "value-inner"
            }, this.getValueInner(t)), this.getUnit(a), this.getOutOf(), this.getChange(), this.getChild())
        }
    }),
    VC_StatsTab = React.createClass({
        displayName: "VC_StatsTab",
        propTypes: {
            videoId: React.PropTypes.string.isRequired,
            data: React.PropTypes.object.isRequired,
            addKeyword: React.PropTypes.func.isRequired
        },
        onClickAddKeyword: function() {
            var e = this.refs.tagInput.getDOMNode();
            e.value && (this.props.addKeyword({
                keyword: e.value
            }), e.value = "")
        },
        addKeyword: function(e, t, a) {
            this.props.addKeyword(a)
        },
        addKwinsKeyword: function(e, t, a) {
            "video-companion" === a && this.addKeyword(t, a, {
                keyword: t
            })
        },
        componentWillMount: function() {
            $(window).on("kwins:add", this.addKwinsKeyword)
        },
        componentWillUnmount: function() {
            $(window).off("kwins:add", this.addKwinsKeyword)
        },
        noKeywords: function() {
            return React.createElement("div", {
                className: "no-keywords"
            }, React.createElement("b", null, "No tags"))
        },
        getAdaptedKeywords: function() {
            var e = this.props.data.keyword_data;
            if (_.isEmpty(e)) {
                if (!this.props.data.keywords) return;
                e = _.map(this.props.data.keywords, function(e) {
                    return {
                        keyword: e
                    }
                })
            } else e = _.map(e, function(e) {
                return _.extend({}, e, {
                    keyword: e.keyword || e.text
                })
            });
            return e
        },
        getKeywords: function(e, t) {
            return void 0 === e ? React.createElement(Spinner, {
                size: "small",
                container: !0
            }) : _.isEmpty(e) ? this.noKeywords() : (this.props.data.owned || (t = !1), React.createElement(KeywordList, {
                keywords: e,
                addable: t,
                kwins: !0,
                namespace: "video-companion",
                classes: "keywords",
                onKeywordAdded: this.addKeyword
            }))
        },
        getCopyKeywords: function() {
            var e = this.getAdaptedKeywords();
            if (!_.isEmpty(e)) {
                var t = function() {
                    copyTagsGeneral(_.pluck(e, "keyword").join(", "))
                };
                return React.createElement("button", {
                    onClick: t,
                    className: "copy-tags",
                    title: "Copy tags to clipboard"
                })
            }
        },
        getAddKeyword: function() {
            if (this.props.data.owned) {
                var e = function(e) {
                    e.preventDefault()
                };
                return React.createElement("form", {
                    className: "add-keyword-container",
                    onSubmit: e
                }, React.createElement("input", {
                    type: "text",
                    ref: "tagInput"
                }), React.createElement(Button, {
                    onClick: this.onClickAddKeyword,
                    type: "submit",
                    secondary: !0,
                    text: "Add Tag"
                }))
            }
        },
        statSection: function(e, t) {
            var a = VC_DECLARED_STATS;
            return this.props.data.owned || (a = _.map(VC_DECLARED_STATS, function(e) {
                return _.extend({}, e, {
                    "private": !1
                })
            })), e = _.extend({
                values: a,
                data: this.props.data
            }, e), React.createElement(VC_StatSection, e, t)
        },
        getKeywordRecs: function() {
            if (this.props.data.owned && !_.isEmpty(this.props.data.keywords) && this.props.data.keyword_recs_allowed) {
                var e = (this.props.data.keyword_recs || {}).keywords;
                return React.createElement(VC_Section, {
                    heading: "suggested video tags"
                }, this.getKeywords(e, !0))
            }
        },
        render: function() {
            var e = React.createElement(VC_EngagementDistribution, {
                data: this.props.data.engagement_dist
            });
            return React.createElement("div", null, React.createElement(VC_Section, {
                heading: "overview"
            }, this.statSection({
                boxes: OVERVIEW_STAT_BOXES
            }), React.createElement("section", {
                className: "vc-top-things"
            }, React.createElement(VC_TopDevices, {
                data: this.props.data.top_devices
            }), React.createElement(VC_TopCountries, {
                data: this.props.data.top_countries
            }))), React.createElement(VC_Section, {
                heading: "social"
            }, this.statSection({
                boxes: SOCIAL_STAT_BOXES
            }, e)), React.createElement(VC_Section, {
                heading: "seo"
            }, this.statSection({
                boxes: SEO_STAT_BOXES
            })), React.createElement(VC_Section, {
                heading: "channel"
            }, this.statSection({
                boxes: CHANNEL_STAT_BOXES
            })), React.createElement(VC_Section, {
                heading: "video tags"
            }, this.getKeywords(this.getAdaptedKeywords()), this.getCopyKeywords(), this.getAddKeyword()), this.getKeywordRecs(), React.createElement(VC_Section, {
                heading: "channel tags",
                defaultCollapsed: !0
            }, this.getKeywords(this.props.data.channel_keywords, !0)))
        }
    }),
    ToggleCollapsed = React.createClass({
        displayName: "ToggleCollapsed",
        propTypes: {
            collapsed: React.PropTypes.bool.isRequired,
            toggle: React.PropTypes.func.isRequired
        },
        render: function() {
            var e = classNames("toggle-collapse", {
                    collapsed: this.props.collapsed
                }),
                t = '<svg viewBox="0 0 22 22"><g transform="translate(1.000000, 1.000000)" stroke-width="2"><path class="outer-ring" d="M10,20 C15.5228475,20 20,15.5228475 20,10 C20,4.4771525 15.5228475,0 10,0 C4.4771525,0 0,4.4771525 0,10 C0,15.5228475 4.4771525,20 10,20 Z" fill="none"></path><path class="chevron" d="M6,11.7883523 L9.80326705,8 L13.6065341,11.7883523" stroke-linecap="round" stroke-linejoin="round"fill="none"></path></g></svg>';
            return React.createElement("button", {
                className: e,
                dangerouslySetInnerHTML: {
                    __html: t
                },
                onClick: this.props.toggle
            })
        }
    }),
    VC_TopThingMixin = {
        getList: function() {
            var e = _.map(this.props.data, function(e, t) {
                var a = u.numbro(100 * e.percent),
                    s = numbro(e.views, "0,0") + " " + u.plural(e.views, "view"),
                    n = React.createElement("label", null, t);
                return this.getLabel && (n = this.getLabel(t, e)), React.createElement("li", {
                    title: s,
                    key: t
                }, n, React.createElement("span", {
                    className: "value"
                }, a, "%"))
            }, this);
            return React.createElement("ul", null, e)
        },
        render: function() {
            if (_.isEmpty(this.props.data)) return null;
            var e = classNames("vc-top-thing", "vc-top-" + this.type);
            return React.createElement("div", {
                className: e
            }, React.createElement("h2", null, React.createElement(VC_PrivateIcon, null), " top ", this.type), this.getList())
        }
    },
    VC_TopCountries = React.createClass({
        displayName: "VC_TopCountries",
        mixins: [VC_TopThingMixin],
        type: "countries",
        propTypes: {
            data: React.PropTypes.object
        },
        getLabel: function(e) {
            var t = "flag " + e,
                a = iso2country(e);
            return React.createElement("span", {
                className: t,
                "data-tip-message": a
            })
        }
    }),
    VC_TopDevices = React.createClass({
        displayName: "VC_TopDevices",
        mixins: [VC_TopThingMixin],
        type: "devices",
        propTypes: {
            data: React.PropTypes.object
        },
        getLabel: function(e) {
            var t = {
                    desktop: "desktop_mac",
                    mobile: "phone_iphone",
                    tablet: "tablet",
                    "game console": "videogame_asset",
                    tv: "tv"
                },
                a = t[e],
                s = u.capitalize(e);
            return "tv" === e && (s = "TV"), React.createElement("i", {
                className: "material-icons",
                "data-tip-message": s
            }, a)
        }
    }),
    VC_TrendingTab = React.createClass({
        displayName: "VC_TrendingTab",
        propTypes: {
            data: React.PropTypes.object.isRequired
        },
        isPermitted: function() {
            return api().featurePermitted("trending")
        },
        componentWillUpdate: function() {
            this.requestData()
        },
        componentWillMount: function() {
            this.requestData()
        },
        requestData: function() {
            if (this.isPermitted()) {
                var e = this.props.data.title,
                    t = this.props.data.keywords || [];
                !e && _.isEmpty(t) || TrendingVideosActions.fetch({
                    title: e,
                    keywords: t
                })
            }
        },
        render: function() {
            return this.isPermitted() ? React.createElement(TrendingVideos, null) : React.createElement(TrendingVideosUpsell, null)
        }
    }),
    VC_TweetsTab = React.createClass({
        displayName: "VC_TweetsTab",
        propTypes: {
            data: React.PropTypes.object.isRequired
        },
        getTweets: function() {
            return _.map(this.props.data.tweet_list, function(e, t) {
                var a = _.extend({
                    key: t
                }, e);
                return React.createElement(Tweet, a)
            })
        },
        getNoneFound: function() {
            return this.isLoading() ? void 0 : React.createElement("p", {
                className: "vidiq-absolute-middle"
            }, React.createElement("b", null, "No Tweets found"))
        },
        isLoading: function() {
            return void 0 === this.props.data.tweet_list
        },
        getLoading: function() {
            return this.isLoading() ? React.createElement(Spinner, {
                container: !0
            }) : void 0
        },
        render: function() {
            var e = this.getTweets();
            return React.createElement("div", {
                className: "vc-tweets"
            }, this.getLoading(), e.length > 0 ? e : this.getNoneFound())
        }
    }),
    VC_Unauthed = React.createClass({
        displayName: "VC_Unauthed",
        getInitialState: function() {
            var e = localStorage.hidden && "true" === localStorage.hidden;
            return {
                mode: "login",
                collapsed: e
            }
        },
        signup: function(e) {
            return Extension.signup(e.email, e.name, e.password).done(function() {
                this.enterLogin(), this.login(e)
            }.bind(this))
        },
        login: function(e) {
            return Extension.login(e.email, e.password)
        },
        resetPassword: function(e) {
            var t = new $.Deferred;
            return api().recoverPW(e.email, function(e) {
                var a = "An error occurred or no such email exists";
                return e ? void t.resolve("Check your email for further instructions!") : t.reject(a)
            }), t.promise()
        },
        toggleCollapsed: function() {
            var e = !this.state.collapsed;
            localStorage.hidden = e, this.setState({
                collapsed: e
            })
        },
        enterSignup: function() {
            u.track("User viewed signup form"), this.setState({
                mode: "signup"
            })
        },
        enterLogin: function() {
            this.setState({
                mode: "login"
            })
        },
        enterForgotPassword: function() {
            u.track("User viewed forgot password form"), this.setState({
                mode: "forgot-password"
            })
        },
        getLogo: function() {
            return chrome.extension.getURL("images/vidiq_dark.svg")
        },
        render: function() {
            return React.createElement(VC_Container, {
                collapsed: this.state.collapsed,
                className: "unauthed",
                header: this.header()
            }, React.createElement("div", null, this.subHeader(), this.form(), this.footer()))
        },
        subHeader: function() {
            return React.createElement("div", {
                className: "unauthed-sub-header",
                key: "header"
            }, React.createElement("a", {
                href: "http://vidiq.com",
                title: "Visit vidIQ"
            }, React.createElement("img", {
                id: "vidiq-logo-big",
                src: this.getLogo()
            })), this.loginHeaderMessage())
        },
        loginHeaderMessage: function() {
            var e;
            switch (this.state.mode) {
                case "login":
                    e = "Login to your existing vidIQ account";
                    break;
                case "signup":
                    e = "Sign up for a new vidIQ account";
                    break;
                case "forgot-password":
                    e = "Forgot your password?";
                    break;
                default:
                    return null
            }
            return React.createElement("p", {
                className: "message"
            }, e)
        },
        backEl: function() {
            return React.createElement("span", {
                className: "back-to-login signup recover"
            }, React.createElement("a", {
                className: "go-to-login",
                onClick: this.enterLogin
            }, "Back to login"))
        },
        forgotPasswordForm: function() {
            return React.createElement(VC_PasswordReset, {
                submit: this.resetPassword,
                key: "forgotpass"
            }, this.backEl())
        },
        loginForm: function() {
            return React.createElement(VC_Login, {
                submit: this.login,
                key: "login"
            }, React.createElement("a", {
                className: "forgot-pw signin",
                onClick: this.enterForgotPassword
            }, "Forgot password?"))
        },
        signupForm: function() {
            return React.createElement(VC_Signup, {
                submit: this.signup,
                key: "signup"
            }, this.backEl())
        },
        form: function() {
            switch (this.state.mode) {
                case "login":
                    return this.loginForm();
                case "signup":
                    return this.signupForm();
                case "forgot-password":
                    return this.forgotPasswordForm();
                default:
                    return null
            }
        },
        footer: function() {
            return "login" !== this.state.mode ? null : React.createElement("div", {
                className: "unauthed-footer signin",
                key: "footer"
            }, "Don't have an account?", React.createElement(Button, {
                onClick: this.enterSignup,
                secondary: !0
            }, "Sign up for free!"))
        },
        collapsedHeader: function() {
            var e = function() {
                this.toggleCollapsed(), this.enterSignup()
            }.bind(this);
            return React.createElement("div", {
                className: "unauthed-collapsed-header"
            }, React.createElement("img", {
                id: "vidiq-logo-big",
                src: this.getLogo(),
                alt: "vidIQ"
            }), "It's Free! ", React.createElement("a", {
                onClick: e
            }, "Get Started"), ".")
        },
        header: function() {
            return React.createElement("div", {
                className: "unauthed-header"
            }, this.collapsedHeader(), React.createElement(ToggleCollapsed, {
                collapsed: this.state.collapsed,
                toggle: this.toggleCollapsed
            }))
        }
    }),
    VC_YtSearchSuggestedPopover_Inner = React.createClass({
        displayName: "VC_YtSearchSuggestedPopover_Inner",
        propTypes: {
            ytSearchData: React.PropTypes.array.isRequired,
            ytSuggestedData: React.PropTypes.array.isRequired,
            videoReferrers: React.PropTypes.object,
            keywords: React.PropTypes.array.isRequired,
            addKeyword: React.PropTypes.func.isRequired
        },
        searchHeadings: ["Search term", "Views", "Minutes watched"],
        suggestedHeadings: ["Video", "Views", "Minutes watched"],
        linkHook: function(e, t) {
            if (0 !== t) return e;
            var a = this.props.videoReferrers[e] || {},
                s = "/watch?v=" + e,
                n = React.createElement("span", null, "by ", React.createElement("a", {
                    target: "new",
                    href: a.channel_url
                }, a.channel_name));
            a.channel_name || (n = null);
            var i = "unknown" === e ? a.title || e : React.createElement("a", {
                href: s,
                target: "new"
            }, a.title || e);
            return React.createElement("span", null, i, " ", n)
        },
        searchHook: function(e, t) {
            if (0 !== t) return e;
            var a = _.map(this.props.keywords || [], function(e) {
                    return e.toLowerCase()
                }),
                s = a.indexOf(e.toLowerCase()) >= 0,
                n = function(e, t, a) {
                    return this.props.addKeyword(a)
                }.bind(this);
            return React.createElement(Keyword, {
                kwObject: {
                    keyword: e
                },
                initialAdded: s,
                onKeywordAdded: n,
                addable: !0,
                namespace: "video-companion"
            })
        },
        render: function() {
            var e = [{
                name: "YT Search",
                content: React.createElement(VC_DataTable, {
                    data: this.props.ytSearchData,
                    hook: this.searchHook,
                    headings: this.searchHeadings
                }),
                hasContent: !_.isEmpty(this.props.ytSearchData)
            }, {
                name: "YT Suggested",
                content: React.createElement(VC_DataTable, {
                    data: this.props.ytSuggestedData,
                    hook: this.linkHook,
                    headings: this.suggestedHeadings
                }),
                hasContent: !_.isEmpty(this.props.ytSuggestedData)
            }];
            return React.createElement(Tabs, {
                tabs: e
            })
        }
    }),
    VC_YtSearchSuggestedPopover = wrapComponent(VC_YtSearchSuggestedPopover_Inner, VideoCompanionStore, function(e) {
        return {
            ytSearchData: (e.data.insight_traffic_yt_search || {}).response,
            ytSuggestedData: (e.data.insight_traffic_yt_suggested || {}).response,
            videoReferrers: e.data.suggested_video_referrer_details,
            keywords: e.data.keywords || [],
            addKeyword: VideoCompanionActions.addKeyword
        }
    });
VC_YtSearchSuggestedPopover.canDisplay = function(e) {
    var t = (e.insight_traffic_yt_search || {}).response,
        a = (e.insight_traffic_yt_suggested || {}).response;
    return !_.isEmpty(t) || !_.isEmpty(a)
};
var VideoCompanionBase_Inner = React.createClass({
        displayName: "VideoCompanionBase_Inner",
        propTypes: {
            loading: React.PropTypes.bool,
            error: React.PropTypes.bool,
            authed: React.PropTypes.bool
        },
        render: function() {
            var e = this.props.error,
                t = this.props.authed,
                a = this.props.loading || null === e && null === t;
            return a ? React.createElement(VC_Loading, null) : e ? React.createElement(VC_Error, null) : t ? React.createElement(VC_Authed, null) : React.createElement(VC_Unauthed, null)
        }
    }),
    VideoCompanionBase = wrapComponent(VideoCompanionBase_Inner, MainStore),
    VideoCompanionExtra = React.createClass({
        displayName: "VideoCompanionExtra",
        mixins: [createStoreMixin(MainStore)],
        componentWillMount: function() {
            ytApi().getLocalStats(["channelId", "duration"], function(e) {
                var t = ["AdvancedEmbedBase", "MassLikeBase"];
                api().getChannel(e.channelId) && (t = ["all"]), this.setState({
                    requestedFeatures: t,
                    stats: e
                })
            }.bind(this))
        },
        render: function() {
            if (!this.state.authed) return null;
            var e = ytApi().currentVideoID();
            if (!e || !this.state.requestedFeatures) return null;
            var t = {
                features: this.state.requestedFeatures,
                video: {
                    id: e,
                    title: ytApi().currentVideoTitle(),
                    thumbnail: ytApi().currentVideoThumbnail(),
                    description: ytApi().currentVideoDescription(),
                    duration: u.sec2time(this.state.stats.duration)
                }
            };
            return React.createElement(VideoActionsDropdownMenu, t)
        }
    }),
    VideoCompanionUnauthed = React.createClass({
        displayName: "VideoCompanionUnauthed",
        render: function() {
            return React.createElement("div", null, "Boi, u dun logged out. Get outta here")
        }
    }),
    VideoFrame = React.createClass({
        displayName: "VideoFrame",
        propTypes: {
            video: React.PropTypes.object.isRequired,
            content: React.PropTypes.node,
            indicator: React.PropTypes.bool,
            selected: React.PropTypes.bool,
            toggleSelected: React.PropTypes.func
        },
        getInitialState: function() {
            return {
                open: !1
            }
        },
        onToggleOpen: function() {
            this.setState({
                open: !this.state.open
            })
        },
        onClickCheckbox: function(e) {
            e.stopPropagation()
        },
        onChangeCheckbox: function() {
            this.props.toggleSelected()
        },
        render: function() {
            var e = this.props.video,
                t = classNames("video-frame", {
                    "video-frame-open": this.state.open,
                    indicated: this.props.indicator || this.props.selected
                }),
                a = this.state.open ? "auto" : "hidden",
                s = React.createElement("div", {
                    className: "video-frame-content",
                    style: {
                        display: a
                    }
                }, this.props.children || this.props.content);
            return React.createElement("div", {
                key: e.id,
                className: t
            }, React.createElement("header", {
                onClick: this.onToggleOpen
            }, this.checkbox(), React.createElement("img", {
                className: "video-thumbnail",
                src: e.thumb
            }), React.createElement("span", {
                className: "video-title"
            }, e.title), React.createElement("span", {
                className: "video-duration"
            }, e.duration), this.indicator(), this.toggleOpen()), s)
        },
        checkbox: function() {
            return void 0 !== this.props.selected ? React.createElement("input", {
                type: "checkbox",
                checked: this.props.selected,
                onChange: this.onChangeCheckbox,
                onClick: this.onClickCheckbox
            }) : void 0
        },
        indicator: function() {
            return this.props.indicator ? React.createElement("span", {
                className: "indicator"
            }) : void 0
        },
        toggleOpen: function() {
            var e = this.state.open ? "Close " : "Open ";
            return React.createElement("button", {
                onClick: this.onToggleOpen,
                className: "toggle-open"
            }, e)
        }
    }),
    VideoListItem = React.createClass({
        displayName: "VideoListItem",
        propTypes: {
            data: React.PropTypes.object.isRequired,
            mayAddKeywords: React.PropTypes.bool,
            namespace: React.PropTypes.string,
            hidKeywords: React.PropTypes.array,
            index: React.PropTypes.number,
            speedometer: React.PropTypes.bool
        },
        getDefaultProps: function() {
            return {
                speedometer: !0
            }
        },
        render: function() {
            var e = this.props.data.id,
                t = u.getVideoUrl(e),
                a = "https://i.ytimg.com/vi/" + e + "/default.jpg",
                s = moment(this.props.data.published_at).fromNow(),
                n = formatNumber(this.props.data.statistics.viewCount),
                i = formatNumber(this.props.data.vph),
                o = React.createElement(KeywordInspector.Components.KeywordList, {
                    keywords: this.props.data.tags,
                    mayAddKeywords: this.props.mayAddKeywords,
                    namespace: this.props.namespace,
                    hidKeywords: this.props.hidKeywords
                }),
                r = _.isNumber(this.props.index) ? React.createElement("div", {
                    className: "index-badge"
                }, this.props.index) : null,
                c = this.props.speedometer ? React.createElement(Speedometer, {
                    vph: this.props.data.vph
                }) : null,
                l = this.props.data.related_to.join(", "),
                d = l ? React.createElement("span", {
                    className: "matches-list"
                }, "Matches: ", l) : null;
            return React.createElement("div", {
                className: "vidiq-video-list-item"
            }, React.createElement("div", {
                className: "thumb-container"
            }, React.createElement("img", {
                src: a,
                className: "thumb"
            })), React.createElement("div", {
                className: "video-right"
            }, React.createElement("h4", null, React.createElement("a", {
                href: t,
                target: "new"
            }, this.props.data.title)), React.createElement("span", {
                className: "video-info"
            }, React.createElement("span", {
                className: "video-info-item"
            }, "by ", React.createElement("b", null, this.props.data.channel_title)), React.createElement("span", {
                className: "video-info-item"
            }, s), React.createElement("span", {
                className: "video-info-item"
            }, React.createElement("b", null, n), " views"), React.createElement("span", {
                className: "video-info-item"
            }, React.createElement("b", null, i), " VPH")), React.createElement("p", {
                className: "vidiq-item-description"
            }, u.truncate(this.props.data.description, 100)), o, d), r, c)
        }
    }),
    YouTubeButton = React.createClass({
        displayName: "YouTubeButton",
        propTypes: {
            text: React.PropTypes.string.isRequired,
            onClick: React.PropTypes.func.isRequired
        },
        render: function() {
            var e = "yt-uix-button yt-uix-button-default yt-uix-button-size-default";
            return React.createElement("button", {
                className: e,
                onClick: this.props.onClick
            }, React.createElement(ButtonLogo, null), this.props.text)
        }
    });
var AnnotationCardTemplatesActions = {
        update: function(t) {
            AppDispatcher.dispatch({
                action: AnnotationCardTemplatesConstants.UPDATE,
                data: t
            })
        },
        findCache: function() {
            var t = AnnotationCardTemplatesStore.getData(),
                e = t.templates;
            return !e || _.isEmpty(e) ? null : e
        },
        fetch: function() {
            this.update({
                loading: !0
            }), UserSettings.fetchTemplates("annotation", this.findCache).done(function(t) {
                this.update({
                    templates: t || {},
                    loading: !1
                })
            }.bind(this)).fail(function(t) {
                this.update({
                    message: "Could not get templates: " + t.status,
                    loading: !1
                })
            }.bind(this))
        },
        save: function(t, e) {
            this.update({
                loading: !0
            });
            var n = {
                type: "annotation",
                name: e,
                findCache: this.findCache,
                data: {
                    videoId: t
                }
            };
            UserSettings.saveTemplate(n).done(function(t) {
                this.update({
                    templates: t,
                    message: e + " saved successfully!",
                    loading: !1
                })
            }.bind(this)).fail(function(t) {
                this.update({
                    message: "There was a problem saving " + e + ": " + t.status,
                    loading: !1
                })
            })
        },
        loadCards: function(t, e) {
            Cards.get(t).done(function(t) {
                Cards.createMany(e, t).done(function() {
                    window.location.reload(), this.update({
                        loading: !1
                    })
                }.bind(this)).fail(function(t) {
                    this.update({
                        message: "Failed to load cards: " + t.status,
                        loading: !1
                    })
                }.bind(this))
            }.bind(this)).fail(function(t) {
                this.update({
                    message: "Failed to load cards: " + t.status,
                    loading: !1
                })
            }.bind(this))
        },
        loadAnnotations: function(t, e) {
            Annotations.get(t).done(function(t) {
                Annotations.set(e, t).done(function() {
                    window.location.reload(), this.update({
                        loading: !1
                    })
                }.bind(this)).fail(function(t) {
                    this.update({
                        message: "Failed to load annotations: " + t.status,
                        loading: !1
                    })
                }.bind(this))
            }.bind(this)).fail(function(t) {
                this.update({
                    message: "Failed to load annotations: " + t.status,
                    loading: !1
                })
            }.bind(this))
        },
        load: function(t, e, n) {
            this.update({
                loading: !0
            }), "annotate" === t ? this.loadAnnotations(e, n) : "card" === t && this.loadCards(e, n)
        },
        "delete": function(t) {
            this.update({
                loading: !0
            }), UserSettings.deleteTemplate("annotation", t, this.findCache).done(function(e) {
                this.update({
                    templates: e,
                    message: t + " deleted successfully!",
                    loading: !1
                })
            }.bind(this)).fail(function(e) {
                this.update({
                    message: "There was a problem deleting " + t + ": " + e.status,
                    loading: !1
                })
            })
        },
        checkResources: function(t) {
            var e = AnnotationCardTemplatesStore.getData().hasResources;
            setInterval(function() {
                var n = "annotate" === t ? $(".timeline-annotation") : $(".annotator-list-item");
                n.length && !e[t] ? (e[t] = !0, this.update({
                    hasResources: e
                })) : !n.length && e[t] && (e[t] = !1, this.update({
                    hasResources: e
                }))
            }.bind(this), 2e3)
        }
    },
    AnnotationsActions = {
        cancel: function() {
            GrandCentral.cancel("annotations"), AnnotationsActions.updateSelf({
                loading: !1
            })
        },
        updateSelf: function(t) {
            AppDispatcher.dispatch({
                action: AnnotationsConstants.UPDATE_SELF,
                data: t
            })
        },
        fetch: function(t) {
            _.isString(t) && (t = [t]), t.length && AppDispatcher.dispatch({
                action: AnnotationsConstants.FETCH,
                videoIds: t
            })
        },
        "delete": function(t) {
            return Annotations["delete"](t._videoId, [t]).done(function() {
                log("AnnotationsStore > DELETE"), AppDispatcher.dispatch({
                    action: AnnotationsConstants.DELETE,
                    annotation: t,
                    videoId: t._videoId
                })
            })
        },
        update: function(t) {
            return Annotations.set(t._videoId, [t]).done(function() {
                log("AnnotationsStore > UPDATE"), AppDispatcher.dispatch({
                    action: AnnotationsConstants.UPDATE,
                    annotation: t,
                    videoId: t._videoId
                })
            })
        }
    },
    CardsActions = {
        cancel: function() {
            GrandCentral.cancel("cards"), CardsActions.updateSelf({
                loading: !1
            })
        },
        updateSelf: function(t) {
            AppDispatcher.dispatch({
                action: CardsConstants.UPDATE_SELF,
                data: t
            })
        },
        fetch: function(t) {
            _.isString(t) && (t = [t]), t.length && AppDispatcher.dispatch({
                action: CardsConstants.FETCH,
                videoIds: t
            })
        },
        "delete": function(t) {
            return Cards["delete"](t._videoId, t).done(function() {
                log("CardsStore > DELETE"), AppDispatcher.dispatch({
                    action: CardsConstants.DELETE,
                    videoId: t._videoId,
                    card: t
                })
            })
        },
        update: function(t) {
            return Cards.update(t._videoId, t).done(function() {
                log("CardsStore > UPDATE"), AppDispatcher.dispatch({
                    action: CardsConstants.UPDATE,
                    videoId: t._videoId,
                    card: t
                })
            })
        }
    },
    CommentTemplatesActions = {
        update: function(t) {
            AppDispatcher.dispatch({
                data: t,
                action: CommentTemplatesConstants.UPDATE
            })
        },
        findCache: function() {
            var t = CommentTemplatesStore.getData(),
                e = t.templates;
            return !e || _.isEmpty(e) ? null : e
        },
        saveTemplate: function(t, e) {
            var n = new $.Deferred;
            return UserSettings.saveTemplate({
                type: "comment",
                name: t,
                data: e,
                findCache: this.findCache
            }).done(function(t) {
                this.update({
                    templates: t
                }), n.resolve()
            }.bind(this)).fail(function(e) {
                log("CommentTemplatesActions.saveTemplate error", t, e), n.reject(e)
            }), n.promise()
        },
        deleteTemplate: function(t) {
            var e = new $.Deferred;
            return UserSettings.deleteTemplate("comment", t, this.findCache).done(function(t) {
                this.update({
                    templates: t
                }), e.resolve()
            }.bind(this)).fail(function(n) {
                log("CommentTemplatesActions.deleteTemplate error", t, n), e.reject(n)
            }), e.promise()
        },
        rename: function(t, e) {
            var n = new $.Deferred;
            if (t === e) n.resolve(e);
            else {
                var i = CommentTemplatesStore.getData(),
                    a = i.templates[t];
                this.deleteTemplate(t).done(function() {
                    this.saveTemplate(e, a).done(function() {
                        this.update({
                            selectedName: e,
                            selectedText: a
                        }), n.resolve(e)
                    }.bind(this)).fail(function(t) {
                        n.reject(t)
                    })
                }.bind(this)).fail(function(t) {
                    n.reject(t)
                })
            }
            return n.promise()
        },
        fetch: function() {
            UserSettings.fetchTemplates("comment", this.findCache).done(function(t) {
                this.update({
                    templates: t
                })
            }.bind(this)).fail(function(t) {
                log("CommentTemplatesActions.fetch error", t)
            })
        }
    },
    CommentsActions = {
        update: function(t) {
            AppDispatcher.dispatch({
                payload: t,
                action: CommentsConstants.UPDATE
            })
        },
        addThread: function(t) {
            AppDispatcher.dispatch({
                thread: t,
                action: CommentsConstants.ADD_THREAD
            })
        },
        registerThread: function() {
            AppDispatcher.dispatch({
                action: CommentsConstants.REGISTER_THREAD
            })
        }
    },
    FilterActions = {
        updateSelf: function(t) {
            AppDispatcher.dispatch({
                action: FilterConstants.UPDATE_SELF,
                data: t
            })
        },
        filter: function(t) {
            AppDispatcher.dispatch({
                action: FilterConstants.FILTER,
                fragment: t
            })
        },
        set: function(t, e, n) {
            FilterStore.set(t, e, n)
        }
    },
    KeywordDataActions = {
        fetchKeywordData: function(t) {
            var e = _.keys(KeywordDataStore.getData()),
                n = _.difference(t, e);
            e.length && _.isEmpty(n) || $.get(api().base + "hottersearch", {
                skip_recs: !0,
                q: n
            }).done(_.partial(this.fromResponse.bind(this), _, n))
        },
        fromResponse: function(t) {
            var e = _.extend({}, t.search_stats.compvol || {}),
                n = _.keys(e);
            _.each(n, function(t) {
                e[t] ? _.extend(e[t], {
                    keyword: t
                }) : e[t] = {
                    keyword: t
                }
            }), this.update(e)
        },
        update: function(t) {
            AppDispatcher.dispatch({
                payload: t,
                action: KeywordDataConstants.UPDATE
            })
        }
    },
    MainActions = {
        update: function(t) {
            AppDispatcher.dispatch({
                action: MainConstants.UPDATE,
                data: t
            })
        }
    },
    MassExportActions = {
        start: function(t) {
            AppDispatcher.dispatch({
                action: MassExportConstants.START,
                channel: t
            })
        },
        cancel: function() {
            AppDispatcher.dispatch({
                action: MassExportConstants.CANCEL
            })
        }
    },
    MassLikeActions = {
        fetchChannels: function() {
            AppDispatcher.dispatch({
                action: MassLikeConstants.FETCH_CHANNELS
            })
        },
        selectChannel: function(t) {
            AppDispatcher.dispatch({
                action: MassLikeConstants.SELECT_CHANNEL,
                channelId: t
            })
        },
        deselectChannel: function(t) {
            AppDispatcher.dispatch({
                action: MassLikeConstants.DESELECT_CHANNEL,
                channelId: t
            })
        },
        selectAll: function() {
            AppDispatcher.dispatch({
                action: MassLikeConstants.SELECT_ALL
            })
        },
        deselectAll: function() {
            AppDispatcher.dispatch({
                action: MassLikeConstants.DESELECT_ALL
            })
        },
        massLike: function(t) {
            AppDispatcher.dispatch({
                action: MassLikeConstants.MASS_LIKE,
                videoId: t
            })
        }
    },
    MasterVideosActions = {
        ensureVideo: function(t) {
            function e() {
                return MasterVideosStore.findByTempId(t)
            }
            var n = e();
            return n ? n : (log("MasterVideosActions#ensureVideo > creating video %s", t), this.createVideo(t), e())
        },
        createVideo: function(t) {
            AppDispatcher.dispatch({
                action: MasterVideosConstants.CREATE_VIDEO,
                tempId: t
            })
        },
        createFacebookVideo: function(t, e) {
            AppDispatcher.dispatch({
                action: MasterVideosConstants.CREATE_FACEBOOK_VIDEO,
                tempId: t,
                data: e
            })
        },
        updateFacebookVideo: function(t, e) {
            AppDispatcher.dispatch({
                action: MasterVideosConstants.UPDATE_FACEBOOK_VIDEO,
                tempId: t,
                data: e
            })
        },
        setFile: function(t, e) {
            AppDispatcher.dispatch({
                action: MasterVideosConstants.SET_FILE,
                tempId: t,
                file: e
            })
        },
        setYoutubeId: function(t, e) {
            AppDispatcher.dispatch({
                action: MasterVideosConstants.SET_YOUTUBE_ID,
                tempId: t,
                youtubeId: e
            })
        },
        startUpload: function(t) {
            AppDispatcher.dispatch({
                action: MasterVideosConstants.START_UPLOAD,
                tempId: t
            })
        },
        cancelUpload: function(t, e) {
            AppDispatcher.dispatch({
                action: MasterVideosConstants.CANCEL_UPLOAD,
                tempId: t,
                status: e
            })
        },
        syndicate: function(t, e) {
            AppDispatcher.dispatch({
                action: MasterVideosConstants.SYNDICATE,
                tempId: t,
                service: e
            })
        },
        loadFromYoutubeId: function(t) {
            AppDispatcher.dispatch({
                action: MasterVideosConstants.LOAD_FROM_YOUTUBE_ID,
                youtubeId: t
            })
        }
    },
    MyVideosActions = {
        updateSelf: function(t, e) {
            AppDispatcher.dispatch({
                action: MyVideosConstants.UPDATE_SELF,
                data: t,
                meta: e
            })
        },
        fetchAll: function(t) {
            AppDispatcher.dispatch({
                action: MyVideosConstants.FETCH_ALL,
                start: t
            })
        },
        fetchPage: function(t) {
            AppDispatcher.dispatch({
                action: MyVideosConstants.FETCH_PAGE,
                page: t
            })
        },
        fetchUntil: function(t) {
            if (0 !== t) {
                if (!t) return this["continue"]();
                var e = MyVideosStore.getData();
                if (!(e.videos.length >= t || e.finished)) {
                    var n = function() {
                        var e = MyVideosStore.getData();
                        (e.videos.length >= t || e.finished) && (MyVideosStore.removeChangeListener(n), setTimeout(function() {
                            MyVideosActions.cancel()
                        }))
                    };
                    MyVideosStore.addChangeListener(n), MyVideosActions.fetchAll(e.currentPage + 1)
                }
            }
        },
        cancel: function() {
            AppDispatcher.dispatch({
                action: MyVideosConstants.CANCEL
            })
        },
        "continue": function() {
            var t = MyVideosStore.getData();
            t.finished || MyVideosActions.fetchAll(t.currentPage + 1)
        }
    },
    PlaylistsActions = {
        updateSelf: function(t, e) {
            AppDispatcher.dispatch({
                action: PlaylistsConstants.UPDATE_SELF,
                data: t,
                meta: e
            })
        },
        fetch: function() {
            AppDispatcher.dispatch({
                action: PlaylistsConstants.FETCH
            })
        }
    },
    SubscribersActions = {
        update: function(t) {
            AppDispatcher.dispatch({
                payload: t,
                action: SubscribersConstants.UPDATE
            })
        },
        fetch: function() {
            if (!SubscribersStore.isEmpty()) {
                var t = new $.Deferred;
                return t.resolve(), t.promise()
            }
            return Subscribers.get().done(function(t) {
                this.update({
                    subscribers: t
                })
            }.bind(this))
        }
    },
    TemporaryActions = {
        updateSelf: function(t, e) {
            AppDispatcher.dispatch({
                action: TemporaryConstants.UPDATE_SELF,
                data: t,
                extend: e !== !1
            })
        },
        set: function(t, e) {
            this.updateSelf(_.object([
                [t, _.extend({}, e)]
            ]))
        },
        clear: function() {
            this.updateSelf({}, !1)
        }
    },
    ThumbnailEditorActions = {
        update: function(t) {
            AppDispatcher.dispatch({
                action: ThumbnailEditorConstants.UPDATE,
                data: t
            })
        },
        setCanvas: function(t, e) {
            var n = ThumbnailEditorStore.getData();
            this.update({
                canvases: _.extend({}, n.canvases, _.object([
                    [t, e]
                ]))
            })
        },
        changeTab: function(t, e) {
            var n = ThumbnailEditorStore.getData();
            this.update({
                activeTabs: _.extend({}, n.activeTabs, _.object([
                    [t, e]
                ]))
            })
        },
        save: function() {
            this.update({
                loading: !0,
                error: null
            });
            var t = ThumbnailEditorStore.getData(),
                e = dataURLtoBlob(t.thumbnailUri);
            u.getAuthToken().done(function(n) {
                MyVideos.thumbnail(t.videoId, e, n).done(function() {
                    this.update({
                        loading: !1,
                        saved: !0
                    })
                }.bind(this)).fail(function(t) {
                    this.update({
                        loading: !1,
                        error: _.isString(t) ? t : "An error occurred"
                    })
                }.bind(this))
            }.bind(this)).fail(function() {
                this.update({
                    loading: !1
                })
            }.bind(this))
        },
        setCurrentThumbnail: function() {
            var t = ThumbnailEditorStore.getData().videoId,
                e = "https://i.ytimg.com/vi/" + t,
                n = e + "/maxresdefault.jpg";
            this.getThumbnailFromUrl(n).done(function(t) {
                this.update({
                    currentThumbnail: {
                        url: t,
                        resolution: "1280  720 (HD)"
                    }
                })
            }.bind(this)).fail(function(t) {
                404 === t && (log("Failed getting maxresdefault, trying mqdefault", t), n = e + "/mqdefault.jpg", this.getThumbnailFromUrl(n).done(function(t) {
                    this.update({
                        currentThumbnail: {
                            url: t,
                            resolution: "320  180"
                        }
                    })
                }.bind(this)).fail(function(t) {
                    log("Failed getting mqdefault", t), this.update({
                        currentThumbnail: {
                            error: "Could not retrieve current thumbnail"
                        }
                    })
                }.bind(this)))
            }.bind(this))
        },
        getThumbnailFromUrl: function(t) {
            var e = new $.Deferred,
                n = new XMLHttpRequest;
            return n.open("GET", t, !0), n.responseType = "arraybuffer", n.onload = function() {
                if (404 === n.status) return void e.reject(n.status);
                var t = new Uint8Array(this.response),
                    i = new Blob([t], {
                        type: "image/jpeg"
                    }),
                    a = window.URL || window.webkitURL,
                    s = a.createObjectURL(i);
                e.resolve(s)
            }, n.send(), e.promise()
        }
    };
_.bindAll(ThumbnailEditorActions, "changeTab", "setCanvas", "save");
var ThumbnailTemplatesActions = {
        update: function(t) {
            AppDispatcher.dispatch({
                action: ThumbnailTemplatesConstants.UPDATE,
                data: t
            })
        },
        findCache: function() {
            var t = ThumbnailTemplatesStore.getData(),
                e = t.thumbnail_templates;
            return !e || _.isEmpty(e) ? null : e
        },
        fetchTemplates: function() {
            UserSettings.fetchTemplates("thumbnail", this.findCache).done(function(t) {
                ThumbnailTemplatesActions.createBlobs(t)
            })
        },
        createBlobs: function(t) {
            Templates.createImageBlobs(t).done(function(t) {
                ThumbnailTemplatesActions.update({
                    thumbnail_templates: t,
                    loading: !1
                })
            })
        },
        "delete": function(t) {
            this.update({
                loading: !0
            }), UserSettings.deleteTemplate("thumbnail", t, this.findCache).done(function(e) {
                Templates.updateSuccess(t, "deleted successfully!", e)
            }).fail(function(e) {
                Templates.updateFailure("There was a problem deleting " + t + ": " + e)
            })
        },
        save: function(t, e) {
            this.update({
                loading: !0
            }), Templates.getAdjustedObjects(t, e).done(function(e) {
                var n = {
                    type: "thumbnail",
                    name: t,
                    findCache: this.findCache,
                    data: e
                };
                UserSettings.saveTemplate(n).done(function(e) {
                    Templates.updateSuccess(t, "saved successfully!", e)
                }).fail(function(t) {
                    Templates.updateFailure("Template not saved: " + t)
                })
            }.bind(this))
        }
    },
    TranslationActions = {
        translate: function(t, e) {
            var n = TranslationStore.id(t).getData(),
                i = api().featurePermitted("translate") ? null : 3,
                a = i ? _.first(e, i) : e;
            n.source !== n.target && Translations.get(a, n.source, n.target).done(function(e) {
                var n = _.map(e.data.translations, function(t) {
                    return t.translatedText.replace(/&#39;/g, "'")
                });
                AppDispatcher.dispatch({
                    id: t,
                    translated: n,
                    action: TranslationConstants.TRANSLATE
                })
            }).fail(function(e) {
                AppDispatcher.dispatch({
                    id: t,
                    payload: {
                        error: !0
                    },
                    action: TranslationConstants.UPDATE
                }), log("There was a problem getting your translations...", e)
            })
        },
        updateLanguage: function(t, e, n) {
            AppDispatcher.dispatch({
                id: t,
                key: e,
                language: n,
                action: TranslationConstants.UPDATE_LANGUAGE
            })
        },
        update: function(t, e) {
            AppDispatcher.dispatch({
                id: t,
                payload: e,
                action: TranslationConstants.UPDATE
            })
        }
    },
    TrendingVideosActions = {
        sort: function(t) {
            AppDispatcher.dispatch({
                action: TrendingVideosConstants.SORT,
                sortValue: t
            })
        },
        fetch: function(t, e, n) {
            if (_.isObject(t)) {
                var i = t;
                e = i.country, n = i.language, t = i.query || this._getQuery(i)
            }
            AppDispatcher.dispatch({
                action: TrendingVideosConstants.FETCH,
                query: t,
                country: e,
                language: n
            })
        },
        _filterBlacklist: function(t) {
            var e = "yt:stretch=16:9 if not or and but the a to how what why where when this that".split(" ");
            return _.filter(t || [], function(t) {
                return e.indexOf(t.toLowerCase()) < 0
            })
        },
        _getQuery: function(t) {
            var e = this._filterBlacklist(t.title.split(" ")),
                n = this._filterBlacklist(t.keywords);
            return n.length ? n : e
        }
    },
    UploadCompanionActions = {
        update: function(t, e) {
            e = this._getAdjustedPayload(t, e), e && AppDispatcher.dispatch({
                id: t,
                payload: e,
                action: UploadCompanionConstants.UPDATE
            })
        },
        updateSetting: function(t, e, n) {
            AppDispatcher.dispatch({
                id: t,
                key: e,
                value: n,
                action: UploadCompanionConstants.UPDATE_SETTING
            })
        },
        fetchHotSearch: function(t, e) {
            var n;
            if (!e.permitted && !_.isEmpty(e.hotSearch)) return !1;
            if (e.permitted) {
                if (e.permitted && !e.optimized) return !1;
                e.permitted && e.optimized && (n = e.keywords)
            } else n = e.keywords[0];
            return n ? HS.get({
                query: n,
                country: e.country,
                language: e.language,
                kwScore: !0
            }).done(function(e) {
                KeywordDataActions.fromResponse(e), this.update(t, {
                    hotSearch: e,
                    loading: !1
                })
            }.bind(this)) : !1
        },
        setInitOptimStatus: function(t) {
            var e = UploadCompanionStore.id(t);
            if (e) {
                var n = e.getData();
                n.videoId && !n.optimized && (this.update(t, {
                    loading: !0
                }), api().getVideoOptimStatus(n.videoId).done(function(e) {
                    this.update(t, {
                        optimized: e[n.videoId]
                    })
                }.bind(this)).always(function() {
                    this.update(t, {
                        loading: !1
                    })
                }.bind(this)))
            }
        },
        enableOptim: function(t) {
            var e = UploadCompanionStore.id(t);
            e && (this.update(t, {
                loading: !0
            }), api().enableVideoOptim(e.getData().videoId).always(function(e) {
                e && "success" === e.status && this.update(t, {
                    optimized: !0,
                    loading: !1
                })
            }.bind(this)))
        },
        _getAdjustedPayload: function(t, e) {
            e = _.extend({}, e);
            var n = UploadCompanionStore.id(t);
            if (n) {
                var i = n.getData(),
                    a = _.extend({}, i, e);
                e.query = TrendingVideosActions._getQuery(a);
                var s = i.optimized !== a.optimized,
                    o = !_.isEqual(i.keywords, a.keywords),
                    d = i.country !== a.country,
                    c = i.language !== a.language,
                    r = !_.isEqual(i.hotSearch, a.hotSearch),
                    p = i.title !== a.title,
                    u = i.desc !== a.desc;
                if ((s || o || d || c) && this.fetchHotSearch(t, a) && (e.loading = !0), r) e.topKeywords = n.getTopKeywords(a), e.recTitle = n.getSuggested(e.topKeywords, a.title), e.recDesc = n.getSuggested(e.topKeywords, a.desc);
                else {
                    var l = a.topKeywords;
                    p && (e.recTitle = n.getSuggested(l, a.title)), u && (e.recDesc = n.getSuggested(l, a.desc))
                }
                return e
            }
        }
    },
    VideoBufferActions = {
        set: function(t) {
            t.playlist || (t.playlist = null), t.limit || (t.limit = null), t.limit && (t.mode = "limit"), this.update(t)
        },
        update: function(t) {
            AppDispatcher.dispatch({
                action: VideoBufferConstants.UPDATE_SELF,
                data: t
            })
        },
        fetch: function() {
            var t = VideoBufferStore.getData();
            switch (t.mode) {
                case "playlist":
                    return;
                case "list":
                    return void VideosActions.fetch(t.list);
                case "limit":
                    var e = null === t.limit || t.videos.length < t.limit;
                    e && MyVideosActions.fetchUntil(t.limit)
            }
        },
        cancel: function() {
            var t = VideoBufferStore.getData();
            t.playlist || MyVideosActions.cancel()
        },
        registerScraping: function() {
            this.update({
                willScrape: !0
            })
        },
        ensureScrapedData: function() {
            _.each(VideoBufferStore.getData().videos, function(t) {
                if (!t._scrapedStats) {
                    var e = _.partial(VideosActions.scrapeVideo, t).bind(VideosActions);
                    GrandCentral.push(e, "scrape-video", t.id)
                }
            }, this)
        }
    },
    VideoCompanionActions = {
        update: function(t, e) {
            AppDispatcher.dispatch({
                payload: t,
                action: VideoCompanionConstants.UPDATE,
                forVideo: e
            })
        },
        requestData: function() {
            AppDispatcher.dispatch({
                action: VideoCompanionConstants.REQUEST_DATA
            })
        },
        toggleCollapsed: function() {
            this.update({
                collapsed: !VideoCompanionStore.getData().collapsed
            })
        },
        addKeyword: function(t) {
            var e = VideoCompanionStore.getData();
            t && t.keyword && (AppDispatcher.dispatch({
                payload: t,
                action: VideoCompanionConstants.ADD_KEYWORD
            }), e.videoId && e.data.channel_id && api().addTag(t.keyword, e.videoId, e.data.channel_id))
        }
    };
_.bindAll(VideoCompanionActions, "toggleCollapsed", "addKeyword", "requestData", "update");
var VideoInfoActions = {
        update: function(t, e) {
            AppDispatcher.dispatch({
                id: t,
                payload: e,
                action: VideoInfoConstants.UPDATE
            })
        },
        getSocialStats: function(t) {
            var e = ytApi().getVideoStats(t),
                n = new $.Deferred;
            extApi().socialStatsForVideo(t, function(t) {
                n.resolve(t)
            }), $.when(e, n).done(function(e, n) {
                var i = {
                    socialMedia: {
                        youtube: {
                            likes: e.likes || 0,
                            dislikes: e.dislikes || 0,
                            comments: e.comments || 0,
                            total: 0
                        },
                        facebook: {
                            likes: n.fbLikes || 0,
                            comments: n.fbComments || 0,
                            shares: n.fbShares || 0,
                            total: 0
                        }
                    },
                    engagementRate: 0,
                    total: 0
                };
                _.each(i.socialMedia, function(t) {
                    t.total = _.reduce(_.values(t), function(t, e) {
                        return t + e
                    }, 0), i.total += t.total
                }, this);
                var a = i.total / e.views * 100;
                i.engagementRate = isFinite(a) ? a.toFixed(2) : 0, this.update(t, {
                    socialStats: i
                })
            }.bind(this))
        },
        scrapeVideoPage: function(t) {
            $.get(u.getVideoUrl(t)).done(function(e) {
                var n = {},
                    i = e.match(/"keywords":"([^"]+)/);
                if (i && i[1]) {
                    var a = i[1].split(",");
                    _.extend(n, {
                        keywords: a
                    })
                }
                _.extend(n, {
                    searchedForKeywords: !0
                }), this.update(t, n)
            }.bind(this))
        },
        getLikesDislikes: function(t) {
            GrandCentral.push(function() {
                return $.get(u.getVideoUrl(t)).done(function(e) {
                    var n = ytApi().getLocalLikesDislikes($(e));
                    this.update(t, {
                        scraped: n
                    })
                }.bind(this))
            }.bind(this), "get-likes-dislikes")
        }
    },
    VideosActions = {
        updateSelf: function(t) {
            AppDispatcher.dispatch({
                action: VideosConstants.UPDATE_SELF,
                data: t
            })
        },
        update: function(t, e) {
            AppDispatcher.dispatch({
                action: VideosConstants.UPDATE_VIDEO,
                videoId: t,
                fragment: e
            })
        },
        registerUpdate: function(t, e) {
            var n = VideosConstants;
            AppDispatcher.dispatch({
                action: t ? n.REGISTER_UPDATE : n.UNREGISTER_UPDATE,
                videoId: e
            })
        },
        fetch: function(t) {
            _.map(t, function(t) {
                VideosStore.data[t] || this.scrapeVideo({
                    id: t
                })
            }, this)
        },
        set: function(t) {
            var e = _.map(t, function(t) {
                    return _.extend({}, VideosStore.data[t.id] || {}, t)
                }),
                n = _.object(_.pluck(e, "id"), e);
            this.updateSelf(n)
        },
        scrapeVideo: function(t) {
            var e = new $.Deferred;
            if (!VideosStore._pending[t.id]) return this.registerUpdate(!0, t.id), Export.scrapeVideo(t.id).done(function(n) {
                n = _.extend({}, n, {
                    _scrapedStats: !0
                }), n.description = u.stripHtml(n.description), t.duration && delete n.duration, t.thumb && delete n.thumb, VideosActions.update(t.id, n), e.resolve()
            }).fail(function() {
                this.registerUpdate(!1, t.id), e.reject()
            }.bind(this)), e.promise()
        }
    };